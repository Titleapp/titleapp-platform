var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,o=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),s=(e,i,o,s)=>{if(i&&typeof i==`object`||typeof i==`function`)for(var c=r(i),l=0,u=c.length,d;l<u;l++)d=c[l],!a.call(e,d)&&d!==o&&t(e,d,{get:(e=>i[e]).bind(null,d),enumerable:!(s=n(i,d))||s.enumerable});return e},c=(n,r,a)=>(a=n==null?{}:e(i(n)),s(r||!n||!n.__esModule?t(a,`default`,{value:n,enumerable:!0}):a,n));(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var l=o((e=>{var t=Symbol.for(`react.transitional.element`),n=Symbol.for(`react.portal`),r=Symbol.for(`react.fragment`),i=Symbol.for(`react.strict_mode`),a=Symbol.for(`react.profiler`),o=Symbol.for(`react.consumer`),s=Symbol.for(`react.context`),c=Symbol.for(`react.forward_ref`),l=Symbol.for(`react.suspense`),u=Symbol.for(`react.memo`),d=Symbol.for(`react.lazy`),f=Symbol.for(`react.activity`),p=Symbol.iterator;function m(e){return typeof e!=`object`||!e?null:(e=p&&e[p]||e[`@@iterator`],typeof e==`function`?e:null)}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,_={};function v(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||h}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if(typeof e!=`object`&&typeof e!=`function`&&e!=null)throw Error(`takes an object of state variables to update or a function which returns an object of state variables.`);this.updater.enqueueSetState(this,e,t,`setState`)},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,`forceUpdate`)};function y(){}y.prototype=v.prototype;function b(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||h}var x=b.prototype=new y;x.constructor=b,g(x,v.prototype),x.isPureReactComponent=!0;var S=Array.isArray;function C(){}var w={H:null,A:null,T:null,S:null},ee=Object.prototype.hasOwnProperty;function te(e,n,r){var i=r.ref;return{$$typeof:t,type:e,key:n,ref:i===void 0?null:i,props:r}}function ne(e,t){return te(e.type,t,e.props)}function re(e){return typeof e==`object`&&!!e&&e.$$typeof===t}function ie(e){var t={"=":`=0`,":":`=2`};return`$`+e.replace(/[=:]/g,function(e){return t[e]})}var ae=/\/+/g;function oe(e,t){return typeof e==`object`&&e&&e.key!=null?ie(``+e.key):t.toString(36)}function se(e){switch(e.status){case`fulfilled`:return e.value;case`rejected`:throw e.reason;default:switch(typeof e.status==`string`?e.then(C,C):(e.status=`pending`,e.then(function(t){e.status===`pending`&&(e.status=`fulfilled`,e.value=t)},function(t){e.status===`pending`&&(e.status=`rejected`,e.reason=t)})),e.status){case`fulfilled`:return e.value;case`rejected`:throw e.reason}}throw e}function ce(e,r,i,a,o){var s=typeof e;(s===`undefined`||s===`boolean`)&&(e=null);var c=!1;if(e===null)c=!0;else switch(s){case`bigint`:case`string`:case`number`:c=!0;break;case`object`:switch(e.$$typeof){case t:case n:c=!0;break;case d:return c=e._init,ce(c(e._payload),r,i,a,o)}}if(c)return o=o(e),c=a===``?`.`+oe(e,0):a,S(o)?(i=``,c!=null&&(i=c.replace(ae,`$&/`)+`/`),ce(o,r,i,``,function(e){return e})):o!=null&&(re(o)&&(o=ne(o,i+(o.key==null||e&&e.key===o.key?``:(``+o.key).replace(ae,`$&/`)+`/`)+c)),r.push(o)),1;c=0;var l=a===``?`.`:a+`:`;if(S(e))for(var u=0;u<e.length;u++)a=e[u],s=l+oe(a,u),c+=ce(a,r,i,s,o);else if(u=m(e),typeof u==`function`)for(e=u.call(e),u=0;!(a=e.next()).done;)a=a.value,s=l+oe(a,u++),c+=ce(a,r,i,s,o);else if(s===`object`){if(typeof e.then==`function`)return ce(se(e),r,i,a,o);throw r=String(e),Error(`Objects are not valid as a React child (found: `+(r===`[object Object]`?`object with keys {`+Object.keys(e).join(`, `)+`}`:r)+`). If you meant to render a collection of children, use an array instead.`)}return c}function le(e,t,n){if(e==null)return e;var r=[],i=0;return ce(e,r,``,``,function(e){return t.call(n,e,i++)}),r}function ue(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(t){(e._status===0||e._status===-1)&&(e._status=1,e._result=t)},function(t){(e._status===0||e._status===-1)&&(e._status=2,e._result=t)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var T=typeof reportError==`function`?reportError:function(e){if(typeof window==`object`&&typeof window.ErrorEvent==`function`){var t=new window.ErrorEvent(`error`,{bubbles:!0,cancelable:!0,message:typeof e==`object`&&e&&typeof e.message==`string`?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process==`object`&&typeof process.emit==`function`){process.emit(`uncaughtException`,e);return}console.error(e)},E={map:le,forEach:function(e,t,n){le(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return le(e,function(){t++}),t},toArray:function(e){return le(e,function(e){return e})||[]},only:function(e){if(!re(e))throw Error(`React.Children.only expected to receive a single React element child.`);return e}};e.Activity=f,e.Children=E,e.Component=v,e.Fragment=r,e.Profiler=a,e.PureComponent=b,e.StrictMode=i,e.Suspense=l,e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,e.__COMPILER_RUNTIME={__proto__:null,c:function(e){return w.H.useMemoCache(e)}},e.cache=function(e){return function(){return e.apply(null,arguments)}},e.cacheSignal=function(){return null},e.cloneElement=function(e,t,n){if(e==null)throw Error(`The argument must be a React element, but you passed `+e+`.`);var r=g({},e.props),i=e.key;if(t!=null)for(a in t.key!==void 0&&(i=``+t.key),t)!ee.call(t,a)||a===`key`||a===`__self`||a===`__source`||a===`ref`&&t.ref===void 0||(r[a]=t[a]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var o=Array(a),s=0;s<a;s++)o[s]=arguments[s+2];r.children=o}return te(e.type,i,r)},e.createContext=function(e){return e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:o,_context:e},e},e.createElement=function(e,t,n){var r,i={},a=null;if(t!=null)for(r in t.key!==void 0&&(a=``+t.key),t)ee.call(t,r)&&r!==`key`&&r!==`__self`&&r!==`__source`&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var s=Array(o),c=0;c<o;c++)s[c]=arguments[c+2];i.children=s}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return te(e,a,i)},e.createRef=function(){return{current:null}},e.forwardRef=function(e){return{$$typeof:c,render:e}},e.isValidElement=re,e.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:ue}},e.memo=function(e,t){return{$$typeof:u,type:e,compare:t===void 0?null:t}},e.startTransition=function(e){var t=w.T,n={};w.T=n;try{var r=e(),i=w.S;i!==null&&i(n,r),typeof r==`object`&&r&&typeof r.then==`function`&&r.then(C,T)}catch(e){T(e)}finally{t!==null&&n.types!==null&&(t.types=n.types),w.T=t}},e.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},e.use=function(e){return w.H.use(e)},e.useActionState=function(e,t,n){return w.H.useActionState(e,t,n)},e.useCallback=function(e,t){return w.H.useCallback(e,t)},e.useContext=function(e){return w.H.useContext(e)},e.useDebugValue=function(){},e.useDeferredValue=function(e,t){return w.H.useDeferredValue(e,t)},e.useEffect=function(e,t){return w.H.useEffect(e,t)},e.useEffectEvent=function(e){return w.H.useEffectEvent(e)},e.useId=function(){return w.H.useId()},e.useImperativeHandle=function(e,t,n){return w.H.useImperativeHandle(e,t,n)},e.useInsertionEffect=function(e,t){return w.H.useInsertionEffect(e,t)},e.useLayoutEffect=function(e,t){return w.H.useLayoutEffect(e,t)},e.useMemo=function(e,t){return w.H.useMemo(e,t)},e.useOptimistic=function(e,t){return w.H.useOptimistic(e,t)},e.useReducer=function(e,t,n){return w.H.useReducer(e,t,n)},e.useRef=function(e){return w.H.useRef(e)},e.useState=function(e){return w.H.useState(e)},e.useSyncExternalStore=function(e,t,n){return w.H.useSyncExternalStore(e,t,n)},e.useTransition=function(){return w.H.useTransition()},e.version=`19.2.4`})),u=o(((e,t)=>{t.exports=l()})),d=o((e=>{function t(e,t){var n=e.length;e.push(t);a:for(;0<n;){var r=n-1>>>1,a=e[r];if(0<i(a,t))e[r]=t,e[n]=a,n=r;else break a}}function n(e){return e.length===0?null:e[0]}function r(e){if(e.length===0)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;a:for(var r=0,a=e.length,o=a>>>1;r<o;){var s=2*(r+1)-1,c=e[s],l=s+1,u=e[l];if(0>i(c,n))l<a&&0>i(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[s]=n,r=s);else if(l<a&&0>i(u,n))e[r]=u,e[l]=n,r=l;else break a}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return n===0?e.id-t.id:n}if(e.unstable_now=void 0,typeof performance==`object`&&typeof performance.now==`function`){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var c=[],l=[],u=1,d=null,f=3,p=!1,m=!1,h=!1,g=!1,_=typeof setTimeout==`function`?setTimeout:null,v=typeof clearTimeout==`function`?clearTimeout:null,y=typeof setImmediate<`u`?setImmediate:null;function b(e){for(var i=n(l);i!==null;){if(i.callback===null)r(l);else if(i.startTime<=e)r(l),i.sortIndex=i.expirationTime,t(c,i);else break;i=n(l)}}function x(e){if(h=!1,b(e),!m)if(n(c)!==null)m=!0,S||(S=!0,re());else{var t=n(l);t!==null&&oe(x,t.startTime-e)}}var S=!1,C=-1,w=5,ee=-1;function te(){return g?!0:!(e.unstable_now()-ee<w)}function ne(){if(g=!1,S){var t=e.unstable_now();ee=t;var i=!0;try{a:{m=!1,h&&(h=!1,v(C),C=-1),p=!0;var a=f;try{b:{for(b(t),d=n(c);d!==null&&!(d.expirationTime>t&&te());){var o=d.callback;if(typeof o==`function`){d.callback=null,f=d.priorityLevel;var s=o(d.expirationTime<=t);if(t=e.unstable_now(),typeof s==`function`){d.callback=s,b(t),i=!0;break b}d===n(c)&&r(c),b(t)}else r(c);d=n(c)}if(d!==null)i=!0;else{var u=n(l);u!==null&&oe(x,u.startTime-t),i=!1}}break a}finally{d=null,f=a,p=!1}i=void 0}}finally{i?re():S=!1}}}var re;if(typeof y==`function`)re=function(){y(ne)};else if(typeof MessageChannel<`u`){var ie=new MessageChannel,ae=ie.port2;ie.port1.onmessage=ne,re=function(){ae.postMessage(null)}}else re=function(){_(ne,0)};function oe(t,n){C=_(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error(`forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported`):w=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_requestPaint=function(){g=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_scheduleCallback=function(r,i,a){var o=e.unstable_now();switch(typeof a==`object`&&a?(a=a.delay,a=typeof a==`number`&&0<a?o+a:o):a=o,r){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return s=a+s,r={id:u++,callback:i,priorityLevel:r,startTime:a,expirationTime:s,sortIndex:-1},a>o?(r.sortIndex=a,t(l,r),n(c)===null&&r===n(l)&&(h?(v(C),C=-1):h=!0,oe(x,a-o))):(r.sortIndex=s,t(c,r),m||p||(m=!0,S||(S=!0,re()))),r},e.unstable_shouldYield=te,e.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}})),f=o(((e,t)=>{t.exports=d()})),p=o((e=>{var t=u();function n(e){var t=`https://react.dev/errors/`+e;if(1<arguments.length){t+=`?args[]=`+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+=`&args[]=`+encodeURIComponent(arguments[n])}return`Minified React error #`+e+`; visit `+t+` for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`}function r(){}var i={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for(`react.portal`);function o(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:r==null?null:``+r,children:e,containerInfo:t,implementation:n}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){if(e===`font`)return``;if(typeof t==`string`)return t===`use-credentials`?t:``}e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,e.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(n(299));return o(e,t,null,r)},e.flushSync=function(e){var t=s.T,n=i.p;try{if(s.T=null,i.p=2,e)return e()}finally{s.T=t,i.p=n,i.d.f()}},e.preconnect=function(e,t){typeof e==`string`&&(t?(t=t.crossOrigin,t=typeof t==`string`?t===`use-credentials`?t:``:void 0):t=null,i.d.C(e,t))},e.prefetchDNS=function(e){typeof e==`string`&&i.d.D(e)},e.preinit=function(e,t){if(typeof e==`string`&&t&&typeof t.as==`string`){var n=t.as,r=c(n,t.crossOrigin),a=typeof t.integrity==`string`?t.integrity:void 0,o=typeof t.fetchPriority==`string`?t.fetchPriority:void 0;n===`style`?i.d.S(e,typeof t.precedence==`string`?t.precedence:void 0,{crossOrigin:r,integrity:a,fetchPriority:o}):n===`script`&&i.d.X(e,{crossOrigin:r,integrity:a,fetchPriority:o,nonce:typeof t.nonce==`string`?t.nonce:void 0})}},e.preinitModule=function(e,t){if(typeof e==`string`)if(typeof t==`object`&&t){if(t.as==null||t.as===`script`){var n=c(t.as,t.crossOrigin);i.d.M(e,{crossOrigin:n,integrity:typeof t.integrity==`string`?t.integrity:void 0,nonce:typeof t.nonce==`string`?t.nonce:void 0})}}else t??i.d.M(e)},e.preload=function(e,t){if(typeof e==`string`&&typeof t==`object`&&t&&typeof t.as==`string`){var n=t.as,r=c(n,t.crossOrigin);i.d.L(e,n,{crossOrigin:r,integrity:typeof t.integrity==`string`?t.integrity:void 0,nonce:typeof t.nonce==`string`?t.nonce:void 0,type:typeof t.type==`string`?t.type:void 0,fetchPriority:typeof t.fetchPriority==`string`?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy==`string`?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet==`string`?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes==`string`?t.imageSizes:void 0,media:typeof t.media==`string`?t.media:void 0})}},e.preloadModule=function(e,t){if(typeof e==`string`)if(t){var n=c(t.as,t.crossOrigin);i.d.m(e,{as:typeof t.as==`string`&&t.as!==`script`?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity==`string`?t.integrity:void 0})}else i.d.m(e)},e.requestFormReset=function(e){i.d.r(e)},e.unstable_batchedUpdates=function(e,t){return e(t)},e.useFormState=function(e,t,n){return s.H.useFormState(e,t,n)},e.useFormStatus=function(){return s.H.useHostTransitionStatus()},e.version=`19.2.4`})),m=o(((e,t)=>{function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>`u`||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=`function`))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}n(),t.exports=p()})),h=o((e=>{var t=f(),n=u(),r=m();function i(e){var t=`https://react.dev/errors/`+e;if(1<arguments.length){t+=`?args[]=`+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+=`&args[]=`+encodeURIComponent(arguments[n])}return`Minified React error #`+e+`; visit `+t+` for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`}function a(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function o(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function s(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function c(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function l(e){if(o(e)!==e)throw Error(i(188))}function d(e){var t=e.alternate;if(!t){if(t=o(e),t===null)throw Error(i(188));return t===e?e:null}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var s=a.alternate;if(s===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===n)return l(a),e;if(s===r)return l(a),t;s=s.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=s;else{for(var c=!1,u=a.child;u;){if(u===n){c=!0,n=a,r=s;break}if(u===r){c=!0,r=a,n=s;break}u=u.sibling}if(!c){for(u=s.child;u;){if(u===n){c=!0,n=s,r=a;break}if(u===r){c=!0,r=s,n=a;break}u=u.sibling}if(!c)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(n.tag!==3)throw Error(i(188));return n.stateNode.current===n?e:t}function p(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=p(e),t!==null)return t;e=e.sibling}return null}var h=Object.assign,g=Symbol.for(`react.element`),_=Symbol.for(`react.transitional.element`),v=Symbol.for(`react.portal`),y=Symbol.for(`react.fragment`),b=Symbol.for(`react.strict_mode`),x=Symbol.for(`react.profiler`),S=Symbol.for(`react.consumer`),C=Symbol.for(`react.context`),w=Symbol.for(`react.forward_ref`),ee=Symbol.for(`react.suspense`),te=Symbol.for(`react.suspense_list`),ne=Symbol.for(`react.memo`),re=Symbol.for(`react.lazy`),ie=Symbol.for(`react.activity`),ae=Symbol.for(`react.memo_cache_sentinel`),oe=Symbol.iterator;function se(e){return typeof e!=`object`||!e?null:(e=oe&&e[oe]||e[`@@iterator`],typeof e==`function`?e:null)}var ce=Symbol.for(`react.client.reference`);function le(e){if(e==null)return null;if(typeof e==`function`)return e.$$typeof===ce?null:e.displayName||e.name||null;if(typeof e==`string`)return e;switch(e){case y:return`Fragment`;case x:return`Profiler`;case b:return`StrictMode`;case ee:return`Suspense`;case te:return`SuspenseList`;case ie:return`Activity`}if(typeof e==`object`)switch(e.$$typeof){case v:return`Portal`;case C:return e.displayName||`Context`;case S:return(e._context.displayName||`Context`)+`.Consumer`;case w:var t=e.render;return e=e.displayName,e||=(e=t.displayName||t.name||``,e===``?`ForwardRef`:`ForwardRef(`+e+`)`),e;case ne:return t=e.displayName||null,t===null?le(e.type)||`Memo`:t;case re:t=e._payload,e=e._init;try{return le(e(t))}catch{}}return null}var ue=Array.isArray,T=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,E=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},fe=[],pe=-1;function me(e){return{current:e}}function he(e){0>pe||(e.current=fe[pe],fe[pe]=null,pe--)}function D(e,t){pe++,fe[pe]=e.current,e.current=t}var ge=me(null),_e=me(null),ve=me(null),ye=me(null);function be(e,t){switch(D(ve,t),D(_e,e),D(ge,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Hd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Hd(t),e=Ud(t,e);else switch(e){case`svg`:e=1;break;case`math`:e=2;break;default:e=0}}he(ge),D(ge,e)}function xe(){he(ge),he(_e),he(ve)}function Se(e){e.memoizedState!==null&&D(ye,e);var t=ge.current,n=Ud(t,e.type);t!==n&&(D(_e,e),D(ge,n))}function Ce(e){_e.current===e&&(he(ge),he(_e)),ye.current===e&&(he(ye),$f._currentValue=de)}var we,Te;function Ee(e){if(we===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);we=t&&t[1]||``,Te=-1<e.stack.indexOf(`
    at`)?` (<anonymous>)`:-1<e.stack.indexOf(`@`)?`@unknown:0:0`:``}return`
`+we+e+Te}var De=!1;function Oe(e,t){if(!e||De)return``;De=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,`props`,{set:function(){throw Error()}}),typeof Reflect==`object`&&Reflect.construct){try{Reflect.construct(n,[])}catch(e){var r=e}Reflect.construct(e,[],n)}else{try{n.call()}catch(e){r=e}e.call(n.prototype)}}else{try{throw Error()}catch(e){r=e}(n=e())&&typeof n.catch==`function`&&n.catch(function(){})}}catch(e){if(e&&r&&typeof e.stack==`string`)return[e.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName=`DetermineComponentFrameRoot`;var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,`name`);i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,`name`,{value:`DetermineComponentFrameRoot`});var a=r.DetermineComponentFrameRoot(),o=a[0],s=a[1];if(o&&s){var c=o.split(`
`),l=s.split(`
`);for(i=r=0;r<c.length&&!c[r].includes(`DetermineComponentFrameRoot`);)r++;for(;i<l.length&&!l[i].includes(`DetermineComponentFrameRoot`);)i++;if(r===c.length||i===l.length)for(r=c.length-1,i=l.length-1;1<=r&&0<=i&&c[r]!==l[i];)i--;for(;1<=r&&0<=i;r--,i--)if(c[r]!==l[i]){if(r!==1||i!==1)do if(r--,i--,0>i||c[r]!==l[i]){var u=`
`+c[r].replace(` at new `,` at `);return e.displayName&&u.includes(`<anonymous>`)&&(u=u.replace(`<anonymous>`,e.displayName)),u}while(1<=r&&0<=i);break}}}finally{De=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:``)?Ee(n):``}function ke(e,t){switch(e.tag){case 26:case 27:case 5:return Ee(e.type);case 16:return Ee(`Lazy`);case 13:return e.child!==t&&t!==null?Ee(`Suspense Fallback`):Ee(`Suspense`);case 19:return Ee(`SuspenseList`);case 0:case 15:return Oe(e.type,!1);case 11:return Oe(e.type.render,!1);case 1:return Oe(e.type,!0);case 31:return Ee(`Activity`);default:return``}}function Ae(e){try{var t=``,n=null;do t+=ke(e,n),n=e,e=e.return;while(e);return t}catch(e){return`
Error generating stack: `+e.message+`
`+e.stack}}var je=Object.prototype.hasOwnProperty,Me=t.unstable_scheduleCallback,Ne=t.unstable_cancelCallback,Pe=t.unstable_shouldYield,Fe=t.unstable_requestPaint,Ie=t.unstable_now,Le=t.unstable_getCurrentPriorityLevel,Re=t.unstable_ImmediatePriority,ze=t.unstable_UserBlockingPriority,Be=t.unstable_NormalPriority,Ve=t.unstable_LowPriority,He=t.unstable_IdlePriority,Ue=t.log,We=t.unstable_setDisableYieldValue,Ge=null,Ke=null;function qe(e){if(typeof Ue==`function`&&We(e),Ke&&typeof Ke.setStrictMode==`function`)try{Ke.setStrictMode(Ge,e)}catch{}}var Je=Math.clz32?Math.clz32:Xe,O=Math.log,Ye=Math.LN2;function Xe(e){return e>>>=0,e===0?32:31-(O(e)/Ye|0)|0}var Ze=256,Qe=262144,$e=4194304;function et(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function tt(e,t,n){var r=e.pendingLanes;if(r===0)return 0;var i=0,a=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var s=r&134217727;return s===0?(s=r&~a,s===0?o===0?n||(n=r&~e,n!==0&&(i=et(n))):i=et(o):i=et(s)):(r=s&~a,r===0?(o&=s,o===0?n||(n=s&~e,n!==0&&(i=et(n))):i=et(o)):i=et(r)),i===0?0:t!==0&&t!==i&&(t&a)===0&&(a=i&-i,n=t&-t,a>=n||a===32&&n&4194048)?t:i}function nt(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function rt(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function it(){var e=$e;return $e<<=1,!($e&62914560)&&($e=4194304),e}function at(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ot(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function st(e,t,n,r,i,a){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,c=e.expirationTimes,l=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-Je(n),d=1<<u;s[u]=0,c[u]=-1;var f=l[u];if(f!==null)for(l[u]=null,u=0;u<f.length;u++){var p=f[u];p!==null&&(p.lane&=-536870913)}n&=~d}r!==0&&ct(e,r,0),a!==0&&i===0&&e.tag!==0&&(e.suspendedLanes|=a&~(o&~t))}function ct(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-Je(t);e.entangledLanes|=t,e.entanglements[r]=e.entanglements[r]|1073741824|n&261930}function lt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Je(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function ut(e,t){var n=t&-t;return n=n&42?1:dt(n),(n&(e.suspendedLanes|t))===0?n:0}function dt(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ft(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function pt(){var e=E.p;return e===0?(e=window.event,e===void 0?32:hp(e.type)):e}function mt(e,t){var n=E.p;try{return E.p=e,t()}finally{E.p=n}}var ht=Math.random().toString(36).slice(2),gt=`__reactFiber$`+ht,_t=`__reactProps$`+ht,vt=`__reactContainer$`+ht,yt=`__reactEvents$`+ht,bt=`__reactListeners$`+ht,xt=`__reactHandles$`+ht,St=`__reactResources$`+ht,Ct=`__reactMarker$`+ht;function wt(e){delete e[gt],delete e[_t],delete e[yt],delete e[bt],delete e[xt]}function Tt(e){var t=e[gt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[vt]||n[gt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=ff(e);e!==null;){if(n=e[gt])return n;e=ff(e)}return t}e=n,n=e.parentNode}return null}function Et(e){if(e=e[gt]||e[vt]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Dt(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(i(33))}function Ot(e){var t=e[St];return t||=e[St]={hoistableStyles:new Map,hoistableScripts:new Map},t}function kt(e){e[Ct]=!0}var At=new Set,jt={};function Mt(e,t){Nt(e,t),Nt(e+`Capture`,t)}function Nt(e,t){for(jt[e]=t,e=0;e<t.length;e++)At.add(t[e])}var Pt=RegExp(`^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$`),Ft={},It={};function Lt(e){return je.call(It,e)?!0:je.call(Ft,e)?!1:Pt.test(e)?It[e]=!0:(Ft[e]=!0,!1)}function Rt(e,t,n){if(Lt(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case`undefined`:case`function`:case`symbol`:e.removeAttribute(t);return;case`boolean`:var r=t.toLowerCase().slice(0,5);if(r!==`data-`&&r!==`aria-`){e.removeAttribute(t);return}}e.setAttribute(t,``+n)}}function zt(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case`undefined`:case`function`:case`symbol`:case`boolean`:e.removeAttribute(t);return}e.setAttribute(t,``+n)}}function Bt(e,t,n,r){if(r===null)e.removeAttribute(n);else{switch(typeof r){case`undefined`:case`function`:case`symbol`:case`boolean`:e.removeAttribute(n);return}e.setAttributeNS(t,n,``+r)}}function k(e){switch(typeof e){case`bigint`:case`boolean`:case`number`:case`string`:case`undefined`:return e;case`object`:return e;default:return``}}function Vt(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()===`input`&&(t===`checkbox`||t===`radio`)}function Ht(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&r!==void 0&&typeof r.get==`function`&&typeof r.set==`function`){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=``+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=``+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ut(e){if(!e._valueTracker){var t=Vt(e)?`checked`:`value`;e._valueTracker=Ht(e,t,``+e[t])}}function Wt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r=``;return e&&(r=Vt(e)?e.checked?`true`:`false`:e.value),e=r,e===n?!1:(t.setValue(e),!0)}function Gt(e){if(e||=typeof document<`u`?document:void 0,e===void 0)return null;try{return e.activeElement||e.body}catch{return e.body}}var Kt=/[\n"\\]/g;function qt(e){return e.replace(Kt,function(e){return`\\`+e.charCodeAt(0).toString(16)+` `})}function Jt(e,t,n,r,i,a,o,s){e.name=``,o!=null&&typeof o!=`function`&&typeof o!=`symbol`&&typeof o!=`boolean`?e.type=o:e.removeAttribute(`type`),t==null?o!==`submit`&&o!==`reset`||e.removeAttribute(`value`):o===`number`?(t===0&&e.value===``||e.value!=t)&&(e.value=``+k(t)):e.value!==``+k(t)&&(e.value=``+k(t)),t==null?n==null?r!=null&&e.removeAttribute(`value`):Xt(e,o,k(n)):Xt(e,o,k(t)),i==null&&a!=null&&(e.defaultChecked=!!a),i!=null&&(e.checked=i&&typeof i!=`function`&&typeof i!=`symbol`),s!=null&&typeof s!=`function`&&typeof s!=`symbol`&&typeof s!=`boolean`?e.name=``+k(s):e.removeAttribute(`name`)}function Yt(e,t,n,r,i,a,o,s){if(a!=null&&typeof a!=`function`&&typeof a!=`symbol`&&typeof a!=`boolean`&&(e.type=a),t!=null||n!=null){if(!(a!==`submit`&&a!==`reset`||t!=null)){Ut(e);return}n=n==null?``:``+k(n),t=t==null?n:``+k(t),s||t===e.value||(e.value=t),e.defaultValue=t}r??=i,r=typeof r!=`function`&&typeof r!=`symbol`&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,o!=null&&typeof o!=`function`&&typeof o!=`symbol`&&typeof o!=`boolean`&&(e.name=o),Ut(e)}function Xt(e,t,n){t===`number`&&Gt(e.ownerDocument)===e||e.defaultValue===``+n||(e.defaultValue=``+n)}function Zt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t[`$`+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty(`$`+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=``+k(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Qt(e,t,n){if(t!=null&&(t=``+k(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n==null?``:``+k(n)}function $t(e,t,n,r){if(t==null){if(r!=null){if(n!=null)throw Error(i(92));if(ue(r)){if(1<r.length)throw Error(i(93));r=r[0]}n=r}n??=``,t=n}n=k(t),e.defaultValue=n,r=e.textContent,r===n&&r!==``&&r!==null&&(e.value=r),Ut(e)}function en(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var tn=new Set(`animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp`.split(` `));function nn(e,t,n){var r=t.indexOf(`--`)===0;n==null||typeof n==`boolean`||n===``?r?e.setProperty(t,``):t===`float`?e.cssFloat=``:e[t]=``:r?e.setProperty(t,n):typeof n!=`number`||n===0||tn.has(t)?t===`float`?e.cssFloat=n:e[t]=(``+n).trim():e[t]=n+`px`}function rn(e,t,n){if(t!=null&&typeof t!=`object`)throw Error(i(62));if(e=e.style,n!=null){for(var r in n)!n.hasOwnProperty(r)||t!=null&&t.hasOwnProperty(r)||(r.indexOf(`--`)===0?e.setProperty(r,``):r===`float`?e.cssFloat=``:e[r]=``);for(var a in t)r=t[a],t.hasOwnProperty(a)&&n[a]!==r&&nn(e,a,r)}else for(var o in t)t.hasOwnProperty(o)&&nn(e,o,t[o])}function an(e){if(e.indexOf(`-`)===-1)return!1;switch(e){case`annotation-xml`:case`color-profile`:case`font-face`:case`font-face-src`:case`font-face-uri`:case`font-face-format`:case`font-face-name`:case`missing-glyph`:return!1;default:return!0}}var on=new Map([[`acceptCharset`,`accept-charset`],[`htmlFor`,`for`],[`httpEquiv`,`http-equiv`],[`crossOrigin`,`crossorigin`],[`accentHeight`,`accent-height`],[`alignmentBaseline`,`alignment-baseline`],[`arabicForm`,`arabic-form`],[`baselineShift`,`baseline-shift`],[`capHeight`,`cap-height`],[`clipPath`,`clip-path`],[`clipRule`,`clip-rule`],[`colorInterpolation`,`color-interpolation`],[`colorInterpolationFilters`,`color-interpolation-filters`],[`colorProfile`,`color-profile`],[`colorRendering`,`color-rendering`],[`dominantBaseline`,`dominant-baseline`],[`enableBackground`,`enable-background`],[`fillOpacity`,`fill-opacity`],[`fillRule`,`fill-rule`],[`floodColor`,`flood-color`],[`floodOpacity`,`flood-opacity`],[`fontFamily`,`font-family`],[`fontSize`,`font-size`],[`fontSizeAdjust`,`font-size-adjust`],[`fontStretch`,`font-stretch`],[`fontStyle`,`font-style`],[`fontVariant`,`font-variant`],[`fontWeight`,`font-weight`],[`glyphName`,`glyph-name`],[`glyphOrientationHorizontal`,`glyph-orientation-horizontal`],[`glyphOrientationVertical`,`glyph-orientation-vertical`],[`horizAdvX`,`horiz-adv-x`],[`horizOriginX`,`horiz-origin-x`],[`imageRendering`,`image-rendering`],[`letterSpacing`,`letter-spacing`],[`lightingColor`,`lighting-color`],[`markerEnd`,`marker-end`],[`markerMid`,`marker-mid`],[`markerStart`,`marker-start`],[`overlinePosition`,`overline-position`],[`overlineThickness`,`overline-thickness`],[`paintOrder`,`paint-order`],[`panose-1`,`panose-1`],[`pointerEvents`,`pointer-events`],[`renderingIntent`,`rendering-intent`],[`shapeRendering`,`shape-rendering`],[`stopColor`,`stop-color`],[`stopOpacity`,`stop-opacity`],[`strikethroughPosition`,`strikethrough-position`],[`strikethroughThickness`,`strikethrough-thickness`],[`strokeDasharray`,`stroke-dasharray`],[`strokeDashoffset`,`stroke-dashoffset`],[`strokeLinecap`,`stroke-linecap`],[`strokeLinejoin`,`stroke-linejoin`],[`strokeMiterlimit`,`stroke-miterlimit`],[`strokeOpacity`,`stroke-opacity`],[`strokeWidth`,`stroke-width`],[`textAnchor`,`text-anchor`],[`textDecoration`,`text-decoration`],[`textRendering`,`text-rendering`],[`transformOrigin`,`transform-origin`],[`underlinePosition`,`underline-position`],[`underlineThickness`,`underline-thickness`],[`unicodeBidi`,`unicode-bidi`],[`unicodeRange`,`unicode-range`],[`unitsPerEm`,`units-per-em`],[`vAlphabetic`,`v-alphabetic`],[`vHanging`,`v-hanging`],[`vIdeographic`,`v-ideographic`],[`vMathematical`,`v-mathematical`],[`vectorEffect`,`vector-effect`],[`vertAdvY`,`vert-adv-y`],[`vertOriginX`,`vert-origin-x`],[`vertOriginY`,`vert-origin-y`],[`wordSpacing`,`word-spacing`],[`writingMode`,`writing-mode`],[`xmlnsXlink`,`xmlns:xlink`],[`xHeight`,`x-height`]]),sn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function cn(e){return sn.test(``+e)?`javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')`:e}function ln(){}var un=null;function dn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var fn=null,pn=null;function mn(e){var t=Et(e);if(t&&(e=t.stateNode)){var n=e[_t]||null;a:switch(e=t.stateNode,t.type){case`input`:if(Jt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type===`radio`&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll(`input[name="`+qt(``+t)+`"][type="radio"]`),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=r[_t]||null;if(!a)throw Error(i(90));Jt(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<n.length;t++)r=n[t],r.form===e.form&&Wt(r)}break a;case`textarea`:Qt(e,n.value,n.defaultValue);break a;case`select`:t=n.value,t!=null&&Zt(e,!!n.multiple,t,!1)}}}var hn=!1;function gn(e,t,n){if(hn)return e(t,n);hn=!0;try{return e(t)}finally{if(hn=!1,(fn!==null||pn!==null)&&(Cu(),fn&&(t=fn,e=pn,pn=fn=null,mn(t),e)))for(t=0;t<e.length;t++)mn(e[t])}}function _n(e,t){var n=e.stateNode;if(n===null)return null;var r=n[_t]||null;if(r===null)return null;n=r[t];a:switch(t){case`onClick`:case`onClickCapture`:case`onDoubleClick`:case`onDoubleClickCapture`:case`onMouseDown`:case`onMouseDownCapture`:case`onMouseMove`:case`onMouseMoveCapture`:case`onMouseUp`:case`onMouseUpCapture`:case`onMouseEnter`:(r=!r.disabled)||(e=e.type,r=!(e===`button`||e===`input`||e===`select`||e===`textarea`)),e=!r;break a;default:e=!1}if(e)return null;if(n&&typeof n!=`function`)throw Error(i(231,t,typeof n));return n}var vn=!(typeof window>`u`||window.document===void 0||window.document.createElement===void 0),yn=!1;if(vn)try{var bn={};Object.defineProperty(bn,`passive`,{get:function(){yn=!0}}),window.addEventListener(`test`,bn,bn),window.removeEventListener(`test`,bn,bn)}catch{yn=!1}var xn=null,Sn=null,Cn=null;function wn(){if(Cn)return Cn;var e,t=Sn,n=t.length,r,i=`value`in xn?xn.value:xn.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[a-r];r++);return Cn=i.slice(e,1<r?1-r:void 0)}function Tn(e){var t=e.keyCode;return`charCode`in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function En(){return!0}function Dn(){return!1}function On(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented==null?!1===i.returnValue:i.defaultPrevented)?En:Dn,this.isPropagationStopped=Dn,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!=`unknown`&&(e.returnValue=!1),this.isDefaultPrevented=En)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!=`unknown`&&(e.cancelBubble=!0),this.isPropagationStopped=En)},persist:function(){},isPersistent:En}),t}var kn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},An=On(kn),jn=h({},kn,{view:0,detail:0}),Mn=On(jn),Nn,Pn,Fn,In=h({},jn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kn,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return`movementX`in e?e.movementX:(e!==Fn&&(Fn&&e.type===`mousemove`?(Nn=e.screenX-Fn.screenX,Pn=e.screenY-Fn.screenY):Pn=Nn=0,Fn=e),Nn)},movementY:function(e){return`movementY`in e?e.movementY:Pn}}),Ln=On(In),Rn=On(h({},In,{dataTransfer:0})),zn=On(h({},jn,{relatedTarget:0})),Bn=On(h({},kn,{animationName:0,elapsedTime:0,pseudoElement:0})),Vn=On(h({},kn,{clipboardData:function(e){return`clipboardData`in e?e.clipboardData:window.clipboardData}})),Hn=On(h({},kn,{data:0})),Un={Esc:`Escape`,Spacebar:` `,Left:`ArrowLeft`,Up:`ArrowUp`,Right:`ArrowRight`,Down:`ArrowDown`,Del:`Delete`,Win:`OS`,Menu:`ContextMenu`,Apps:`ContextMenu`,Scroll:`ScrollLock`,MozPrintableKey:`Unidentified`},Wn={8:`Backspace`,9:`Tab`,12:`Clear`,13:`Enter`,16:`Shift`,17:`Control`,18:`Alt`,19:`Pause`,20:`CapsLock`,27:`Escape`,32:` `,33:`PageUp`,34:`PageDown`,35:`End`,36:`Home`,37:`ArrowLeft`,38:`ArrowUp`,39:`ArrowRight`,40:`ArrowDown`,45:`Insert`,46:`Delete`,112:`F1`,113:`F2`,114:`F3`,115:`F4`,116:`F5`,117:`F6`,118:`F7`,119:`F8`,120:`F9`,121:`F10`,122:`F11`,123:`F12`,144:`NumLock`,145:`ScrollLock`,224:`Meta`},Gn={Alt:`altKey`,Control:`ctrlKey`,Meta:`metaKey`,Shift:`shiftKey`};function A(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Gn[e])?!!t[e]:!1}function Kn(){return A}var qn=On(h({},jn,{key:function(e){if(e.key){var t=Un[e.key]||e.key;if(t!==`Unidentified`)return t}return e.type===`keypress`?(e=Tn(e),e===13?`Enter`:String.fromCharCode(e)):e.type===`keydown`||e.type===`keyup`?Wn[e.keyCode]||`Unidentified`:``},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kn,charCode:function(e){return e.type===`keypress`?Tn(e):0},keyCode:function(e){return e.type===`keydown`||e.type===`keyup`?e.keyCode:0},which:function(e){return e.type===`keypress`?Tn(e):e.type===`keydown`||e.type===`keyup`?e.keyCode:0}})),Jn=On(h({},In,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Yn=On(h({},jn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kn})),Xn=On(h({},kn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Zn=On(h({},In,{deltaX:function(e){return`deltaX`in e?e.deltaX:`wheelDeltaX`in e?-e.wheelDeltaX:0},deltaY:function(e){return`deltaY`in e?e.deltaY:`wheelDeltaY`in e?-e.wheelDeltaY:`wheelDelta`in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Qn=On(h({},kn,{newState:0,oldState:0})),$n=[9,13,27,32],er=vn&&`CompositionEvent`in window,tr=null;vn&&`documentMode`in document&&(tr=document.documentMode);var nr=vn&&`TextEvent`in window&&!tr,rr=vn&&(!er||tr&&8<tr&&11>=tr),ir=` `,ar=!1;function or(e,t){switch(e){case`keyup`:return $n.indexOf(t.keyCode)!==-1;case`keydown`:return t.keyCode!==229;case`keypress`:case`mousedown`:case`focusout`:return!0;default:return!1}}function sr(e){return e=e.detail,typeof e==`object`&&`data`in e?e.data:null}var cr=!1;function lr(e,t){switch(e){case`compositionend`:return sr(t);case`keypress`:return t.which===32?(ar=!0,ir):null;case`textInput`:return e=t.data,e===ir&&ar?null:e;default:return null}}function ur(e,t){if(cr)return e===`compositionend`||!er&&or(e,t)?(e=wn(),Cn=Sn=xn=null,cr=!1,e):null;switch(e){case`paste`:return null;case`keypress`:if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case`compositionend`:return rr&&t.locale!==`ko`?null:t.data;default:return null}}var dr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t===`input`?!!dr[e.type]:t===`textarea`}function pr(e,t,n,r){fn?pn?pn.push(r):pn=[r]:fn=r,t=Dd(t,`onChange`),0<t.length&&(n=new An(`onChange`,`change`,null,n,r),e.push({event:n,listeners:t}))}var mr=null,hr=null;function gr(e){xd(e,0)}function _r(e){if(Wt(Dt(e)))return e}function vr(e,t){if(e===`change`)return t}var yr=!1;if(vn){var br;if(vn){var xr=`oninput`in document;if(!xr){var Sr=document.createElement(`div`);Sr.setAttribute(`oninput`,`return;`),xr=typeof Sr.oninput==`function`}br=xr}else br=!1;yr=br&&(!document.documentMode||9<document.documentMode)}function Cr(){mr&&(mr.detachEvent(`onpropertychange`,wr),hr=mr=null)}function wr(e){if(e.propertyName===`value`&&_r(hr)){var t=[];pr(t,hr,e,dn(e)),gn(gr,t)}}function Tr(e,t,n){e===`focusin`?(Cr(),mr=t,hr=n,mr.attachEvent(`onpropertychange`,wr)):e===`focusout`&&Cr()}function Er(e){if(e===`selectionchange`||e===`keyup`||e===`keydown`)return _r(hr)}function Dr(e,t){if(e===`click`)return _r(t)}function Or(e,t){if(e===`input`||e===`change`)return _r(t)}function kr(e,t){return e===t&&(e!==0||1/e==1/t)||e!==e&&t!==t}var Ar=typeof Object.is==`function`?Object.is:kr;function jr(e,t){if(Ar(e,t))return!0;if(typeof e!=`object`||!e||typeof t!=`object`||!t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!je.call(t,i)||!Ar(e[i],t[i]))return!1}return!0}function Mr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Nr(e,t){var n=Mr(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}a:{for(;n;){if(n.nextSibling){n=n.nextSibling;break a}n=n.parentNode}n=void 0}n=Mr(n)}}function Pr(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Pr(e,t.parentNode):`contains`in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Fr(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Gt(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href==`string`}catch{n=!1}if(n)e=t.contentWindow;else break;t=Gt(e.document)}return t}function Ir(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t===`input`&&(e.type===`text`||e.type===`search`||e.type===`tel`||e.type===`url`||e.type===`password`)||t===`textarea`||e.contentEditable===`true`)}var Lr=vn&&`documentMode`in document&&11>=document.documentMode,Rr=null,zr=null,Br=null,Vr=!1;function Hr(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Vr||Rr==null||Rr!==Gt(r)||(r=Rr,`selectionStart`in r&&Ir(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Br&&jr(Br,r)||(Br=r,r=Dd(zr,`onSelect`),0<r.length&&(t=new An(`onSelect`,`select`,null,t,n),e.push({event:t,listeners:r}),t.target=Rr)))}function Ur(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n[`Webkit`+e]=`webkit`+t,n[`Moz`+e]=`moz`+t,n}var Wr={animationend:Ur(`Animation`,`AnimationEnd`),animationiteration:Ur(`Animation`,`AnimationIteration`),animationstart:Ur(`Animation`,`AnimationStart`),transitionrun:Ur(`Transition`,`TransitionRun`),transitionstart:Ur(`Transition`,`TransitionStart`),transitioncancel:Ur(`Transition`,`TransitionCancel`),transitionend:Ur(`Transition`,`TransitionEnd`)},Gr={},Kr={};vn&&(Kr=document.createElement(`div`).style,`AnimationEvent`in window||(delete Wr.animationend.animation,delete Wr.animationiteration.animation,delete Wr.animationstart.animation),`TransitionEvent`in window||delete Wr.transitionend.transition);function qr(e){if(Gr[e])return Gr[e];if(!Wr[e])return e;var t=Wr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Kr)return Gr[e]=t[n];return e}var Jr=qr(`animationend`),Yr=qr(`animationiteration`),Xr=qr(`animationstart`),Zr=qr(`transitionrun`),Qr=qr(`transitionstart`),$r=qr(`transitioncancel`),ei=qr(`transitionend`),ti=new Map,ni=`abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel`.split(` `);ni.push(`scrollEnd`);function ri(e,t){ti.set(e,t),Mt(t,[e])}var ii=typeof reportError==`function`?reportError:function(e){if(typeof window==`object`&&typeof window.ErrorEvent==`function`){var t=new window.ErrorEvent(`error`,{bubbles:!0,cancelable:!0,message:typeof e==`object`&&e&&typeof e.message==`string`?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process==`object`&&typeof process.emit==`function`){process.emit(`uncaughtException`,e);return}console.error(e)},ai=[],oi=0,si=0;function ci(){for(var e=oi,t=si=oi=0;t<e;){var n=ai[t];ai[t++]=null;var r=ai[t];ai[t++]=null;var i=ai[t];ai[t++]=null;var a=ai[t];if(ai[t++]=null,r!==null&&i!==null){var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}a!==0&&fi(n,i,a)}}function li(e,t,n,r){ai[oi++]=e,ai[oi++]=t,ai[oi++]=n,ai[oi++]=r,si|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function ui(e,t,n,r){return li(e,t,n,r),pi(e)}function di(e,t){return li(e,null,null,t),pi(e)}function fi(e,t,n){e.lanes|=n;var r=e.alternate;r!==null&&(r.lanes|=n);for(var i=!1,a=e.return;a!==null;)a.childLanes|=n,r=a.alternate,r!==null&&(r.childLanes|=n),a.tag===22&&(e=a.stateNode,e===null||e._visibility&1||(i=!0)),e=a,a=a.return;return e.tag===3?(a=e.stateNode,i&&t!==null&&(i=31-Je(n),e=a.hiddenUpdates,r=e[i],r===null?e[i]=[t]:r.push(t),t.lane=n|536870912),a):null}function pi(e){if(50<mu)throw mu=0,hu=null,Error(i(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var mi={};function hi(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gi(e,t,n,r){return new hi(e,t,n,r)}function _i(e){return e=e.prototype,!(!e||!e.isReactComponent)}function vi(e,t){var n=e.alternate;return n===null?(n=gi(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function yi(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function bi(e,t,n,r,a,o){var s=0;if(r=e,typeof e==`function`)_i(e)&&(s=1);else if(typeof e==`string`)s=Wf(e,n,ge.current)?26:e===`html`||e===`head`||e===`body`?27:5;else a:switch(e){case ie:return e=gi(31,n,t,a),e.elementType=ie,e.lanes=o,e;case y:return xi(n.children,a,o,t);case b:s=8,a|=24;break;case x:return e=gi(12,n,t,a|2),e.elementType=x,e.lanes=o,e;case ee:return e=gi(13,n,t,a),e.elementType=ee,e.lanes=o,e;case te:return e=gi(19,n,t,a),e.elementType=te,e.lanes=o,e;default:if(typeof e==`object`&&e)switch(e.$$typeof){case C:s=10;break a;case S:s=9;break a;case w:s=11;break a;case ne:s=14;break a;case re:s=16,r=null;break a}s=29,n=Error(i(130,e===null?`null`:typeof e,``)),r=null}return t=gi(s,n,t,a),t.elementType=e,t.type=r,t.lanes=o,t}function xi(e,t,n,r){return e=gi(7,e,r,t),e.lanes=n,e}function Si(e,t,n){return e=gi(6,e,null,t),e.lanes=n,e}function Ci(e){var t=gi(18,null,null,0);return t.stateNode=e,t}function wi(e,t,n){return t=gi(4,e.children===null?[]:e.children,e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ti=new WeakMap;function Ei(e,t){if(typeof e==`object`&&e){var n=Ti.get(e);return n===void 0?(t={value:e,source:t,stack:Ae(t)},Ti.set(e,t),t):n}return{value:e,source:t,stack:Ae(t)}}var Di=[],Oi=0,ki=null,Ai=0,ji=[],Mi=0,Ni=null,Pi=1,Fi=``;function Ii(e,t){Di[Oi++]=Ai,Di[Oi++]=ki,ki=e,Ai=t}function Li(e,t,n){ji[Mi++]=Pi,ji[Mi++]=Fi,ji[Mi++]=Ni,Ni=e;var r=Pi;e=Fi;var i=32-Je(r)-1;r&=~(1<<i),n+=1;var a=32-Je(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Pi=1<<32-Je(t)+i|n<<i|r,Fi=a+e}else Pi=1<<a|n<<i|r,Fi=e}function Ri(e){e.return!==null&&(Ii(e,1),Li(e,1,0))}function zi(e){for(;e===ki;)ki=Di[--Oi],Di[Oi]=null,Ai=Di[--Oi],Di[Oi]=null;for(;e===Ni;)Ni=ji[--Mi],ji[Mi]=null,Fi=ji[--Mi],ji[Mi]=null,Pi=ji[--Mi],ji[Mi]=null}function Bi(e,t){ji[Mi++]=Pi,ji[Mi++]=Fi,ji[Mi++]=Ni,Pi=t.id,Fi=t.overflow,Ni=e}var Vi=null,Hi=null,j=!1,Ui=null,Wi=!1,Gi=Error(i(519));function Ki(e){throw Qi(Ei(Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?`text`:`HTML`,``)),e)),Gi}function qi(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[gt]=e,t[_t]=r,n){case`dialog`:X(`cancel`,t),X(`close`,t);break;case`iframe`:case`object`:case`embed`:X(`load`,t);break;case`video`:case`audio`:for(n=0;n<yd.length;n++)X(yd[n],t);break;case`source`:X(`error`,t);break;case`img`:case`image`:case`link`:X(`error`,t),X(`load`,t);break;case`details`:X(`toggle`,t);break;case`input`:X(`invalid`,t),Yt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case`select`:X(`invalid`,t);break;case`textarea`:X(`invalid`,t),$t(t,r.value,r.defaultValue,r.children)}n=r.children,typeof n!=`string`&&typeof n!=`number`&&typeof n!=`bigint`||t.textContent===``+n||!0===r.suppressHydrationWarning||Nd(t.textContent,n)?(r.popover!=null&&(X(`beforetoggle`,t),X(`toggle`,t)),r.onScroll!=null&&X(`scroll`,t),r.onScrollEnd!=null&&X(`scrollend`,t),r.onClick!=null&&(t.onclick=ln),t=!0):t=!1,t||Ki(e,!0)}function Ji(e){for(Vi=e.return;Vi;)switch(Vi.tag){case 5:case 31:case 13:Wi=!1;return;case 27:case 3:Wi=!0;return;default:Vi=Vi.return}}function Yi(e){if(e!==Vi)return!1;if(!j)return Ji(e),j=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!==`form`&&n!==`button`)||Wd(e.type,e.memoizedProps)),n=!n),n&&Hi&&Ki(e),Ji(e),t===13){if(e=e.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(i(317));Hi=df(e)}else if(t===31){if(e=e.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(i(317));Hi=df(e)}else t===27?(t=Hi,Qd(e.type)?(e=uf,uf=null,Hi=e):Hi=t):Hi=Vi?lf(e.stateNode.nextSibling):null;return!0}function Xi(){Hi=Vi=null,j=!1}function Zi(){var e=Ui;return e!==null&&(eu===null?eu=e:eu.push.apply(eu,e),Ui=null),e}function Qi(e){Ui===null?Ui=[e]:Ui.push(e)}var $i=me(null),ea=null,ta=null;function na(e,t,n){D($i,t._currentValue),t._currentValue=n}function ra(e){e._currentValue=$i.current,he($i)}function ia(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)===t?r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t):(e.childLanes|=t,r!==null&&(r.childLanes|=t)),e===n)break;e=e.return}}function aa(e,t,n,r){var a=e.child;for(a!==null&&(a.return=e);a!==null;){var o=a.dependencies;if(o!==null){var s=a.child;o=o.firstContext;a:for(;o!==null;){var c=o;o=a;for(var l=0;l<t.length;l++)if(c.context===t[l]){o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),ia(o.return,n,e),r||(s=null);break a}o=c.next}}else if(a.tag===18){if(s=a.return,s===null)throw Error(i(341));s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),ia(s,n,e),s=null}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===e){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}}function oa(e,t,n,r){e=null;for(var a=t,o=!1;a!==null;){if(!o){if(a.flags&524288)o=!0;else if(a.flags&262144)break}if(a.tag===10){var s=a.alternate;if(s===null)throw Error(i(387));if(s=s.memoizedProps,s!==null){var c=a.type;Ar(a.pendingProps.value,s.value)||(e===null?e=[c]:e.push(c))}}else if(a===ye.current){if(s=a.alternate,s===null)throw Error(i(387));s.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(e===null?e=[$f]:e.push($f))}a=a.return}e!==null&&aa(t,e,n,r),t.flags|=262144}function sa(e){for(e=e.firstContext;e!==null;){if(!Ar(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ca(e){ea=e,ta=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function la(e){return da(ea,e)}function ua(e,t){return ea===null&&ca(e),da(e,t)}function da(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},ta===null){if(e===null)throw Error(i(308));ta=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ta=ta.next=t;return n}var fa=typeof AbortController<`u`?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},pa=t.unstable_scheduleCallback,ma=t.unstable_NormalPriority,ha={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ga(){return{controller:new fa,data:new Map,refCount:0}}function _a(e){e.refCount--,e.refCount===0&&pa(ma,function(){e.controller.abort()})}var va=null,ya=0,ba=0,xa=null;function Sa(e,t){if(va===null){var n=va=[];ya=0,ba=pd(),xa={status:`pending`,value:void 0,then:function(e){n.push(e)}}}return ya++,t.then(Ca,Ca),t}function Ca(){if(--ya===0&&va!==null){xa!==null&&(xa.status=`fulfilled`);var e=va;va=null,ba=0,xa=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function wa(e,t){var n=[],r={status:`pending`,value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status=`fulfilled`,r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status=`rejected`,r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}var Ta=T.S;T.S=function(e,t){ru=Ie(),typeof t==`object`&&t&&typeof t.then==`function`&&Sa(e,t),Ta!==null&&Ta(e,t)};var Ea=me(null);function Da(){var e=Ea.current;return e===null?Hl.pooledCache:e}function Oa(e,t){t===null?D(Ea,Ea.current):D(Ea,t.pool)}function ka(){var e=Da();return e===null?null:{parent:ha._currentValue,pool:e}}var Aa=Error(i(460)),ja=Error(i(474)),Ma=Error(i(542)),Na={then:function(){}};function Pa(e){return e=e.status,e===`fulfilled`||e===`rejected`}function Fa(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(ln,ln),t=n),t.status){case`fulfilled`:return t.value;case`rejected`:throw e=t.reason,za(e),e;default:if(typeof t.status==`string`)t.then(ln,ln);else{if(e=Hl,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=t,e.status=`pending`,e.then(function(e){if(t.status===`pending`){var n=t;n.status=`fulfilled`,n.value=e}},function(e){if(t.status===`pending`){var n=t;n.status=`rejected`,n.reason=e}})}switch(t.status){case`fulfilled`:return t.value;case`rejected`:throw e=t.reason,za(e),e}throw La=t,Aa}}function Ia(e){try{var t=e._init;return t(e._payload)}catch(e){throw typeof e==`object`&&e&&typeof e.then==`function`?(La=e,Aa):e}}var La=null;function Ra(){if(La===null)throw Error(i(459));var e=La;return La=null,e}function za(e){if(e===Aa||e===Ma)throw Error(i(483))}var Ba=null,Va=0;function Ha(e){var t=Va;return Va+=1,Ba===null&&(Ba=[]),Fa(Ba,e,t)}function Ua(e,t){t=t.props.ref,e.ref=t===void 0?null:t}function Wa(e,t){throw t.$$typeof===g?Error(i(525)):(e=Object.prototype.toString.call(t),Error(i(31,e===`[object Object]`?`object with keys {`+Object.keys(t).join(`, `)+`}`:e)))}function Ga(e){function t(t,n){if(e){var r=t.deletions;r===null?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;r!==null;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;e!==null;)e.key===null?t.set(e.index,e):t.set(e.key,e),e=e.sibling;return t}function a(e,t){return e=vi(e,t),e.index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?(r=t.alternate,r===null?(t.flags|=67108866,n):(r=r.index,r<n?(t.flags|=67108866,n):r)):(t.flags|=1048576,n)}function s(t){return e&&t.alternate===null&&(t.flags|=67108866),t}function c(e,t,n,r){return t===null||t.tag!==6?(t=Si(n,e.mode,r),t.return=e,t):(t=a(t,n),t.return=e,t)}function l(e,t,n,r){var i=n.type;return i===y?d(e,t,n.props.children,r,n.key):t!==null&&(t.elementType===i||typeof i==`object`&&i&&i.$$typeof===re&&Ia(i)===t.type)?(t=a(t,n.props),Ua(t,n),t.return=e,t):(t=bi(n.type,n.key,n.props,null,e.mode,r),Ua(t,n),t.return=e,t)}function u(e,t,n,r){return t===null||t.tag!==4||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=wi(n,e.mode,r),t.return=e,t):(t=a(t,n.children||[]),t.return=e,t)}function d(e,t,n,r,i){return t===null||t.tag!==7?(t=xi(n,e.mode,r,i),t.return=e,t):(t=a(t,n),t.return=e,t)}function f(e,t,n){if(typeof t==`string`&&t!==``||typeof t==`number`||typeof t==`bigint`)return t=Si(``+t,e.mode,n),t.return=e,t;if(typeof t==`object`&&t){switch(t.$$typeof){case _:return n=bi(t.type,t.key,t.props,null,e.mode,n),Ua(n,t),n.return=e,n;case v:return t=wi(t,e.mode,n),t.return=e,t;case re:return t=Ia(t),f(e,t,n)}if(ue(t)||se(t))return t=xi(t,e.mode,n,null),t.return=e,t;if(typeof t.then==`function`)return f(e,Ha(t),n);if(t.$$typeof===C)return f(e,ua(e,t),n);Wa(e,t)}return null}function p(e,t,n,r){var i=t===null?null:t.key;if(typeof n==`string`&&n!==``||typeof n==`number`||typeof n==`bigint`)return i===null?c(e,t,``+n,r):null;if(typeof n==`object`&&n){switch(n.$$typeof){case _:return n.key===i?l(e,t,n,r):null;case v:return n.key===i?u(e,t,n,r):null;case re:return n=Ia(n),p(e,t,n,r)}if(ue(n)||se(n))return i===null?d(e,t,n,r,null):null;if(typeof n.then==`function`)return p(e,t,Ha(n),r);if(n.$$typeof===C)return p(e,t,ua(e,n),r);Wa(e,n)}return null}function m(e,t,n,r,i){if(typeof r==`string`&&r!==``||typeof r==`number`||typeof r==`bigint`)return e=e.get(n)||null,c(t,e,``+r,i);if(typeof r==`object`&&r){switch(r.$$typeof){case _:return e=e.get(r.key===null?n:r.key)||null,l(t,e,r,i);case v:return e=e.get(r.key===null?n:r.key)||null,u(t,e,r,i);case re:return r=Ia(r),m(e,t,n,r,i)}if(ue(r)||se(r))return e=e.get(n)||null,d(t,e,r,i,null);if(typeof r.then==`function`)return m(e,t,n,Ha(r),i);if(r.$$typeof===C)return m(e,t,n,ua(t,r),i);Wa(t,r)}return null}function h(i,a,s,c){for(var l=null,u=null,d=a,h=a=0,g=null;d!==null&&h<s.length;h++){d.index>h?(g=d,d=null):g=d.sibling;var _=p(i,d,s[h],c);if(_===null){d===null&&(d=g);break}e&&d&&_.alternate===null&&t(i,d),a=o(_,a,h),u===null?l=_:u.sibling=_,u=_,d=g}if(h===s.length)return n(i,d),j&&Ii(i,h),l;if(d===null){for(;h<s.length;h++)d=f(i,s[h],c),d!==null&&(a=o(d,a,h),u===null?l=d:u.sibling=d,u=d);return j&&Ii(i,h),l}for(d=r(d);h<s.length;h++)g=m(d,i,h,s[h],c),g!==null&&(e&&g.alternate!==null&&d.delete(g.key===null?h:g.key),a=o(g,a,h),u===null?l=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(i,e)}),j&&Ii(i,h),l}function g(a,s,c,l){if(c==null)throw Error(i(151));for(var u=null,d=null,h=s,g=s=0,_=null,v=c.next();h!==null&&!v.done;g++,v=c.next()){h.index>g?(_=h,h=null):_=h.sibling;var y=p(a,h,v.value,l);if(y===null){h===null&&(h=_);break}e&&h&&y.alternate===null&&t(a,h),s=o(y,s,g),d===null?u=y:d.sibling=y,d=y,h=_}if(v.done)return n(a,h),j&&Ii(a,g),u;if(h===null){for(;!v.done;g++,v=c.next())v=f(a,v.value,l),v!==null&&(s=o(v,s,g),d===null?u=v:d.sibling=v,d=v);return j&&Ii(a,g),u}for(h=r(h);!v.done;g++,v=c.next())v=m(h,a,g,v.value,l),v!==null&&(e&&v.alternate!==null&&h.delete(v.key===null?g:v.key),s=o(v,s,g),d===null?u=v:d.sibling=v,d=v);return e&&h.forEach(function(e){return t(a,e)}),j&&Ii(a,g),u}function b(e,r,o,c){if(typeof o==`object`&&o&&o.type===y&&o.key===null&&(o=o.props.children),typeof o==`object`&&o){switch(o.$$typeof){case _:a:{for(var l=o.key;r!==null;){if(r.key===l){if(l=o.type,l===y){if(r.tag===7){n(e,r.sibling),c=a(r,o.props.children),c.return=e,e=c;break a}}else if(r.elementType===l||typeof l==`object`&&l&&l.$$typeof===re&&Ia(l)===r.type){n(e,r.sibling),c=a(r,o.props),Ua(c,o),c.return=e,e=c;break a}n(e,r);break}else t(e,r);r=r.sibling}o.type===y?(c=xi(o.props.children,e.mode,c,o.key),c.return=e,e=c):(c=bi(o.type,o.key,o.props,null,e.mode,c),Ua(c,o),c.return=e,e=c)}return s(e);case v:a:{for(l=o.key;r!==null;){if(r.key===l)if(r.tag===4&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),c=a(r,o.children||[]),c.return=e,e=c;break a}else{n(e,r);break}else t(e,r);r=r.sibling}c=wi(o,e.mode,c),c.return=e,e=c}return s(e);case re:return o=Ia(o),b(e,r,o,c)}if(ue(o))return h(e,r,o,c);if(se(o)){if(l=se(o),typeof l!=`function`)throw Error(i(150));return o=l.call(o),g(e,r,o,c)}if(typeof o.then==`function`)return b(e,r,Ha(o),c);if(o.$$typeof===C)return b(e,r,ua(e,o),c);Wa(e,o)}return typeof o==`string`&&o!==``||typeof o==`number`||typeof o==`bigint`?(o=``+o,r!==null&&r.tag===6?(n(e,r.sibling),c=a(r,o),c.return=e,e=c):(n(e,r),c=Si(o,e.mode,c),c.return=e,e=c),s(e)):n(e,r)}return function(e,t,n,r){try{Va=0;var i=b(e,t,n,r);return Ba=null,i}catch(t){if(t===Aa||t===Ma)throw t;var a=gi(29,t,null,e.mode);return a.lanes=r,a.return=e,a}}}var Ka=Ga(!0),qa=Ga(!1),Ja=!1;function Ya(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Za(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Qa(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,U&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=pi(e),fi(e,null,n),t}return li(e,r,t,n),pi(e)}function $a(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,n&4194048)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,lt(e,n)}}function eo(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var to=!1;function no(){if(to){var e=xa;if(e!==null)throw e}}function ro(e,t,n,r){to=!1;var i=e.updateQueue;Ja=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var c=s,l=c.next;c.next=null,o===null?a=l:o.next=l,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,s=u.lastBaseUpdate,s!==o&&(s===null?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=c))}if(a!==null){var d=i.baseState;o=0,u=l=c=null,s=a;do{var f=s.lane&-536870913,p=f!==s.lane;if(p?(G&f)===f:(r&f)===f){f!==0&&f===ba&&(to=!0),u!==null&&(u=u.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});a:{var m=e,g=s;f=t;var _=n;switch(g.tag){case 1:if(m=g.payload,typeof m==`function`){d=m.call(_,d,f);break a}d=m;break a;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m==`function`?m.call(_,d,f):m,f==null)break a;d=h({},d,f);break a;case 2:Ja=!0}}f=s.callback,f!==null&&(e.flags|=64,p&&(e.flags|=8192),p=i.callbacks,p===null?i.callbacks=[f]:p.push(f))}else p={lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(l=u=p,c=d):u=u.next=p,o|=f;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;p=s,s=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);u===null&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,a===null&&(i.shared.lanes=0),Yl|=o,e.lanes=o,e.memoizedState=d}}function io(e,t){if(typeof e!=`function`)throw Error(i(191,e));e.call(t)}function ao(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)io(n[e],t)}var oo=me(null),so=me(0);function co(e,t){e=ql,D(so,e),D(oo,t),ql=e|t.baseLanes}function lo(){D(so,ql),D(oo,oo.current)}function uo(){ql=so.current,he(oo),he(so)}var fo=me(null),po=null;function mo(e){var t=e.alternate;D(yo,yo.current&1),D(fo,e),po===null&&(t===null||oo.current!==null||t.memoizedState!==null)&&(po=e)}function ho(e){D(yo,yo.current),D(fo,e),po===null&&(po=e)}function go(e){e.tag===22?(D(yo,yo.current),D(fo,e),po===null&&(po=e)):_o(e)}function _o(){D(yo,yo.current),D(fo,fo.current)}function vo(e){he(fo),po===e&&(po=null),he(yo)}var yo=me(0);function bo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||of(n)||sf(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder===`forwards`||t.memoizedProps.revealOrder===`backwards`||t.memoizedProps.revealOrder===`unstable_legacy-backwards`||t.memoizedProps.revealOrder===`together`)){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var xo=0,M=null,So=null,Co=null,wo=!1,To=!1,Eo=!1,Do=0,Oo=0,ko=null,Ao=0;function jo(){throw Error(i(321))}function Mo(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ar(e[n],t[n]))return!1;return!0}function No(e,t,n,r,i,a){return xo=a,M=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,T.H=e===null||e.memoizedState===null?Ys:Xs,Eo=!1,a=n(r,i),Eo=!1,To&&(a=Fo(t,n,r,i)),Po(e),a}function Po(e){T.H=N;var t=So!==null&&So.next!==null;if(xo=0,Co=So=M=null,wo=!1,Oo=0,ko=null,t)throw Error(i(300));e===null||lc||(e=e.dependencies,e!==null&&sa(e)&&(lc=!0))}function Fo(e,t,n,r){M=e;var a=0;do{if(To&&(ko=null),Oo=0,To=!1,25<=a)throw Error(i(301));if(a+=1,Co=So=null,e.updateQueue!=null){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}T.H=Zs,o=t(n,r)}while(To);return o}function Io(){var e=T.H,t=e.useState()[0];return t=typeof t.then==`function`?Uo(t):t,e=e.useState()[0],(So===null?null:So.memoizedState)!==e&&(M.flags|=1024),t}function Lo(){var e=Do!==0;return Do=0,e}function Ro(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function zo(e){if(wo){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}wo=!1}xo=0,Co=So=M=null,To=!1,Oo=Do=0,ko=null}function Bo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Co===null?M.memoizedState=Co=e:Co=Co.next=e,Co}function Vo(){if(So===null){var e=M.alternate;e=e===null?null:e.memoizedState}else e=So.next;var t=Co===null?M.memoizedState:Co.next;if(t!==null)Co=t,So=e;else{if(e===null)throw M.alternate===null?Error(i(467)):Error(i(310));So=e,e={memoizedState:So.memoizedState,baseState:So.baseState,baseQueue:So.baseQueue,queue:So.queue,next:null},Co===null?M.memoizedState=Co=e:Co=Co.next=e}return Co}function Ho(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Uo(e){var t=Oo;return Oo+=1,ko===null&&(ko=[]),e=Fa(ko,e,t),t=M,(Co===null?t.memoizedState:Co.next)===null&&(t=t.alternate,T.H=t===null||t.memoizedState===null?Ys:Xs),e}function Wo(e){if(typeof e==`object`&&e){if(typeof e.then==`function`)return Uo(e);if(e.$$typeof===C)return la(e)}throw Error(i(438,String(e)))}function Go(e){var t=null,n=M.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var r=M.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(t??={data:[],index:0},n===null&&(n=Ho(),M.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=ae;return t.index++,n}function Ko(e,t){return typeof t==`function`?t(e):t}function qo(e){return Jo(Vo(),So,e)}function Jo(e,t,n){var r=e.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=n;var a=e.baseQueue,o=r.pending;if(o!==null){if(a!==null){var s=a.next;a.next=o.next,o.next=s}t.baseQueue=a=o,r.pending=null}if(o=e.baseState,a===null)e.memoizedState=o;else{t=a.next;var c=s=null,l=null,u=t,d=!1;do{var f=u.lane&-536870913;if(f===u.lane?(xo&f)===f:(G&f)===f){var p=u.revertLane;if(p===0)l!==null&&(l=l.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),f===ba&&(d=!0);else if((xo&p)===p){u=u.next,p===ba&&(d=!0);continue}else f={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(c=l=f,s=o):l=l.next=f,M.lanes|=p,Yl|=p;f=u.action,Eo&&n(o,f),o=u.hasEagerState?u.eagerState:n(o,f)}else p={lane:f,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(c=l=p,s=o):l=l.next=p,M.lanes|=f,Yl|=f;u=u.next}while(u!==null&&u!==t);if(l===null?s=o:l.next=c,!Ar(o,e.memoizedState)&&(lc=!0,d&&(n=xa,n!==null)))throw n;e.memoizedState=o,e.baseState=s,e.baseQueue=l,r.lastRenderedState=o}return a===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Yo(e){var t=Vo(),n=t.queue;if(n===null)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(a!==null){n.pending=null;var s=a=a.next;do o=e(o,s.action),s=s.next;while(s!==a);Ar(o,t.memoizedState)||(lc=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Xo(e,t,n){var r=M,a=Vo(),o=j;if(o){if(n===void 0)throw Error(i(407));n=n()}else n=t();var s=!Ar((So||a).memoizedState,n);if(s&&(a.memoizedState=n,lc=!0),a=a.queue,xs($o.bind(null,r,a,e),[e]),a.getSnapshot!==t||s||Co!==null&&Co.memoizedState.tag&1){if(r.flags|=2048,gs(9,{destroy:void 0},Qo.bind(null,r,a,n,t),null),Hl===null)throw Error(i(349));o||xo&127||Zo(r,t,n)}return n}function Zo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=M.updateQueue,t===null?(t=Ho(),M.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Qo(e,t,n,r){t.value=n,t.getSnapshot=r,es(t)&&ts(e)}function $o(e,t,n){return n(function(){es(t)&&ts(e)})}function es(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ar(e,n)}catch{return!0}}function ts(e){var t=di(e,2);t!==null&&vu(t,e,2)}function ns(e){var t=Bo();if(typeof e==`function`){var n=e;if(e=n(),Eo){qe(!0);try{n()}finally{qe(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ko,lastRenderedState:e},t}function rs(e,t,n,r){return e.baseState=n,Jo(e,So,typeof r==`function`?r:Ko)}function is(e,t,n,r,a){if(Ks(e))throw Error(i(485));if(e=t.action,e!==null){var o={payload:a,action:e,next:null,isTransition:!0,status:`pending`,value:null,reason:null,listeners:[],then:function(e){o.listeners.push(e)}};T.T===null?o.isTransition=!1:n(!0),r(o),n=t.pending,n===null?(o.next=t.pending=o,as(t,o)):(o.next=n.next,t.pending=n.next=o)}}function as(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var a=T.T,o={};T.T=o;try{var s=n(i,r),c=T.S;c!==null&&c(o,s),os(e,t,s)}catch(n){cs(e,t,n)}finally{a!==null&&o.types!==null&&(a.types=o.types),T.T=a}}else try{a=n(i,r),os(e,t,a)}catch(n){cs(e,t,n)}}function os(e,t,n){typeof n==`object`&&n&&typeof n.then==`function`?n.then(function(n){ss(e,t,n)},function(n){return cs(e,t,n)}):ss(e,t,n)}function ss(e,t,n){t.status=`fulfilled`,t.value=n,ls(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,as(e,n)))}function cs(e,t,n){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do t.status=`rejected`,t.reason=n,ls(t),t=t.next;while(t!==r)}e.action=null}function ls(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function us(e,t){return t}function ds(e,t){if(j){var n=Hl.formState;if(n!==null){a:{var r=M;if(j){if(Hi){b:{for(var i=Hi,a=Wi;i.nodeType!==8;){if(!a){i=null;break b}if(i=lf(i.nextSibling),i===null){i=null;break b}}a=i.data,i=a===`F!`||a===`F`?i:null}if(i){Hi=lf(i.nextSibling),r=i.data===`F!`;break a}}Ki(r)}r=!1}r&&(t=n[0])}}return n=Bo(),n.memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:us,lastRenderedState:t},n.queue=r,n=Us.bind(null,M,r),r.dispatch=n,r=ns(!1),a=Gs.bind(null,M,!1,r.queue),r=Bo(),i={state:t,dispatch:null,action:e,pending:null},r.queue=i,n=is.bind(null,M,i,a,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function fs(e){return ps(Vo(),So,e)}function ps(e,t,n){if(t=Jo(e,t,us)[0],e=qo(Ko)[0],typeof t==`object`&&t&&typeof t.then==`function`)try{var r=Uo(t)}catch(e){throw e===Aa?Ma:e}else r=t;t=Vo();var i=t.queue,a=i.dispatch;return n!==t.memoizedState&&(M.flags|=2048,gs(9,{destroy:void 0},ms.bind(null,i,n),null)),[r,a,e]}function ms(e,t){e.action=t}function hs(e){var t=Vo(),n=So;if(n!==null)return ps(t,n,e);Vo(),t=t.memoizedState,n=Vo();var r=n.queue.dispatch;return n.memoizedState=e,[t,r,!1]}function gs(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},t=M.updateQueue,t===null&&(t=Ho(),M.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function _s(){return Vo().memoizedState}function vs(e,t,n,r){var i=Bo();M.flags|=e,i.memoizedState=gs(1|t,{destroy:void 0},n,r===void 0?null:r)}function ys(e,t,n,r){var i=Vo();r=r===void 0?null:r;var a=i.memoizedState.inst;So!==null&&r!==null&&Mo(r,So.memoizedState.deps)?i.memoizedState=gs(t,a,n,r):(M.flags|=e,i.memoizedState=gs(1|t,a,n,r))}function bs(e,t){vs(8390656,8,e,t)}function xs(e,t){ys(2048,8,e,t)}function Ss(e){M.flags|=4;var t=M.updateQueue;if(t===null)t=Ho(),M.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function Cs(e){var t=Vo().memoizedState;return Ss({ref:t,nextImpl:e}),function(){if(U&2)throw Error(i(440));return t.impl.apply(void 0,arguments)}}function ws(e,t){return ys(4,2,e,t)}function Ts(e,t){return ys(4,4,e,t)}function Es(e,t){if(typeof t==`function`){e=e();var n=t(e);return function(){typeof n==`function`?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ds(e,t,n){n=n==null?null:n.concat([e]),ys(4,4,Es.bind(null,t,e),n)}function Os(){}function ks(e,t){var n=Vo();t=t===void 0?null:t;var r=n.memoizedState;return t!==null&&Mo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function As(e,t){var n=Vo();t=t===void 0?null:t;var r=n.memoizedState;if(t!==null&&Mo(t,r[1]))return r[0];if(r=e(),Eo){qe(!0);try{e()}finally{qe(!1)}}return n.memoizedState=[r,t],r}function js(e,t,n){return n===void 0||xo&1073741824&&!(G&261930)?e.memoizedState=t:(e.memoizedState=n,e=_u(),M.lanes|=e,Yl|=e,n)}function Ms(e,t,n,r){return Ar(n,t)?n:oo.current===null?!(xo&42)||xo&1073741824&&!(G&261930)?(lc=!0,e.memoizedState=n):(e=_u(),M.lanes|=e,Yl|=e,t):(e=js(e,n,r),Ar(e,t)||(lc=!0),e)}function Ns(e,t,n,r,i){var a=E.p;E.p=a!==0&&8>a?a:8;var o=T.T,s={};T.T=s,Gs(e,!1,t,n);try{var c=i(),l=T.S;l!==null&&l(s,c),typeof c==`object`&&c&&typeof c.then==`function`?Ws(e,t,wa(c,r),gu(e)):Ws(e,t,r,gu(e))}catch(n){Ws(e,t,{then:function(){},status:`rejected`,reason:n},gu())}finally{E.p=a,o!==null&&s.types!==null&&(o.types=s.types),T.T=o}}function Ps(){}function Fs(e,t,n,r){if(e.tag!==5)throw Error(i(476));var a=Is(e).queue;Ns(e,a,t,de,n===null?Ps:function(){return Ls(e),n(r)})}function Is(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ko,lastRenderedState:de},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ko,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Ls(e){var t=Is(e);t.next===null&&(t=e.alternate.memoizedState),Ws(e,t.next.queue,{},gu())}function Rs(){return la($f)}function zs(){return Vo().memoizedState}function Bs(){return Vo().memoizedState}function Vs(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=gu();e=Za(n);var r=Qa(t,e,n);r!==null&&(vu(r,t,n),$a(r,t,n)),t={cache:ga()},e.payload=t;return}t=t.return}}function Hs(e,t,n){var r=gu();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Ks(e)?qs(t,n):(n=ui(e,t,n,r),n!==null&&(vu(n,e,r),Js(n,t,r)))}function Us(e,t,n){Ws(e,t,n,gu())}function Ws(e,t,n,r){var i={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ks(e))qs(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,Ar(s,o))return li(e,t,i,0),Hl===null&&ci(),!1}catch{}if(n=ui(e,t,i,r),n!==null)return vu(n,e,r),Js(n,t,r),!0}return!1}function Gs(e,t,n,r){if(r={lane:2,revertLane:pd(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Ks(e)){if(t)throw Error(i(479))}else t=ui(e,n,r,2),t!==null&&vu(t,e,2)}function Ks(e){var t=e.alternate;return e===M||t!==null&&t===M}function qs(e,t){To=wo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Js(e,t,n){if(n&4194048){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,lt(e,n)}}var N={readContext:la,use:Wo,useCallback:jo,useContext:jo,useEffect:jo,useImperativeHandle:jo,useLayoutEffect:jo,useInsertionEffect:jo,useMemo:jo,useReducer:jo,useRef:jo,useState:jo,useDebugValue:jo,useDeferredValue:jo,useTransition:jo,useSyncExternalStore:jo,useId:jo,useHostTransitionStatus:jo,useFormState:jo,useActionState:jo,useOptimistic:jo,useMemoCache:jo,useCacheRefresh:jo};N.useEffectEvent=jo;var Ys={readContext:la,use:Wo,useCallback:function(e,t){return Bo().memoizedState=[e,t===void 0?null:t],e},useContext:la,useEffect:bs,useImperativeHandle:function(e,t,n){n=n==null?null:n.concat([e]),vs(4194308,4,Es.bind(null,t,e),n)},useLayoutEffect:function(e,t){return vs(4194308,4,e,t)},useInsertionEffect:function(e,t){vs(4,2,e,t)},useMemo:function(e,t){var n=Bo();t=t===void 0?null:t;var r=e();if(Eo){qe(!0);try{e()}finally{qe(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Bo();if(n!==void 0){var i=n(t);if(Eo){qe(!0);try{n(t)}finally{qe(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=Hs.bind(null,M,e),[r.memoizedState,e]},useRef:function(e){var t=Bo();return e={current:e},t.memoizedState=e},useState:function(e){e=ns(e);var t=e.queue,n=Us.bind(null,M,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Os,useDeferredValue:function(e,t){return js(Bo(),e,t)},useTransition:function(){var e=ns(!1);return e=Ns.bind(null,M,e.queue,!0,!1),Bo().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=M,a=Bo();if(j){if(n===void 0)throw Error(i(407));n=n()}else{if(n=t(),Hl===null)throw Error(i(349));G&127||Zo(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,bs($o.bind(null,r,o,e),[e]),r.flags|=2048,gs(9,{destroy:void 0},Qo.bind(null,r,o,n,t),null),n},useId:function(){var e=Bo(),t=Hl.identifierPrefix;if(j){var n=Fi,r=Pi;n=(r&~(1<<32-Je(r)-1)).toString(32)+n,t=`_`+t+`R_`+n,n=Do++,0<n&&(t+=`H`+n.toString(32)),t+=`_`}else n=Ao++,t=`_`+t+`r_`+n.toString(32)+`_`;return e.memoizedState=t},useHostTransitionStatus:Rs,useFormState:ds,useActionState:ds,useOptimistic:function(e){var t=Bo();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Gs.bind(null,M,!0,n),n.dispatch=t,[e,t]},useMemoCache:Go,useCacheRefresh:function(){return Bo().memoizedState=Vs.bind(null,M)},useEffectEvent:function(e){var t=Bo(),n={impl:e};return t.memoizedState=n,function(){if(U&2)throw Error(i(440));return n.impl.apply(void 0,arguments)}}},Xs={readContext:la,use:Wo,useCallback:ks,useContext:la,useEffect:xs,useImperativeHandle:Ds,useInsertionEffect:ws,useLayoutEffect:Ts,useMemo:As,useReducer:qo,useRef:_s,useState:function(){return qo(Ko)},useDebugValue:Os,useDeferredValue:function(e,t){return Ms(Vo(),So.memoizedState,e,t)},useTransition:function(){var e=qo(Ko)[0],t=Vo().memoizedState;return[typeof e==`boolean`?e:Uo(e),t]},useSyncExternalStore:Xo,useId:zs,useHostTransitionStatus:Rs,useFormState:fs,useActionState:fs,useOptimistic:function(e,t){return rs(Vo(),So,e,t)},useMemoCache:Go,useCacheRefresh:Bs};Xs.useEffectEvent=Cs;var Zs={readContext:la,use:Wo,useCallback:ks,useContext:la,useEffect:xs,useImperativeHandle:Ds,useInsertionEffect:ws,useLayoutEffect:Ts,useMemo:As,useReducer:Yo,useRef:_s,useState:function(){return Yo(Ko)},useDebugValue:Os,useDeferredValue:function(e,t){var n=Vo();return So===null?js(n,e,t):Ms(n,So.memoizedState,e,t)},useTransition:function(){var e=Yo(Ko)[0],t=Vo().memoizedState;return[typeof e==`boolean`?e:Uo(e),t]},useSyncExternalStore:Xo,useId:zs,useHostTransitionStatus:Rs,useFormState:hs,useActionState:hs,useOptimistic:function(e,t){var n=Vo();return So===null?(n.baseState=e,[e,n.queue.dispatch]):rs(n,So,e,t)},useMemoCache:Go,useCacheRefresh:Bs};Zs.useEffectEvent=Cs;function P(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:h({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Qs={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=gu(),i=Za(r);i.payload=t,n!=null&&(i.callback=n),t=Qa(e,i,r),t!==null&&(vu(t,e,r),$a(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=gu(),i=Za(r);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Qa(e,i,r),t!==null&&(vu(t,e,r),$a(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=gu(),r=Za(n);r.tag=2,t!=null&&(r.callback=t),t=Qa(e,r,n),t!==null&&(vu(t,e,n),$a(t,e,n))}};function $s(e,t,n,r,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate==`function`?e.shouldComponentUpdate(r,a,o):t.prototype&&t.prototype.isPureReactComponent?!jr(n,r)||!jr(i,a):!0}function F(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps==`function`&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps==`function`&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Qs.enqueueReplaceState(t,t.state,null)}function I(e,t){var n=t;if(`ref`in t)for(var r in n={},t)r!==`ref`&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=h({},n)),e)n[i]===void 0&&(n[i]=e[i]);return n}function L(e){ii(e)}function ec(e){console.error(e)}function tc(e){ii(e)}function nc(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(e){setTimeout(function(){throw e})}}function rc(e,t,n){try{var r=e.onCaughtError;r(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(e){setTimeout(function(){throw e})}}function ic(e,t,n){return n=Za(n),n.tag=3,n.payload={element:null},n.callback=function(){nc(e,t)},n}function ac(e){return e=Za(e),e.tag=3,e}function oc(e,t,n,r){var i=n.type.getDerivedStateFromError;if(typeof i==`function`){var a=r.value;e.payload=function(){return i(a)},e.callback=function(){rc(t,n,r)}}var o=n.stateNode;o!==null&&typeof o.componentDidCatch==`function`&&(e.callback=function(){rc(t,n,r),typeof i!=`function`&&(ou===null?ou=new Set([this]):ou.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:e===null?``:e})})}function sc(e,t,n,r,a){if(n.flags|=32768,typeof r==`object`&&r&&typeof r.then==`function`){if(t=n.alternate,t!==null&&oa(t,n,a,!0),n=fo.current,n!==null){switch(n.tag){case 31:case 13:return po===null?Au():n.alternate===null&&Jl===0&&(Jl=3),n.flags&=-257,n.flags|=65536,n.lanes=a,r===Na?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([r]):t.add(r),qu(e,r,a)),!1;case 22:return n.flags|=65536,r===Na?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([r]):n.add(r)),qu(e,r,a)),!1}throw Error(i(435,n.tag))}return qu(e,r,a),Au(),!1}if(j)return t=fo.current,t===null?(r!==Gi&&(t=Error(i(423),{cause:r}),Qi(Ei(t,n))),e=e.current.alternate,e.flags|=65536,a&=-a,e.lanes|=a,r=Ei(r,n),a=ic(e.stateNode,r,a),eo(e,a),Jl!==4&&(Jl=2)):(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=a,r!==Gi&&(e=Error(i(422),{cause:r}),Qi(Ei(e,n)))),!1;var o=Error(i(520),{cause:r});if(o=Ei(o,n),$l===null?$l=[o]:$l.push(o),Jl!==4&&(Jl=2),t===null)return!0;r=Ei(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,e=ic(n.stateNode,r,e),eo(n,e),!1;case 1:if(t=n.type,o=n.stateNode,!(n.flags&128)&&(typeof t.getDerivedStateFromError==`function`||o!==null&&typeof o.componentDidCatch==`function`&&(ou===null||!ou.has(o))))return n.flags|=65536,a&=-a,n.lanes|=a,a=ac(a),oc(a,e,n,r),eo(n,a),!1}n=n.return}while(n!==null);return!1}var cc=Error(i(461)),lc=!1;function uc(e,t,n,r){t.child=e===null?qa(t,null,n,r):Ka(t,e.child,n,r)}function R(e,t,n,r,i){n=n.render;var a=t.ref;if(`ref`in r){var o={};for(var s in r)s!==`ref`&&(o[s]=r[s])}else o=r;return ca(t),r=No(e,t,n,o,a,i),s=Lo(),e!==null&&!lc?(Ro(e,t,i),Nc(e,t,i)):(j&&s&&Ri(t),t.flags|=1,uc(e,t,r,i),t.child)}function dc(e,t,n,r,i){if(e===null){var a=n.type;return typeof a==`function`&&!_i(a)&&a.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=a,fc(e,t,a,r,i)):(e=bi(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!B(e,i)){var o=a.memoizedProps;if(n=n.compare,n=n===null?jr:n,n(o,r)&&e.ref===t.ref)return Nc(e,t,i)}return t.flags|=1,e=vi(a,r),e.ref=t.ref,e.return=t,t.child=e}function fc(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(jr(a,r)&&e.ref===t.ref)if(lc=!1,t.pendingProps=r=a,B(e,i))e.flags&131072&&(lc=!0);else return t.lanes=e.lanes,Nc(e,t,i)}return bc(e,t,n,r,i)}function pc(e,t,n,r){var i=r.children,a=e===null?null:e.memoizedState;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode===`hidden`){if(t.flags&128){if(a=a===null?n:a.baseLanes|n,e!==null){for(r=t.child=e.child,i=0;r!==null;)i=i|r.lanes|r.childLanes,r=r.sibling;r=i&~a}else r=0,t.child=null;return hc(e,t,a,n,r)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Oa(t,a===null?null:a.cachePool),a===null?lo():co(t,a),go(t);else return r=t.lanes=536870912,hc(e,t,a===null?n:a.baseLanes|n,n,r)}else a===null?(e!==null&&Oa(t,null),lo(),_o(t)):(Oa(t,a.cachePool),co(t,a),_o(t),t.memoizedState=null);return uc(e,t,i,n),t.child}function mc(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function hc(e,t,n,r,i){var a=Da();return a=a===null?null:{parent:ha._currentValue,pool:a},t.memoizedState={baseLanes:n,cachePool:a},e!==null&&Oa(t,null),lo(),go(t),e!==null&&oa(e,t,r,!0),t.childLanes=i,null}function gc(e,t){return t=Oc({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function _c(e,t,n){return Ka(t,e.child,null,n),e=gc(t,t.pendingProps),e.flags|=2,vo(t),t.memoizedState=null,e}function vc(e,t,n){var r=t.pendingProps,a=(t.flags&128)!=0;if(t.flags&=-129,e===null){if(j){if(r.mode===`hidden`)return e=gc(t,r),t.lanes=536870912,mc(null,e);if(ho(t),(e=Hi)?(e=af(e,Wi),e=e!==null&&e.data===`&`?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ni===null?null:{id:Pi,overflow:Fi},retryLane:536870912,hydrationErrors:null},n=Ci(e),n.return=t,t.child=n,Vi=t,Hi=null)):e=null,e===null)throw Ki(t);return t.lanes=536870912,null}return gc(t,r)}var o=e.memoizedState;if(o!==null){var s=o.dehydrated;if(ho(t),a)if(t.flags&256)t.flags&=-257,t=_c(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(i(558));else if(lc||oa(e,t,n,!1),a=(n&e.childLanes)!==0,lc||a){if(r=Hl,r!==null&&(s=ut(r,n),s!==0&&s!==o.retryLane))throw o.retryLane=s,di(e,s),vu(r,e,s),cc;Au(),t=_c(e,t,n)}else e=o.treeContext,Hi=lf(s.nextSibling),Vi=t,j=!0,Ui=null,Wi=!1,e!==null&&Bi(t,e),t=gc(t,r),t.flags|=4096;return t}return e=vi(e.child,{mode:r.mode,children:r.children}),e.ref=t.ref,t.child=e,e.return=t,e}function yc(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!=`function`&&typeof n!=`object`)throw Error(i(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function bc(e,t,n,r,i){return ca(t),n=No(e,t,n,r,void 0,i),r=Lo(),e!==null&&!lc?(Ro(e,t,i),Nc(e,t,i)):(j&&r&&Ri(t),t.flags|=1,uc(e,t,n,i),t.child)}function z(e,t,n,r,i,a){return ca(t),t.updateQueue=null,n=Fo(t,r,n,i),Po(e),r=Lo(),e!==null&&!lc?(Ro(e,t,a),Nc(e,t,a)):(j&&r&&Ri(t),t.flags|=1,uc(e,t,n,a),t.child)}function xc(e,t,n,r,i){if(ca(t),t.stateNode===null){var a=mi,o=n.contextType;typeof o==`object`&&o&&(a=la(o)),a=new n(r,a),t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Qs,t.stateNode=a,a._reactInternals=t,a=t.stateNode,a.props=r,a.state=t.memoizedState,a.refs={},Ya(t),o=n.contextType,a.context=typeof o==`object`&&o?la(o):mi,a.state=t.memoizedState,o=n.getDerivedStateFromProps,typeof o==`function`&&(P(t,n,o,r),a.state=t.memoizedState),typeof n.getDerivedStateFromProps==`function`||typeof a.getSnapshotBeforeUpdate==`function`||typeof a.UNSAFE_componentWillMount!=`function`&&typeof a.componentWillMount!=`function`||(o=a.state,typeof a.componentWillMount==`function`&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount==`function`&&a.UNSAFE_componentWillMount(),o!==a.state&&Qs.enqueueReplaceState(a,a.state,null),ro(t,r,a,i),no(),a.state=t.memoizedState),typeof a.componentDidMount==`function`&&(t.flags|=4194308),r=!0}else if(e===null){a=t.stateNode;var s=t.memoizedProps,c=I(n,s);a.props=c;var l=a.context,u=n.contextType;o=mi,typeof u==`object`&&u&&(o=la(u));var d=n.getDerivedStateFromProps;u=typeof d==`function`||typeof a.getSnapshotBeforeUpdate==`function`,s=t.pendingProps!==s,u||typeof a.UNSAFE_componentWillReceiveProps!=`function`&&typeof a.componentWillReceiveProps!=`function`||(s||l!==o)&&F(t,a,r,o),Ja=!1;var f=t.memoizedState;a.state=f,ro(t,r,a,i),no(),l=t.memoizedState,s||f!==l||Ja?(typeof d==`function`&&(P(t,n,d,r),l=t.memoizedState),(c=Ja||$s(t,n,c,r,f,l,o))?(u||typeof a.UNSAFE_componentWillMount!=`function`&&typeof a.componentWillMount!=`function`||(typeof a.componentWillMount==`function`&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount==`function`&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount==`function`&&(t.flags|=4194308)):(typeof a.componentDidMount==`function`&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=o,r=c):(typeof a.componentDidMount==`function`&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Xa(e,t),o=t.memoizedProps,u=I(n,o),a.props=u,d=t.pendingProps,f=a.context,l=n.contextType,c=mi,typeof l==`object`&&l&&(c=la(l)),s=n.getDerivedStateFromProps,(l=typeof s==`function`||typeof a.getSnapshotBeforeUpdate==`function`)||typeof a.UNSAFE_componentWillReceiveProps!=`function`&&typeof a.componentWillReceiveProps!=`function`||(o!==d||f!==c)&&F(t,a,r,c),Ja=!1,f=t.memoizedState,a.state=f,ro(t,r,a,i),no();var p=t.memoizedState;o!==d||f!==p||Ja||e!==null&&e.dependencies!==null&&sa(e.dependencies)?(typeof s==`function`&&(P(t,n,s,r),p=t.memoizedState),(u=Ja||$s(t,n,u,r,f,p,c)||e!==null&&e.dependencies!==null&&sa(e.dependencies))?(l||typeof a.UNSAFE_componentWillUpdate!=`function`&&typeof a.componentWillUpdate!=`function`||(typeof a.componentWillUpdate==`function`&&a.componentWillUpdate(r,p,c),typeof a.UNSAFE_componentWillUpdate==`function`&&a.UNSAFE_componentWillUpdate(r,p,c)),typeof a.componentDidUpdate==`function`&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate==`function`&&(t.flags|=1024)):(typeof a.componentDidUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=c,r=u):(typeof a.componentDidUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return a=r,yc(e,t),r=(t.flags&128)!=0,a||r?(a=t.stateNode,n=r&&typeof n.getDerivedStateFromError!=`function`?null:a.render(),t.flags|=1,e!==null&&r?(t.child=Ka(t,e.child,null,i),t.child=Ka(t,null,n,i)):uc(e,t,n,i),t.memoizedState=a.state,e=t.child):e=Nc(e,t,i),e}function Sc(e,t,n,r){return Xi(),t.flags|=256,uc(e,t,n,r),t.child}var Cc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function wc(e){return{baseLanes:e,cachePool:ka()}}function Tc(e,t,n){return e=e===null?0:e.childLanes&~n,t&&(e|=q),e}function Ec(e,t,n){var r=t.pendingProps,a=!1,o=(t.flags&128)!=0,s;if((s=o)||(s=e!==null&&e.memoizedState===null?!1:(yo.current&2)!=0),s&&(a=!0,t.flags&=-129),s=(t.flags&32)!=0,t.flags&=-33,e===null){if(j){if(a?mo(t):_o(t),(e=Hi)?(e=af(e,Wi),e=e!==null&&e.data!==`&`?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ni===null?null:{id:Pi,overflow:Fi},retryLane:536870912,hydrationErrors:null},n=Ci(e),n.return=t,t.child=n,Vi=t,Hi=null)):e=null,e===null)throw Ki(t);return sf(e)?t.lanes=32:t.lanes=536870912,null}var c=r.children;return r=r.fallback,a?(_o(t),a=t.mode,c=Oc({mode:`hidden`,children:c},a),r=xi(r,a,n,null),c.return=t,r.return=t,c.sibling=r,t.child=c,r=t.child,r.memoizedState=wc(n),r.childLanes=Tc(e,s,n),t.memoizedState=Cc,mc(null,r)):(mo(t),Dc(t,c))}var l=e.memoizedState;if(l!==null&&(c=l.dehydrated,c!==null)){if(o)t.flags&256?(mo(t),t.flags&=-257,t=kc(e,t,n)):t.memoizedState===null?(_o(t),c=r.fallback,a=t.mode,r=Oc({mode:`visible`,children:r.children},a),c=xi(c,a,n,null),c.flags|=2,r.return=t,c.return=t,r.sibling=c,t.child=r,Ka(t,e.child,null,n),r=t.child,r.memoizedState=wc(n),r.childLanes=Tc(e,s,n),t.memoizedState=Cc,t=mc(null,r)):(_o(t),t.child=e.child,t.flags|=128,t=null);else if(mo(t),sf(c)){if(s=c.nextSibling&&c.nextSibling.dataset,s)var u=s.dgst;s=u,r=Error(i(419)),r.stack=``,r.digest=s,Qi({value:r,source:null,stack:null}),t=kc(e,t,n)}else if(lc||oa(e,t,n,!1),s=(n&e.childLanes)!==0,lc||s){if(s=Hl,s!==null&&(r=ut(s,n),r!==0&&r!==l.retryLane))throw l.retryLane=r,di(e,r),vu(s,e,r),cc;of(c)||Au(),t=kc(e,t,n)}else of(c)?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,Hi=lf(c.nextSibling),Vi=t,j=!0,Ui=null,Wi=!1,e!==null&&Bi(t,e),t=Dc(t,r.children),t.flags|=4096);return t}return a?(_o(t),c=r.fallback,a=t.mode,l=e.child,u=l.sibling,r=vi(l,{mode:`hidden`,children:r.children}),r.subtreeFlags=l.subtreeFlags&65011712,u===null?(c=xi(c,a,n,null),c.flags|=2):c=vi(u,c),c.return=t,r.return=t,r.sibling=c,t.child=r,mc(null,r),r=t.child,c=e.child.memoizedState,c===null?c=wc(n):(a=c.cachePool,a===null?a=ka():(l=ha._currentValue,a=a.parent===l?a:{parent:l,pool:l}),c={baseLanes:c.baseLanes|n,cachePool:a}),r.memoizedState=c,r.childLanes=Tc(e,s,n),t.memoizedState=Cc,mc(e.child,r)):(mo(t),n=e.child,e=n.sibling,n=vi(n,{mode:`visible`,children:r.children}),n.return=t,n.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n)}function Dc(e,t){return t=Oc({mode:`visible`,children:t},e.mode),t.return=e,e.child=t}function Oc(e,t){return e=gi(22,e,null,t),e.lanes=0,e}function kc(e,t,n){return Ka(t,e.child,null,n),e=Dc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ac(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),ia(e.return,t,n)}function jc(e,t,n,r,i,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,treeForkCount:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.treeForkCount=a)}function Mc(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;r=r.children;var o=yo.current,s=(o&2)!=0;if(s?(o=o&1|2,t.flags|=128):o&=1,D(yo,o),uc(e,t,r,n),r=j?Ai:0,!s&&e!==null&&e.flags&128)a:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ac(e,n,t);else if(e.tag===19)Ac(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break a;for(;e.sibling===null;){if(e.return===null||e.return===t)break a;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case`forwards`:for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&bo(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),jc(t,!1,i,n,a,r);break;case`backwards`:case`unstable_legacy-backwards`:for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&bo(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}jc(t,!0,n,null,a,r);break;case`together`:jc(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function Nc(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Yl|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(oa(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,n=vi(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=vi(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function B(e,t){return(e.lanes&t)===0?(e=e.dependencies,!!(e!==null&&sa(e))):!0}function Pc(e,t,n){switch(t.tag){case 3:be(t,t.stateNode.containerInfo),na(t,ha,e.memoizedState.cache),Xi();break;case 27:case 5:Se(t);break;case 4:be(t,t.stateNode.containerInfo);break;case 10:na(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,ho(t),null;break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated===null?(n&t.child.childLanes)===0?(mo(t),e=Nc(e,t,n),e===null?null:e.sibling):Ec(e,t,n):(mo(t),t.flags|=128,null);mo(t);break;case 19:var i=(e.flags&128)!=0;if(r=(n&t.childLanes)!==0,r||=(oa(e,t,n,!1),(n&t.childLanes)!==0),i){if(r)return Mc(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),D(yo,yo.current),r)break;return null;case 22:return t.lanes=0,pc(e,t,n,t.pendingProps);case 24:na(t,ha,e.memoizedState.cache)}return Nc(e,t,n)}function Fc(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)lc=!0;else{if(!B(e,n)&&!(t.flags&128))return lc=!1,Pc(e,t,n);lc=!!(e.flags&131072)}else lc=!1,j&&t.flags&1048576&&Li(t,Ai,t.index);switch(t.lanes=0,t.tag){case 16:a:{var r=t.pendingProps;if(e=Ia(t.elementType),t.type=e,typeof e==`function`)_i(e)?(r=I(e,r),t.tag=1,t=xc(null,t,e,r,n)):(t.tag=0,t=bc(null,t,e,r,n));else{if(e!=null){var a=e.$$typeof;if(a===w){t.tag=11,t=R(null,t,e,r,n);break a}else if(a===ne){t.tag=14,t=dc(null,t,e,r,n);break a}}throw t=le(e)||e,Error(i(306,t,``))}}return t;case 0:return bc(e,t,t.type,t.pendingProps,n);case 1:return r=t.type,a=I(r,t.pendingProps),xc(e,t,r,a,n);case 3:a:{if(be(t,t.stateNode.containerInfo),e===null)throw Error(i(387));r=t.pendingProps;var o=t.memoizedState;a=o.element,Xa(e,t),ro(t,r,null,n);var s=t.memoizedState;if(r=s.cache,na(t,ha,r),r!==o.cache&&aa(t,[ha],n,!0),no(),r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){t=Sc(e,t,r,n);break a}else if(r!==a){a=Ei(Error(i(424)),t),Qi(a),t=Sc(e,t,r,n);break a}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName===`HTML`?e.ownerDocument.body:e}for(Hi=lf(e.firstChild),Vi=t,j=!0,Ui=null,Wi=!0,n=qa(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Xi(),r===a){t=Nc(e,t,n);break a}uc(e,t,r,n)}t=t.child}return t;case 26:return yc(e,t),e===null?(n=Af(t.type,null,t.pendingProps,null))?t.memoizedState=n:j||(n=t.type,e=t.pendingProps,r=Vd(ve.current).createElement(n),r[gt]=t,r[_t]=e,Fd(r,n,e),kt(r),t.stateNode=r):t.memoizedState=Af(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Se(t),e===null&&j&&(r=t.stateNode=pf(t.type,t.pendingProps,ve.current),Vi=t,Wi=!0,a=Hi,Qd(t.type)?(uf=a,Hi=lf(r.firstChild)):Hi=a),uc(e,t,t.pendingProps.children,n),yc(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&j&&((a=r=Hi)&&(r=nf(r,t.type,t.pendingProps,Wi),r===null?a=!1:(t.stateNode=r,Vi=t,Hi=lf(r.firstChild),Wi=!1,a=!0)),a||Ki(t)),Se(t),a=t.type,o=t.pendingProps,s=e===null?null:e.memoizedProps,r=o.children,Wd(a,o)?r=null:s!==null&&Wd(a,s)&&(t.flags|=32),t.memoizedState!==null&&(a=No(e,t,Io,null,null,n),$f._currentValue=a),yc(e,t),uc(e,t,r,n),t.child;case 6:return e===null&&j&&((e=n=Hi)&&(n=rf(n,t.pendingProps,Wi),n===null?e=!1:(t.stateNode=n,Vi=t,Hi=null,e=!0)),e||Ki(t)),null;case 13:return Ec(e,t,n);case 4:return be(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ka(t,null,r,n):uc(e,t,r,n),t.child;case 11:return R(e,t,t.type,t.pendingProps,n);case 7:return uc(e,t,t.pendingProps,n),t.child;case 8:return uc(e,t,t.pendingProps.children,n),t.child;case 12:return uc(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,na(t,t.type,r.value),uc(e,t,r.children,n),t.child;case 9:return a=t.type._context,r=t.pendingProps.children,ca(t),a=la(a),r=r(a),t.flags|=1,uc(e,t,r,n),t.child;case 14:return dc(e,t,t.type,t.pendingProps,n);case 15:return fc(e,t,t.type,t.pendingProps,n);case 19:return Mc(e,t,n);case 31:return vc(e,t,n);case 22:return pc(e,t,n,t.pendingProps);case 24:return ca(t),r=la(ha),e===null?(a=Da(),a===null&&(a=Hl,o=ga(),a.pooledCache=o,o.refCount++,o!==null&&(a.pooledCacheLanes|=n),a=o),t.memoizedState={parent:r,cache:a},Ya(t),na(t,ha,a)):((e.lanes&n)!==0&&(Xa(e,t),ro(t,null,null,n),no()),a=e.memoizedState,o=t.memoizedState,a.parent===r?(r=o.cache,na(t,ha,r),r!==a.cache&&aa(t,[ha],n,!0)):(a={parent:r,cache:r},t.memoizedState=a,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=a),na(t,ha,r))),uc(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function Ic(e){e.flags|=4}function Lc(e,t,n,r,i){if((t=(e.mode&32)!=0)&&(t=!1),t){if(e.flags|=16777216,(i&335544128)===i)if(e.stateNode.complete)e.flags|=8192;else if(Du())e.flags|=8192;else throw La=Na,ja}else e.flags&=-16777217}function Rc(e,t){if(t.type!==`stylesheet`||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!Gf(t))if(Du())e.flags|=8192;else throw La=Na,ja}function zc(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag===22?536870912:it(),e.lanes|=t,Ql|=t)}function Bc(e,t){if(!j)switch(e.tailMode){case`hidden`:t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case`collapsed`:n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Vc(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&65011712,r|=i.flags&65011712,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Hc(e,t,n){var r=t.pendingProps;switch(zi(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vc(t),null;case 1:return Vc(t),null;case 3:return n=t.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),ra(ha),xe(),n.pendingContext&&=(n.context=n.pendingContext,null),(e===null||e.child===null)&&(Yi(t)?Ic(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Zi())),Vc(t),null;case 26:var a=t.type,o=t.memoizedState;return e===null?(Ic(t),o===null?(Vc(t),Lc(t,a,null,r,n)):(Vc(t),Rc(t,o))):o?o===e.memoizedState?(Vc(t),t.flags&=-16777217):(Ic(t),Vc(t),Rc(t,o)):(e=e.memoizedProps,e!==r&&Ic(t),Vc(t),Lc(t,a,e,r,n)),null;case 27:if(Ce(t),n=ve.current,a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Ic(t);else{if(!r){if(t.stateNode===null)throw Error(i(166));return Vc(t),null}e=ge.current,Yi(t)?qi(t,e):(e=pf(a,r,n),t.stateNode=e,Ic(t))}return Vc(t),null;case 5:if(Ce(t),a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Ic(t);else{if(!r){if(t.stateNode===null)throw Error(i(166));return Vc(t),null}if(o=ge.current,Yi(t))qi(t,o);else{var s=Vd(ve.current);switch(o){case 1:o=s.createElementNS(`http://www.w3.org/2000/svg`,a);break;case 2:o=s.createElementNS(`http://www.w3.org/1998/Math/MathML`,a);break;default:switch(a){case`svg`:o=s.createElementNS(`http://www.w3.org/2000/svg`,a);break;case`math`:o=s.createElementNS(`http://www.w3.org/1998/Math/MathML`,a);break;case`script`:o=s.createElement(`div`),o.innerHTML=`<script><\/script>`,o=o.removeChild(o.firstChild);break;case`select`:o=typeof r.is==`string`?s.createElement(`select`,{is:r.is}):s.createElement(`select`),r.multiple?o.multiple=!0:r.size&&(o.size=r.size);break;default:o=typeof r.is==`string`?s.createElement(a,{is:r.is}):s.createElement(a)}}o[gt]=t,o[_t]=r;a:for(s=t.child;s!==null;){if(s.tag===5||s.tag===6)o.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break a;for(;s.sibling===null;){if(s.return===null||s.return===t)break a;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=o;a:switch(Fd(o,a,r),a){case`button`:case`input`:case`select`:case`textarea`:r=!!r.autoFocus;break a;case`img`:r=!0;break a;default:r=!1}r&&Ic(t)}}return Vc(t),Lc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==r&&Ic(t);else{if(typeof r!=`string`&&t.stateNode===null)throw Error(i(166));if(e=ve.current,Yi(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,a=Vi,a!==null)switch(a.tag){case 27:case 5:r=a.memoizedProps}e[gt]=t,e=!!(e.nodeValue===n||r!==null&&!0===r.suppressHydrationWarning||Nd(e.nodeValue,n)),e||Ki(t,!0)}else e=Vd(e).createTextNode(r),e[gt]=t,t.stateNode=e}return Vc(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(r=Yi(t),n!==null){if(e===null){if(!r)throw Error(i(318));if(e=t.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(i(557));e[gt]=t}else Xi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Vc(t),e=!1}else n=Zi(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(vo(t),t):(vo(t),null);if(t.flags&128)throw Error(i(558))}return Vc(t),null;case 13:if(r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(a=Yi(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(i(318));if(a=t.memoizedState,a=a===null?null:a.dehydrated,!a)throw Error(i(317));a[gt]=t}else Xi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Vc(t),a=!1}else a=Zi(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return t.flags&256?(vo(t),t):(vo(t),null)}return vo(t),t.flags&128?(t.lanes=n,t):(n=r!==null,e=e!==null&&e.memoizedState!==null,n&&(r=t.child,a=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(a=r.alternate.memoizedState.cachePool.pool),o=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),o!==a&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),zc(t,t.updateQueue),Vc(t),null);case 4:return xe(),e===null&&wd(t.stateNode.containerInfo),Vc(t),null;case 10:return ra(t.type),Vc(t),null;case 19:if(he(yo),r=t.memoizedState,r===null)return Vc(t),null;if(a=(t.flags&128)!=0,o=r.rendering,o===null)if(a)Bc(r,!1);else{if(Jl!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=bo(e),o!==null){for(t.flags|=128,Bc(r,!1),e=o.updateQueue,t.updateQueue=e,zc(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)yi(n,e),n=n.sibling;return D(yo,yo.current&1|2),j&&Ii(t,r.treeForkCount),t.child}e=e.sibling}r.tail!==null&&Ie()>iu&&(t.flags|=128,a=!0,Bc(r,!1),t.lanes=4194304)}else{if(!a)if(e=bo(o),e!==null){if(t.flags|=128,a=!0,e=e.updateQueue,t.updateQueue=e,zc(t,e),Bc(r,!0),r.tail===null&&r.tailMode===`hidden`&&!o.alternate&&!j)return Vc(t),null}else 2*Ie()-r.renderingStartTime>iu&&n!==536870912&&(t.flags|=128,a=!0,Bc(r,!1),t.lanes=4194304);r.isBackwards?(o.sibling=t.child,t.child=o):(e=r.last,e===null?t.child=o:e.sibling=o,r.last=o)}return r.tail===null?(Vc(t),null):(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=Ie(),e.sibling=null,n=yo.current,D(yo,a?n&1|2:n&1),j&&Ii(t,r.treeForkCount),e);case 22:case 23:return vo(t),uo(),r=t.memoizedState!==null,e===null?r&&(t.flags|=8192):e.memoizedState!==null!==r&&(t.flags|=8192),r?n&536870912&&!(t.flags&128)&&(Vc(t),t.subtreeFlags&6&&(t.flags|=8192)):Vc(t),n=t.updateQueue,n!==null&&zc(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),r=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),e!==null&&he(Ea),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ra(ha),Vc(t),null;case 25:return null;case 30:return null}throw Error(i(156,t.tag))}function V(e,t){switch(zi(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ra(ha),xe(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Ce(t),null;case 31:if(t.memoizedState!==null){if(vo(t),t.alternate===null)throw Error(i(340));Xi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(vo(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));Xi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return he(yo),null;case 4:return xe(),null;case 10:return ra(t.type),null;case 22:case 23:return vo(t),uo(),e!==null&&he(Ea),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ra(ha),null;case 25:return null;default:return null}}function Uc(e,t){switch(zi(t),t.tag){case 3:ra(ha),xe();break;case 26:case 27:case 5:Ce(t);break;case 4:xe();break;case 31:t.memoizedState!==null&&vo(t);break;case 13:vo(t);break;case 19:he(yo);break;case 10:ra(t.type);break;case 22:case 23:vo(t),uo(),e!==null&&he(Ea);break;case 24:ra(ha)}}function Wc(e,t){try{var n=t.updateQueue,r=n===null?null:n.lastEffect;if(r!==null){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var a=n.create,o=n.inst;r=a(),o.destroy=r}n=n.next}while(n!==i)}}catch(e){Y(t,t.return,e)}}function Gc(e,t,n){try{var r=t.updateQueue,i=r===null?null:r.lastEffect;if(i!==null){var a=i.next;r=a;do{if((r.tag&e)===e){var o=r.inst,s=o.destroy;if(s!==void 0){o.destroy=void 0,i=t;var c=n,l=s;try{l()}catch(e){Y(i,c,e)}}}r=r.next}while(r!==a)}}catch(e){Y(t,t.return,e)}}function Kc(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{ao(t,n)}catch(t){Y(e,e.return,t)}}}function qc(e,t,n){n.props=I(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(n){Y(e,t,n)}}function Jc(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof n==`function`?e.refCleanup=n(r):n.current=r}}catch(n){Y(e,t,n)}}function Yc(e,t){var n=e.ref,r=e.refCleanup;if(n!==null)if(typeof r==`function`)try{r()}catch(n){Y(e,t,n)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n==`function`)try{n(null)}catch(n){Y(e,t,n)}else n.current=null}function Xc(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{a:switch(t){case`button`:case`input`:case`select`:case`textarea`:n.autoFocus&&r.focus();break a;case`img`:n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(t){Y(e,e.return,t)}}function Zc(e,t,n){try{var r=e.stateNode;Id(r,e.type,n,t),r[_t]=t}catch(t){Y(e,e.return,t)}}function Qc(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Qd(e.type)||e.tag===4}function $c(e){a:for(;;){for(;e.sibling===null;){if(e.return===null||Qc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Qd(e.type)||e.flags&2||e.child===null||e.tag===4)continue a;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function el(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName===`HTML`?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName===`HTML`?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ln));else if(r!==4&&(r===27&&Qd(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(el(e,t,n),e=e.sibling;e!==null;)el(e,t,n),e=e.sibling}function tl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(r===27&&Qd(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(tl(e,t,n),e=e.sibling;e!==null;)tl(e,t,n),e=e.sibling}function nl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Fd(t,r,n),t[gt]=e,t[_t]=n}catch(t){Y(e,e.return,t)}}var rl=!1,il=!1,al=!1,ol=typeof WeakSet==`function`?WeakSet:Set,sl=null;function cl(e,t){if(e=e.containerInfo,zd=cp,e=Fr(e),Ir(e)){if(`selectionStart`in e)var n={start:e.selectionStart,end:e.selectionEnd};else a:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break a}var s=0,c=-1,l=-1,u=0,d=0,f=e,p=null;b:for(;;){for(var m;f!==n||a!==0&&f.nodeType!==3||(c=s+a),f!==o||r!==0&&f.nodeType!==3||(l=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===e)break b;if(p===n&&++u===a&&(c=s),p===o&&++d===r&&(l=s),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}n=c===-1||l===-1?null:{start:c,end:l}}else n=null}n||={start:0,end:0}}else n=null;for(Bd={focusedElem:e,selectionRange:n},cp=!1,sl=t;sl!==null;)if(t=sl,e=t.child,t.subtreeFlags&1028&&e!==null)e.return=t,sl=e;else for(;sl!==null;){switch(t=sl,o=t.alternate,e=t.flags,t.tag){case 0:if(e&4&&(e=t.updateQueue,e=e===null?null:e.events,e!==null))for(n=0;n<e.length;n++)a=e[n],a.ref.impl=a.nextImpl;break;case 11:case 15:break;case 1:if(e&1024&&o!==null){e=void 0,n=t,a=o.memoizedProps,o=o.memoizedState,r=n.stateNode;try{var h=I(n.type,a);e=r.getSnapshotBeforeUpdate(h,o),r.__reactInternalSnapshotBeforeUpdate=e}catch(e){Y(n,n.return,e)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)tf(e);else if(n===1)switch(e.nodeName){case`HEAD`:case`HTML`:case`BODY`:tf(e);break;default:e.textContent=``}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(i(163))}if(e=t.sibling,e!==null){e.return=t.return,sl=e;break}sl=t.return}}function ll(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Cl(e,n),r&4&&Wc(5,n);break;case 1:if(Cl(e,n),r&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(e){Y(n,n.return,e)}else{var i=I(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(e){Y(n,n.return,e)}}r&64&&Kc(n),r&512&&Jc(n,n.return);break;case 3:if(Cl(e,n),r&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{ao(e,t)}catch(e){Y(n,n.return,e)}}break;case 27:t===null&&r&4&&nl(n);case 26:case 5:Cl(e,n),t===null&&r&4&&Xc(n),r&512&&Jc(n,n.return);break;case 12:Cl(e,n);break;case 31:Cl(e,n),r&4&&ml(e,n);break;case 13:Cl(e,n),r&4&&hl(e,n),r&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Xu.bind(null,n),cf(e,n))));break;case 22:if(r=n.memoizedState!==null||rl,!r){t=t!==null&&t.memoizedState!==null||il,i=rl;var a=il;rl=r,(il=t)&&!a?Tl(e,n,(n.subtreeFlags&8772)!=0):Cl(e,n),rl=i,il=a}break;case 30:break;default:Cl(e,n)}}function ul(e){var t=e.alternate;t!==null&&(e.alternate=null,ul(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&wt(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var dl=null,fl=!1;function H(e,t,n){for(n=n.child;n!==null;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(Ke&&typeof Ke.onCommitFiberUnmount==`function`)try{Ke.onCommitFiberUnmount(Ge,n)}catch{}switch(n.tag){case 26:il||Yc(n,t),H(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:il||Yc(n,t);var r=dl,i=fl;Qd(n.type)&&(dl=n.stateNode,fl=!1),H(e,t,n),mf(n.stateNode),dl=r,fl=i;break;case 5:il||Yc(n,t);case 6:if(r=dl,i=fl,dl=null,H(e,t,n),dl=r,fl=i,dl!==null)if(fl)try{(dl.nodeType===9?dl.body:dl.nodeName===`HTML`?dl.ownerDocument.body:dl).removeChild(n.stateNode)}catch(e){Y(n,t,e)}else try{dl.removeChild(n.stateNode)}catch(e){Y(n,t,e)}break;case 18:dl!==null&&(fl?(e=dl,$d(e.nodeType===9?e.body:e.nodeName===`HTML`?e.ownerDocument.body:e,n.stateNode),Pp(e)):$d(dl,n.stateNode));break;case 4:r=dl,i=fl,dl=n.stateNode.containerInfo,fl=!0,H(e,t,n),dl=r,fl=i;break;case 0:case 11:case 14:case 15:Gc(2,n,t),il||Gc(4,n,t),H(e,t,n);break;case 1:il||(Yc(n,t),r=n.stateNode,typeof r.componentWillUnmount==`function`&&qc(n,t,r)),H(e,t,n);break;case 21:H(e,t,n);break;case 22:il=(r=il)||n.memoizedState!==null,H(e,t,n),il=r;break;default:H(e,t,n)}}function ml(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Pp(e)}catch(e){Y(t,t.return,e)}}}function hl(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Pp(e)}catch(e){Y(t,t.return,e)}}function gl(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new ol),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new ol),t;default:throw Error(i(435,e.tag))}}function _l(e,t){var n=gl(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=Zu.bind(null,e,t);t.then(r,r)}})}function vl(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r],o=e,s=t,c=s;a:for(;c!==null;){switch(c.tag){case 27:if(Qd(c.type)){dl=c.stateNode,fl=!1;break a}break;case 5:dl=c.stateNode,fl=!1;break a;case 3:case 4:dl=c.stateNode.containerInfo,fl=!0;break a}c=c.return}if(dl===null)throw Error(i(160));pl(o,s,a),dl=null,fl=!1,o=a.alternate,o!==null&&(o.return=null),a.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)bl(t,e),t=t.sibling}var yl=null;function bl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:vl(t,e),xl(e),r&4&&(Gc(3,e,e.return),Wc(3,e),Gc(5,e,e.return));break;case 1:vl(t,e),xl(e),r&512&&(il||n===null||Yc(n,n.return)),r&64&&rl&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?r:n.concat(r))));break;case 26:var a=yl;if(vl(t,e),xl(e),r&512&&(il||n===null||Yc(n,n.return)),r&4){var o=n===null?null:n.memoizedState;if(r=e.memoizedState,n===null)if(r===null)if(e.stateNode===null){a:{r=e.type,n=e.memoizedProps,a=a.ownerDocument||a;b:switch(r){case`title`:o=a.getElementsByTagName(`title`)[0],(!o||o[Ct]||o[gt]||o.namespaceURI===`http://www.w3.org/2000/svg`||o.hasAttribute(`itemprop`))&&(o=a.createElement(r),a.head.insertBefore(o,a.querySelector(`head > title`))),Fd(o,r,n),o[gt]=e,kt(o),r=o;break a;case`link`:var s=Hf(`link`,`href`,a).get(r+(n.href||``));if(s){for(var c=0;c<s.length;c++)if(o=s[c],o.getAttribute(`href`)===(n.href==null||n.href===``?null:n.href)&&o.getAttribute(`rel`)===(n.rel==null?null:n.rel)&&o.getAttribute(`title`)===(n.title==null?null:n.title)&&o.getAttribute(`crossorigin`)===(n.crossOrigin==null?null:n.crossOrigin)){s.splice(c,1);break b}}o=a.createElement(r),Fd(o,r,n),a.head.appendChild(o);break;case`meta`:if(s=Hf(`meta`,`content`,a).get(r+(n.content||``))){for(c=0;c<s.length;c++)if(o=s[c],o.getAttribute(`content`)===(n.content==null?null:``+n.content)&&o.getAttribute(`name`)===(n.name==null?null:n.name)&&o.getAttribute(`property`)===(n.property==null?null:n.property)&&o.getAttribute(`http-equiv`)===(n.httpEquiv==null?null:n.httpEquiv)&&o.getAttribute(`charset`)===(n.charSet==null?null:n.charSet)){s.splice(c,1);break b}}o=a.createElement(r),Fd(o,r,n),a.head.appendChild(o);break;default:throw Error(i(468,r))}o[gt]=e,kt(o),r=o}e.stateNode=r}else Uf(a,e.type,e.stateNode);else e.stateNode=Lf(a,r,e.memoizedProps);else o===r?r===null&&e.stateNode!==null&&Zc(e,e.memoizedProps,n.memoizedProps):(o===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):o.count--,r===null?Uf(a,e.type,e.stateNode):Lf(a,r,e.memoizedProps))}break;case 27:vl(t,e),xl(e),r&512&&(il||n===null||Yc(n,n.return)),n!==null&&r&4&&Zc(e,e.memoizedProps,n.memoizedProps);break;case 5:if(vl(t,e),xl(e),r&512&&(il||n===null||Yc(n,n.return)),e.flags&32){a=e.stateNode;try{en(a,``)}catch(t){Y(e,e.return,t)}}r&4&&e.stateNode!=null&&(a=e.memoizedProps,Zc(e,a,n===null?a:n.memoizedProps)),r&1024&&(al=!0);break;case 6:if(vl(t,e),xl(e),r&4){if(e.stateNode===null)throw Error(i(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(t){Y(e,e.return,t)}}break;case 3:if(Vf=null,a=yl,yl=_f(t.containerInfo),vl(t,e),yl=a,xl(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Pp(t.containerInfo)}catch(t){Y(e,e.return,t)}al&&(al=!1,Sl(e));break;case 4:r=yl,yl=_f(e.stateNode.containerInfo),vl(t,e),xl(e),yl=r;break;case 12:vl(t,e),xl(e);break;case 31:vl(t,e),xl(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,_l(e,r)));break;case 13:vl(t,e),xl(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(nu=Ie()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,_l(e,r)));break;case 22:a=e.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,u=rl,d=il;if(rl=u||a,il=d||l,vl(t,e),il=d,rl=u,xl(e),r&8192)a:for(t=e.stateNode,t._visibility=a?t._visibility&-2:t._visibility|1,a&&(n===null||l||rl||il||wl(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){l=n=t;try{if(o=l.stateNode,a)s=o.style,typeof s.setProperty==`function`?s.setProperty(`display`,`none`,`important`):s.display=`none`;else{c=l.stateNode;var f=l.memoizedProps.style,p=f!=null&&f.hasOwnProperty(`display`)?f.display:null;c.style.display=p==null||typeof p==`boolean`?``:(``+p).trim()}}catch(e){Y(l,l.return,e)}}}else if(t.tag===6){if(n===null){l=t;try{l.stateNode.nodeValue=a?``:l.memoizedProps}catch(e){Y(l,l.return,e)}}}else if(t.tag===18){if(n===null){l=t;try{var m=l.stateNode;a?ef(m,!0):ef(l.stateNode,!1)}catch(e){Y(l,l.return,e)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break a;for(;t.sibling===null;){if(t.return===null||t.return===e)break a;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}r&4&&(r=e.updateQueue,r!==null&&(n=r.retryQueue,n!==null&&(r.retryQueue=null,_l(e,n))));break;case 19:vl(t,e),xl(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,_l(e,r)));break;case 30:break;case 21:break;default:vl(t,e),xl(e)}}function xl(e){var t=e.flags;if(t&2){try{for(var n,r=e.return;r!==null;){if(Qc(r)){n=r;break}r=r.return}if(n==null)throw Error(i(160));switch(n.tag){case 27:var a=n.stateNode;tl(e,$c(e),a);break;case 5:var o=n.stateNode;n.flags&32&&(en(o,``),n.flags&=-33),tl(e,$c(e),o);break;case 3:case 4:var s=n.stateNode.containerInfo;el(e,$c(e),s);break;default:throw Error(i(161))}}catch(t){Y(e,e.return,t)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Sl(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Sl(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Cl(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)ll(e,t.alternate,t),t=t.sibling}function wl(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Gc(4,t,t.return),wl(t);break;case 1:Yc(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount==`function`&&qc(t,t.return,n),wl(t);break;case 27:mf(t.stateNode);case 26:case 5:Yc(t,t.return),wl(t);break;case 22:t.memoizedState===null&&wl(t);break;case 30:wl(t);break;default:wl(t)}e=e.sibling}}function Tl(e,t,n){for(n&&=(t.subtreeFlags&8772)!=0,t=t.child;t!==null;){var r=t.alternate,i=e,a=t,o=a.flags;switch(a.tag){case 0:case 11:case 15:Tl(i,a,n),Wc(4,a);break;case 1:if(Tl(i,a,n),r=a,i=r.stateNode,typeof i.componentDidMount==`function`)try{i.componentDidMount()}catch(e){Y(r,r.return,e)}if(r=a,i=r.updateQueue,i!==null){var s=r.stateNode;try{var c=i.shared.hiddenCallbacks;if(c!==null)for(i.shared.hiddenCallbacks=null,i=0;i<c.length;i++)io(c[i],s)}catch(e){Y(r,r.return,e)}}n&&o&64&&Kc(a),Jc(a,a.return);break;case 27:nl(a);case 26:case 5:Tl(i,a,n),n&&r===null&&o&4&&Xc(a),Jc(a,a.return);break;case 12:Tl(i,a,n);break;case 31:Tl(i,a,n),n&&o&4&&ml(i,a);break;case 13:Tl(i,a,n),n&&o&4&&hl(i,a);break;case 22:a.memoizedState===null&&Tl(i,a,n),Jc(a,a.return);break;case 30:break;default:Tl(i,a,n)}t=t.sibling}}function El(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&_a(n))}function Dl(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&_a(e))}function Ol(e,t,n,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)kl(e,t,n,r),t=t.sibling}function kl(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Ol(e,t,n,r),i&2048&&Wc(9,t);break;case 1:Ol(e,t,n,r);break;case 3:Ol(e,t,n,r),i&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&_a(e)));break;case 12:if(i&2048){Ol(e,t,n,r),e=t.stateNode;try{var a=t.memoizedProps,o=a.id,s=a.onPostCommit;typeof s==`function`&&s(o,t.alternate===null?`mount`:`update`,e.passiveEffectDuration,-0)}catch(e){Y(t,t.return,e)}}else Ol(e,t,n,r);break;case 31:Ol(e,t,n,r);break;case 13:Ol(e,t,n,r);break;case 23:break;case 22:a=t.stateNode,o=t.alternate,t.memoizedState===null?a._visibility&2?Ol(e,t,n,r):(a._visibility|=2,Al(e,t,n,r,(t.subtreeFlags&10256)!=0||!1)):a._visibility&2?Ol(e,t,n,r):jl(e,t),i&2048&&El(o,t);break;case 24:Ol(e,t,n,r),i&2048&&Dl(t.alternate,t);break;default:Ol(e,t,n,r)}}function Al(e,t,n,r,i){for(i&&=(t.subtreeFlags&10256)!=0||!1,t=t.child;t!==null;){var a=e,o=t,s=n,c=r,l=o.flags;switch(o.tag){case 0:case 11:case 15:Al(a,o,s,c,i),Wc(8,o);break;case 23:break;case 22:var u=o.stateNode;o.memoizedState===null?(u._visibility|=2,Al(a,o,s,c,i)):u._visibility&2?Al(a,o,s,c,i):jl(a,o),i&&l&2048&&El(o.alternate,o);break;case 24:Al(a,o,s,c,i),i&&l&2048&&Dl(o.alternate,o);break;default:Al(a,o,s,c,i)}t=t.sibling}}function jl(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:jl(n,r),i&2048&&El(r.alternate,r);break;case 24:jl(n,r),i&2048&&Dl(r.alternate,r);break;default:jl(n,r)}t=t.sibling}}var Ml=8192;function Nl(e,t,n){if(e.subtreeFlags&Ml)for(e=e.child;e!==null;)Pl(e,t,n),e=e.sibling}function Pl(e,t,n){switch(e.tag){case 26:Nl(e,t,n),e.flags&Ml&&e.memoizedState!==null&&Kf(n,yl,e.memoizedState,e.memoizedProps);break;case 5:Nl(e,t,n);break;case 3:case 4:var r=yl;yl=_f(e.stateNode.containerInfo),Nl(e,t,n),yl=r;break;case 22:e.memoizedState===null&&(r=e.alternate,r!==null&&r.memoizedState!==null?(r=Ml,Ml=16777216,Nl(e,t,n),Ml=r):Nl(e,t,n));break;default:Nl(e,t,n)}}function Fl(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Il(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];sl=r,zl(r,e)}Fl(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Ll(e),e=e.sibling}function Ll(e){switch(e.tag){case 0:case 11:case 15:Il(e),e.flags&2048&&Gc(9,e,e.return);break;case 3:Il(e);break;case 12:Il(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Rl(e)):Il(e);break;default:Il(e)}}function Rl(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];sl=r,zl(r,e)}Fl(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Gc(8,t,t.return),Rl(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Rl(t));break;default:Rl(t)}e=e.sibling}}function zl(e,t){for(;sl!==null;){var n=sl;switch(n.tag){case 0:case 11:case 15:Gc(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var r=n.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:_a(n.memoizedState.cache)}if(r=n.child,r!==null)r.return=n,sl=r;else a:for(n=e;sl!==null;){r=sl;var i=r.sibling,a=r.return;if(ul(r),r===n){sl=null;break a}if(i!==null){i.return=a,sl=i;break a}sl=a}}}var Bl={getCacheForType:function(e){var t=la(ha),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return la(ha).controller.signal}},Vl=typeof WeakMap==`function`?WeakMap:Map,U=0,Hl=null,W=null,G=0,K=0,Ul=null,Wl=!1,Gl=!1,Kl=!1,ql=0,Jl=0,Yl=0,Xl=0,Zl=0,q=0,Ql=0,$l=null,eu=null,tu=!1,nu=0,ru=0,iu=1/0,au=null,ou=null,su=0,cu=null,lu=null,uu=0,du=0,fu=null,pu=null,mu=0,hu=null;function gu(){return U&2&&G!==0?G&-G:T.T===null?pt():pd()}function _u(){if(q===0)if(!(G&536870912)||j){var e=Qe;Qe<<=1,!(Qe&3932160)&&(Qe=262144),q=e}else q=536870912;return e=fo.current,e!==null&&(e.flags|=32),q}function vu(e,t,n){(e===Hl&&(K===2||K===9)||e.cancelPendingCommit!==null)&&(Tu(e,0),Su(e,G,q,!1)),ot(e,n),(!(U&2)||e!==Hl)&&(e===Hl&&(!(U&2)&&(Xl|=n),Jl===4&&Su(e,G,q,!1)),ad(e))}function yu(e,t,n){if(U&6)throw Error(i(327));var r=!n&&(t&127)==0&&(t&e.expiredLanes)===0||nt(e,t),a=r?Nu(e,t):ju(e,t,!0),o=r;do{if(a===0){Gl&&!r&&Su(e,t,0,!1);break}else{if(n=e.current.alternate,o&&!xu(n)){a=ju(e,t,!1),o=!1;continue}if(a===2){if(o=t,e.errorRecoveryDisabledLanes&o)var s=0;else s=e.pendingLanes&-536870913,s=s===0?s&536870912?536870912:0:s;if(s!==0){t=s;a:{var c=e;a=$l;var l=c.current.memoizedState.isDehydrated;if(l&&(Tu(c,s).flags|=256),s=ju(c,s,!1),s!==2){if(Kl&&!l){c.errorRecoveryDisabledLanes|=o,Xl|=o,a=4;break a}o=eu,eu=a,o!==null&&(eu===null?eu=o:eu.push.apply(eu,o))}a=s}if(o=!1,a!==2)continue}}if(a===1){Tu(e,0),Su(e,t,0,!0);break}a:{switch(r=e,o=a,o){case 0:case 1:throw Error(i(345));case 4:if((t&4194048)!==t)break;case 6:Su(r,t,q,!Wl);break a;case 2:eu=null;break;case 3:case 5:break;default:throw Error(i(329))}if((t&62914560)===t&&(a=nu+300-Ie(),10<a)){if(Su(r,t,q,!Wl),tt(r,0,!0)!==0)break a;uu=t,r.timeoutHandle=qd(bu.bind(null,r,n,eu,au,tu,t,q,Xl,Ql,Wl,o,`Throttled`,-0,0),a);break a}bu(r,n,eu,au,tu,t,q,Xl,Ql,Wl,o,null,-0,0)}}break}while(1);ad(e)}function bu(e,t,n,r,i,a,o,s,c,l,u,d,f,p){if(e.timeoutHandle=-1,d=t.subtreeFlags,d&8192||(d&16785408)==16785408){d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ln},Pl(t,a,d);var m=(a&62914560)===a?nu-Ie():(a&4194048)===a?ru-Ie():0;if(m=Jf(d,m),m!==null){uu=a,e.cancelPendingCommit=m(Bu.bind(null,e,t,a,n,r,i,o,s,c,u,d,null,f,p)),Su(e,a,o,!l);return}}Bu(e,t,a,n,r,i,o,s,c)}function xu(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Ar(a(),i))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Su(e,t,n,r){t&=~Zl,t&=~Xl,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var a=31-Je(i),o=1<<a;r[a]=-1,i&=~o}n!==0&&ct(e,n,t)}function Cu(){return U&6?!0:(od(0,!1),!1)}function wu(){if(W!==null){if(K===0)var e=W.return;else e=W,ta=ea=null,zo(e),Ba=null,Va=0,e=W;for(;e!==null;)Uc(e.alternate,e),e=e.return;W=null}}function Tu(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Jd(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),uu=0,wu(),Hl=e,W=n=vi(e.current,null),G=t,K=0,Ul=null,Wl=!1,Gl=nt(e,t),Kl=!1,Ql=q=Zl=Xl=Yl=Jl=0,eu=$l=null,tu=!1,t&8&&(t|=t&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=t;0<r;){var i=31-Je(r),a=1<<i;t|=e[i],r&=~a}return ql=t,ci(),n}function Eu(e,t){M=null,T.H=N,t===Aa||t===Ma?(t=Ra(),K=3):t===ja?(t=Ra(),K=4):K=t===cc?8:typeof t==`object`&&t&&typeof t.then==`function`?6:1,Ul=t,W===null&&(Jl=1,nc(e,Ei(t,e.current)))}function Du(){var e=fo.current;return e===null?!0:(G&4194048)===G?po===null:(G&62914560)===G||G&536870912?e===po:!1}function Ou(){var e=T.H;return T.H=N,e===null?N:e}function ku(){var e=T.A;return T.A=Bl,e}function Au(){Jl=4,Wl||(G&4194048)!==G&&fo.current!==null||(Gl=!0),!(Yl&134217727)&&!(Xl&134217727)||Hl===null||Su(Hl,G,q,!1)}function ju(e,t,n){var r=U;U|=2;var i=Ou(),a=ku();(Hl!==e||G!==t)&&(au=null,Tu(e,t)),t=!1;var o=Jl;a:do try{if(K!==0&&W!==null){var s=W,c=Ul;switch(K){case 8:wu(),o=6;break a;case 3:case 2:case 9:case 6:fo.current===null&&(t=!0);var l=K;if(K=0,Ul=null,Lu(e,s,c,l),n&&Gl){o=0;break a}break;default:l=K,K=0,Ul=null,Lu(e,s,c,l)}}Mu(),o=Jl;break}catch(t){Eu(e,t)}while(1);return t&&e.shellSuspendCounter++,ta=ea=null,U=r,T.H=i,T.A=a,W===null&&(Hl=null,G=0,ci()),o}function Mu(){for(;W!==null;)Fu(W)}function Nu(e,t){var n=U;U|=2;var r=Ou(),a=ku();Hl!==e||G!==t?(au=null,iu=Ie()+500,Tu(e,t)):Gl=nt(e,t);a:do try{if(K!==0&&W!==null){t=W;var o=Ul;b:switch(K){case 1:K=0,Ul=null,Lu(e,t,o,1);break;case 2:case 9:if(Pa(o)){K=0,Ul=null,Iu(t);break}t=function(){K!==2&&K!==9||Hl!==e||(K=7),ad(e)},o.then(t,t);break a;case 3:K=7;break a;case 4:K=5;break a;case 7:Pa(o)?(K=0,Ul=null,Iu(t)):(K=0,Ul=null,Lu(e,t,o,7));break;case 5:var s=null;switch(W.tag){case 26:s=W.memoizedState;case 5:case 27:var c=W;if(s?Gf(s):c.stateNode.complete){K=0,Ul=null;var l=c.sibling;if(l!==null)W=l;else{var u=c.return;u===null?W=null:(W=u,Ru(u))}break b}}K=0,Ul=null,Lu(e,t,o,5);break;case 6:K=0,Ul=null,Lu(e,t,o,6);break;case 8:wu(),Jl=6;break a;default:throw Error(i(462))}}Pu();break}catch(t){Eu(e,t)}while(1);return ta=ea=null,T.H=r,T.A=a,U=n,W===null?(Hl=null,G=0,ci(),Jl):0}function Pu(){for(;W!==null&&!Pe();)Fu(W)}function Fu(e){var t=Fc(e.alternate,e,ql);e.memoizedProps=e.pendingProps,t===null?Ru(e):W=t}function Iu(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=z(n,t,t.pendingProps,t.type,void 0,G);break;case 11:t=z(n,t,t.pendingProps,t.type.render,t.ref,G);break;case 5:zo(t);default:Uc(n,t),t=W=yi(t,ql),t=Fc(n,t,ql)}e.memoizedProps=e.pendingProps,t===null?Ru(e):W=t}function Lu(e,t,n,r){ta=ea=null,zo(t),Ba=null,Va=0;var i=t.return;try{if(sc(e,i,t,n,G)){Jl=1,nc(e,Ei(n,e.current)),W=null;return}}catch(t){if(i!==null)throw W=i,t;Jl=1,nc(e,Ei(n,e.current)),W=null;return}t.flags&32768?(j||r===1?e=!0:Gl||G&536870912?e=!1:(Wl=e=!0,(r===2||r===9||r===3||r===6)&&(r=fo.current,r!==null&&r.tag===13&&(r.flags|=16384))),zu(t,e)):Ru(t)}function Ru(e){var t=e;do{if(t.flags&32768){zu(t,Wl);return}e=t.return;var n=Hc(t.alternate,t,ql);if(n!==null){W=n;return}if(t=t.sibling,t!==null){W=t;return}W=t=e}while(t!==null);Jl===0&&(Jl=5)}function zu(e,t){do{var n=V(e.alternate,e);if(n!==null){n.flags&=32767,W=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){W=e;return}W=e=n}while(e!==null);Jl=6,W=null}function Bu(e,t,n,r,a,o,s,c,l){e.cancelPendingCommit=null;do Gu();while(su!==0);if(U&6)throw Error(i(327));if(t!==null){if(t===e.current)throw Error(i(177));if(o=t.lanes|t.childLanes,o|=si,st(e,n,o,s,c,l),e===Hl&&(W=Hl=null,G=0),lu=t,cu=e,uu=n,du=o,fu=a,pu=r,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,Qu(Be,function(){return Ku(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(t.flags&13878)!=0,t.subtreeFlags&13878||r){r=T.T,T.T=null,a=E.p,E.p=2,s=U,U|=4;try{cl(e,t,n)}finally{U=s,E.p=a,T.T=r}}su=1,Vu(),Hu(),Uu()}}function Vu(){if(su===1){su=0;var e=cu,t=lu,n=(t.flags&13878)!=0;if(t.subtreeFlags&13878||n){n=T.T,T.T=null;var r=E.p;E.p=2;var i=U;U|=4;try{bl(t,e);var a=Bd,o=Fr(e.containerInfo),s=a.focusedElem,c=a.selectionRange;if(o!==s&&s&&s.ownerDocument&&Pr(s.ownerDocument.documentElement,s)){if(c!==null&&Ir(s)){var l=c.start,u=c.end;if(u===void 0&&(u=l),`selectionStart`in s)s.selectionStart=l,s.selectionEnd=Math.min(u,s.value.length);else{var d=s.ownerDocument||document,f=d&&d.defaultView||window;if(f.getSelection){var p=f.getSelection(),m=s.textContent.length,h=Math.min(c.start,m),g=c.end===void 0?h:Math.min(c.end,m);!p.extend&&h>g&&(o=g,g=h,h=o);var _=Nr(s,h),v=Nr(s,g);if(_&&v&&(p.rangeCount!==1||p.anchorNode!==_.node||p.anchorOffset!==_.offset||p.focusNode!==v.node||p.focusOffset!==v.offset)){var y=d.createRange();y.setStart(_.node,_.offset),p.removeAllRanges(),h>g?(p.addRange(y),p.extend(v.node,v.offset)):(y.setEnd(v.node,v.offset),p.addRange(y))}}}}for(d=[],p=s;p=p.parentNode;)p.nodeType===1&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof s.focus==`function`&&s.focus(),s=0;s<d.length;s++){var b=d[s];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}cp=!!zd,Bd=zd=null}finally{U=i,E.p=r,T.T=n}}e.current=t,su=2}}function Hu(){if(su===2){su=0;var e=cu,t=lu,n=(t.flags&8772)!=0;if(t.subtreeFlags&8772||n){n=T.T,T.T=null;var r=E.p;E.p=2;var i=U;U|=4;try{ll(e,t.alternate,t)}finally{U=i,E.p=r,T.T=n}}su=3}}function Uu(){if(su===4||su===3){su=0,Fe();var e=cu,t=lu,n=uu,r=pu;t.subtreeFlags&10256||t.flags&10256?su=5:(su=0,lu=cu=null,Wu(e,e.pendingLanes));var i=e.pendingLanes;if(i===0&&(ou=null),ft(n),t=t.stateNode,Ke&&typeof Ke.onCommitFiberRoot==`function`)try{Ke.onCommitFiberRoot(Ge,t,void 0,(t.current.flags&128)==128)}catch{}if(r!==null){t=T.T,i=E.p,E.p=2,T.T=null;try{for(var a=e.onRecoverableError,o=0;o<r.length;o++){var s=r[o];a(s.value,{componentStack:s.stack})}}finally{T.T=t,E.p=i}}uu&3&&Gu(),ad(e),i=e.pendingLanes,n&261930&&i&42?e===hu?mu++:(mu=0,hu=e):mu=0,od(0,!1)}}function Wu(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,_a(t)))}function Gu(){return Vu(),Hu(),Uu(),Ku()}function Ku(){if(su!==5)return!1;var e=cu,t=du;du=0;var n=ft(uu),r=T.T,a=E.p;try{E.p=32>n?32:n,T.T=null,n=fu,fu=null;var o=cu,s=uu;if(su=0,lu=cu=null,uu=0,U&6)throw Error(i(331));var c=U;if(U|=4,Ll(o.current),kl(o,o.current,s,n),U=c,od(0,!1),Ke&&typeof Ke.onPostCommitFiberRoot==`function`)try{Ke.onPostCommitFiberRoot(Ge,o)}catch{}return!0}finally{E.p=a,T.T=r,Wu(e,t)}}function J(e,t,n){t=Ei(n,t),t=ic(e.stateNode,t,2),e=Qa(e,t,2),e!==null&&(ot(e,2),ad(e))}function Y(e,t,n){if(e.tag===3)J(e,e,n);else for(;t!==null;){if(t.tag===3){J(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError==`function`||typeof r.componentDidCatch==`function`&&(ou===null||!ou.has(r))){e=Ei(n,e),n=ac(2),r=Qa(t,n,2),r!==null&&(oc(n,r,t,e),ot(r,2),ad(r));break}}t=t.return}}function qu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Vl;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(Kl=!0,i.add(n),e=Ju.bind(null,e,t,n),t.then(e,e))}function Ju(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Hl===e&&(G&n)===n&&(Jl===4||Jl===3&&(G&62914560)===G&&300>Ie()-nu?!(U&2)&&Tu(e,0):Zl|=n,Ql===G&&(Ql=0)),ad(e)}function Yu(e,t){t===0&&(t=it()),e=di(e,t),e!==null&&(ot(e,t),ad(e))}function Xu(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Yu(e,n)}function Zu(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(i(314))}r!==null&&r.delete(t),Yu(e,n)}function Qu(e,t){return Me(e,t)}var $u=null,ed=null,td=!1,nd=!1,rd=!1,id=0;function ad(e){e!==ed&&e.next===null&&(ed===null?$u=ed=e:ed=ed.next=e),nd=!0,td||(td=!0,fd())}function od(e,t){if(!rd&&nd){rd=!0;do for(var n=!1,r=$u;r!==null;){if(!t)if(e!==0){var i=r.pendingLanes;if(i===0)var a=0;else{var o=r.suspendedLanes,s=r.pingedLanes;a=(1<<31-Je(42|e)+1)-1,a&=i&~(o&~s),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(n=!0,dd(r,a))}else a=G,a=tt(r,r===Hl?a:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),!(a&3)||nt(r,a)||(n=!0,dd(r,a));r=r.next}while(n);rd=!1}}function sd(){cd()}function cd(){nd=td=!1;var e=0;id!==0&&Kd()&&(e=id);for(var t=Ie(),n=null,r=$u;r!==null;){var i=r.next,a=ld(r,t);a===0?(r.next=null,n===null?$u=i:n.next=i,i===null&&(ed=n)):(n=r,(e!==0||a&3)&&(nd=!0)),r=i}su!==0&&su!==5||od(e,!1),id!==0&&(id=0)}function ld(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes&-62914561;0<a;){var o=31-Je(a),s=1<<o,c=i[o];c===-1?((s&n)===0||(s&r)!==0)&&(i[o]=rt(s,t)):c<=t&&(e.expiredLanes|=s),a&=~s}if(t=Hl,n=G,n=tt(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,n===0||e===t&&(K===2||K===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&Ne(r),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||nt(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(r!==null&&Ne(r),ft(n)){case 2:case 8:n=ze;break;case 32:n=Be;break;case 268435456:n=He;break;default:n=Be}return r=ud.bind(null,e),n=Me(n,r),e.callbackPriority=t,e.callbackNode=n,t}return r!==null&&r!==null&&Ne(r),e.callbackPriority=2,e.callbackNode=null,2}function ud(e,t){if(su!==0&&su!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Gu()&&e.callbackNode!==n)return null;var r=G;return r=tt(e,e===Hl?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(yu(e,r,t),ld(e,Ie()),e.callbackNode!=null&&e.callbackNode===n?ud.bind(null,e):null)}function dd(e,t){if(Gu())return null;yu(e,t,!0)}function fd(){Xd(function(){U&6?Me(Re,sd):cd()})}function pd(){if(id===0){var e=ba;e===0&&(e=Ze,Ze<<=1,!(Ze&261888)&&(Ze=256)),id=e}return id}function md(e){return e==null||typeof e==`symbol`||typeof e==`boolean`?null:typeof e==`function`?e:cn(``+e)}function hd(e,t){var n=t.ownerDocument.createElement(`input`);return n.name=t.name,n.value=t.value,e.id&&n.setAttribute(`form`,e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function gd(e,t,n,r,i){if(t===`submit`&&n&&n.stateNode===i){var a=md((i[_t]||null).action),o=r.submitter;o&&(t=(t=o[_t]||null)?md(t.formAction):o.getAttribute(`formAction`),t!==null&&(a=t,o=null));var s=new An(`action`,`action`,null,r,i);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(id!==0){var e=o?hd(i,o):new FormData(i);Fs(n,{pending:!0,data:e,method:i.method,action:a},null,e)}}else typeof a==`function`&&(s.preventDefault(),e=o?hd(i,o):new FormData(i),Fs(n,{pending:!0,data:e,method:i.method,action:a},a,e))},currentTarget:i}]})}}for(var _d=0;_d<ni.length;_d++){var vd=ni[_d];ri(vd.toLowerCase(),`on`+(vd[0].toUpperCase()+vd.slice(1)))}ri(Jr,`onAnimationEnd`),ri(Yr,`onAnimationIteration`),ri(Xr,`onAnimationStart`),ri(`dblclick`,`onDoubleClick`),ri(`focusin`,`onFocus`),ri(`focusout`,`onBlur`),ri(Zr,`onTransitionRun`),ri(Qr,`onTransitionStart`),ri($r,`onTransitionCancel`),ri(ei,`onTransitionEnd`),Nt(`onMouseEnter`,[`mouseout`,`mouseover`]),Nt(`onMouseLeave`,[`mouseout`,`mouseover`]),Nt(`onPointerEnter`,[`pointerout`,`pointerover`]),Nt(`onPointerLeave`,[`pointerout`,`pointerover`]),Mt(`onChange`,`change click focusin focusout input keydown keyup selectionchange`.split(` `)),Mt(`onSelect`,`focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange`.split(` `)),Mt(`onBeforeInput`,[`compositionend`,`keypress`,`textInput`,`paste`]),Mt(`onCompositionEnd`,`compositionend focusout keydown keypress keyup mousedown`.split(` `)),Mt(`onCompositionStart`,`compositionstart focusout keydown keypress keyup mousedown`.split(` `)),Mt(`onCompositionUpdate`,`compositionupdate focusout keydown keypress keyup mousedown`.split(` `));var yd=`abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting`.split(` `),bd=new Set(`beforetoggle cancel close invalid load scroll scrollend toggle`.split(` `).concat(yd));function xd(e,t){t=(t&4)!=0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;a:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==a&&i.isPropagationStopped())break a;a=s,i.currentTarget=l;try{a(i)}catch(e){ii(e)}i.currentTarget=null,a=c}else for(o=0;o<r.length;o++){if(s=r[o],c=s.instance,l=s.currentTarget,s=s.listener,c!==a&&i.isPropagationStopped())break a;a=s,i.currentTarget=l;try{a(i)}catch(e){ii(e)}i.currentTarget=null,a=c}}}}function X(e,t){var n=t[yt];n===void 0&&(n=t[yt]=new Set);var r=e+`__bubble`;n.has(r)||(Td(t,e,2,!1),n.add(r))}function Sd(e,t,n){var r=0;t&&(r|=4),Td(n,e,r,t)}var Cd=`_reactListening`+Math.random().toString(36).slice(2);function wd(e){if(!e[Cd]){e[Cd]=!0,At.forEach(function(t){t!==`selectionchange`&&(bd.has(t)||Sd(t,!1,e),Sd(t,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Cd]||(t[Cd]=!0,Sd(`selectionchange`,!1,t))}}function Td(e,t,n,r){switch(hp(t)){case 2:var i=lp;break;case 8:i=up;break;default:i=dp}n=i.bind(null,t,n,e),i=void 0,!yn||t!==`touchstart`&&t!==`touchmove`&&t!==`wheel`||(i=!0),r?i===void 0?e.addEventListener(t,n,!0):e.addEventListener(t,n,{capture:!0,passive:i}):i===void 0?e.addEventListener(t,n,!1):e.addEventListener(t,n,{passive:i})}function Z(e,t,n,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)a:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var c=r.stateNode.containerInfo;if(c===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&s.stateNode.containerInfo===i)return;s=s.return}for(;c!==null;){if(s=Tt(c),s===null)return;if(l=s.tag,l===5||l===6||l===26||l===27){r=a=s;continue a}c=c.parentNode}}r=r.return}gn(function(){var r=a,i=dn(n),s=[];a:{var c=ti.get(e);if(c!==void 0){var l=An,u=e;switch(e){case`keypress`:if(Tn(n)===0)break a;case`keydown`:case`keyup`:l=qn;break;case`focusin`:u=`focus`,l=zn;break;case`focusout`:u=`blur`,l=zn;break;case`beforeblur`:case`afterblur`:l=zn;break;case`click`:if(n.button===2)break a;case`auxclick`:case`dblclick`:case`mousedown`:case`mousemove`:case`mouseup`:case`mouseout`:case`mouseover`:case`contextmenu`:l=Ln;break;case`drag`:case`dragend`:case`dragenter`:case`dragexit`:case`dragleave`:case`dragover`:case`dragstart`:case`drop`:l=Rn;break;case`touchcancel`:case`touchend`:case`touchmove`:case`touchstart`:l=Yn;break;case Jr:case Yr:case Xr:l=Bn;break;case ei:l=Xn;break;case`scroll`:case`scrollend`:l=Mn;break;case`wheel`:l=Zn;break;case`copy`:case`cut`:case`paste`:l=Vn;break;case`gotpointercapture`:case`lostpointercapture`:case`pointercancel`:case`pointerdown`:case`pointermove`:case`pointerout`:case`pointerover`:case`pointerup`:l=Jn;break;case`toggle`:case`beforetoggle`:l=Qn}var d=(t&4)!=0,f=!d&&(e===`scroll`||e===`scrollend`),p=d?c===null?null:c+`Capture`:c;d=[];for(var m=r,h;m!==null;){var g=m;if(h=g.stateNode,g=g.tag,g!==5&&g!==26&&g!==27||h===null||p===null||(g=_n(m,p),g!=null&&d.push(Ed(m,g,h))),f)break;m=m.return}0<d.length&&(c=new l(c,u,null,n,i),s.push({event:c,listeners:d}))}}if(!(t&7)){a:{if(c=e===`mouseover`||e===`pointerover`,l=e===`mouseout`||e===`pointerout`,c&&n!==un&&(u=n.relatedTarget||n.fromElement)&&(Tt(u)||u[vt]))break a;if((l||c)&&(c=i.window===i?i:(c=i.ownerDocument)?c.defaultView||c.parentWindow:window,l?(u=n.relatedTarget||n.toElement,l=r,u=u?Tt(u):null,u!==null&&(f=o(u),d=u.tag,u!==f||d!==5&&d!==27&&d!==6)&&(u=null)):(l=null,u=r),l!==u)){if(d=Ln,g=`onMouseLeave`,p=`onMouseEnter`,m=`mouse`,(e===`pointerout`||e===`pointerover`)&&(d=Jn,g=`onPointerLeave`,p=`onPointerEnter`,m=`pointer`),f=l==null?c:Dt(l),h=u==null?c:Dt(u),c=new d(g,m+`leave`,l,n,i),c.target=f,c.relatedTarget=h,g=null,Tt(i)===r&&(d=new d(p,m+`enter`,u,n,i),d.target=h,d.relatedTarget=f,g=d),f=g,l&&u)b:{for(d=Od,p=l,m=u,h=0,g=p;g;g=d(g))h++;g=0;for(var _=m;_;_=d(_))g++;for(;0<h-g;)p=d(p),h--;for(;0<g-h;)m=d(m),g--;for(;h--;){if(p===m||m!==null&&p===m.alternate){d=p;break b}p=d(p),m=d(m)}d=null}else d=null;l!==null&&kd(s,c,l,d,!1),u!==null&&f!==null&&kd(s,f,u,d,!0)}}a:{if(c=r?Dt(r):window,l=c.nodeName&&c.nodeName.toLowerCase(),l===`select`||l===`input`&&c.type===`file`)var v=vr;else if(fr(c))if(yr)v=Or;else{v=Er;var y=Tr}else l=c.nodeName,!l||l.toLowerCase()!==`input`||c.type!==`checkbox`&&c.type!==`radio`?r&&an(r.elementType)&&(v=vr):v=Dr;if(v&&=v(e,r)){pr(s,v,n,i);break a}y&&y(e,c,r),e===`focusout`&&r&&c.type===`number`&&r.memoizedProps.value!=null&&Xt(c,`number`,c.value)}switch(y=r?Dt(r):window,e){case`focusin`:(fr(y)||y.contentEditable===`true`)&&(Rr=y,zr=r,Br=null);break;case`focusout`:Br=zr=Rr=null;break;case`mousedown`:Vr=!0;break;case`contextmenu`:case`mouseup`:case`dragend`:Vr=!1,Hr(s,n,i);break;case`selectionchange`:if(Lr)break;case`keydown`:case`keyup`:Hr(s,n,i)}var b;if(er)b:{switch(e){case`compositionstart`:var x=`onCompositionStart`;break b;case`compositionend`:x=`onCompositionEnd`;break b;case`compositionupdate`:x=`onCompositionUpdate`;break b}x=void 0}else cr?or(e,n)&&(x=`onCompositionEnd`):e===`keydown`&&n.keyCode===229&&(x=`onCompositionStart`);x&&(rr&&n.locale!==`ko`&&(cr||x!==`onCompositionStart`?x===`onCompositionEnd`&&cr&&(b=wn()):(xn=i,Sn=`value`in xn?xn.value:xn.textContent,cr=!0)),y=Dd(r,x),0<y.length&&(x=new Hn(x,e,null,n,i),s.push({event:x,listeners:y}),b?x.data=b:(b=sr(n),b!==null&&(x.data=b)))),(b=nr?lr(e,n):ur(e,n))&&(x=Dd(r,`onBeforeInput`),0<x.length&&(y=new Hn(`onBeforeInput`,`beforeinput`,null,n,i),s.push({event:y,listeners:x}),y.data=b)),gd(s,e,r,n,i)}xd(s,t)})}function Ed(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Dd(e,t){for(var n=t+`Capture`,r=[];e!==null;){var i=e,a=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||a===null||(i=_n(e,n),i!=null&&r.unshift(Ed(e,i,a)),i=_n(e,t),i!=null&&r.push(Ed(e,i,a))),e.tag===3)return r;e=e.return}return[]}function Od(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function kd(e,t,n,r,i){for(var a=t._reactName,o=[];n!==null&&n!==r;){var s=n,c=s.alternate,l=s.stateNode;if(s=s.tag,c!==null&&c===r)break;s!==5&&s!==26&&s!==27||l===null||(c=l,i?(l=_n(n,a),l!=null&&o.unshift(Ed(n,l,c))):i||(l=_n(n,a),l!=null&&o.push(Ed(n,l,c)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Ad=/\r\n?/g,jd=/\u0000|\uFFFD/g;function Md(e){return(typeof e==`string`?e:``+e).replace(Ad,`
`).replace(jd,``)}function Nd(e,t){return t=Md(t),Md(e)===t}function Q(e,t,n,r,a,o){switch(n){case`children`:typeof r==`string`?t===`body`||t===`textarea`&&r===``||en(e,r):(typeof r==`number`||typeof r==`bigint`)&&t!==`body`&&en(e,``+r);break;case`className`:zt(e,`class`,r);break;case`tabIndex`:zt(e,`tabindex`,r);break;case`dir`:case`role`:case`viewBox`:case`width`:case`height`:zt(e,n,r);break;case`style`:rn(e,r,o);break;case`data`:if(t!==`object`){zt(e,`data`,r);break}case`src`:case`href`:if(r===``&&(t!==`a`||n!==`href`)){e.removeAttribute(n);break}if(r==null||typeof r==`function`||typeof r==`symbol`||typeof r==`boolean`){e.removeAttribute(n);break}r=cn(``+r),e.setAttribute(n,r);break;case`action`:case`formAction`:if(typeof r==`function`){e.setAttribute(n,`javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')`);break}else typeof o==`function`&&(n===`formAction`?(t!==`input`&&Q(e,t,`name`,a.name,a,null),Q(e,t,`formEncType`,a.formEncType,a,null),Q(e,t,`formMethod`,a.formMethod,a,null),Q(e,t,`formTarget`,a.formTarget,a,null)):(Q(e,t,`encType`,a.encType,a,null),Q(e,t,`method`,a.method,a,null),Q(e,t,`target`,a.target,a,null)));if(r==null||typeof r==`symbol`||typeof r==`boolean`){e.removeAttribute(n);break}r=cn(``+r),e.setAttribute(n,r);break;case`onClick`:r!=null&&(e.onclick=ln);break;case`onScroll`:r!=null&&X(`scroll`,e);break;case`onScrollEnd`:r!=null&&X(`scrollend`,e);break;case`dangerouslySetInnerHTML`:if(r!=null){if(typeof r!=`object`||!(`__html`in r))throw Error(i(61));if(n=r.__html,n!=null){if(a.children!=null)throw Error(i(60));e.innerHTML=n}}break;case`multiple`:e.multiple=r&&typeof r!=`function`&&typeof r!=`symbol`;break;case`muted`:e.muted=r&&typeof r!=`function`&&typeof r!=`symbol`;break;case`suppressContentEditableWarning`:case`suppressHydrationWarning`:case`defaultValue`:case`defaultChecked`:case`innerHTML`:case`ref`:break;case`autoFocus`:break;case`xlinkHref`:if(r==null||typeof r==`function`||typeof r==`boolean`||typeof r==`symbol`){e.removeAttribute(`xlink:href`);break}n=cn(``+r),e.setAttributeNS(`http://www.w3.org/1999/xlink`,`xlink:href`,n);break;case`contentEditable`:case`spellCheck`:case`draggable`:case`value`:case`autoReverse`:case`externalResourcesRequired`:case`focusable`:case`preserveAlpha`:r!=null&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,``+r):e.removeAttribute(n);break;case`inert`:case`allowFullScreen`:case`async`:case`autoPlay`:case`controls`:case`default`:case`defer`:case`disabled`:case`disablePictureInPicture`:case`disableRemotePlayback`:case`formNoValidate`:case`hidden`:case`loop`:case`noModule`:case`noValidate`:case`open`:case`playsInline`:case`readOnly`:case`required`:case`reversed`:case`scoped`:case`seamless`:case`itemScope`:r&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,``):e.removeAttribute(n);break;case`capture`:case`download`:!0===r?e.setAttribute(n,``):!1!==r&&r!=null&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,r):e.removeAttribute(n);break;case`cols`:case`rows`:case`size`:case`span`:r!=null&&typeof r!=`function`&&typeof r!=`symbol`&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case`rowSpan`:case`start`:r==null||typeof r==`function`||typeof r==`symbol`||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case`popover`:X(`beforetoggle`,e),X(`toggle`,e),Rt(e,`popover`,r);break;case`xlinkActuate`:Bt(e,`http://www.w3.org/1999/xlink`,`xlink:actuate`,r);break;case`xlinkArcrole`:Bt(e,`http://www.w3.org/1999/xlink`,`xlink:arcrole`,r);break;case`xlinkRole`:Bt(e,`http://www.w3.org/1999/xlink`,`xlink:role`,r);break;case`xlinkShow`:Bt(e,`http://www.w3.org/1999/xlink`,`xlink:show`,r);break;case`xlinkTitle`:Bt(e,`http://www.w3.org/1999/xlink`,`xlink:title`,r);break;case`xlinkType`:Bt(e,`http://www.w3.org/1999/xlink`,`xlink:type`,r);break;case`xmlBase`:Bt(e,`http://www.w3.org/XML/1998/namespace`,`xml:base`,r);break;case`xmlLang`:Bt(e,`http://www.w3.org/XML/1998/namespace`,`xml:lang`,r);break;case`xmlSpace`:Bt(e,`http://www.w3.org/XML/1998/namespace`,`xml:space`,r);break;case`is`:Rt(e,`is`,r);break;case`innerText`:case`textContent`:break;default:(!(2<n.length)||n[0]!==`o`&&n[0]!==`O`||n[1]!==`n`&&n[1]!==`N`)&&(n=on.get(n)||n,Rt(e,n,r))}}function Pd(e,t,n,r,a,o){switch(n){case`style`:rn(e,r,o);break;case`dangerouslySetInnerHTML`:if(r!=null){if(typeof r!=`object`||!(`__html`in r))throw Error(i(61));if(n=r.__html,n!=null){if(a.children!=null)throw Error(i(60));e.innerHTML=n}}break;case`children`:typeof r==`string`?en(e,r):(typeof r==`number`||typeof r==`bigint`)&&en(e,``+r);break;case`onScroll`:r!=null&&X(`scroll`,e);break;case`onScrollEnd`:r!=null&&X(`scrollend`,e);break;case`onClick`:r!=null&&(e.onclick=ln);break;case`suppressContentEditableWarning`:case`suppressHydrationWarning`:case`innerHTML`:case`ref`:break;case`innerText`:case`textContent`:break;default:if(!jt.hasOwnProperty(n))a:{if(n[0]===`o`&&n[1]===`n`&&(a=n.endsWith(`Capture`),t=n.slice(2,a?n.length-7:void 0),o=e[_t]||null,o=o==null?null:o[n],typeof o==`function`&&e.removeEventListener(t,o,a),typeof r==`function`)){typeof o!=`function`&&o!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,a);break a}n in e?e[n]=r:!0===r?e.setAttribute(n,``):Rt(e,n,r)}}}function Fd(e,t,n){switch(t){case`div`:case`span`:case`svg`:case`path`:case`a`:case`g`:case`p`:case`li`:break;case`img`:X(`error`,e),X(`load`,e);var r=!1,a=!1,o;for(o in n)if(n.hasOwnProperty(o)){var s=n[o];if(s!=null)switch(o){case`src`:r=!0;break;case`srcSet`:a=!0;break;case`children`:case`dangerouslySetInnerHTML`:throw Error(i(137,t));default:Q(e,t,o,s,n,null)}}a&&Q(e,t,`srcSet`,n.srcSet,n,null),r&&Q(e,t,`src`,n.src,n,null);return;case`input`:X(`invalid`,e);var c=o=s=a=null,l=null,u=null;for(r in n)if(n.hasOwnProperty(r)){var d=n[r];if(d!=null)switch(r){case`name`:a=d;break;case`type`:s=d;break;case`checked`:l=d;break;case`defaultChecked`:u=d;break;case`value`:o=d;break;case`defaultValue`:c=d;break;case`children`:case`dangerouslySetInnerHTML`:if(d!=null)throw Error(i(137,t));break;default:Q(e,t,r,d,n,null)}}Yt(e,o,c,l,u,s,a,!1);return;case`select`:for(a in X(`invalid`,e),r=s=o=null,n)if(n.hasOwnProperty(a)&&(c=n[a],c!=null))switch(a){case`value`:o=c;break;case`defaultValue`:s=c;break;case`multiple`:r=c;default:Q(e,t,a,c,n,null)}t=o,n=s,e.multiple=!!r,t==null?n!=null&&Zt(e,!!r,n,!0):Zt(e,!!r,t,!1);return;case`textarea`:for(s in X(`invalid`,e),o=a=r=null,n)if(n.hasOwnProperty(s)&&(c=n[s],c!=null))switch(s){case`value`:r=c;break;case`defaultValue`:a=c;break;case`children`:o=c;break;case`dangerouslySetInnerHTML`:if(c!=null)throw Error(i(91));break;default:Q(e,t,s,c,n,null)}$t(e,r,a,o);return;case`option`:for(l in n)if(n.hasOwnProperty(l)&&(r=n[l],r!=null))switch(l){case`selected`:e.selected=r&&typeof r!=`function`&&typeof r!=`symbol`;break;default:Q(e,t,l,r,n,null)}return;case`dialog`:X(`beforetoggle`,e),X(`toggle`,e),X(`cancel`,e),X(`close`,e);break;case`iframe`:case`object`:X(`load`,e);break;case`video`:case`audio`:for(r=0;r<yd.length;r++)X(yd[r],e);break;case`image`:X(`error`,e),X(`load`,e);break;case`details`:X(`toggle`,e);break;case`embed`:case`source`:case`link`:X(`error`,e),X(`load`,e);case`area`:case`base`:case`br`:case`col`:case`hr`:case`keygen`:case`meta`:case`param`:case`track`:case`wbr`:case`menuitem`:for(u in n)if(n.hasOwnProperty(u)&&(r=n[u],r!=null))switch(u){case`children`:case`dangerouslySetInnerHTML`:throw Error(i(137,t));default:Q(e,t,u,r,n,null)}return;default:if(an(t)){for(d in n)n.hasOwnProperty(d)&&(r=n[d],r!==void 0&&Pd(e,t,d,r,n,void 0));return}}for(c in n)n.hasOwnProperty(c)&&(r=n[c],r!=null&&Q(e,t,c,r,n,null))}function Id(e,t,n,r){switch(t){case`div`:case`span`:case`svg`:case`path`:case`a`:case`g`:case`p`:case`li`:break;case`input`:var a=null,o=null,s=null,c=null,l=null,u=null,d=null;for(m in n){var f=n[m];if(n.hasOwnProperty(m)&&f!=null)switch(m){case`checked`:break;case`value`:break;case`defaultValue`:l=f;default:r.hasOwnProperty(m)||Q(e,t,m,null,r,f)}}for(var p in r){var m=r[p];if(f=n[p],r.hasOwnProperty(p)&&(m!=null||f!=null))switch(p){case`type`:o=m;break;case`name`:a=m;break;case`checked`:u=m;break;case`defaultChecked`:d=m;break;case`value`:s=m;break;case`defaultValue`:c=m;break;case`children`:case`dangerouslySetInnerHTML`:if(m!=null)throw Error(i(137,t));break;default:m!==f&&Q(e,t,p,m,r,f)}}Jt(e,s,c,l,u,d,o,a);return;case`select`:for(o in m=s=c=p=null,n)if(l=n[o],n.hasOwnProperty(o)&&l!=null)switch(o){case`value`:break;case`multiple`:m=l;default:r.hasOwnProperty(o)||Q(e,t,o,null,r,l)}for(a in r)if(o=r[a],l=n[a],r.hasOwnProperty(a)&&(o!=null||l!=null))switch(a){case`value`:p=o;break;case`defaultValue`:c=o;break;case`multiple`:s=o;default:o!==l&&Q(e,t,a,o,r,l)}t=c,n=s,r=m,p==null?!!r!=!!n&&(t==null?Zt(e,!!n,n?[]:``,!1):Zt(e,!!n,t,!0)):Zt(e,!!n,p,!1);return;case`textarea`:for(c in m=p=null,n)if(a=n[c],n.hasOwnProperty(c)&&a!=null&&!r.hasOwnProperty(c))switch(c){case`value`:break;case`children`:break;default:Q(e,t,c,null,r,a)}for(s in r)if(a=r[s],o=n[s],r.hasOwnProperty(s)&&(a!=null||o!=null))switch(s){case`value`:p=a;break;case`defaultValue`:m=a;break;case`children`:break;case`dangerouslySetInnerHTML`:if(a!=null)throw Error(i(91));break;default:a!==o&&Q(e,t,s,a,r,o)}Qt(e,p,m);return;case`option`:for(var h in n)if(p=n[h],n.hasOwnProperty(h)&&p!=null&&!r.hasOwnProperty(h))switch(h){case`selected`:e.selected=!1;break;default:Q(e,t,h,null,r,p)}for(l in r)if(p=r[l],m=n[l],r.hasOwnProperty(l)&&p!==m&&(p!=null||m!=null))switch(l){case`selected`:e.selected=p&&typeof p!=`function`&&typeof p!=`symbol`;break;default:Q(e,t,l,p,r,m)}return;case`img`:case`link`:case`area`:case`base`:case`br`:case`col`:case`embed`:case`hr`:case`keygen`:case`meta`:case`param`:case`source`:case`track`:case`wbr`:case`menuitem`:for(var g in n)p=n[g],n.hasOwnProperty(g)&&p!=null&&!r.hasOwnProperty(g)&&Q(e,t,g,null,r,p);for(u in r)if(p=r[u],m=n[u],r.hasOwnProperty(u)&&p!==m&&(p!=null||m!=null))switch(u){case`children`:case`dangerouslySetInnerHTML`:if(p!=null)throw Error(i(137,t));break;default:Q(e,t,u,p,r,m)}return;default:if(an(t)){for(var _ in n)p=n[_],n.hasOwnProperty(_)&&p!==void 0&&!r.hasOwnProperty(_)&&Pd(e,t,_,void 0,r,p);for(d in r)p=r[d],m=n[d],!r.hasOwnProperty(d)||p===m||p===void 0&&m===void 0||Pd(e,t,d,p,r,m);return}}for(var v in n)p=n[v],n.hasOwnProperty(v)&&p!=null&&!r.hasOwnProperty(v)&&Q(e,t,v,null,r,p);for(f in r)p=r[f],m=n[f],!r.hasOwnProperty(f)||p===m||p==null&&m==null||Q(e,t,f,p,r,m)}function Ld(e){switch(e){case`css`:case`script`:case`font`:case`img`:case`image`:case`input`:case`link`:return!0;default:return!1}}function Rd(){if(typeof performance.getEntriesByType==`function`){for(var e=0,t=0,n=performance.getEntriesByType(`resource`),r=0;r<n.length;r++){var i=n[r],a=i.transferSize,o=i.initiatorType,s=i.duration;if(a&&s&&Ld(o)){for(o=0,s=i.responseEnd,r+=1;r<n.length;r++){var c=n[r],l=c.startTime;if(l>s)break;var u=c.transferSize,d=c.initiatorType;u&&Ld(d)&&(c=c.responseEnd,o+=u*(c<s?1:(s-l)/(c-l)))}if(--r,t+=8*(a+o)/(i.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e==`number`)?e:5}var zd=null,Bd=null;function Vd(e){return e.nodeType===9?e:e.ownerDocument}function Hd(e){switch(e){case`http://www.w3.org/2000/svg`:return 1;case`http://www.w3.org/1998/Math/MathML`:return 2;default:return 0}}function Ud(e,t){if(e===0)switch(t){case`svg`:return 1;case`math`:return 2;default:return 0}return e===1&&t===`foreignObject`?0:e}function Wd(e,t){return e===`textarea`||e===`noscript`||typeof t.children==`string`||typeof t.children==`number`||typeof t.children==`bigint`||typeof t.dangerouslySetInnerHTML==`object`&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Gd=null;function Kd(){var e=window.event;return e&&e.type===`popstate`?e===Gd?!1:(Gd=e,!0):(Gd=null,!1)}var qd=typeof setTimeout==`function`?setTimeout:void 0,Jd=typeof clearTimeout==`function`?clearTimeout:void 0,Yd=typeof Promise==`function`?Promise:void 0,Xd=typeof queueMicrotask==`function`?queueMicrotask:Yd===void 0?qd:function(e){return Yd.resolve(null).then(e).catch(Zd)};function Zd(e){setTimeout(function(){throw e})}function Qd(e){return e===`head`}function $d(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n===`/$`||n===`/&`){if(r===0){e.removeChild(i),Pp(t);return}r--}else if(n===`$`||n===`$?`||n===`$~`||n===`$!`||n===`&`)r++;else if(n===`html`)mf(e.ownerDocument.documentElement);else if(n===`head`){n=e.ownerDocument.head,mf(n);for(var a=n.firstChild;a;){var o=a.nextSibling,s=a.nodeName;a[Ct]||s===`SCRIPT`||s===`STYLE`||s===`LINK`&&a.rel.toLowerCase()===`stylesheet`||n.removeChild(a),a=o}}else n===`body`&&mf(e.ownerDocument.body);n=i}while(n);Pp(t)}function ef(e,t){var n=e;e=0;do{var r=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display=`none`):(n.style.display=n._stashedDisplay||``,n.getAttribute(`style`)===``&&n.removeAttribute(`style`)):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=``):n.nodeValue=n._stashedText||``),r&&r.nodeType===8)if(n=r.data,n===`/$`){if(e===0)break;e--}else n!==`$`&&n!==`$?`&&n!==`$~`&&n!==`$!`||e++;n=r}while(n)}function tf(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case`HTML`:case`HEAD`:case`BODY`:tf(n),wt(n);continue;case`SCRIPT`:case`STYLE`:continue;case`LINK`:if(n.rel.toLowerCase()===`stylesheet`)continue}e.removeChild(n)}}function nf(e,t,n,r){for(;e.nodeType===1;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&(e.nodeName!==`INPUT`||e.type!==`hidden`))break}else if(r){if(!e[Ct])switch(t){case`meta`:if(!e.hasAttribute(`itemprop`))break;return e;case`link`:if(a=e.getAttribute(`rel`),a===`stylesheet`&&e.hasAttribute(`data-precedence`)||a!==i.rel||e.getAttribute(`href`)!==(i.href==null||i.href===``?null:i.href)||e.getAttribute(`crossorigin`)!==(i.crossOrigin==null?null:i.crossOrigin)||e.getAttribute(`title`)!==(i.title==null?null:i.title))break;return e;case`style`:if(e.hasAttribute(`data-precedence`))break;return e;case`script`:if(a=e.getAttribute(`src`),(a!==(i.src==null?null:i.src)||e.getAttribute(`type`)!==(i.type==null?null:i.type)||e.getAttribute(`crossorigin`)!==(i.crossOrigin==null?null:i.crossOrigin))&&a&&e.hasAttribute(`async`)&&!e.hasAttribute(`itemprop`))break;return e;default:return e}}else if(t===`input`&&e.type===`hidden`){var a=i.name==null?null:``+i.name;if(i.type===`hidden`&&e.getAttribute(`name`)===a)return e}else return e;if(e=lf(e.nextSibling),e===null)break}return null}function rf(e,t,n){if(t===``)return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!==`INPUT`||e.type!==`hidden`)&&!n||(e=lf(e.nextSibling),e===null))return null;return e}function af(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!==`INPUT`||e.type!==`hidden`)&&!t||(e=lf(e.nextSibling),e===null))return null;return e}function of(e){return e.data===`$?`||e.data===`$~`}function sf(e){return e.data===`$!`||e.data===`$?`&&e.ownerDocument.readyState!==`loading`}function cf(e,t){var n=e.ownerDocument;if(e.data===`$~`)e._reactRetry=t;else if(e.data!==`$?`||n.readyState!==`loading`)t();else{var r=function(){t(),n.removeEventListener(`DOMContentLoaded`,r)};n.addEventListener(`DOMContentLoaded`,r),e._reactRetry=r}}function lf(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t===`$`||t===`$!`||t===`$?`||t===`$~`||t===`&`||t===`F!`||t===`F`)break;if(t===`/$`||t===`/&`)return null}}return e}var uf=null;function df(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n===`/$`||n===`/&`){if(t===0)return lf(e.nextSibling);t--}else n!==`$`&&n!==`$!`&&n!==`$?`&&n!==`$~`&&n!==`&`||t++}e=e.nextSibling}return null}function ff(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n===`$`||n===`$!`||n===`$?`||n===`$~`||n===`&`){if(t===0)return e;t--}else n!==`/$`&&n!==`/&`||t++}e=e.previousSibling}return null}function pf(e,t,n){switch(t=Vd(n),e){case`html`:if(e=t.documentElement,!e)throw Error(i(452));return e;case`head`:if(e=t.head,!e)throw Error(i(453));return e;case`body`:if(e=t.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function mf(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);wt(e)}var hf=new Map,gf=new Set;function _f(e){return typeof e.getRootNode==`function`?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var vf=E.d;E.d={f:yf,r:bf,D:Cf,C:wf,L:Tf,m:Ef,X:Of,S:Df,M:kf};function yf(){var e=vf.f(),t=Cu();return e||t}function bf(e){var t=Et(e);t!==null&&t.tag===5&&t.type===`form`?Ls(t):vf.r(e)}var xf=typeof document>`u`?null:document;function Sf(e,t,n){var r=xf;if(r&&typeof t==`string`&&t){var i=qt(t);i=`link[rel="`+e+`"][href="`+i+`"]`,typeof n==`string`&&(i+=`[crossorigin="`+n+`"]`),gf.has(i)||(gf.add(i),e={rel:e,crossOrigin:n,href:t},r.querySelector(i)===null&&(t=r.createElement(`link`),Fd(t,`link`,e),kt(t),r.head.appendChild(t)))}}function Cf(e){vf.D(e),Sf(`dns-prefetch`,e,null)}function wf(e,t){vf.C(e,t),Sf(`preconnect`,e,t)}function Tf(e,t,n){vf.L(e,t,n);var r=xf;if(r&&e&&t){var i=`link[rel="preload"][as="`+qt(t)+`"]`;t===`image`&&n&&n.imageSrcSet?(i+=`[imagesrcset="`+qt(n.imageSrcSet)+`"]`,typeof n.imageSizes==`string`&&(i+=`[imagesizes="`+qt(n.imageSizes)+`"]`)):i+=`[href="`+qt(e)+`"]`;var a=i;switch(t){case`style`:a=jf(e);break;case`script`:a=Ff(e)}hf.has(a)||(e=h({rel:`preload`,href:t===`image`&&n&&n.imageSrcSet?void 0:e,as:t},n),hf.set(a,e),r.querySelector(i)!==null||t===`style`&&r.querySelector(Mf(a))||t===`script`&&r.querySelector(If(a))||(t=r.createElement(`link`),Fd(t,`link`,e),kt(t),r.head.appendChild(t)))}}function Ef(e,t){vf.m(e,t);var n=xf;if(n&&e){var r=t&&typeof t.as==`string`?t.as:`script`,i=`link[rel="modulepreload"][as="`+qt(r)+`"][href="`+qt(e)+`"]`,a=i;switch(r){case`audioworklet`:case`paintworklet`:case`serviceworker`:case`sharedworker`:case`worker`:case`script`:a=Ff(e)}if(!hf.has(a)&&(e=h({rel:`modulepreload`,href:e},t),hf.set(a,e),n.querySelector(i)===null)){switch(r){case`audioworklet`:case`paintworklet`:case`serviceworker`:case`sharedworker`:case`worker`:case`script`:if(n.querySelector(If(a)))return}r=n.createElement(`link`),Fd(r,`link`,e),kt(r),n.head.appendChild(r)}}}function Df(e,t,n){vf.S(e,t,n);var r=xf;if(r&&e){var i=Ot(r).hoistableStyles,a=jf(e);t||=`default`;var o=i.get(a);if(!o){var s={loading:0,preload:null};if(o=r.querySelector(Mf(a)))s.loading=5;else{e=h({rel:`stylesheet`,href:e,"data-precedence":t},n),(n=hf.get(a))&&zf(e,n);var c=o=r.createElement(`link`);kt(c),Fd(c,`link`,e),c._p=new Promise(function(e,t){c.onload=e,c.onerror=t}),c.addEventListener(`load`,function(){s.loading|=1}),c.addEventListener(`error`,function(){s.loading|=2}),s.loading|=4,Rf(o,t,r)}o={type:`stylesheet`,instance:o,count:1,state:s},i.set(a,o)}}}function Of(e,t){vf.X(e,t);var n=xf;if(n&&e){var r=Ot(n).hoistableScripts,i=Ff(e),a=r.get(i);a||(a=n.querySelector(If(i)),a||(e=h({src:e,async:!0},t),(t=hf.get(i))&&Bf(e,t),a=n.createElement(`script`),kt(a),Fd(a,`link`,e),n.head.appendChild(a)),a={type:`script`,instance:a,count:1,state:null},r.set(i,a))}}function kf(e,t){vf.M(e,t);var n=xf;if(n&&e){var r=Ot(n).hoistableScripts,i=Ff(e),a=r.get(i);a||(a=n.querySelector(If(i)),a||(e=h({src:e,async:!0,type:`module`},t),(t=hf.get(i))&&Bf(e,t),a=n.createElement(`script`),kt(a),Fd(a,`link`,e),n.head.appendChild(a)),a={type:`script`,instance:a,count:1,state:null},r.set(i,a))}}function Af(e,t,n,r){var a=(a=ve.current)?_f(a):null;if(!a)throw Error(i(446));switch(e){case`meta`:case`title`:return null;case`style`:return typeof n.precedence==`string`&&typeof n.href==`string`?(t=jf(n.href),n=Ot(a).hoistableStyles,r=n.get(t),r||(r={type:`style`,instance:null,count:0,state:null},n.set(t,r)),r):{type:`void`,instance:null,count:0,state:null};case`link`:if(n.rel===`stylesheet`&&typeof n.href==`string`&&typeof n.precedence==`string`){e=jf(n.href);var o=Ot(a).hoistableStyles,s=o.get(e);if(s||(a=a.ownerDocument||a,s={type:`stylesheet`,instance:null,count:0,state:{loading:0,preload:null}},o.set(e,s),(o=a.querySelector(Mf(e)))&&!o._p&&(s.instance=o,s.state.loading=5),hf.has(e)||(n={rel:`preload`,as:`style`,href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},hf.set(e,n),o||Pf(a,e,n,s.state))),t&&r===null)throw Error(i(528,``));return s}if(t&&r!==null)throw Error(i(529,``));return null;case`script`:return t=n.async,n=n.src,typeof n==`string`&&t&&typeof t!=`function`&&typeof t!=`symbol`?(t=Ff(n),n=Ot(a).hoistableScripts,r=n.get(t),r||(r={type:`script`,instance:null,count:0,state:null},n.set(t,r)),r):{type:`void`,instance:null,count:0,state:null};default:throw Error(i(444,e))}}function jf(e){return`href="`+qt(e)+`"`}function Mf(e){return`link[rel="stylesheet"][`+e+`]`}function Nf(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Pf(e,t,n,r){e.querySelector(`link[rel="preload"][as="style"][`+t+`]`)?r.loading=1:(t=e.createElement(`link`),r.preload=t,t.addEventListener(`load`,function(){return r.loading|=1}),t.addEventListener(`error`,function(){return r.loading|=2}),Fd(t,`link`,n),kt(t),e.head.appendChild(t))}function Ff(e){return`[src="`+qt(e)+`"]`}function If(e){return`script[async]`+e}function Lf(e,t,n){if(t.count++,t.instance===null)switch(t.type){case`style`:var r=e.querySelector(`style[data-href~="`+qt(n.href)+`"]`);if(r)return t.instance=r,kt(r),r;var a=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement(`style`),kt(r),Fd(r,`style`,a),Rf(r,n.precedence,e),t.instance=r;case`stylesheet`:a=jf(n.href);var o=e.querySelector(Mf(a));if(o)return t.state.loading|=4,t.instance=o,kt(o),o;r=Nf(n),(a=hf.get(a))&&zf(r,a),o=(e.ownerDocument||e).createElement(`link`),kt(o);var s=o;return s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),Fd(o,`link`,r),t.state.loading|=4,Rf(o,n.precedence,e),t.instance=o;case`script`:return o=Ff(n.src),(a=e.querySelector(If(o)))?(t.instance=a,kt(a),a):(r=n,(a=hf.get(o))&&(r=h({},n),Bf(r,a)),e=e.ownerDocument||e,a=e.createElement(`script`),kt(a),Fd(a,`link`,r),e.head.appendChild(a),t.instance=a);case`void`:return null;default:throw Error(i(443,t.type))}else t.type===`stylesheet`&&!(t.state.loading&4)&&(r=t.instance,t.state.loading|=4,Rf(r,n.precedence,e));return t.instance}function Rf(e,t,n){for(var r=n.querySelectorAll(`link[rel="stylesheet"][data-precedence],style[data-precedence]`),i=r.length?r[r.length-1]:null,a=i,o=0;o<r.length;o++){var s=r[o];if(s.dataset.precedence===t)a=s;else if(a!==i)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function zf(e,t){e.crossOrigin??=t.crossOrigin,e.referrerPolicy??=t.referrerPolicy,e.title??=t.title}function Bf(e,t){e.crossOrigin??=t.crossOrigin,e.referrerPolicy??=t.referrerPolicy,e.integrity??=t.integrity}var Vf=null;function Hf(e,t,n){if(Vf===null){var r=new Map,i=Vf=new Map;i.set(n,r)}else i=Vf,r=i.get(n),r||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var a=n[i];if(!(a[Ct]||a[gt]||e===`link`&&a.getAttribute(`rel`)===`stylesheet`)&&a.namespaceURI!==`http://www.w3.org/2000/svg`){var o=a.getAttribute(t)||``;o=e+o;var s=r.get(o);s?s.push(a):r.set(o,[a])}}return r}function Uf(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t===`title`?e.querySelector(`head > title`):null)}function Wf(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case`meta`:case`title`:return!0;case`style`:if(typeof t.precedence!=`string`||typeof t.href!=`string`||t.href===``)break;return!0;case`link`:if(typeof t.rel!=`string`||typeof t.href!=`string`||t.href===``||t.onLoad||t.onError)break;switch(t.rel){case`stylesheet`:return e=t.disabled,typeof t.precedence==`string`&&e==null;default:return!0}case`script`:if(t.async&&typeof t.async!=`function`&&typeof t.async!=`symbol`&&!t.onLoad&&!t.onError&&t.src&&typeof t.src==`string`)return!0}return!1}function Gf(e){return!(e.type===`stylesheet`&&!(e.state.loading&3))}function Kf(e,t,n,r){if(n.type===`stylesheet`&&(typeof r.media!=`string`||!1!==matchMedia(r.media).matches)&&!(n.state.loading&4)){if(n.instance===null){var i=jf(r.href),a=t.querySelector(Mf(i));if(a){t=a._p,typeof t==`object`&&t&&typeof t.then==`function`&&(e.count++,e=Yf.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=a,kt(a);return}a=t.ownerDocument||t,r=Nf(r),(i=hf.get(i))&&zf(r,i),a=a.createElement(`link`),kt(a);var o=a;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),Fd(a,`link`,r),n.instance=a}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(n.state.loading&3)&&(e.count++,n=Yf.bind(e),t.addEventListener(`load`,n),t.addEventListener(`error`,n))}}var qf=0;function Jf(e,t){return e.stylesheets&&e.count===0&&Zf(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&Zf(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&qf===0&&(qf=62500*Rd());var i=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Zf(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>qf?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(i)}}:null}function Yf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Zf(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Xf=null;function Zf(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Xf=new Map,t.forEach(Qf,e),Xf=null,Yf.call(e))}function Qf(e,t){if(!(t.state.loading&4)){var n=Xf.get(e);if(n)var r=n.get(null);else{n=new Map,Xf.set(e,n);for(var i=e.querySelectorAll(`link[data-precedence],style[data-precedence]`),a=0;a<i.length;a++){var o=i[a];(o.nodeName===`LINK`||o.getAttribute(`media`)!==`not all`)&&(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}i=t.instance,o=i.getAttribute(`data-precedence`),a=n.get(o)||r,a===r&&n.set(null,i),n.set(o,i),this.count++,r=Yf.bind(this),i.addEventListener(`load`,r),i.addEventListener(`error`,r),a?a.parentNode.insertBefore(i,a.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(i,e.firstChild)),t.state.loading|=4}}var $f={$$typeof:C,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function ep(e,t,n,r,i,a,o,s,c){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=at(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=at(0),this.hiddenUpdates=at(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=a,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function tp(e,t,n,r,i,a,o,s,c,l,u,d){return e=new ep(e,t,n,o,c,l,u,d,s),t=1,!0===a&&(t|=24),a=gi(3,null,null,t),e.current=a,a.stateNode=e,t=ga(),t.refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:r,isDehydrated:n,cache:t},Ya(a),e}function np(e){return e?(e=mi,e):mi}function rp(e,t,n,r,i,a){i=np(i),r.context===null?r.context=i:r.pendingContext=i,r=Za(t),r.payload={element:n},a=a===void 0?null:a,a!==null&&(r.callback=a),n=Qa(e,r,t),n!==null&&(vu(n,e,t),$a(n,e,t))}function ip(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ap(e,t){ip(e,t),(e=e.alternate)&&ip(e,t)}function op(e){if(e.tag===13||e.tag===31){var t=di(e,67108864);t!==null&&vu(t,e,67108864),ap(e,67108864)}}function sp(e){if(e.tag===13||e.tag===31){var t=gu();t=dt(t);var n=di(e,t);n!==null&&vu(n,e,t),ap(e,t)}}var cp=!0;function lp(e,t,n,r){var i=T.T;T.T=null;var a=E.p;try{E.p=2,dp(e,t,n,r)}finally{E.p=a,T.T=i}}function up(e,t,n,r){var i=T.T;T.T=null;var a=E.p;try{E.p=8,dp(e,t,n,r)}finally{E.p=a,T.T=i}}function dp(e,t,n,r){if(cp){var i=fp(r);if(i===null)Z(e,t,r,pp,n),wp(e,r);else if(Ep(i,e,t,n,r))r.stopPropagation();else if(wp(e,r),t&4&&-1<Cp.indexOf(e)){for(;i!==null;){var a=Et(i);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var o=et(a.pendingLanes);if(o!==0){var s=a;for(s.pendingLanes|=2,s.entangledLanes|=2;o;){var c=1<<31-Je(o);s.entanglements[1]|=c,o&=~c}ad(a),!(U&6)&&(iu=Ie()+500,od(0,!1))}}break;case 31:case 13:s=di(a,2),s!==null&&vu(s,a,2),Cu(),ap(a,2)}if(a=fp(r),a===null&&Z(e,t,r,pp,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else Z(e,t,r,null,n)}}function fp(e){return e=dn(e),mp(e)}var pp=null;function mp(e){if(pp=null,e=Tt(e),e!==null){var t=o(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=s(t),e!==null)return e;e=null}else if(n===31){if(e=c(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return pp=e,null}function hp(e){switch(e){case`beforetoggle`:case`cancel`:case`click`:case`close`:case`contextmenu`:case`copy`:case`cut`:case`auxclick`:case`dblclick`:case`dragend`:case`dragstart`:case`drop`:case`focusin`:case`focusout`:case`input`:case`invalid`:case`keydown`:case`keypress`:case`keyup`:case`mousedown`:case`mouseup`:case`paste`:case`pause`:case`play`:case`pointercancel`:case`pointerdown`:case`pointerup`:case`ratechange`:case`reset`:case`resize`:case`seeked`:case`submit`:case`toggle`:case`touchcancel`:case`touchend`:case`touchstart`:case`volumechange`:case`change`:case`selectionchange`:case`textInput`:case`compositionstart`:case`compositionend`:case`compositionupdate`:case`beforeblur`:case`afterblur`:case`beforeinput`:case`blur`:case`fullscreenchange`:case`focus`:case`hashchange`:case`popstate`:case`select`:case`selectstart`:return 2;case`drag`:case`dragenter`:case`dragexit`:case`dragleave`:case`dragover`:case`mousemove`:case`mouseout`:case`mouseover`:case`pointermove`:case`pointerout`:case`pointerover`:case`scroll`:case`touchmove`:case`wheel`:case`mouseenter`:case`mouseleave`:case`pointerenter`:case`pointerleave`:return 8;case`message`:switch(Le()){case Re:return 2;case ze:return 8;case Be:case Ve:return 32;case He:return 268435456;default:return 32}default:return 32}}var gp=!1,_p=null,vp=null,yp=null,bp=new Map,xp=new Map,Sp=[],Cp=`mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset`.split(` `);function wp(e,t){switch(e){case`focusin`:case`focusout`:_p=null;break;case`dragenter`:case`dragleave`:vp=null;break;case`mouseover`:case`mouseout`:yp=null;break;case`pointerover`:case`pointerout`:bp.delete(t.pointerId);break;case`gotpointercapture`:case`lostpointercapture`:xp.delete(t.pointerId)}}function Tp(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=Et(t),t!==null&&op(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Ep(e,t,n,r,i){switch(t){case`focusin`:return _p=Tp(_p,e,t,n,r,i),!0;case`dragenter`:return vp=Tp(vp,e,t,n,r,i),!0;case`mouseover`:return yp=Tp(yp,e,t,n,r,i),!0;case`pointerover`:var a=i.pointerId;return bp.set(a,Tp(bp.get(a)||null,e,t,n,r,i)),!0;case`gotpointercapture`:return a=i.pointerId,xp.set(a,Tp(xp.get(a)||null,e,t,n,r,i)),!0}return!1}function Dp(e){var t=Tt(e.target);if(t!==null){var n=o(t);if(n!==null){if(t=n.tag,t===13){if(t=s(n),t!==null){e.blockedOn=t,mt(e.priority,function(){sp(n)});return}}else if(t===31){if(t=c(n),t!==null){e.blockedOn=t,mt(e.priority,function(){sp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Op(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=fp(e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);un=r,n.target.dispatchEvent(r),un=null}else return t=Et(n),t!==null&&op(t),e.blockedOn=n,!1;t.shift()}return!0}function kp(e,t,n){Op(e)&&n.delete(t)}function Ap(){gp=!1,_p!==null&&Op(_p)&&(_p=null),vp!==null&&Op(vp)&&(vp=null),yp!==null&&Op(yp)&&(yp=null),bp.forEach(kp),xp.forEach(kp)}function jp(e,n){e.blockedOn===n&&(e.blockedOn=null,gp||(gp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Ap)))}var Mp=null;function Np(e){Mp!==e&&(Mp=e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Mp===e&&(Mp=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if(typeof r!=`function`){if(mp(r||n)===null)continue;break}var a=Et(n);a!==null&&(e.splice(t,3),t-=3,Fs(a,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Pp(e){function t(t){return jp(t,e)}_p!==null&&jp(_p,e),vp!==null&&jp(vp,e),yp!==null&&jp(yp,e),bp.forEach(t),xp.forEach(t);for(var n=0;n<Sp.length;n++){var r=Sp[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Sp.length&&(n=Sp[0],n.blockedOn===null);)Dp(n),n.blockedOn===null&&Sp.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(r=0;r<n.length;r+=3){var i=n[r],a=n[r+1],o=i[_t]||null;if(typeof a==`function`)o||Np(n);else if(o){var s=null;if(a&&a.hasAttribute(`formAction`)){if(i=a,o=a[_t]||null)s=o.formAction;else if(mp(i)!==null)continue}else s=o.action;typeof s==`function`?n[r+1]=s:(n.splice(r,3),r-=3),Np(n)}}}function Fp(){function e(e){e.canIntercept&&e.info===`react-transition`&&e.intercept({handler:function(){return new Promise(function(e){return i=e})},focusReset:`manual`,scroll:`manual`})}function t(){i!==null&&(i(),i=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&e.url!=null&&navigation.navigate(e.url,{state:e.getState(),info:`react-transition`,history:`replace`})}}if(typeof navigation==`object`){var r=!1,i=null;return navigation.addEventListener(`navigate`,e),navigation.addEventListener(`navigatesuccess`,t),navigation.addEventListener(`navigateerror`,t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener(`navigate`,e),navigation.removeEventListener(`navigatesuccess`,t),navigation.removeEventListener(`navigateerror`,t),i!==null&&(i(),i=null)}}}function Ip(e){this._internalRoot=e}Lp.prototype.render=Ip.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));var n=t.current;rp(n,gu(),e,t,null,null)},Lp.prototype.unmount=Ip.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;rp(e.current,2,null,e,null,null),Cu(),t[vt]=null}};function Lp(e){this._internalRoot=e}Lp.prototype.unstable_scheduleHydration=function(e){if(e){var t=pt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Sp.length&&t!==0&&t<Sp[n].priority;n++);Sp.splice(n,0,e),n===0&&Dp(e)}};var Rp=n.version;if(Rp!==`19.2.4`)throw Error(i(527,Rp,`19.2.4`));E.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render==`function`?Error(i(188)):(e=Object.keys(e).join(`,`),Error(i(268,e)));return e=d(t),e=e===null?null:p(e),e=e===null?null:e.stateNode,e};var zp={bundleType:0,version:`19.2.4`,rendererPackageName:`react-dom`,currentDispatcherRef:T,reconcilerVersion:`19.2.4`};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<`u`){var Bp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bp.isDisabled&&Bp.supportsFiber)try{Ge=Bp.inject(zp),Ke=Bp}catch{}}e.createRoot=function(e,t){if(!a(e))throw Error(i(299));var n=!1,r=``,o=L,s=ec,c=tc;return t!=null&&(!0===t.unstable_strictMode&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=tp(e,1,!1,null,null,n,r,null,o,s,c,Fp),e[vt]=t.current,wd(e),new Ip(t)}})),g=o(((e,t)=>{function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>`u`||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=`function`))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}n(),t.exports=h()}))(),_=c(u(),1),v=()=>void 0,y=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)==55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)==56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},b=function(e){let t=[],n=0,r=0;for(;n<e.length;){let i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){let a=e[n++];t[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){let a=e[n++],o=e[n++],s=e[n++],c=((i&7)<<18|(a&63)<<12|(o&63)<<6|s&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{let a=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return t.join(``)},x={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789`,get ENCODED_VALS(){return this.ENCODED_VALS_BASE+`+/=`},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+`-_.`},HAS_NATIVE_SUPPORT:typeof atob==`function`,encodeByteArray(e,t){if(!Array.isArray(e))throw Error(`encodeByteArray takes an array as a parameter`);this.init_();let n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){let i=e[t],a=t+1<e.length,o=a?e[t+1]:0,s=t+2<e.length,c=s?e[t+2]:0,l=i>>2,u=(i&3)<<4|o>>4,d=(o&15)<<2|c>>6,f=c&63;s||(f=64,a||(d=64)),r.push(n[l],n[u],n[d],n[f])}return r.join(``)},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(y(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):b(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){let i=n[e.charAt(t++)],a=t<e.length?n[e.charAt(t)]:0;++t;let o=t<e.length?n[e.charAt(t)]:64;++t;let s=t<e.length?n[e.charAt(t)]:64;if(++t,i==null||a==null||o==null||s==null)throw new S;let c=i<<2|a>>4;if(r.push(c),o!==64){let e=a<<4&240|o>>2;if(r.push(e),s!==64){let e=o<<6&192|s;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},S=class extends Error{constructor(){super(...arguments),this.name=`DecodeBase64StringError`}},C=function(e){let t=y(e);return x.encodeByteArray(t,!0)},w=function(e){return C(e).replace(/\./g,``)},ee=function(e){try{return x.decodeString(e,!0)}catch(e){console.error(`base64Decode failed: `,e)}return null};function te(){if(typeof self<`u`)return self;if(typeof window<`u`)return window;if(typeof global<`u`)return global;throw Error(`Unable to locate global object.`)}var ne=()=>te().__FIREBASE_DEFAULTS__,re=()=>{if(typeof process>`u`)return;let e={}.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},ie=()=>{if(typeof document>`u`)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=e&&ee(e[1]);return t&&JSON.parse(t)},ae=()=>{try{return v()||ne()||re()||ie()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},oe=e=>ae()?.emulatorHosts?.[e],se=e=>{let t=oe(e);if(!t)return;let n=t.lastIndexOf(`:`);if(n<=0||n+1===t.length)throw Error(`Invalid host ${t} with no separate hostname and port!`);let r=parseInt(t.substring(n+1),10);return t[0]===`[`?[t.substring(1,n-1),r]:[t.substring(0,n),r]},ce=()=>ae()?.config,le=e=>ae()?.[`_${e}`],ue=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e==`function`&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}};function T(e){try{return(e.startsWith(`http://`)||e.startsWith(`https://`)?new URL(e).hostname:e).endsWith(`.cloudworkstations.dev`)}catch{return!1}}async function E(e){return(await fetch(e,{credentials:`include`})).ok}function de(e,t){if(e.uid)throw Error(`The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.`);let n={alg:`none`,type:`JWT`},r=t||`demo-project`,i=e.iat||0,a=e.sub||e.user_id;if(!a)throw Error(`mockUserToken must contain 'sub' or 'user_id' field!`);let o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:`custom`,identities:{}},...e};return[w(JSON.stringify(n)),w(JSON.stringify(o)),``].join(`.`)}var fe={};function pe(){let e={prod:[],emulator:[]};for(let t of Object.keys(fe))fe[t]?e.emulator.push(t):e.prod.push(t);return e}function me(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement(`div`),t.setAttribute(`id`,e),n=!0),{created:n,element:t}}var he=!1;function D(e,t){if(typeof window>`u`||typeof document>`u`||!T(window.location.host)||fe[e]===t||fe[e]||he)return;fe[e]=t;function n(e){return`__firebase__banner__${e}`}let r=`__firebase__banner`,i=pe().prod.length>0;function a(){let e=document.getElementById(r);e&&e.remove()}function o(e){e.style.display=`flex`,e.style.background=`#7faaf0`,e.style.position=`fixed`,e.style.bottom=`5px`,e.style.left=`5px`,e.style.padding=`.5em`,e.style.borderRadius=`5px`,e.style.alignItems=`center`}function s(e,t){e.setAttribute(`width`,`24`),e.setAttribute(`id`,t),e.setAttribute(`height`,`24`),e.setAttribute(`viewBox`,`0 0 24 24`),e.setAttribute(`fill`,`none`),e.style.marginLeft=`-6px`}function c(){let e=document.createElement(`span`);return e.style.cursor=`pointer`,e.style.marginLeft=`16px`,e.style.fontSize=`24px`,e.innerHTML=` &times;`,e.onclick=()=>{he=!0,a()},e}function l(e,t){e.setAttribute(`id`,t),e.innerText=`Learn more`,e.href=`https://firebase.google.com/docs/studio/preview-apps#preview-backend`,e.setAttribute(`target`,`__blank`),e.style.paddingLeft=`5px`,e.style.textDecoration=`underline`}function u(){let e=me(r),t=n(`text`),a=document.getElementById(t)||document.createElement(`span`),u=n(`learnmore`),d=document.getElementById(u)||document.createElement(`a`),f=n(`preprendIcon`),p=document.getElementById(f)||document.createElementNS(`http://www.w3.org/2000/svg`,`svg`);if(e.created){let t=e.element;o(t),l(d,u);let n=c();s(p,f),t.append(p,a,d,n),document.body.appendChild(t)}i?(a.innerText=`Preview backend disconnected.`,p.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(p.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,a.innerText=`Preview backend running in this workspace.`),a.setAttribute(`id`,t)}document.readyState===`loading`?window.addEventListener(`DOMContentLoaded`,u):u()}function ge(){return typeof navigator<`u`&&typeof navigator.userAgent==`string`?navigator.userAgent:``}function _e(){return typeof window<`u`&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ge())}function ve(){let e=ae()?.forceEnvironment;if(e===`node`)return!0;if(e===`browser`)return!1;try{return Object.prototype.toString.call(global.process)===`[object process]`}catch{return!1}}function ye(){return typeof navigator<`u`&&navigator.userAgent===`Cloudflare-Workers`}function be(){let e=typeof chrome==`object`?chrome.runtime:typeof browser==`object`?browser.runtime:void 0;return typeof e==`object`&&e.id!==void 0}function xe(){return typeof navigator==`object`&&navigator.product===`ReactNative`}function Se(){let e=ge();return e.indexOf(`MSIE `)>=0||e.indexOf(`Trident/`)>=0}function Ce(){return!ve()&&!!navigator.userAgent&&navigator.userAgent.includes(`Safari`)&&!navigator.userAgent.includes(`Chrome`)}function we(){try{return typeof indexedDB==`object`}catch{return!1}}function Te(){return new Promise((e,t)=>{try{let n=!0,r=`validate-browser-context-for-indexeddb-analytics-module`,i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{t(i.error?.message||``)}}catch(e){t(e)}})}var Ee=`FirebaseError`,De=class e extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=Ee,Object.setPrototypeOf(this,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Oe.prototype.create)}},Oe=class{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){let n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],a=i?ke(i,n):`Error`;return new De(r,`${this.serviceName}: ${a} (${r}).`,n)}};function ke(e,t){return e.replace(Ae,(e,n)=>{let r=t[n];return r==null?`<${n}?>`:String(r)})}var Ae=/\{\$([^}]+)}/g;function je(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Me(e,t){if(e===t)return!0;let n=Object.keys(e),r=Object.keys(t);for(let i of n){if(!r.includes(i))return!1;let n=e[i],a=t[i];if(Ne(n)&&Ne(a)){if(!Me(n,a))return!1}else if(n!==a)return!1}for(let e of r)if(!n.includes(e))return!1;return!0}function Ne(e){return typeof e==`object`&&!!e}function Pe(e){let t=[];for(let[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+`=`+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+`=`+encodeURIComponent(r));return t.length?`&`+t.join(`&`):``}function Fe(e){let t={};return e.replace(/^\?/,``).split(`&`).forEach(e=>{if(e){let[n,r]=e.split(`=`);t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function Ie(e){let t=e.indexOf(`?`);if(!t)return``;let n=e.indexOf(`#`,t);return e.substring(t,n>0?n:void 0)}function Le(e,t){let n=new Re(e,t);return n.subscribe.bind(n)}var Re=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(e===void 0&&t===void 0&&n===void 0)throw Error(`Missing Observer.`);r=ze(e,[`next`,`error`,`complete`])?e:{next:e,error:t,complete:n},r.next===void 0&&(r.next=Be),r.error===void 0&&(r.error=Be),r.complete===void 0&&(r.complete=Be);let i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],--this.observerCount,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(e){typeof console<`u`&&console.error&&console.error(e)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function ze(e,t){if(typeof e!=`object`||!e)return!1;for(let n of t)if(n in e&&typeof e[n]==`function`)return!0;return!1}function Be(){}function Ve(e){return e&&e._delegate?e._delegate:e}var He=class{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode=`LAZY`,this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}},Ue=`[DEFAULT]`,We=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let e=new ue;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{let n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(e){if(n)return null;throw e}else if(n)return null;else throw Error(`Service ${this.name} is not available`)}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(Ke(e))try{this.getOrInitializeService({instanceIdentifier:Ue})}catch{}for(let[e,t]of this.instancesDeferred.entries()){let n=this.normalizeInstanceIdentifier(e);try{let e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch{}}}}clearInstance(e=Ue){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>`INTERNAL`in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>`_delete`in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ue){return this.instances.has(e)}getOptions(e=Ue){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(let[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(r);return r}onInit(e,t){let n=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(n)??new Set;r.add(e),this.onInitCallbacks.set(n,r);let i=this.instances.get(n);return i&&e(i,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){let n=this.onInitCallbacks.get(t);if(n)for(let r of n)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Ge(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Ue){return this.component?this.component.multipleInstances?e:Ue:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!==`EXPLICIT`}};function Ge(e){return e===Ue?void 0:e}function Ke(e){return e.instantiationMode===`EAGER`}var qe=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new We(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}},Je=[],O;(function(e){e[e.DEBUG=0]=`DEBUG`,e[e.VERBOSE=1]=`VERBOSE`,e[e.INFO=2]=`INFO`,e[e.WARN=3]=`WARN`,e[e.ERROR=4]=`ERROR`,e[e.SILENT=5]=`SILENT`})(O||={});var Ye={debug:O.DEBUG,verbose:O.VERBOSE,info:O.INFO,warn:O.WARN,error:O.ERROR,silent:O.SILENT},Xe=O.INFO,Ze={[O.DEBUG]:`log`,[O.VERBOSE]:`log`,[O.INFO]:`info`,[O.WARN]:`warn`,[O.ERROR]:`error`},Qe=(e,t,...n)=>{if(t<e.logLevel)return;let r=new Date().toISOString(),i=Ze[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)},$e=class{constructor(e){this.name=e,this._logLevel=Xe,this._logHandler=Qe,this._userLogHandler=null,Je.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in O))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e==`string`?Ye[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!=`function`)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,O.DEBUG,...e),this._logHandler(this,O.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,O.VERBOSE,...e),this._logHandler(this,O.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,O.INFO,...e),this._logHandler(this,O.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,O.WARN,...e),this._logHandler(this,O.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,O.ERROR,...e),this._logHandler(this,O.ERROR,...e)}},et=(e,t)=>t.some(t=>e instanceof t),tt,nt;function rt(){return tt||=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]}function it(){return nt||=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey]}var at=new WeakMap,ot=new WeakMap,st=new WeakMap,ct=new WeakMap,lt=new WeakMap;function ut(e){let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener(`success`,i),e.removeEventListener(`error`,a)},i=()=>{t(gt(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener(`success`,i),e.addEventListener(`error`,a)});return t.then(t=>{t instanceof IDBCursor&&at.set(t,e)}).catch(()=>{}),lt.set(t,e),t}function dt(e){if(ot.has(e))return;let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener(`complete`,i),e.removeEventListener(`error`,a),e.removeEventListener(`abort`,a)},i=()=>{t(),r()},a=()=>{n(e.error||new DOMException(`AbortError`,`AbortError`)),r()};e.addEventListener(`complete`,i),e.addEventListener(`error`,a),e.addEventListener(`abort`,a)});ot.set(e,t)}var ft={get(e,t,n){if(e instanceof IDBTransaction){if(t===`done`)return ot.get(e);if(t===`objectStoreNames`)return e.objectStoreNames||st.get(e);if(t===`store`)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return gt(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t===`done`||t===`store`)?!0:t in e}};function pt(e){ft=e(ft)}function mt(e){return e===IDBDatabase.prototype.transaction&&!(`objectStoreNames`in IDBTransaction.prototype)?function(t,...n){let r=e.call(_t(this),t,...n);return st.set(r,t.sort?t.sort():[t]),gt(r)}:it().includes(e)?function(...t){return e.apply(_t(this),t),gt(at.get(this))}:function(...t){return gt(e.apply(_t(this),t))}}function ht(e){return typeof e==`function`?mt(e):(e instanceof IDBTransaction&&dt(e),et(e,rt())?new Proxy(e,ft):e)}function gt(e){if(e instanceof IDBRequest)return ut(e);if(ct.has(e))return ct.get(e);let t=ht(e);return t!==e&&(ct.set(e,t),lt.set(t,e)),t}var _t=e=>lt.get(e);function vt(e,t,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){let o=indexedDB.open(e,t),s=gt(o);return r&&o.addEventListener(`upgradeneeded`,e=>{r(gt(o.result),e.oldVersion,e.newVersion,gt(o.transaction),e)}),n&&o.addEventListener(`blocked`,e=>n(e.oldVersion,e.newVersion,e)),s.then(e=>{a&&e.addEventListener(`close`,()=>a()),i&&e.addEventListener(`versionchange`,e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}var yt=[`get`,`getKey`,`getAll`,`getAllKeys`,`count`],bt=[`put`,`add`,`delete`,`clear`],xt=new Map;function St(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t==`string`))return;if(xt.get(t))return xt.get(t);let n=t.replace(/FromIndex$/,``),r=t!==n,i=bt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||yt.includes(n)))return;let a=async function(e,...t){let a=this.transaction(e,i?`readwrite`:`readonly`),o=a.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&a.done]))[0]};return xt.set(t,a),a}pt(e=>({...e,get:(t,n,r)=>St(t,n)||e.get(t,n,r),has:(t,n)=>!!St(t,n)||e.has(t,n)}));var Ct=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(wt(e)){let t=e.getImmediate();return`${t.library}/${t.version}`}else return null}).filter(e=>e).join(` `)}};function wt(e){return e.getComponent()?.type===`VERSION`}var Tt=`@firebase/app`,Et=`0.14.8`,Dt=new $e(`@firebase/app`),Ot=`@firebase/app-compat`,kt=`@firebase/analytics-compat`,At=`@firebase/analytics`,jt=`@firebase/app-check-compat`,Mt=`@firebase/app-check`,Nt=`@firebase/auth`,Pt=`@firebase/auth-compat`,Ft=`@firebase/database`,It=`@firebase/data-connect`,Lt=`@firebase/database-compat`,Rt=`@firebase/functions`,zt=`@firebase/functions-compat`,Bt=`@firebase/installations`,k=`@firebase/installations-compat`,Vt=`@firebase/messaging`,Ht=`@firebase/messaging-compat`,Ut=`@firebase/performance`,Wt=`@firebase/performance-compat`,Gt=`@firebase/remote-config`,Kt=`@firebase/remote-config-compat`,qt=`@firebase/storage`,Jt=`@firebase/storage-compat`,Yt=`@firebase/firestore`,Xt=`@firebase/ai`,Zt=`@firebase/firestore-compat`,Qt=`firebase`,$t=`12.9.0`,en=`[DEFAULT]`,tn={[Tt]:`fire-core`,[Ot]:`fire-core-compat`,[At]:`fire-analytics`,[kt]:`fire-analytics-compat`,[Mt]:`fire-app-check`,[jt]:`fire-app-check-compat`,[Nt]:`fire-auth`,[Pt]:`fire-auth-compat`,[Ft]:`fire-rtdb`,[It]:`fire-data-connect`,[Lt]:`fire-rtdb-compat`,[Rt]:`fire-fn`,[zt]:`fire-fn-compat`,[Bt]:`fire-iid`,[k]:`fire-iid-compat`,[Vt]:`fire-fcm`,[Ht]:`fire-fcm-compat`,[Ut]:`fire-perf`,[Wt]:`fire-perf-compat`,[Gt]:`fire-rc`,[Kt]:`fire-rc-compat`,[qt]:`fire-gcs`,[Jt]:`fire-gcs-compat`,[Yt]:`fire-fst`,[Zt]:`fire-fst-compat`,[Xt]:`fire-vertex`,"fire-js":`fire-js`,[Qt]:`fire-js-all`},nn=new Map,rn=new Map,an=new Map;function on(e,t){try{e.container.addComponent(t)}catch(n){Dt.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function sn(e){let t=e.name;if(an.has(t))return Dt.debug(`There were multiple attempts to register component ${t}.`),!1;an.set(t,e);for(let t of nn.values())on(t,e);for(let t of rn.values())on(t,e);return!0}function cn(e,t){let n=e.container.getProvider(`heartbeat`).getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function ln(e){return e==null?!1:e.settings!==void 0}var un=new Oe(`app`,`Firebase`,{"no-app":`No Firebase App '{$appName}' has been created - call initializeApp() first`,"bad-app-name":`Illegal App name: '{$appName}'`,"duplicate-app":`Firebase App named '{$appName}' already exists with different options or config`,"app-deleted":`Firebase App named '{$appName}' already deleted`,"server-app-deleted":`Firebase Server App has been deleted`,"no-options":`Need to provide options, when not being deployed to hosting via source.`,"invalid-app-argument":`firebase.{$appName}() takes either no argument or a Firebase App instance.`,"invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":`Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.`,"idb-get":`Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.`,"idb-set":`Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.`,"idb-delete":`Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.`,"finalization-registry-not-supported":`FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.`,"invalid-server-app-environment":`FirebaseServerApp is not for use in browser environments.`}),dn=class{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new He(`app`,()=>this,`PUBLIC`))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw un.create(`app-deleted`,{appName:this._name})}},fn=$t;function pn(e,t={}){let n=e;typeof t!=`object`&&(t={name:t});let r={name:en,automaticDataCollectionEnabled:!0,...t},i=r.name;if(typeof i!=`string`||!i)throw un.create(`bad-app-name`,{appName:String(i)});if(n||=ce(),!n)throw un.create(`no-options`);let a=nn.get(i);if(a){if(Me(n,a.options)&&Me(r,a.config))return a;throw un.create(`duplicate-app`,{appName:i})}let o=new qe(i);for(let e of an.values())o.addComponent(e);let s=new dn(n,r,o);return nn.set(i,s),s}function mn(e=en){let t=nn.get(e);if(!t&&e===`[DEFAULT]`&&ce())return pn();if(!t)throw un.create(`no-app`,{appName:e});return t}function hn(){return Array.from(nn.values())}function gn(e,t,n){let r=tn[e]??e;n&&(r+=`-${n}`);let i=r.match(/\s|\//),a=t.match(/\s|\//);if(i||a){let e=[`Unable to register library "${r}" with version "${t}":`];i&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&e.push(`and`),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Dt.warn(e.join(` `));return}sn(new He(`${r}-version`,()=>({library:r,version:t}),`VERSION`))}var _n=`firebase-heartbeat-database`,vn=1,yn=`firebase-heartbeat-store`,bn=null;function xn(){return bn||=vt(_n,vn,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(yn)}catch(e){console.warn(e)}}}}).catch(e=>{throw un.create(`idb-open`,{originalErrorMessage:e.message})}),bn}async function Sn(e){try{let t=(await xn()).transaction(yn),n=await t.objectStore(yn).get(wn(e));return await t.done,n}catch(e){if(e instanceof De)Dt.warn(e.message);else{let t=un.create(`idb-get`,{originalErrorMessage:e?.message});Dt.warn(t.message)}}}async function Cn(e,t){try{let n=(await xn()).transaction(yn,`readwrite`);await n.objectStore(yn).put(t,wn(e)),await n.done}catch(e){if(e instanceof De)Dt.warn(e.message);else{let t=un.create(`idb-set`,{originalErrorMessage:e?.message});Dt.warn(t.message)}}}function wn(e){return`${e.name}!${e.options.appId}`}var Tn=1024,En=30,Dn=class{constructor(e){this.container=e,this._heartbeatsCache=null,this._storage=new An(this.container.getProvider(`app`).getImmediate()),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{let e=this.container.getProvider(`platform-logger`).getImmediate().getPlatformInfoString(),t=On();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===t||this._heartbeatsCache.heartbeats.some(e=>e.date===t))return;if(this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats.length>En){let e=Mn(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Dt.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return``;let e=On(),{heartbeatsToSend:t,unsentEntries:n}=kn(this._heartbeatsCache.heartbeats),r=w(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return Dt.warn(e),``}}};function On(){return new Date().toISOString().substring(0,10)}function kn(e,t=Tn){let n=[],r=e.slice();for(let i of e){let e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),jn(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),jn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var An=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return we()?Te().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let e=await Sn(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return Cn(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return Cn(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}else return}};function jn(e){return w(JSON.stringify({version:2,heartbeats:e})).length}function Mn(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}function Nn(e){sn(new He(`platform-logger`,e=>new Ct(e),`PRIVATE`)),sn(new He(`heartbeat`,e=>new Dn(e),`PRIVATE`)),gn(Tt,Et,e),gn(Tt,Et,`esm2020`),gn(`fire-js`,``)}Nn(``);function Pn(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Fn=Pn,In=new Oe(`auth`,`Firebase`,Pn()),Ln=new $e(`@firebase/auth`);function Rn(e,...t){Ln.logLevel<=O.WARN&&Ln.warn(`Auth (${fn}): ${e}`,...t)}function zn(e,...t){Ln.logLevel<=O.ERROR&&Ln.error(`Auth (${fn}): ${e}`,...t)}function Bn(e,...t){throw Gn(e,...t)}function Vn(e,...t){return Gn(e,...t)}function Hn(e,t,n){return new Oe(`auth`,`Firebase`,{...Fn(),[t]:n}).create(t,{appName:e.name})}function Un(e){return Hn(e,`operation-not-supported-in-this-environment`,`Operations that alter the current user are not supported in conjunction with FirebaseServerApp`)}function Wn(e,t,n){let r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&Bn(e,`argument-error`),Hn(e,`argument-error`,`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Gn(e,...t){if(typeof e!=`string`){let n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return In.create(e,...t)}function A(e,t,...n){if(!e)throw Gn(t,...n)}function Kn(e){let t=`INTERNAL ASSERTION FAILED: `+e;throw zn(t),Error(t)}function qn(e,t){e||Kn(t)}function Jn(){return typeof self<`u`&&self.location?.href||``}function Yn(){return Xn()===`http:`||Xn()===`https:`}function Xn(){return typeof self<`u`&&self.location?.protocol||null}function Zn(){return typeof navigator<`u`&&navigator&&`onLine`in navigator&&typeof navigator.onLine==`boolean`&&(Yn()||be()||`connection`in navigator)?navigator.onLine:!0}function Qn(){if(typeof navigator>`u`)return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}var $n=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,qn(t>e,`Short delay should be less than long delay!`),this.isMobile=_e()||xe()}get(){return Zn()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function er(e,t){qn(e.emulator,`Emulator should always be set here`);let{url:n}=e.emulator;return t?`${n}${t.startsWith(`/`)?t.slice(1):t}`:n}var tr=class{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<`u`&&`fetch`in self)return self.fetch;if(typeof globalThis<`u`&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<`u`)return fetch;Kn(`Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<`u`&&`Headers`in self)return self.Headers;if(typeof globalThis<`u`&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<`u`)return Headers;Kn(`Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<`u`&&`Response`in self)return self.Response;if(typeof globalThis<`u`&&globalThis.Response)return globalThis.Response;if(typeof Response<`u`)return Response;Kn(`Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}},nr={CREDENTIAL_MISMATCH:`custom-token-mismatch`,MISSING_CUSTOM_TOKEN:`internal-error`,INVALID_IDENTIFIER:`invalid-email`,MISSING_CONTINUE_URI:`internal-error`,INVALID_PASSWORD:`wrong-password`,MISSING_PASSWORD:`missing-password`,INVALID_LOGIN_CREDENTIALS:`invalid-credential`,EMAIL_EXISTS:`email-already-in-use`,PASSWORD_LOGIN_DISABLED:`operation-not-allowed`,INVALID_IDP_RESPONSE:`invalid-credential`,INVALID_PENDING_TOKEN:`invalid-credential`,FEDERATED_USER_ID_ALREADY_LINKED:`credential-already-in-use`,MISSING_REQ_TYPE:`internal-error`,EMAIL_NOT_FOUND:`user-not-found`,RESET_PASSWORD_EXCEED_LIMIT:`too-many-requests`,EXPIRED_OOB_CODE:`expired-action-code`,INVALID_OOB_CODE:`invalid-action-code`,MISSING_OOB_CODE:`internal-error`,CREDENTIAL_TOO_OLD_LOGIN_AGAIN:`requires-recent-login`,INVALID_ID_TOKEN:`invalid-user-token`,TOKEN_EXPIRED:`user-token-expired`,USER_NOT_FOUND:`user-token-expired`,TOO_MANY_ATTEMPTS_TRY_LATER:`too-many-requests`,PASSWORD_DOES_NOT_MEET_REQUIREMENTS:`password-does-not-meet-requirements`,INVALID_CODE:`invalid-verification-code`,INVALID_SESSION_INFO:`invalid-verification-id`,INVALID_TEMPORARY_PROOF:`invalid-credential`,MISSING_SESSION_INFO:`missing-verification-id`,SESSION_EXPIRED:`code-expired`,MISSING_ANDROID_PACKAGE_NAME:`missing-android-pkg-name`,UNAUTHORIZED_DOMAIN:`unauthorized-continue-uri`,INVALID_OAUTH_CLIENT_ID:`invalid-oauth-client-id`,ADMIN_ONLY_OPERATION:`admin-restricted-operation`,INVALID_MFA_PENDING_CREDENTIAL:`invalid-multi-factor-session`,MFA_ENROLLMENT_NOT_FOUND:`multi-factor-info-not-found`,MISSING_MFA_ENROLLMENT_ID:`missing-multi-factor-info`,MISSING_MFA_PENDING_CREDENTIAL:`missing-multi-factor-session`,SECOND_FACTOR_EXISTS:`second-factor-already-in-use`,SECOND_FACTOR_LIMIT_EXCEEDED:`maximum-second-factor-count-exceeded`,BLOCKING_FUNCTION_ERROR_RESPONSE:`internal-error`,RECAPTCHA_NOT_ENABLED:`recaptcha-not-enabled`,MISSING_RECAPTCHA_TOKEN:`missing-recaptcha-token`,INVALID_RECAPTCHA_TOKEN:`invalid-recaptcha-token`,INVALID_RECAPTCHA_ACTION:`invalid-recaptcha-action`,MISSING_CLIENT_TYPE:`missing-client-type`,MISSING_RECAPTCHA_VERSION:`missing-recaptcha-version`,INVALID_RECAPTCHA_VERSION:`invalid-recaptcha-version`,INVALID_REQ_TYPE:`invalid-req-type`},rr=[`/v1/accounts:signInWithCustomToken`,`/v1/accounts:signInWithEmailLink`,`/v1/accounts:signInWithIdp`,`/v1/accounts:signInWithPassword`,`/v1/accounts:signInWithPhoneNumber`,`/v1/token`],ir=new $n(3e4,6e4);function ar(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function or(e,t,n,r,i={}){return sr(e,i,async()=>{let i={},a={};r&&(t===`GET`?a=r:i={body:JSON.stringify(r)});let o=Pe({key:e.config.apiKey,...a}).slice(1),s=await e._getAdditionalHeaders();s[`Content-Type`]=`application/json`,e.languageCode&&(s[`X-Firebase-Locale`]=e.languageCode);let c={method:t,headers:s,...i};return ye()||(c.referrerPolicy=`no-referrer`),e.emulatorConfig&&T(e.emulatorConfig.host)&&(c.credentials=`include`),tr.fetch()(await lr(e,e.config.apiHost,n,o),c)})}async function sr(e,t,n){e._canInitEmulator=!1;let r={...nr,...t};try{let t=new dr(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();let a=await i.json();if(`needConfirmation`in a)throw fr(e,`account-exists-with-different-credential`,a);if(i.ok&&!(`errorMessage`in a))return a;{let[t,n]=(i.ok?a.errorMessage:a.error.message).split(` : `);if(t===`FEDERATED_USER_ID_ALREADY_LINKED`)throw fr(e,`credential-already-in-use`,a);if(t===`EMAIL_EXISTS`)throw fr(e,`email-already-in-use`,a);if(t===`USER_DISABLED`)throw fr(e,`user-disabled`,a);let o=r[t]||t.toLowerCase().replace(/[_\s]+/g,`-`);if(n)throw Hn(e,o,n);Bn(e,o)}}catch(t){if(t instanceof De)throw t;Bn(e,`network-request-failed`,{message:String(t)})}}async function cr(e,t,n,r,i={}){let a=await or(e,t,n,r,i);return`mfaPendingCredential`in a&&Bn(e,`multi-factor-auth-required`,{_serverResponse:a}),a}async function lr(e,t,n,r){let i=`${t}${n}?${r}`,a=e,o=a.config.emulator?er(e.config,i):`${e.config.apiScheme}://${i}`;return rr.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()===`COOKIE`)?a._getPersistence()._getFinalTarget(o).toString():o}function ur(e){switch(e){case`ENFORCE`:return`ENFORCE`;case`AUDIT`:return`AUDIT`;case`OFF`:return`OFF`;default:return`ENFORCEMENT_STATE_UNSPECIFIED`}}var dr=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Vn(this.auth,`network-request-failed`)),ir.get())})}};function fr(e,t,n){let r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Vn(e,t,r);return i.customData._tokenResponse=n,i}function pr(e){return e!==void 0&&e.enterprise!==void 0}var mr=class{constructor(e){if(this.siteKey=``,this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw Error(`recaptchaKey undefined`);this.siteKey=e.recaptchaKey.split(`/`)[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return ur(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)===`ENFORCE`||this.getProviderEnforcementState(e)===`AUDIT`}isAnyProviderEnabled(){return this.isProviderEnabled(`EMAIL_PASSWORD_PROVIDER`)||this.isProviderEnabled(`PHONE_PROVIDER`)}};async function hr(e,t){return or(e,`GET`,`/v2/recaptchaConfig`,ar(e,t))}async function gr(e,t){return or(e,`POST`,`/v1/accounts:delete`,t)}async function _r(e,t){return or(e,`POST`,`/v1/accounts:lookup`,t)}function vr(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function yr(e,t=!1){let n=Ve(e),r=await n.getIdToken(t),i=xr(r);A(i&&i.exp&&i.auth_time&&i.iat,n.auth,`internal-error`);let a=typeof i.firebase==`object`?i.firebase:void 0,o=a?.sign_in_provider;return{claims:i,token:r,authTime:vr(br(i.auth_time)),issuedAtTime:vr(br(i.iat)),expirationTime:vr(br(i.exp)),signInProvider:o||null,signInSecondFactor:a?.sign_in_second_factor||null}}function br(e){return Number(e)*1e3}function xr(e){let[t,n,r]=e.split(`.`);if(t===void 0||n===void 0||r===void 0)return zn(`JWT malformed, contained fewer than 3 sections`),null;try{let e=ee(n);return e?JSON.parse(e):(zn(`Failed to decode base64 JWT payload`),null)}catch(e){return zn(`Caught error parsing JWT payload as JSON`,e?.toString()),null}}function Sr(e){let t=xr(e);return A(t,`internal-error`),A(t.exp!==void 0,`internal-error`),A(t.iat!==void 0,`internal-error`),Number(t.exp)-Number(t.iat)}async function Cr(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof De&&wr(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}function wr({code:e}){return e===`auth/user-disabled`||e===`auth/user-token-expired`}var Tr=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;let e=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code===`auth/network-request-failed`&&this.schedule(!0);return}this.schedule()}},Er=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=vr(this.lastLoginAt),this.creationTime=vr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Dr(e){let t=e.auth,n=await Cr(e,_r(t,{idToken:await e.getIdToken()}));A(n?.users.length,t,`internal-error`);let r=n.users[0];e._notifyReloadListener(r);let i=r.providerUserInfo?.length?Ar(r.providerUserInfo):[],a=kr(e.providerData,i),o=e.isAnonymous,s=!(e.email&&r.passwordHash)&&!a?.length,c=o?s:!1,l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Er(r.createdAt,r.lastLoginAt),isAnonymous:c};Object.assign(e,l)}async function Or(e){let t=Ve(e);await Dr(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function kr(e,t){return[...e.filter(e=>!t.some(t=>t.providerId===e.providerId)),...t]}function Ar(e){return e.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||``,displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function jr(e,t){let n=await sr(e,{},async()=>{let n=Pe({grant_type:`refresh_token`,refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,a=await lr(e,r,`/v1/token`,`key=${i}`),o=await e._getAdditionalHeaders();o[`Content-Type`]=`application/x-www-form-urlencoded`;let s={method:`POST`,headers:o,body:n};return e.emulatorConfig&&T(e.emulatorConfig.host)&&(s.credentials=`include`),tr.fetch()(a,s)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Mr(e,t){return or(e,`POST`,`/v2/accounts:revokeToken`,ar(e,t))}var Nr=class e{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){A(e.idToken,`internal-error`),A(e.idToken!==void 0,`internal-error`),A(e.refreshToken!==void 0,`internal-error`);let t=`expiresIn`in e&&e.expiresIn!==void 0?Number(e.expiresIn):Sr(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){A(e.length!==0,`internal-error`);let t=Sr(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(A(this.refreshToken,e,`user-token-expired`),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:n,refreshToken:r,expiresIn:i}=await jr(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,n){let{refreshToken:r,accessToken:i,expirationTime:a}=n,o=new e;return r&&(A(typeof r==`string`,`internal-error`,{appName:t}),o.refreshToken=r),i&&(A(typeof i==`string`,`internal-error`,{appName:t}),o.accessToken=i),a&&(A(typeof a==`number`,`internal-error`,{appName:t}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new e,this.toJSON())}_performRefresh(){return Kn(`not implemented`)}};function Pr(e,t){A(typeof e==`string`||e===void 0,`internal-error`,{appName:t})}var Fr=class e{constructor({uid:e,auth:t,stsTokenManager:n,...r}){this.providerId=`firebase`,this.proactiveRefresh=new Tr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Er(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){let t=await Cr(this,this.stsTokenManager.getToken(this.auth,e));return A(t,this.auth,`internal-error`),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return yr(this,e)}reload(){return Or(this)}_assign(e){this!==e&&(A(this.uid===e.uid,this.auth,`internal-error`),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>({...e})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(t){let n=new e({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){A(!this.reloadListener,this.auth,`internal-error`),this.reloadListener=e,this.reloadUserInfo&&=(this._notifyReloadListener(this.reloadUserInfo),null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Dr(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ln(this.auth.app))return Promise.reject(Un(this.auth));let e=await this.getIdToken();return await Cr(this,gr(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||``}static _fromJSON(t,n){let r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,o=n.photoURL??void 0,s=n.tenantId??void 0,c=n._redirectEventId??void 0,l=n.createdAt??void 0,u=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:p,providerData:m,stsTokenManager:h}=n;A(d&&h,t,`internal-error`);let g=Nr.fromJSON(this.name,h);A(typeof d==`string`,t,`internal-error`),Pr(r,t.name),Pr(i,t.name),A(typeof f==`boolean`,t,`internal-error`),A(typeof p==`boolean`,t,`internal-error`),Pr(a,t.name),Pr(o,t.name),Pr(s,t.name),Pr(c,t.name),Pr(l,t.name),Pr(u,t.name);let _=new e({uid:d,auth:t,email:i,emailVerified:f,displayName:r,isAnonymous:p,photoURL:o,phoneNumber:a,tenantId:s,stsTokenManager:g,createdAt:l,lastLoginAt:u});return m&&Array.isArray(m)&&(_.providerData=m.map(e=>({...e}))),c&&(_._redirectEventId=c),_}static async _fromIdTokenResponse(t,n,r=!1){let i=new Nr;i.updateFromServerResponse(n);let a=new e({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await Dr(a),a}static async _fromGetAccountInfoResponse(t,n,r){let i=n.users[0];A(i.localId!==void 0,`internal-error`);let a=i.providerUserInfo===void 0?[]:Ar(i.providerUserInfo),o=!(i.email&&i.passwordHash)&&!a?.length,s=new Nr;s.updateFromIdToken(r);let c=new e({uid:i.localId,auth:t,stsTokenManager:s,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Er(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(c,l),c}},Ir=new Map;function Lr(e){qn(e instanceof Function,`Expected a class definition`);let t=Ir.get(e);return t?(qn(t instanceof e,`Instance stored in cache mismatched with class`),t):(t=new e,Ir.set(e,t),t)}var Rr=class{constructor(){this.type=`NONE`,this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){let t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}};Rr.type=`NONE`;var zr=Rr;function Br(e,t,n){return`firebase:${e}:${t}:${n}`}var Vr=class e{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;let{config:r,name:i}=this.auth;this.fullUserKey=Br(this.userKey,r.apiKey,i),this.fullPersistenceKey=Br(`persistence`,r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e==`string`){let t=await _r(this.auth,{idToken:e}).catch(()=>void 0);return t?Fr._fromGetAccountInfoResponse(this.auth,t,e):null}return Fr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r=`authUser`){if(!n.length)return new e(Lr(zr),t,r);let i=(await Promise.all(n.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e),a=i[0]||Lr(zr),o=Br(r,t.config.apiKey,t.name),s=null;for(let e of n)try{let n=await e._get(o);if(n){let r;if(typeof n==`string`){let e=await _r(t,{idToken:n}).catch(()=>void 0);if(!e)break;r=await Fr._fromGetAccountInfoResponse(t,e,n)}else r=Fr._fromJSON(t,n);e!==a&&(s=r),a=e;break}}catch{}let c=i.filter(e=>e._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new e(a,t,r):(a=c[0],s&&await a._set(o,s.toJSON()),await Promise.all(n.map(async e=>{if(e!==a)try{await e._remove(o)}catch{}})),new e(a,t,r))}};function Hr(e){let t=e.toLowerCase();if(t.includes(`opera/`)||t.includes(`opr/`)||t.includes(`opios/`))return`Opera`;if(Kr(t))return`IEMobile`;if(t.includes(`msie`)||t.includes(`trident/`))return`IE`;if(t.includes(`edge/`))return`Edge`;if(Ur(t))return`Firefox`;if(t.includes(`silk/`))return`Silk`;if(Jr(t))return`Blackberry`;if(Yr(t))return`Webos`;if(Wr(t))return`Safari`;if((t.includes(`chrome/`)||Gr(t))&&!t.includes(`edge/`))return`Chrome`;if(qr(t))return`Android`;{let t=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(t?.length===2)return t[1]}return`Other`}function Ur(e=ge()){return/firefox\//i.test(e)}function Wr(e=ge()){let t=e.toLowerCase();return t.includes(`safari/`)&&!t.includes(`chrome/`)&&!t.includes(`crios/`)&&!t.includes(`android`)}function Gr(e=ge()){return/crios\//i.test(e)}function Kr(e=ge()){return/iemobile/i.test(e)}function qr(e=ge()){return/android/i.test(e)}function Jr(e=ge()){return/blackberry/i.test(e)}function Yr(e=ge()){return/webos/i.test(e)}function Xr(e=ge()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Zr(e=ge()){return Xr(e)&&!!window.navigator?.standalone}function Qr(){return Se()&&document.documentMode===10}function $r(e=ge()){return Xr(e)||qr(e)||Yr(e)||Jr(e)||/windows phone/i.test(e)||Kr(e)}function ei(e,t=[]){let n;switch(e){case`Browser`:n=Hr(ge());break;case`Worker`:n=`${Hr(ge())}-${e}`;break;default:n=e}let r=t.length?t.join(`,`):`FirebaseCore-web`;return`${n}/JsCore/${fn}/${r}`}var ti=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let n=t=>new Promise((n,r)=>{try{n(e(t))}catch(e){r(e)}});n.onAbort=t,this.queue.push(n);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(e){t.reverse();for(let e of t)try{e()}catch{}throw this.auth._errorFactory.create(`login-blocked`,{originalMessage:e?.message})}}};async function ni(e,t={}){return or(e,`GET`,`/v2/passwordPolicy`,ar(e,t))}var ri=6,ii=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??ri,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState===`ENFORCEMENT_STATE_UNSPECIFIED`&&(this.enforcementState=`OFF`),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join(``)??``,this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&=t.meetsMinPasswordLength??!0,t.isValid&&=t.meetsMaxPasswordLength??!0,t.isValid&&=t.containsLowercaseLetter??!0,t.isValid&&=t.containsUppercaseLetter??!0,t.isValid&&=t.containsNumericCharacter??!0,t.isValid&&=t.containsNonAlphanumericCharacter??!0,t}validatePasswordLengthOptions(e,t){let n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>=`a`&&n<=`z`,n>=`A`&&n<=`Z`,n>=`0`&&n<=`9`,this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||=t),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||=n),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||=r),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||=i)}},ai=class{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new si(this),this.idTokenSubscription=new si(this),this.beforeStateQueue=new ti(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=In,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Lr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Vr.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await _r(this,{idToken:e}),n=await Fr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(e){console.warn(`FirebaseServerApp could not login user with provided authIdToken: `,e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ln(this.app)){let e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),n=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let t=this.redirectUser?._redirectEventId,i=n?._redirectEventId,a=await this.tryRedirectSignIn(e);(!t||t===i)&&a?.user&&(n=a.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(e){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(e))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return A(this._popupRedirectResolver,this,`argument-error`),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Dr(e)}catch(e){if(e?.code!==`auth/network-request-failed`)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Qn()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ln(this.app))return Promise.reject(Un(this));let t=e?Ve(e):null;return t&&A(t.auth.config.apiKey===this.config.apiKey,this,`invalid-user-token`),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&A(this.tenantId===e.tenantId,this,`tenant-id-mismatch`),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ln(this.app)?Promise.reject(Un(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ln(this.app)?Promise.reject(Un(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Lr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion===this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?t.validatePassword(e):Promise.reject(this._errorFactory.create(`unsupported-password-policy-schema-version`,{}))}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=new ii(await ni(this));this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Oe(`auth`,`Firebase`,e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t={providerId:`apple.com`,tokenType:`ACCESS_TOKEN`,token:e,idToken:await this.currentUser.getIdToken()};this.tenantId!=null&&(t.tenantId=this.tenantId),await Mr(this,t)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&Lr(e)||this._popupRedirectResolver;A(t,this,`argument-error`),this.redirectPersistenceManager=await Vr.create(this,[Lr(t._redirectPersistence)],`redirectUser`),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};let i=typeof t==`function`?t:t.next.bind(t),a=!1,o=this._isInitialized?Promise.resolve():this._initializationPromise;if(A(o,this,`internal-error`),o.then(()=>{a||i(this.currentUser)}),typeof t==`function`){let i=e.addObserver(t,n,r);return()=>{a=!0,i()}}else{let n=e.addObserver(t);return()=>{a=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return A(this.persistenceManager,this,`internal-error`),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ei(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e[`X-Firebase-gmpid`]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e[`X-Firebase-Client`]=t);let n=await this._getAppCheckToken();return n&&(e[`X-Firebase-AppCheck`]=n),e}async _getAppCheckToken(){if(ln(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Rn(`Error while retrieving App Check token: ${e.error}`),e?.token}};function oi(e){return Ve(e)}var si=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Le(e=>this.observer=e)}get next(){return A(this.observer,this.auth,`internal-error`),this.observer.next.bind(this.observer)}},ci={async loadJS(){throw Error(`Unable to load external scripts`)},recaptchaV2Script:``,recaptchaEnterpriseScript:``,gapiScript:``};function li(e){ci=e}function ui(e){return ci.loadJS(e)}function di(){return ci.recaptchaEnterpriseScript}function fi(){return ci.gapiScript}function pi(e){return`__${e}${Math.floor(Math.random()*1e6)}`}var mi=class{constructor(){this.enterprise=new hi}ready(e){e()}execute(e,t){return Promise.resolve(`token`)}render(e,t){return``}},hi=class{ready(e){e()}execute(e,t){return Promise.resolve(`token`)}render(e,t){return``}},gi=`recaptcha-enterprise`,_i=`NO_RECAPTCHA`,vi=class{constructor(e){this.type=gi,this.auth=oi(e)}async verify(e=`verify`,t=!1){async function n(e){if(!t){if(e.tenantId==null&&e._agentRecaptchaConfig!=null)return e._agentRecaptchaConfig.siteKey;if(e.tenantId!=null&&e._tenantRecaptchaConfigs[e.tenantId]!==void 0)return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{hr(e,{clientType:`CLIENT_TYPE_WEB`,version:`RECAPTCHA_ENTERPRISE`}).then(r=>{if(r.recaptchaKey===void 0)n(Error(`recaptcha Enterprise site key undefined`));else{let n=new mr(r);return e.tenantId==null?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}}).catch(e=>{n(e)})})}function r(t,n,r){let i=window.grecaptcha;pr(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(_i)})}):r(Error(`No reCAPTCHA enterprise script loaded.`))}return this.auth.settings.appVerificationDisabledForTesting?new mi().execute(`siteKey`,{action:`verify`}):new Promise((e,i)=>{n(this.auth).then(n=>{if(!t&&pr(window.grecaptcha))r(n,e,i);else{if(typeof window>`u`){i(Error(`RecaptchaVerifier is only supported in browser`));return}let t=di();t.length!==0&&(t+=n),ui(t).then(()=>{r(n,e,i)}).catch(e=>{i(e)})}}).catch(e=>{i(e)})})}};async function yi(e,t,n,r=!1,i=!1){let a=new vi(e),o;if(i)o=_i;else try{o=await a.verify(n)}catch{o=await a.verify(n,!0)}let s={...t};if(n===`mfaSmsEnrollment`||n===`mfaSmsSignIn`){if(`phoneEnrollmentInfo`in s){let e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.recaptchaToken;Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:`CLIENT_TYPE_WEB`,recaptchaVersion:`RECAPTCHA_ENTERPRISE`}})}else if(`phoneSignInInfo`in s){let e=s.phoneSignInInfo.recaptchaToken;Object.assign(s,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:`CLIENT_TYPE_WEB`,recaptchaVersion:`RECAPTCHA_ENTERPRISE`}})}return s}return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:`CLIENT_TYPE_WEB`}),Object.assign(s,{recaptchaVersion:`RECAPTCHA_ENTERPRISE`}),s}async function bi(e,t,n,r,i){return i===`EMAIL_PASSWORD_PROVIDER`?e._getRecaptchaConfig()?.isProviderEnabled(`EMAIL_PASSWORD_PROVIDER`)?r(e,await yi(e,t,n,n===`getOobCode`)):r(e,t).catch(async i=>i.code===`auth/missing-recaptcha-token`?(console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`),r(e,await yi(e,t,n,n===`getOobCode`))):Promise.reject(i)):i===`PHONE_PROVIDER`?e._getRecaptchaConfig()?.isProviderEnabled(`PHONE_PROVIDER`)?r(e,await yi(e,t,n)).catch(async i=>e._getRecaptchaConfig()?.getProviderEnforcementState(`PHONE_PROVIDER`)===`AUDIT`&&(i.code===`auth/missing-recaptcha-token`||i.code===`auth/invalid-app-credential`)?(console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`),r(e,await yi(e,t,n,!1,!0))):Promise.reject(i)):r(e,await yi(e,t,n,!1,!0)):Promise.reject(i+` provider is not supported.`)}async function xi(e){let t=oi(e),n=new mr(await hr(t,{clientType:`CLIENT_TYPE_WEB`,version:`RECAPTCHA_ENTERPRISE`}));t.tenantId==null?t._agentRecaptchaConfig=n:t._tenantRecaptchaConfigs[t.tenantId]=n,n.isAnyProviderEnabled()&&new vi(t).verify()}function Si(e,t){let n=cn(e,`auth`);if(n.isInitialized()){let e=n.getImmediate();if(Me(n.getOptions(),t??{}))return e;Bn(e,`already-initialized`)}return n.initialize({options:t})}function Ci(e,t){let n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Lr);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}function wi(e,t,n){let r=oi(e);A(/^https?:\/\//.test(t),r,`invalid-emulator-scheme`);let i=!!n?.disableWarnings,a=Ti(t),{host:o,port:s}=Ei(t),c=s===null?``:`:${s}`,l={url:`${a}//${o}${c}/`},u=Object.freeze({host:o,port:s,protocol:a.replace(`:`,``),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){A(r.config.emulator&&r.emulatorConfig,r,`emulator-config-failed`),A(Me(l,r.config.emulator)&&Me(u,r.emulatorConfig),r,`emulator-config-failed`);return}r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,T(o)?(E(`${a}//${o}${c}`),D(`Auth`,!0)):i||Oi()}function Ti(e){let t=e.indexOf(`:`);return t<0?``:e.substr(0,t+1)}function Ei(e){let t=Ti(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:``,port:null};let r=n[2].split(`@`).pop()||``,i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let e=i[1];return{host:e,port:Di(r.substr(e.length+1))}}else{let[e,t]=r.split(`:`);return{host:e,port:Di(t)}}}function Di(e){if(!e)return null;let t=Number(e);return isNaN(t)?null:t}function Oi(){function e(){let e=document.createElement(`p`),t=e.style;e.innerText=`Running in emulator mode. Do not use with production credentials.`,t.position=`fixed`,t.width=`100%`,t.backgroundColor=`#ffffff`,t.border=`.1em solid #000000`,t.color=`#b50000`,t.bottom=`0px`,t.left=`0px`,t.margin=`0px`,t.zIndex=`10000`,t.textAlign=`center`,e.classList.add(`firebase-emulator-warning`),document.body.appendChild(e)}typeof console<`u`&&typeof console.info==`function`&&console.info(`WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.`),typeof window<`u`&&typeof document<`u`&&(document.readyState===`loading`?window.addEventListener(`DOMContentLoaded`,e):e())}var ki=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Kn(`not implemented`)}_getIdTokenResponse(e){return Kn(`not implemented`)}_linkToIdToken(e,t){return Kn(`not implemented`)}_getReauthenticationResolver(e){return Kn(`not implemented`)}};async function Ai(e,t){return or(e,`POST`,`/v1/accounts:signUp`,t)}async function ji(e,t){return cr(e,`POST`,`/v1/accounts:signInWithPassword`,ar(e,t))}async function Mi(e,t){return or(e,`POST`,`/v1/accounts:sendOobCode`,ar(e,t))}async function Ni(e,t){return Mi(e,t)}async function Pi(e,t){return cr(e,`POST`,`/v1/accounts:signInWithEmailLink`,ar(e,t))}async function Fi(e,t){return cr(e,`POST`,`/v1/accounts:signInWithEmailLink`,ar(e,t))}var Ii=class e extends ki{constructor(e,t,n,r=null){super(`password`,n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(t,n){return new e(t,n,`password`)}static _fromEmailAndCode(t,n,r=null){return new e(t,n,`emailLink`,r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e==`string`?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod===`password`)return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod===`emailLink`)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case`password`:return bi(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:`CLIENT_TYPE_WEB`},`signInWithPassword`,ji,`EMAIL_PASSWORD_PROVIDER`);case`emailLink`:return Pi(e,{email:this._email,oobCode:this._password});default:Bn(e,`internal-error`)}}async _linkToIdToken(e,t){switch(this.signInMethod){case`password`:return bi(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:`CLIENT_TYPE_WEB`},`signUpPassword`,Ai,`EMAIL_PASSWORD_PROVIDER`);case`emailLink`:return Fi(e,{idToken:t,email:this._email,oobCode:this._password});default:Bn(e,`internal-error`)}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};async function Li(e,t){return cr(e,`POST`,`/v1/accounts:signInWithIdp`,ar(e,t))}var Ri=`http://localhost`,zi=class e extends ki{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){let n=new e(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Bn(`argument-error`),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){let{providerId:n,signInMethod:r,...i}=typeof t==`string`?JSON.parse(t):t;if(!n||!r)return null;let a=new e(n,r);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){return Li(e,this.buildRequest())}_linkToIdToken(e,t){let n=this.buildRequest();return n.idToken=t,Li(e,n)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,Li(e,t)}buildRequest(){let e={requestUri:Ri,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Pe(t)}return e}};async function Bi(e,t){return or(e,`POST`,`/v1/accounts:sendVerificationCode`,ar(e,t))}async function Vi(e,t){return cr(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,ar(e,t))}async function Hi(e,t){let n=await cr(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,ar(e,t));if(n.temporaryProof)throw fr(e,`account-exists-with-different-credential`,n);return n}var j={USER_NOT_FOUND:`user-not-found`};async function Ui(e,t){return cr(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,ar(e,{...t,operation:`REAUTH`}),j)}var Wi=class e extends ki{constructor(e){super(`phone`,`phone`),this.params=e}static _fromVerification(t,n){return new e({verificationId:t,verificationCode:n})}static _fromTokenResponse(t,n){return new e({phoneNumber:t,temporaryProof:n})}_getIdTokenResponse(e){return Vi(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return Hi(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return Ui(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(t){typeof t==`string`&&(t=JSON.parse(t));let{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:a}=t;return!r&&!n&&!i&&!a?null:new e({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:a})}};function Gi(e){switch(e){case`recoverEmail`:return`RECOVER_EMAIL`;case`resetPassword`:return`PASSWORD_RESET`;case`signIn`:return`EMAIL_SIGNIN`;case`verifyEmail`:return`VERIFY_EMAIL`;case`verifyAndChangeEmail`:return`VERIFY_AND_CHANGE_EMAIL`;case`revertSecondFactorAddition`:return`REVERT_SECOND_FACTOR_ADDITION`;default:return null}}function Ki(e){let t=Fe(Ie(e)).link,n=t?Fe(Ie(t)).deep_link_id:null,r=Fe(Ie(e)).deep_link_id;return(r?Fe(Ie(r)).link:null)||r||n||t||e}var qi=class e{constructor(e){let t=Fe(Ie(e)),n=t.apiKey??null,r=t.oobCode??null,i=Gi(t.mode??null);A(n&&r&&i,`argument-error`),this.apiKey=n,this.operation=i,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(t){let n=Ki(t);try{return new e(n)}catch{return null}}},Ji=class e{constructor(){this.providerId=e.PROVIDER_ID}static credential(e,t){return Ii._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){let n=qi.parseLink(t);return A(n,`argument-error`),Ii._fromEmailAndCode(e,n.code,n.tenantId)}};Ji.PROVIDER_ID=`password`,Ji.EMAIL_PASSWORD_SIGN_IN_METHOD=`password`,Ji.EMAIL_LINK_SIGN_IN_METHOD=`emailLink`;var Yi=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}},Xi=class extends Yi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}},Zi=class e extends Xi{constructor(){super(`facebook.com`)}static credential(t){return zi._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!(`oauthAccessToken`in t)||!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch{return null}}};Zi.FACEBOOK_SIGN_IN_METHOD=`facebook.com`,Zi.PROVIDER_ID=`facebook.com`;var Qi=class e extends Xi{constructor(){super(`google.com`),this.addScope(`profile`)}static credential(t,n){return zi._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return e.credential(n,r)}catch{return null}}};Qi.GOOGLE_SIGN_IN_METHOD=`google.com`,Qi.PROVIDER_ID=`google.com`;var $i=class e extends Xi{constructor(){super(`github.com`)}static credential(t){return zi._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!(`oauthAccessToken`in t)||!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch{return null}}};$i.GITHUB_SIGN_IN_METHOD=`github.com`,$i.PROVIDER_ID=`github.com`;var ea=class e extends Xi{constructor(){super(`twitter.com`)}static credential(t,n){return zi._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return e.credential(n,r)}catch{return null}}};ea.TWITTER_SIGN_IN_METHOD=`twitter.com`,ea.PROVIDER_ID=`twitter.com`;var ta=class e{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){return new e({user:await Fr._fromIdTokenResponse(t,r,i),providerId:na(r),_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){return await t._updateTokensIfNecessary(r,!0),new e({user:t,providerId:na(r),_tokenResponse:r,operationType:n})}};function na(e){return e.providerId?e.providerId:`phoneNumber`in e?`phone`:null}var ra=class e extends De{constructor(t,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,e.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new e(t,n,r,i)}};function ia(e,t,n,r){return(t===`reauthenticate`?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{throw n.code===`auth/multi-factor-auth-required`?ra._fromErrorAndOperation(e,n,t,r):n})}async function aa(e,t,n=!1){let r=await Cr(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return ta._forOperation(e,`link`,r)}async function oa(e,t,n=!1){let{auth:r}=e;if(ln(r.app))return Promise.reject(Un(r));let i=`reauthenticate`;try{let a=await Cr(e,ia(r,i,t,e),n);A(a.idToken,r,`internal-error`);let o=xr(a.idToken);A(o,r,`internal-error`);let{sub:s}=o;return A(e.uid===s,r,`user-mismatch`),ta._forOperation(e,i,a)}catch(e){throw e?.code===`auth/user-not-found`&&Bn(r,`user-mismatch`),e}}async function sa(e,t,n=!1){if(ln(e.app))return Promise.reject(Un(e));let r=`signIn`,i=await ia(e,r,t),a=await ta._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(a.user),a}async function ca(e,t){return sa(oi(e),t)}async function la(e,t){return cr(e,`POST`,`/v1/accounts:signInWithCustomToken`,ar(e,t))}async function ua(e,t){if(ln(e.app))return Promise.reject(Un(e));let n=oi(e),r=await la(n,{token:t,returnSecureToken:!0}),i=await ta._fromIdTokenResponse(n,`signIn`,r);return await n._updateCurrentUser(i.user),i}function da(e,t,n){A(n.url?.length>0,e,`invalid-continue-uri`),A(n.dynamicLinkDomain===void 0||n.dynamicLinkDomain.length>0,e,`invalid-dynamic-link-domain`),A(n.linkDomain===void 0||n.linkDomain.length>0,e,`invalid-hosting-link-domain`),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.linkDomain=n.linkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(A(n.iOS.bundleId.length>0,e,`missing-ios-bundle-id`),t.iOSBundleId=n.iOS.bundleId),n.android&&(A(n.android.packageName.length>0,e,`missing-android-pkg-name`),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function fa(e){let t=oi(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function pa(e,t,n){return ln(e.app)?Promise.reject(Un(e)):ca(Ve(e),Ji.credential(t,n)).catch(async t=>{throw t.code===`auth/password-does-not-meet-requirements`&&fa(e),t})}async function ma(e,t,n){let r=oi(e),i={requestType:`EMAIL_SIGNIN`,email:t,clientType:`CLIENT_TYPE_WEB`};function a(e,t){A(t.handleCodeInApp,r,`argument-error`),t&&da(r,e,t)}a(i,n),await bi(r,i,`getOobCode`,Ni,`EMAIL_PASSWORD_PROVIDER`)}function ha(e,t){return qi.parseLink(t)?.operation===`EMAIL_SIGNIN`}async function ga(e,t,n){if(ln(e.app))return Promise.reject(Un(e));let r=Ve(e),i=Ji.credentialWithLink(t,n||Jn());return A(i._tenantId===(r.tenantId||null),r,`tenant-id-mismatch`),ca(r,i)}function _a(e,t,n,r){return Ve(e).onIdTokenChanged(t,n,r)}function va(e,t,n){return Ve(e).beforeAuthStateChanged(t,n)}function ya(e,t){return or(e,`POST`,`/v2/accounts/mfaEnrollment:start`,ar(e,t))}function ba(e,t){return or(e,`POST`,`/v2/accounts/mfaEnrollment:finalize`,ar(e,t))}function xa(e,t){return or(e,`POST`,`/v2/accounts/mfaEnrollment:start`,ar(e,t))}function Sa(e,t){return or(e,`POST`,`/v2/accounts/mfaEnrollment:finalize`,ar(e,t))}var Ca=`__sak`,wa=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ca,`1`),this.storage.removeItem(Ca),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}},Ta=1e3,Ea=10,Da=class extends wa{constructor(){super(()=>window.localStorage,`LOCAL`),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=$r(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let t of Object.keys(this.listeners)){let n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});return}let n=e.key;t?this.detachListener():this.stopPolling();let r=()=>{let e=this.storage.getItem(n);!t&&this.localCache[n]===e||this.notifyListeners(n,e)},i=this.storage.getItem(n);Qr()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,Ea):r()}notifyListeners(e,t){this.localCache[e]=t;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent(`storage`,{key:e,oldValue:t,newValue:n}),!0)})},Ta)}stopPolling(){this.pollTimer&&=(clearInterval(this.pollTimer),null)}attachListener(){window.addEventListener(`storage`,this.boundEventHandler)}detachListener(){window.removeEventListener(`storage`,this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){let t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}};Da.type=`LOCAL`;var Oa=Da,ka=1e3;function Aa(e){let t=e.replace(/[\\^$.*+?()[\]{}|]/g,`\\$&`),n=RegExp(`${t}=([^;]+)`);return document.cookie.match(n)?.[1]??null}function ja(e){return`${window.location.protocol===`http:`?`__dev_`:`__HOST-`}FIREBASE_${e.split(`:`)[3]}`}var Ma=class{constructor(){this.type=`COOKIE`,this.listenerUnsubscribes=new Map}_getFinalTarget(e){let t=new URL(`${window.location.origin}/__cookies__`);return t.searchParams.set(`finalTarget`,e),t}async _isAvailable(){return typeof isSecureContext==`boolean`&&!isSecureContext||typeof navigator>`u`||typeof document>`u`?!1:navigator.cookieEnabled??!0}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;let t=ja(e);return window.cookieStore?(await window.cookieStore.get(t))?.value:Aa(t)}async _remove(e){if(!this._isAvailable()||!await this._get(e))return;let t=ja(e);document.cookie=`${t}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch(`/__cookies__`,{method:`DELETE`}).catch(()=>void 0)}_addListener(e,t){if(!this._isAvailable())return;let n=ja(e);if(window.cookieStore){let e=(e=>{let r=e.changed.find(e=>e.name===n);r&&t(r.value),e.deleted.find(e=>e.name===n)&&t(null)});return this.listenerUnsubscribes.set(t,()=>window.cookieStore.removeEventListener(`change`,e)),window.cookieStore.addEventListener(`change`,e)}let r=Aa(n),i=setInterval(()=>{let e=Aa(n);e!==r&&(t(e),r=e)},ka);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){let n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}};Ma.type=`COOKIE`;var Na=class extends wa{constructor(){super(()=>window.sessionStorage,`SESSION`)}_addListener(e,t){}_removeListener(e,t){}};Na.type=`SESSION`;var Pa=Na;function Fa(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}}))}var Ia=class e{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let n=this.receivers.find(e=>e.isListeningto(t));if(n)return n;let r=new e(t);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let t=e,{eventId:n,eventType:r,data:i}=t.data,a=this.handlersMap[r];if(!a?.size)return;t.ports[0].postMessage({status:`ack`,eventId:n,eventType:r});let o=await Fa(Array.from(a).map(async e=>e(t.origin,i)));t.ports[0].postMessage({status:`done`,eventId:n,eventType:r,response:o})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener(`message`,this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener(`message`,this.boundEventHandler)}};Ia.receivers=[];function La(e=``,t=10){let n=``;for(let e=0;e<t;e++)n+=Math.floor(Math.random()*10);return e+n}var Ra=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener(`message`,e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){let r=typeof MessageChannel<`u`?new MessageChannel:null;if(!r)throw Error(`connection_unavailable`);let i,a;return new Promise((o,s)=>{let c=La(``,20);r.port1.start();let l=setTimeout(()=>{s(Error(`unsupported_event`))},n);a={messageChannel:r,onMessage(e){let t=e;if(t.data.eventId===c)switch(t.data.status){case`ack`:clearTimeout(l),i=setTimeout(()=>{s(Error(`timeout`))},3e3);break;case`done`:clearTimeout(i),o(t.data.response);break;default:clearTimeout(l),clearTimeout(i),s(Error(`invalid_response`));break}}},this.handlers.add(a),r.port1.addEventListener(`message`,a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}};function za(){return window}function Ba(e){za().location.href=e}function Va(){return za().WorkerGlobalScope!==void 0&&typeof za().importScripts==`function`}async function Ha(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Ua(){return navigator?.serviceWorker?.controller||null}function Wa(){return Va()?self:null}var Ga=`firebaseLocalStorageDb`,Ka=1,qa=`firebaseLocalStorage`,Ja=`fbase_key`,Ya=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener(`success`,()=>{e(this.request.result)}),this.request.addEventListener(`error`,()=>{t(this.request.error)})})}};function Xa(e,t){return e.transaction([qa],t?`readwrite`:`readonly`).objectStore(qa)}function Za(){return new Ya(indexedDB.deleteDatabase(Ga)).toPromise()}function Qa(){let e=indexedDB.open(Ga,Ka);return new Promise((t,n)=>{e.addEventListener(`error`,()=>{n(e.error)}),e.addEventListener(`upgradeneeded`,()=>{let t=e.result;try{t.createObjectStore(qa,{keyPath:Ja})}catch(e){n(e)}}),e.addEventListener(`success`,async()=>{let n=e.result;n.objectStoreNames.contains(qa)?t(n):(n.close(),await Za(),t(await Qa()))})})}async function $a(e,t,n){return new Ya(Xa(e,!0).put({[Ja]:t,value:n})).toPromise()}async function eo(e,t){let n=await new Ya(Xa(e,!1).get(t)).toPromise();return n===void 0?null:n.value}function to(e,t){return new Ya(Xa(e,!0).delete(t)).toPromise()}var no=800,ro=3,io=class{constructor(){this.type=`LOCAL`,this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||=await Qa(),this.db}async _withRetries(e){let t=0;for(;;)try{return await e(await this._openDb())}catch(e){if(t++>ro)throw e;this.db&&=(this.db.close(),void 0)}}async initializeServiceWorkerMessaging(){return Va()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ia._getInstance(Wa()),this.receiver._subscribe(`keyChanged`,async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe(`ping`,async(e,t)=>[`keyChanged`])}async initializeSender(){if(this.activeServiceWorker=await Ha(),!this.activeServiceWorker)return;this.sender=new Ra(this.activeServiceWorker);let e=await this.sender._send(`ping`,{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes(`keyChanged`)&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Ua()!==this.activeServiceWorker))try{await this.sender._send(`keyChanged`,{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await Qa();return await $a(e,Ca,`1`),await to(e,Ca),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>$a(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){let t=await this._withRetries(t=>eo(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>to(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(e=>new Ya(Xa(e,!1).getAll()).toPromise());if(!e||this.pendingWrites!==0)return[];let t=[],n=new Set;if(e.length!==0)for(let{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(let e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),no)}stopPolling(){this.pollTimer&&=(clearInterval(this.pollTimer),null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}};io.type=`LOCAL`;var ao=io;function oo(e,t){return or(e,`POST`,`/v2/accounts/mfaSignIn:start`,ar(e,t))}function so(e,t){return or(e,`POST`,`/v2/accounts/mfaSignIn:finalize`,ar(e,t))}function co(e,t){return or(e,`POST`,`/v2/accounts/mfaSignIn:finalize`,ar(e,t))}pi(`rcb`),new $n(3e4,6e4);var lo=`recaptcha`;async function uo(e,t,n){if(!e._getRecaptchaConfig())try{await xi(e)}catch{console.log(`Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.`)}try{let r;if(r=typeof t==`string`?{phoneNumber:t}:t,`session`in r){let t=r.session;if(`phoneNumber`in r)return A(t.type===`enroll`,e,`internal-error`),(await bi(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:`CLIENT_TYPE_WEB`}},`mfaSmsEnrollment`,async(e,t)=>t.phoneEnrollmentInfo.captchaResponse===_i?(A(n?.type===lo,e,`argument-error`),ya(e,await fo(e,t,n))):ya(e,t),`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo;{A(t.type===`signin`,e,`internal-error`);let i=r.multiFactorHint?.uid||r.multiFactorUid;return A(i,e,`missing-multi-factor-info`),(await bi(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:i,phoneSignInInfo:{clientType:`CLIENT_TYPE_WEB`}},`mfaSmsSignIn`,async(e,t)=>t.phoneSignInInfo.captchaResponse===_i?(A(n?.type===lo,e,`argument-error`),oo(e,await fo(e,t,n))):oo(e,t),`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}else return(await bi(e,{phoneNumber:r.phoneNumber,clientType:`CLIENT_TYPE_WEB`},`sendVerificationCode`,async(e,t)=>t.captchaResponse===_i?(A(n?.type===lo,e,`argument-error`),Bi(e,await fo(e,t,n))):Bi(e,t),`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).sessionInfo}finally{n?._reset()}}async function fo(e,t,n){A(n.type===lo,e,`argument-error`);let r=await n.verify();A(typeof r==`string`,e,`argument-error`);let i={...t};if(`phoneEnrollmentInfo`in i){let e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,a=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:a}}),i}else if(`phoneSignInInfo`in i){let e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}else return Object.assign(i,{recaptchaToken:r}),i}var po=class e{constructor(t){this.providerId=e.PROVIDER_ID,this.auth=oi(t)}verifyPhoneNumber(e,t){return uo(this.auth,e,Ve(t))}static credential(e,t){return Wi._fromVerification(e,t)}static credentialFromResult(t){let n=t;return e.credentialFromTaggedObject(n)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{phoneNumber:t,temporaryProof:n}=e;return t&&n?Wi._fromTokenResponse(t,n):null}};po.PROVIDER_ID=`phone`,po.PHONE_SIGN_IN_METHOD=`phone`;function mo(e,t){return t?Lr(t):(A(e._popupRedirectResolver,e,`argument-error`),e._popupRedirectResolver)}var ho=class extends ki{constructor(e){super(`custom`,`custom`),this.params=e}_getIdTokenResponse(e){return Li(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Li(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Li(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function go(e){return sa(e.auth,new ho(e),e.bypassAuthState)}function _o(e){let{auth:t,user:n}=e;return A(n,t,`internal-error`),oa(n,new ho(e),e.bypassAuthState)}async function vo(e){let{auth:t,user:n}=e;return A(n,t,`internal-error`),aa(n,new ho(e),e.bypassAuthState)}var yo=class{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}let s={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(s))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case`signInViaPopup`:case`signInViaRedirect`:return go;case`linkViaPopup`:case`linkViaRedirect`:return vo;case`reauthViaPopup`:case`reauthViaRedirect`:return _o;default:Bn(this.auth,`internal-error`)}}resolve(e){qn(this.pendingPromise,`Pending promise was never set`),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qn(this.pendingPromise,`Pending promise was never set`),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}},bo=new $n(2e3,1e4);async function xo(e,t,n){if(ln(e.app))return Promise.reject(Vn(e,`operation-not-supported-in-this-environment`));let r=oi(e);return Wn(e,t,Yi),new M(r,`signInViaPopup`,t,mo(r,n)).executeNotNull()}var M=class e extends yo{constructor(t,n,r,i,a){super(t,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,e.currentPopupAction&&e.currentPopupAction.cancel(),e.currentPopupAction=this}async executeNotNull(){let e=await this.execute();return A(e,this.auth,`internal-error`),e}async onExecution(){qn(this.filter.length===1,`Popup operations only handle one event`);let e=La();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Vn(this.auth,`web-storage-unsupported`))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Vn(this.auth,`cancelled-popup-request`))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,e.currentPopupAction=null}pollUserCancellation(){let e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vn(this.auth,`popup-closed-by-user`))},8e3);return}this.pollId=window.setTimeout(e,bo.get())};e()}};M.currentPopupAction=null;var So=`pendingRedirect`,Co=new Map,wo=class extends yo{constructor(e,t,n=!1){super(e,[`signInViaRedirect`,`linkViaRedirect`,`reauthViaRedirect`,`unknown`],t,void 0,n),this.eventId=null}async execute(){let e=Co.get(this.auth._key());if(!e){try{let t=await To(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}Co.set(this.auth._key(),e)}return this.bypassAuthState||Co.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type===`signInViaRedirect`)return super.onAuthEvent(e);if(e.type===`unknown`){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function To(e,t){let n=Oo(t),r=Do(e);if(!await r._isAvailable())return!1;let i=await r._get(n)===`true`;return await r._remove(n),i}function Eo(e,t){Co.set(e._key(),t)}function Do(e){return Lr(e._redirectPersistence)}function Oo(e){return Br(So,e.config.apiKey,e.name)}async function ko(e,t,n=!1){if(ln(e.app))return Promise.reject(Un(e));let r=oi(e),i=await new wo(r,mo(r,t),n).execute();return i&&!n&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,t)),i}var Ao=600*1e3,jo=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Po(e)?t:(this.hasHandledPotentialRedirect=!0,t||=(this.queuedRedirectEvent=e,!0),t)}sendToConsumer(e,t){if(e.error&&!No(e)){let n=e.error.code?.split(`auth/`)[1]||`internal-error`;t.onError(Vn(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Ao&&this.cachedEventUids.clear(),this.cachedEventUids.has(Mo(e))}saveEventToCache(e){this.cachedEventUids.add(Mo(e)),this.lastProcessedEventTime=Date.now()}};function Mo(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join(`-`)}function No({type:e,error:t}){return e===`unknown`&&t?.code===`auth/no-auth-event`}function Po(e){switch(e.type){case`signInViaRedirect`:case`linkViaRedirect`:case`reauthViaRedirect`:return!0;case`unknown`:return No(e);default:return!1}}async function Fo(e,t={}){return or(e,`GET`,`/v1/projects`,t)}var Io=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Lo=/^https?/;async function Ro(e){if(e.config.emulator)return;let{authorizedDomains:t}=await Fo(e);for(let e of t)try{if(zo(e))return}catch{}Bn(e,`unauthorized-domain`)}function zo(e){let t=Jn(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith(`chrome-extension://`)){let i=new URL(e);return i.hostname===``&&r===``?n===`chrome-extension:`&&e.replace(`chrome-extension://`,``)===t.replace(`chrome-extension://`,``):n===`chrome-extension:`&&i.hostname===r}if(!Lo.test(n))return!1;if(Io.test(e))return r===e;let i=e.replace(/\./g,`\\.`);return RegExp(`^(.+\\.`+i+`|`+i+`)$`,`i`).test(r)}var Bo=new $n(3e4,6e4);function Vo(){let e=za().___jsl;if(e?.H){for(let t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}}function Ho(e){return new Promise((t,n)=>{function r(){Vo(),gapi.load(`gapi.iframes`,{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Vo(),n(Vn(e,`network-request-failed`))},timeout:Bo.get()})}if(za().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(za().gapi?.load)r();else{let t=pi(`iframefcb`);return za()[t]=()=>{gapi.load?r():n(Vn(e,`network-request-failed`))},ui(`${fi()}?onload=${t}`).catch(e=>n(e))}}).catch(e=>{throw Uo=null,e})}var Uo=null;function Wo(e){return Uo||=Ho(e),Uo}var Go=new $n(5e3,15e3),Ko=`__/auth/iframe`,qo=`emulator/auth/iframe`,Jo={style:{position:`absolute`,top:`-100px`,width:`1px`,height:`1px`},"aria-hidden":`true`,tabindex:`-1`},Yo=new Map([[`identitytoolkit.googleapis.com`,`p`],[`staging-identitytoolkit.sandbox.googleapis.com`,`s`],[`test-identitytoolkit.sandbox.googleapis.com`,`t`]]);function Xo(e){let t=e.config;A(t.authDomain,e,`auth-domain-config-required`);let n=t.emulator?er(t,qo):`https://${e.config.authDomain}/${Ko}`,r={apiKey:t.apiKey,appName:e.name,v:fn},i=Yo.get(e.config.apiHost);i&&(r.eid=i);let a=e._getFrameworks();return a.length&&(r.fw=a.join(`,`)),`${n}?${Pe(r).slice(1)}`}async function Zo(e){let t=await Wo(e),n=za().gapi;return A(n,e,`internal-error`),t.open({where:document.body,url:Xo(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Jo,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});let i=Vn(e,`network-request-failed`),a=za().setTimeout(()=>{r(i)},Go.get());function o(){za().clearTimeout(a),n(t)}t.ping(o).then(o,()=>{r(i)})}))}var Qo={location:`yes`,resizable:`yes`,statusbar:`yes`,toolbar:`no`},$o=500,es=600,ts=`_blank`,ns=`http://localhost`,rs=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function is(e,t,n,r=$o,i=es){let a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s=``,c={...Qo,width:r.toString(),height:i.toString(),top:a,left:o},l=ge().toLowerCase();n&&(s=Gr(l)?ts:n),Ur(l)&&(t||=ns,c.scrollbars=`yes`);let u=Object.entries(c).reduce((e,[t,n])=>`${e}${t}=${n},`,``);if(Zr(l)&&s!==`_self`)return as(t||``,s),new rs(null);let d=window.open(t||``,s,u);A(d,e,`popup-blocked`);try{d.focus()}catch{}return new rs(d)}function as(e,t){let n=document.createElement(`a`);n.href=e,n.target=t;let r=document.createEvent(`MouseEvent`);r.initMouseEvent(`click`,!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var os=`__/auth/handler`,ss=`emulator/auth/handler`,cs=`fac`;async function ls(e,t,n,r,i,a){A(e.config.authDomain,e,`auth-domain-config-required`),A(e.config.apiKey,e,`invalid-api-key`);let o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:fn,eventId:i};if(t instanceof Yi){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||``,je(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(let[e,t]of Object.entries(a||{}))o[e]=t}if(t instanceof Xi){let e=t.getScopes().filter(e=>e!==``);e.length>0&&(o.scopes=e.join(`,`))}e.tenantId&&(o.tid=e.tenantId);let s=o;for(let e of Object.keys(s))s[e]===void 0&&delete s[e];let c=await e._getAppCheckToken(),l=c?`#${cs}=${encodeURIComponent(c)}`:``;return`${us(e)}?${Pe(s).slice(1)}${l}`}function us({config:e}){return e.emulator?er(e,ss):`https://${e.authDomain}/${os}`}var ds=`webStorageSupport`,fs=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Pa,this._completeRedirectFn=ko,this._overrideRedirectResult=Eo}async _openPopup(e,t,n,r){return qn(this.eventManagers[e._key()]?.manager,`_initialize() not called before _openPopup()`),is(e,await ls(e,t,n,Jn(),r),La())}async _openRedirect(e,t,n,r){return await this._originValidation(e),Ba(await ls(e,t,n,Jn(),r)),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(qn(n,`If manager is not set, promise should be`),n)}let n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){let t=await Zo(e),n=new jo(e);return t.register(`authEvent`,t=>(A(t?.authEvent,e,`invalid-auth-event`),{status:n.onEvent(t.authEvent)?`ACK`:`ERROR`}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ds,{type:ds},n=>{let r=n?.[0]?.[ds];r!==void 0&&t(!!r),Bn(e,`internal-error`)},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Ro(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return $r()||Wr()||Xr()}},ps=class{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case`enroll`:return this._finalizeEnroll(e,t.credential,n);case`signin`:return this._finalizeSignIn(e,t.credential);default:return Kn(`unexpected MultiFactorSessionType`)}}},ms=class e extends ps{constructor(e){super(`phone`),this.credential=e}static _fromCredential(t){return new e(t)}_finalizeEnroll(e,t,n){return ba(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return so(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},hs=class{constructor(){}static assertion(e){return ms._fromCredential(e)}};hs.FACTOR_ID=`phone`;var gs=class{static assertionForEnrollment(e,t){return _s._fromSecret(e,t)}static assertionForSignIn(e,t){return _s._fromEnrollmentId(e,t)}static async generateSecret(e){let t=e;A(t.user?.auth!==void 0,`internal-error`);let n=await xa(t.user.auth,{idToken:t.credential,totpEnrollmentInfo:{}});return vs._fromStartTotpMfaEnrollmentResponse(n,t.user.auth)}};gs.FACTOR_ID=`totp`;var _s=class e extends ps{constructor(e,t,n){super(`totp`),this.otp=e,this.enrollmentId=t,this.secret=n}static _fromSecret(t,n){return new e(n,void 0,t)}static _fromEnrollmentId(t,n){return new e(n,t)}async _finalizeEnroll(e,t,n){return A(this.secret!==void 0,e,`argument-error`),Sa(e,{idToken:t,displayName:n,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,t){A(this.enrollmentId!==void 0&&this.otp!==void 0,e,`argument-error`);let n={verificationCode:this.otp};return co(e,{mfaPendingCredential:t,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:n})}},vs=class e{constructor(e,t,n,r,i,a,o){this.sessionInfo=a,this.auth=o,this.secretKey=e,this.hashingAlgorithm=t,this.codeLength=n,this.codeIntervalSeconds=r,this.enrollmentCompletionDeadline=i}static _fromStartTotpMfaEnrollmentResponse(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,t){let n=!1;return(ys(e)||ys(t))&&(n=!0),n&&(ys(e)&&(e=this.auth.currentUser?.email||`unknownuser`),ys(t)&&(t=this.auth.name)),`otpauth://totp/${t}:${e}?secret=${this.secretKey}&issuer=${t}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}};function ys(e){return e===void 0||e?.length===0}var bs=`@firebase/auth`,xs=`1.12.0`,Ss=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(t=>{e(t?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){A(this.auth._initializationPromise,`dependent-sdk-initialized-before-auth`)}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Cs(e){switch(e){case`Node`:return`node`;case`ReactNative`:return`rn`;case`Worker`:return`webworker`;case`Cordova`:return`cordova`;case`WebExtension`:return`web-extension`;default:return}}function ws(e){sn(new He(`auth`,(t,{options:n})=>{let r=t.getProvider(`app`).getImmediate(),i=t.getProvider(`heartbeat`),a=t.getProvider(`app-check-internal`),{apiKey:o,authDomain:s}=r.options;A(o&&!o.includes(`:`),`invalid-api-key`,{appName:r.name});let c=new ai(r,i,a,{apiKey:o,authDomain:s,clientPlatform:e,apiHost:`identitytoolkit.googleapis.com`,tokenApiHost:`securetoken.googleapis.com`,apiScheme:`https`,sdkClientVersion:ei(e)});return Ci(c,n),c},`PUBLIC`).setInstantiationMode(`EXPLICIT`).setInstanceCreatedCallback((e,t,n)=>{e.getProvider(`auth-internal`).initialize()})),sn(new He(`auth-internal`,e=>(e=>new Ss(e))(oi(e.getProvider(`auth`).getImmediate())),`PRIVATE`).setInstantiationMode(`EXPLICIT`)),gn(bs,xs,Cs(e)),gn(bs,xs,`esm2020`)}var Ts=le(`authIdTokenMaxAge`)||300,Es=null,Ds=e=>async t=>{let n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Ts)return;let i=n?.token;Es!==i&&(Es=i,await fetch(e,{method:i?`POST`:`DELETE`,headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Os(e=mn()){let t=cn(e,`auth`);if(t.isInitialized())return t.getImmediate();let n=Si(e,{popupRedirectResolver:fs,persistence:[ao,Oa,Pa]}),r=le(`authTokenSyncURL`);if(r&&typeof isSecureContext==`boolean`&&isSecureContext){let e=new URL(r,location.origin);if(location.origin===e.origin){let t=Ds(e.toString());va(n,t,()=>t(n.currentUser)),_a(n,e=>t(e))}}let i=oe(`auth`);return i&&wi(n,`http://${i}`),n}function ks(){return document.getElementsByTagName(`head`)?.[0]??document}li({loadJS(e){return new Promise((t,n)=>{let r=document.createElement(`script`);r.setAttribute(`src`,e),r.onload=t,r.onerror=e=>{let t=Vn(`internal-error`);t.customData=e,n(t)},r.type=`text/javascript`,r.charset=`UTF-8`,ks().appendChild(r)})},gapiScript:`https://apis.google.com/js/api.js`,recaptchaV2Script:`https://www.google.com/recaptcha/api.js`,recaptchaEnterpriseScript:`https://www.google.com/recaptcha/enterprise.js?render=`}),ws(`Browser`),gn(`firebase`,`12.9.0`,`app`);var As=typeof globalThis<`u`?globalThis:typeof window<`u`?window:typeof global<`u`?global:typeof self<`u`?self:{},js={},Ms,Ns;(function(){var e;function t(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=[,,,,],this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(e,t,n){n||=0;let r=Array(16);if(typeof t==`string`)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let a=e.g[3],o;o=t+(a^n&(i^a))+r[0]+3614090360&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[1]+3905402710&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[2]+606105819&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[4]+4118548399&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[5]+1200080426&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[6]+2821735955&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[8]+1770035416&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[9]+2336552879&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[10]+4294925233&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[12]+1804603682&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[13]+4254626195&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[14]+2792965006&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(i^a&(n^i))+r[1]+4129170786&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[6]+3225465664&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[11]+643717713&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[5]+3593408605&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[10]+38016083&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[15]+3634488961&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[9]+568446438&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[14]+3275163606&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[3]+4107603335&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[13]+2850285829&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[2]+4243563512&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[7]+1735328473&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(n^i^a)+r[5]+4294588738&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[8]+2272392833&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[11]+1839030562&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[1]+2763975236&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[4]+1272893353&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[7]+4139469664&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[13]+681279174&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[0]+3936430074&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[3]+3572445317&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[9]+3654602809&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[12]+3873151461&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[15]+530742520&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(i^(n|~a))+r[0]+4096336452&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[7]+1126891415&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[14]+2878612391&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[12]+1700485571&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[3]+2399980690&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[10]+4293915773&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[8]+1873313359&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[15]+4264355552&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[6]+2734768916&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[4]+4149444226&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[11]+3174756917&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[2]+718787259&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}r.prototype.v=function(e,t){t===void 0&&(t=e.length);let n=t-this.blockSize,r=this.C,a=this.h,o=0;for(;o<t;){if(a==0)for(;o<=n;)i(this,e,o),o+=this.blockSize;if(typeof e==`string`){for(;o<t;)if(r[a++]=e.charCodeAt(o++),a==this.blockSize){i(this,r),a=0;break}}else for(;o<t;)if(r[a++]=e[o++],a==this.blockSize){i(this,r),a=0;break}}this.h=a,this.o+=t},r.prototype.A=function(){var e=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=this.o*8;for(var n=e.length-8;n<e.length;++n)e[n]=t&255,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};function a(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}function o(e,t){this.h=t;let n=[],r=!0;for(let i=e.length-1;i>=0;i--){let a=e[i]|0;r&&a==t||(n[i]=a,r=!1)}this.g=n}var s={};function c(e){return-128<=e&&e<128?a(e,function(e){return new o([e|0],e<0?-1:0)}):new o([e|0],e<0?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return d;if(e<0)return g(l(-e));let t=[],n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new o(t,0)}function u(e,t){if(e.length==0)throw Error(`number format error: empty string`);if(t||=10,t<2||36<t)throw Error(`radix out of range: `+t);if(e.charAt(0)==`-`)return g(u(e.substring(1),t));if(e.indexOf(`-`)>=0)throw Error(`number format error: interior "-" character`);let n=l(t**8),r=d;for(let a=0;a<e.length;a+=8){var i=Math.min(8,e.length-a);let o=parseInt(e.substring(a,a+i),t);i<8?(i=l(t**+i),r=r.j(i).add(l(o))):(r=r.j(n),r=r.add(l(o)))}return r}var d=c(0),f=c(1),p=c(16777216);e=o.prototype,e.m=function(){if(h(this))return-g(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){let r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(e||=10,e<2||36<e)throw Error(`radix out of range: `+e);if(m(this))return`0`;if(h(this))return`-`+g(this).toString(e);let t=l(e**6);var n=this;let r=``;for(;;){let i=b(n,t).g;n=_(n,i.j(t));let a=((n.g.length>0?n.g[0]:n.h)>>>0).toString(e);if(n=i,m(n))return a+r;for(;a.length<6;)a=`0`+a;r=a+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h};function m(e){if(e.h!=0)return!1;for(let t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function h(e){return e.h==-1}e.l=function(e){return e=_(this,e),h(e)?-1:m(e)?0:1};function g(e){let t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new o(n,~e.h).add(f)}e.abs=function(){return h(this)?g(this):this},e.add=function(e){let t=Math.max(this.g.length,e.g.length),n=[],r=0;for(let i=0;i<=t;i++){let t=r+(this.i(i)&65535)+(e.i(i)&65535),a=(t>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);r=a>>>16,t&=65535,a&=65535,n[i]=a<<16|t}return new o(n,n[n.length-1]&-2147483648?-1:0)};function _(e,t){return e.add(g(t))}e.j=function(e){if(m(this)||m(e))return d;if(h(this))return h(e)?g(this).j(g(e)):g(g(this).j(e));if(h(e))return g(this.j(g(e)));if(this.l(p)<0&&e.l(p)<0)return l(this.m()*e.m());let t=this.g.length+e.g.length,n=[];for(var r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(let t=0;t<e.g.length;t++){let i=this.i(r)>>>16,a=this.i(r)&65535,o=e.i(t)>>>16,s=e.i(t)&65535;n[2*r+2*t]+=a*s,v(n,2*r+2*t),n[2*r+2*t+1]+=i*s,v(n,2*r+2*t+1),n[2*r+2*t+1]+=a*o,v(n,2*r+2*t+1),n[2*r+2*t+2]+=i*o,v(n,2*r+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new o(n,0)};function v(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function y(e,t){this.g=e,this.h=t}function b(e,t){if(m(t))throw Error(`division by zero`);if(m(e))return new y(d,d);if(h(e))return t=b(g(e),t),new y(g(t.g),g(t.h));if(h(t))return t=b(e,g(t)),new y(g(t.g),t.h);if(e.g.length>30){if(h(e)||h(t))throw Error(`slowDivide_ only works with positive integers.`);for(var n=f,r=t;r.l(e)<=0;)n=x(n),r=x(r);var i=S(n,1),a=S(r,1);for(r=S(r,2),n=S(n,2);!m(r);){var o=a.add(r);o.l(e)<=0&&(i=i.add(n),a=o),r=S(r,1),n=S(n,1)}return t=_(e,i.j(t)),new y(i,t)}for(i=d;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=Math.ceil(Math.log(n)/Math.LN2),r=r<=48?1:2**(r-48),a=l(n),o=a.j(t);h(o)||o.l(e)>0;)n-=r,a=l(n),o=a.j(t);m(a)&&(a=f),i=i.add(a),e=_(e,o)}return new y(i,e)}e.B=function(e){return b(this,e).h},e.and=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new o(n,this.h&e.h)},e.or=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new o(n,this.h|e.h)},e.xor=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new o(n,this.h^e.h)};function x(e){let t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new o(n,e.h)}function S(e,t){let n=t>>5;t%=32;let r=e.g.length-n,i=[];for(let a=0;a<r;a++)i[a]=t>0?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new o(i,e.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Ns=js.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=u,Ms=js.Integer=o}).apply(As===void 0?typeof self<`u`?self:typeof window<`u`?window:{}:As);var Ps=typeof globalThis<`u`?globalThis:typeof window<`u`?window:typeof global<`u`?global:typeof self<`u`?self:{},Fs={},Is,Ls,Rs,zs,Bs,Vs,Hs,Us;(function(){var e,t=Object.defineProperty;function n(e){e=[typeof globalThis==`object`&&globalThis,e,typeof window==`object`&&window,typeof self==`object`&&self,typeof Ps==`object`&&Ps];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error(`Cannot find global object`)}var r=n(this);function i(e,n){if(n)a:{var i=r;e=e.split(`.`);for(var a=0;a<e.length-1;a++){var o=e[a];if(!(o in i))break a;i=i[o]}e=e[e.length-1],a=i[e],n=n(a),n!=a&&n!=null&&t(i,e,{configurable:!0,writable:!0,value:n})}}i(`Symbol.dispose`,function(e){return e||Symbol(`Symbol.dispose`)}),i(`Array.prototype.values`,function(e){return e||function(){return this[Symbol.iterator]()}}),i(`Object.entries`,function(e){return e||function(e){var t=[],n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push([n,e[n]]);return t}});var a=a||{},o=this||self;function s(e){var t=typeof e;return t==`object`&&e!=null||t==`function`}function c(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return l=c,l.apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}var f=typeof AsyncContext<`u`&&typeof AsyncContext.Snapshot==`function`?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function p(e){let t=e.length;if(t>0){let n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function m(e,t){for(let t=1;t<arguments.length;t++){let r=arguments[t];var n=typeof r;if(n=n==`object`?r?Array.isArray(r)?`array`:n:`null`:n,n==`array`||n==`object`&&typeof r.length==`number`){n=e.length||0;let t=r.length||0;e.length=n+t;for(let i=0;i<t;i++)e[n+i]=r[i]}else e.push(r)}}class h{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function g(e){o.setTimeout(()=>{throw e},0)}function _(){var e=C;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class v{constructor(){this.h=this.g=null}add(e,t){let n=y.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}var y=new h(()=>new b,e=>e.reset());class b{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let x,S=!1,C=new v,w=()=>{let e=Promise.resolve(void 0);x=()=>{e.then(ee)}};function ee(){for(var e;e=_();){try{e.h.call(e.g)}catch(e){g(e)}var t=y;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}S=!1}function te(){this.u=this.u,this.C=this.C}te.prototype.u=!1,te.prototype.dispose=function(){this.u||(this.u=!0,this.N())},te.prototype[Symbol.dispose]=function(){this.dispose()},te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ne(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}ne.prototype.h=function(){this.defaultPrevented=!0};var re=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},`passive`,{get:function(){e=!0}});try{let e=()=>{};o.addEventListener(`test`,e,t),o.removeEventListener(`test`,e,t)}catch{}return e}();function ie(e){return/^[\s\xa0]*$/.test(e)}function ae(e,t){ne.call(this,e?e.type:``),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key=``,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType=``,this.i=null,e&&this.init(e,t)}d(ae,ne),ae.prototype.init=function(e,t){let n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget,t||(n==`mouseover`?t=e.fromElement:n==`mouseout`&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=r.clientX===void 0?r.pageX:r.clientX,this.clientY=r.clientY===void 0?r.pageY:r.clientY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX===void 0?e.pageX:e.clientX,this.clientY=e.clientY===void 0?e.pageY:e.clientY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||``,this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&ae.Z.h.call(this)},ae.prototype.h=function(){ae.Z.h.call(this);let e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var oe=`closure_listenable_`+(Math.random()*1e6|0),se=0;function ce(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++se,this.da=this.fa=!1}function le(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function ue(e,t,n){for(let r in e)t.call(n,e[r],r,e)}function T(e,t){for(let n in e)t.call(void 0,e[n],n,e)}function E(e){let t={};for(let n in e)t[n]=e[n];return t}let de=`constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf`.split(` `);function fe(e,t){let n,r;for(let t=1;t<arguments.length;t++){for(n in r=arguments[t],r)e[n]=r[n];for(let t=0;t<de.length;t++)n=de[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function pe(e){this.src=e,this.g={},this.h=0}pe.prototype.add=function(e,t,n,r,i){let a=e.toString();e=this.g[a],e||(e=this.g[a]=[],this.h++);let o=he(e,t,r,i);return o>-1?(t=e[o],n||(t.fa=!1)):(t=new ce(t,this.src,a,!!r,i),t.fa=n,e.push(t)),t};function me(e,t){let n=t.type;if(n in e.g){var r=e.g[n],i=Array.prototype.indexOf.call(r,t,void 0),a;(a=i>=0)&&Array.prototype.splice.call(r,i,1),a&&(le(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function he(e,t,n,r){for(let i=0;i<e.length;++i){let a=e[i];if(!a.da&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}var D=`closure_lm_`+(Math.random()*1e6|0),ge={};function _e(e,t,n,r,i){if(r&&r.once)return be(e,t,n,r,i);if(Array.isArray(t)){for(let a=0;a<t.length;a++)_e(e,t[a],n,r,i);return null}return n=De(n),e&&e[oe]?e.J(t,n,s(r)?!!r.capture:!!r,i):ve(e,t,n,!1,r,i)}function ve(e,t,n,r,i,a){if(!t)throw Error(`Invalid event type`);let o=s(i)?!!i.capture:!!i,c=Te(e);if(c||(e[D]=c=new pe(e)),n=c.add(t,n,r,o,a),n.proxy)return n;if(r=ye(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)re||(i=o),i===void 0&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Ce(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error(`addEventListener and attachEvent are unavailable.`);return n}function ye(){function e(n){return t.call(e.src,e.listener,n)}let t=we;return e}function be(e,t,n,r,i){if(Array.isArray(t)){for(let a=0;a<t.length;a++)be(e,t[a],n,r,i);return null}return n=De(n),e&&e[oe]?e.K(t,n,s(r)?!!r.capture:!!r,i):ve(e,t,n,!0,r,i)}function xe(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)xe(e,t[a],n,r,i);else r=s(r)?!!r.capture:!!r,n=De(n),e&&e[oe]?(e=e.i,a=String(t).toString(),a in e.g&&(t=e.g[a],n=he(t,n,r,i),n>-1&&(le(t[n]),Array.prototype.splice.call(t,n,1),t.length==0&&(delete e.g[a],e.h--)))):(e&&=Te(e))&&(t=e.g[t.toString()],e=-1,t&&(e=he(t,n,r,i)),(n=e>-1?t[e]:null)&&Se(n))}function Se(e){if(typeof e!=`number`&&e&&!e.da){var t=e.src;if(t&&t[oe])me(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Ce(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Te(t))?(me(n,e),n.h==0&&(n.src=null,t[D]=null)):le(e)}}}function Ce(e){return e in ge?ge[e]:ge[e]=`on`+e}function we(e,t){if(e.da)e=!0;else{t=new ae(t,this);let n=e.listener,r=e.ha||e.src;e.fa&&Se(e),e=n.call(r,t)}return e}function Te(e){return e=e[D],e instanceof pe?e:null}var Ee=`__closure_events_fn_`+(Math.random()*1e9>>>0);function De(e){return typeof e==`function`?e:(e[Ee]||(e[Ee]=function(t){return e.handleEvent(t)}),e[Ee])}function Oe(){te.call(this),this.i=new pe(this),this.M=this,this.G=null}d(Oe,te),Oe.prototype[oe]=!0,Oe.prototype.removeEventListener=function(e,t,n,r){xe(this,e,t,n,r)};function ke(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,typeof t==`string`)t=new ne(t,e);else if(t instanceof ne)t.target=t.target||e;else{var i=t;t=new ne(r,e),fe(t,i)}i=!0;let a,o;if(n)for(o=n.length-1;o>=0;o--)a=t.g=n[o],i=Ae(a,r,!0,t)&&i;if(a=t.g=e,i=Ae(a,r,!0,t)&&i,i=Ae(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)a=t.g=n[o],i=Ae(a,r,!1,t)&&i}Oe.prototype.N=function(){if(Oe.Z.N.call(this),this.i){var e=this.i;for(let t in e.g){let n=e.g[t];for(let e=0;e<n.length;e++)le(n[e]);delete e.g[t],e.h--}}this.G=null},Oe.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Oe.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function Ae(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();let i=!0;for(let a=0;a<t.length;++a){let o=t[a];if(o&&!o.da&&o.capture==n){let t=o.listener,n=o.ha||o.src;o.fa&&me(e.i,o),i=t.call(n,r)!==!1&&i}}return i&&!r.defaultPrevented}function je(e,t){if(typeof e!=`function`)if(e&&typeof e.handleEvent==`function`)e=l(e.handleEvent,e);else throw Error(`Invalid listener argument`);return Number(t)>2147483647?-1:o.setTimeout(e,t||0)}function Me(e){e.g=je(()=>{e.g=null,e.i&&(e.i=!1,Me(e))},e.l);let t=e.h;e.h=null,e.m.apply(null,t)}class Ne extends te{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:Me(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pe(e){te.call(this),this.h=e,this.g={}}d(Pe,te);var Fe=[];function Ie(e){ue(e.g,function(e,t){this.g.hasOwnProperty(t)&&Se(e)},e),e.g={}}Pe.prototype.N=function(){Pe.Z.N.call(this),Ie(this)},Pe.prototype.handleEvent=function(){throw Error(`EventHandler.handleEvent not implemented`)};var Le=o.JSON.stringify,Re=o.JSON.parse,ze=class{stringify(e){return o.JSON.stringify(e,void 0)}parse(e){return o.JSON.parse(e,void 0)}};function Be(){}function Ve(){}var He={OPEN:`a`,hb:`b`,ERROR:`c`,tb:`d`};function Ue(){ne.call(this,`d`)}d(Ue,ne);function We(){ne.call(this,`c`)}d(We,ne);var Ge={},Ke=null;function qe(){return Ke||=new Oe}Ge.Ia=`serverreachability`;function Je(e){ne.call(this,Ge.Ia,e)}d(Je,ne);function O(e){let t=qe();ke(t,new Je(t))}Ge.STAT_EVENT=`statevent`;function Ye(e,t){ne.call(this,Ge.STAT_EVENT,e),this.stat=t}d(Ye,ne);function Xe(e){let t=qe();ke(t,new Ye(t,e))}Ge.Ja=`timingevent`;function Ze(e,t){ne.call(this,Ge.Ja,e),this.size=t}d(Ze,ne);function Qe(e,t){if(typeof e!=`function`)throw Error(`Fn must not be null and must be a function`);return o.setTimeout(function(){e()},t)}function $e(){this.g=!0}$e.prototype.ua=function(){this.g=!1};function et(e,t,n,r,i,a){e.info(function(){if(e.g)if(a){var o=``,s=a.split(`&`);for(let e=0;e<s.length;e++){var c=s[e].split(`=`);if(c.length>1){let e=c[0];c=c[1];let t=e.split(`_`);o=t.length>=2&&t[1]==`type`?o+(e+`=`+c+`&`):o+(e+`=redacted&`)}}}else o=null;else o=a;return`XMLHTTP REQ (`+r+`) [attempt `+i+`]: `+t+`
`+n+`
`+o})}function tt(e,t,n,r,i,a,o){e.info(function(){return`XMLHTTP RESP (`+r+`) [ attempt `+i+`]: `+t+`
`+n+`
`+a+` `+o})}function nt(e,t,n,r){e.info(function(){return`XMLHTTP TEXT (`+t+`): `+it(e,n)+(r?` `+r:``)})}function rt(e,t){e.info(function(){return`TIMEOUT: `+t})}$e.prototype.info=function(){};function it(e,t){if(!e.g)return t;if(!t)return null;try{let a=JSON.parse(t);if(a){for(e=0;e<a.length;e++)if(Array.isArray(a[e])){var n=a[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if(i!=`noop`&&i!=`stop`&&i!=`close`)for(let e=1;e<r.length;e++)r[e]=``}}}}return Le(a)}catch{return t}}var at={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ot={ib:`complete`,Fb:`success`,ERROR:`error`,Ga:`abort`,xb:`ready`,yb:`readystatechange`,TIMEOUT:`timeout`,sb:`incrementaldata`,wb:`progress`,lb:`downloadprogress`,Nb:`uploadprogress`},st;function ct(){}d(ct,Be),ct.prototype.g=function(){return new XMLHttpRequest},st=new ct;function lt(e){return encodeURIComponent(String(e))}function ut(e){var t=1;e=e.split(`:`);let n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(`:`)),n}function dt(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new Pe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ft}function ft(){this.i=null,this.g=``,this.h=!1}var pt={},mt={};function ht(e,t,n){e.M=1,e.A=Vt(Lt(t)),e.u=n,e.R=!0,gt(e,null)}function gt(e,t){e.F=Date.now(),bt(e),e.B=Lt(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),tn(n.i,`t`,r),e.C=0,n=e.j.L,e.h=new ft,e.g=Kn(e.j,n?t:null,!e.u),e.P>0&&(e.O=new Ne(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i=`readystatechange`;Array.isArray(i)||(i&&(Fe[0]=i.toString()),i=Fe);for(let e=0;e<i.length;e++){let a=_e(n,i[e],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.J?E(e.J):{},e.u?(e.v||=`POST`,t[`Content-Type`]=`application/x-www-form-urlencoded`,e.g.ea(e.B,e.v,e.u,t)):(e.v=`GET`,e.g.ea(e.B,e.v,null,t)),O(),et(e.i,e.v,e.B,e.l,e.S,e.u)}dt.prototype.ba=function(e){e=e.target;let t=this.O;t&&wn(e)==3?t.j():this.Y(e)},dt.prototype.Y=function(e){try{if(e==this.g)a:{let s=wn(this.g),c=this.g.ya(),l=this.g.ca();if(!(s<3)&&(s!=3||this.g&&(this.h.h||this.g.la()||Tn(this.g)))){this.K||s!=4||c==7||O(c==8||l<=0?3:2),St(this);var t=this.g.ca();this.X=t;var n=_t(this);if(this.o=t==200,tt(this.i,this.v,this.B,this.l,this.S,s,t),this.o){if(this.U&&!this.L){b:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader(`X-HTTP-Initial-Response`):null)&&!ie(r)){var a=r;break b}}a=null}if(e=a)nt(this.i,this.l,e,`Initial handshake response via X-HTTP-Initial-Response`),this.L=!0,Tt(this,e);else{this.o=!1,this.m=3,Xe(12),wt(this),Ct(this);break a}}if(this.R){e=!0;let t;for(;!this.K&&this.C<n.length;)if(t=yt(this,n),t==mt){s==4&&(this.m=4,Xe(14),e=!1),nt(this.i,this.l,null,`[Incomplete Response]`);break}else if(t==pt){this.m=4,Xe(15),nt(this.i,this.l,n,`[Invalid Chunk]`),e=!1;break}else nt(this.i,this.l,t,null),Tt(this,t);if(vt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),s!=4||n.length!=0||this.h.h||(this.m=1,Xe(16),e=!1),this.o=this.o&&e,!e)nt(this.i,this.l,n,`[Invalid Chunked Response]`),wt(this),Ct(this);else if(n.length>0&&!this.W){this.W=!0;var o=this.j;o.g==this&&o.aa&&!o.P&&(o.j.info(`Great, no buffering proxy detected. Bytes received: `+n.length),zn(o),o.P=!0,Xe(11))}}else nt(this.i,this.l,n,null),Tt(this,n);s==4&&wt(this),this.o&&!this.K&&(s==4?Hn(this.j,this):(this.o=!1,bt(this)))}else En(this.g),t==400&&n.indexOf(`Unknown SID`)>0?(this.m=3,Xe(12)):(this.m=0,Xe(13)),wt(this),Ct(this)}}}catch{}};function _t(e){if(!vt(e))return e.g.la();let t=Tn(e.g);if(t===``)return``;let n=``,r=t.length,i=wn(e.g)==4;if(!e.h.i){if(typeof TextDecoder>`u`)return wt(e),Ct(e),``;e.h.i=new o.TextDecoder}for(let a=0;a<r;a++)e.h.h=!0,n+=e.h.i.decode(t[a],{stream:!(i&&a==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}function vt(e){return e.g?e.v==`GET`&&e.M!=2&&e.j.Aa:!1}function yt(e,t){var n=e.C,r=t.indexOf(`
`,n);return r==-1?mt:(n=Number(t.substring(n,r)),isNaN(n)?pt:(r+=1,r+n>t.length?mt:(t=t.slice(r,r+n),e.C=r+n,t)))}dt.prototype.cancel=function(){this.K=!0,wt(this)};function bt(e){e.T=Date.now()+e.H,xt(e,e.H)}function xt(e,t){if(e.D!=null)throw Error(`WatchDog timer not null`);e.D=Qe(l(e.aa,e),t)}function St(e){e.D&&=(o.clearTimeout(e.D),null)}dt.prototype.aa=function(){this.D=null;let e=Date.now();e-this.T>=0?(rt(this.i,this.B),this.M!=2&&(O(),Xe(17)),wt(this),this.m=2,Ct(this)):xt(this,this.T-e)};function Ct(e){e.j.I==0||e.K||Hn(e.j,e)}function wt(e){St(e);var t=e.O;t&&typeof t.dispose==`function`&&t.dispose(),e.O=null,Ie(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function Tt(e,t){try{var n=e.j;if(n.I!=0&&(n.g==e||At(n.h,e))){if(!e.L&&At(n.h,e)&&n.I==3){try{var r=n.Ba.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){a:if(!n.v){if(n.g)if(n.g.F+3e3<e.F)Vn(n),An(n);else break a;Rn(n),Xe(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&n.A==0&&!n.C&&(n.C=Qe(l(n.Va,n),6e3));kt(n.h)<=1&&n.ta&&(n.ta=void 0)}else Wn(n,11)}else if((e.L||n.g==e)&&Vn(n),!ie(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t],u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],n.I==2)if(l[0]==`c`){n.M=l[1],n.ba=l[2];let t=l[3];t!=null&&(n.ka=t,n.j.info(`VER=`+n.ka));let i=l[4];i!=null&&(n.za=i,n.j.info(`SVER=`+n.za));let u=l[5];u!=null&&typeof u==`number`&&u>0&&(r=1.5*u,n.O=r,n.j.info(`backChannelRequestTimeoutMs_=`+r)),r=n;let d=e.g;if(d){let e=d.g?d.g.getResponseHeader(`X-Client-Wire-Protocol`):null;if(e){var a=r.h;a.g||e.indexOf(`spdy`)==-1&&e.indexOf(`quic`)==-1&&e.indexOf(`h2`)==-1||(a.j=a.l,a.g=new Set,a.h&&=(jt(a,a.h),null))}if(r.G){let e=d.g?d.g.getResponseHeader(`X-HTTP-Session-Id`):null;e&&(r.wa=e,k(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info(`Handshake RTT: `+n.T+`ms`)),r=n;var o=e;if(r.na=A(r,r.L?r.ba:null,r.W),o.L){Mt(r.h,o);var s=o,c=r.O;c&&(s.H=c),s.D&&(St(s),bt(s)),r.g=o}else Ln(r);n.i.length>0&&Mn(n)}else l[0]!=`stop`&&l[0]!=`close`||Wn(n,7);else n.I==3&&(l[0]==`stop`||l[0]==`close`?l[0]==`stop`?Wn(n,7):kn(n):l[0]!=`noop`&&n.l&&n.l.qa(l),n.A=0)}}O(4)}catch{}}var Et=class{constructor(e,t){this.g=e,this.map=t}};function Dt(e){this.l=e||10,o.PerformanceNavigationTiming?(e=o.performance.getEntriesByType(`navigation`),e=e.length>0&&(e[0].nextHopProtocol==`hq`||e[0].nextHopProtocol==`h2`)):e=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ot(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function kt(e){return e.h?1:e.g?e.g.size:0}function At(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function jt(e,t){e.g?e.g.add(t):e.h=t}function Mt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}Dt.prototype.cancel=function(){if(this.i=Nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let e of this.g.values())e.cancel();this.g.clear()}};function Nt(e){if(e.h!=null)return e.i.concat(e.h.G);if(e.g!=null&&e.g.size!==0){let t=e.i;for(let n of e.g.values())t=t.concat(n.G);return t}return p(e.i)}var Pt=RegExp(`^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$`);function Ft(e,t){if(e){e=e.split(`&`);for(let n=0;n<e.length;n++){let r=e[n].indexOf(`=`),i,a=null;r>=0?(i=e[n].substring(0,r),a=e[n].substring(r+1)):i=e[n],t(i,a?decodeURIComponent(a.replace(/\+/g,` `)):``)}}}function It(e){this.g=this.o=this.j=``,this.u=null,this.m=this.h=``,this.l=!1;let t;e instanceof It?(this.l=e.l,Rt(this,e.j),this.o=e.o,this.g=e.g,zt(this,e.u),this.h=e.h,Bt(this,nn(e.i)),this.m=e.m):e&&(t=String(e).match(Pt))?(this.l=!1,Rt(this,t[1]||``,!0),this.o=Ht(t[2]||``),this.g=Ht(t[3]||``,!0),zt(this,t[4]),this.h=Ht(t[5]||``,!0),Bt(this,t[6]||``,!0),this.m=Ht(t[7]||``)):(this.l=!1,this.i=new Xt(null,this.l))}It.prototype.toString=function(){let e=[];var t=this.j;t&&e.push(Ut(t,Gt,!0),`:`);var n=this.g;return(n||t==`file`)&&(e.push(`//`),(t=this.o)&&e.push(Ut(t,Gt,!0),`@`),e.push(lt(n).replace(/%25([0-9a-fA-F]{2})/g,`%$1`)),n=this.u,n!=null&&e.push(`:`,String(n))),(n=this.h)&&(this.g&&n.charAt(0)!=`/`&&e.push(`/`),e.push(Ut(n,n.charAt(0)==`/`?qt:Kt,!0))),(n=this.i.toString())&&e.push(`?`,n),(n=this.m)&&e.push(`#`,Ut(n,Yt)),e.join(``)},It.prototype.resolve=function(e){let t=Lt(this),n=!!e.j;n?Rt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=e.u!=null;var r=e.h;if(n)zt(t,e.u);else if(n=!!e.h){if(r.charAt(0)!=`/`)if(this.g&&!this.h)r=`/`+r;else{var i=t.h.lastIndexOf(`/`);i!=-1&&(r=t.h.slice(0,i+1)+r)}if(i=r,i==`..`||i==`.`)r=``;else if(i.indexOf(`./`)!=-1||i.indexOf(`/.`)!=-1){r=i.lastIndexOf(`/`,0)==0,i=i.split(`/`);let e=[];for(let t=0;t<i.length;){let n=i[t++];n==`.`?r&&t==i.length&&e.push(``):n==`..`?((e.length>1||e.length==1&&e[0]!=``)&&e.pop(),r&&t==i.length&&e.push(``)):(e.push(n),r=!0)}r=e.join(`/`)}else r=i}return n?t.h=r:n=e.i.toString()!==``,n?Bt(t,nn(e.i)):n=!!e.m,n&&(t.m=e.m),t};function Lt(e){return new It(e)}function Rt(e,t,n){e.j=n?Ht(t,!0):t,e.j&&=e.j.replace(/:$/,``)}function zt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error(`Bad port number `+t);e.u=t}else e.u=null}function Bt(e,t,n){t instanceof Xt?(e.i=t,an(e.i,e.l)):(n||(t=Ut(t,Jt)),e.i=new Xt(t,e.l))}function k(e,t,n){e.i.set(t,n)}function Vt(e){return k(e,`zx`,Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),e}function Ht(e,t){return e?t?decodeURI(e.replace(/%25/g,`%2525`)):decodeURIComponent(e):``}function Ut(e,t,n){return typeof e==`string`?(e=encodeURI(e).replace(t,Wt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,`%$1`)),e):null}function Wt(e){return e=e.charCodeAt(0),`%`+(e>>4&15).toString(16)+(e&15).toString(16)}var Gt=/[#\/\?@]/g,Kt=/[#\?:]/g,qt=/[#\?]/g,Jt=/[#\?@]/g,Yt=/#/g;function Xt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Zt(e){e.g||(e.g=new Map,e.h=0,e.i&&Ft(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g,` `)),n)}))}e=Xt.prototype,e.add=function(e,t){Zt(this),this.i=null,e=rn(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function Qt(e,t){Zt(e),t=rn(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function $t(e,t){return Zt(e),t=rn(e,t),e.g.has(t)}e.forEach=function(e,t){Zt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)};function en(e,t){Zt(e);let n=[];if(typeof t==`string`)$t(e,t)&&(n=n.concat(e.g.get(rn(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}e.set=function(e,t){return Zt(this),this.i=null,e=rn(this,e),$t(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e?(e=en(this,e),e.length>0?String(e[0]):t):t};function tn(e,t,n){Qt(e,t),n.length>0&&(e.i=null,e.g.set(rn(e,t),p(n)),e.h+=n.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return``;let e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];let i=lt(n);n=en(this,n);for(let t=0;t<n.length;t++){let r=i;n[t]!==``&&(r+=`=`+lt(n[t])),e.push(r)}}return this.i=e.join(`&`)};function nn(e){let t=new Xt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function rn(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function an(e,t){t&&!e.j&&(Zt(e),e.i=null,e.g.forEach(function(e,t){let n=t.toLowerCase();t!=n&&(Qt(this,t),tn(this,n,e))},e)),e.j=t}function on(e,t){let n=new $e;if(o.Image){let r=new Image;r.onload=u(cn,n,`TestLoadImage: loaded`,!0,t,r),r.onerror=u(cn,n,`TestLoadImage: error`,!1,t,r),r.onabort=u(cn,n,`TestLoadImage: abort`,!1,t,r),r.ontimeout=u(cn,n,`TestLoadImage: timeout`,!1,t,r),o.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function sn(e,t){let n=new $e,r=new AbortController,i=setTimeout(()=>{r.abort(),cn(n,`TestPingServer: timeout`,!1,t)},1e4);fetch(e,{signal:r.signal}).then(e=>{clearTimeout(i),e.ok?cn(n,`TestPingServer: ok`,!0,t):cn(n,`TestPingServer: server error`,!1,t)}).catch(()=>{clearTimeout(i),cn(n,`TestPingServer: error`,!1,t)})}function cn(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch{}}function ln(){this.g=new ze}function un(e){this.i=e.Sb||null,this.h=e.ab||!1}d(un,Be),un.prototype.g=function(){return new dn(this.i,this.h)};function dn(e,t){Oe.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText=``,this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F=`GET`,this.D=``,this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(dn,Oe),e=dn.prototype,e.open=function(e,t){if(this.readyState!=0)throw this.abort(),Error(`Error reopening a connection`);this.F=e,this.D=t,this.readyState=1,mn(this)},e.send=function(e){if(this.readyState!=1)throw this.abort(),Error(`need to call open() first. `);if(this.v.signal.aborted)throw this.abort(),Error(`Request was aborted.`);this.g=!0;let t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||o).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText=``,this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel(`Request was aborted.`).catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,pn(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,mn(this)),this.g&&(this.readyState=3,mn(this),this.g)))if(this.responseType===`arraybuffer`)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(o.ReadableStream!==void 0&&`body`in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error(`responseType must be empty for "streamBinaryChunks" mode responses.`);this.response=[]}else this.response=this.responseText=``,this.B=new TextDecoder;fn(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))};function fn(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array;(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?pn(this):mn(this),this.readyState==3&&fn(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,pn(this))},e.Na=function(e){this.g&&(this.response=e,pn(this))},e.ga=function(){this.g&&pn(this)};function pn(e){e.readyState=4,e.l=null,e.j=null,e.B=null,mn(e)}e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||``},e.getAllResponseHeaders=function(){if(!this.h)return``;let e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+`: `+n[1]),n=t.next();return e.join(`\r
`)};function mn(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(dn.prototype,`withCredentials`,{get:function(){return this.m===`include`},set:function(e){this.m=e?`include`:`same-origin`}});function hn(e){let t=``;return ue(e,function(e,n){t+=n,t+=`:`,t+=e,t+=`\r
`}),t}function gn(e,t,n){a:{for(r in n){var r=!1;break a}r=!0}r||(n=hn(n),typeof e==`string`||k(e,t,n))}function _n(e){Oe.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D=``,this.o=0,this.l=``,this.j=this.B=this.v=this.A=!1,this.m=null,this.F=``,this.H=!1}d(_n,Oe);var vn=/^https?$/i,yn=[`POST`,`PUT`];e=_n.prototype,e.Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error(`[goog.net.XhrIo] Object is active with another request=`+this.D+`; newUri=`+e);t=t?t.toUpperCase():`GET`,this.D=e,this.l=``,this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():st.g(),this.g.onreadystatechange=f(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(e){bn(this,e);return}if(e=n||``,n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys==`function`&&typeof r.get==`function`)for(let e of r.keys())n.set(e,r.get(e));else throw Error(`Unknown input type for opt_headers: `+String(r));r=Array.from(n.keys()).find(e=>e.toLowerCase()==`content-type`),i=o.FormData&&e instanceof o.FormData,!(Array.prototype.indexOf.call(yn,t,void 0)>=0)||r||i||n.set(`Content-Type`,`application/x-www-form-urlencoded;charset=utf-8`);for(let[e,t]of n)this.g.setRequestHeader(e,t);this.F&&(this.g.responseType=this.F),`withCredentials`in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&=(clearTimeout(this.m),null),this.v=!0,this.g.send(e),this.v=!1}catch(e){bn(this,e)}};function bn(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,xn(e),Cn(e)}function xn(e){e.A||(e.A=!0,ke(e,`complete`),ke(e,`error`))}e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,ke(this,`complete`),ke(this,`abort`),Cn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Cn(this,!0)),_n.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Sn(this):this.Xa())},e.Xa=function(){Sn(this)};function Sn(e){if(e.h&&a!==void 0){if(e.v&&wn(e)==4)setTimeout(e.Ca.bind(e),0);else if(ke(e,`readystatechange`),wn(e)==4){e.h=!1;try{let a=e.ca();a:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break a;default:t=!1}var n;if(!(n=t)){var r;if(r=a===0){let t=String(e.D).match(Pt)[1]||null;!t&&o.self&&o.self.location&&(t=o.self.location.protocol.slice(0,-1)),r=!vn.test(t?t.toLowerCase():``)}n=r}if(n)ke(e,`complete`),ke(e,`success`);else{e.o=6;try{var i=wn(e)>2?e.g.statusText:``}catch{i=``}e.l=i+` [`+e.ca()+`]`,xn(e)}}finally{Cn(e)}}}}function Cn(e,t){if(e.g){e.m&&=(clearTimeout(e.m),null);let n=e.g;e.g=null,t||ke(e,`ready`);try{n.onreadystatechange=null}catch{}}}e.isActive=function(){return!!this.g};function wn(e){return e.g?e.g.readyState:0}e.ca=function(){try{return wn(this)>2?this.g.status:-1}catch{return-1}},e.la=function(){try{return this.g?this.g.responseText:``}catch{return``}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),Re(t)}};function Tn(e){try{if(!e.g)return null;if(`response`in e.g)return e.g.response;switch(e.F){case``:case`text`:return e.g.responseText;case`arraybuffer`:if(`mozResponseArrayBuffer`in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function En(e){let t={};e=(e.g&&wn(e)>=2&&e.g.getAllResponseHeaders()||``).split(`\r
`);for(let r=0;r<e.length;r++){if(ie(e[r]))continue;var n=ut(e[r]);let i=n[0];if(n=n[1],typeof n!=`string`)continue;n=n.trim();let a=t[i]||[];t[i]=a,a.push(n)}T(t,function(e){return e.join(`, `)})}e.ya=function(){return this.o},e.Ha=function(){return typeof this.l==`string`?this.l:String(this.l)};function Dn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function On(e){this.za=0,this.i=[],this.j=new $e,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Dn(`failFast`,!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Dn(`baseRetryDelayMs`,5e3,e),this.Za=Dn(`retryDelaySeedMs`,1e4,e),this.Ta=Dn(`forwardChannelMaxRetries`,2,e),this.va=Dn(`forwardChannelRequestTimeoutMs`,2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M=``,this.h=new Dt(e&&e.concurrentRequestLimit),this.Ba=new ln,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}e=On.prototype,e.ka=8,e.I=1,e.connect=function(e,t,n,r){Xe(0),this.W=e,this.H=t||{},n&&r!==void 0&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=A(this,null,this.W),Mn(this)};function kn(e){if(jn(e),e.I==3){var t=e.V++,n=Lt(e.J);if(k(n,`SID`,e.M),k(n,`RID`,t),k(n,`TYPE`,`terminate`),Fn(e,n),t=new dt(e,e.j,t),t.M=2,t.A=Vt(Lt(n)),n=!1,o.navigator&&o.navigator.sendBeacon)try{n=o.navigator.sendBeacon(t.A.toString(),``)}catch{}!n&&o.Image&&(new Image().src=t.A,n=!0),n||(t.g=Kn(t.j,null),t.g.ea(t.A)),t.F=Date.now(),bt(t)}Gn(e)}function An(e){e.g&&=(zn(e),e.g.cancel(),null)}function jn(e){An(e),e.v&&=(o.clearTimeout(e.v),null),Vn(e),e.h.cancel(),e.m&&=(typeof e.m==`number`&&o.clearTimeout(e.m),null)}function Mn(e){if(!Ot(e.h)&&!e.m){e.m=!0;var t=e.Ea;x||w(),S||=(x(),!0),C.add(t,e),e.D=0}}function Nn(e,t){return kt(e.h)>=e.h.j-(e.m?1:0)?!1:e.m?(e.i=t.G.concat(e.i),!0):e.I==1||e.I==2||e.D>=(e.Sa?0:e.Ta)?!1:(e.m=Qe(l(e.Ea,e,t),Un(e,e.D)),e.D++,!0)}e.Ea=function(e){if(this.m)if(this.m=null,this.I==1){if(!e){this.V=Math.floor(Math.random()*1e5),e=this.V++;let i=new dt(this,this.j,e),a=this.o;if(this.U&&(a?(a=E(a),fe(a,this.U)):a=this.U),this.u!==null||this.R||(i.J=a,a=null),this.S)a:{for(var t=0,n=0;n<this.i.length;n++){b:{var r=this.i[n];if(`__data__`in r.map&&(r=r.map.__data__,typeof r==`string`)){r=r.length;break b}r=void 0}if(r===void 0)break;if(t+=r,t>4096){t=n;break a}if(t===4096||n===this.i.length-1){t=n+1;break a}}t=1e3}else t=1e3;t=In(this,i,t),n=Lt(this.J),k(n,`RID`,e),k(n,`CVER`,22),this.G&&k(n,`X-HTTP-Session-Id`,this.G),Fn(this,n),a&&(this.R?t=`headers=`+lt(hn(a))+`&`+t:this.u&&gn(n,this.u,a)),jt(this.h,i),this.Ra&&k(n,`TYPE`,`init`),this.S?(k(n,`$req`,t),k(n,`SID`,`null`),i.U=!0,ht(i,n,null)):ht(i,n,t),this.I=2}}else this.I==3&&(e?Pn(this,e):this.i.length==0||Ot(this.h)||Pn(this))};function Pn(e,t){var n=t?t.l:e.V++;let r=Lt(e.J);k(r,`SID`,e.M),k(r,`RID`,n),k(r,`AID`,e.K),Fn(e,r),e.u&&e.o&&gn(r,e.u,e.o),n=new dt(e,e.j,n,e.D+1),e.u===null&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=In(e,n,1e3),n.H=Math.round(e.va*.5)+Math.round(e.va*.5*Math.random()),jt(e.h,n),ht(n,r,t)}function Fn(e,t){e.H&&ue(e.H,function(e,n){k(t,n,e)}),e.l&&ue({},function(e,n){k(t,n,e)})}function In(e,t,n){n=Math.min(e.i.length,n);let r=e.l?l(e.l.Ka,e.l,e):null;a:{var i=e.i;let t=-1;for(;;){let e=[`count=`+n];t==-1?n>0?(t=i[0].g,e.push(`ofs=`+t)):t=0:e.push(`ofs=`+t);let c=!0;for(let l=0;l<n;l++){var a=i[l].g;let n=i[l].map;if(a-=t,a<0)t=Math.max(0,i[l].g-100),c=!1;else try{a=`req`+a+`_`||``;try{var o=n instanceof Map?n:Object.entries(n);for(let[t,n]of o){let r=n;s(n)&&(r=Le(n)),e.push(a+t+`=`+encodeURIComponent(r))}}catch(t){throw e.push(a+`type=_badmap`),t}}catch{r&&r(n)}}if(c){o=e.join(`&`);break a}}o=void 0}return e=e.i.splice(0,n),t.G=e,o}function Ln(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;x||w(),S||=(x(),!0),C.add(t,e),e.A=0}}function Rn(e){return e.g||e.v||e.A>=3?!1:(e.Y++,e.v=Qe(l(e.Da,e),Un(e,e.A)),e.A++,!0)}e.Da=function(){if(this.v=null,Bn(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var e=4*this.T;this.j.info(`BP detection timer enabled: `+e),this.B=Qe(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info(`BP detection timeout reached.`),this.j.info(`Buffering proxy detected and switch to long-polling!`),this.F=!1,this.P=!0,Xe(10),An(this),Bn(this))};function zn(e){e.B!=null&&(o.clearTimeout(e.B),e.B=null)}function Bn(e){e.g=new dt(e,e.j,`rpc`,e.Y),e.u===null&&(e.g.J=e.o),e.g.P=0;var t=Lt(e.na);k(t,`RID`,`rpc`),k(t,`SID`,e.M),k(t,`AID`,e.K),k(t,`CI`,e.F?`0`:`1`),!e.F&&e.ia&&k(t,`TO`,e.ia),k(t,`TYPE`,`xmlhttp`),Fn(e,t),e.u&&e.o&&gn(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=Vt(Lt(t)),n.u=null,n.R=!0,gt(n,e)}e.Va=function(){this.C!=null&&(this.C=null,An(this),Rn(this),Xe(19))};function Vn(e){e.C!=null&&(o.clearTimeout(e.C),e.C=null)}function Hn(e,t){var n=null;if(e.g==t){Vn(e),zn(e),e.g=null;var r=2}else if(At(e.h,t))n=t.G,Mt(e.h,t),r=1;else return;if(e.I!=0){if(t.o)if(r==1){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;r=qe(),ke(r,new Ze(r,n)),Mn(e)}else Ln(e);else if(i=t.m,i==3||i==0&&t.X>0||!(r==1&&Nn(e,t)||r==2&&Rn(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:Wn(e,5);break;case 4:Wn(e,10);break;case 3:Wn(e,6);break;default:Wn(e,2)}}}function Un(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function Wn(e,t){if(e.j.info(`Error code `+t),t==2){var n=l(e.bb,e),r=e.Ua;let t=!r;r=new It(r||`//www.google.com/images/cleardot.gif`),o.location&&o.location.protocol==`http`||Rt(r,`https`),Vt(r),t?on(r.toString(),n):sn(r.toString(),n)}else Xe(2);e.I=0,e.l&&e.l.pa(t),Gn(e),jn(e)}e.bb=function(e){e?(this.j.info(`Successfully pinged google.com`),Xe(2)):(this.j.info(`Failed to ping google.com`),Xe(1))};function Gn(e){if(e.I=0,e.ja=[],e.l){let t=Nt(e.h);(t.length!=0||e.i.length!=0)&&(m(e.ja,t),m(e.ja,e.i),e.h.i.length=0,p(e.i),e.i.length=0),e.l.oa()}}function A(e,t,n){var r=n instanceof It?Lt(n):new It(n);if(r.g!=``)t&&(r.g=t+`.`+r.g),zt(r,r.u);else{var i=o.location;r=i.protocol,t=t?t+`.`+i.hostname:i.hostname,i=+i.port;let e=new It(null);r&&Rt(e,r),t&&(e.g=t),i&&zt(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&k(r,n,t),k(r,`VER`,e.ka),Fn(e,r),r}function Kn(e,t,n){if(t&&!e.L)throw Error(`Can't create secondary domain capable XhrIo object.`);return t=e.Aa&&!e.ma?new _n(new un({ab:n})):new _n(e.ma),t.Fa(e.L),t}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function qn(){}e=qn.prototype,e.ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){};function Jn(){}Jn.prototype.g=function(e,t){return new Yn(e,t)};function Yn(e,t){Oe.call(this),this.g=new On(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e[`X-Client-Protocol`]=`webchannel`:e={"X-Client-Protocol":`webchannel`}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e[`X-WebChannel-Content-Type`]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e[`X-WebChannel-Client-Profile`]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!ie(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t&&=t.httpSessionIdParam)&&!ie(t)&&(this.g.G=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new Qn(this)}d(Yn,Oe),Yn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Yn.prototype.close=function(){kn(this.g)},Yn.prototype.o=function(e){var t=this.g;if(typeof e==`string`){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=Le(e),e=n);t.i.push(new Et(t.Ya++,e)),t.I==3&&Mn(t)},Yn.prototype.N=function(){this.g.l=null,delete this.j,kn(this.g),delete this.g,Yn.Z.N.call(this)};function Xn(e){Ue.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){a:{for(let n in t){e=n;break a}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}d(Xn,Ue);function Zn(){We.call(this),this.status=1}d(Zn,We);function Qn(e){this.g=e}d(Qn,qn),Qn.prototype.ra=function(){ke(this.g,`a`)},Qn.prototype.qa=function(e){ke(this.g,new Xn(e))},Qn.prototype.pa=function(e){ke(this.g,new Zn)},Qn.prototype.oa=function(){ke(this.g,`b`)},Jn.prototype.createWebChannel=Jn.prototype.g,Yn.prototype.send=Yn.prototype.o,Yn.prototype.open=Yn.prototype.m,Yn.prototype.close=Yn.prototype.close,Us=Fs.createWebChannelTransport=function(){return new Jn},Hs=Fs.getStatEventTarget=function(){return qe()},Vs=Fs.Event=Ge,Bs=Fs.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},at.NO_ERROR=0,at.TIMEOUT=8,at.HTTP_ERROR=6,zs=Fs.ErrorCode=at,ot.COMPLETE=`complete`,Rs=Fs.EventType=ot,Ve.EventType=He,He.OPEN=`a`,He.CLOSE=`b`,He.ERROR=`c`,He.MESSAGE=`d`,Oe.prototype.listen=Oe.prototype.J,Ls=Fs.WebChannel=Ve,Fs.FetchXmlHttpFactory=un,_n.prototype.listenOnce=_n.prototype.K,_n.prototype.getLastError=_n.prototype.Ha,_n.prototype.getLastErrorCode=_n.prototype.ya,_n.prototype.getStatus=_n.prototype.ca,_n.prototype.getResponseJson=_n.prototype.La,_n.prototype.getResponseText=_n.prototype.la,_n.prototype.send=_n.prototype.ea,_n.prototype.setWithCredentials=_n.prototype.Fa,Is=Fs.XhrIo=_n}).apply(Ps===void 0?typeof self<`u`?self:typeof window<`u`?window:{}:Ps);var Ws=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?`uid:`+this.uid:`anonymous-user`}isEqual(e){return e.uid===this.uid}};Ws.UNAUTHENTICATED=new Ws(null),Ws.GOOGLE_CREDENTIALS=new Ws(`google-credentials-uid`),Ws.FIRST_PARTY=new Ws(`first-party-uid`),Ws.MOCK_USER=new Ws(`mock-user`);var Gs=`12.9.0`;function Ks(e){Gs=e}var qs=new $e(`@firebase/firestore`);function Js(){return qs.logLevel}function N(e,...t){if(qs.logLevel<=O.DEBUG){let n=t.map(Zs);qs.debug(`Firestore (${Gs}): ${e}`,...n)}}function Ys(e,...t){if(qs.logLevel<=O.ERROR){let n=t.map(Zs);qs.error(`Firestore (${Gs}): ${e}`,...n)}}function Xs(e,...t){if(qs.logLevel<=O.WARN){let n=t.map(Zs);qs.warn(`Firestore (${Gs}): ${e}`,...n)}}function Zs(e){if(typeof e==`string`)return e;try{return function(e){return JSON.stringify(e)}(e)}catch{return e}}function P(e,t,n){let r=`Unexpected state`;typeof t==`string`?r=t:n=t,Qs(e,r,n)}function Qs(e,t,n){let r=`FIRESTORE (${Gs}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=` CONTEXT: `+JSON.stringify(n)}catch{r+=` CONTEXT: `+n}throw Ys(r),Error(r)}function $s(e,t,n,r){let i=`Unexpected state`;typeof n==`string`?i=n:r=n,e||Qs(t,i,r)}function F(e,t){return e}var I={OK:`ok`,CANCELLED:`cancelled`,UNKNOWN:`unknown`,INVALID_ARGUMENT:`invalid-argument`,DEADLINE_EXCEEDED:`deadline-exceeded`,NOT_FOUND:`not-found`,ALREADY_EXISTS:`already-exists`,PERMISSION_DENIED:`permission-denied`,UNAUTHENTICATED:`unauthenticated`,RESOURCE_EXHAUSTED:`resource-exhausted`,FAILED_PRECONDITION:`failed-precondition`,ABORTED:`aborted`,OUT_OF_RANGE:`out-of-range`,UNIMPLEMENTED:`unimplemented`,INTERNAL:`internal`,UNAVAILABLE:`unavailable`,DATA_LOSS:`data-loss`},L=class extends De{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}},ec=class{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}},tc=class{constructor(e,t){this.user=t,this.type=`OAuth`,this.headers=new Map,this.headers.set(`Authorization`,`Bearer ${e}`)}},nc=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ws.UNAUTHENTICATED)))}shutdown(){}},rc=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}},ic=class{constructor(e){this.t=e,this.currentUser=Ws.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){$s(this.o===void 0,42304);let n=this.i,r=e=>this.i===n?Promise.resolve():(n=this.i,t(e)),i=new ec;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ec,e.enqueueRetryable((()=>r(this.currentUser)))};let a=()=>{let t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{N(`FirebaseAuthCredentialsProvider`,`Auth detected`),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){let e=this.t.getImmediate({optional:!0});e?o(e):(N(`FirebaseAuthCredentialsProvider`,`Auth not yet detected`),i.resolve(),i=new ec)}}),0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i===e?t?($s(typeof t.accessToken==`string`,31837,{l:t}),new tc(t.accessToken,this.currentUser)):null:(N(`FirebaseAuthCredentialsProvider`,`getToken aborted due to token change.`),this.getToken()))):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return $s(e===null||typeof e==`string`,2055,{h:e}),new Ws(e)}},ac=class{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type=`FirstParty`,this.user=Ws.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set(`X-Goog-AuthUser`,this.P);let e=this.A();return e&&this.R.set(`Authorization`,e),this.T&&this.R.set(`X-Goog-Iam-Authorization-Token`,this.T),this.R}},oc=class{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new ac(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Ws.FIRST_PARTY)))}shutdown(){}invalidateToken(){}},sc=class{constructor(e){this.value=e,this.type=`AppCheck`,this.headers=new Map,e&&e.length>0&&this.headers.set(`x-firebase-appcheck`,this.value)}},cc=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ln(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){$s(this.o===void 0,3512);let n=e=>{e.error!=null&&N(`FirebaseAppCheckTokenProvider`,`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);let n=e.token!==this.m;return this.m=e.token,N(`FirebaseAppCheckTokenProvider`,`Received ${n?`new`:`existing`} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};let r=e=>{N(`FirebaseAppCheckTokenProvider`,`AppCheck detected`),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){let e=this.V.getImmediate({optional:!0});e?r(e):N(`FirebaseAppCheckTokenProvider`,`AppCheck not yet detected`)}}),0)}getToken(){if(this.p)return Promise.resolve(new sc(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?($s(typeof e.token==`string`,44558,{tokenResult:e}),this.m=e.token,new sc(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function lc(e){let t=typeof self<`u`&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues==`function`)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}var uc=class{static newId(){let e=``;for(;e.length<20;){let t=lc(40);for(let n=0;n<t.length;++n)e.length<20&&t[n]<248&&(e+=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789`.charAt(t[n]%62))}return e}};function R(e,t){return e<t?-1:e>t?1:0}function dc(e,t){let n=Math.min(e.length,t.length);for(let r=0;r<n;r++){let n=e.charAt(r),i=t.charAt(r);if(n!==i)return mc(n)===mc(i)?R(n,i):mc(n)?1:-1}return R(e.length,t.length)}var fc=55296,pc=57343;function mc(e){let t=e.charCodeAt(0);return t>=fc&&t<=pc}function hc(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}var gc=`__name__`,_c=class e{constructor(e,t,n){t===void 0?t=0:t>e.length&&P(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&P(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(t){return e.comparator(this,t)===0}child(t){let n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((e=>{n.push(e)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){let r=Math.min(t.length,n.length);for(let i=0;i<r;i++){let r=e.compareSegments(t.get(i),n.get(i));if(r!==0)return r}return R(t.length,n.length)}static compareSegments(t,n){let r=e.isNumericId(t),i=e.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?e.extractNumericId(t).compare(e.extractNumericId(n)):dc(t,n)}static isNumericId(e){return e.startsWith(`__id`)&&e.endsWith(`__`)}static extractNumericId(e){return Ms.fromString(e.substring(4,e.length-2))}},vc=class e extends _c{construct(t,n,r){return new e(t,n,r)}canonicalString(){return this.toArray().join(`/`)}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join(`/`)}static fromString(...t){let n=[];for(let e of t){if(e.indexOf(`//`)>=0)throw new L(I.INVALID_ARGUMENT,`Invalid segment (${e}). Paths must not contain // in them.`);n.push(...e.split(`/`).filter((e=>e.length>0)))}return new e(n)}static emptyPath(){return new e([])}},yc=/^[_a-zA-Z][_a-zA-Z0-9]*$/,bc=class e extends _c{construct(t,n,r){return new e(t,n,r)}static isValidIdentifier(e){return yc.test(e)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,`\\\\`).replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(`.`)}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===`__name__`}static keyField(){return new e([gc])}static fromServerFormat(t){let n=[],r=``,i=0,a=()=>{if(r.length===0)throw new L(I.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=``},o=!1;for(;i<t.length;){let e=t[i];if(e===`\\`){if(i+1===t.length)throw new L(I.INVALID_ARGUMENT,`Path has trailing escape character: `+t);let e=t[i+1];if(e!==`\\`&&e!==`.`&&e!=="`")throw new L(I.INVALID_ARGUMENT,`Path has invalid escape sequence: `+t);r+=e,i+=2}else e==="`"?(o=!o,i++):e!==`.`||o?(r+=e,i++):(a(),i++)}if(a(),o)throw new L(I.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)}static emptyPath(){return new e([])}},z=class e{constructor(e){this.path=e}static fromPath(t){return new e(vc.fromString(t))}static fromName(t){return new e(vc.fromString(t).popFirst(5))}static empty(){return new e(vc.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&vc.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return vc.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(t){return new e(new vc(t.slice()))}};function xc(e,t,n){if(!n)throw new L(I.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Sc(e,t,n,r){if(!0===t&&!0===r)throw new L(I.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Cc(e){if(!z.isDocumentKey(e))throw new L(I.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function wc(e){if(z.isDocumentKey(e))throw new L(I.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Tc(e){return typeof e==`object`&&!!e&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function Ec(e){if(e===void 0)return`undefined`;if(e===null)return`null`;if(typeof e==`string`)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e==`number`||typeof e==`boolean`)return``+e;if(typeof e==`object`){if(e instanceof Array)return`an array`;{let t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:`an object`}}return typeof e==`function`?`a function`:P(12329,{type:typeof e})}function Dc(e,t){if(`_delegate`in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new L(I.INVALID_ARGUMENT,`Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?`);{let n=Ec(e);throw new L(I.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function Oc(e,t){if(t<=0)throw new L(I.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}function kc(e,t){let n={typeString:e};return t&&(n.value=t),n}function Ac(e,t){if(!Tc(e))throw new L(I.INVALID_ARGUMENT,`JSON must be an object`);let n;for(let r in t)if(t[r]){let i=t[r].typeString,a=`value`in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}let o=e[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&o!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new L(I.INVALID_ARGUMENT,n);return!0}var jc=-62135596800,Mc=1e6,Nc=class e{static now(){return e.fromMillis(Date.now())}static fromDate(t){return e.fromMillis(t.getTime())}static fromMillis(t){let n=Math.floor(t/1e3);return new e(n,Math.floor((t-1e3*n)*Mc))}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0||t>=1e9)throw new L(I.INVALID_ARGUMENT,`Timestamp nanoseconds out of range: `+t);if(e<jc||e>=253402300800)throw new L(I.INVALID_ARGUMENT,`Timestamp seconds out of range: `+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Mc}_compareTo(e){return this.seconds===e.seconds?R(this.nanoseconds,e.nanoseconds):R(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return`Timestamp(seconds=`+this.seconds+`, nanoseconds=`+this.nanoseconds+`)`}toJSON(){return{type:e._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Ac(t,e._jsonSchema))return new e(t.seconds,t.nanoseconds)}valueOf(){let e=this.seconds-jc;return String(e).padStart(12,`0`)+`.`+String(this.nanoseconds).padStart(9,`0`)}};Nc._jsonSchemaVersion=`firestore/timestamp/1.0`,Nc._jsonSchema={type:kc(`string`,Nc._jsonSchemaVersion),seconds:kc(`number`),nanoseconds:kc(`number`)};var B=class e{static fromTimestamp(t){return new e(t)}static min(){return new e(new Nc(0,0))}static max(){return new e(new Nc(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return`SnapshotVersion(`+this.timestamp.toString()+`)`}toTimestamp(){return this.timestamp}},Pc=-1,Fc=class{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}};Fc.UNKNOWN_ID=-1;function Ic(e,t){let n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1;return new Rc(B.fromTimestamp(r===1e9?new Nc(n+1,0):new Nc(n,r)),z.empty(),t)}function Lc(e){return new Rc(e.readTime,e.key,Pc)}var Rc=class e{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new e(B.min(),z.empty(),Pc)}static max(){return new e(B.max(),z.empty(),Pc)}};function zc(e,t){let n=e.readTime.compareTo(t.readTime);return n===0?(n=z.comparator(e.documentKey,t.documentKey),n===0?R(e.largestBatchId,t.largestBatchId):n):n}var Bc=`The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.`,Vc=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}};async function Hc(e){if(e.code!==I.FAILED_PRECONDITION||e.message!==Bc)throw e;N(`LocalStore`,`Unexpectedly lost primary lease`)}var V=class e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(t,n){return this.callbackAttached&&P(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(((e,r)=>{this.nextCallback=n=>{this.wrapSuccess(t,n).next(e,r)},this.catchCallback=t=>{this.wrapFailure(n,t).next(e,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(t){try{let n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):e.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):e.reject(n)}static resolve(t){return new e(((e,n)=>{e(t)}))}static reject(t){return new e(((e,n)=>{n(t)}))}static waitFor(t){return new e(((e,n)=>{let r=0,i=0,a=!1;t.forEach((t=>{++r,t.next((()=>{++i,a&&i===r&&e()}),(e=>n(e)))})),a=!0,i===r&&e()}))}static or(t){let n=e.resolve(!1);for(let r of t)n=n.next((t=>t?e.resolve(t):r()));return n}static forEach(e,t){let n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(t,n){return new e(((e,r)=>{let i=t.length,a=Array(i),o=0;for(let s=0;s<i;s++){let c=s;n(t[c]).next((t=>{a[c]=t,++o,o===i&&e(a)}),(e=>r(e)))}}))}static doWhile(t,n){return new e(((e,r)=>{let i=()=>{!0===t()?n().next((()=>{i()}),r):e()};i()}))}};function Uc(e){let t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(`.`).slice(0,2).join(`.`):`-1`;return Number(n)}function Wc(e){return e.name===`IndexedDbTransactionError`}var Gc=class{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.ue&&this.ue(e),e}};Gc.ce=-1;var Kc=-1;function qc(e){return e==null}function Jc(e){return e===0&&1/e==-1/0}function Yc(e){return typeof e==`number`&&Number.isInteger(e)&&!Jc(e)&&e<=2**53-1&&e>=-(2**53-1)}var Xc=``;function Zc(e){let t=``;for(let n=0;n<e.length;n++)t.length>0&&(t=$c(t)),t=Qc(e.get(n),t);return $c(t)}function Qc(e,t){let n=t,r=e.length;for(let t=0;t<r;t++){let r=e.charAt(t);switch(r){case`\0`:n+=``;break;case Xc:n+=``;break;default:n+=r}}return n}function $c(e){return e+Xc+``}function el(e){let t=0;for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function tl(e,t){for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function nl(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var rl=class e{constructor(e,t){this.comparator=e,this.root=t||al.EMPTY}insert(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,al.BLACK,null,null))}remove(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,al.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){let e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(`, `)}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new il(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new il(this.root,e,this.comparator,!1)}getReverseIterator(){return new il(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new il(this.root,e,this.comparator,!0)}},il=class{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},al=class e{constructor(t,n,r,i,a){this.key=t,this.value=n,this.color=r??e.RED,this.left=i??e.EMPTY,this.right=a??e.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,a){return new e(t??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this,i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):i===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return e.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){return 2**this.check()<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw P(43730,{key:this.key,value:this.value});if(this.right.isRed())throw P(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw P(27949);return e+(this.isRed()?0:1)}};al.EMPTY=null,al.RED=!0,al.BLACK=!1,al.EMPTY=new class{constructor(){this.size=0}get key(){throw P(57766)}get value(){throw P(16141)}get color(){throw P(16727)}get left(){throw P(29726)}get right(){throw P(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new al(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ol=class e{constructor(e){this.comparator=e,this.data=new rl(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){let n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){let r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=t===void 0?this.data.getIterator():this.data.getIteratorFrom(t);n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new sl(this.data.getIterator())}getIteratorFrom(e){return new sl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){let e=n.getNext().key,t=r.getNext().key;if(this.comparator(e,t)!==0)return!1}return!0}toArray(){let e=[];return this.forEach((t=>{e.push(t)})),e}toString(){let e=[];return this.forEach((t=>e.push(t))),`SortedSet(`+e.toString()+`)`}copy(t){let n=new e(this.comparator);return n.data=t,n}},sl=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}},cl=class e{constructor(e){this.fields=e,e.sort(bc.comparator)}static empty(){return new e([])}unionWith(t){let n=new ol(bc.comparator);for(let e of this.fields)n=n.add(e);for(let e of t)n=n.add(e);return new e(n.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return hc(this.fields,e.fields,((e,t)=>e.isEqual(t)))}},ll=class extends Error{constructor(){super(...arguments),this.name=`Base64DecodeError`}},ul=class e{constructor(e){this.binaryString=e}static fromBase64String(t){return new e(function(e){try{return atob(e)}catch(e){throw typeof DOMException<`u`&&e instanceof DOMException?new ll(`Invalid base64 string: `+e):e}}(t))}static fromUint8Array(t){return new e(function(e){let t=``;for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t))}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){let t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return R(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ul.EMPTY_BYTE_STRING=new ul(``);var dl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fl(e){if($s(!!e,39018),typeof e==`string`){let t=0,n=dl.exec(e);if($s(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+`000000000`).substr(0,9),t=Number(e)}let r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:H(e.seconds),nanos:H(e.nanos)}}function H(e){return typeof e==`number`?e:typeof e==`string`?Number(e):0}function pl(e){return typeof e==`string`?ul.fromBase64String(e):ul.fromUint8Array(e)}var ml=`server_timestamp`,hl=`__type__`,gl=`__previous_value__`,_l=`__local_write_time__`;function vl(e){return(e?.mapValue?.fields||{})[hl]?.stringValue===ml}function yl(e){let t=e.mapValue.fields[gl];return vl(t)?yl(t):t}function bl(e){let t=fl(e.mapValue.fields[_l].timestampValue);return new Nc(t.seconds,t.nanos)}var xl=class{constructor(e,t,n,r,i,a,o,s,c,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=s,this.useFetchStreams=c,this.isUsingEmulator=l,this.apiKey=u}},Sl=`(default)`,Cl=class e{constructor(e,t){this.projectId=e,this.database=t||Sl}static empty(){return new e(``,``)}get isDefaultDatabase(){return this.database===Sl}isEqual(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}};function wl(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,[`projectId`]))throw new L(I.INVALID_ARGUMENT,`"projectId" not provided in firebase.initializeApp.`);return new Cl(e.options.projectId,t)}var Tl=`__type__`,El=`__max__`,Dl={mapValue:{fields:{__type__:{stringValue:El}}}},Ol=`__vector__`,kl=`value`;function Al(e){return`nullValue`in e?0:`booleanValue`in e?1:`integerValue`in e||`doubleValue`in e?2:`timestampValue`in e?3:`stringValue`in e?5:`bytesValue`in e?6:`referenceValue`in e?7:`geoPointValue`in e?8:`arrayValue`in e?9:`mapValue`in e?vl(e)?4:Ul(e)?9007199254740991:G(e)?10:11:P(28295,{value:e})}function jl(e,t){if(e===t)return!0;let n=Al(e);if(n!==Al(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return bl(e).isEqual(bl(t));case 3:return function(e,t){if(typeof e.timestampValue==`string`&&typeof t.timestampValue==`string`&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;let n=fl(e.timestampValue),r=fl(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return pl(e.bytesValue).isEqual(pl(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return H(e.geoPointValue.latitude)===H(t.geoPointValue.latitude)&&H(e.geoPointValue.longitude)===H(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if(`integerValue`in e&&`integerValue`in t)return H(e.integerValue)===H(t.integerValue);if(`doubleValue`in e&&`doubleValue`in t){let n=H(e.doubleValue),r=H(t.doubleValue);return n===r?Jc(n)===Jc(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return hc(e.arrayValue.values||[],t.arrayValue.values||[],jl);case 10:case 11:return function(e,t){let n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(el(n)!==el(r))return!1;for(let e in n)if(n.hasOwnProperty(e)&&(r[e]===void 0||!jl(n[e],r[e])))return!1;return!0}(e,t);default:return P(52216,{left:e})}}function Ml(e,t){return(e.values||[]).find((e=>jl(e,t)))!==void 0}function Nl(e,t){if(e===t)return 0;let n=Al(e),r=Al(t);if(n!==r)return R(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return R(e.booleanValue,t.booleanValue);case 2:return function(e,t){let n=H(e.integerValue||e.doubleValue),r=H(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Pl(e.timestampValue,t.timestampValue);case 4:return Pl(bl(e),bl(t));case 5:return dc(e.stringValue,t.stringValue);case 6:return function(e,t){let n=pl(e),r=pl(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){let n=e.split(`/`),r=t.split(`/`);for(let e=0;e<n.length&&e<r.length;e++){let t=R(n[e],r[e]);if(t!==0)return t}return R(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){let n=R(H(e.latitude),H(t.latitude));return n===0?R(H(e.longitude),H(t.longitude)):n}(e.geoPointValue,t.geoPointValue);case 9:return Fl(e.arrayValue,t.arrayValue);case 10:return function(e,t){let n=e.fields||{},r=t.fields||{},i=n[kl]?.arrayValue,a=r[kl]?.arrayValue,o=R(i?.values?.length||0,a?.values?.length||0);return o===0?Fl(i,a):o}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Dl.mapValue&&t===Dl.mapValue)return 0;if(e===Dl.mapValue)return 1;if(t===Dl.mapValue)return-1;let n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(let e=0;e<r.length&&e<a.length;++e){let t=dc(r[e],a[e]);if(t!==0)return t;let o=Nl(n[r[e]],i[a[e]]);if(o!==0)return o}return R(r.length,a.length)}(e.mapValue,t.mapValue);default:throw P(23264,{he:n})}}function Pl(e,t){if(typeof e==`string`&&typeof t==`string`&&e.length===t.length)return R(e,t);let n=fl(e),r=fl(t),i=R(n.seconds,r.seconds);return i===0?R(n.nanos,r.nanos):i}function Fl(e,t){let n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){let t=Nl(n[e],r[e]);if(t)return t}return R(n.length,r.length)}function Il(e){return Ll(e)}function Ll(e){return`nullValue`in e?`null`:`booleanValue`in e?``+e.booleanValue:`integerValue`in e?``+e.integerValue:`doubleValue`in e?``+e.doubleValue:`timestampValue`in e?function(e){let t=fl(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):`stringValue`in e?e.stringValue:`bytesValue`in e?function(e){return pl(e).toBase64()}(e.bytesValue):`referenceValue`in e?function(e){return z.fromName(e).toString()}(e.referenceValue):`geoPointValue`in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):`arrayValue`in e?function(e){let t=`[`,n=!0;for(let r of e.values||[])n?n=!1:t+=`,`,t+=Ll(r);return t+`]`}(e.arrayValue):`mapValue`in e?function(e){let t=Object.keys(e.fields||{}).sort(),n=`{`,r=!0;for(let i of t)r?r=!1:n+=`,`,n+=`${i}:${Ll(e.fields[i])}`;return n+`}`}(e.mapValue):P(61005,{value:e})}function Rl(e){switch(Al(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let t=yl(e);return t?16+Rl(t):16;case 5:return 2*e.stringValue.length;case 6:return pl(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+Rl(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return tl(e.fields,((e,n)=>{t+=e.length+Rl(n)})),t}(e.mapValue);default:throw P(13486,{value:e})}}function zl(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Bl(e){return!!e&&`integerValue`in e}function Vl(e){return!!e&&`arrayValue`in e}function U(e){return!!e&&`nullValue`in e}function Hl(e){return!!e&&`doubleValue`in e&&isNaN(Number(e.doubleValue))}function W(e){return!!e&&`mapValue`in e}function G(e){return(e?.mapValue?.fields||{})[Tl]?.stringValue===Ol}function K(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue==`object`)return{timestampValue:{...e.timestampValue}};if(e.mapValue){let t={mapValue:{fields:{}}};return tl(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=K(n))),t}if(e.arrayValue){let t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=K(e.arrayValue.values[n]);return t}return{...e}}function Ul(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===El}var Wl=class e{constructor(e){this.value=e}static empty(){return new e({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!W(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=K(t)}setAll(e){let t=bc.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){let e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=K(e):r.push(i.lastSegment())}));let i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){let t=this.field(e.popLast());W(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return jl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];W(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){tl(t,((t,n)=>e[t]=n));for(let t of n)delete e[t]}clone(){return new e(K(this.value))}},Gl=class e{constructor(e,t,n,r,i,a,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(t){return new e(t,0,B.min(),B.min(),B.min(),Wl.empty(),0)}static newFoundDocument(t,n,r,i){return new e(t,1,n,B.min(),r,i,0)}static newNoDocument(t,n){return new e(t,2,n,B.min(),B.min(),Wl.empty(),0)}static newUnknownDocument(t,n){return new e(t,3,n,B.min(),B.min(),Wl.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(B.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wl.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=B.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}},Kl=class{constructor(e,t){this.position=e,this.inclusive=t}};function ql(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){let a=t[i],o=e.position[i];if(r=a.field.isKeyField()?z.comparator(z.fromName(o.referenceValue),n.key):Nl(o,n.data.field(a.field)),a.dir===`desc`&&(r*=-1),r!==0)break}return r}function Jl(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!jl(e.position[n],t.position[n]))return!1;return!0}var Yl=class{constructor(e,t=`asc`){this.field=e,this.dir=t}};function Xl(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Zl=class{},q=class e extends Zl{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(t,n,r){return t.isKeyField()?n===`in`||n===`not-in`?this.createKeyFieldInFilter(t,n,r):new au(t,n,r):n===`array-contains`?new lu(t,r):n===`in`?new uu(t,r):n===`not-in`?new du(t,r):n===`array-contains-any`?new fu(t,r):new e(t,n,r)}static createKeyFieldInFilter(e,t,n){return t===`in`?new ou(e,n):new su(e,n)}matches(e){let t=e.data.field(this.field);return this.op===`!=`?t!==null&&t.nullValue===void 0&&this.matchesComparison(Nl(t,this.value)):t!==null&&Al(this.value)===Al(t)&&this.matchesComparison(Nl(t,this.value))}matchesComparison(e){switch(this.op){case`<`:return e<0;case`<=`:return e<=0;case`==`:return e===0;case`!=`:return e!==0;case`>`:return e>0;case`>=`:return e>=0;default:return P(47266,{operator:this.op})}}isInequality(){return[`<`,`<=`,`>`,`>=`,`!=`,`not-in`].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ql=class e extends Zl{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(t,n){return new e(t,n)}matches(e){return $l(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function $l(e){return e.op===`and`}function eu(e){return tu(e)&&$l(e)}function tu(e){for(let t of e.filters)if(t instanceof Ql)return!1;return!0}function nu(e){if(e instanceof q)return e.field.canonicalString()+e.op.toString()+Il(e.value);if(eu(e))return e.filters.map((e=>nu(e))).join(`,`);{let t=e.filters.map((e=>nu(e))).join(`,`);return`${e.op}(${t})`}}function ru(e,t){return e instanceof q?function(e,t){return t instanceof q&&e.op===t.op&&e.field.isEqual(t.field)&&jl(e.value,t.value)}(e,t):e instanceof Ql?function(e,t){return t instanceof Ql&&e.op===t.op&&e.filters.length===t.filters.length?e.filters.reduce(((e,n,r)=>e&&ru(n,t.filters[r])),!0):!1}(e,t):void P(19439)}function iu(e){return e instanceof q?function(e){return`${e.field.canonicalString()} ${e.op} ${Il(e.value)}`}(e):e instanceof Ql?function(e){return e.op.toString()+` {`+e.getFilters().map(iu).join(` ,`)+`}`}(e):`Filter`}var au=class extends q{constructor(e,t,n){super(e,t,n),this.key=z.fromName(n.referenceValue)}matches(e){let t=z.comparator(e.key,this.key);return this.matchesComparison(t)}},ou=class extends q{constructor(e,t){super(e,`in`,t),this.keys=cu(`in`,t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}},su=class extends q{constructor(e,t){super(e,`not-in`,t),this.keys=cu(`not-in`,t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}};function cu(e,t){return(t.arrayValue?.values||[]).map((e=>z.fromName(e.referenceValue)))}var lu=class extends q{constructor(e,t){super(e,`array-contains`,t)}matches(e){let t=e.data.field(this.field);return Vl(t)&&Ml(t.arrayValue,this.value)}},uu=class extends q{constructor(e,t){super(e,`in`,t)}matches(e){let t=e.data.field(this.field);return t!==null&&Ml(this.value.arrayValue,t)}},du=class extends q{constructor(e,t){super(e,`not-in`,t)}matches(e){if(Ml(this.value.arrayValue,{nullValue:`NULL_VALUE`}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ml(this.value.arrayValue,t)}},fu=class extends q{constructor(e,t){super(e,`array-contains-any`,t)}matches(e){let t=e.data.field(this.field);return!(!Vl(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Ml(this.value.arrayValue,e)))}},pu=class{constructor(e,t=null,n=[],r=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=a,this.endAt=o,this.Te=null}};function mu(e,t=null,n=[],r=[],i=null,a=null,o=null){return new pu(e,t,n,r,i,a,o)}function hu(e){let t=F(e);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+=`|cg:`+t.collectionGroup),e+=`|f:`,e+=t.filters.map((e=>nu(e))).join(`,`),e+=`|ob:`,e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(`,`),qc(t.limit)||(e+=`|l:`,e+=t.limit),t.startAt&&(e+=`|lb:`,e+=t.startAt.inclusive?`b:`:`a:`,e+=t.startAt.position.map((e=>Il(e))).join(`,`)),t.endAt&&(e+=`|ub:`,e+=t.endAt.inclusive?`a:`:`b:`,e+=t.endAt.position.map((e=>Il(e))).join(`,`)),t.Te=e}return t.Te}function gu(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Xl(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!ru(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Jl(e.startAt,t.startAt)&&Jl(e.endAt,t.endAt)}function _u(e){return z.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}var vu=class{constructor(e,t=null,n=[],r=[],i=null,a=`F`,o=null,s=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=s,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}};function yu(e,t,n,r,i,a,o,s){return new vu(e,t,n,r,i,a,o,s)}function bu(e){return new vu(e)}function xu(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Su(e){return z.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}function Cu(e){return e.collectionGroup!==null}function wu(e){let t=F(e);if(t.Ie===null){t.Ie=[];let e=new Set;for(let n of t.explicitOrderBy)t.Ie.push(n),e.add(n.field.canonicalString());let n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:`asc`;(function(e){let t=new ol(bc.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t})(t).forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new Yl(r,n))})),e.has(bc.keyField().canonicalString())||t.Ie.push(new Yl(bc.keyField(),n))}return t.Ie}function Tu(e){let t=F(e);return t.Ee||=Eu(t,wu(e)),t.Ee}function Eu(e,t){if(e.limitType===`F`)return mu(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{let t=e.dir===`desc`?`asc`:`desc`;return new Yl(e.field,t)}));let n=e.endAt?new Kl(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Kl(e.startAt.position,e.startAt.inclusive):null;return mu(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Du(e,t){let n=e.filters.concat([t]);return new vu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Ou(e,t){let n=e.explicitOrderBy.concat([t]);return new vu(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}function ku(e,t,n){return new vu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Au(e,t){return gu(Tu(e),Tu(t))&&e.limitType===t.limitType}function ju(e){return`${hu(Tu(e))}|lt:${e.limitType}`}function Mu(e){return`Query(target=${function(e){let t=e.path.canonicalString();return e.collectionGroup!==null&&(t+=` collectionGroup=`+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>iu(e))).join(`, `)}]`),qc(e.limit)||(t+=`, limit: `+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(`, `)}]`),e.startAt&&(t+=`, startAt: `,t+=e.startAt.inclusive?`b:`:`a:`,t+=e.startAt.position.map((e=>Il(e))).join(`,`)),e.endAt&&(t+=`, endAt: `,t+=e.endAt.inclusive?`a:`:`b:`,t+=e.endAt.position.map((e=>Il(e))).join(`,`)),`Target(${t})`}(Tu(e))}; limitType=${e.limitType})`}function Nu(e,t){return t.isFoundDocument()&&function(e,t){let n=t.key.path;return e.collectionGroup===null?z.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n):t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n)}(e,t)&&function(e,t){for(let n of wu(e))if(!n.field.isKeyField()&&t.data.field(n.field)===null)return!1;return!0}(e,t)&&function(e,t){for(let n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){let r=ql(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,wu(e),t)||e.endAt&&!function(e,t,n){let r=ql(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,wu(e),t))}(e,t)}function Pu(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Fu(e){return(t,n)=>{let r=!1;for(let i of wu(e)){let e=Iu(i,t,n);if(e!==0)return e;r||=i.field.isKeyField()}return 0}}function Iu(e,t,n){let r=e.field.isKeyField()?z.comparator(t.key,n.key):function(e,t,n){let r=t.data.field(e),i=n.data.field(e);return r!==null&&i!==null?Nl(r,i):P(42886)}(e.field,t,n);switch(e.dir){case`asc`:return r;case`desc`:return-1*r;default:return P(19790,{direction:e.dir})}}var Lu=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(let[t,r]of n)if(this.equalsFn(t,e))return r}}has(e){return this.get(e)!==void 0}set(e,t){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return n.length===1?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){tl(this.inner,((t,n)=>{for(let[t,r]of n)e(t,r)}))}isEmpty(){return nl(this.inner)}size(){return this.innerSize}},Ru=new rl(z.comparator);function zu(){return Ru}var Bu=new rl(z.comparator);function Vu(...e){let t=Bu;for(let n of e)t=t.insert(n.key,n);return t}function Hu(e){let t=Bu;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Uu(){return Gu()}function Wu(){return Gu()}function Gu(){return new Lu((e=>e.toString()),((e,t)=>e.isEqual(t)))}new rl(z.comparator);var Ku=new ol(z.comparator);function J(...e){let t=Ku;for(let n of e)t=t.add(n);return t}var Y=new ol(R);function qu(){return Y}function Ju(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:`NaN`};if(t===1/0)return{doubleValue:`Infinity`};if(t===-1/0)return{doubleValue:`-Infinity`}}return{doubleValue:Jc(t)?`-0`:t}}function Yu(e){return{integerValue:``+e}}function Xu(e,t){return Yc(t)?Yu(t):Ju(e,t)}var Zu=class{constructor(){this._=void 0}};function Qu(e,t,n){return e instanceof td?function(e,t){let n={fields:{[hl]:{stringValue:ml},[_l]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&vl(t)&&(t=yl(t)),t&&(n.fields[gl]=t),{mapValue:n}}(n,t):e instanceof nd?rd(e,t):e instanceof id?ad(e,t):function(e,t){let n=ed(e,t),r=sd(n)+sd(e.Ae);return Bl(n)&&Bl(e.Ae)?Yu(r):Ju(e.serializer,r)}(e,t)}function $u(e,t,n){return e instanceof nd?rd(e,t):e instanceof id?ad(e,t):n}function ed(e,t){return e instanceof od?function(e){return Bl(e)||function(e){return!!e&&`doubleValue`in e}(e)}(t)?t:{integerValue:0}:null}var td=class extends Zu{},nd=class extends Zu{constructor(e){super(),this.elements=e}};function rd(e,t){let n=cd(t);for(let t of e.elements)n.some((e=>jl(e,t)))||n.push(t);return{arrayValue:{values:n}}}var id=class extends Zu{constructor(e){super(),this.elements=e}};function ad(e,t){let n=cd(t);for(let t of e.elements)n=n.filter((e=>!jl(e,t)));return{arrayValue:{values:n}}}var od=class extends Zu{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function sd(e){return H(e.integerValue||e.doubleValue)}function cd(e){return Vl(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function ld(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof nd&&t instanceof nd||e instanceof id&&t instanceof id?hc(e.elements,t.elements,jl):e instanceof od&&t instanceof od?jl(e.Ae,t.Ae):e instanceof td&&t instanceof td}(e.transform,t.transform)}var ud=class e{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new e}static exists(t){return new e(void 0,t)}static updateTime(t){return new e(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function dd(e,t){return e.updateTime===void 0?e.exists===void 0||e.exists===t.isFoundDocument():t.isFoundDocument()&&t.version.isEqual(e.updateTime)}var fd=class{};function pd(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new X(e.key,ud.none()):new _d(e.key,e.data,ud.none());{let n=e.data,r=Wl.empty(),i=new ol(bc.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);t===null&&e.length>1&&(e=e.popLast(),t=n.field(e)),t===null?r.delete(e):r.set(e,t),i=i.add(e)}return new vd(e.key,r,new cl(i.toArray()),ud.none())}}function md(e,t,n){e instanceof _d?function(e,t,n){let r=e.value.clone(),i=bd(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof vd?function(e,t,n){if(!dd(e.precondition,t))return void t.convertToUnknownDocument(n.version);let r=bd(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(yd(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function hd(e,t,n,r){return e instanceof _d?function(e,t,n,r){if(!dd(e.precondition,t))return n;let i=e.value.clone(),a=xd(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof vd?function(e,t,n,r){if(!dd(e.precondition,t))return n;let i=xd(e.fieldTransforms,r,t),a=t.data;return a.setAll(yd(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),n===null?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return dd(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function gd(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return e===void 0&&t===void 0||!(!e||!t)&&hc(e,t,((e,t)=>ld(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var _d=class extends fd{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},vd=class extends fd{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}};function yd(e){let t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){let r=e.data.field(n);t.set(n,r)}})),t}function bd(e,t,n){let r=new Map;$s(e.length===n.length,32656,{Ve:n.length,de:e.length});for(let i=0;i<n.length;i++){let a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,$u(o,s,n[i]))}return r}function xd(e,t,n){let r=new Map;for(let i of e){let e=i.transform,a=n.data.field(i.field);r.set(i.field,Qu(e,a,t))}return r}var X=class extends fd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Sd=class{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){let n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){let r=this.mutations[t];r.key.isEqual(e.key)&&md(r,e,n[t])}}applyToLocalView(e,t){for(let n of this.baseMutations)n.key.isEqual(e.key)&&(t=hd(n,e,t,this.localWriteTime));for(let n of this.mutations)n.key.isEqual(e.key)&&(t=hd(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let n=Wu();return this.mutations.forEach((r=>{let i=e.get(r.key),a=i.overlayedDocument,o=this.applyToLocalView(a,i.mutatedFields);o=t.has(r.key)?null:o;let s=pd(a,o);s!==null&&n.set(r.key,s),a.isValidDocument()||a.convertToNoDocument(B.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),J())}isEqual(e){return this.batchId===e.batchId&&hc(this.mutations,e.mutations,((e,t)=>gd(e,t)))&&hc(this.baseMutations,e.baseMutations,((e,t)=>gd(e,t)))}},Cd=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}},wd=class{constructor(e,t){this.count=e,this.unchangedNames=t}},Td,Z;function Ed(e){if(e===void 0)return Ys(`GRPC error has no .code`),I.UNKNOWN;switch(e){case Td.OK:return I.OK;case Td.CANCELLED:return I.CANCELLED;case Td.UNKNOWN:return I.UNKNOWN;case Td.DEADLINE_EXCEEDED:return I.DEADLINE_EXCEEDED;case Td.RESOURCE_EXHAUSTED:return I.RESOURCE_EXHAUSTED;case Td.INTERNAL:return I.INTERNAL;case Td.UNAVAILABLE:return I.UNAVAILABLE;case Td.UNAUTHENTICATED:return I.UNAUTHENTICATED;case Td.INVALID_ARGUMENT:return I.INVALID_ARGUMENT;case Td.NOT_FOUND:return I.NOT_FOUND;case Td.ALREADY_EXISTS:return I.ALREADY_EXISTS;case Td.PERMISSION_DENIED:return I.PERMISSION_DENIED;case Td.FAILED_PRECONDITION:return I.FAILED_PRECONDITION;case Td.ABORTED:return I.ABORTED;case Td.OUT_OF_RANGE:return I.OUT_OF_RANGE;case Td.UNIMPLEMENTED:return I.UNIMPLEMENTED;case Td.DATA_LOSS:return I.DATA_LOSS;default:return P(39323,{code:e})}}(Z=Td||={})[Z.OK=0]=`OK`,Z[Z.CANCELLED=1]=`CANCELLED`,Z[Z.UNKNOWN=2]=`UNKNOWN`,Z[Z.INVALID_ARGUMENT=3]=`INVALID_ARGUMENT`,Z[Z.DEADLINE_EXCEEDED=4]=`DEADLINE_EXCEEDED`,Z[Z.NOT_FOUND=5]=`NOT_FOUND`,Z[Z.ALREADY_EXISTS=6]=`ALREADY_EXISTS`,Z[Z.PERMISSION_DENIED=7]=`PERMISSION_DENIED`,Z[Z.UNAUTHENTICATED=16]=`UNAUTHENTICATED`,Z[Z.RESOURCE_EXHAUSTED=8]=`RESOURCE_EXHAUSTED`,Z[Z.FAILED_PRECONDITION=9]=`FAILED_PRECONDITION`,Z[Z.ABORTED=10]=`ABORTED`,Z[Z.OUT_OF_RANGE=11]=`OUT_OF_RANGE`,Z[Z.UNIMPLEMENTED=12]=`UNIMPLEMENTED`,Z[Z.INTERNAL=13]=`INTERNAL`,Z[Z.UNAVAILABLE=14]=`UNAVAILABLE`,Z[Z.DATA_LOSS=15]=`DATA_LOSS`;var Dd=null;function Od(){return new TextEncoder}var kd=new Ms([4294967295,4294967295],0);function Ad(e){let t=Od().encode(e),n=new Ns;return n.update(t),new Uint8Array(n.digest())}function jd(e){let t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Ms([n,r],0),new Ms([i,a],0)]}var Md=class e{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Nd(`Invalid padding: ${t}`);if(n<0||e.length>0&&this.hashCount===0)throw new Nd(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new Nd(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ms.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(Ms.fromNumber(n)));return r.compare(kd)===1&&(r=new Ms([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let[t,n]=jd(Ad(e));for(let e=0;e<this.hashCount;e++){let r=this.ye(t,n,e);if(!this.we(r))return!1}return!0}static create(t,n,r){let i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((e=>a.insert(e))),a}insert(e){if(this.ge===0)return;let[t,n]=jd(Ad(e));for(let e=0;e<this.hashCount;e++){let r=this.ye(t,n,e);this.be(r)}}be(e){let t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}},Nd=class extends Error{constructor(){super(...arguments),this.name=`BloomFilterError`}},Q=class e{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){let i=new Map;return i.set(t,Pd.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(B.min(),i,new rl(R),zu(),J())}},Pd=class e{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new e(r,n,J(),J(),J())}},Fd=class{constructor(e,t,n,r){this.Se=e,this.removedTargetIds=t,this.key=n,this.De=r}},Id=class{constructor(e,t){this.targetId=e,this.Ce=t}},Ld=class{constructor(e,t,n=ul.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}},Rd=class{constructor(){this.ve=0,this.Fe=Vd(),this.Me=ul.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=J(),t=J(),n=J();return this.Fe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:P(38017,{changeType:i})}})),new Pd(this.Me,this.xe,e,t,n)}Ke(){this.Oe=!1,this.Fe=Vd()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){--this.ve,$s(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}},zd=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=zu(),this.He=Bd(),this.Je=Bd(),this.Ze=new rl(R)}Xe(e){for(let t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{let n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.We(),n.Ne||n.Ke(),n.Le(e.resumeToken);break;case 2:n.We(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.Qe(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:P(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((e,n)=>{this.rt(n)&&t(n)}))}st(e){let t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){let i=r.target;if(_u(i))if(n===0){let e=new z(i.path);this.et(t,e,Gl.newNoDocument(e,B.min()))}else $s(n===1,20013,{expectedCount:n});else{let r=this._t(t);if(r!==n){let n=this.ut(e),i=n?this.ct(n,e,r):1;if(i!==0){this.it(t);let e=i===2?`TargetPurposeExistenceFilterMismatchBloom`:`TargetPurposeExistenceFilterMismatch`;this.Ze=this.Ze.insert(t,e)}Dd?.lt(function(e,t,n,r,i){let a={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},o=t.unchangedNames;return o&&(a.bloomFilter={applied:i===0,hashCount:o?.hashCount??0,bitmapLength:o?.bits?.bitmap?.length??0,padding:o?.bits?.padding??0,mightContain:e=>r?.mightContain(e)??!1}),a}(r,e.Ce,this.Ge.ht(),n,i))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:n=``,padding:r=0},hashCount:i=0}=t,a,o;try{a=pl(n).toUint8Array()}catch(e){if(e instanceof ll)return Xs(`Decoding the base64 bloom filter in existence filter failed (`+e.message+`); ignoring the bloom filter and falling back to full re-query.`),null;throw e}try{o=new Md(a,r,i)}catch(e){return Xs(e instanceof Nd?`BloomFilter error: `:`Applying bloom filter failed: `,e),null}return o.ge===0?null:o}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){let n=this.Ge.getRemoteKeysForTarget(t),r=0;return n.forEach((n=>{let i=this.Ge.ht(),a=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(a)||(this.et(t,n,null),r++)})),r}Tt(e){let t=new Map;this.ze.forEach(((n,r)=>{let i=this.ot(r);if(i){if(n.current&&_u(i.target)){let t=new z(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,Gl.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.Ke())}}));let n=J();this.Je.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{let t=this.ot(e);return!t||t.purpose===`TargetPurposeLimboResolution`||(r=!1,!1)})),r&&(n=n.add(e))})),this.je.forEach(((t,n)=>n.setReadTime(e)));let r=new Q(e,t,this.Ze,this.je,n);return this.je=zu(),this.He=Bd(),this.Je=Bd(),this.Ze=new rl(R),r}Ye(e,t){if(!this.rt(e))return;let n=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,n),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;let r=this.nt(e);this.Et(e,t)?r.qe(t,1):r.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new Rd,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new ol(R),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new ol(R),this.He=this.He.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||N(`WatchChangeAggregator`,`Detected inactive target`,e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Rd),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function Bd(){return new rl(z.comparator)}function Vd(){return new rl(z.comparator)}var Hd=(()=>({asc:`ASCENDING`,desc:`DESCENDING`}))(),Ud=(()=>({"<":`LESS_THAN`,"<=":`LESS_THAN_OR_EQUAL`,">":`GREATER_THAN`,">=":`GREATER_THAN_OR_EQUAL`,"==":`EQUAL`,"!=":`NOT_EQUAL`,"array-contains":`ARRAY_CONTAINS`,in:`IN`,"not-in":`NOT_IN`,"array-contains-any":`ARRAY_CONTAINS_ANY`}))(),Wd=(()=>({and:`AND`,or:`OR`}))(),Gd=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Kd(e,t){return e.useProto3Json||qc(t)?t:{value:t}}function qd(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,``).replace(`Z`,``)}.${(`000000000`+t.nanoseconds).slice(-9)}Z`:{seconds:``+t.seconds,nanos:t.nanoseconds}}function Jd(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Yd(e){return $s(!!e,49232),B.fromTimestamp(function(e){let t=fl(e);return new Nc(t.seconds,t.nanos)}(e))}function Xd(e,t){return Zd(e,t).canonicalString()}function Zd(e,t){let n=function(e){return new vc([`projects`,e.projectId,`databases`,e.database])}(e).child(`documents`);return t===void 0?n:n.child(t)}function Qd(e){let t=vc.fromString(e);return $s(_f(t),10190,{key:t.toString()}),t}function $d(e,t){let n=Qd(t);if(n.get(1)!==e.databaseId.projectId)throw new L(I.INVALID_ARGUMENT,`Tried to deserialize key from different project: `+n.get(1)+` vs `+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new L(I.INVALID_ARGUMENT,`Tried to deserialize key from different database: `+n.get(3)+` vs `+e.databaseId.database);return new z(rf(n))}function ef(e,t){return Xd(e.databaseId,t)}function tf(e){let t=Qd(e);return t.length===4?vc.emptyPath():rf(t)}function nf(e){return new vc([`projects`,e.databaseId.projectId,`databases`,e.databaseId.database]).canonicalString()}function rf(e){return $s(e.length>4&&e.get(4)===`documents`,29091,{key:e.toString()}),e.popFirst(5)}function af(e,t){let n;if(`targetChange`in t){t.targetChange;let r=function(e){return e===`NO_CHANGE`?0:e===`ADD`?1:e===`REMOVE`?2:e===`CURRENT`?3:e===`RESET`?4:P(39313,{state:e})}(t.targetChange.targetChangeType||`NO_CHANGE`),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?($s(t===void 0||typeof t==`string`,58123),ul.fromBase64String(t||``)):($s(t===void 0||t instanceof Buffer||t instanceof Uint8Array,16193),ul.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause;n=new Ld(r,i,a,o&&function(e){return new L(e.code===void 0?I.UNKNOWN:Ed(e.code),e.message||``)}(o)||null)}else if(`documentChange`in t){t.documentChange;let r=t.documentChange;r.document,r.document.name,r.document.updateTime;let i=$d(e,r.document.name),a=Yd(r.document.updateTime),o=r.document.createTime?Yd(r.document.createTime):B.min(),s=new Wl({mapValue:{fields:r.document.fields}}),c=Gl.newFoundDocument(i,a,o,s);n=new Fd(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if(`documentDelete`in t){t.documentDelete;let r=t.documentDelete;r.document;let i=$d(e,r.document),a=r.readTime?Yd(r.readTime):B.min(),o=Gl.newNoDocument(i,a);n=new Fd([],r.removedTargetIds||[],o.key,o)}else if(`documentRemove`in t){t.documentRemove;let r=t.documentRemove;r.document;let i=$d(e,r.document);n=new Fd([],r.removedTargetIds||[],i,null)}else{if(!(`filter`in t))return P(11601,{Vt:t});{t.filter;let e=t.filter;e.targetId;let{count:r=0,unchangedNames:i}=e,a=new wd(r,i),o=e.targetId;n=new Id(o,a)}}return n}function of(e,t){return{documents:[ef(e,t.path)]}}function sf(e,t){let n={structuredQuery:{}},r=t.path,i;t.collectionGroup===null?(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]):(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]),n.parent=ef(e,i);let a=function(e){if(e.length!==0)return gf(Ql.create(e,`and`))}(t.filters);a&&(n.structuredQuery.where=a);let o=function(e){if(e.length!==0)return e.map((e=>function(e){return{field:mf(e.field),direction:df(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);let s=Kd(e,t.limit);return s!==null&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function cf(e){let t=tf(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){$s(r===1,65062);let e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let a=[];n.where&&(a=function(e){let t=uf(e);return t instanceof Ql&&eu(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new Yl(hf(e.field),function(e){switch(e){case`ASCENDING`:return`asc`;case`DESCENDING`:return`desc`;default:return}}(e.direction))}(e)))}(n.orderBy));let s=null;n.limit&&(s=function(e){let t;return t=typeof e==`object`?e.value:e,qc(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){let t=!!e.before;return new Kl(e.values||[],t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){let t=!e.before;return new Kl(e.values||[],t)}(n.endAt)),yu(t,i,o,a,s,`F`,c,l)}function lf(e,t){let n=function(e){switch(e){case`TargetPurposeListen`:return null;case`TargetPurposeExistenceFilterMismatch`:return`existence-filter-mismatch`;case`TargetPurposeExistenceFilterMismatchBloom`:return`existence-filter-mismatch-bloom`;case`TargetPurposeLimboResolution`:return`limbo-document`;default:return P(28987,{purpose:e})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function uf(e){return e.unaryFilter===void 0?e.fieldFilter===void 0?e.compositeFilter===void 0?P(30097,{filter:e}):function(e){return Ql.create(e.compositeFilter.filters.map((e=>uf(e))),function(e){switch(e){case`AND`:return`and`;case`OR`:return`or`;default:return P(1026)}}(e.compositeFilter.op))}(e):function(e){return q.create(hf(e.fieldFilter.field),function(e){switch(e){case`EQUAL`:return`==`;case`NOT_EQUAL`:return`!=`;case`GREATER_THAN`:return`>`;case`GREATER_THAN_OR_EQUAL`:return`>=`;case`LESS_THAN`:return`<`;case`LESS_THAN_OR_EQUAL`:return`<=`;case`ARRAY_CONTAINS`:return`array-contains`;case`IN`:return`in`;case`NOT_IN`:return`not-in`;case`ARRAY_CONTAINS_ANY`:return`array-contains-any`;case`OPERATOR_UNSPECIFIED`:return P(58110);default:return P(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):function(e){switch(e.unaryFilter.op){case`IS_NAN`:let t=hf(e.unaryFilter.field);return q.create(t,`==`,{doubleValue:NaN});case`IS_NULL`:let n=hf(e.unaryFilter.field);return q.create(n,`==`,{nullValue:`NULL_VALUE`});case`IS_NOT_NAN`:let r=hf(e.unaryFilter.field);return q.create(r,`!=`,{doubleValue:NaN});case`IS_NOT_NULL`:let i=hf(e.unaryFilter.field);return q.create(i,`!=`,{nullValue:`NULL_VALUE`});case`OPERATOR_UNSPECIFIED`:return P(61313);default:return P(60726)}}(e)}function df(e){return Hd[e]}function ff(e){return Ud[e]}function pf(e){return Wd[e]}function mf(e){return{fieldPath:e.canonicalString()}}function hf(e){return bc.fromServerFormat(e.fieldPath)}function gf(e){return e instanceof q?function(e){if(e.op===`==`){if(Hl(e.value))return{unaryFilter:{field:mf(e.field),op:`IS_NAN`}};if(U(e.value))return{unaryFilter:{field:mf(e.field),op:`IS_NULL`}}}else if(e.op===`!=`){if(Hl(e.value))return{unaryFilter:{field:mf(e.field),op:`IS_NOT_NAN`}};if(U(e.value))return{unaryFilter:{field:mf(e.field),op:`IS_NOT_NULL`}}}return{fieldFilter:{field:mf(e.field),op:ff(e.op),value:e.value}}}(e):e instanceof Ql?function(e){let t=e.getFilters().map((e=>gf(e)));return t.length===1?t[0]:{compositeFilter:{op:pf(e.op),filters:t}}}(e):P(54877,{filter:e})}function _f(e){return e.length>=4&&e.get(0)===`projects`&&e.get(2)===`databases`}function vf(e){return!!e&&typeof e._toProto==`function`&&e._protoValueType===`ProtoValue`}var yf=class e{constructor(e,t,n,r,i=B.min(),a=B.min(),o=ul.EMPTY_BYTE_STRING,s=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=s}withSequenceNumber(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}},bf=class{constructor(e){this.yt=e}};function xf(e){let t=cf({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType===`LAST`?ku(t,t.limit,`L`):t}var Sf=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if(`nullValue`in e)this.Ft(t,5);else if(`booleanValue`in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if(`integerValue`in e)this.Ft(t,15),t.Mt(H(e.integerValue));else if(`doubleValue`in e){let n=H(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),Jc(n)?t.Mt(0):t.Mt(n))}else if(`timestampValue`in e){let n=e.timestampValue;this.Ft(t,20),typeof n==`string`&&(n=fl(n)),t.xt(`${n.seconds||``}`),t.Mt(n.nanos||0)}else if(`stringValue`in e)this.Ot(e.stringValue,t),this.Nt(t);else if(`bytesValue`in e)this.Ft(t,30),t.Bt(pl(e.bytesValue)),this.Nt(t);else if(`referenceValue`in e)this.Lt(e.referenceValue,t);else if(`geoPointValue`in e){let n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else `mapValue`in e?Ul(e)?this.Ft(t,2**53-1):G(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):`arrayValue`in e?(this.qt(e.arrayValue,t),this.Nt(t)):P(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){let n=e.fields||{};this.Ft(t,55);for(let e of Object.keys(n))this.Ot(e,t),this.Ct(n[e],t)}kt(e,t){let n=e.fields||{};this.Ft(t,53);let r=kl,i=n[r].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(H(i)),this.Ot(r,t),this.Ct(n[r],t)}qt(e,t){let n=e.values||[];this.Ft(t,50);for(let e of n)this.Ct(e,t)}Lt(e,t){this.Ft(t,37),z.fromName(e).path.forEach((e=>{this.Ft(t,60),this.$t(e,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};Sf.Wt=new Sf;var Cf=class{constructor(){this.Sn=new wf}addToCollectionParentIndex(e,t){return this.Sn.add(t),V.resolve()}getCollectionParents(e,t){return V.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return V.resolve()}deleteFieldIndex(e,t){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,t){return V.resolve()}getDocumentsMatchingTarget(e,t){return V.resolve(null)}getIndexType(e,t){return V.resolve(0)}getFieldIndexes(e,t){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,t){return V.resolve(Rc.min())}getMinOffsetFromCollectionGroup(e,t){return V.resolve(Rc.min())}updateCollectionGroup(e,t,n){return V.resolve()}updateIndexEntries(e,t){return V.resolve()}},wf=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new ol(vc.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){let t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new ol(vc.comparator)).toArray()}};new Uint8Array;var Tf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ef=41943040,Df=class e{static withCacheSize(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}};Df.DEFAULT_COLLECTION_PERCENTILE=10,Df.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Df.DEFAULT=new Df(Ef,Df.DEFAULT_COLLECTION_PERCENTILE,Df.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Df.DISABLED=new Df(-1,0,0);var Of=class e{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new e(0)}static ar(){return new e(-1)}},kf=`LruGarbageCollector`,Af=1048576;function jf([e,t],[n,r]){let i=R(e,n);return i===0?R(t,r):i}var Mf=class{constructor(e){this.Pr=e,this.buffer=new ol(jf),this.Tr=0}Ir(){return++this.Tr}Er(e){let t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{let e=this.buffer.last();jf(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}},Nf=class{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&=(this.Rr.cancel(),null)}get started(){return this.Rr!==null}Ar(e){N(kf,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay(`lru_garbage_collection`,e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Wc(e)?N(kf,`Ignoring IndexedDB error during garbage collection: `,e):await Hc(e)}await this.Ar(3e5)}))}},Pf=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(t===0)return V.resolve(Gc.ce);let n=new Mf(t);return this.Vr.forEachTarget(e,(e=>n.Er(e.sequenceNumber))).next((()=>this.Vr.mr(e,(e=>n.Er(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.Vr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(N(`LruGarbageCollector`,`Garbage collection skipped; disabled`),V.resolve(Tf)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(N(`LruGarbageCollector`,`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Tf):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let n,r,i,a,o,s,c,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(N(`LruGarbageCollector`,`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,s=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),Js()<=O.DEBUG&&N(`LruGarbageCollector`,`LRU Garbage Collection\n\tCounted targets in ${a-l}ms\n\tDetermined least recently used ${r} in `+(o-a)+`ms
\tRemoved ${i} targets in `+(s-o)+`ms
\tRemoved ${e} documents in `+(c-s)+`ms
Total Duration: ${c-l}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}};function Ff(e,t){return new Pf(e,t)}var If=class{constructor(){this.changes=new Lu((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Gl.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let n=this.changes.get(t);return n===void 0?this.getFromCache(e,t):V.resolve(n)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}},Lf=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}},Rf=class{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(n!==null&&hd(n.mutation,e,cl.empty(),Nc.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,J()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=J()){let r=Uu();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Vu();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){let n=Uu();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,J())))}populateOverlays(e,t,n){let r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=zu(),a=Gu(),o=function(){return Gu()}();return t.forEach(((e,t)=>{let o=n.get(t.key);r.has(t.key)&&(o===void 0||o.mutation instanceof vd)?i=i.insert(t.key,t):o===void 0?a.set(t.key,cl.empty()):(a.set(t.key,o.mutation.getFieldMask()),hd(o.mutation,t,o.mutation.getFieldMask(),Nc.now()))})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>a.set(e,t))),t.forEach(((e,t)=>o.set(e,new Lf(t,a.get(e)??null)))),o)))}recalculateAndSaveOverlays(e,t){let n=Gu(),r=new rl(((e,t)=>e-t)),i=J();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(let i of e)i.keys().forEach((e=>{let a=t.get(e);if(a===null)return;let o=n.get(e)||cl.empty();o=i.applyToLocalView(a,o),n.set(e,o);let s=(r.get(i.batchId)||J()).add(e);r=r.insert(i.batchId,s)}))})).next((()=>{let a=[],o=r.getReverseIterator();for(;o.hasNext();){let r=o.getNext(),s=r.key,c=r.value,l=Wu();c.forEach((e=>{if(!i.has(e)){let r=pd(t.get(e),n.get(e));r!==null&&l.set(e,r),i=i.add(e)}})),a.push(this.documentOverlayCache.saveOverlays(e,s,l))}return V.waitFor(a)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return Su(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Cu(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{let a=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):V.resolve(Uu()),o=Pc,s=i;return a.next((t=>V.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?V.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{s=s.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,s,t,J()))).next((e=>({batchId:o,changes:Hu(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new z(t)).next((e=>{let t=Vu();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){let i=t.collectionGroup,a=Vu();return this.indexManager.getCollectionParents(e,i).next((o=>V.forEach(o,(o=>{let s=function(e,t){return new vu(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,s,n,r).next((e=>{e.forEach(((e,t)=>{a=a.insert(e,t)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{let r=n.getKey();e.get(r)===null&&(e=e.insert(r,Gl.newInvalidDocument(r)))}));let n=Vu();return e.forEach(((e,r)=>{let a=i.get(e);a!==void 0&&hd(a.mutation,r,cl.empty(),Nc.now()),Nu(t,r)&&(n=n.insert(e,r))})),n}))}},zf=class{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return V.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Yd(e.createTime)}}(t)),V.resolve()}getNamedQuery(e,t){return V.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,function(e){return{name:e.name,query:xf(e.bundledQuery),readTime:Yd(e.readTime)}}(t)),V.resolve()}},Bf=class{constructor(){this.overlays=new rl(z.comparator),this.Lr=new Map}getOverlay(e,t){return V.resolve(this.overlays.get(t))}getOverlays(e,t){let n=Uu();return V.forEach(t,(t=>this.getOverlay(e,t).next((e=>{e!==null&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.bt(e,t,r)})),V.resolve()}removeOverlaysForBatchId(e,t,n){let r=this.Lr.get(n);return r!==void 0&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Lr.delete(n)),V.resolve()}getOverlaysForCollection(e,t,n){let r=Uu(),i=t.length+1,a=new z(t.child(``)),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){let e=o.getNext().value,a=e.getKey();if(!t.isPrefixOf(a.path))break;a.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return V.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new rl(((e,t)=>e-t)),a=this.overlays.getIterator();for(;a.hasNext();){let e=a.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);t===null&&(t=Uu(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}let o=Uu(),s=i.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return V.resolve(o)}bt(e,t,n){let r=this.overlays.get(n.key);if(r!==null){let e=this.Lr.get(r.largestBatchId).delete(n.key);this.Lr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Cd(t,n));let i=this.Lr.get(t);i===void 0&&(i=J(),this.Lr.set(t,i)),this.Lr.set(t,i.add(n.key))}},Vf=class{constructor(){this.sessionToken=ul.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,V.resolve()}},Hf=class{constructor(){this.kr=new ol(Uf.Kr),this.qr=new ol(Uf.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){let n=new Uf(e,t);this.kr=this.kr.add(n),this.qr=this.qr.add(n)}$r(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Wr(new Uf(e,t))}Qr(e,t){e.forEach((e=>this.removeReference(e,t)))}Gr(e){let t=new z(new vc([])),n=new Uf(t,e),r=new Uf(t,e+1),i=[];return this.qr.forEachInRange([n,r],(e=>{this.Wr(e),i.push(e.key)})),i}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){let t=new z(new vc([])),n=new Uf(t,e),r=new Uf(t,e+1),i=J();return this.qr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){let t=new Uf(e,0),n=this.kr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}},Uf=class{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return z.comparator(e.key,t.key)||R(e.Hr,t.Hr)}static Ur(e,t){return R(e.Hr,t.Hr)||z.comparator(e.key,t.key)}},Wf=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new ol(Uf.Kr)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,r){let i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new Sd(i,t,n,r);this.mutationQueue.push(a);for(let t of r)this.Jr=this.Jr.add(new Uf(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return V.resolve(a)}lookupMutationBatch(e,t){return V.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let n=t+1,r=this.Xr(n),i=r<0?0:r;return V.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?Kc:this.Yn-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let n=new Uf(t,0),r=new Uf(t,1/0),i=[];return this.Jr.forEachInRange([n,r],(e=>{let t=this.Zr(e.Hr);i.push(t)})),V.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new ol(R);return t.forEach((e=>{let t=new Uf(e,0),r=new Uf(e,1/0);this.Jr.forEachInRange([t,r],(e=>{n=n.add(e.Hr)}))})),V.resolve(this.Yr(n))}getAllMutationBatchesAffectingQuery(e,t){let n=t.path,r=n.length+1,i=n;z.isDocumentKey(i)||(i=i.child(``));let a=new Uf(new z(i),0),o=new ol(R);return this.Jr.forEachWhile((e=>{let t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Hr)),!0)}),a),V.resolve(this.Yr(o))}Yr(e){let t=[];return e.forEach((e=>{let n=this.Zr(e);n!==null&&t.push(n)})),t}removeMutationBatch(e,t){$s(this.ei(t.batchId,`removed`)===0,55003),this.mutationQueue.shift();let n=this.Jr;return V.forEach(t.mutations,(r=>{let i=new Uf(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Jr=n}))}nr(e){}containsKey(e,t){let n=new Uf(t,0),r=this.Jr.firstAfterOrEqual(n);return V.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}},Gf=class{constructor(e){this.ti=e,this.docs=function(){return new rl(z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ti(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let n=this.docs.get(t);return V.resolve(n?n.document.mutableCopy():Gl.newInvalidDocument(t))}getEntries(e,t){let n=zu();return t.forEach((e=>{let t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Gl.newInvalidDocument(e))})),V.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=zu(),a=t.path,o=new z(a.child(`__id-9223372036854775808__`)),s=this.docs.getIteratorFrom(o);for(;s.hasNext();){let{key:e,value:{document:o}}=s.getNext();if(!a.isPrefixOf(e.path))break;e.path.length>a.length+1||zc(Lc(o),n)<=0||(r.has(o.key)||Nu(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return V.resolve(i)}getAllFromCollectionGroup(e,t,n,r){P(9500)}ni(e,t){return V.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Kf(this)}getSize(e){return V.resolve(this.size)}},Kf=class extends If{constructor(e){super(),this.Mr=e}applyChanges(e){let t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Mr.addEntry(e,r)):this.Mr.removeEntry(n)})),V.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}},qf=class{constructor(e){this.persistence=e,this.ri=new Lu((e=>hu(e)),gu),this.lastRemoteSnapshotVersion=B.min(),this.highestTargetId=0,this.ii=0,this.si=new Hf,this.targetCount=0,this.oi=Of._r()}forEachTarget(e,t){return this.ri.forEach(((e,n)=>t(n))),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ii&&(this.ii=t),V.resolve()}lr(e){this.ri.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.oi=new Of(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,V.resolve()}updateTargetData(e,t){return this.lr(t),V.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),--this.targetCount,V.resolve()}removeTargets(e,t,n){let r=0,i=[];return this.ri.forEach(((a,o)=>{o.sequenceNumber<=t&&n.get(o.targetId)===null&&(this.ri.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),V.waitFor(i).next((()=>r))}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,t){let n=this.ri.get(t)||null;return V.resolve(n)}addMatchingKeys(e,t,n){return this.si.$r(t,n),V.resolve()}removeMatchingKeys(e,t,n){this.si.Qr(t,n);let r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),V.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),V.resolve()}getMatchingKeysForTargetId(e,t){let n=this.si.jr(t);return V.resolve(n)}containsKey(e,t){return V.resolve(this.si.containsKey(t))}},Jf=class{constructor(e,t){this._i={},this.overlays={},this.ai=new Gc(0),this.ui=!1,this.ui=!0,this.ci=new Vf,this.referenceDelegate=e(this),this.li=new qf(this),this.indexManager=new Cf,this.remoteDocumentCache=function(e){return new Gf(e)}((e=>this.referenceDelegate.hi(e))),this.serializer=new bf(t),this.Pi=new zf(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Bf,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this._i[e.toKey()];return n||(n=new Wf(t,this.referenceDelegate),this._i[e.toKey()]=n),n}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,n){N(`MemoryPersistence`,`Starting transaction:`,e);let r=new Yf(this.ai.next());return this.referenceDelegate.Ti(),n(r).next((e=>this.referenceDelegate.Ii(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Ei(e,t){return V.or(Object.values(this._i).map((n=>()=>n.containsKey(e,t))))}},Yf=class extends Vc{constructor(e){super(),this.currentSequenceNumber=e}},Xf=class e{constructor(e){this.persistence=e,this.Ri=new Hf,this.Ai=null}static Vi(t){return new e(t)}get di(){if(this.Ai)return this.Ai;throw P(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.di.delete(n.toString()),V.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.di.add(n.toString()),V.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),V.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((e=>this.di.add(e.toString())));let n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.di.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.di,(n=>{let r=z.fromPath(n);return this.mi(e,r).next((e=>{e||t.removeEntry(r,B.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((e=>{e?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return V.or([()=>V.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},Zf=class e{constructor(e,t){this.persistence=e,this.fi=new Lu((e=>Zc(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=Ff(this,t)}static Vi(t,n){return new e(t,n)}Ti(){}Ii(e){return V.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){let t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}pr(e){let t=0;return this.mr(e,(e=>{t++})).next((()=>t))}mr(e,t){return V.forEach(this.fi,((n,r)=>this.wr(e,n,r).next((e=>e?V.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0,r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ni(e,(r=>this.wr(e,r,t).next((e=>{e||(n++,i.removeEntry(r,B.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),V.resolve()}removeTarget(e,t){let n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.fi.set(n,e.currentSequenceNumber),V.resolve()}removeReference(e,t,n){return this.fi.set(n,e.currentSequenceNumber),V.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),V.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Rl(e.data.value)),t}wr(e,t,n){return V.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let e=this.fi.get(t);return V.resolve(e!==void 0&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}},Qf=class e{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Ts=n,this.Is=r}static Es(t,n){let r=J(),i=J();for(let e of n.docChanges)switch(e.type){case 0:r=r.add(e.doc.key);break;case 1:i=i.add(e.doc.key)}return new e(t,n.fromCache,r,i)}},$f=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}},ep=class{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return Ce()?8:Uc(ge())>0?6:4}()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){let i={result:null};return this.gs(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ps(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;let n=new $f;return this.ys(e,t,n).next((r=>{if(i.result=r,this.As)return this.ws(e,t,n,r.size)}))})).next((()=>i.result))}ws(e,t,n,r){return n.documentReadCount<this.Vs?(Js()<=O.DEBUG&&N(`QueryEngine`,`SDK will not create cache indexes for query:`,Mu(t),`since it only creates cache indexes for collection contains`,`more than or equal to`,this.Vs,`documents`),V.resolve()):(Js()<=O.DEBUG&&N(`QueryEngine`,`Query:`,Mu(t),`scans`,n.documentReadCount,`local documents and returns`,r,`documents as results.`),n.documentReadCount>this.ds*r?(Js()<=O.DEBUG&&N(`QueryEngine`,`The SDK decides to create cache indexes for query:`,Mu(t),`as using cache indexes may help improve performance.`),this.indexManager.createTargetIndexes(e,Tu(t))):V.resolve())}gs(e,t){if(xu(t))return V.resolve(null);let n=Tu(t);return this.indexManager.getIndexType(e,n).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=ku(t,null,`F`),n=Tu(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{let i=J(...r);return this.fs.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{let a=this.bs(t,r);return this.Ss(t,a,i,n.readTime)?this.gs(e,ku(t,null,`F`)):this.Ds(e,a,t,n)}))))})))))}ps(e,t,n,r){return xu(t)||r.isEqual(B.min())?V.resolve(null):this.fs.getDocuments(e,n).next((i=>{let a=this.bs(t,i);return this.Ss(t,a,n,r)?V.resolve(null):(Js()<=O.DEBUG&&N(`QueryEngine`,`Re-using previous result from %s to execute query: %s`,r.toString(),Mu(t)),this.Ds(e,a,t,Ic(r,Pc)).next((e=>e)))}))}bs(e,t){let n=new ol(Fu(e));return t.forEach(((t,r)=>{Nu(e,r)&&(n=n.add(r))})),n}Ss(e,t,n,r){if(e.limit===null)return!1;if(n.size!==t.size)return!0;let i=e.limitType===`F`?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}ys(e,t,n){return Js()<=O.DEBUG&&N(`QueryEngine`,`Using full collection scan to execute query:`,Mu(t)),this.fs.getDocumentsMatchingQuery(e,t,Rc.min(),n)}Ds(e,t,n,r){return this.fs.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}},tp=`LocalStore`,np=3e8,rp=class{constructor(e,t,n,r){this.persistence=e,this.Cs=t,this.serializer=r,this.vs=new rl(R),this.Fs=new Lu((e=>hu(e)),gu),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(n)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Rf(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction(`Collect garbage`,`readwrite-primary`,(t=>e.collect(t,this.vs)))}};function ip(e,t,n,r){return new rp(e,t,n,r)}async function ap(e,t){let n=F(e);return await n.persistence.runTransaction(`Handle user change`,`readonly`,(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.Os(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{let i=[],a=[],o=J();for(let e of r){i.push(e.batchId);for(let t of e.mutations)o=o.add(t.key)}for(let e of t){a.push(e.batchId);for(let t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({Ns:e,removedBatchIds:i,addedBatchIds:a})))}))}))}function op(e){let t=F(e);return t.persistence.runTransaction(`Get last remote snapshot version`,`readonly`,(e=>t.li.getLastRemoteSnapshotVersion(e)))}function sp(e,t){let n=F(e),r=t.snapshotVersion,i=n.vs;return n.persistence.runTransaction(`Apply remote event`,`readwrite-primary`,(e=>{let a=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;let o=[];t.targetChanges.forEach(((a,s)=>{let c=i.get(s);if(!c)return;o.push(n.li.removeMatchingKeys(e,a.removedDocuments,s).next((()=>n.li.addMatchingKeys(e,a.addedDocuments,s))));let l=c.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.get(s)===null?a.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(a.resumeToken,r)):l=l.withResumeToken(ul.EMPTY_BYTE_STRING,B.min()).withLastLimboFreeSnapshotVersion(B.min()),i=i.insert(s,l),function(e,t,n){return e.resumeToken.approximateByteSize()===0||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=np?!0:n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,a)&&o.push(n.li.updateTargetData(e,l))}));let s=zu(),c=J();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(cp(e,a,t.documentUpdates).next((e=>{s=e.Bs,c=e.Ls}))),!r.isEqual(B.min())){let t=n.li.getLastRemoteSnapshotVersion(e).next((t=>n.li.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return V.waitFor(o).next((()=>a.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,s,c))).next((()=>s))})).then((e=>(n.vs=i,e)))}function cp(e,t,n){let r=J(),i=J();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=zu();return n.forEach(((n,a)=>{let o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(B.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||a.version.compareTo(o.version)===0&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):N(tp,`Ignoring outdated watch update for `,n,`. Current version:`,o.version,` Watch version:`,a.version)})),{Bs:r,Ls:i}}))}function lp(e,t){let n=F(e);return n.persistence.runTransaction(`Allocate target`,`readwrite`,(e=>{let r;return n.li.getTargetData(e,t).next((i=>i?(r=i,V.resolve(r)):n.li.allocateTargetId(e).next((i=>(r=new yf(t,i,`TargetPurposeListen`,e.currentSequenceNumber),n.li.addTargetData(e,r).next((()=>r)))))))})).then((e=>{let r=n.vs.get(e.targetId);return(r===null||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.vs=n.vs.insert(e.targetId,e),n.Fs.set(t,e.targetId)),e}))}async function up(e,t,n){let r=F(e),i=r.vs.get(t),a=n?`readwrite`:`readwrite-primary`;try{n||await r.persistence.runTransaction(`Release target`,a,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Wc(e))throw e;N(tp,`Failed to update sequence numbers for target ${t}: ${e}`)}r.vs=r.vs.remove(t),r.Fs.delete(i.target)}function dp(e,t,n){let r=F(e),i=B.min(),a=J();return r.persistence.runTransaction(`Execute query`,`readwrite`,(e=>function(e,t,n){let r=F(e),i=r.Fs.get(n);return i===void 0?r.li.getTargetData(t,n):V.resolve(r.vs.get(i))}(r,e,Tu(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(e,t.targetId).next((e=>{a=e}))})).next((()=>r.Cs.getDocumentsMatchingQuery(e,t,n?i:B.min(),n?a:J()))).next((e=>(fp(r,Pu(t),e),{documents:e,ks:a})))))}function fp(e,t,n){let r=e.Ms.get(t)||B.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ms.set(t,r)}var pp=class{constructor(){this.activeTargetIds=qu()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},mp=class{constructor(){this.vo=new pp,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||`not-current`}updateQueryState(e,t,n){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new pp,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}},hp=class{Mo(e){}shutdown(){}},gp=`ConnectivityMonitor`,_p=class{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener(`online`,this.xo),window.removeEventListener(`offline`,this.No)}ko(){window.addEventListener(`online`,this.xo),window.addEventListener(`offline`,this.No)}Oo(){N(gp,`Network connectivity changed: AVAILABLE`);for(let e of this.Lo)e(0)}Bo(){N(gp,`Network connectivity changed: UNAVAILABLE`);for(let e of this.Lo)e(1)}static v(){return typeof window<`u`&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}},vp=null;function yp(){return vp===null?vp=function(){return 268435456+Math.round(2147483648*Math.random())}():vp++,`0x`+vp.toString(16)}var bp=`RestConnection`,xp={BatchGetDocuments:`batchGet`,Commit:`commit`,RunQuery:`runQuery`,RunAggregationQuery:`runAggregationQuery`,ExecutePipeline:`executePipeline`},Sp=class{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?`https`:`http`,n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.qo=t+`://`+e.host,this.Uo=`projects/${n}/databases/${r}`,this.$o=this.databaseId.database===Sl?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Wo(e,t,n,r,i){let a=yp(),o=this.Qo(e,t.toUriEncodedString());N(bp,`Sending RPC '${e}' ${a}:`,o,n);let s={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(s,r,i);let{host:c}=new URL(o),l=T(c);return this.zo(e,o,s,n,l).then((t=>(N(bp,`Received RPC '${e}' ${a}: `,t),t)),(t=>{throw Xs(bp,`RPC '${e}' ${a} failed with error: `,t,`url: `,o,`request:`,n),t}))}jo(e,t,n,r,i,a){return this.Wo(e,t,n,r,i)}Go(e,t,n){e[`X-Goog-Api-Client`]=function(){return`gl-js/ fire/`+Gs}(),e[`Content-Type`]=`text/plain`,this.databaseInfo.appId&&(e[`X-Firebase-GMPID`]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}Qo(e,t){let n=xp[e],r=`${this.qo}/v1/${t}:${n}`;return this.databaseInfo.apiKey&&(r=`${r}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),r}terminate(){}},Cp=class{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}},wp=`WebChannelConnection`,Tp=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))},Ep=class e extends Sp{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){e.c_||=(Tp(Hs(),Vs.STAT_EVENT,(e=>{e.stat===Bs.PROXY?N(wp,`STAT_EVENT: detected buffering proxy`):e.stat===Bs.NOPROXY&&N(wp,`STAT_EVENT: detected no buffering proxy`)})),!0)}zo(e,t,n,r,i){let a=yp();return new Promise(((i,o)=>{let s=new Is;s.setWithCredentials(!0),s.listenOnce(Rs.COMPLETE,(()=>{try{switch(s.getLastErrorCode()){case zs.NO_ERROR:let t=s.getResponseJson();N(wp,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(t)),i(t);break;case zs.TIMEOUT:N(wp,`RPC '${e}' ${a} timed out`),o(new L(I.DEADLINE_EXCEEDED,`Request time out`));break;case zs.HTTP_ERROR:let n=s.getStatus();if(N(wp,`RPC '${e}' ${a} failed with status:`,n,`response text:`,s.getResponseText()),n>0){let e=s.getResponseJson();Array.isArray(e)&&(e=e[0]);let t=e?.error;t&&t.status&&t.message?o(new L(function(e){let t=e.toLowerCase().replace(/_/g,`-`);return Object.values(I).indexOf(t)>=0?t:I.UNKNOWN}(t.status),t.message)):o(new L(I.UNKNOWN,`Server responded with status `+s.getStatus()))}else o(new L(I.UNAVAILABLE,`Connection failed.`));break;default:P(9055,{l_:e,streamId:a,h_:s.getLastErrorCode(),P_:s.getLastError()})}}finally{N(wp,`RPC '${e}' ${a} completed.`)}}));let c=JSON.stringify(r);N(wp,`RPC '${e}' ${a} sending request:`,r),s.send(t,`POST`,c,n,15)}))}T_(t,n,r){let i=yp(),a=[this.qo,`/`,`google.firestore.v1.Firestore`,`/`,t,`/channel`],o=this.createWebChannelTransport(),s={httpSessionIdParam:`gsessionid`,initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(s.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(s.useFetchStreams=!0),this.Go(s.initMessageHeaders,n,r),s.encodeInitMessageHeaders=!0;let l=a.join(``);N(wp,`Creating RPC '${t}' stream ${i}: ${l}`,s);let u=o.createWebChannel(l,s);this.I_(u);let d=!1,f=!1,p=new Cp({Ho:e=>{f?N(wp,`Not sending because RPC '${t}' stream ${i} is closed:`,e):(d||=(N(wp,`Opening RPC '${t}' stream ${i} transport.`),u.open(),!0),N(wp,`RPC '${t}' stream ${i} sending:`,e),u.send(e))},Jo:()=>u.close()});return Tp(u,Ls.EventType.OPEN,(()=>{f||(N(wp,`RPC '${t}' stream ${i} transport opened.`),p.i_())})),Tp(u,Ls.EventType.CLOSE,(()=>{f||(f=!0,N(wp,`RPC '${t}' stream ${i} transport closed`),p.o_(),this.E_(u))})),Tp(u,Ls.EventType.ERROR,(e=>{f||(f=!0,Xs(wp,`RPC '${t}' stream ${i} transport errored. Name:`,e.name,`Message:`,e.message),p.o_(new L(I.UNAVAILABLE,`The operation could not be completed`)))})),Tp(u,Ls.EventType.MESSAGE,(e=>{if(!f){let n=e.data[0];$s(!!n,16349);let r=n,a=r?.error||r[0]?.error;if(a){N(wp,`RPC '${t}' stream ${i} received error:`,a);let e=a.status,n=function(e){let t=Td[e];if(t!==void 0)return Ed(t)}(e),r=a.message;e===`NOT_FOUND`&&r.includes(`database`)&&r.includes(`does not exist`)&&r.includes(this.databaseId.database)&&Xs(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),n===void 0&&(n=I.INTERNAL,r=`Unknown error status: `+e+` with message `+a.message),f=!0,p.o_(new L(n,r)),u.close()}else N(wp,`RPC '${t}' stream ${i} received:`,n),p.__(n)}})),e.u_(),setTimeout((()=>{p.s_()}),0),p}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,n){super.Go(e,t,n),this.databaseInfo.apiKey&&(e[`x-goog-api-key`]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Us()}};function Dp(e){return new Ep(e)}function Op(){return typeof document<`u`?document:null}function kp(e){return new Gd(e,!0)}Ep.c_=!1;var Ap=class{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Ci=e,this.timerId=t,this.R_=n,this.A_=r,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();let t=Math.floor(this.d_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&N(`ExponentialBackoff`,`Backing off for ${r} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}},jp=`PersistentStream`,Mp=class{constructor(e,t,n,r,i,a,o,s){this.Ci=e,this.b_=n,this.S_=r,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=s,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Ap(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state===4?this.N_():this.auth()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&=(this.C_.cancel(),null)}U_(){this.v_&&=(this.v_.cancel(),null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e===4?t&&t.code===I.RESOURCE_EXHAUSTED?(Ys(t.toString()),Ys(`Using maximum backoff delay to prevent overloading the backend.`),this.M_.g_()):t&&t.code===I.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()):this.M_.reset(),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;let e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.D_===t&&this.G_(e,n)}),(t=>{e((()=>{let e=new L(I.UNKNOWN,`Fetching auth token failed: `+t.message);return this.z_(e)}))}))}G_(e,t){let n=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{n((()=>this.listener.Zo()))})),this.stream.Yo((()=>{n((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((e=>{n((()=>this.z_(e)))})),this.stream.onMessage((e=>{n((()=>++this.F_==1?this.H_(e):this.onNext(e)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return N(jp,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(N(jp,`stream callback skipped by getCloseGuardedDispatcher.`),Promise.resolve())))}}},Np=class extends Mp{constructor(e,t,n,r,i,a){super(e,`listen_stream_connection_backoff`,`listen_stream_idle`,`health_check_timeout`,t,n,r,a),this.serializer=i}j_(e,t){return this.connection.T_(`Listen`,e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=af(this.serializer,e),n=function(e){if(!(`targetChange`in e))return B.min();let t=e.targetChange;return t.targetIds&&t.targetIds.length?B.min():t.readTime?Yd(t.readTime):B.min()}(e);return this.listener.J_(t,n)}Z_(e){let t={};t.database=nf(this.serializer),t.addTarget=function(e,t){let n,r=t.target;if(n=_u(r)?{documents:of(e,r)}:{query:sf(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Jd(e,t.resumeToken);let r=Kd(e,t.expectedCount);r!==null&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(B.min())>0){n.readTime=qd(e,t.snapshotVersion.toTimestamp());let r=Kd(e,t.expectedCount);r!==null&&(n.expectedCount=r)}return n}(this.serializer,e);let n=lf(this.serializer,e);n&&(t.labels=n),this.K_(t)}X_(e){let t={};t.database=nf(this.serializer),t.removeTarget=e,this.K_(t)}},Pp=class{},Fp=class extends Pp{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new L(I.FAILED_PRECONDITION,`The client has already been terminated.`)}Wo(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,a])=>this.connection.Wo(e,Zd(t,n),r,i,a))).catch((e=>{throw e.name===`FirebaseError`?(e.code===I.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new L(I.UNKNOWN,e.toString())}))}jo(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.jo(e,Zd(t,n),r,a,o,i))).catch((e=>{throw e.name===`FirebaseError`?(e.code===I.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new L(I.UNKNOWN,e.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}};function Ip(e,t,n,r){return new Fp(e,t,n,r)}var Lp=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=`Unknown`,this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca(`Unknown`),this._a=this.asyncQueue.enqueueAfterDelay(`online_state_timeout`,1e4,(()=>(this._a=null,this.la(`Backend didn't respond within 10 seconds.`),this.ca(`Offline`),Promise.resolve()))))}ha(e){this.state===`Online`?this.ca(`Unknown`):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca(`Offline`)))}set(e){this.Pa(),this.oa=0,e===`Online`&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ys(t),this.aa=!1):N(`OnlineStateTracker`,t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}},Rp=`RemoteStore`,zp=class{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo((e=>{n.enqueueAndForget((async()=>{Jp(this)&&(N(Rp,`Restarting streams for network reachability change.`),await async function(e){let t=F(e);t.Ea.add(4),await Vp(t),t.Va.set(`Unknown`),t.Ea.delete(4),await Bp(t)}(this))}))})),this.Va=new Lp(n,r)}};async function Bp(e){if(Jp(e))for(let t of e.Ra)await t(!0)}async function Vp(e){for(let t of e.Ra)await t(!1)}function Hp(e,t){let n=F(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),qp(n)?Kp(n):rm(n).O_()&&Wp(n,t))}function Up(e,t){let n=F(e),r=rm(n);n.Ia.delete(t),r.O_()&&Gp(n,t),n.Ia.size===0&&(r.O_()?r.L_():Jp(n)&&n.Va.set(`Unknown`))}function Wp(e,t){if(e.da.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(B.min())>0){let n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}rm(e).Z_(t)}function Gp(e,t){e.da.$e(t),rm(e).X_(t)}function Kp(e){e.da=new zd({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),rm(e).start(),e.Va.ua()}function qp(e){return Jp(e)&&!rm(e).x_()&&e.Ia.size>0}function Jp(e){return F(e).Ea.size===0}function Yp(e){e.da=void 0}async function Xp(e){e.Va.set(`Online`)}async function Zp(e){e.Ia.forEach(((t,n)=>{Wp(e,t)}))}async function Qp(e,t){Yp(e),qp(e)?(e.Va.ha(t),Kp(e)):e.Va.set(`Unknown`)}async function $p(e,t,n){if(e.Va.set(`Online`),t instanceof Ld&&t.state===2&&t.cause)try{await async function(e,t){let n=t.cause;for(let r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.da.removeTarget(r))}(e,t)}catch(n){N(Rp,`Failed to remove targets %s: %s `,t.targetIds.join(`,`),n),await em(e,n)}else if(t instanceof Fd?e.da.Xe(t):t instanceof Id?e.da.st(t):e.da.tt(t),!n.isEqual(B.min()))try{let t=await op(e.localStore);n.compareTo(t)>=0&&await function(e,t){let n=e.da.Tt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){let i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{let r=e.Ia.get(t);r&&(e.Ia.set(t,r.withResumeToken(ul.EMPTY_BYTE_STRING,r.snapshotVersion)),Gp(e,t),Wp(e,new yf(r.target,t,n,r.sequenceNumber)))})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){N(Rp,`Failed to raise snapshot:`,t),await em(e,t)}}async function em(e,t,n){if(!Wc(t))throw t;e.Ea.add(1),await Vp(e),e.Va.set(`Offline`),n||=()=>op(e.localStore),e.asyncQueue.enqueueRetryable((async()=>{N(Rp,`Retrying IndexedDB access`),await n(),e.Ea.delete(1),await Bp(e)}))}async function tm(e,t){let n=F(e);n.asyncQueue.verifyOperationInProgress(),N(Rp,`RemoteStore received new credentials`);let r=Jp(n);n.Ea.add(3),await Vp(n),r&&n.Va.set(`Unknown`),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Bp(n)}async function nm(e,t){let n=F(e);t?(n.Ea.delete(2),await Bp(n)):t||(n.Ea.add(2),await Vp(n),n.Va.set(`Unknown`))}function rm(e){return e.ma||(e.ma=function(e,t,n){let r=F(e);return r.sa(),new Np(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:Xp.bind(null,e),Yo:Zp.bind(null,e),t_:Qp.bind(null,e),J_:$p.bind(null,e)}),e.Ra.push((async t=>{t?(e.ma.B_(),qp(e)?Kp(e):e.Va.set(`Unknown`)):(await e.ma.stop(),Yp(e))}))),e.ma}var im=class e{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new ec,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,a){let o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new L(I.CANCELLED,`Operation cancelled`+(e?`: `+e:``))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle===null?Promise.resolve():(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e))))))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function am(e,t){if(Ys(`AsyncQueue`,`${t}: ${e}`),Wc(e))return new L(I.UNAVAILABLE,`${t}: ${e}`);throw e}var om=class e{static emptySet(t){return new e(t.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||z.comparator(t.key,n.key):(e,t)=>z.comparator(e.key,t.key),this.keyedMap=Vu(),this.sortedSet=new rl(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){let e=n.getNext().key,t=r.getNext().key;if(!e.isEqual(t))return!1}return!0}toString(){let e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?`DocumentSet ()`:`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(t,n){let r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}},sm=class{constructor(){this.ga=new rl(z.comparator)}track(e){let t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):P(63341,{Vt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}},cm=class e{constructor(e,t,n,r,i,a,o,s,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=s,this.hasCachedResults=c}static fromInitialDocuments(t,n,r,i,a){let o=[];return n.forEach((e=>{o.push({type:0,doc:e})})),new e(t,n,om.emptySet(n),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Au(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}},lm=class{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}},um=class{constructor(){this.queries=dm(),this.onlineState=`Unknown`,this.Ca=new Set}terminate(){(function(e,t){let n=F(e),r=n.queries;n.queries=dm(),r.forEach(((e,n)=>{for(let e of n.ba)e.onError(t)}))})(this,new L(I.ABORTED,`Firestore shutting down`))}};function dm(){return new Lu((e=>ju(e)),Au)}async function fm(e,t){let n=F(e),r=3,i=t.query,a=n.queries.get(i);a?!a.Sa()&&t.Da()&&(r=2):(a=new lm,r=t.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){let n=am(e,`Initialization of query '${Mu(t.query)}' failed`);t.onError(n);return}n.queries.set(i,a),a.ba.push(t),t.va(n.onlineState),a.wa&&t.Fa(a.wa)&&gm(n)}async function pm(e,t){let n=F(e),r=t.query,i=3,a=n.queries.get(r);if(a){let e=a.ba.indexOf(t);e>=0&&(a.ba.splice(e,1),a.ba.length===0?i=t.Da()?0:1:!a.Sa()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function mm(e,t){let n=F(e),r=!1;for(let e of t){let t=e.query,i=n.queries.get(t);if(i){for(let t of i.ba)t.Fa(e)&&(r=!0);i.wa=e}}r&&gm(n)}function hm(e,t,n){let r=F(e),i=r.queries.get(t);if(i)for(let e of i.ba)e.onError(n);r.queries.delete(t)}function gm(e){e.Ca.forEach((e=>{e.next()}))}var _m,vm;(vm=_m||={}).Ma=`default`,vm.Cache=`cache`;var ym=class{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState=`Unknown`,this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){let t=[];for(let n of e.docChanges)n.type!==3&&t.push(n);e=new cm(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let n=t!==`Offline`;return(!this.options.Ka||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t===`Offline`)}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=cm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==_m.Cache}},bm=class{constructor(e){this.key=e}},xm=class{constructor(e){this.key=e}},Sm=class{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=J(),this.mutatedKeys=J(),this.eu=Fu(e),this.tu=new om(this.eu)}get nu(){return this.Za}ru(e,t){let n=t?t.iu:new sm,r=t?t.tu:this.tu,i=t?t.mutatedKeys:this.mutatedKeys,a=r,o=!1,s=this.query.limitType===`F`&&r.size===this.query.limit?r.last():null,c=this.query.limitType===`L`&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{let l=r.get(e),u=Nu(this.query,t)?t:null,d=!!l&&this.mutatedKeys.has(l.key),f=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations),p=!1;l&&u?l.data.isEqual(u.data)?d!==f&&(n.track({type:3,doc:u}),p=!0):this.su(l,u)||(n.track({type:2,doc:u}),p=!0,(s&&this.eu(u,s)>0||c&&this.eu(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),p=!0):l&&!u&&(n.track({type:1,doc:l}),p=!0,(s||c)&&(o=!0)),p&&(u?(a=a.add(u),i=f?i.add(e):i.delete(e)):(a=a.delete(e),i=i.delete(e)))})),this.query.limit!==null)for(;a.size>this.query.limit;){let e=this.query.limitType===`F`?a.last():a.first();a=a.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:a,iu:n,Ss:o,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){let i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let a=e.iu.ya();a.sort(((e,t)=>function(e,t){let n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return P(20277,{Vt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc))),this.ou(n),r??=!1;let o=t&&!r?this._u():[],s=this.Ya.size===0&&this.current&&!r?1:0,c=s!==this.Xa;return this.Xa=s,a.length!==0||c?{snapshot:new cm(this.query,e.tu,i,a,e.mutatedKeys,s===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e===`Offline`?(this.current=!1,this.applyChanges({tu:this.tu,iu:new sm,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((e=>this.Za=this.Za.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Za=this.Za.delete(e))),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Ya;this.Ya=J(),this.tu.forEach((e=>{this.uu(e.key)&&(this.Ya=this.Ya.add(e.key))}));let t=[];return e.forEach((e=>{this.Ya.has(e)||t.push(new xm(e))})),this.Ya.forEach((n=>{e.has(n)||t.push(new bm(n))})),t}cu(e){this.Za=e.ks,this.Ya=J();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return cm.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}},Cm=`SyncEngine`,wm=class{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}},Tm=class{constructor(e){this.key=e,this.hu=!1}},Em=class{constructor(e,t,n,r,i,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Lu((e=>ju(e)),Au),this.Iu=new Map,this.Eu=new Set,this.Ru=new rl(z.comparator),this.Au=new Map,this.Vu=new Hf,this.du={},this.mu=new Map,this.fu=Of.ar(),this.onlineState=`Unknown`,this.gu=void 0}get isPrimaryClient(){return!0===this.gu}};async function Dm(e,t,n=!0){let r=Wm(e),i,a=r.Tu.get(t);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await km(r,t,n,!0),i}async function Om(e,t){await km(Wm(e),t,!0,!1)}async function km(e,t,n,r){let i=await lp(e.localStore,Tu(t)),a=i.targetId,o=e.sharedClientState.addLocalQueryTarget(a,n),s;return r&&(s=await Am(e,t,a,o===`current`,i.resumeToken)),e.isPrimaryClient&&n&&Hp(e.remoteStore,i),s}async function Am(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Ss&&(i=await dp(e.localStore,t.query,!1).then((({documents:e})=>t.view.ru(e,i))));let a=r&&r.targetChanges.get(t.targetId),o=r&&r.targetMismatches.get(t.targetId)!=null,s=t.view.applyChanges(i,e.isPrimaryClient,a,o);return Rm(e,t.targetId,s.au),s.snapshot}(e,t,n,r);let a=await dp(e.localStore,t,!0),o=new Sm(t,a.ks),s=o.ru(a.documents),c=Pd.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!==`Offline`,i),l=o.applyChanges(s,e.isPrimaryClient,c);Rm(e,n,l.au);let u=new wm(t,n,o);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),l.snapshot}async function jm(e,t,n){let r=F(e),i=r.Tu.get(t),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((e=>!Au(e,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await up(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Up(r.remoteStore,i.targetId),Im(r,i.targetId)})).catch(Hc)):(Im(r,i.targetId),await up(r.localStore,i.targetId,!0))}async function Mm(e,t){let n=F(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Up(n.remoteStore,r.targetId))}async function Nm(e,t){let n=F(e);try{let e=await sp(n.localStore,t);t.targetChanges.forEach(((e,t)=>{let r=n.Au.get(t);r&&($s(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?$s(r.hu,14607):e.removedDocuments.size>0&&($s(r.hu,42227),r.hu=!1))})),await Vm(n,e,t)}catch(e){await Hc(e)}}function Pm(e,t,n){let r=F(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let e=[];r.Tu.forEach(((n,r)=>{let i=r.view.va(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){let n=F(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(let e of n.ba)e.va(t)&&(r=!0)})),r&&gm(n)}(r.eventManager,t),e.length&&r.Pu.J_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Fm(e,t,n){let r=F(e);r.sharedClientState.updateQueryState(t,`rejected`,n);let i=r.Au.get(t),a=i&&i.key;if(a){let e=new rl(z.comparator);e=e.insert(a,Gl.newNoDocument(a,B.min()));let n=J().add(a);await Nm(r,new Q(B.min(),new Map,new rl(R),e,n)),r.Ru=r.Ru.remove(a),r.Au.delete(t),Bm(r)}else await up(r.localStore,t,!1).then((()=>Im(r,t,n))).catch(Hc)}function Im(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(let r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Vu.Gr(t).forEach((t=>{e.Vu.containsKey(t)||Lm(e,t)}))}function Lm(e,t){e.Eu.delete(t.path.canonicalString());let n=e.Ru.get(t);n!==null&&(Up(e.remoteStore,n),e.Ru=e.Ru.remove(t),e.Au.delete(n),Bm(e))}function Rm(e,t,n){for(let r of n)r instanceof bm?(e.Vu.addReference(r.key,t),zm(e,r)):r instanceof xm?(N(Cm,`Document no longer in limbo: `+r.key),e.Vu.removeReference(r.key,t),e.Vu.containsKey(r.key)||Lm(e,r.key)):P(19791,{wu:r})}function zm(e,t){let n=t.key,r=n.path.canonicalString();e.Ru.get(n)||e.Eu.has(r)||(N(Cm,`New document in limbo: `+n),e.Eu.add(r),Bm(e))}function Bm(e){for(;e.Eu.size>0&&e.Ru.size<e.maxConcurrentLimboResolutions;){let t=e.Eu.values().next().value;e.Eu.delete(t);let n=new z(vc.fromString(t)),r=e.fu.next();e.Au.set(r,new Tm(n)),e.Ru=e.Ru.insert(n,r),Hp(e.remoteStore,new yf(Tu(bu(n.path)),r,`TargetPurposeLimboResolution`,Gc.ce))}}async function Vm(e,t,n){let r=F(e),i=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((e,s)=>{o.push(r.pu(s,t,n).then((e=>{if((e||n)&&r.isPrimaryClient){let t=e?!e.fromCache:n?.targetChanges.get(s.targetId)?.current;r.sharedClientState.updateQueryState(s.targetId,t?`current`:`not-current`)}if(e){i.push(e);let t=Qf.Es(s.targetId,e);a.push(t)}})))})),await Promise.all(o),r.Pu.J_(i),await async function(e,t){let n=F(e);try{await n.persistence.runTransaction(`notifyLocalViewChanges`,`readwrite`,(e=>V.forEach(t,(t=>V.forEach(t.Ts,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>V.forEach(t.Is,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Wc(e))throw e;N(tp,`Failed to update sequence numbers: `+e)}for(let e of t){let t=e.targetId;if(!e.fromCache){let e=n.vs.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.vs=n.vs.insert(t,i)}}}(r.localStore,a))}async function Hm(e,t){let n=F(e);if(!n.currentUser.isEqual(t)){N(Cm,`User change. New user:`,t.toKey());let e=await ap(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach((e=>{e.forEach((e=>{e.reject(new L(I.CANCELLED,t))}))})),e.mu.clear()}(n,`'waitForPendingWrites' promise is rejected due to a user change.`),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Vm(n,e.Ns)}}function Um(e,t){let n=F(e),r=n.Au.get(t);if(r&&r.hu)return J().add(r.key);{let e=J(),r=n.Iu.get(t);if(!r)return e;for(let t of r){let r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function Wm(e){let t=F(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Nm.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Um.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Fm.bind(null,t),t.Pu.J_=mm.bind(null,t.eventManager),t.Pu.yu=hm.bind(null,t.eventManager),t}var Gm=class{constructor(){this.kind=`memory`,this.synchronizeTabs=!1}async initialize(e){this.serializer=kp(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return ip(this.persistence,new ep,e.initialUser,this.serializer)}Cu(e){return new Jf(Xf.Vi,this.serializer)}Du(e){return new mp}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}};Gm.provider={build:()=>new Gm};var Km=class extends Gm{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){$s(this.persistence.referenceDelegate instanceof Zf,46915);let n=this.persistence.referenceDelegate.garbageCollector;return new Nf(n,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes===void 0?Df.DEFAULT:Df.withCacheSize(this.cacheSizeBytes);return new Jf((e=>Zf.Vi(e,t)),this.serializer)}},qm=class{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Pm(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Hm.bind(null,this.syncEngine),await nm(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new um}()}createDatastore(e){let t=kp(e.databaseInfo.databaseId),n=Dp(e.databaseInfo);return Ip(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new zp(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>Pm(this.syncEngine,e,0)),function(){return _p.v()?new _p:new hp}())}createSyncEngine(e,t){return function(e,t,n,r,i,a,o){let s=new Em(e,t,n,r,i,a);return o&&(s.gu=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function(e){let t=F(e);N(Rp,`RemoteStore shutting down.`),t.Ea.add(5),await Vp(t),t.Aa.shutdown(),t.Va.set(`Unknown`)}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}};qm.provider={build:()=>new qm};var Jm=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ys(`Uncaught Error in snapshot listener:`,e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}},Ym=`FirestoreClient`,Xm=class{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this._databaseInfo=r,this.user=Ws.UNAUTHENTICATED,this.clientId=uc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{N(Ym,`Received user=`,e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(N(Ym,`Received new app check token=`,e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ec;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let n=am(t,`Failed to shutdown persistence`);e.reject(n)}})),e.promise}};async function Zm(e,t){e.asyncQueue.verifyOperationInProgress(),N(Ym,`Initializing OfflineComponentProvider`);let n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await ap(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Qm(e,t){e.asyncQueue.verifyOperationInProgress();let n=await $m(e);N(Ym,`Initializing OnlineComponentProvider`),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>tm(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>tm(t.remoteStore,n))),e._onlineComponents=t}async function $m(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){N(Ym,`Using user provided OfflineComponentProvider`);try{await Zm(e,e._uninitializedComponentsProvider._offline)}catch(t){let n=t;if(!function(e){return e.name===`FirebaseError`?e.code===I.FAILED_PRECONDITION||e.code===I.UNIMPLEMENTED:!(typeof DOMException<`u`&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}(n))throw n;Xs(`Error using user provided cache. Falling back to memory cache: `+n),await Zm(e,new Gm)}}else N(Ym,`Using default OfflineComponentProvider`),await Zm(e,new Km(void 0));return e._offlineComponents}async function eh(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(N(Ym,`Using user provided OnlineComponentProvider`),await Qm(e,e._uninitializedComponentsProvider._online)):(N(Ym,`Using default OnlineComponentProvider`),await Qm(e,new qm))),e._onlineComponents}async function th(e){let t=await eh(e),n=t.eventManager;return n.onListen=Dm.bind(null,t.syncEngine),n.onUnlisten=jm.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Om.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Mm.bind(null,t.syncEngine),n}function nh(e,t,n={}){let r=new ec;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){let a=new Jm({next:s=>{a.Nu(),t.enqueueAndForget((()=>pm(e,o)));let c=s.docs.has(n);!c&&s.fromCache?i.reject(new L(I.UNAVAILABLE,`Failed to get document because the client is offline.`)):c&&s.fromCache&&r&&r.source===`server`?i.reject(new L(I.UNAVAILABLE,`Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)`)):i.resolve(s)},error:e=>i.reject(e)}),o=new ym(bu(n.path),a,{includeMetadataChanges:!0,Ka:!0});return fm(e,o)}(await th(e),e.asyncQueue,t,n,r))),r.promise}function rh(e,t,n={}){let r=new ec;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){let a=new Jm({next:n=>{a.Nu(),t.enqueueAndForget((()=>pm(e,o))),n.fromCache&&r.source===`server`?i.reject(new L(I.UNAVAILABLE,`Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)`)):i.resolve(n)},error:e=>i.reject(e)}),o=new ym(n,a,{includeMetadataChanges:!0,Ka:!0});return fm(e,o)}(await th(e),e.asyncQueue,t,n,r))),r.promise}function ih(e){let t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}var ah=`ComponentProvider`,oh=new Map;function sh(e,t,n,r,i){return new xl(e,t,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,ih(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}var ch=`firestore.googleapis.com`,lh=!0,uh=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new L(I.INVALID_ARGUMENT,`Can't provide ssl option if host option is not set`);this.host=ch,this.ssl=lh}else this.host=e.host,this.ssl=e.ssl??lh;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Ef;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Af)throw new L(I.INVALID_ARGUMENT,`cacheSizeBytes must be at least 1048576`);this.cacheSizeBytes=e.cacheSizeBytes}Sc(`experimentalForceLongPolling`,e.experimentalForceLongPolling,`experimentalAutoDetectLongPolling`,e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ih(e.experimentalLongPollingOptions??{}),function(e){if(e.timeoutSeconds!==void 0){if(isNaN(e.timeoutSeconds))throw new L(I.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new L(I.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new L(I.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},dh=class{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type=`firestore-lite`,this._persistenceKey=`(lite)`,this._settings=new uh({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask=`notTerminated`}get app(){if(!this._app)throw new L(I.FAILED_PRECONDITION,`Firestore was not initialized using the Firebase SDK. 'app' is not available`);return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==`notTerminated`}_setSettings(e){if(this._settingsFrozen)throw new L(I.FAILED_PRECONDITION,`Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.`);this._settings=new uh(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(e){if(!e)return new nc;switch(e.type){case`firstParty`:return new oc(e.sessionIndex||`0`,e.iamToken||null,e.authTokenFactory||null);case`provider`:return e.client;default:throw new L(I.INVALID_ARGUMENT,`makeAuthCredentialsProvider failed due to invalid credential type`)}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask===`notTerminated`&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask===`notTerminated`?await this._terminate():this._terminateTask=`notTerminated`}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let t=oh.get(e);t&&(N(ah,`Removing Datastore`),oh.delete(e),t.terminate())}(this),Promise.resolve()}};function fh(e,t,n,r={}){e=Dc(e,dh);let i=T(t),a=e._getSettings(),o={...a,emulatorOptions:e._getEmulatorOptions()},s=`${t}:${n}`;i&&(E(`https://${s}`),D(`Firestore`,!0)),a.host!==ch&&a.host!==s&&Xs(`Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.`);let c={...a,host:s,ssl:i,emulatorOptions:r};if(!Me(c,o)&&(e._setSettings(c),r.mockUserToken)){let t,n;if(typeof r.mockUserToken==`string`)t=r.mockUserToken,n=Ws.MOCK_USER;else{t=de(r.mockUserToken,e._app?.options.projectId);let i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new L(I.INVALID_ARGUMENT,`mockUserToken must contain 'sub' or 'user_id' field!`);n=new Ws(i)}e._authCredentials=new rc(new tc(t,n))}}var ph=class e{constructor(e,t,n){this.converter=t,this._query=n,this.type=`query`,this.firestore=e}withConverter(t){return new e(this.firestore,t,this._query)}},mh=class e{constructor(e,t,n){this.converter=t,this._key=n,this.type=`document`,this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hh(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new e(this.firestore,t,this._key)}toJSON(){return{type:e._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,r){if(Ac(n,e._jsonSchema))return new e(t,r||null,new z(vc.fromString(n.referencePath)))}};mh._jsonSchemaVersion=`firestore/documentReference/1.0`,mh._jsonSchema={type:kc(`string`,mh._jsonSchemaVersion),referencePath:kc(`string`)};var hh=class e extends ph{constructor(e,t,n){super(e,t,bu(n)),this._path=n,this.type=`collection`}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new mh(this.firestore,null,new z(e))}withConverter(t){return new e(this.firestore,t,this._path)}};function gh(e,t,...n){if(e=Ve(e),xc(`collection`,`path`,t),e instanceof dh){let r=vc.fromString(t,...n);return wc(r),new hh(e,null,r)}{if(!(e instanceof mh||e instanceof hh))throw new L(I.INVALID_ARGUMENT,`Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore`);let r=e._path.child(vc.fromString(t,...n));return wc(r),new hh(e.firestore,null,r)}}function _h(e,t,...n){if(e=Ve(e),arguments.length===1&&(t=uc.newId()),xc(`doc`,`path`,t),e instanceof dh){let r=vc.fromString(t,...n);return Cc(r),new mh(e,null,new z(r))}{if(!(e instanceof mh||e instanceof hh))throw new L(I.INVALID_ARGUMENT,`Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore`);let r=e._path.child(vc.fromString(t,...n));return Cc(r),new mh(e.firestore,e instanceof hh?e.converter:null,new z(r))}}var vh=`AsyncQueue`,yh=class{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Ap(this,`async_queue_retry`),this._c=()=>{let e=Op();e&&N(vh,`Visibility state changed to `+e.visibilityState),this.M_.w_()},this.ac=e;let t=Op();t&&typeof t.addEventListener==`function`&&t.addEventListener(`visibilitychange`,this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=Op();t&&typeof t.removeEventListener==`function`&&t.removeEventListener(`visibilitychange`,this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));let t=new ec;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Wc(e))throw e;N(vh,`Operation failed with retryable error: `+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){let t=this.ac.then((()=>(this.rc=!0,e().catch((e=>{throw this.nc=e,this.rc=!1,Ys(`INTERNAL UNHANDLED ERROR: `,bh(e)),e})).then((e=>(this.rc=!1,e))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let r=im.createAndSchedule(this,e,t,n,(e=>this.hc(e)));return this.tc.push(r),r}uc(){this.nc&&P(47125,{Pc:bh(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(let t of this.tc)if(t.skipDelay(),e!==`all`&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function bh(e){let t=e.message||``;return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}var xh=class extends dh{constructor(e,t,n,r){super(e,t,n,r),this.type=`firestore`,this._queue=new yh,this._persistenceKey=r?.name||`[DEFAULT]`}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new yh(e),this._firestoreClient=void 0,await e}}};function Sh(e,t){let n=typeof e==`object`?e:mn(),r=typeof e==`string`?e:t||Sl,i=cn(n,`firestore`).getImmediate({identifier:r});if(!i._initialized){let e=se(`firestore`);e&&fh(i,...e)}return i}function Ch(e){if(e._terminated)throw new L(I.FAILED_PRECONDITION,`The client has already been terminated.`);return e._firestoreClient||wh(e),e._firestoreClient}function wh(e){let t=e._freezeSettings(),n=sh(e._databaseId,e._app?.options.appId||``,e._persistenceKey,e._app?.options.apiKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new Xm(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(e){let t=e?._online.build();return{_offline:e?._offline.build(t),_online:t}}(e._componentsProvider))}var Th=class e{constructor(e){this._byteString=e}static fromBase64String(t){try{return new e(ul.fromBase64String(t))}catch(e){throw new L(I.INVALID_ARGUMENT,`Failed to construct data from Base64 string: `+e)}}static fromUint8Array(t){return new e(ul.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return`Bytes(base64: `+this.toBase64()+`)`}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:e._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Ac(t,e._jsonSchema))return e.fromBase64String(t.bytes)}};Th._jsonSchemaVersion=`firestore/bytes/1.0`,Th._jsonSchema={type:kc(`string`,Th._jsonSchemaVersion),bytes:kc(`string`)};var Eh=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new L(I.INVALID_ARGUMENT,`Invalid field name at argument $(i + 1). Field names must not be empty.`);this._internalPath=new bc(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}},Dh=class{constructor(e){this._methodName=e}},Oh=class e{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new L(I.INVALID_ARGUMENT,`Latitude must be a number between -90 and 90, but was: `+e);if(!isFinite(t)||t<-180||t>180)throw new L(I.INVALID_ARGUMENT,`Longitude must be a number between -180 and 180, but was: `+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return R(this._lat,e._lat)||R(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:e._jsonSchemaVersion}}static fromJSON(t){if(Ac(t,e._jsonSchema))return new e(t.latitude,t.longitude)}};Oh._jsonSchemaVersion=`firestore/geoPoint/1.0`,Oh._jsonSchema={type:kc(`string`,Oh._jsonSchemaVersion),latitude:kc(`number`),longitude:kc(`number`)};var kh=class e{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:e._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Ac(t,e._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e==`number`)))return new e(t.vectorValues);throw new L(I.INVALID_ARGUMENT,`Expected 'vectorValues' field to be a number array`)}}};kh._jsonSchemaVersion=`firestore/vectorValue/1.0`,kh._jsonSchema={type:kc(`string`,kh._jsonSchemaVersion),vectorValues:kc(`object`)};var Ah=/^__.*__$/;function jh(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw P(40011,{dataSource:e})}}var Mh=class e{constructor(e,t,n,r,i,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,i===void 0&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(t){return new e({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){let t=this.path?.child(e),n=this.contextWith({path:t,arrayElement:!1});return n.validatePathSegment(e),n}childContextForFieldPath(e){let t=this.path?.child(e),n=this.contextWith({path:t,arrayElement:!1});return n.validatePath(),n}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Uh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError(`Document fields must not be empty`);if(jh(this.dataSource)&&Ah.test(e))throw this.createError(`Document fields cannot begin and end with "__"`)}},Nh=class{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||kp(e)}createContext(e,t,n,r=!1){return new Mh({dataSource:e,methodName:t,targetDoc:n,path:bc.emptyPath(),arrayElement:!1,hasConverter:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Ph(e){let t=e._freezeSettings(),n=kp(e._databaseId);return new Nh(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Fh(e,t,n,r=!1){return Ih(n,e.createContext(r?4:3,t))}function Ih(e,t){if(Rh(e=Ve(e)))return zh(`Unsupported field value:`,t,e),Lh(e,t);if(e instanceof Dh)return function(e,t){if(!jh(t.dataSource))throw t.createError(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.createError(`${e._methodName}() is not currently supported inside arrays`);let n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.arrayElement&&t.dataSource!==4)throw t.createError(`Nested arrays are not supported`);return function(e,t){let n=[],r=0;for(let i of e){let e=Ih(i,t.childContextForArray(r));e??={nullValue:`NULL_VALUE`},n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if((e=Ve(e))===null)return{nullValue:`NULL_VALUE`};if(typeof e==`number`)return Xu(t.serializer,e);if(typeof e==`boolean`)return{booleanValue:e};if(typeof e==`string`)return{stringValue:e};if(e instanceof Date){let n=Nc.fromDate(e);return{timestampValue:qd(t.serializer,n)}}if(e instanceof Nc){let n=new Nc(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:qd(t.serializer,n)}}if(e instanceof Oh)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Th)return{bytesValue:Jd(t.serializer,e._byteString)};if(e instanceof mh){let n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.createError(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Xd(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof kh)return function(e,t){let n=e instanceof kh?e.toArray():e;return{mapValue:{fields:{[Tl]:{stringValue:Ol},[kl]:{arrayValue:{values:n.map((e=>{if(typeof e!=`number`)throw t.createError(`VectorValues must only contain numeric values.`);return Ju(t.serializer,e)}))}}}}}}(e,t);if(vf(e))return e._toProto(t.serializer);throw t.createError(`Unsupported field value: ${Ec(e)}`)}(e,t)}function Lh(e,t){let n={};return nl(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):tl(e,((e,r)=>{let i=Ih(r,t.childContextForField(e));i!=null&&(n[e]=i)})),{mapValue:{fields:n}}}function Rh(e){return!(typeof e!=`object`||!e||e instanceof Array||e instanceof Date||e instanceof Nc||e instanceof Oh||e instanceof Th||e instanceof mh||e instanceof Dh||e instanceof kh||vf(e))}function zh(e,t,n){if(!Rh(n)||!Tc(n)){let r=Ec(n);throw r===`an object`?t.createError(e+` a custom object`):t.createError(e+` `+r)}}function Bh(e,t,n){if((t=Ve(t))instanceof Eh)return t._internalPath;if(typeof t==`string`)return Hh(e,t);throw Uh(`Field path arguments must be of type string or `,e,!1,void 0,n)}var Vh=RegExp(`[~\\*/\\[\\]]`);function Hh(e,t,n){if(t.search(Vh)>=0)throw Uh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Eh(...t.split(`.`))._internalPath}catch{throw Uh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Uh(e,t,n,r,i){let a=r&&!r.isEmpty(),o=i!==void 0,s=`Function ${t}() called with invalid data`;n&&(s+=" (via `toFirestore()`)"),s+=`. `;let c=``;return(a||o)&&(c+=` (found`,a&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=`)`),new L(I.INVALID_ARGUMENT,s+e+c)}var Wh=class{convertValue(e,t=`none`){switch(Al(e)){case 0:return null;case 1:return e.booleanValue;case 2:return H(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(pl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw P(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t=`none`){let n={};return tl(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){let t=e.fields?.[kl].arrayValue?.values?.map((e=>H(e.doubleValue)));return new kh(t)}convertGeoPoint(e){return new Oh(H(e.latitude),H(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case`previous`:let n=yl(e);return n==null?null:this.convertValue(n,t);case`estimate`:return this.convertTimestamp(bl(e));default:return null}}convertTimestamp(e){let t=fl(e);return new Nc(t.seconds,t.nanos)}convertDocumentKey(e,t){let n=vc.fromString(e);$s(_f(n),9688,{name:e});let r=new Cl(n.get(1),n.get(3)),i=new z(n.popFirst(5));return r.isEqual(t)||Ys(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}},Gh=class extends Wh{constructor(e){super(),this.firestore=e}convertBytes(e){return new Th(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new mh(this.firestore,null,t)}},Kh=`@firebase/firestore`,qh=`4.11.0`,Jh=class{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new mh(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Yh(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){let t=this._document.data.field(Bh(`DocumentSnapshot.get`,e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Yh=class extends Jh{data(){return super.data()}};function Xh(e){if(e.limitType===`L`&&e.explicitOrderBy.length===0)throw new L(I.UNIMPLEMENTED,`limitToLast() queries require specifying at least one orderBy() clause`)}var Zh=class{},Qh=class extends Zh{};function $h(e,t,...n){let r=[];t instanceof Zh&&r.push(t),r=r.concat(n),function(e){let t=e.filter((e=>e instanceof ng)).length,n=e.filter((e=>e instanceof eg)).length;if(t>1||t>0&&n>0)throw new L(I.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let t of r)e=t._apply(e);return e}var eg=class e extends Qh{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type=`where`}static _create(t,n,r){return new e(t,n,r)}_apply(e){let t=this._parse(e);return lg(e._query,t),new ph(e.firestore,e.converter,Du(e._query,t))}_parse(e){let t=Ph(e.firestore);return function(e,t,n,r,i,a,o){let s;if(i.isKeyField()){if(a===`array-contains`||a===`array-contains-any`)throw new L(I.INVALID_ARGUMENT,`Invalid Query. You can't perform '${a}' queries on documentId().`);if(a===`in`||a===`not-in`){cg(o,a);let t=[];for(let n of o)t.push(sg(r,e,n));s={arrayValue:{values:t}}}else s=sg(r,e,o)}else a!==`in`&&a!==`not-in`&&a!==`array-contains-any`||cg(o,a),s=Fh(n,t,o,a===`in`||a===`not-in`);return q.create(i,a,s)}(e._query,`where`,t,e.firestore._databaseId,this._field,this._op,this._value)}};function tg(e,t,n){let r=t,i=Bh(`where`,e);return eg._create(i,r,n)}var ng=class e extends Zh{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(t,n){return new e(t,n)}_parse(e){let t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return t.length===1?t[0]:Ql.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(e,t){let n=e,r=t.getFlattenedFilters();for(let e of r)lg(n,e),n=Du(n,e)}(e._query,t),new ph(e.firestore,e.converter,Du(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type===`and`?`and`:`or`}},rg=class e extends Qh{constructor(e,t){super(),this._field=e,this._direction=t,this.type=`orderBy`}static _create(t,n){return new e(t,n)}_apply(e){let t=function(e,t,n){if(e.startAt!==null)throw new L(I.INVALID_ARGUMENT,`Invalid query. You must not call startAt() or startAfter() before calling orderBy().`);if(e.endAt!==null)throw new L(I.INVALID_ARGUMENT,`Invalid query. You must not call endAt() or endBefore() before calling orderBy().`);return new Yl(t,n)}(e._query,this._field,this._direction);return new ph(e.firestore,e.converter,Ou(e._query,t))}};function ig(e,t=`asc`){let n=t,r=Bh(`orderBy`,e);return rg._create(r,n)}var ag=class e extends Qh{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(t,n,r){return new e(t,n,r)}_apply(e){return new ph(e.firestore,e.converter,ku(e._query,this._limit,this._limitType))}};function og(e){return Oc(`limit`,e),ag._create(`limit`,e,`F`)}function sg(e,t,n){if(typeof(n=Ve(n))==`string`){if(n===``)throw new L(I.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.`);if(!Cu(t)&&n.indexOf(`/`)!==-1)throw new L(I.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=t.path.child(vc.fromString(n));if(!z.isDocumentKey(r))throw new L(I.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return zl(e,new z(r))}if(n instanceof mh)return zl(e,n._key);throw new L(I.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ec(n)}.`)}function cg(e,t){if(!Array.isArray(e)||e.length===0)throw new L(I.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function lg(e,t){let n=function(e,t){for(let n of e)for(let e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case`!=`:return[`!=`,`not-in`];case`array-contains-any`:case`in`:return[`not-in`];case`not-in`:return[`array-contains-any`,`in`,`not-in`,`!=`];default:return[]}}(t.op));if(n!==null)throw n===t.op?new L(I.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new L(I.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}var ug=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},dg=class e extends Jh{constructor(e,t,n,r,i,a){super(e,t,n,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new fg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let n=this._document.data.field(Bh(`DocumentSnapshot.get`,e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new L(I.FAILED_PRECONDITION,`DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().`);let t=this._document,n={};return n.type=e._jsonSchemaVersion,n.bundle=``,n.bundleSource=`DocumentSnapshot`,n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,`previous`),n.bundle=(this._firestore,this.ref.path,`NOT SUPPORTED`),n)}};dg._jsonSchemaVersion=`firestore/documentSnapshot/1.0`,dg._jsonSchema={type:kc(`string`,dg._jsonSchemaVersion),bundleSource:kc(`string`,`DocumentSnapshot`),bundleName:kc(`string`),bundle:kc(`string`)};var fg=class extends dg{data(e={}){return super.data(e)}},pg=class e{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new ug(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){let e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new fg(this._firestore,this._userDataWriter,n.key,n,new ug(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new L(I.INVALID_ARGUMENT,`To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().`);return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{let r=new fg(e._firestore,e._userDataWriter,n.doc.key,n.doc,new ug(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:`added`,doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||e.type!==3)).map((t=>{let r=new fg(e._firestore,e._userDataWriter,t.doc.key,t.doc,new ug(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return t.type!==0&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),t.type!==1&&(n=n.add(t.doc),a=n.indexOf(t.doc.key)),{type:mg(t.type),doc:r,oldIndex:i,newIndex:a}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new L(I.FAILED_PRECONDITION,`QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().`);let t={};t.type=e._jsonSchemaVersion,t.bundleSource=`QuerySnapshot`,t.bundleName=uc.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach((e=>{e._document!==null&&(n.push(e._document),r.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,`previous`)),i.push(e.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,`NOT SUPPORTED`),t}};function mg(e){switch(e){case 0:return`added`;case 2:case 3:return`modified`;case 1:return`removed`;default:return P(61501,{type:e})}}pg._jsonSchemaVersion=`firestore/querySnapshot/1.0`,pg._jsonSchema={type:kc(`string`,pg._jsonSchemaVersion),bundleSource:kc(`string`,`QuerySnapshot`),bundleName:kc(`string`),bundle:kc(`string`)};function hg(e){e=Dc(e,mh);let t=Dc(e.firestore,xh);return nh(Ch(t),e._key).then((n=>_g(t,e,n)))}function gg(e){e=Dc(e,ph);let t=Dc(e.firestore,xh),n=Ch(t),r=new Gh(t);return Xh(e._query),rh(n,e._query).then((n=>new pg(t,r,e,n)))}function _g(e,t,n){let r=n.docs.get(t._key);return new dg(e,new Gh(e),t._key,r,new ug(n.hasPendingWrites,n.fromCache),t.converter)}(function(e,t=!0){Ks(fn),sn(new He(`firestore`,((e,{instanceIdentifier:n,options:r})=>{let i=e.getProvider(`app`).getImmediate(),a=new xh(new ic(e.getProvider(`auth-internal`)),new cc(i,e.getProvider(`app-check-internal`)),wl(i,n),i);return r={useFetchStreams:t,...r},a._setSettings(r),a}),`PUBLIC`).setMultipleInstances(!0)),gn(Kh,qh,e),gn(Kh,qh,`esm2020`)})();const vg=hn().length?hn()[0]:pn({apiKey:`AIzaSyBY6fvHTTR4jVVEAlXua4Mwb1bwsksVeUY`,authDomain:`title-app-alpha.firebaseapp.com`,projectId:`title-app-alpha`,storageBucket:`title-app-alpha.firebasestorage.app`,messagingSenderId:`496560182504`,appId:`1:496560182504:web:d3c393bd7d4898a891e55d`,measurementId:`G-REDNYLES89`}),yg=Os(vg),bg=Sh(vg);var xg=o((e=>{var t=Symbol.for(`react.transitional.element`),n=Symbol.for(`react.fragment`);function r(e,n,r){var i=null;if(r!==void 0&&(i=``+r),n.key!==void 0&&(i=``+n.key),`key`in n)for(var a in r={},n)a!==`key`&&(r[a]=n[a]);else r=n;return n=r.ref,{$$typeof:t,type:e,key:i,ref:n===void 0?null:n,props:r}}e.Fragment=n,e.jsx=r,e.jsxs=r})),$=o(((e,t)=>{t.exports=xg()}))();function Sg(){let[e,t]=(0,_.useState)(`magic`),[n,r]=(0,_.useState)(``),[i,a]=(0,_.useState)(``),[o,s]=(0,_.useState)(``),[c,l]=(0,_.useState)(!1);(0,_.useEffect)(()=>{ha(yg,window.location.href)&&u()},[]);async function u(){let e=window.localStorage.getItem(`emailForSignIn`);if(e||=window.prompt(`Please provide your email for confirmation`),e)try{s(`Completing sign in...`);let t=await(await ga(yg,e,window.location.href)).user.getIdToken(!0);localStorage.setItem(`ID_TOKEN`,t),localStorage.getItem(`TENANT_ID`)||localStorage.setItem(`TENANT_ID`,`demo`),window.localStorage.removeItem(`emailForSignIn`),window.location.href=`/`}catch(e){console.error(e),s(`Failed to complete sign in: ${e?.message||String(e)}`)}}async function d(e){e.preventDefault(),s(`Sending magic link...`);let t={url:window.location.origin+`/`,handleCodeInApp:!0};try{await ma(yg,n,t),window.localStorage.setItem(`emailForSignIn`,n),l(!0),s(``)}catch(e){console.error(e),s(`Failed to send link: ${e?.message||String(e)}`)}}async function f(e){e.preventDefault(),s(`Signing in...`);try{let e=await(await pa(yg,n,i)).user.getIdToken(!0);localStorage.setItem(`ID_TOKEN`,e),localStorage.getItem(`TENANT_ID`)||localStorage.setItem(`TENANT_ID`,`demo`),s(`Signed in successfully`),window.location.reload()}catch(e){console.error(e);let t=e?.code||``;s(t===`auth/wrong-password`||t===`auth/user-not-found`||t===`auth/invalid-credential`||t===`auth/invalid-login-credentials`?`No password set for this account. Please use Magic Link or Google to sign in.`:`Login failed: ${e?.message||String(e)}`)}}async function p(){s(`Signing in with Google...`);try{let e=await(await xo(yg,new Qi)).user.getIdToken(!0);localStorage.setItem(`ID_TOKEN`,e),localStorage.getItem(`TENANT_ID`)||localStorage.setItem(`TENANT_ID`,`demo`),s(`Signed in successfully`),window.location.reload()}catch(e){console.error(e),e?.code===`auth/popup-closed-by-user`?s(``):s(`Google sign-in failed: ${e?.message||String(e)}`)}}return(0,$.jsx)(`div`,{style:{minHeight:`100vh`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`#f8fafc`,fontFamily:`-apple-system, BlinkMacSystemFont, sans-serif`},children:(0,$.jsxs)(`div`,{style:{width:`100%`,maxWidth:`420px`,padding:`32px`,background:`white`,borderRadius:`16px`,border:`1px solid #e5e7eb`},children:[(0,$.jsxs)(`div`,{style:{textAlign:`center`,marginBottom:`32px`},children:[(0,$.jsx)(`img`,{src:`/assets/logo.png`,alt:`TitleApp AI`,style:{width:`48px`,height:`48px`,borderRadius:`12px`,marginBottom:`16px`}}),(0,$.jsx)(`h1`,{style:{margin:0,fontSize:`24px`,fontWeight:700},children:`TitleApp AI`}),(0,$.jsx)(`p`,{style:{margin:`8px 0 0`,color:`#6b7280`,fontSize:`14px`},children:`Sign in to Business`})]}),c?(0,$.jsxs)(`div`,{style:{padding:`20px`,background:`#f0fdf4`,border:`1px solid #86efac`,borderRadius:`12px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`16px`,fontWeight:600,marginBottom:`8px`},children:`Check your email`}),(0,$.jsxs)(`div`,{style:{fontSize:`14px`,color:`#6b7280`},children:[`We sent a magic link to `,(0,$.jsx)(`strong`,{children:n})]}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#6b7280`,marginTop:`12px`},children:`Click the link in your email to sign in`}),(0,$.jsx)(`button`,{onClick:()=>{l(!1),r(``)},style:{marginTop:`16px`,padding:`10px 20px`,background:`white`,border:`1px solid #e5e7eb`,borderRadius:`8px`,cursor:`pointer`,fontSize:`14px`},children:`Use different email`})]}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`,marginBottom:`24px`},children:[(0,$.jsx)(`button`,{onClick:()=>t(`magic`),style:{flex:1,padding:`12px`,background:e===`magic`?`rgba(124,58,237,0.1)`:`white`,border:e===`magic`?`1px solid rgba(124,58,237,0.3)`:`1px solid #e5e7eb`,borderRadius:`8px`,cursor:`pointer`,fontWeight:e===`magic`?600:400,fontSize:`14px`},children:`Magic Link`}),(0,$.jsx)(`button`,{onClick:()=>t(`password`),style:{flex:1,padding:`12px`,background:e===`password`?`rgba(124,58,237,0.1)`:`white`,border:e===`password`?`1px solid rgba(124,58,237,0.3)`:`1px solid #e5e7eb`,borderRadius:`8px`,cursor:`pointer`,fontWeight:e===`password`?600:400,fontSize:`14px`},children:`Password`})]}),e===`magic`&&(0,$.jsxs)(`form`,{onSubmit:d,style:{display:`grid`,gap:`16px`},children:[(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`Email`}),(0,$.jsx)(`input`,{type:`email`,value:n,onChange:e=>r(e.target.value),placeholder:`you@example.com`,autoComplete:`email`,required:!0,style:{padding:`12px`,fontSize:`14px`,border:`1px solid #e5e7eb`,borderRadius:`8px`}})]}),(0,$.jsx)(`button`,{type:`submit`,style:{padding:`12px`,fontSize:`14px`,fontWeight:600,background:`rgb(124,58,237)`,color:`white`,border:`none`,borderRadius:`8px`,cursor:`pointer`},children:`Send Magic Link`})]}),e===`password`&&(0,$.jsxs)(`form`,{onSubmit:f,style:{display:`grid`,gap:`16px`},children:[(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`Email`}),(0,$.jsx)(`input`,{type:`email`,value:n,onChange:e=>r(e.target.value),placeholder:`you@example.com`,autoComplete:`email`,required:!0,style:{padding:`12px`,fontSize:`14px`,border:`1px solid #e5e7eb`,borderRadius:`8px`}})]}),(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`Password`}),(0,$.jsx)(`input`,{type:`password`,value:i,onChange:e=>a(e.target.value),placeholder:``,autoComplete:`current-password`,required:!0,style:{padding:`12px`,fontSize:`14px`,border:`1px solid #e5e7eb`,borderRadius:`8px`}})]}),(0,$.jsx)(`button`,{type:`submit`,style:{padding:`12px`,fontSize:`14px`,fontWeight:600,background:`rgb(124,58,237)`,color:`white`,border:`none`,borderRadius:`8px`,cursor:`pointer`},children:`Sign In`})]}),o&&(0,$.jsx)(`div`,{style:{marginTop:`16px`,padding:`12px`,background:o.includes(`Failed`)||o.includes(`failed`)||o.includes(`No password`)?`#fff5f5`:`#f0fdf4`,border:o.includes(`Failed`)||o.includes(`failed`)||o.includes(`No password`)?`1px solid #fecaca`:`1px solid #86efac`,borderRadius:`8px`,fontSize:`13px`,color:o.includes(`Failed`)||o.includes(`failed`)||o.includes(`No password`)?`#dc2626`:`#16a34a`},children:o}),(0,$.jsxs)(`div`,{style:{marginTop:`24px`,paddingTop:`24px`,borderTop:`1px solid #e5e7eb`},children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#6b7280`,textAlign:`center`,marginBottom:`12px`},children:`Or continue with`}),(0,$.jsx)(`div`,{style:{display:`grid`,gap:`8px`},children:(0,$.jsx)(`button`,{onClick:p,style:{padding:`12px`,fontSize:`14px`,background:`white`,border:`1px solid #e5e7eb`,borderRadius:`8px`,cursor:`pointer`},children:`Google`})})]})]})]})})}function Cg({onComplete:e,onSkip:t}){let[n,r]=(0,_.useState)(`choose`),[i,a]=(0,_.useState)(`medium`),[o,s]=(0,_.useState)([`private_equity`]),[c,l]=(0,_.useState)(``),[u,d]=(0,_.useState)(``),[f,p]=(0,_.useState)(``),[m,h]=(0,_.useState)(`medium`),[g,v]=(0,_.useState)(``),[y,b]=(0,_.useState)(``);function x(){e({target_asset_types:[`private_equity`],risk_tolerance:i,min_net_irr:i===`low`?20:i===`medium`?15:12,min_equity_multiple:2,onboarding_preset:`novice`})}function S(){let t={target_asset_types:o,risk_tolerance:m,onboarding_preset:`experienced`};c&&(t.min_net_irr=parseFloat(c)),u&&(t.min_cash_on_cash=parseFloat(u)),f&&(t.min_equity_multiple=parseFloat(f)),g&&(t.deal_size_min=parseFloat(g)),y&&(t.deal_size_max=parseFloat(y)),e(t)}function C(e){o.includes(e)?s(o.filter(t=>t!==e)):s([...o,e])}return n===`choose`?(0,$.jsxs)(`div`,{style:{display:`grid`,gap:`24px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h2`,{style:{margin:`0 0 8px 0`,fontSize:`20px`,fontWeight:700},children:`Investment Experience`}),(0,$.jsx)(`p`,{style:{margin:0,color:`#6b7280`,fontSize:`14px`},children:`Help us set up your deal screening criteria`})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gap:`12px`},children:[(0,$.jsxs)(`button`,{onClick:()=>r(`novice`),style:{padding:`20px`,textAlign:`left`,background:`white`,border:`2px solid #e5e7eb`,borderRadius:`12px`,cursor:`pointer`},children:[(0,$.jsx)(`div`,{style:{fontSize:`16px`,fontWeight:600,marginBottom:`4px`},children:`I'm new to investing`}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`#6b7280`},children:`We'll set up sensible defaults and guide you through the basics`})]}),(0,$.jsxs)(`button`,{onClick:()=>r(`experienced`),style:{padding:`20px`,textAlign:`left`,background:`white`,border:`2px solid #e5e7eb`,borderRadius:`12px`,cursor:`pointer`},children:[(0,$.jsx)(`div`,{style:{fontSize:`16px`,fontWeight:600,marginBottom:`4px`},children:`I have a target box`}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`#6b7280`},children:`Define specific criteria: IRR targets, deal size, risk parameters`})]})]}),(0,$.jsx)(`button`,{onClick:t,style:{padding:`12px`,fontSize:`14px`,background:`transparent`,border:`1px solid #e5e7eb`,borderRadius:`8px`,cursor:`pointer`,color:`#6b7280`},children:`Skip for now (set up later in Settings)`})]}):n===`novice`?(0,$.jsxs)(`div`,{style:{display:`grid`,gap:`24px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`button`,{onClick:()=>r(`choose`),style:{padding:`8px 12px`,fontSize:`14px`,background:`transparent`,border:`1px solid #e5e7eb`,borderRadius:`6px`,cursor:`pointer`,marginBottom:`16px`},children:` Back`}),(0,$.jsx)(`h2`,{style:{margin:`0 0 8px 0`,fontSize:`20px`,fontWeight:700},children:`Getting Started with Deal Analysis`}),(0,$.jsx)(`p`,{style:{margin:0,color:`#6b7280`,fontSize:`14px`},children:`We'll set up conservative defaults to protect you`})]}),(0,$.jsxs)(`div`,{style:{padding:`16px`,background:`#f0fdf4`,border:`1px solid #86efac`,borderRadius:`8px`,fontSize:`14px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`8px`},children:`What we'll set up:`}),(0,$.jsxs)(`ul`,{style:{margin:`8px 0 0 0`,paddingLeft:`20px`},children:[(0,$.jsx)(`li`,{children:`Minimum 15% net IRR target (industry standard)`}),(0,$.jsx)(`li`,{children:`2x equity multiple minimum (double your money)`}),(0,$.jsx)(`li`,{children:`Evidence-first analysis (no assumptions without data)`}),(0,$.jsx)(`li`,{children:`Red flags for high-risk sectors (crypto, pre-revenue, etc.)`})]})]}),(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`12px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`How conservative should we be?`}),(0,$.jsx)(`div`,{style:{display:`grid`,gap:`8px`},children:[{value:`low`,label:`Conservative (20% IRR min)`,desc:`Only strong, proven deals`},{value:`medium`,label:`Balanced (15% IRR min)`,desc:`Industry standard`},{value:`high`,label:`Aggressive (12% IRR min)`,desc:`More opportunities, higher risk`}].map(e=>(0,$.jsxs)(`button`,{onClick:()=>a(e.value),style:{padding:`16px`,textAlign:`left`,background:i===e.value?`rgba(124,58,237,0.1)`:`white`,border:i===e.value?`2px solid rgb(124,58,237)`:`2px solid #e5e7eb`,borderRadius:`8px`,cursor:`pointer`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:e.label}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#6b7280`,marginTop:`4px`},children:e.desc})]},e.value))})]}),(0,$.jsx)(`button`,{onClick:x,style:{padding:`14px`,fontSize:`15px`,fontWeight:600,background:`rgb(124,58,237)`,color:`white`,border:`none`,borderRadius:`8px`,cursor:`pointer`},children:`Continue with These Settings `})]}):(0,$.jsxs)(`div`,{style:{display:`grid`,gap:`24px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`button`,{onClick:()=>r(`choose`),style:{padding:`8px 12px`,fontSize:`14px`,background:`transparent`,border:`1px solid #e5e7eb`,borderRadius:`6px`,cursor:`pointer`,marginBottom:`16px`},children:` Back`}),(0,$.jsx)(`h2`,{style:{margin:`0 0 8px 0`,fontSize:`20px`,fontWeight:700},children:`Define Your Target Box`}),(0,$.jsx)(`p`,{style:{margin:0,color:`#6b7280`,fontSize:`14px`},children:`Set specific criteria for deal screening`})]}),(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`Deal Types *`}),(0,$.jsx)(`div`,{style:{display:`grid`,gap:`8px`},children:[{value:`private_equity`,label:`Private Equity`},{value:`commercial_real_estate`,label:`Commercial Real Estate`},{value:`refinance`,label:`Refinance`},{value:`conversion`,label:`Conversion`},{value:`entitlement`,label:`Entitlement`},{value:`debt_acquisition`,label:`Debt Acquisition`}].map(e=>(0,$.jsxs)(`button`,{onClick:()=>C(e.value),style:{padding:`12px`,textAlign:`left`,background:o.includes(e.value)?`rgba(124,58,237,0.1)`:`white`,border:o.includes(e.value)?`1px solid rgb(124,58,237)`:`1px solid #e5e7eb`,borderRadius:`6px`,cursor:`pointer`,fontSize:`14px`},children:[o.includes(e.value)?` `:``,e.label]},e.value))})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gap:`16px`,gridTemplateColumns:`1fr 1fr`},children:[(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`Min Net IRR (%)`}),(0,$.jsx)(`input`,{type:`number`,value:c,onChange:e=>l(e.target.value),placeholder:`15`,style:{padding:`10px 12px`,fontSize:`14px`,border:`1px solid #e5e7eb`,borderRadius:`6px`}})]}),(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`Min Cash-on-Cash (%)`}),(0,$.jsx)(`input`,{type:`number`,value:u,onChange:e=>d(e.target.value),placeholder:`8`,style:{padding:`10px 12px`,fontSize:`14px`,border:`1px solid #e5e7eb`,borderRadius:`6px`}})]}),(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`Min Equity Multiple`}),(0,$.jsx)(`input`,{type:`number`,step:`0.1`,value:f,onChange:e=>p(e.target.value),placeholder:`2.0`,style:{padding:`10px 12px`,fontSize:`14px`,border:`1px solid #e5e7eb`,borderRadius:`6px`}})]}),(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`Risk Tolerance *`}),(0,$.jsxs)(`select`,{value:m,onChange:e=>h(e.target.value),style:{padding:`10px 12px`,fontSize:`14px`,border:`1px solid #e5e7eb`,borderRadius:`6px`,background:`white`},children:[(0,$.jsx)(`option`,{value:`low`,children:`Conservative`}),(0,$.jsx)(`option`,{value:`medium`,children:`Balanced`}),(0,$.jsx)(`option`,{value:`high`,children:`Aggressive`})]})]})]}),(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`Deal Size Range (USD)`}),(0,$.jsxs)(`div`,{style:{display:`grid`,gap:`8px`,gridTemplateColumns:`1fr 1fr`},children:[(0,$.jsx)(`input`,{type:`number`,value:g,onChange:e=>v(e.target.value),placeholder:`Min (e.g., 500000)`,style:{padding:`10px 12px`,fontSize:`14px`,border:`1px solid #e5e7eb`,borderRadius:`6px`}}),(0,$.jsx)(`input`,{type:`number`,value:y,onChange:e=>b(e.target.value),placeholder:`Max (e.g., 10000000)`,style:{padding:`10px 12px`,fontSize:`14px`,border:`1px solid #e5e7eb`,borderRadius:`6px`}})]})]}),(0,$.jsx)(`button`,{onClick:S,disabled:o.length===0,style:{padding:`14px`,fontSize:`15px`,fontWeight:600,background:o.length===0?`#9ca3af`:`rgb(124,58,237)`,color:`white`,border:`none`,borderRadius:`8px`,cursor:o.length===0?`not-allowed`:`pointer`},children:`Save Investment Criteria `}),(0,$.jsx)(`p`,{style:{fontSize:`13px`,color:`#6b7280`,textAlign:`center`,margin:0},children:`You can refine these parameters later in Settings`})]})}function wg({purpose:e}){let[t,n]=(0,_.useState)(!1),[r,i]=(0,_.useState)(!1),[a,o]=(0,_.useState)(null),[s,c]=(0,_.useState)(null);function l(){n(!1),i(!1),o(null),c(null)}async function u(t){n(!0),c(null);try{let r=localStorage.getItem(`ID_TOKEN`),a=localStorage.getItem(`VERTICAL`)||`auto`,s=localStorage.getItem(`JURISDICTION`)||`IL`,c=`https://titleapp-frontdoor.titleapp-core.workers.dev`,l=await fetch(`${c}/api?path=/v1/files:sign`,{method:`POST`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${r}`,"X-Vertical":a,"X-Jurisdiction":s},body:JSON.stringify({filename:t.name,contentType:t.type||`application/octet-stream`,sizeBytes:t.size,purpose:e})}),u=await l.json();if(!l.ok||!u.ok)throw Error(u.error||`Failed to get upload URL`);if(!(await fetch(u.uploadUrl,{method:`PUT`,headers:{"Content-Type":t.type||`application/octet-stream`},body:t})).ok)throw Error(`Upload to storage failed`);return await fetch(`${c}/api?path=/v1/files:finalize`,{method:`POST`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${r}`,"X-Vertical":a,"X-Jurisdiction":s},body:JSON.stringify({fileId:u.fileId,storagePath:u.storagePath,contentType:t.type||`application/octet-stream`,sizeBytes:t.size})}),o(u.fileId),i(!0),n(!1),u.fileId}catch(e){return c(e.message||`Upload failed`),n(!1),null}}return{uploadFile:u,uploading:t,uploaded:r,fileId:a,error:s,reset:l}}function Tg({criteria:e,onComplete:t,onSkip:n}){let[r,i]=(0,_.useState)([]),[a,o]=(0,_.useState)(!1),s=wg({purpose:`deal_memo`});async function c(e){let t=Array.from(e.target.files||[]);if(t.length===0)return;let n=t.map(e=>({file:e,analyzing:!1,analysis:null,error:null}));i([...r,...n]);for(let e=0;e<n.length;e++)await l(r.length+e,n[e].file)}async function l(e,t){i(t=>{let n=[...t];return n[e]={...n[e],analyzing:!0,error:null},n});try{let n=await s.uploadFile(t),r=localStorage.getItem(`ID_TOKEN`),a=await fetch(`https://titleapp-frontdoor.titleapp-core.workers.dev/api?path=/v1/analyst:analyze`,{method:`POST`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${r}`,"X-Vertical":`analyst`,"X-Jurisdiction":`GLOBAL`},body:JSON.stringify({deal:{companyName:t.name.replace(/\.(pdf|PDF)$/,``),dealType:`private_equity`,fileId:n}})}),o=await a.json();if(!a.ok||!o.ok)throw Error(o.error||`Analysis failed`);i(t=>{let n=[...t];return n[e]={...n[e],analyzing:!1,analysis:o.analysis},n})}catch(t){i(n=>{let r=[...n];return r[e]={...r[e],analyzing:!1,error:t.message||`Failed to analyze`},r})}}function u(e){i(r.filter((t,n)=>n!==e))}let d=r.length>0&&r.every(e=>e.analysis||e.error),f=r.some(e=>e.analysis);return(0,$.jsxs)(`div`,{style:{display:`grid`,gap:`24px`,maxWidth:`700px`,margin:`0 auto`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h2`,{style:{margin:`0 0 8px 0`,fontSize:`24px`,fontWeight:700},children:`Upload Sample Deals`}),(0,$.jsx)(`p`,{style:{margin:0,color:`#6b7280`,fontSize:`15px`,lineHeight:1.5},children:`Upload 2-3 deals you're interested in. Our AI will analyze them against your criteria and help you identify your investment sweet spot.`})]}),(0,$.jsxs)(`div`,{style:{padding:`16px 20px`,background:`rgba(124, 58, 237, 0.05)`,border:`1px solid rgba(124, 58, 237, 0.2)`,borderRadius:`12px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,fontWeight:600,color:`rgb(124, 58, 237)`,marginBottom:`8px`},children:`YOUR INVESTMENT CRITERIA`}),(0,$.jsxs)(`div`,{style:{fontSize:`14px`,color:`#374151`,display:`grid`,gap:`4px`},children:[e.min_net_irr&&(0,$.jsxs)(`div`,{children:[` Min IRR: `,e.min_net_irr,`%`]}),e.min_equity_multiple&&(0,$.jsxs)(`div`,{children:[` Min Equity Multiple: `,e.min_equity_multiple,`x`]}),e.risk_tolerance&&(0,$.jsxs)(`div`,{children:[` Risk Tolerance: `,e.risk_tolerance.charAt(0).toUpperCase()+e.risk_tolerance.slice(1)]}),e.target_asset_types&&(0,$.jsxs)(`div`,{children:[` Asset Types: `,e.target_asset_types.join(`, `).replace(/_/g,` `)]})]})]}),(0,$.jsxs)(`div`,{style:{padding:`32px`,border:`2px dashed #d1d5db`,borderRadius:`12px`,textAlign:`center`,background:`#f9fafb`},children:[(0,$.jsx)(`div`,{style:{fontSize:`24px`,fontWeight:600,color:`#64748b`,marginBottom:`16px`},children:`Deal Memos`}),(0,$.jsx)(`p`,{style:{fontSize:`16px`,fontWeight:600,marginBottom:`8px`},children:`Upload Deal Memos (PDFs)`}),(0,$.jsx)(`p`,{style:{fontSize:`14px`,color:`#6b7280`,marginBottom:`20px`},children:`Offering memos, pitch decks, investment summaries, or deal analyses`}),(0,$.jsx)(`input`,{type:`file`,accept:`.pdf`,multiple:!0,onChange:c,style:{display:`none`},id:`deal-upload`}),(0,$.jsx)(`label`,{htmlFor:`deal-upload`,style:{display:`inline-block`,padding:`12px 24px`,background:`rgb(124, 58, 237)`,color:`white`,borderRadius:`8px`,cursor:`pointer`,fontSize:`15px`,fontWeight:600},children:`Choose Files`})]}),r.length>0&&(0,$.jsxs)(`div`,{style:{display:`grid`,gap:`12px`},children:[(0,$.jsxs)(`div`,{style:{fontSize:`16px`,fontWeight:600},children:[`Uploaded Deals (`,r.length,`)`]}),r.map((e,t)=>(0,$.jsxs)(`div`,{style:{padding:`16px`,background:`white`,border:`1px solid #e5e7eb`,borderRadius:`12px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`start`,marginBottom:`12px`},children:[(0,$.jsxs)(`div`,{style:{flex:1},children:[(0,$.jsx)(`div`,{style:{fontSize:`15px`,fontWeight:600,marginBottom:`4px`},children:e.file.name}),(0,$.jsxs)(`div`,{style:{fontSize:`13px`,color:`#6b7280`},children:[(e.file.size/1024).toFixed(1),` KB`]})]}),(0,$.jsx)(`button`,{onClick:()=>u(t),style:{padding:`6px 12px`,fontSize:`13px`,background:`transparent`,border:`1px solid #e5e7eb`,borderRadius:`6px`,cursor:`pointer`,color:`#6b7280`},children:`Remove`})]}),e.analyzing&&(0,$.jsx)(`div`,{style:{padding:`12px`,background:`#f0fdf4`,borderRadius:`8px`,fontSize:`14px`},children:`Analyzing with AI...`}),e.error&&(0,$.jsx)(`div`,{style:{padding:`12px`,background:`#fef2f2`,border:`1px solid #fca5a5`,borderRadius:`8px`,fontSize:`14px`,color:`#dc2626`},children:e.error}),e.analysis&&(0,$.jsxs)(`div`,{style:{padding:`16px`,background:`#f8fafc`,borderRadius:`8px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,marginBottom:`12px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,fontWeight:600,color:`#6b7280`,marginBottom:`4px`},children:`RECOMMENDATION`}),(0,$.jsxs)(`div`,{className:`badge badge-${e.analysis.recommendation===`INVEST`?`completed`:e.analysis.recommendation===`PASS`?``:`processing`}`,style:{fontSize:`16px`,padding:`6px 12px`},children:[e.analysis.emoji||``,` `,e.analysis.recommendation]})]}),(0,$.jsxs)(`div`,{style:{textAlign:`right`},children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,fontWeight:600,color:`#6b7280`,marginBottom:`4px`},children:`RISK SCORE`}),(0,$.jsxs)(`div`,{style:{fontSize:`24px`,fontWeight:700,color:e.analysis.riskScore>=70?`#ef4444`:e.analysis.riskScore>=40?`#f59e0b`:`#10b981`},children:[e.analysis.riskScore||0,`/100`]})]})]}),e.analysis.summary&&(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`#4b5563`,lineHeight:1.5},children:e.analysis.summary})]})]},t))]}),f&&(0,$.jsxs)(`div`,{style:{padding:`20px`,background:`#f0fdf4`,border:`2px solid #86efac`,borderRadius:`12px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`16px`,fontWeight:600,marginBottom:`12px`},children:`Sweet Spot Identified`}),(0,$.jsx)(`p`,{style:{fontSize:`14px`,color:`#374151`,marginBottom:`12px`,lineHeight:1.5},children:`Based on your uploaded deals and criteria, TitleApp will help you:`}),(0,$.jsxs)(`ul`,{style:{margin:0,paddingLeft:`20px`,fontSize:`14px`,color:`#374151`},children:[(0,$.jsx)(`li`,{children:`Screen incoming deals against your target box`}),(0,$.jsx)(`li`,{children:`Identify red flags and missing information`}),(0,$.jsx)(`li`,{children:`Suggest risk-scaled deal structures`}),(0,$.jsx)(`li`,{children:`Track your pipeline and decision history`})]})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`12px`,justifyContent:`space-between`},children:[(0,$.jsx)(`button`,{onClick:n,style:{padding:`12px 24px`,fontSize:`15px`,background:`transparent`,border:`1px solid #e5e7eb`,borderRadius:`8px`,cursor:`pointer`,color:`#6b7280`},children:`Skip for Now`}),(0,$.jsx)(`button`,{onClick:t,disabled:!d,style:{padding:`12px 32px`,fontSize:`15px`,fontWeight:600,background:d?`rgb(124, 58, 237)`:`#9ca3af`,color:`white`,border:`none`,borderRadius:`8px`,cursor:d?`pointer`:`not-allowed`},children:r.length===0?`Continue Without Samples`:`Complete Setup `})]})]})}var Eg=[{type:`customer_list`,label:`Customer Database`,description:`Customer contact info, purchase history, preferences`,icon:``,required:!0},{type:`dealer_inventory`,label:`Current Inventory`,description:`VINs, models, prices, stock numbers`,icon:``,required:!0},{type:`service_schedule`,label:`Service Appointments`,description:`Scheduled services, maintenance history`,icon:``,required:!1},{type:`financial_products`,label:`Financing Options`,description:`Available loan products, rates, terms`,icon:``,required:!1},{type:`warranty_products`,label:`Warranty Products`,description:`Extended warranties, service contracts`,icon:``,required:!1}];function Dg({onComplete:e,onSkip:t}){let[n,r]=(0,_.useState)(Eg.map(e=>({type:e.type,file:null,uploaded:!1,uploading:!1,error:null})));function i(e,t){r(n=>n.map(n=>n.type===e?{...n,file:t,uploaded:!1,error:null}:n))}async function a(e){let t=n.find(t=>t.type===e);if(t?.file){r(t=>t.map(t=>t.type===e?{...t,uploading:!0,error:null}:t));try{let n=localStorage.getItem(`ID_TOKEN`),i=`auto`,a=localStorage.getItem(`JURISDICTION`)||`IL`,o=`https://titleapp-frontdoor.titleapp-core.workers.dev`,s=await fetch(`${o}/api?path=/v1/files:sign`,{method:`POST`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${n}`,"X-Vertical":i,"X-Jurisdiction":a},body:JSON.stringify({filename:t.file.name,contentType:t.file.type||`application/vnd.openxmlformats-officedocument.spreadsheetml.sheet`,sizeBytes:t.file.size,purpose:e})}),c=await s.json();if(!s.ok||!c.ok)throw Error(c.error||`Failed to get upload URL`);if(!(await fetch(c.uploadUrl,{method:`PUT`,headers:{"Content-Type":t.file.type||`application/vnd.openxmlformats-officedocument.spreadsheetml.sheet`},body:t.file})).ok)throw Error(`Upload failed`);await fetch(`${o}/api?path=/v1/files:finalize`,{method:`POST`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${n}`,"X-Vertical":i,"X-Jurisdiction":a},body:JSON.stringify({fileId:c.fileId,storagePath:c.storagePath,contentType:t.file.type||`application/vnd.openxmlformats-officedocument.spreadsheetml.sheet`,sizeBytes:t.file.size})}),r(t=>t.map(t=>t.type===e?{...t,uploading:!1,uploaded:!0}:t))}catch(t){r(n=>n.map(n=>n.type===e?{...n,uploading:!1,error:t.message||`Upload failed`}:n))}}}let o=Eg.filter(e=>e.required).every(e=>n.find(t=>t.type===e.type)?.uploaded),s=n.some(e=>e.uploaded);return(0,$.jsxs)(`div`,{style:{display:`grid`,gap:`24px`,maxWidth:`800px`,margin:`0 auto`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h2`,{style:{margin:`0 0 8px 0`,fontSize:`24px`,fontWeight:700},children:`Upload Your Dealership Data`}),(0,$.jsx)(`p`,{style:{margin:0,color:`#6b7280`,fontSize:`15px`,lineHeight:1.5},children:`To help you sell more effectively, we need some basic data about your business. Upload Excel files (.xlsx) for each category below.`})]}),(0,$.jsxs)(`div`,{style:{padding:`16px 20px`,background:`#fef3c7`,border:`1px solid #fbbf24`,borderRadius:`12px`,fontSize:`14px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`4px`},children:`Minimum Viable Data`}),(0,$.jsx)(`div`,{style:{color:`#92400e`},children:`Customer database and inventory are required. The more data you provide, the more AI can help you sell.`})]}),(0,$.jsx)(`div`,{style:{display:`grid`,gap:`16px`},children:Eg.map(e=>{let t=n.find(t=>t.type===e.type),r=t?.file!==null;return(0,$.jsxs)(`div`,{style:{padding:`20px`,background:`white`,border:t?.uploaded?`2px solid #10b981`:e.required?`2px solid #e5e7eb`:`1px solid #e5e7eb`,borderRadius:`12px`,position:`relative`},children:[e.required&&!t?.uploaded&&(0,$.jsx)(`div`,{style:{position:`absolute`,top:`12px`,right:`12px`,padding:`4px 8px`,background:`#fef2f2`,border:`1px solid #fca5a5`,borderRadius:`6px`,fontSize:`11px`,fontWeight:600,color:`#dc2626`},children:`REQUIRED`}),t?.uploaded&&(0,$.jsx)(`div`,{style:{position:`absolute`,top:`12px`,right:`12px`,padding:`4px 8px`,background:`#f0fdf4`,border:`1px solid #86efac`,borderRadius:`6px`,fontSize:`11px`,fontWeight:600,color:`#10b981`},children:` UPLOADED`}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`16px`,alignItems:`start`},children:[(0,$.jsx)(`div`,{style:{fontSize:`32px`},children:e.icon}),(0,$.jsxs)(`div`,{style:{flex:1},children:[(0,$.jsx)(`div`,{style:{fontSize:`16px`,fontWeight:600,marginBottom:`4px`},children:e.label}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`#6b7280`,marginBottom:`12px`},children:e.description}),r&&(0,$.jsxs)(`div`,{style:{marginBottom:`12px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#374151`,marginBottom:`4px`},children:t.file?.name}),(0,$.jsxs)(`div`,{style:{fontSize:`12px`,color:`#9ca3af`},children:[t.file?(t.file.size/1024).toFixed(1):0,` KB`]})]}),t?.error&&(0,$.jsx)(`div`,{style:{padding:`8px 12px`,background:`#fef2f2`,border:`1px solid #fca5a5`,borderRadius:`6px`,fontSize:`13px`,color:`#dc2626`,marginBottom:`12px`},children:t.error}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`},children:[(0,$.jsx)(`input`,{type:`file`,accept:`.xlsx,.xls,.csv`,onChange:t=>{let n=t.target.files?.[0];n&&i(e.type,n)},style:{display:`none`},id:`file-${e.type}`,disabled:t?.uploaded}),(0,$.jsx)(`label`,{htmlFor:`file-${e.type}`,style:{display:`inline-block`,padding:`8px 16px`,fontSize:`14px`,fontWeight:500,background:t?.uploaded?`#f3f4f6`:`white`,border:`1px solid #d1d5db`,borderRadius:`6px`,cursor:t?.uploaded?`not-allowed`:`pointer`,color:t?.uploaded?`#9ca3af`:`#374151`},children:`Choose File`}),r&&!t?.uploaded&&(0,$.jsx)(`button`,{onClick:()=>a(e.type),disabled:t?.uploading,style:{padding:`8px 16px`,fontSize:`14px`,fontWeight:500,background:t?.uploading?`#9ca3af`:`rgb(124, 58, 237)`,color:`white`,border:`none`,borderRadius:`6px`,cursor:t?.uploading?`not-allowed`:`pointer`},children:t?.uploading?`Uploading...`:`Upload`})]})]})]})]},e.type)})}),s&&(0,$.jsxs)(`div`,{style:{padding:`16px 20px`,background:`#f0fdf4`,border:`2px solid #86efac`,borderRadius:`12px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`15px`,fontWeight:600,marginBottom:`8px`},children:`Your data is being processed`}),(0,$.jsx)(`p`,{style:{fontSize:`14px`,color:`#374151`,margin:0},children:`TitleApp AI will analyze your data and start helping you match customers to vehicles, suggest optimal pricing, and identify sales opportunities.`})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`12px`,justifyContent:`space-between`},children:[(0,$.jsx)(`button`,{onClick:t,style:{padding:`12px 24px`,fontSize:`15px`,background:`transparent`,border:`1px solid #e5e7eb`,borderRadius:`8px`,cursor:`pointer`,color:`#6b7280`},children:`Skip for Now`}),(0,$.jsx)(`button`,{onClick:e,disabled:!o&&!s,style:{padding:`12px 32px`,fontSize:`15px`,fontWeight:600,background:o||s?`rgb(124, 58, 237)`:`#9ca3af`,color:`white`,border:`none`,borderRadius:`8px`,cursor:o||s?`pointer`:`not-allowed`},children:`Complete Setup `})]})]})}function Og({onComplete:e,onSkip:t}){let[n,r]=(0,_.useState)([]),[i,a]=(0,_.useState)([]),[o,s]=(0,_.useState)(!1),[c,l]=(0,_.useState)(!1),[u,d]=(0,_.useState)({}),f=wg({purpose:`real_estate_data`});async function p(e){let t=Array.from(e.target.files||[]);r([...n,...t]);for(let e of t)await m(e)}async function m(e){s(!0);try{let t=await h(e);a(e=>[...e,t])}catch(e){console.error(`Parse error:`,e)}finally{s(!1)}}async function h(e){await new Promise(e=>setTimeout(e,1e3));let t=e.name.toLowerCase(),n=`brokerage`,r=[],i=[];return t.includes(`summit`)||t.includes(`buyers_sellers`)?(n=`brokerage`,r=[{name:`Buyer Prospects`,detectedType:`buyer_prospects`,rowCount:75,headers:[`Name`,`Budget Min`,`Budget Max`,`Neighborhoods`,`Must-Haves`,`Status`],confidence:.95,sample:[]},{name:`Seller Pipeline`,detectedType:`seller_pipeline`,rowCount:50,headers:[`Address`,`List Price`,`Zillow URL`,`Days on Market`,`Offers`,`Status`],confidence:.92,sample:[]},{name:`Transactions`,detectedType:`transactions`,rowCount:60,headers:[`Date`,`Address`,`Sale Price`,`Commission`,`Agent`,`Status`],confidence:.98,sample:[]},{name:`Agent Roster`,detectedType:`agent_roster`,rowCount:6,headers:[`Name`,`License #`,`Specialization`,`YTD Volume`,`Commission Split`],confidence:.99,sample:[]},{name:`Platform Integrations`,detectedType:`platform_integrations`,rowCount:14,headers:[`Platform`,`Type`,`Account`,`Status`,`API Key Needed`],confidence:1,sample:[]}],i=[`Zillow`,`Redfin`,`MLS`,`DocuSign`,`CRM`,`QuickBooks`,`Matterport`,`ShowingTime`]):t.includes(`pm_operations`)?(n=`property_management`,r=[{name:`Tenant Roster`,detectedType:`tenant_roster`,rowCount:100,headers:[`Unit`,`Tenant Name`,`Lease Start`,`Rent Amount`,`Deposit`,`Status`],confidence:.97,sample:[]},{name:`Rent Roll`,detectedType:`rent_roll`,rowCount:100,headers:[`Unit`,`Rent`,`Fees`,`Total Due`,`Paid`,`Balance`,`Payment Method`],confidence:.96,sample:[]},{name:`Maintenance Orders`,detectedType:`maintenance`,rowCount:120,headers:[`Date`,`Unit`,`Category`,`Priority`,`Technician`,`Cost`,`Status`],confidence:.94,sample:[]},{name:`Inspections`,detectedType:`inspections`,rowCount:60,headers:[`Date`,`Unit`,`Type`,`Rating`,`Issues`,`Action Items`],confidence:.93,sample:[]},{name:`Platform Integrations`,detectedType:`platform_integrations`,rowCount:21,headers:[`Platform`,`Type`,`Purpose`,`Status`,`Credentials Needed`],confidence:1,sample:[]}],i=[`AppFolio`,`Guesty`,`Airbnb`,`VRBO`,`Booking.com`,`PriceLabs`,`Latchel`,`Properly`,`QuickBooks`,`Xero`]):t.includes(`str_portfolio`)&&(n=`str_portfolio`,r=[{name:`Portfolio Summary`,detectedType:`str_portfolio`,rowCount:12,headers:[`Property`,`Location`,`Purchase Price`,`Monthly Revenue`,`Occupancy`,`ROI`],confidence:.98,sample:[]},...Array.from({length:12},(e,t)=>({name:`STR-${String(t+1).padStart(2,`0`)}`,detectedType:`str_property_detail`,rowCount:25,headers:[`Date`,`Guest`,`Nightly Rate`,`Nights`,`Revenue`,`Platform`,`Status`],confidence:.95,sample:[]}))],i=[`Airbnb`,`VRBO`,`Booking.com`,`Guesty`,`PriceLabs`,`Properly`]),{filename:e.name,sheets:r,detectedProfile:n,platformIntegrations:i}}async function g(){l(!0);try{for(let e of n){d(t=>({...t,[e.name]:`uploading`}));let t=await f.uploadFile(e);d(n=>({...n,[e.name]:t?`done`:`error`}))}e()}catch(e){console.error(`Import error:`,e)}finally{l(!1)}}let v=i.reduce((e,t)=>e+t.sheets.length,0),y=i.reduce((e,t)=>e+t.sheets.reduce((e,t)=>e+t.rowCount,0),0);return(0,$.jsxs)(`div`,{style:{display:`grid`,gap:`24px`,maxWidth:`900px`,margin:`0 auto`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h2`,{style:{margin:`0 0 8px 0`,fontSize:`24px`,fontWeight:700},children:`Upload Your Real Estate Data`}),(0,$.jsx)(`p`,{style:{margin:0,color:`#6b7280`,fontSize:`15px`,lineHeight:1.5},children:`Upload your Excel files containing client data, listings, tenants, or property portfolios. We'll automatically detect the data type and map it to our system.`})]}),(0,$.jsxs)(`div`,{style:{padding:`32px`,border:`2px dashed #d1d5db`,borderRadius:`12px`,textAlign:`center`,background:`#f9fafb`},children:[(0,$.jsx)(`div`,{style:{fontSize:`24px`,fontWeight:600,color:`#64748b`,marginBottom:`16px`},children:`Data Upload`}),(0,$.jsx)(`p`,{style:{fontSize:`16px`,fontWeight:600,marginBottom:`8px`},children:`Upload Real Estate Data Files`}),(0,$.jsx)(`p`,{style:{fontSize:`14px`,color:`#6b7280`,marginBottom:`20px`},children:`CRM exports, tenant rosters, transaction history, property portfolios`}),(0,$.jsx)(`input`,{type:`file`,accept:`.xlsx,.xls,.csv`,multiple:!0,onChange:p,style:{display:`none`},id:`re-file-upload`}),(0,$.jsx)(`label`,{htmlFor:`re-file-upload`,style:{display:`inline-block`,padding:`12px 24px`,background:`rgb(124, 58, 237)`,color:`white`,borderRadius:`8px`,cursor:`pointer`,fontSize:`15px`,fontWeight:600},children:`Choose Files`})]}),o&&(0,$.jsx)(`div`,{style:{padding:`16px`,background:`#f0fdf4`,borderRadius:`12px`,textAlign:`center`},children:`Analyzing file structure and detecting data types...`}),i.length>0&&(0,$.jsxs)(`div`,{style:{display:`grid`,gap:`16px`},children:[(0,$.jsxs)(`div`,{style:{fontSize:`18px`,fontWeight:600},children:[`Detected Data (`,v,` sheets, `,y.toLocaleString(),` records)`]}),i.map((e,t)=>(0,$.jsxs)(`div`,{style:{padding:`20px`,background:`white`,border:`2px solid #e5e7eb`,borderRadius:`12px`},children:[(0,$.jsxs)(`div`,{style:{marginBottom:`16px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`16px`,fontWeight:600,marginBottom:`4px`},children:e.filename}),(0,$.jsxs)(`div`,{style:{fontSize:`14px`,color:`#6b7280`},children:[`Profile: `,e.detectedProfile.replace(/_/g,` `).toUpperCase()]})]}),(0,$.jsx)(`div`,{style:{display:`grid`,gap:`8px`,marginBottom:`16px`},children:e.sheets.map((e,t)=>(0,$.jsxs)(`div`,{style:{padding:`12px`,background:`#f9fafb`,borderRadius:`8px`,display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:e.name}),(0,$.jsxs)(`div`,{style:{fontSize:`13px`,color:`#6b7280`},children:[e.detectedType.replace(/_/g,` `),`  `,e.rowCount,` rows  `,Math.round(e.confidence*100),`% confidence`]})]}),(0,$.jsx)(`div`,{style:{fontSize:`20px`},children:``})]},t))}),e.platformIntegrations.length>0&&(0,$.jsxs)(`div`,{style:{padding:`12px 16px`,background:`#fef3c7`,border:`1px solid #fbbf24`,borderRadius:`8px`},children:[(0,$.jsxs)(`div`,{style:{fontSize:`13px`,fontWeight:600,marginBottom:`8px`},children:[`Platform Integrations Detected (`,e.platformIntegrations.length,`)`]}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#92400e`,display:`flex`,flexWrap:`wrap`,gap:`6px`},children:e.platformIntegrations.map((e,t)=>(0,$.jsx)(`span`,{style:{padding:`4px 8px`,background:`white`,borderRadius:`4px`,fontSize:`12px`},children:e},t))}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#92400e`,marginTop:`8px`},children:`You'll need to provide API keys/credentials for these platforms after onboarding`})]})]},t))]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`12px`,justifyContent:`space-between`},children:[(0,$.jsx)(`button`,{onClick:t,style:{padding:`12px 24px`,fontSize:`15px`,background:`transparent`,border:`1px solid #e5e7eb`,borderRadius:`8px`,cursor:`pointer`,color:`#6b7280`},children:`Skip for Now`}),(0,$.jsx)(`button`,{onClick:g,disabled:i.length===0||c,style:{padding:`12px 32px`,fontSize:`15px`,fontWeight:600,background:i.length>0&&!c?`rgb(124, 58, 237)`:`#9ca3af`,color:`white`,border:`none`,borderRadius:`8px`,cursor:i.length>0&&!c?`pointer`:`not-allowed`},children:c?`Importing...`:`Import ${y.toLocaleString()} Records `})]})]})}function kg({onAccept:e,onDecline:t}){let[n,r]=(0,_.useState)(!1),[i,a]=(0,_.useState)(!1);function o(e){let t=e.currentTarget;t.scrollHeight-t.scrollTop<=t.clientHeight+50&&a(!0)}return(0,$.jsx)(`div`,{style:{minHeight:`100vh`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`#f8fafc`,fontFamily:`-apple-system, BlinkMacSystemFont, sans-serif`,padding:`20px`},children:(0,$.jsxs)(`div`,{style:{width:`100%`,maxWidth:`700px`,padding:`32px`,background:`white`,borderRadius:`12px`,border:`1px solid #e5e7eb`},children:[(0,$.jsx)(`h1`,{style:{margin:`0 0 8px 0`,fontSize:`24px`,fontWeight:700},children:`Terms of Service & Release of Liability`}),(0,$.jsx)(`p`,{style:{margin:`0 0 20px 0`,color:`#6b7280`,fontSize:`14px`},children:`Please read carefully before using TitleApp AI`}),(0,$.jsxs)(`div`,{onScroll:o,style:{maxHeight:`400px`,overflowY:`auto`,padding:`20px`,background:`#f9fafb`,border:`1px solid #e5e7eb`,borderRadius:`8px`,fontSize:`13px`,lineHeight:`1.6`,marginBottom:`20px`},children:[(0,$.jsx)(`h3`,{style:{fontSize:`15px`,fontWeight:700,marginTop:0},children:`1. NO FINANCIAL, LEGAL, OR PROFESSIONAL ADVICE`}),(0,$.jsxs)(`p`,{children:[(0,$.jsx)(`strong`,{children:`CRITICAL:`}),` TitleApp AI is a software tool only. It does NOT provide financial, investment, legal, tax, accounting, aviation safety, real estate, or any other professional advice. All AI-generated analyses, suggestions, recommendations, and outputs are for informational purposes only.`]}),(0,$.jsx)(`p`,{children:(0,$.jsx)(`strong`,{children:`You acknowledge that:`})}),(0,$.jsxs)(`ul`,{children:[(0,$.jsx)(`li`,{children:`AI analysis may be incomplete, inaccurate, or misleading`}),(0,$.jsx)(`li`,{children:`Investment decisions based on this platform are YOUR responsibility alone`}),(0,$.jsx)(`li`,{children:`You will consult licensed professionals (lawyers, CPAs, CFPs, etc.) before making decisions`}),(0,$.jsx)(`li`,{children:`We are NOT fiduciaries, advisors, or professionals in any regulated field`}),(0,$.jsx)(`li`,{children:`No attorney-client, advisor-client, or professional relationship is created`})]}),(0,$.jsx)(`h3`,{style:{fontSize:`15px`,fontWeight:700},children:`2. RELEASE OF LIABILITY`}),(0,$.jsxs)(`p`,{children:[(0,$.jsx)(`strong`,{children:`TO THE MAXIMUM EXTENT PERMITTED BY LAW, YOU RELEASE AND HOLD HARMLESS`}),` TitleApp AI, its officers, directors, employees, contractors, and affiliates from ANY AND ALL claims, damages, losses, liabilities, costs, or expenses arising from:`]}),(0,$.jsxs)(`ul`,{children:[(0,$.jsx)(`li`,{children:`Investment losses or financial damages of any kind`}),(0,$.jsx)(`li`,{children:`Errors, omissions, or inaccuracies in AI analysis or data`}),(0,$.jsx)(`li`,{children:`Reliance on any information, analysis, or recommendation provided by the platform`}),(0,$.jsx)(`li`,{children:`Third-party integrations (ForeFlight, Jeppesen, Salesforce, etc.)`}),(0,$.jsx)(`li`,{children:`Data breaches, unauthorized access, or security incidents`}),(0,$.jsx)(`li`,{children:`Aviation safety incidents, accidents, or regulatory violations`}),(0,$.jsx)(`li`,{children:`Real estate transaction failures or title defects`}),(0,$.jsx)(`li`,{children:`Copyright, trademark, or intellectual property claims`}),(0,$.jsx)(`li`,{children:`Loss of data, documents, or blockchain records`}),(0,$.jsx)(`li`,{children:`Downtime, service interruptions, or technical failures`})]}),(0,$.jsx)(`h3`,{style:{fontSize:`15px`,fontWeight:700},children:`3. NO WARRANTY  AS-IS SERVICE`}),(0,$.jsx)(`p`,{children:`THE PLATFORM IS PROVIDED "AS IS" AND "AS AVAILABLE" WITHOUT ANY WARRANTIES OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, ACCURACY, OR NON-INFRINGEMENT.`}),(0,$.jsx)(`p`,{children:`We do not warrant that:`}),(0,$.jsxs)(`ul`,{children:[(0,$.jsx)(`li`,{children:`The service will be uninterrupted, secure, or error-free`}),(0,$.jsx)(`li`,{children:`AI analysis will be accurate, complete, or reliable`}),(0,$.jsx)(`li`,{children:`Blockchain anchoring will prevent data tampering`}),(0,$.jsx)(`li`,{children:`API integrations will function correctly`}),(0,$.jsx)(`li`,{children:`Your data will be preserved indefinitely`})]}),(0,$.jsx)(`h3`,{style:{fontSize:`15px`,fontWeight:700},children:`4. USER RESPONSIBILITY`}),(0,$.jsx)(`p`,{children:(0,$.jsx)(`strong`,{children:`You are solely responsible for:`})}),(0,$.jsxs)(`ul`,{children:[(0,$.jsx)(`li`,{children:`All decisions made using this platform`}),(0,$.jsx)(`li`,{children:`Verifying all data, documents, and analysis independently`}),(0,$.jsx)(`li`,{children:`Compliance with all applicable laws and regulations`}),(0,$.jsx)(`li`,{children:`Maintaining backups of critical data`}),(0,$.jsx)(`li`,{children:`Securing your account credentials`}),(0,$.jsx)(`li`,{children:`Any content you upload or create`})]}),(0,$.jsx)(`h3`,{style:{fontSize:`15px`,fontWeight:700},children:`5. INDEMNIFICATION`}),(0,$.jsx)(`p`,{children:`You agree to indemnify, defend, and hold harmless TitleApp AI from any claims, damages, or expenses (including attorney fees) arising from:`}),(0,$.jsxs)(`ul`,{children:[(0,$.jsx)(`li`,{children:`Your use or misuse of the platform`}),(0,$.jsx)(`li`,{children:`Your violation of these terms`}),(0,$.jsx)(`li`,{children:`Your violation of any laws or third-party rights`}),(0,$.jsx)(`li`,{children:`Content you upload or share`})]}),(0,$.jsx)(`h3`,{style:{fontSize:`15px`,fontWeight:700},children:`6. LIMITATION OF LIABILITY`}),(0,$.jsx)(`p`,{children:`TO THE MAXIMUM EXTENT PERMITTED BY LAW, OUR TOTAL LIABILITY TO YOU FOR ANY CLAIM ARISING FROM YOUR USE OF THE PLATFORM SHALL NOT EXCEED THE AMOUNT YOU PAID US IN THE PAST 12 MONTHS, OR $100, WHICHEVER IS LESS.`}),(0,$.jsx)(`p`,{children:`WE SHALL NOT BE LIABLE FOR INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL, OR PUNITIVE DAMAGES, INCLUDING LOST PROFITS, LOST DATA, OR BUSINESS INTERRUPTION.`}),(0,$.jsx)(`h3`,{style:{fontSize:`15px`,fontWeight:700},children:`7. COPYRIGHT & INTELLECTUAL PROPERTY`}),(0,$.jsx)(`p`,{children:`You retain ownership of content you upload. By using the platform, you grant us a license to process, analyze, and display your content to provide the service.`}),(0,$.jsxs)(`p`,{children:[(0,$.jsx)(`strong`,{children:`AI-Generated Content:`}),` AI outputs may inadvertently include copyrighted material. You are responsible for ensuring your use complies with copyright law. We are not liable for any copyright infringement claims.`]}),(0,$.jsx)(`h3`,{style:{fontSize:`15px`,fontWeight:700},children:`8. AVIATION SAFETY DISCLAIMER`}),(0,$.jsxs)(`p`,{children:[(0,$.jsx)(`strong`,{children:`FOR PILOTS:`}),` This platform is NOT certified for flight operations. Flight logs, currency tracking, and DTC records are for informational purposes only. You are responsible for maintaining official FAA logbooks and ensuring compliance with all FARs. Do not use this platform as your sole flight record system.`]}),(0,$.jsx)(`h3`,{style:{fontSize:`15px`,fontWeight:700},children:`9. SECURITIES & INVESTMENT DISCLAIMER`}),(0,$.jsxs)(`p`,{children:[(0,$.jsx)(`strong`,{children:`FOR INVESTORS:`}),` We are NOT registered broker-dealers, investment advisors, or securities professionals. Deal analysis is NOT investment advice. Consult a registered investment advisor before making investment decisions. Past performance does not guarantee future results.`]}),(0,$.jsx)(`h3`,{style:{fontSize:`15px`,fontWeight:700},children:`10. GOVERNING LAW & DISPUTE RESOLUTION`}),(0,$.jsx)(`p`,{children:`These terms are governed by the laws of Delaware, USA. Any disputes shall be resolved through binding arbitration in Delaware, with each party bearing their own costs.`}),(0,$.jsxs)(`p`,{children:[(0,$.jsx)(`strong`,{children:`CLASS ACTION WAIVER:`}),` You agree to resolve disputes individually and waive the right to participate in class actions.`]}),(0,$.jsx)(`h3`,{style:{fontSize:`15px`,fontWeight:700},children:`11. CHANGES TO TERMS`}),(0,$.jsx)(`p`,{children:`We may update these terms at any time. Continued use after changes constitutes acceptance. Material changes will be communicated via email or platform notification.`}),(0,$.jsx)(`h3`,{style:{fontSize:`15px`,fontWeight:700},children:`12. ACKNOWLEDGMENT`}),(0,$.jsx)(`p`,{children:(0,$.jsx)(`strong`,{children:`BY CLICKING "I AGREE" BELOW, YOU ACKNOWLEDGE THAT YOU HAVE READ, UNDERSTOOD, AND AGREE TO BE BOUND BY THESE TERMS. YOU EXPRESSLY WAIVE ANY RIGHTS TO HOLD TITLEAPP AI LIABLE FOR ANY DAMAGES ARISING FROM YOUR USE OF THE PLATFORM.`})}),(0,$.jsx)(`p`,{style:{marginTop:`20px`,fontStyle:`italic`,color:`#6b7280`},children:`Last Updated: February 15, 2026`})]}),!i&&(0,$.jsx)(`div`,{style:{padding:`12px`,background:`#fef3c7`,border:`1px solid #fbbf24`,borderRadius:`6px`,fontSize:`13px`,marginBottom:`16px`,color:`#92400e`},children:`Please scroll to the bottom to read all terms`}),(0,$.jsxs)(`label`,{style:{display:`flex`,alignItems:`center`,gap:`12px`,padding:`16px`,background:i?`#f0fdf4`:`#f9fafb`,border:i?`2px solid #86efac`:`1px solid #e5e7eb`,borderRadius:`8px`,marginBottom:`16px`,cursor:i?`pointer`:`not-allowed`,opacity:i?1:.5},children:[(0,$.jsx)(`input`,{type:`checkbox`,checked:n,onChange:e=>r(e.target.checked),disabled:!i,style:{width:`20px`,height:`20px`,cursor:i?`pointer`:`not-allowed`}}),(0,$.jsxs)(`div`,{style:{fontSize:`14px`},children:[(0,$.jsx)(`strong`,{children:`I have read and agree to the Terms of Service and Release of Liability.`}),(0,$.jsx)(`br`,{}),(0,$.jsx)(`span`,{style:{fontSize:`12px`,color:`#6b7280`},children:`I understand I am solely responsible for all decisions made using this platform.`})]})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`12px`},children:[(0,$.jsx)(`button`,{onClick:e,disabled:!n,style:{flex:1,padding:`14px`,fontSize:`15px`,fontWeight:600,background:n?`rgb(124,58,237)`:`#9ca3af`,color:`white`,border:`none`,borderRadius:`8px`,cursor:n?`pointer`:`not-allowed`},children:`I Agree - Continue`}),(0,$.jsx)(`button`,{onClick:t,style:{padding:`14px 24px`,fontSize:`15px`,fontWeight:600,background:`white`,color:`#6b7280`,border:`1px solid #e5e7eb`,borderRadius:`8px`,cursor:`pointer`},children:`Decline`})]})]})})}function Ag({onComplete:e,onSkip:t}){let[n,r]=(0,_.useState)(!1),[i,a]=(0,_.useState)(!1);async function o(){r(!0);try{await new Promise(e=>setTimeout(e,2e3));let t=localStorage.getItem(`ID_TOKEN`);await fetch(`https://titleapp-frontdoor.titleapp-core.workers.dev/api?path=/v1/me:update`,{method:`POST`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${t}`},body:JSON.stringify({idVerified:!0,idVerifiedAt:new Date().toISOString()})}),a(!0),setTimeout(()=>e(),1200)}catch(e){console.error(`ID verification failed:`,e),r(!1)}}return(0,$.jsx)(`div`,{style:{minHeight:`100vh`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`#f8fafc`,fontFamily:`-apple-system, BlinkMacSystemFont, sans-serif`,padding:`20px`},children:(0,$.jsx)(`div`,{style:{width:`100%`,maxWidth:`480px`,padding:`40px`,background:`white`,borderRadius:`16px`,border:`1px solid #e5e7eb`,textAlign:`center`},children:i?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{style:{fontSize:`48px`,marginBottom:`16px`},children:``}),(0,$.jsx)(`h2`,{style:{margin:`0 0 8px 0`,fontSize:`24px`,fontWeight:700},children:`Identity Verified`}),(0,$.jsx)(`p`,{style:{margin:0,color:`#6b7280`,fontSize:`15px`},children:`Setting up your account...`})]}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{style:{width:`64px`,height:`64px`,borderRadius:`16px`,background:`rgba(124, 58, 237, 0.1)`,display:`flex`,alignItems:`center`,justifyContent:`center`,margin:`0 auto 24px`,fontSize:`28px`},children:`ID`}),(0,$.jsx)(`h2`,{style:{margin:`0 0 8px 0`,fontSize:`24px`,fontWeight:700},children:`Verify Your Identity`}),(0,$.jsx)(`p`,{style:{margin:`0 0 24px 0`,color:`#6b7280`,fontSize:`15px`,lineHeight:1.5},children:`A quick identity check helps protect your records and enables publishing. It costs $2 and takes about a minute. Valid for one year.`}),(0,$.jsxs)(`div`,{style:{display:`grid`,gap:`12px`},children:[(0,$.jsx)(`button`,{onClick:o,disabled:n,style:{padding:`14px`,fontSize:`15px`,fontWeight:600,background:n?`#9ca3af`:`rgb(124, 58, 237)`,color:`white`,border:`none`,borderRadius:`8px`,cursor:n?`not-allowed`:`pointer`},children:n?`Verifying...`:`Verify Now`}),(0,$.jsx)(`button`,{onClick:t,disabled:n,style:{padding:`14px`,fontSize:`15px`,background:`transparent`,border:`1px solid #e5e7eb`,borderRadius:`8px`,cursor:n?`not-allowed`:`pointer`,color:`#6b7280`},children:`I'll do it later`})]})]})})})}var jg=[`Single Family`,`Multi-Family`,`Apartment Complex`,`Condo / Townhome`,`Commercial`,`Mixed Use`];function Mg({onComplete:e,onSkip:t}){let[n,r]=(0,_.useState)(`portfolio`),[i,a]=(0,_.useState)(``),[o,s]=(0,_.useState)([]),[c,l]=(0,_.useState)(``),[u,d]=(0,_.useState)(`Multi-Family`),[f,p]=(0,_.useState)(``),[m,h]=(0,_.useState)(``),g=wg({purpose:`property_deed`}),v=wg({purpose:`property_insurance`}),y=wg({purpose:`property_leases`});function b(e){s(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])}async function x(e,t){await e.uploadFile(t)}if(n===`portfolio`)return(0,$.jsxs)(`div`,{style:{display:`grid`,gap:`24px`,maxWidth:`600px`,margin:`0 auto`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h2`,{style:{margin:`0 0 8px 0`,fontSize:`24px`,fontWeight:700},children:`Portfolio Basics`}),(0,$.jsx)(`p`,{style:{margin:0,color:`#6b7280`,fontSize:`15px`},children:`Tell us about your property management portfolio.`})]}),(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`How many properties do you manage?`}),(0,$.jsx)(`input`,{type:`number`,value:i,onChange:e=>a(e.target.value),placeholder:`e.g. 12`,style:{padding:`12px 16px`,fontSize:`15px`,border:`1px solid #e5e7eb`,borderRadius:`8px`}})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600,marginBottom:`8px`},children:`Property types (select all that apply)`}),(0,$.jsx)(`div`,{style:{display:`flex`,flexWrap:`wrap`,gap:`8px`},children:jg.map(e=>(0,$.jsx)(`button`,{onClick:()=>b(e),style:{padding:`8px 16px`,fontSize:`14px`,borderRadius:`8px`,border:o.includes(e)?`2px solid rgb(124,58,237)`:`1px solid #e5e7eb`,background:o.includes(e)?`rgba(124,58,237,0.08)`:`white`,cursor:`pointer`,fontWeight:o.includes(e)?600:400},children:e},e))})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`12px`,justifyContent:`space-between`},children:[(0,$.jsx)(`button`,{onClick:t,style:{padding:`12px 24px`,fontSize:`15px`,background:`transparent`,border:`1px solid #e5e7eb`,borderRadius:`8px`,cursor:`pointer`,color:`#6b7280`},children:`Skip`}),(0,$.jsx)(`button`,{onClick:()=>r(`firstProperty`),disabled:!i,style:{padding:`12px 32px`,fontSize:`15px`,fontWeight:600,background:i?`rgb(124,58,237)`:`#9ca3af`,color:`white`,border:`none`,borderRadius:`8px`,cursor:i?`pointer`:`not-allowed`},children:`Next: First Property`})]})]});if(n===`firstProperty`)return(0,$.jsxs)(`div`,{style:{display:`grid`,gap:`24px`,maxWidth:`600px`,margin:`0 auto`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h2`,{style:{margin:`0 0 8px 0`,fontSize:`24px`,fontWeight:700},children:`First Property`}),(0,$.jsx)(`p`,{style:{margin:0,color:`#6b7280`,fontSize:`15px`},children:`Add one property to get started. You can add more later.`})]}),(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`Property Address`}),(0,$.jsx)(`input`,{type:`text`,value:c,onChange:e=>l(e.target.value),placeholder:`123 Main St, Chicago, IL`,style:{padding:`12px 16px`,fontSize:`15px`,border:`1px solid #e5e7eb`,borderRadius:`8px`}})]}),(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`Property Type`}),(0,$.jsx)(`select`,{value:u,onChange:e=>d(e.target.value),style:{padding:`12px 16px`,fontSize:`15px`,border:`1px solid #e5e7eb`,borderRadius:`8px`,background:`white`},children:jg.map(e=>(0,$.jsx)(`option`,{value:e,children:e},e))})]}),(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`Unit Count`}),(0,$.jsx)(`input`,{type:`number`,value:f,onChange:e=>p(e.target.value),placeholder:`e.g. 24`,style:{padding:`12px 16px`,fontSize:`15px`,border:`1px solid #e5e7eb`,borderRadius:`8px`}})]}),(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`Ownership Entity`}),(0,$.jsx)(`input`,{type:`text`,value:m,onChange:e=>h(e.target.value),placeholder:`e.g. Acme Properties LLC`,style:{padding:`12px 16px`,fontSize:`15px`,border:`1px solid #e5e7eb`,borderRadius:`8px`}})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`12px`,justifyContent:`space-between`},children:[(0,$.jsx)(`button`,{onClick:()=>r(`portfolio`),style:{padding:`12px 24px`,fontSize:`15px`,background:`transparent`,border:`1px solid #e5e7eb`,borderRadius:`8px`,cursor:`pointer`,color:`#6b7280`},children:`Back`}),(0,$.jsx)(`button`,{onClick:()=>r(`docs`),disabled:!c,style:{padding:`12px 32px`,fontSize:`15px`,fontWeight:600,background:c?`rgb(124,58,237)`:`#9ca3af`,color:`white`,border:`none`,borderRadius:`8px`,cursor:c?`pointer`:`not-allowed`},children:`Next: Documents`})]})]});let S=[{label:`Deed / Title`,upload:g,accept:`.pdf,.jpg,.png`},{label:`Insurance Policy`,upload:v,accept:`.pdf`},{label:`Lease Templates`,upload:y,accept:`.pdf,.docx`}],C=S.some(e=>e.upload.uploaded);return(0,$.jsxs)(`div`,{style:{display:`grid`,gap:`24px`,maxWidth:`600px`,margin:`0 auto`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h2`,{style:{margin:`0 0 8px 0`,fontSize:`24px`,fontWeight:700},children:`Property Documents`}),(0,$.jsx)(`p`,{style:{margin:0,color:`#6b7280`,fontSize:`15px`},children:`Upload key documents for your first property. You can add more later.`})]}),S.map(e=>(0,$.jsxs)(`div`,{style:{padding:`16px`,background:`white`,border:e.upload.uploaded?`2px solid #10b981`:`1px solid #e5e7eb`,borderRadius:`12px`,display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:`15px`,fontWeight:600},children:e.label}),e.upload.uploaded&&(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#10b981`,marginTop:`4px`},children:`Uploaded`}),e.upload.error&&(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#dc2626`,marginTop:`4px`},children:e.upload.error})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`input`,{type:`file`,accept:e.accept,onChange:t=>{let n=t.target.files?.[0];n&&x(e.upload,n)},style:{display:`none`},id:`doc-${e.label}`,disabled:e.upload.uploaded||e.upload.uploading}),(0,$.jsx)(`label`,{htmlFor:`doc-${e.label}`,style:{display:`inline-block`,padding:`8px 16px`,fontSize:`14px`,background:e.upload.uploading?`#9ca3af`:`white`,border:`1px solid #d1d5db`,borderRadius:`6px`,cursor:e.upload.uploaded?`not-allowed`:`pointer`,color:e.upload.uploaded?`#9ca3af`:`#374151`},children:e.upload.uploading?`Uploading...`:e.upload.uploaded?`Done`:`Choose File`})]})]},e.label)),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`12px`,justifyContent:`space-between`},children:[(0,$.jsx)(`button`,{onClick:()=>r(`firstProperty`),style:{padding:`12px 24px`,fontSize:`15px`,background:`transparent`,border:`1px solid #e5e7eb`,borderRadius:`8px`,cursor:`pointer`,color:`#6b7280`},children:`Back`}),(0,$.jsx)(`button`,{onClick:e,style:{padding:`12px 32px`,fontSize:`15px`,fontWeight:600,background:`rgb(124,58,237)`,color:`white`,border:`none`,borderRadius:`8px`,cursor:`pointer`},children:C?`Complete Setup`:`Skip Documents`})]})]})}function Ng({onComplete:e,onSkip:t}){let[n,r]=(0,_.useState)(`focus`),[i,a]=(0,_.useState)(`residential`),[o,s]=(0,_.useState)(``),[c,l]=(0,_.useState)(``),[u,d]=(0,_.useState)(``),f=wg({purpose:`listing_agreement`}),p=wg({purpose:`disclosures`});async function m(e,t){await e.uploadFile(t)}if(n===`focus`)return(0,$.jsxs)(`div`,{style:{display:`grid`,gap:`24px`,maxWidth:`600px`,margin:`0 auto`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h2`,{style:{margin:`0 0 8px 0`,fontSize:`24px`,fontWeight:700},children:`Brokerage Focus`}),(0,$.jsx)(`p`,{style:{margin:0,color:`#6b7280`,fontSize:`15px`},children:`What type of real estate does your brokerage focus on?`})]}),(0,$.jsx)(`div`,{style:{display:`grid`,gap:`8px`},children:[{value:`residential`,label:`Residential`},{value:`commercial`,label:`Commercial`},{value:`land`,label:`Land / Lots`},{value:`mixed`,label:`Mixed (All Types)`}].map(e=>(0,$.jsx)(`button`,{onClick:()=>a(e.value),style:{padding:`16px 20px`,fontSize:`15px`,textAlign:`left`,borderRadius:`12px`,border:i===e.value?`2px solid rgb(124,58,237)`:`1px solid #e5e7eb`,background:i===e.value?`rgba(124,58,237,0.05)`:`white`,cursor:`pointer`,fontWeight:i===e.value?600:400},children:e.label},e.value))}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`12px`,justifyContent:`space-between`},children:[(0,$.jsx)(`button`,{onClick:t,style:{padding:`12px 24px`,fontSize:`15px`,background:`transparent`,border:`1px solid #e5e7eb`,borderRadius:`8px`,cursor:`pointer`,color:`#6b7280`},children:`Skip`}),(0,$.jsx)(`button`,{onClick:()=>r(`firstListing`),style:{padding:`12px 32px`,fontSize:`15px`,fontWeight:600,background:`rgb(124,58,237)`,color:`white`,border:`none`,borderRadius:`8px`,cursor:`pointer`},children:`Next: First Listing`})]})]});if(n===`firstListing`)return(0,$.jsxs)(`div`,{style:{display:`grid`,gap:`24px`,maxWidth:`600px`,margin:`0 auto`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h2`,{style:{margin:`0 0 8px 0`,fontSize:`24px`,fontWeight:700},children:`First Listing`}),(0,$.jsx)(`p`,{style:{margin:0,color:`#6b7280`,fontSize:`15px`},children:`Add a listing to see the platform in action. You can add more later.`})]}),(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`Property Address`}),(0,$.jsx)(`input`,{type:`text`,value:o,onChange:e=>s(e.target.value),placeholder:`456 Oak Ave, Los Angeles, CA`,style:{padding:`12px 16px`,fontSize:`15px`,border:`1px solid #e5e7eb`,borderRadius:`8px`}})]}),(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`List Price`}),(0,$.jsx)(`input`,{type:`text`,value:c,onChange:e=>l(e.target.value),placeholder:`$850,000`,style:{padding:`12px 16px`,fontSize:`15px`,border:`1px solid #e5e7eb`,borderRadius:`8px`}})]}),(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`MLS ID (optional)`}),(0,$.jsx)(`input`,{type:`text`,value:u,onChange:e=>d(e.target.value),placeholder:`MLS-12345`,style:{padding:`12px 16px`,fontSize:`15px`,border:`1px solid #e5e7eb`,borderRadius:`8px`}})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`12px`,justifyContent:`space-between`},children:[(0,$.jsx)(`button`,{onClick:()=>r(`focus`),style:{padding:`12px 24px`,fontSize:`15px`,background:`transparent`,border:`1px solid #e5e7eb`,borderRadius:`8px`,cursor:`pointer`,color:`#6b7280`},children:`Back`}),(0,$.jsx)(`button`,{onClick:()=>r(`docs`),disabled:!o,style:{padding:`12px 32px`,fontSize:`15px`,fontWeight:600,background:o?`rgb(124,58,237)`:`#9ca3af`,color:`white`,border:`none`,borderRadius:`8px`,cursor:o?`pointer`:`not-allowed`},children:`Next: Documents`})]})]});let h=[{label:`Listing Agreement`,upload:f,accept:`.pdf`},{label:`Disclosures`,upload:p,accept:`.pdf`}],g=h.some(e=>e.upload.uploaded);return(0,$.jsxs)(`div`,{style:{display:`grid`,gap:`24px`,maxWidth:`600px`,margin:`0 auto`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h2`,{style:{margin:`0 0 8px 0`,fontSize:`24px`,fontWeight:700},children:`Listing Documents`}),(0,$.jsx)(`p`,{style:{margin:0,color:`#6b7280`,fontSize:`15px`},children:`Upload documents for your first listing.`})]}),h.map(e=>(0,$.jsxs)(`div`,{style:{padding:`16px`,background:`white`,border:e.upload.uploaded?`2px solid #10b981`:`1px solid #e5e7eb`,borderRadius:`12px`,display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:`15px`,fontWeight:600},children:e.label}),e.upload.uploaded&&(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#10b981`,marginTop:`4px`},children:`Uploaded`}),e.upload.error&&(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#dc2626`,marginTop:`4px`},children:e.upload.error})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`input`,{type:`file`,accept:e.accept,onChange:t=>{let n=t.target.files?.[0];n&&m(e.upload,n)},style:{display:`none`},id:`brokerage-doc-${e.label}`,disabled:e.upload.uploaded||e.upload.uploading}),(0,$.jsx)(`label`,{htmlFor:`brokerage-doc-${e.label}`,style:{display:`inline-block`,padding:`8px 16px`,fontSize:`14px`,background:e.upload.uploading?`#9ca3af`:`white`,border:`1px solid #d1d5db`,borderRadius:`6px`,cursor:e.upload.uploaded?`not-allowed`:`pointer`,color:e.upload.uploaded?`#9ca3af`:`#374151`},children:e.upload.uploading?`Uploading...`:e.upload.uploaded?`Done`:`Choose File`})]})]},e.label)),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`12px`,justifyContent:`space-between`},children:[(0,$.jsx)(`button`,{onClick:()=>r(`firstListing`),style:{padding:`12px 24px`,fontSize:`15px`,background:`transparent`,border:`1px solid #e5e7eb`,borderRadius:`8px`,cursor:`pointer`,color:`#6b7280`},children:`Back`}),(0,$.jsx)(`button`,{onClick:e,style:{padding:`12px 32px`,fontSize:`15px`,fontWeight:600,background:`rgb(124,58,237)`,color:`white`,border:`none`,borderRadius:`8px`,cursor:`pointer`},children:g?`Complete Setup`:`Skip Documents`})]})]})}function Pg({onComplete:e}){let[t,n]=(0,_.useState)(`checking`),[r,i]=(0,_.useState)(``),[a,o]=(0,_.useState)(`auto`),[s,c]=(0,_.useState)(`IL`),[l,u]=(0,_.useState)(null),[d,f]=(0,_.useState)(``),[p,m]=(0,_.useState)(!1),[h,g]=(0,_.useState)(``);(0,_.useEffect)(()=>{async function e(){try{let e=yg.currentUser;if(!e){n(`terms`);return}let t=await hg(_h(bg,`users`,e.uid));if(t.exists()){let e=t.data();if(e.termsAcceptedAt){e.companyName&&i(e.companyName),n(`details`);return}}n(`terms`)}catch(e){console.error(`Failed to check onboarding progress:`,e),n(`terms`)}}e()},[]);function v(){if(!r.trim()){g(`Please enter your company name`);return}n(`raas`)}function y(){a===`analyst`?n(`criteria`):a===`auto`?n(`dealerData`):a===`real-estate`?n(`brokerage`):a===`property-mgmt`?n(`propertyMgmt`):x(null)}function b(e){u(e),n(`sampleDeals`)}async function x(t){m(!0),g(``);try{let i=localStorage.getItem(`ID_TOKEN`),o={tenantName:r,tenantType:`business`,vertical:a,jurisdiction:s};t&&(o.riskProfile=t),d.trim()&&(o.raasRules=d.trim());let c=await fetch(`https://titleapp-frontdoor.titleapp-core.workers.dev/api?path=/v1/onboarding:claimTenant`,{method:`POST`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${i}`},body:JSON.stringify(o)}),l=await c.json();if(!c.ok||!l.ok)throw Error(l.error||`Failed to create account`);localStorage.setItem(`TENANT_ID`,l.tenantId),n(`magic`),setTimeout(()=>{e(l.tenantId)},2500)}catch(e){console.error(e),g(e?.message||String(e)),m(!1)}}return t===`checking`?(0,$.jsx)(`div`,{style:{minHeight:`100vh`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`#f8fafc`,fontFamily:`-apple-system, BlinkMacSystemFont, sans-serif`},children:(0,$.jsxs)(`div`,{style:{textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:600,color:`#7c3aed`,marginBottom:`16px`},children:`TitleApp`}),(0,$.jsx)(`div`,{style:{fontSize:`16px`,color:`#6b7280`},children:`Loading...`})]})}):t===`terms`?(0,$.jsx)(kg,{onAccept:()=>n(`welcome`),onDecline:()=>{alert(`You must accept the terms to use TitleApp AI`),window.location.href=`/`}}):t===`criteria`?(0,$.jsx)(`div`,{style:{minHeight:`100vh`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`#f8fafc`,fontFamily:`-apple-system, BlinkMacSystemFont, sans-serif`,padding:`20px`},children:(0,$.jsx)(`div`,{style:{width:`100%`,maxWidth:`600px`,padding:`40px`,background:`white`,borderRadius:`16px`,border:`1px solid #e5e7eb`},children:(0,$.jsx)(Cg,{onComplete:b,onSkip:()=>x(null)})})}):t===`sampleDeals`?(0,$.jsx)(`div`,{style:{minHeight:`100vh`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`#f8fafc`,fontFamily:`-apple-system, BlinkMacSystemFont, sans-serif`,padding:`40px 20px`},children:(0,$.jsx)(`div`,{style:{width:`100%`,maxWidth:`800px`,padding:`40px`,background:`white`,borderRadius:`16px`,border:`1px solid #e5e7eb`},children:(0,$.jsx)(Tg,{criteria:l,onComplete:()=>x(l),onSkip:()=>x(l)})})}):t===`dealerData`?(0,$.jsx)(`div`,{style:{minHeight:`100vh`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`#f8fafc`,fontFamily:`-apple-system, BlinkMacSystemFont, sans-serif`,padding:`40px 20px`},children:(0,$.jsx)(`div`,{style:{width:`100%`,maxWidth:`900px`,padding:`40px`,background:`white`,borderRadius:`16px`,border:`1px solid #e5e7eb`},children:(0,$.jsx)(Dg,{onComplete:()=>x(null),onSkip:()=>x(null)})})}):t===`realEstateData`?(0,$.jsx)(`div`,{style:{minHeight:`100vh`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`#f8fafc`,fontFamily:`-apple-system, BlinkMacSystemFont, sans-serif`,padding:`40px 20px`},children:(0,$.jsx)(`div`,{style:{width:`100%`,maxWidth:`950px`,padding:`40px`,background:`white`,borderRadius:`16px`,border:`1px solid #e5e7eb`},children:(0,$.jsx)(Og,{onComplete:()=>x(null),onSkip:()=>x(null)})})}):t===`raas`?(0,$.jsx)(`div`,{style:{minHeight:`100vh`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`#f8fafc`,fontFamily:`-apple-system, BlinkMacSystemFont, sans-serif`,padding:`20px`},children:(0,$.jsxs)(`div`,{style:{width:`100%`,maxWidth:`500px`,padding:`40px`,background:`white`,borderRadius:`16px`,border:`1px solid #e5e7eb`},children:[(0,$.jsxs)(`div`,{style:{marginBottom:`24px`},children:[(0,$.jsx)(`h2`,{style:{margin:`0 0 8px 0`,fontSize:`24px`,fontWeight:700},children:`AI Assistant Rules`}),(0,$.jsx)(`p`,{style:{margin:0,color:`#6b7280`,fontSize:`15px`,lineHeight:1.5},children:`Any custom rules for your AI assistant? For example, tone of voice, topics to avoid, preferred terminology, or specific workflows.`})]}),(0,$.jsx)(`textarea`,{value:d,onChange:e=>f(e.target.value),placeholder:`e.g. Always address clients formally. Never discuss competitor pricing. Use metric units.`,rows:5,style:{width:`100%`,padding:`12px 16px`,fontSize:`15px`,border:`1px solid #e5e7eb`,borderRadius:`8px`,resize:`vertical`,fontFamily:`inherit`,lineHeight:1.5}}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`12px`,marginTop:`24px`},children:[(0,$.jsx)(`button`,{onClick:y,style:{flex:1,padding:`14px`,fontSize:`15px`,background:`transparent`,border:`1px solid #e5e7eb`,borderRadius:`8px`,cursor:`pointer`,color:`#6b7280`},children:`Use Standard Rules`}),(0,$.jsx)(`button`,{onClick:y,disabled:!d.trim(),style:{flex:1,padding:`14px`,fontSize:`15px`,fontWeight:600,background:d.trim()?`rgb(124,58,237)`:`#9ca3af`,color:`white`,border:`none`,borderRadius:`8px`,cursor:d.trim()?`pointer`:`not-allowed`},children:`Save & Continue`})]})]})}):t===`brokerage`?(0,$.jsx)(`div`,{style:{minHeight:`100vh`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`#f8fafc`,fontFamily:`-apple-system, BlinkMacSystemFont, sans-serif`,padding:`40px 20px`},children:(0,$.jsx)(`div`,{style:{width:`100%`,maxWidth:`700px`,padding:`40px`,background:`white`,borderRadius:`16px`,border:`1px solid #e5e7eb`},children:(0,$.jsx)(Ng,{onComplete:()=>x(null),onSkip:()=>x(null)})})}):t===`propertyMgmt`?(0,$.jsx)(`div`,{style:{minHeight:`100vh`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`#f8fafc`,fontFamily:`-apple-system, BlinkMacSystemFont, sans-serif`,padding:`40px 20px`},children:(0,$.jsx)(`div`,{style:{width:`100%`,maxWidth:`700px`,padding:`40px`,background:`white`,borderRadius:`16px`,border:`1px solid #e5e7eb`},children:(0,$.jsx)(Mg,{onComplete:()=>x(null),onSkip:()=>x(null)})})}):t===`magic`?(0,$.jsxs)(`div`,{style:{minHeight:`100vh`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`linear-gradient(135deg, #667eea 0%, #764ba2 100%)`,fontFamily:`-apple-system, BlinkMacSystemFont, sans-serif`},children:[(0,$.jsxs)(`div`,{style:{textAlign:`center`,color:`white`,animation:`fadeInScale 0.6s ease-out`},children:[(0,$.jsx)(`div`,{style:{fontSize:`48px`,marginBottom:`24px`,fontWeight:300,letterSpacing:`-2px`},children:`TitleApp`}),(0,$.jsxs)(`h1`,{style:{fontSize:`32px`,fontWeight:700,margin:`0 0 16px 0`},children:[`Welcome, `,r||`partner`,`.`]}),(0,$.jsx)(`p`,{style:{fontSize:`18px`,opacity:.9},children:`Your AI-powered business platform is ready`})]}),(0,$.jsx)(`style`,{children:`
          @keyframes fadeInScale {
            from {
              opacity: 0;
              transform: scale(0.8);
            }
            to {
              opacity: 1;
              transform: scale(1);
            }
          }
          @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
          }
        `})]}):t===`idVerify`?(0,$.jsx)(Ag,{onComplete:()=>n(`details`),onSkip:()=>n(`details`)}):t===`details`?(0,$.jsx)(`div`,{style:{minHeight:`100vh`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`#f8fafc`,fontFamily:`-apple-system, BlinkMacSystemFont, sans-serif`,padding:`20px`},children:(0,$.jsxs)(`div`,{style:{width:`100%`,maxWidth:`500px`,padding:`40px`,background:`white`,borderRadius:`16px`,border:`1px solid #e5e7eb`},children:[(0,$.jsxs)(`div`,{style:{marginBottom:`32px`},children:[(0,$.jsx)(`h1`,{style:{margin:`0 0 8px 0`,fontSize:`28px`,fontWeight:700},children:`Set up your account`}),(0,$.jsx)(`p`,{style:{margin:0,color:`#6b7280`,fontSize:`15px`},children:`Just a few quick details to get started`})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gap:`24px`},children:[(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`Company Name *`}),(0,$.jsx)(`input`,{type:`text`,value:r,onChange:e=>i(e.target.value),placeholder:`Acme Auto Dealership`,autoFocus:!0,required:!0,style:{padding:`12px 16px`,fontSize:`15px`,border:`1px solid #e5e7eb`,borderRadius:`8px`,outline:`none`},onKeyDown:e=>{e.key===`Enter`&&x()}})]}),(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`Industry`}),(0,$.jsxs)(`select`,{value:a,onChange:e=>o(e.target.value),style:{padding:`12px 16px`,fontSize:`15px`,border:`1px solid #e5e7eb`,borderRadius:`8px`,outline:`none`,background:`white`},children:[(0,$.jsx)(`option`,{value:`auto`,children:`Automotive`}),(0,$.jsx)(`option`,{value:`real-estate`,children:`Real Estate (Brokerage)`}),(0,$.jsx)(`option`,{value:`property-mgmt`,children:`Property Management`}),(0,$.jsx)(`option`,{value:`aviation`,children:`Aviation`}),(0,$.jsx)(`option`,{value:`marine`,children:`Marine`}),(0,$.jsx)(`option`,{value:`analyst`,children:`Investment / PE`}),(0,$.jsx)(`option`,{value:`GLOBAL`,children:`Other`})]})]}),(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`State / Jurisdiction`}),(0,$.jsxs)(`select`,{value:s,onChange:e=>c(e.target.value),style:{padding:`12px 16px`,fontSize:`15px`,border:`1px solid #e5e7eb`,borderRadius:`8px`,outline:`none`,background:`white`},children:[(0,$.jsx)(`option`,{value:`IL`,children:`Illinois`}),(0,$.jsx)(`option`,{value:`CA`,children:`California`}),(0,$.jsx)(`option`,{value:`TX`,children:`Texas`}),(0,$.jsx)(`option`,{value:`FL`,children:`Florida`}),(0,$.jsx)(`option`,{value:`NY`,children:`New York`}),(0,$.jsx)(`option`,{value:`NV`,children:`Nevada`}),(0,$.jsx)(`option`,{value:`GLOBAL`,children:`Other / Multi-State`})]})]}),h&&(0,$.jsx)(`div`,{style:{padding:`12px`,background:`#fff5f5`,border:`1px solid #fecaca`,borderRadius:`8px`,fontSize:`14px`,color:`#dc2626`},children:h}),(0,$.jsx)(`button`,{onClick:v,disabled:p,style:{padding:`14px`,fontSize:`15px`,fontWeight:600,background:p?`#9ca3af`:`rgb(124,58,237)`,color:`white`,border:`none`,borderRadius:`8px`,cursor:p?`not-allowed`:`pointer`,marginTop:`8px`},children:p?`Creating your account...`:`Next `}),(0,$.jsx)(`p`,{style:{fontSize:`13px`,color:`#6b7280`,textAlign:`center`,margin:0},children:`You can add team members, integrations, and billing later`})]})]})}):(0,$.jsx)(`div`,{style:{minHeight:`100vh`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`linear-gradient(135deg, #667eea 0%, #764ba2 100%)`,fontFamily:`-apple-system, BlinkMacSystemFont, sans-serif`,padding:`20px`},children:(0,$.jsxs)(`div`,{style:{textAlign:`center`,color:`white`,maxWidth:`600px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`48px`,marginBottom:`24px`,fontWeight:300,letterSpacing:`-2px`},children:`TitleApp`}),(0,$.jsx)(`h1`,{style:{fontSize:`40px`,fontWeight:700,margin:`0 0 16px 0`},children:`Welcome to TitleApp AI`}),(0,$.jsx)(`p`,{style:{fontSize:`20px`,opacity:.95,marginBottom:`40px`,lineHeight:1.5},children:`Your AI-powered platform for title, ownership, and business automation`}),(0,$.jsx)(`button`,{onClick:()=>n(`idVerify`),style:{padding:`16px 48px`,fontSize:`18px`,fontWeight:600,background:`white`,color:`#667eea`,border:`none`,borderRadius:`12px`,cursor:`pointer`,boxShadow:`0 4px 20px rgba(0,0,0,0.2)`},children:`Create Your Account`})]})})}function Fg({onComplete:e,vertical:t=`auto`}){let[n,r]=(0,_.useState)(0),[i,a]=(0,_.useState)(!1);(0,_.useEffect)(()=>{localStorage.getItem(`hasSeenOnboardingTour`)||setTimeout(()=>a(!0),1e3)},[]);let o=(()=>{let e=[{title:`Welcome to TitleApp AI`,content:`Let me show you around. This quick tour will help you get started with your AI-powered business platform.`,action:`Get Started`,highlight:null},{title:`Your Dashboard`,content:`This is your command center. Here you'll see key metrics, recent activity, and quick actions.`,highlight:`.pageHeader`,section:`dashboard`},{title:`AI Chat Assistant`,content:`Click the chat button in the bottom right to talk to your AI assistant. Ask about customers, inventory, records, or get help with any task.`,highlight:`.floating-chat-button`,action:`Try It`},{title:`Navigation Sidebar`,content:`Access all your tools here. Each section is designed to help you manage different aspects of your business.`,highlight:`.sidebar`}],n={auto:[{title:`Upload Your Data`,content:`To get the most out of TitleApp, upload your business data:

 Customer database
 Current inventory
 Service schedules
 Financial products
 Warranty offerings

We'll use AI to analyze and help you sell more effectively.`,action:`Upload Now`,highlight:null},{title:`Inventory & Customers`,content:`Manage your vehicle inventory and customer relationships. The AI will help you match customers to vehicles and suggest optimal pricing.`,highlight:null}],analyst:[{title:`Upload Deal Memos`,content:`Upload 2-3 sample deals you're interested in. Our AI will analyze them against your investment criteria and help you identify your sweet spot.`,action:`Upload Deals`,highlight:null},{title:`Deal Analysis`,content:`The Analyst section uses AI to screen deals, identify risks, and recommend investment structures. All analysis follows your custom criteria.`,section:`analyst`,highlight:null}],"real-estate":[{title:`Upload Property Docs`,content:`Upload property titles, inspection reports, and transaction records. We'll help you track ownership and identify opportunities.`,action:`Upload Now`,highlight:null}]},r=[{title:`You're All Set`,content:`That's it! Remember, you can always ask the AI chat assistant for help. It knows your business context and can guide you through any task.`,action:`Start Using TitleApp`,highlight:null}];return[...e,...n[t]||[],...r]})(),s=o[n],c=()=>{n<o.length-1?r(n+1):u()},l=()=>{u()},u=()=>{localStorage.setItem(`hasSeenOnboardingTour`,`true`),a(!1),e&&e()},d=()=>{if(s.action===`Try It`){let e=document.querySelector(`.floating-chat-button`);e&&e.click(),c()}else s.action===`Upload Now`||s.action,c()};return i?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{className:`onboarding-overlay`}),s.highlight&&(0,$.jsx)(`div`,{className:`onboarding-spotlight`,style:{"--spotlight-target":s.highlight}}),(0,$.jsxs)(`div`,{className:`onboarding-card`,children:[(0,$.jsxs)(`div`,{className:`onboarding-header`,children:[(0,$.jsxs)(`div`,{className:`onboarding-progress`,children:[`Step `,n+1,` of `,o.length]}),(0,$.jsx)(`button`,{className:`onboarding-skip`,onClick:l,children:`Skip Tour`})]}),(0,$.jsxs)(`div`,{className:`onboarding-content`,children:[(0,$.jsx)(`h2`,{className:`onboarding-title`,children:s.title}),(0,$.jsx)(`p`,{className:`onboarding-text`,style:{whiteSpace:`pre-line`},children:s.content})]}),(0,$.jsxs)(`div`,{className:`onboarding-footer`,children:[(0,$.jsx)(`div`,{className:`onboarding-dots`,children:o.map((e,t)=>(0,$.jsx)(`div`,{className:`onboarding-dot ${t===n?`active`:``} ${t<n?`completed`:``}`},t))}),(0,$.jsxs)(`div`,{className:`onboarding-actions`,children:[n>0&&(0,$.jsx)(`button`,{className:`onboarding-btn onboarding-btn-secondary`,onClick:()=>r(n-1),children:`Back`}),s.action?(0,$.jsx)(`button`,{className:`onboarding-btn onboarding-btn-primary`,onClick:d,children:s.action}):(0,$.jsx)(`button`,{className:`onboarding-btn onboarding-btn-primary`,onClick:c,children:n===o.length-1?`Finish`:`Next`})]})]})]})]}):null}function Ig({currentSection:e,onNavigate:t,onClose:n}){let r=[{id:`dashboard`,label:`Dashboard`},{id:`analyst`,label:`Analyst`},{id:`rules-resources`,label:`Rules & Resources`},{id:`inventory`,label:`Services & Inventory`},{id:`ai-chats`,label:`AI, GPTs & Chats`},{id:`customers`,label:`Customers`},{id:`appointments`,label:`Appointments`},{id:`staff`,label:`Staff`},{id:`reports`,label:`Reports`},{id:`data-apis`,label:`Data & APIs`},{id:`settings`,label:`Settings`}];function i(e){t(e),n&&n()}function a(){localStorage.removeItem(`ID_TOKEN`),window.location.reload()}return(0,$.jsxs)(`div`,{className:`sidebar`,children:[(0,$.jsxs)(`div`,{className:`sidebarHeader`,children:[(0,$.jsxs)(`div`,{className:`brand`,children:[(0,$.jsx)(`img`,{src:`/logo.png`,alt:`TitleApp AI`,style:{width:`32px`,height:`32px`,borderRadius:`8px`}}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`brandName`,children:`TitleApp AI`}),(0,$.jsx)(`div`,{className:`brandSub`,children:`Business`})]})]}),(0,$.jsx)(`button`,{className:`sidebarClose iconBtn`,onClick:n,"aria-label":`Close menu`,children:``})]}),(0,$.jsxs)(`div`,{className:`sidebarSection`,children:[(0,$.jsx)(`div`,{className:`sidebarLabel`,children:`Navigation`}),(0,$.jsx)(`nav`,{className:`nav`,children:r.map(t=>(0,$.jsx)(`button`,{className:`navItem ${e===t.id?`navItemActive`:``}`,onClick:()=>i(t.id),style:{width:`100%`,textAlign:`left`,cursor:`pointer`},children:t.label},t.id))})]}),(0,$.jsx)(`div`,{className:`sidebarFooter`,children:(0,$.jsx)(`button`,{onClick:a,className:`iconBtn`,style:{width:`100%`,marginTop:`10px`},children:`Sign Out`})})]})}function Lg({currentSection:e}){let[t,n]=(0,_.useState)([]),[r,i]=(0,_.useState)(``),[a,o]=(0,_.useState)(!1),[s,c]=(0,_.useState)(!1),[l,u]=(0,_.useState)(!1),d=(0,_.useRef)(null),f=Os(),p=Sh(),m=f?.currentUser;(0,_.useEffect)(()=>{let e=f.onAuthStateChanged(()=>{u(!0)});return()=>e()},[]),(0,_.useEffect)(()=>{m&&l&&t.length===0&&h()},[m,l]),(0,_.useEffect)(()=>{d.current&&(d.current.scrollTop=d.current.scrollHeight)},[t,a]);async function h(){try{let e=sessionStorage.getItem(`ta_platform_sid`),t=[tg(`userId`,`==`,m.uid),ig(`createdAt`,`asc`),og(50)];e&&t.splice(1,0,tg(`sessionId`,`==`,e));let r=await gg($h(gh(p,`messageEvents`),...t)),i=[];r.forEach(e=>{let t=e.data();t.type===`chat:message:received`?i.push({role:`user`,content:t.message}):t.type===`chat:message:responded`&&i.push({role:`assistant`,content:t.response})}),e&&i.length>0&&i.push({role:`assistant`,content:`Welcome to your business platform. Your onboarding steps are on the left -- I'm right here if you need help.`,isSystem:!0}),n(i)}catch(e){console.error(`Failed to load conversation history:`,e)}}async function g(t){if(t?.preventDefault(),!r.trim()||s)return;if(!m){n(e=>[...e,{role:`assistant`,content:`Please sign in to use the AI assistant.`,isError:!0}]);return}let a=r.trim();i(``),c(!0),n(e=>[...e,{role:`user`,content:a}]),o(!0);try{let t=await m.getIdToken(),r=localStorage.getItem(`TENANT_ID`)||`public`,i=localStorage.getItem(`VERTICAL`)||`auto`,s=localStorage.getItem(`JURISDICTION`)||`IL`,c=await fetch(`https://titleapp-frontdoor.titleapp-core.workers.dev/api?path=/v1/chat:message`,{method:`POST`,headers:{Authorization:`Bearer ${t}`,"Content-Type":`application/json`,"X-Tenant-Id":r,"X-Vertical":i,"X-Jurisdiction":s},body:JSON.stringify({message:a,context:{source:`business_portal`,currentSection:e||`dashboard`,vertical:i,jurisdiction:s},preferredModel:`claude`})}),l=await c.json();if(!c.ok)throw Error(l.error||`Request failed`);o(!1),n(e=>[...e,{role:`assistant`,content:l.response||`No response received.`,structuredData:l.structuredData}])}catch(e){console.error(`Send failed:`,e),o(!1),n(t=>[...t,{role:`assistant`,content:e.message||`Failed to send message. Please try again.`,isError:!0}])}finally{c(!1)}}function v(e){e.key===`Enter`&&!e.shiftKey&&(e.preventDefault(),g())}function y(e){return!e||typeof e!=`object`?null:e.type===`analyst_result`?(0,$.jsxs)(`div`,{className:`structured-analyst-result`,children:[(0,$.jsxs)(`div`,{className:`analyst-header`,children:[(0,$.jsx)(`span`,{className:`analyst-emoji`,children:e.verdict_emoji}),(0,$.jsx)(`h4`,{children:e.verdict}),(0,$.jsxs)(`span`,{className:`analyst-score`,children:[e.score,`/100`]})]}),e.summary&&(0,$.jsx)(`p`,{className:`analyst-summary`,children:e.summary}),e.key_findings&&e.key_findings.length>0&&(0,$.jsxs)(`div`,{className:`analyst-findings`,children:[(0,$.jsx)(`h5`,{children:`Key Findings:`}),(0,$.jsx)(`ul`,{children:e.key_findings.map((e,t)=>(0,$.jsx)(`li`,{children:e},t))})]})]}):e.type===`dtc_preview`?(0,$.jsxs)(`div`,{className:`structured-dtc-preview`,children:[(0,$.jsxs)(`div`,{className:`dtc-header`,children:[(0,$.jsxs)(`h4`,{children:[e.asset_type,` DTC Preview`]}),e.blockchain_verified&&(0,$.jsx)(`span`,{className:`dtc-verified`,children:`Verified`})]}),e.details&&(0,$.jsx)(`div`,{className:`dtc-details`,children:Object.entries(e.details).map(([e,t])=>(0,$.jsxs)(`div`,{className:`dtc-field`,children:[(0,$.jsxs)(`span`,{className:`dtc-label`,children:[e,`:`]}),(0,$.jsx)(`span`,{className:`dtc-value`,children:String(t)})]},e))})]}):e.type===`trade_summary`?(0,$.jsxs)(`div`,{className:`structured-trade-summary`,children:[(0,$.jsx)(`h4`,{children:`Trade Summary`}),(0,$.jsxs)(`div`,{className:`trade-details`,children:[(0,$.jsxs)(`div`,{className:`trade-field`,children:[(0,$.jsx)(`strong`,{children:`Your Vehicle:`}),` `,e.your_vehicle]}),(0,$.jsxs)(`div`,{className:`trade-field`,children:[(0,$.jsx)(`strong`,{children:`Trade Value:`}),` $`,e.trade_value?.toLocaleString()]}),(0,$.jsxs)(`div`,{className:`trade-field`,children:[(0,$.jsx)(`strong`,{children:`New Vehicle:`}),` `,e.new_vehicle]}),(0,$.jsxs)(`div`,{className:`trade-field`,children:[(0,$.jsx)(`strong`,{children:`Price:`}),` $`,e.new_price?.toLocaleString()]}),(0,$.jsxs)(`div`,{className:`trade-field`,children:[(0,$.jsx)(`strong`,{children:`Net Cost:`}),` $`,e.net_cost?.toLocaleString()]})]})]}):(0,$.jsx)(`div`,{className:`structured-generic`,children:(0,$.jsx)(`pre`,{children:JSON.stringify(e,null,2)})})}return(0,$.jsxs)(`div`,{className:`chatPanelContainer`,children:[(0,$.jsxs)(`div`,{className:`chatPanelHeader`,children:[(0,$.jsx)(`svg`,{width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:(0,$.jsx)(`path`,{d:`M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z`})}),(0,$.jsx)(`span`,{children:`AI Assistant`})]}),(0,$.jsxs)(`div`,{className:`chatPanelMessages`,ref:d,children:[t.length===0&&!a&&(0,$.jsxs)(`div`,{className:`chat-welcome`,children:[(0,$.jsx)(`p`,{children:`Hi. I'm your TitleApp AI assistant.`}),m?(0,$.jsx)(`p`,{children:`Ask me anything about your records, documents, customers, inventory, or business operations.`}):(0,$.jsx)(`p`,{children:`Please sign in to start chatting.`})]}),t.map((e,t)=>(0,$.jsxs)(`div`,{className:`chat-message ${e.role} ${e.isError?`error`:``}`,children:[(0,$.jsx)(`div`,{className:`chat-bubble`,children:e.content}),e.structuredData&&(0,$.jsx)(`div`,{className:`chat-structured-data`,children:y(e.structuredData)})]},t)),a&&(0,$.jsx)(`div`,{className:`chat-message assistant`,children:(0,$.jsxs)(`div`,{className:`chat-typing-indicator`,children:[(0,$.jsx)(`div`,{className:`typing-dot`}),(0,$.jsx)(`div`,{className:`typing-dot`}),(0,$.jsx)(`div`,{className:`typing-dot`})]})})]}),(0,$.jsxs)(`form`,{className:`chatPanelInput`,onSubmit:g,children:[(0,$.jsx)(`textarea`,{value:r,onChange:e=>i(e.target.value),onKeyDown:v,placeholder:`Ask me anything...`,rows:1,disabled:s}),(0,$.jsx)(`button`,{type:`submit`,disabled:s||!r.trim(),"aria-label":`Send message`,children:(0,$.jsxs)(`svg`,{width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,$.jsx)(`line`,{x1:`22`,y1:`2`,x2:`11`,y2:`13`}),(0,$.jsx)(`polygon`,{points:`22 2 15 22 11 13 2 9 22 2`})]})})]})]})}function Rg(){let e=localStorage.getItem(`ID_TOKEN`);if(!e)throw Error(`Missing ID_TOKEN in localStorage. Please sign in.`);return e}function zg(){let e=localStorage.getItem(`SESSION_ID`);if(!e){let t=globalThis.crypto;e=t&&typeof t.randomUUID==`function`?t.randomUUID():`sess_`+Math.random().toString(16).slice(2)+`_`+Date.now(),localStorage.setItem(`SESSION_ID`,e)}return e}function Bg(){return`https://titleapp-frontdoor.titleapp-core.workers.dev`.replace(/\/+$/,``)}async function Vg(e,t,n){let r=zg(),i=new URL(Bg()+`/api`);i.searchParams.set(`path`,t);let a=await fetch(i.toString(),{method:e,headers:{"Content-Type":`application/json`,Authorization:`Bearer `+Rg(),"X-Session-Id":r,"X-Vertical":n.vertical,"X-Jurisdiction":n.jurisdiction},body:n.body?JSON.stringify(n.body):void 0}),o=await a.text(),s=null;try{s=o?JSON.parse(o):null}catch{s={raw:o}}if(!a.ok)throw Error(s?.error||s?.reason||`HTTP `+a.status);return s}async function Hg(e){let t=`/v1/inventory:list`;return e.type&&(t+=`?type=${encodeURIComponent(e.type)}`),Vg(`GET`,t,{vertical:e.vertical,jurisdiction:e.jurisdiction})}async function Ug(e){return Vg(`POST`,`/v1/inventory:create`,{vertical:e.vertical,jurisdiction:e.jurisdiction,body:e.item})}async function Wg(e){return Vg(`PUT`,`/v1/inventory:update`,{vertical:e.vertical,jurisdiction:e.jurisdiction,body:{id:e.id,...e.item}})}async function Gg(e){return Vg(`DELETE`,`/v1/inventory:delete`,{vertical:e.vertical,jurisdiction:e.jurisdiction,body:{id:e.id}})}async function Kg(e){return Vg(`GET`,`/v1/customers:list`,{vertical:e.vertical,jurisdiction:e.jurisdiction})}async function qg(e){return Vg(`POST`,`/v1/customers:create`,{vertical:e.vertical,jurisdiction:e.jurisdiction,body:e.customer})}async function Jg(e){return Vg(`PUT`,`/v1/customers:update`,{vertical:e.vertical,jurisdiction:e.jurisdiction,body:{id:e.id,...e.customer}})}async function Yg(e){return Vg(`DELETE`,`/v1/customers:delete`,{vertical:e.vertical,jurisdiction:e.jurisdiction,body:{id:e.id}})}async function Xg(e){return Vg(`GET`,`/v1/appointments:list`,{vertical:e.vertical,jurisdiction:e.jurisdiction})}async function Zg(e){return Vg(`POST`,`/v1/appointments:create`,{vertical:e.vertical,jurisdiction:e.jurisdiction,body:e.appointment})}async function Qg(e){return Vg(`PUT`,`/v1/appointments:update`,{vertical:e.vertical,jurisdiction:e.jurisdiction,body:{id:e.id,...e.appointment}})}async function $g(e){return Vg(`DELETE`,`/v1/appointments:delete`,{vertical:e.vertical,jurisdiction:e.jurisdiction,body:{id:e.id}})}async function e_(e){let t=`/v1/ai:activity`;return e.limit&&(t+=`?limit=${e.limit}`),Vg(`GET`,t,{vertical:e.vertical,jurisdiction:e.jurisdiction})}async function t_(e){return Vg(`GET`,`/v1/integrations:list`,{vertical:e.vertical,jurisdiction:e.jurisdiction})}async function n_(e){return Vg(`POST`,`/v1/integrations:disconnect`,{vertical:e.vertical,jurisdiction:e.jurisdiction,body:{id:e.integrationId}})}async function r_(e){return Vg(`POST`,`/v1/integrations:sync`,{vertical:e.vertical,jurisdiction:e.jurisdiction,body:{id:e.integrationId}})}async function i_(e){return Vg(`POST`,`/v1/analyst:analyze`,{vertical:e.vertical,jurisdiction:e.jurisdiction,body:{deal:e.deal}})}async function a_(e){return Vg(`GET`,`/v1/analyst:deals${e.limit?`?limit=${e.limit}`:``}`,{vertical:e.vertical,jurisdiction:e.jurisdiction})}async function o_(e){return Vg(`GET`,`/v1/me:memberships`,{vertical:e.vertical,jurisdiction:e.jurisdiction})}function s_({children:e,currentSection:t,onNavigate:n}){let[r,i]=(0,_.useState)(!1),[a,o]=(0,_.useState)(null);(0,_.useEffect)(()=>{s()},[]);async function s(){try{let e=await o_({vertical:localStorage.getItem(`VERTICAL`)||`auto`,jurisdiction:localStorage.getItem(`JURISDICTION`)||`IL`});if(e.ok&&e.memberships&&e.memberships.length>0){let t=e.memberships[0].tenantId,n=e.tenants?.[t];o(n)}}catch(e){console.error(`Failed to load tenant info:`,e)}}let[c,l]=(0,_.useState)(!1);return(0,$.jsxs)(`div`,{className:`appShell`,children:[(0,$.jsxs)(`div`,{className:`topbar`,children:[(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>i(!r),"aria-label":`Toggle menu`,children:``}),(0,$.jsx)(`div`,{className:`topbarTitle`,children:`TitleApp`}),a&&(0,$.jsxs)(`div`,{style:{marginLeft:`auto`,display:`flex`,alignItems:`center`,gap:`12px`,padding:`8px 16px`,background:`rgba(124, 58, 237, 0.1)`,borderRadius:`12px`,border:`1px solid rgba(124, 58, 237, 0.2)`},children:[a.logoUrl?(0,$.jsx)(`img`,{src:a.logoUrl,alt:a.name||`Business logo`,style:{width:`32px`,height:`32px`,borderRadius:`50%`,objectFit:`cover`}}):(0,$.jsx)(`div`,{style:{width:`32px`,height:`32px`,borderRadius:`50%`,background:`linear-gradient(135deg, rgb(124, 58, 237) 0%, rgb(147, 51, 234) 100%)`,display:`flex`,alignItems:`center`,justifyContent:`center`,color:`white`,fontWeight:600,fontSize:`14px`},children:a.name?.charAt(0)?.toUpperCase()||`B`}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600,color:`var(--text)`,whiteSpace:`nowrap`},children:a.name||`Business`})]}),!a&&(0,$.jsx)(`div`,{className:`pill`,children:`Business`})]}),r&&(0,$.jsx)(`div`,{className:`backdrop`,onClick:()=>i(!1),"aria-hidden":`true`}),(0,$.jsx)(`div`,{className:r?`sidebar sidebarOpen`:`sidebar`,children:(0,$.jsx)(Ig,{currentSection:t,onNavigate:n,onClose:()=>i(!1)})}),(0,$.jsxs)(`div`,{className:`dualPanel`,children:[(0,$.jsx)(`main`,{className:`main`,children:e}),(0,$.jsx)(`aside`,{className:`chatSidebar`,children:(0,$.jsx)(Lg,{currentSection:t})})]}),(0,$.jsx)(`button`,{className:`chatToggleTab`,onClick:()=>l(!c),"aria-label":c?`Close chat`:`Open chat`,children:c?(0,$.jsxs)(`svg`,{width:`24`,height:`24`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:[(0,$.jsx)(`line`,{x1:`18`,y1:`6`,x2:`6`,y2:`18`}),(0,$.jsx)(`line`,{x1:`6`,y1:`6`,x2:`18`,y2:`18`})]}):(0,$.jsx)(`svg`,{width:`24`,height:`24`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:(0,$.jsx)(`path`,{d:`M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z`})})}),c&&(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{className:`mobileChatBackdrop`,onClick:()=>l(!1)}),(0,$.jsx)(`div`,{className:`mobileChatPanel`,children:(0,$.jsx)(Lg,{currentSection:t})})]})]})}function c_(){let[e,t]=(0,_.useState)({revenue:{value:`$0`,trend:`+0%`},activeDeals:{value:`0`,trend:`+0`},aiConversations:{value:`0`,trend:`+0`},customers:{value:`0`,trend:`+0`}}),[n,r]=(0,_.useState)([]),[i,a]=(0,_.useState)(!1),[o,s]=(0,_.useState)(``),[c,l]=(0,_.useState)({actions:0,hoursSaved:0,valueSaved:0}),u=localStorage.getItem(`VERTICAL`)||`auto`,d=localStorage.getItem(`JURISDICTION`)||`IL`;(0,_.useEffect)(()=>{f()},[]);async function f(){a(!0);try{let e=await o_({vertical:u,jurisdiction:d});if(e.ok&&e.memberships?.length>0){let t=e.memberships[0].tenantId,n=e.tenants?.[t];n?.name&&s(n.name)}let n=(await e_({vertical:u,jurisdiction:d,limit:100})).activity||[],i=new Date,a=n.filter(e=>{let t=new Date(e.createdAt);return t.getMonth()===i.getMonth()&&t.getFullYear()===i.getFullYear()}).length,o=a*.25;if(l({actions:a,hoursSaved:o,valueSaved:o*35}),u===`analyst`){let e=(await Hg({vertical:u,jurisdiction:d})).inventory||[],r=e.length>0?Math.round(e.reduce((e,t)=>e+(t.metadata?.riskScore||0),0)/e.length):0;t({revenue:{value:e.length.toString(),trend:``},activeDeals:{value:e.filter(e=>{let t=new Date(e.createdAt);return t.getMonth()===i.getMonth()&&t.getFullYear()===i.getFullYear()}).length.toString(),trend:``},aiConversations:{value:r.toString(),trend:``},customers:{value:n.length.toString(),trend:``}})}else if(u===`property-mgmt`){let e=(await Hg({vertical:u,jurisdiction:d})).inventory||[],n=e.reduce((e,t)=>e+(t.metadata?.unitCount||1),0);t({revenue:{value:e.length.toString(),trend:``},activeDeals:{value:n.toString(),trend:``},aiConversations:{value:`95%`,trend:``},customers:{value:`0`,trend:``}})}else{let e=(await Hg({vertical:u,jurisdiction:d})).inventory||[],r=e.filter(e=>e.status===`available`).reduce((e,t)=>e+(t.price||0),0),i=(await Kg({vertical:u,jurisdiction:d})).customers||[];t({revenue:{value:`$${r.toLocaleString()}`,trend:``},activeDeals:{value:e.filter(e=>e.status===`available`).length.toString(),trend:``},aiConversations:{value:n.length.toString(),trend:``},customers:{value:i.length.toString(),trend:``}})}let c=(await Hg({vertical:u,jurisdiction:d})).inventory||[],f=(await Xg({vertical:u,jurisdiction:d})).appointments||[];r([...c.slice(0,2).map(e=>({id:`inv-${e.id}`,type:`Record Added`,description:`${e.metadata?.make||e.metadata?.address||``} ${e.metadata?.model||``} - ${e.status}`,date:new Date(e.createdAt).toLocaleDateString(),status:e.status})),...n.slice(0,2).map(e=>({id:`ai-${e.id}`,type:`AI Chat`,description:`Workflow ${e.workflowId} - ${e.status}`,date:new Date(e.createdAt).toLocaleDateString(),status:e.status})),...f.slice(0,2).map(e=>({id:`appt-${e.id}`,type:`Appointment`,description:`${e.customerName} - ${e.type}`,date:new Date(e.datetime).toLocaleDateString(),status:e.status}))].slice(0,5))}catch(e){console.error(`Failed to load dashboard:`,e)}finally{a(!1)}}function p(){return u===`analyst`?[`Deals in Pipeline`,`Analyzed This Month`,`Avg Risk Score`,`AI Conversations`]:u===`property-mgmt`?[`Properties`,`Total Units`,`Occupancy Rate`,`Open Requests`]:[`Inventory Value`,`Available Units`,`AI Conversations`,`Total Customers`]}let m=p(),h=[{label:m[0],...e.revenue},{label:m[1],...e.activeDeals},{label:m[2],...e.aiConversations},{label:m[3],...e.customers}];return(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`pageHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Dashboard`}),(0,$.jsxs)(`p`,{className:`subtle`,children:[`Welcome to `,o||`your business`,` -- Your overview`]})]})}),(0,$.jsx)(`div`,{className:`kpiRow`,children:i?(0,$.jsx)(`div`,{className:`card`,style:{padding:`24px`,textAlign:`center`},children:`Loading dashboard...`}):h.map((e,t)=>(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:e.label}),(0,$.jsx)(`div`,{className:`kpiValue`,children:e.value}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,marginTop:`4px`,color:`#64748b`},children:e.trend})]},t))}),(0,$.jsxs)(`div`,{className:`card`,children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`Recent Activity`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Latest business actions and AI worker activity`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,children:`View All`})]}),(0,$.jsx)(`div`,{className:`tableWrap`,children:(0,$.jsxs)(`table`,{className:`table`,children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{children:`Type`}),(0,$.jsx)(`th`,{children:`Description`}),(0,$.jsx)(`th`,{children:`Date`}),(0,$.jsx)(`th`,{children:`Status`})]})}),(0,$.jsx)(`tbody`,{children:n.map(e=>(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`td`,{className:`tdStrong`,children:e.type}),(0,$.jsx)(`td`,{children:e.description}),(0,$.jsx)(`td`,{className:`tdMuted`,children:e.date}),(0,$.jsx)(`td`,{children:(0,$.jsx)(`span`,{className:`badge badge-${e.status}`,children:e.status})})]},e.id))})]})})]}),(0,$.jsxs)(`div`,{className:`card`,style:{marginTop:`14px`,borderLeft:`4px solid var(--accent2)`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`Value Tracker`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`AI-powered ROI this month`})]})}),(0,$.jsxs)(`div`,{style:{padding:`16px 20px`,display:`grid`,gridTemplateColumns:`repeat(4, 1fr)`,gap:`16px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`var(--muted)`,textTransform:`uppercase`,letterSpacing:`0.06em`},children:`Actions`}),(0,$.jsx)(`div`,{style:{fontSize:`24px`,fontWeight:900,marginTop:`4px`},children:c.actions})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`var(--muted)`,textTransform:`uppercase`,letterSpacing:`0.06em`},children:`Hours Saved`}),(0,$.jsx)(`div`,{style:{fontSize:`24px`,fontWeight:900,marginTop:`4px`},children:c.hoursSaved.toFixed(1)})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`var(--muted)`,textTransform:`uppercase`,letterSpacing:`0.06em`},children:`Value at $35/hr`}),(0,$.jsxs)(`div`,{style:{fontSize:`24px`,fontWeight:900,marginTop:`4px`,color:`var(--accent2)`},children:[`$`,c.valueSaved.toLocaleString()]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`var(--muted)`,textTransform:`uppercase`,letterSpacing:`0.06em`},children:`Your Cost`}),(0,$.jsxs)(`div`,{style:{fontSize:`24px`,fontWeight:900,marginTop:`4px`},children:[`$9`,(0,$.jsx)(`span`,{style:{fontSize:`14px`,fontWeight:400,color:`var(--muted)`},children:`/user/mo`})]})]})]})]})]})}function l_(){let[e,t]=(0,_.useState)([]),[n,r]=(0,_.useState)(!1),[i,a]=(0,_.useState)(!1),[o,s]=(0,_.useState)(``),[c,l]=(0,_.useState)(!1),[u,d]=(0,_.useState)(null),[f,p]=(0,_.useState)(`all`),[m,h]=(0,_.useState)({companyName:``,industry:``,askAmount:``,dealType:`series_a`,summary:``}),[g,v]=(0,_.useState)(null),y=localStorage.getItem(`VERTICAL`)||`analyst`,b=localStorage.getItem(`JURISDICTION`)||`GLOBAL`;(0,_.useEffect)(()=>{x()},[]);async function x(){r(!0),s(``);try{t((await a_({vertical:y,jurisdiction:b})).deals||[])}catch(e){s(e?.message||String(e)),console.error(`Failed to load deals:`,e)}finally{r(!1)}}async function S(e){e.preventDefault(),a(!0),s(``);try{let e=await i_({vertical:y,jurisdiction:b,deal:m});await x(),d(e.analysis),l(!1),h({companyName:``,industry:``,askAmount:``,dealType:`series_a`,summary:``})}catch(e){s(e?.message||String(e)),console.error(`Failed to analyze deal:`,e)}finally{a(!1)}}let C=f===`all`?e:e.filter(e=>{let t=e.analysis?.riskScore||0;return f===`high`?t>=70:f===`medium`?t>=40&&t<70:f===`low`?t<40:!0}),w={total:e.length,invest:e.filter(e=>e.analysis?.recommendation===`INVEST`).length,pass:e.filter(e=>e.analysis?.recommendation===`PASS`).length,wait:e.filter(e=>e.analysis?.recommendation===`WAIT`).length};function ee(e){return e>=70?`#ef4444`:e>=40?`#f59e0b`:`#10b981`}function te(e){return e>=70?`High Risk`:e>=40?`Medium Risk`:`Low Risk`}return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Analyst`}),(0,$.jsx)(`p`,{className:`subtle`,children:`AI-powered deal vetting with RAAS validation`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>l(!0),style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`},children:`+ Analyze Deal`})]}),o&&(0,$.jsx)(`div`,{style:{padding:`12px 16px`,background:`#fef2f2`,border:`1px solid #fca5a5`,borderRadius:`12px`,color:`#dc2626`,marginBottom:`16px`},children:o}),(0,$.jsxs)(`div`,{className:`kpiRow`,children:[(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Total Analyzed`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:w.total})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Invest`}),(0,$.jsx)(`div`,{className:`kpiValue`,style:{color:`#10b981`},children:w.invest})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Pass`}),(0,$.jsx)(`div`,{className:`kpiValue`,style:{color:`#ef4444`},children:w.pass})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Wait`}),(0,$.jsx)(`div`,{className:`kpiValue`,style:{color:`#f59e0b`},children:w.wait})]})]}),(0,$.jsxs)(`div`,{style:{marginBottom:`16px`,display:`flex`,gap:`8px`},children:[(0,$.jsxs)(`button`,{className:`iconBtn`,onClick:()=>p(`all`),style:{background:f===`all`?`var(--accent)`:`transparent`,color:f===`all`?`white`:`inherit`},children:[`All Deals (`,e.length,`)`]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>p(`high`),style:{background:f===`high`?`#ef4444`:`transparent`,color:f===`high`?`white`:`inherit`},children:`High Risk`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>p(`medium`),style:{background:f===`medium`?`#f59e0b`:`transparent`,color:f===`medium`?`white`:`inherit`},children:`Medium Risk`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>p(`low`),style:{background:f===`low`?`#10b981`:`transparent`,color:f===`low`?`white`:`inherit`},children:`Low Risk`})]}),n?(0,$.jsx)(`div`,{className:`card`,style:{padding:`24px`,textAlign:`center`},children:`Loading analyzed deals...`}):C.length===0?(0,$.jsxs)(`div`,{className:`card`,style:{padding:`32px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`24px`,fontWeight:600,color:`#64748b`,marginBottom:`16px`},children:`Analyst`}),(0,$.jsx)(`p`,{style:{fontSize:`16px`,fontWeight:600,marginBottom:`8px`},children:`No deals analyzed yet`}),(0,$.jsx)(`p`,{style:{color:`var(--textMuted)`,marginBottom:`16px`},children:`Upload your first deal to see AI-powered analysis with RAAS validation`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>l(!0),style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`},children:`Analyze Your First Deal`})]}):(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{className:`tableWrap`,children:(0,$.jsxs)(`table`,{className:`table`,children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{children:`Company`}),(0,$.jsx)(`th`,{children:`Industry`}),(0,$.jsx)(`th`,{children:`Ask`}),(0,$.jsx)(`th`,{children:`Risk Score`}),(0,$.jsx)(`th`,{children:`Recommendation`}),(0,$.jsx)(`th`,{children:`Analyzed`}),(0,$.jsx)(`th`,{})]})}),(0,$.jsx)(`tbody`,{children:C.map(e=>(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`td`,{className:`tdStrong`,children:e.dealInput?.companyName||`Unknown`}),(0,$.jsx)(`td`,{children:e.dealInput?.industry||`-`}),(0,$.jsx)(`td`,{className:`tdMuted`,children:e.dealInput?.askAmount||`-`}),(0,$.jsx)(`td`,{children:(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{width:`8px`,height:`8px`,borderRadius:`50%`,background:ee(e.analysis?.riskScore||0)}}),(0,$.jsxs)(`span`,{style:{fontWeight:600},children:[e.analysis?.riskScore||0,`/100`]}),(0,$.jsxs)(`span`,{className:`tdMuted`,children:[`(`,te(e.analysis?.riskScore||0),`)`]})]})}),(0,$.jsx)(`td`,{children:(0,$.jsxs)(`span`,{className:`badge badge-${e.analysis?.recommendation===`INVEST`?`completed`:e.analysis?.recommendation===`PASS`?``:`processing`}`,children:[e.analysis?.emoji||``,` `,e.analysis?.recommendation||`WAIT`]})}),(0,$.jsx)(`td`,{className:`tdMuted`,children:e.analyzedAt?.seconds?new Date(e.analyzedAt.seconds*1e3).toLocaleDateString():new Date(e.analyzedAt).toLocaleDateString()}),(0,$.jsx)(`td`,{children:(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>d(e),style:{fontSize:`12px`},children:`View Analysis`})})]},e.id))})]})})}),c&&(0,$.jsx)(`div`,{style:{position:`fixed`,inset:0,background:`rgba(0,0,0,0.5)`,display:`grid`,placeItems:`center`,zIndex:1e3},onClick:()=>l(!1),children:(0,$.jsxs)(`div`,{className:`card`,style:{maxWidth:`600px`,width:`90%`,maxHeight:`90vh`,overflow:`auto`},onClick:e=>e.stopPropagation(),children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`Analyze New Deal`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>l(!1),children:``})]}),(0,$.jsxs)(`form`,{onSubmit:S,style:{padding:`16px`,display:`flex`,flexDirection:`column`,gap:`14px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Company Name`}),(0,$.jsx)(`input`,{type:`text`,required:!0,value:m.companyName,onChange:e=>h({...m,companyName:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},placeholder:`Acme Corp`})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Industry`}),(0,$.jsx)(`input`,{type:`text`,required:!0,value:m.industry,onChange:e=>h({...m,industry:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},placeholder:`SaaS, FinTech, Healthcare, etc.`})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Ask Amount`}),(0,$.jsx)(`input`,{type:`text`,required:!0,value:m.askAmount,onChange:e=>h({...m,askAmount:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},placeholder:`$5M`})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Deal Type`}),(0,$.jsxs)(`select`,{value:m.dealType,onChange:e=>h({...m,dealType:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},children:[(0,$.jsx)(`option`,{value:`seed`,children:`Seed`}),(0,$.jsx)(`option`,{value:`series_a`,children:`Series A`}),(0,$.jsx)(`option`,{value:`series_b`,children:`Series B`}),(0,$.jsx)(`option`,{value:`series_c`,children:`Series C+`}),(0,$.jsx)(`option`,{value:`pe_buyout`,children:`PE Buyout`}),(0,$.jsx)(`option`,{value:`refinance`,children:`Refinance`})]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Deal Summary / Pitch`}),(0,$.jsx)(`textarea`,{required:!g,value:m.summary,onChange:e=>h({...m,summary:e.target.value}),rows:8,style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`,fontFamily:`inherit`},placeholder:`Paste pitch deck summary, exec summary, or key details about the deal...`})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Or Upload PDF`}),(0,$.jsx)(`input`,{type:`file`,accept:`.pdf`,onChange:e=>{let t=e.target.files?.[0];t&&(v(t),h({...m,summary:`[PDF uploaded: ${t.name}] - PDF text extraction coming soon`}))},style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`}}),g&&(0,$.jsxs)(`div`,{style:{marginTop:`8px`,fontSize:`13px`,color:`var(--textMuted)`},children:[`Uploaded: `,g.name,` (`,(g.size/1024).toFixed(1),` KB)`]})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`,justifyContent:`flex-end`},children:[(0,$.jsx)(`button`,{type:`button`,className:`iconBtn`,onClick:()=>l(!1),children:`Cancel`}),(0,$.jsx)(`button`,{type:`submit`,className:`iconBtn`,disabled:i,style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`},children:i?`Analyzing...`:`Analyze with AI`})]})]})]})}),u&&(()=>{let e=u.analysis||u,t=u.dealInput||u;return(0,$.jsx)(`div`,{style:{position:`fixed`,inset:0,background:`rgba(0,0,0,0.5)`,display:`grid`,placeItems:`center`,zIndex:1e3,padding:`20px`},onClick:()=>d(null),children:(0,$.jsxs)(`div`,{className:`card`,style:{maxWidth:`800px`,width:`100%`,maxHeight:`90vh`,overflow:`auto`},onClick:e=>e.stopPropagation(),children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`cardTitle`,children:[t.companyName||`Deal`,` - Analysis`]}),(0,$.jsxs)(`div`,{className:`cardSub`,children:[t.industry||`-`,`  `,t.askAmount||`-`]})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>d(null),children:``})]}),(0,$.jsxs)(`div`,{style:{padding:`20px`,display:`flex`,flexDirection:`column`,gap:`20px`},children:[(0,$.jsx)(`div`,{style:{padding:`16px`,background:`${ee(e.riskScore||0)}15`,border:`2px solid ${ee(e.riskScore||0)}`,borderRadius:`12px`},children:(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,fontWeight:600,color:`var(--textMuted)`,marginBottom:`4px`},children:`RISK SCORE`}),(0,$.jsxs)(`div`,{style:{fontSize:`32px`,fontWeight:700,color:ee(e.riskScore||0)},children:[e.riskScore||0,`/100`]}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`var(--textMuted)`},children:te(e.riskScore||0)})]}),(0,$.jsxs)(`div`,{style:{textAlign:`right`},children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,fontWeight:600,color:`var(--textMuted)`,marginBottom:`4px`},children:`RECOMMENDATION`}),(0,$.jsxs)(`div`,{className:`badge badge-${e.recommendation===`INVEST`?`completed`:e.recommendation===`PASS`?``:`processing`}`,style:{fontSize:`18px`,padding:`8px 16px`},children:[e.emoji||``,` `,e.recommendation||`WAIT`]})]})]})}),e.summary&&(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`8px`},children:`AI Summary`}),(0,$.jsx)(`div`,{style:{color:`var(--textMuted)`,lineHeight:`1.6`},children:e.summary})]}),e.evidence&&(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`12px`},children:`Evidence Analysis`}),(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`8px`},children:[e.evidence.positive?.length>0&&e.evidence.positive.map((e,t)=>(0,$.jsxs)(`div`,{style:{padding:`12px`,background:`#f0fdf4`,border:`1px solid #86efac`,borderRadius:`8px`,display:`flex`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600,color:`#10b981`},children:`+`}),(0,$.jsx)(`div`,{style:{flex:1,fontSize:`14px`},children:e})]},`pos-${t}`)),e.evidence.negative?.length>0&&e.evidence.negative.map((e,t)=>(0,$.jsxs)(`div`,{style:{padding:`12px`,background:`#fef2f2`,border:`1px solid #fca5a5`,borderRadius:`8px`,display:`flex`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600,color:`#dc2626`},children:`-`}),(0,$.jsx)(`div`,{style:{flex:1,fontSize:`14px`},children:e})]},`neg-${t}`)),e.evidence.neutral?.length>0&&e.evidence.neutral.map((e,t)=>(0,$.jsxs)(`div`,{style:{padding:`12px`,background:`#f8fafc`,border:`1px solid #e5e7eb`,borderRadius:`8px`,display:`flex`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`16px`},children:``}),(0,$.jsx)(`div`,{style:{flex:1,fontSize:`14px`},children:e})]},`neu-${t}`))]})]}),e.multiAngleAnalysis&&(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`12px`},children:`Multi-Angle Analysis`}),(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`12px`},children:Object.entries(e.multiAngleAnalysis).map(([e,t])=>(0,$.jsxs)(`div`,{style:{padding:`12px`,background:`#f8fafc`,borderRadius:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`12px`,fontWeight:600,color:`var(--accent)`,marginBottom:`4px`,textTransform:`uppercase`},children:e.replace(/([A-Z])/g,` $1`).trim()}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,lineHeight:`1.5`},children:t})]},e))})]}),e.riskScaledAlternatives&&(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`12px`},children:`Risk-Scaled Deal Structures`}),(0,$.jsx)(`div`,{style:{display:`grid`,gap:`12px`},children:[`lowRisk`,`mediumRisk`,`highRisk`].map(t=>{let n=e.riskScaledAlternatives[t];if(!n)return null;let r={lowRisk:{bg:`#f0fdf4`,border:`#86efac`,label:`Low Risk`},mediumRisk:{bg:`#fffbeb`,border:`#fcd34d`,label:`Medium Risk`},highRisk:{bg:`#fef2f2`,border:`#fca5a5`,label:`High Risk`}}[t];return(0,$.jsxs)(`div`,{style:{padding:`12px`,background:r.bg,border:`2px solid ${r.border}`,borderRadius:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`12px`,fontWeight:600,marginBottom:`8px`,textTransform:`uppercase`},children:r.label}),(0,$.jsxs)(`div`,{style:{fontSize:`13px`,marginBottom:`4px`},children:[(0,$.jsx)(`strong`,{children:`Structure:`}),` `,n.structure]}),(0,$.jsxs)(`div`,{style:{fontSize:`13px`,marginBottom:`4px`},children:[(0,$.jsx)(`strong`,{children:`Terms:`}),` `,n.terms]}),(0,$.jsxs)(`div`,{style:{fontSize:`13px`},children:[(0,$.jsx)(`strong`,{children:`Expected Return:`}),` `,n.expectedReturn]})]},t)})})]}),e.keyMetrics&&Object.keys(e.keyMetrics).length>0&&(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`12px`},children:`Key Metrics`}),(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(auto-fit, minmax(150px, 1fr))`,gap:`12px`},children:Object.entries(e.keyMetrics).map(([e,t])=>(0,$.jsxs)(`div`,{style:{padding:`12px`,background:`#f8fafc`,borderRadius:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`11px`,fontWeight:600,color:`var(--textMuted)`,marginBottom:`4px`,textTransform:`uppercase`},children:e.replace(/_/g,` `)}),(0,$.jsx)(`div`,{style:{fontSize:`16px`,fontWeight:600},children:t})]},e))})]}),e.nextSteps&&e.nextSteps.length>0&&(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`12px`},children:`Recommended Next Steps`}),(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`8px`},children:e.nextSteps.map((e,t)=>(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`,alignItems:`start`},children:[(0,$.jsxs)(`div`,{style:{color:`var(--accent)`,fontWeight:600},children:[t+1,`.`]}),(0,$.jsx)(`div`,{style:{flex:1},children:e})]},t))})]}),e.missingInfo&&e.missingInfo.length>0&&(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`12px`,color:`#dc2626`},children:`Missing Critical Information`}),(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`8px`},children:e.missingInfo.map((e,t)=>(0,$.jsxs)(`div`,{style:{padding:`12px`,background:`#fef2f2`,border:`1px solid #fca5a5`,borderRadius:`8px`,display:`flex`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600,color:`#f59e0b`},children:`!`}),(0,$.jsx)(`div`,{style:{flex:1,fontSize:`14px`},children:e})]},t))})]})]})]})})})()]})}function u_({isOpen:e,onClose:t,title:n,children:r,onSubmit:i,submitLabel:a=`Submit`}){if(!e)return null;let o=e=>{e.preventDefault(),i?.(e)};return(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{className:`backdrop`,onClick:t,style:{zIndex:100}}),(0,$.jsx)(`div`,{style:{position:`fixed`,top:`50%`,left:`50%`,transform:`translate(-50%, -50%)`,zIndex:101,width:`90%`,maxWidth:`600px`,maxHeight:`90vh`,overflow:`auto`},children:(0,$.jsxs)(`div`,{className:`card`,children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:n}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:t,"aria-label":`Close modal`,children:``})]}),(0,$.jsxs)(`form`,{onSubmit:o,children:[(0,$.jsx)(`div`,{style:{padding:`16px`},children:r}),(0,$.jsxs)(`div`,{style:{padding:`12px 16px`,borderTop:`1px solid var(--line)`,display:`flex`,gap:`8px`,justifyContent:`flex-end`},children:[(0,$.jsx)(`button`,{type:`button`,className:`iconBtn`,onClick:t,children:`Cancel`}),(0,$.jsx)(`button`,{type:`submit`,className:`iconBtn`,style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`},children:a})]})]})]})})]})}function d_(){let[e,t]=(0,_.useState)([]),[n,r]=(0,_.useState)(!1),[i,a]=(0,_.useState)(null),[o,s]=(0,_.useState)(!1),[c,l]=(0,_.useState)({name:``,description:``,rules:``,enabled:!0}),u=[{id:`wf-001`,name:`Vehicle Purchase Flow`,vertical:`auto`,jurisdiction:`IL`,description:`Complete workflow for vehicle purchase and title transfer`,rules:[`VIN verification required`,`Odometer disclosure mandatory`,`Lien release check before transfer`,`Sales tax calculation (IL: 7.25% base + local)`],enabled:!0,executionCount:47,lastUsed:`2026-02-14T10:30:00Z`},{id:`wf-002`,name:`Service Work Order`,vertical:`auto`,jurisdiction:`IL`,description:`Service appointment and work order processing`,rules:[`Customer authorization required for work >$100`,`Parts inventory check before quoting`,`Labor rate: $125/hour standard, $150/hour diagnostic`,`Warranty verification for covered repairs`],enabled:!0,executionCount:234,lastUsed:`2026-02-14T15:00:00Z`},{id:`wf-003`,name:`Trade-In Valuation`,vertical:`auto`,jurisdiction:`IL`,description:`Vehicle trade-in appraisal workflow`,rules:[`KBB/NADA price check required`,`Visual inspection checklist (25 points)`,`CarFax/AutoCheck history review`,`Outstanding loan payoff verification`],enabled:!0,executionCount:18,lastUsed:`2026-02-13T11:00:00Z`},{id:`wf-004`,name:`Financing Application`,vertical:`auto`,jurisdiction:`IL`,description:`Customer financing and credit check`,rules:[`Credit score check (minimum 600)`,`Debt-to-income ratio <43%`,`Down payment: 10% minimum for used, 5% for new`,`APR range: 3.9%-18% based on credit tier`],enabled:!1,executionCount:12,lastUsed:`2026-02-10T09:00:00Z`}];(0,_.useEffect)(()=>{d()},[]);async function d(){r(!0),setTimeout(()=>{t(u),r(!1)},500)}function f(e){a(e),l({name:e.name,description:e.description,rules:e.rules.join(`
`),enabled:e.enabled}),s(!0)}function p(n){n.preventDefault(),t(e.map(e=>e.id===i.id?{...e,name:c.name,description:c.description,rules:c.rules.split(`
`).filter(e=>e.trim()),enabled:c.enabled}:e)),s(!1)}function m(n){t(e.map(e=>e.id===n?{...e,enabled:!e.enabled}:e))}let h={total:e.length,enabled:e.filter(e=>e.enabled).length,disabled:e.filter(e=>!e.enabled).length,executions:e.reduce((e,t)=>e+t.executionCount,0)};return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Rules & Resources`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Configure RAAS workflows for your vertical and jurisdiction`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>alert(`Create new workflow...`),children:`+ Add Workflow`})]}),(0,$.jsxs)(`div`,{className:`kpiRow`,children:[(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Total Workflows`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:h.total})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Enabled`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:h.enabled})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Disabled`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:h.disabled})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Total Executions`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:h.executions})]})]}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsx)(`div`,{className:`cardTitle`,children:`Current Configuration`})}),(0,$.jsxs)(`div`,{className:`detail`,children:[(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Vertical`}),(0,$.jsx)(`div`,{className:`v`,children:`Auto Dealer`})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Jurisdiction`}),(0,$.jsx)(`div`,{className:`v`,children:`Illinois (IL)`})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`RAAS Version`}),(0,$.jsx)(`div`,{className:`v`,children:`2.1.0`})]})]})]}),n&&(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{className:`empty`,children:`Loading workflows...`})}),!n&&e.length>0&&(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:e.map(e=>(0,$.jsxs)(`div`,{className:`card`,children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:e.name}),(0,$.jsx)(`div`,{className:`cardSub`,children:e.description})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`,alignItems:`center`},children:[(0,$.jsx)(`span`,{className:`badge ${e.enabled?`badge-completed`:``}`,style:{fontSize:`11px`},children:e.enabled?`Enabled`:`Disabled`}),(0,$.jsxs)(`span`,{className:`badge`,style:{fontSize:`11px`},children:[e.executionCount,` runs`]})]})]}),(0,$.jsxs)(`div`,{style:{padding:`16px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`8px`},children:`Rules`}),(0,$.jsx)(`ul`,{style:{margin:0,paddingLeft:`20px`},children:e.rules.map((e,t)=>(0,$.jsx)(`li`,{style:{marginBottom:`4px`,fontSize:`14px`},children:e},t))})]}),(0,$.jsxs)(`div`,{className:`detail`,style:{borderTop:`1px solid var(--line)`},children:[(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Vertical`}),(0,$.jsx)(`div`,{className:`v`,children:e.vertical.toUpperCase()})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Jurisdiction`}),(0,$.jsx)(`div`,{className:`v`,children:e.jurisdiction})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Last Used`}),(0,$.jsx)(`div`,{className:`v`,children:new Date(e.lastUsed).toLocaleString()})]})]}),(0,$.jsx)(`div`,{style:{padding:`16px`,borderTop:`1px solid var(--line)`},children:(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`},children:[(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>f(e),style:{flex:1},children:`Edit Rules`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>m(e.id),style:{flex:1},children:e.enabled?`Disable`:`Enable`}),(0,$.jsx)(`button`,{className:`iconBtn`,style:{flex:1},children:`Test Workflow`})]})})]},e.id))}),i&&!o&&(0,$.jsxs)(`div`,{className:`card`,style:{marginTop:`16px`},children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:i.name}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Workflow Details`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>a(null),children:`Close`})]}),(0,$.jsxs)(`div`,{style:{padding:`16px`},children:[(0,$.jsxs)(`div`,{style:{marginBottom:`16px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`8px`},children:`Execution History`}),(0,$.jsxs)(`div`,{style:{fontSize:`14px`,color:`var(--textMuted)`},children:[`This workflow has been executed `,i.executionCount,` times.`]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`8px`},children:`Recent Runs`}),(0,$.jsx)(`div`,{style:{padding:`12px`,background:`#f8fafc`,borderRadius:`8px`,fontSize:`13px`,color:`var(--textMuted)`},children:`Execution logs would appear here`})]})]})]}),(0,$.jsx)(u_,{isOpen:o,onClose:()=>s(!1),title:`Edit Workflow Rules`,onSubmit:p,submitLabel:`Save Changes`,children:(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Workflow Name *`}),(0,$.jsx)(`input`,{type:`text`,value:c.name,onChange:e=>l({...c,name:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Description`}),(0,$.jsx)(`input`,{type:`text`,value:c.description,onChange:e=>l({...c,description:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`}})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Rules (one per line) *`}),(0,$.jsx)(`textarea`,{value:c.rules,onChange:e=>l({...c,rules:e.target.value}),rows:10,style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`,fontFamily:`monospace`,fontSize:`13px`},required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`label`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,$.jsx)(`input`,{type:`checkbox`,checked:c.enabled,onChange:e=>l({...c,enabled:e.target.checked})}),(0,$.jsx)(`span`,{style:{fontWeight:600},children:`Enabled`})]}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`,marginTop:`4px`},children:`Only enabled workflows will execute`})]})]})})]})}function f_(){let[e,t]=(0,_.useState)([]),[n,r]=(0,_.useState)(!1),[i,a]=(0,_.useState)(``),[o,s]=(0,_.useState)(`all`),[c,l]=(0,_.useState)(`all`),[u,d]=(0,_.useState)(!1),[f,p]=(0,_.useState)(null),[m,h]=(0,_.useState)({type:`vehicle`,status:`available`,metadata:{},price:``,cost:``}),g=`auto`;(0,_.useEffect)(()=>{v()},[]);async function v(){r(!0),a(``);try{t((await Hg({vertical:g,jurisdiction:`il`,type:o===`all`?void 0:o})).items||[])}catch(e){a(e?.message||String(e)),t([])}finally{r(!1)}}async function y(e){e.preventDefault(),a(``);try{f?await Wg({vertical:g,jurisdiction:`il`,id:f.id,item:{type:m.type,status:m.status,metadata:m.metadata,price:parseFloat(m.price)||0,cost:parseFloat(m.cost)||0}}):await Ug({vertical:g,jurisdiction:`il`,item:{type:m.type,status:m.status,metadata:m.metadata,price:parseFloat(m.price)||0,cost:parseFloat(m.cost)||0}}),await v(),d(!1),p(null),h({type:`vehicle`,status:`available`,metadata:{},price:``,cost:``})}catch(e){a(e?.message||String(e))}}function b(e){p(e),h({type:e.type,status:e.status,metadata:{...e.metadata},price:e.price.toString(),cost:e.cost.toString()}),d(!0)}async function x(e){if(confirm(`Are you sure you want to delete this item?`)){a(``);try{await Gg({vertical:g,jurisdiction:`il`,id:e}),await v()}catch(e){a(e?.message||String(e))}}}function S(e,t){h({...m,metadata:{...m.metadata,[e]:t}})}let C=e.filter(e=>!(o!==`all`&&e.type!==o||c!==`all`&&e.status!==c)),w={total:e.length,available:e.filter(e=>e.status===`available`).length,sold:e.filter(e=>e.status===`sold`).length,pending:e.filter(e=>e.status===`pending`).length,totalValue:e.filter(e=>e.status===`available`).reduce((e,t)=>e+t.price,0)};return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Services & Inventory`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Manage products, services, and pricing`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>{p(null),h({type:`vehicle`,status:`available`,metadata:{},price:``,cost:``}),d(!0)},style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`},children:`+ Add Item`})]}),(0,$.jsxs)(`div`,{className:`kpiRow`,children:[(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Total Items`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:w.total})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Available`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:w.available})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Sold`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:w.sold})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Inventory Value`}),(0,$.jsxs)(`div`,{className:`kpiValue`,children:[`$`,w.totalValue.toLocaleString()]})]})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`12px`,marginBottom:`16px`,flexWrap:`wrap`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontSize:`13px`,fontWeight:600},children:`Type`}),(0,$.jsxs)(`select`,{value:o,onChange:e=>s(e.target.value),style:{padding:`8px 12px`,borderRadius:`12px`,border:`1px solid var(--line)`},children:[(0,$.jsx)(`option`,{value:`all`,children:`All Types`}),(0,$.jsx)(`option`,{value:`vehicle`,children:`Vehicles`}),(0,$.jsx)(`option`,{value:`service`,children:`Services`})]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontSize:`13px`,fontWeight:600},children:`Status`}),(0,$.jsxs)(`select`,{value:c,onChange:e=>l(e.target.value),style:{padding:`8px 12px`,borderRadius:`12px`,border:`1px solid var(--line)`},children:[(0,$.jsx)(`option`,{value:`all`,children:`All Statuses`}),(0,$.jsx)(`option`,{value:`available`,children:`Available`}),(0,$.jsx)(`option`,{value:`pending`,children:`Pending`}),(0,$.jsx)(`option`,{value:`sold`,children:`Sold`})]})]})]}),i&&(0,$.jsx)(`div`,{className:`card`,style:{borderColor:`var(--danger)`},children:(0,$.jsx)(`div`,{className:`empty`,style:{color:`var(--danger)`},children:i})}),n&&(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{className:`empty`,children:`Loading inventory...`})}),!n&&C.length===0&&(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{className:`empty`,children:(0,$.jsx)(`p`,{children:`No inventory items found.`})})}),!n&&C.length>0&&(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{className:`tableWrap`,children:(0,$.jsxs)(`table`,{className:`table`,children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{children:`Type`}),(0,$.jsx)(`th`,{children:`Item`}),(0,$.jsx)(`th`,{children:`Price`}),(0,$.jsx)(`th`,{children:`Cost`}),(0,$.jsx)(`th`,{children:`Margin`}),(0,$.jsx)(`th`,{children:`Status`}),(0,$.jsx)(`th`,{children:`Actions`})]})}),(0,$.jsx)(`tbody`,{children:C.map(e=>{let t=e.price-e.cost,n=(t/e.price*100).toFixed(1);return(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`td`,{children:e.type}),(0,$.jsxs)(`td`,{className:`tdStrong`,children:[e.type===`vehicle`?`${e.metadata.year} ${e.metadata.make} ${e.metadata.model}`:e.metadata.name,e.type===`vehicle`&&(0,$.jsxs)(`div`,{className:`tdMuted`,style:{fontSize:`12px`},children:[`VIN: `,e.metadata.vin]})]}),(0,$.jsxs)(`td`,{children:[`$`,e.price.toLocaleString()]}),(0,$.jsxs)(`td`,{className:`tdMuted`,children:[`$`,e.cost.toLocaleString()]}),(0,$.jsx)(`td`,{children:(0,$.jsxs)(`span`,{style:{color:t>0?`var(--accent2)`:`var(--danger)`},children:[`$`,t.toLocaleString(),` (`,n,`%)`]})}),(0,$.jsx)(`td`,{children:(0,$.jsx)(`span`,{className:`badge badge-${e.status===`available`?`completed`:e.status===`sold`?`created`:`processing`}`,children:e.status})}),(0,$.jsx)(`td`,{children:(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`6px`},children:[(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>b(e),style:{padding:`6px 10px`,fontSize:`12px`},children:`Edit`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>x(e.id),style:{padding:`6px 10px`,fontSize:`12px`,borderColor:`var(--danger)`,color:`var(--danger)`},children:`Delete`})]})})]},e.id)})})]})})}),(0,$.jsx)(u_,{isOpen:u,onClose:()=>{d(!1),p(null),h({type:`vehicle`,status:`available`,metadata:{},price:``,cost:``})},title:f?`Edit Item`:`Add New Item`,onSubmit:y,submitLabel:f?`Update`:`Add Item`,children:(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Item Type *`}),(0,$.jsxs)(`select`,{value:m.type,onChange:e=>h({...m,type:e.target.value,metadata:{}}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0,children:[(0,$.jsx)(`option`,{value:`vehicle`,children:`Vehicle`}),(0,$.jsx)(`option`,{value:`service`,children:`Service`})]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Status *`}),(0,$.jsxs)(`select`,{value:m.status,onChange:e=>h({...m,status:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0,children:[(0,$.jsx)(`option`,{value:`available`,children:`Available`}),(0,$.jsx)(`option`,{value:`pending`,children:`Pending`}),(0,$.jsx)(`option`,{value:`sold`,children:`Sold`})]})]}),m.type===`vehicle`&&(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`VIN *`}),(0,$.jsx)(`input`,{type:`text`,placeholder:`17-character VIN`,value:m.metadata.vin||``,onChange:e=>S(`vin`,e.target.value),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr 1fr`,gap:`10px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Year *`}),(0,$.jsx)(`input`,{type:`number`,placeholder:`2024`,value:m.metadata.year||``,onChange:e=>S(`year`,e.target.value),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Make *`}),(0,$.jsx)(`input`,{type:`text`,placeholder:`Honda`,value:m.metadata.make||``,onChange:e=>S(`make`,e.target.value),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Model *`}),(0,$.jsx)(`input`,{type:`text`,placeholder:`Civic`,value:m.metadata.model||``,onChange:e=>S(`model`,e.target.value),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`10px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Mileage`}),(0,$.jsx)(`input`,{type:`text`,placeholder:`25,000`,value:m.metadata.mileage||``,onChange:e=>S(`mileage`,e.target.value),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`}})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Color`}),(0,$.jsx)(`input`,{type:`text`,placeholder:`Silver`,value:m.metadata.color||``,onChange:e=>S(`color`,e.target.value),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`}})]})]})]}),m.type===`service`&&(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Service Name *`}),(0,$.jsx)(`input`,{type:`text`,placeholder:`e.g., Premium Oil Change`,value:m.metadata.name||``,onChange:e=>S(`name`,e.target.value),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Description`}),(0,$.jsx)(`textarea`,{placeholder:`Service description...`,value:m.metadata.description||``,onChange:e=>S(`description`,e.target.value),rows:3,style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`,fontFamily:`inherit`,resize:`vertical`}})]})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`10px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Price * $`}),(0,$.jsx)(`input`,{type:`number`,step:`0.01`,placeholder:`28500.00`,value:m.price,onChange:e=>h({...m,price:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Cost * $`}),(0,$.jsx)(`input`,{type:`number`,step:`0.01`,placeholder:`25000.00`,value:m.cost,onChange:e=>h({...m,cost:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]})]}),m.price&&m.cost&&(0,$.jsxs)(`div`,{style:{padding:`12px`,borderRadius:`12px`,background:`#f8fafc`,border:`1px solid var(--line)`},children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,fontWeight:600,marginBottom:`4px`},children:`Profit Margin`}),(0,$.jsxs)(`div`,{style:{fontSize:`18px`,fontWeight:900},children:[`$`,(parseFloat(m.price)-parseFloat(m.cost)).toFixed(2),` (`,((parseFloat(m.price)-parseFloat(m.cost))/parseFloat(m.price)*100).toFixed(1),`%)`]})]})]})})]})}function p_(){return(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`pageHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`AI, GPTs & Chats`}),(0,$.jsx)(`p`,{className:`subtle`,children:`AI worker activity log and conversation history`})]})}),(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{className:`empty`,children:(0,$.jsx)(`p`,{children:`No AI conversations yet. AI activity will appear here.`})})})]})}function m_(){let[e,t]=(0,_.useState)([]),[n,r]=(0,_.useState)(!1),[i,a]=(0,_.useState)(``),[o,s]=(0,_.useState)(``),[c,l]=(0,_.useState)(!1),[u,d]=(0,_.useState)(null),[f,p]=(0,_.useState)(null),[m,h]=(0,_.useState)({firstName:``,lastName:``,email:``,phone:``,tags:[]}),g=`auto`;(0,_.useEffect)(()=>{v()},[]);async function v(){r(!0),a(``);try{t((await Kg({vertical:g,jurisdiction:`il`})).customers||[])}catch(e){a(e?.message||String(e)),t([])}finally{r(!1)}}async function y(e){e.preventDefault(),a(``);try{u?await Jg({vertical:g,jurisdiction:`il`,id:u.id,customer:m}):await qg({vertical:g,jurisdiction:`il`,customer:m}),await v(),l(!1),d(null),h({firstName:``,lastName:``,email:``,phone:``,tags:[]})}catch(e){a(e?.message||String(e))}}function b(e){d(e),h({firstName:e.firstName,lastName:e.lastName,email:e.email,phone:e.phone,tags:e.tags||[]}),l(!0)}async function x(e){if(confirm(`Are you sure you want to delete this customer?`)){a(``);try{await Yg({vertical:g,jurisdiction:`il`,id:e}),f?.id===e&&p(null),await v()}catch(e){a(e?.message||String(e))}}}let S=e.filter(e=>{if(!o)return!0;let t=o.toLowerCase();return e.firstName.toLowerCase().includes(t)||e.lastName.toLowerCase().includes(t)||e.email.toLowerCase().includes(t)||e.phone.includes(t)});return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Customers`}),(0,$.jsx)(`p`,{className:`subtle`,children:`CRM and customer relationship management`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>{d(null),h({firstName:``,lastName:``,email:``,phone:``,tags:[]}),l(!0)},style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`},children:`+ Add Customer`})]}),(0,$.jsx)(`div`,{style:{marginBottom:`16px`},children:(0,$.jsx)(`input`,{type:`text`,placeholder:`Search customers by name, email, or phone...`,value:o,onChange:e=>s(e.target.value),style:{width:`100%`,maxWidth:`500px`,padding:`12px 16px`,borderRadius:`12px`,border:`1px solid var(--line)`,fontSize:`14px`}})}),i&&(0,$.jsx)(`div`,{className:`card`,style:{borderColor:`var(--danger)`},children:(0,$.jsx)(`div`,{className:`empty`,style:{color:`var(--danger)`},children:i})}),n&&(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{className:`empty`,children:`Loading customers...`})}),!n&&S.length===0&&(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{className:`empty`,children:(0,$.jsx)(`p`,{children:o?`No customers found.`:`No customers yet.`})})}),!n&&S.length>0&&(0,$.jsxs)(`div`,{className:`contentGrid`,children:[(0,$.jsxs)(`div`,{className:`card`,children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`Customer List`}),(0,$.jsxs)(`div`,{className:`cardSub`,children:[S.length,` customers`]})]})}),(0,$.jsx)(`div`,{className:`tableWrap`,children:(0,$.jsxs)(`table`,{className:`table`,children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{children:`Name`}),(0,$.jsx)(`th`,{children:`Contact`}),(0,$.jsx)(`th`,{children:`Tags`}),(0,$.jsx)(`th`,{children:`Deals`}),(0,$.jsx)(`th`,{children:`Actions`})]})}),(0,$.jsx)(`tbody`,{children:S.map(e=>(0,$.jsxs)(`tr`,{className:f?.id===e.id?`rowSelected`:``,onClick:()=>p(e),children:[(0,$.jsxs)(`td`,{className:`tdStrong`,children:[e.firstName,` `,e.lastName]}),(0,$.jsxs)(`td`,{className:`tdMuted`,children:[(0,$.jsx)(`div`,{children:e.email}),(0,$.jsx)(`div`,{style:{fontSize:`12px`},children:e.phone})]}),(0,$.jsx)(`td`,{children:e.tags&&e.tags.length>0?(0,$.jsx)(`div`,{style:{display:`flex`,gap:`4px`,flexWrap:`wrap`},children:e.tags.map((e,t)=>(0,$.jsx)(`span`,{className:`badge badge-created`,style:{fontSize:`10px`,padding:`3px 6px`},children:e},t))}):(0,$.jsx)(`span`,{className:`tdMuted`,children:`-`})}),(0,$.jsx)(`td`,{children:e.deals?.length||0}),(0,$.jsx)(`td`,{children:(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`6px`},children:[(0,$.jsx)(`button`,{className:`iconBtn`,onClick:t=>{t.stopPropagation(),b(e)},style:{padding:`6px 10px`,fontSize:`12px`},children:`Edit`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:t=>{t.stopPropagation(),x(e.id)},style:{padding:`6px 10px`,fontSize:`12px`,borderColor:`var(--danger)`,color:`var(--danger)`},children:`Delete`})]})})]},e.id))})]})})]}),f&&(0,$.jsxs)(`div`,{className:`card`,children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`Customer Details`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>p(null),"aria-label":`Close`,children:``})]}),(0,$.jsxs)(`div`,{className:`detail`,children:[(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Name`}),(0,$.jsxs)(`div`,{className:`v`,children:[f.firstName,` `,f.lastName]})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Email`}),(0,$.jsx)(`div`,{className:`v`,children:f.email})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Phone`}),(0,$.jsx)(`div`,{className:`v`,children:f.phone})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Customer Since`}),(0,$.jsx)(`div`,{className:`v`,children:new Date(f.createdAt).toLocaleDateString()})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Last Contact`}),(0,$.jsx)(`div`,{className:`v`,children:new Date(f.lastContact).toLocaleDateString()})]}),f.tags&&f.tags.length>0&&(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Tags`}),(0,$.jsx)(`div`,{className:`v`,children:f.tags.map((e,t)=>(0,$.jsx)(`span`,{className:`badge badge-created`,style:{marginRight:`4px`},children:e},t))})]}),f.notes&&(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{className:`sectionTitle`,style:{fontSize:`14px`},children:`Notes`}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,marginTop:`8px`,lineHeight:`1.6`},children:f.notes})]}),f.deals&&f.deals.length>0&&(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{className:`sectionTitle`,style:{fontSize:`14px`},children:`Deals`}),f.deals.map(e=>(0,$.jsxs)(`div`,{style:{padding:`10px`,marginTop:`8px`,borderRadius:`10px`,background:`#f8fafc`,border:`1px solid var(--line)`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,marginBottom:`4px`},children:e.item}),(0,$.jsxs)(`div`,{style:{fontSize:`13px`,color:`var(--muted)`},children:[(0,$.jsx)(`span`,{className:`badge badge-${e.status===`sold`?`completed`:e.status===`negotiating`?`processing`:`created`}`,style:{fontSize:`11px`,padding:`3px 8px`,marginRight:`8px`},children:e.status}),`$`,e.value.toLocaleString()]})]},e.id))]})]})]})]}),(0,$.jsx)(u_,{isOpen:c,onClose:()=>{l(!1),d(null),h({firstName:``,lastName:``,email:``,phone:``,tags:[]})},title:u?`Edit Customer`:`Add New Customer`,onSubmit:y,submitLabel:u?`Update`:`Add Customer`,children:(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:[(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`10px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`First Name *`}),(0,$.jsx)(`input`,{type:`text`,placeholder:`John`,value:m.firstName,onChange:e=>h({...m,firstName:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Last Name *`}),(0,$.jsx)(`input`,{type:`text`,placeholder:`Smith`,value:m.lastName,onChange:e=>h({...m,lastName:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Email *`}),(0,$.jsx)(`input`,{type:`email`,placeholder:`john.smith@example.com`,value:m.email,onChange:e=>h({...m,email:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Phone`}),(0,$.jsx)(`input`,{type:`tel`,placeholder:`+1-555-0100`,value:m.phone,onChange:e=>h({...m,phone:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`}})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Tags (comma-separated)`}),(0,$.jsx)(`input`,{type:`text`,placeholder:`hot-lead, repeat-customer`,value:m.tags?.join(`, `)||``,onChange:e=>h({...m,tags:e.target.value.split(`,`).map(e=>e.trim()).filter(Boolean)}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`}})]})]})})]})}function h_(){let[e,t]=(0,_.useState)([]),[n,r]=(0,_.useState)([]),[i,a]=(0,_.useState)(!1),[o,s]=(0,_.useState)(``),[c,l]=(0,_.useState)(!1),[u,d]=(0,_.useState)(null),[f,p]=(0,_.useState)({customerId:``,customerName:``,datetime:``,type:`service`,duration:60,notes:``}),m=`auto`;(0,_.useEffect)(()=>{h()},[]);async function h(){a(!0),s(``);try{let[e,n]=await Promise.all([Xg({vertical:m,jurisdiction:`il`}),Kg({vertical:m,jurisdiction:`il`})]);t(e.appointments||[]),r(n.customers||[])}catch(e){s(e?.message||String(e)),t([]),r([])}finally{a(!1)}}async function g(e){e.preventDefault(),s(``);let t=n.find(e=>e.id===f.customerId);try{u?await Qg({vertical:m,jurisdiction:`il`,id:u.id,appointment:{...f,customerName:t?.firstName+` `+t?.lastName||f.customerName}}):await Zg({vertical:m,jurisdiction:`il`,appointment:{...f,customerName:t?.firstName+` `+t?.lastName||f.customerName}}),await h(),l(!1),d(null),p({customerId:``,customerName:``,datetime:``,type:`service`,duration:60,notes:``})}catch(e){s(e?.message||String(e))}}function v(e){d(e),p({customerId:e.customerId,customerName:e.customerName,datetime:e.datetime,type:e.type,duration:e.duration,notes:e.notes||``}),l(!0)}async function y(e){if(confirm(`Are you sure you want to delete this appointment?`)){s(``);try{await $g({vertical:m,jurisdiction:`il`,id:e}),await h()}catch(e){s(e?.message||String(e))}}}async function b(e,t){s(``);try{await Qg({vertical:m,jurisdiction:`il`,id:e,appointment:{status:t}}),await h()}catch(e){s(e?.message||String(e))}}let x=e.reduce((e,t)=>{let n=new Date(t.datetime).toDateString();return e[n]||(e[n]=[]),e[n].push(t),e},{}),S=Object.keys(x).sort((e,t)=>new Date(e)-new Date(t)),C={total:e.length,scheduled:e.filter(e=>e.status===`scheduled`).length,completed:e.filter(e=>e.status===`completed`).length,cancelled:e.filter(e=>e.status===`cancelled`).length};return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Appointments`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Schedule and calendar management`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>{d(null),p({customerId:``,customerName:``,datetime:``,type:`service`,duration:60,notes:``}),l(!0)},style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`},children:`+ New Appointment`})]}),(0,$.jsxs)(`div`,{className:`kpiRow`,children:[(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Total`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:C.total})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Scheduled`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:C.scheduled})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Completed`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:C.completed})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Cancelled`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:C.cancelled})]})]}),o&&(0,$.jsx)(`div`,{className:`card`,style:{borderColor:`var(--danger)`},children:(0,$.jsx)(`div`,{className:`empty`,style:{color:`var(--danger)`},children:o})}),i&&(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{className:`empty`,children:`Loading appointments...`})}),!i&&e.length===0&&(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{className:`empty`,children:(0,$.jsx)(`p`,{children:`No appointments scheduled.`})})}),!i&&e.length>0&&(0,$.jsx)(`div`,{children:S.map(e=>{let t=new Date(e),n=t.toDateString()===new Date().toDateString(),r=t<new Date&&!n;return(0,$.jsxs)(`div`,{style:{marginBottom:`24px`},children:[(0,$.jsxs)(`div`,{style:{fontSize:`18px`,fontWeight:900,marginBottom:`12px`,display:`flex`,alignItems:`center`,gap:`10px`},children:[t.toLocaleDateString(`en-US`,{weekday:`long`,month:`long`,day:`numeric`,year:`numeric`}),n&&(0,$.jsx)(`span`,{className:`badge badge-processing`,style:{fontSize:`11px`,padding:`4px 8px`},children:`Today`}),r&&(0,$.jsx)(`span`,{className:`badge`,style:{fontSize:`11px`,padding:`4px 8px`},children:`Past`})]}),(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`10px`},children:x[e].sort((e,t)=>new Date(e.datetime)-new Date(t.datetime)).map(e=>(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{style:{padding:`14px 16px`},children:(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`flex-start`,gap:`14px`},children:[(0,$.jsxs)(`div`,{style:{flex:1},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`10px`,marginBottom:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`16px`,fontWeight:900,color:`var(--accent)`},children:new Date(e.datetime).toLocaleTimeString(`en-US`,{hour:`2-digit`,minute:`2-digit`})}),(0,$.jsx)(`span`,{className:`badge badge-${e.status===`scheduled`?`processing`:e.status===`completed`?`completed`:`failed`}`,style:{fontSize:`11px`,padding:`4px 8px`},children:e.status}),(0,$.jsxs)(`span`,{className:`badge`,style:{fontSize:`11px`,padding:`4px 8px`},children:[e.duration,` min`]})]}),(0,$.jsx)(`div`,{style:{fontWeight:800,marginBottom:`4px`},children:e.customerName}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`var(--muted)`},children:e.type}),e.notes&&(0,$.jsx)(`div`,{style:{marginTop:`8px`,fontSize:`13px`,color:`var(--muted)`},children:e.notes})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`6px`},children:[e.status===`scheduled`&&(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>b(e.id,`completed`),style:{padding:`6px 10px`,fontSize:`12px`,background:`var(--accent2)`,color:`white`,borderColor:`var(--accent2)`},children:`Complete`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>b(e.id,`cancelled`),style:{padding:`6px 10px`,fontSize:`12px`,borderColor:`var(--danger)`,color:`var(--danger)`},children:`Cancel`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>v(e),style:{padding:`6px 10px`,fontSize:`12px`},children:`Edit`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>y(e.id),style:{padding:`6px 10px`,fontSize:`12px`,borderColor:`var(--danger)`,color:`var(--danger)`},children:`Delete`})]})]})})},e.id))})]},e)})}),(0,$.jsx)(u_,{isOpen:c,onClose:()=>{l(!1),d(null),p({customerId:``,customerName:``,datetime:``,type:`service`,duration:60,notes:``})},title:u?`Edit Appointment`:`Schedule New Appointment`,onSubmit:g,submitLabel:u?`Update`:`Schedule`,children:(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Customer *`}),(0,$.jsxs)(`select`,{value:f.customerId,onChange:e=>p({...f,customerId:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0,children:[(0,$.jsx)(`option`,{value:``,children:`Select customer...`}),n.map(e=>(0,$.jsx)(`option`,{value:e.id,children:e.name},e.id))]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Date & Time *`}),(0,$.jsx)(`input`,{type:`datetime-local`,value:f.datetime,onChange:e=>p({...f,datetime:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`10px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Type *`}),(0,$.jsxs)(`select`,{value:f.type,onChange:e=>p({...f,type:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0,children:[(0,$.jsx)(`option`,{value:`service`,children:`Service`}),(0,$.jsx)(`option`,{value:`test-drive`,children:`Test Drive`}),(0,$.jsx)(`option`,{value:`financing`,children:`Financing`}),(0,$.jsx)(`option`,{value:`consultation`,children:`Consultation`})]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Duration (min) *`}),(0,$.jsx)(`input`,{type:`number`,step:`15`,value:f.duration,onChange:e=>p({...f,duration:parseInt(e.target.value)||60}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Notes`}),(0,$.jsx)(`textarea`,{placeholder:`Appointment notes...`,value:f.notes,onChange:e=>p({...f,notes:e.target.value}),rows:3,style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`,fontFamily:`inherit`,resize:`vertical`}})]})]})})]})}function g_(){let[e,t]=(0,_.useState)([]),[n,r]=(0,_.useState)(!1),[i,a]=(0,_.useState)(``),[o,s]=(0,_.useState)(``),[c,l]=(0,_.useState)(!1),[u,d]=(0,_.useState)(null),[f,p]=(0,_.useState)(null),[m,h]=(0,_.useState)({name:``,email:``,role:`sales`,permissions:[]}),g=[{id:`staff-001`,name:`Jane Smith`,email:`jane.smith@dealer.com`,role:`manager`,permissions:[`all`],status:`active`,createdAt:`2026-01-15T09:00:00Z`,lastLogin:`2026-02-14T08:30:00Z`},{id:`staff-002`,name:`Bob Johnson`,email:`bob.j@dealer.com`,role:`sales`,permissions:[`customers.write`,`inventory.read`,`appointments.write`],status:`active`,createdAt:`2026-02-01T10:00:00Z`,lastLogin:`2026-02-13T16:45:00Z`},{id:`staff-003`,name:`Sarah Williams`,email:`sarah.w@dealer.com`,role:`service`,permissions:[`appointments.write`,`customers.read`],status:`active`,createdAt:`2026-02-05T11:00:00Z`,lastLogin:`2026-02-14T07:15:00Z`}];(0,_.useEffect)(()=>{v()},[]);async function v(){r(!0),setTimeout(()=>{t(g),r(!1)},500)}function y(n){n.preventDefault(),t(u?e.map(e=>e.id===u.id?{...e,...m}:e):[{id:`staff-${Date.now()}`,...m,status:`active`,createdAt:new Date().toISOString(),lastLogin:null},...e]),l(!1),d(null),h({name:``,email:``,role:`sales`,permissions:[]})}function b(e){d(e),h({name:e.name,email:e.email,role:e.role,permissions:e.permissions}),l(!0)}function x(n){confirm(`Are you sure you want to remove this staff member?`)&&(t(e.filter(e=>e.id!==n)),f?.id===n&&p(null))}function S(n){t(e.map(e=>e.id===n?{...e,status:e.status===`active`?`inactive`:`active`}:e))}let C=e.filter(e=>{if(!o)return!0;let t=o.toLowerCase();return e.name.toLowerCase().includes(t)||e.email.toLowerCase().includes(t)||e.role.toLowerCase().includes(t)}),w=[{value:`manager`,label:`Manager`},{value:`sales`,label:`Sales Representative`},{value:`service`,label:`Service Technician`},{value:`admin`,label:`Administrator`}],ee=[{value:`customers.read`,label:`View Customers`},{value:`customers.write`,label:`Edit Customers`},{value:`inventory.read`,label:`View Inventory`},{value:`inventory.write`,label:`Edit Inventory`},{value:`appointments.read`,label:`View Appointments`},{value:`appointments.write`,label:`Edit Appointments`},{value:`reports.read`,label:`View Reports`},{value:`settings.write`,label:`Edit Settings`}];return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Staff`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Team member management and permissions`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>{d(null),h({name:``,email:``,role:`sales`,permissions:[]}),l(!0)},style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`},children:`+ Add Staff`})]}),(0,$.jsx)(`div`,{style:{marginBottom:`16px`},children:(0,$.jsx)(`input`,{type:`text`,placeholder:`Search staff by name, email, or role...`,value:o,onChange:e=>s(e.target.value),style:{width:`100%`,maxWidth:`500px`,padding:`12px 16px`,borderRadius:`12px`,border:`1px solid var(--line)`,fontSize:`14px`}})}),i&&(0,$.jsx)(`div`,{className:`card`,style:{borderColor:`var(--danger)`},children:(0,$.jsx)(`div`,{className:`empty`,style:{color:`var(--danger)`},children:i})}),n&&(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{className:`empty`,children:`Loading staff members...`})}),!n&&C.length===0&&(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{className:`empty`,children:(0,$.jsx)(`p`,{children:`No staff members found.`})})}),!n&&C.length>0&&(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`2fr 1fr`,gap:`16px`},children:[(0,$.jsxs)(`div`,{className:`card`,children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{className:`cardTitle`,children:[`Team Members (`,C.length,`)`]})}),(0,$.jsx)(`div`,{className:`tableWrap`,children:(0,$.jsxs)(`table`,{className:`table`,children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{children:`Name`}),(0,$.jsx)(`th`,{children:`Role`}),(0,$.jsx)(`th`,{children:`Status`}),(0,$.jsx)(`th`,{children:`Last Login`}),(0,$.jsx)(`th`,{children:`Actions`})]})}),(0,$.jsx)(`tbody`,{children:C.map(e=>(0,$.jsxs)(`tr`,{style:{cursor:`pointer`,backgroundColor:f?.id===e.id?`#f8fafc`:`transparent`},onClick:()=>p(e),children:[(0,$.jsxs)(`td`,{children:[(0,$.jsx)(`div`,{className:`tdStrong`,children:e.name}),(0,$.jsx)(`div`,{className:`tdMuted`,children:e.email})]}),(0,$.jsx)(`td`,{children:w.find(t=>t.value===e.role)?.label}),(0,$.jsx)(`td`,{children:e.status===`active`?(0,$.jsx)(`span`,{className:`badge badge-completed`,children:`Active`}):(0,$.jsx)(`span`,{className:`badge`,children:`Inactive`})}),(0,$.jsx)(`td`,{className:`tdMuted`,children:e.lastLogin?new Date(e.lastLogin).toLocaleString():`Never`}),(0,$.jsx)(`td`,{children:(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`6px`},children:[(0,$.jsx)(`button`,{className:`iconBtn`,onClick:t=>{t.stopPropagation(),b(e)},children:`Edit`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:t=>{t.stopPropagation(),S(e.id)},children:e.status===`active`?`Deactivate`:`Activate`})]})})]},e.id))})]})})]}),f&&(0,$.jsxs)(`div`,{className:`card`,children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:f.name}),(0,$.jsx)(`div`,{className:`cardSub`,children:f.email})]})}),(0,$.jsxs)(`div`,{className:`detail`,children:[(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Role`}),(0,$.jsx)(`div`,{className:`v`,children:w.find(e=>e.value===f.role)?.label})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Status`}),(0,$.jsx)(`div`,{className:`v`,children:f.status===`active`?(0,$.jsx)(`span`,{className:`badge badge-completed`,children:`Active`}):(0,$.jsx)(`span`,{className:`badge`,children:`Inactive`})})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Member Since`}),(0,$.jsx)(`div`,{className:`v`,children:new Date(f.createdAt).toLocaleDateString()})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Last Login`}),(0,$.jsx)(`div`,{className:`v`,children:f.lastLogin?new Date(f.lastLogin).toLocaleString():`Never`})]})]}),(0,$.jsxs)(`div`,{style:{padding:`16px`,borderTop:`1px solid var(--line)`},children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`12px`},children:`Permissions`}),(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`6px`},children:f.permissions.includes(`all`)?(0,$.jsx)(`span`,{className:`badge badge-completed`,children:`Full Access`}):f.permissions.length>0?f.permissions.map(e=>(0,$.jsx)(`span`,{className:`badge`,children:ee.find(t=>t.value===e)?.label||e},e)):(0,$.jsx)(`span`,{className:`tdMuted`,children:`No permissions assigned`})})]}),(0,$.jsx)(`div`,{style:{padding:`16px`,borderTop:`1px solid var(--line)`},children:(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>x(f.id),style:{width:`100%`,color:`var(--danger)`},children:`Remove Staff Member`})})]})]}),(0,$.jsx)(u_,{isOpen:c,onClose:()=>{l(!1),d(null)},title:u?`Edit Staff Member`:`Add Staff Member`,onSubmit:y,submitLabel:u?`Save Changes`:`Add Staff Member`,children:(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Full Name *`}),(0,$.jsx)(`input`,{type:`text`,value:m.name,onChange:e=>h({...m,name:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Email *`}),(0,$.jsx)(`input`,{type:`email`,value:m.email,onChange:e=>h({...m,email:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Role *`}),(0,$.jsx)(`select`,{value:m.role,onChange:e=>h({...m,role:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0,children:w.map(e=>(0,$.jsx)(`option`,{value:e.value,children:e.label},e.value))})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Permissions`}),(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`8px`},children:ee.map(e=>(0,$.jsxs)(`label`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,$.jsx)(`input`,{type:`checkbox`,checked:m.permissions.includes(e.value),onChange:t=>{t.target.checked?h({...m,permissions:[...m.permissions,e.value]}):h({...m,permissions:m.permissions.filter(t=>t!==e.value)})}}),(0,$.jsx)(`span`,{children:e.label})]},e.value))})]})]})})]})}function __(){let[e,t]=(0,_.useState)(`30days`),n={revenue:{value:`$127,450`,change:`+12.5%`,positive:!0},sales:{value:`47`,change:`+8.2%`,positive:!0},customers:{value:`234`,change:`+15.3%`,positive:!0},avgDealSize:{value:`$2,712`,change:`-3.1%`,positive:!1}},r=[{name:`2024 Honda Accord`,sales:12,revenue:`$34,200`},{name:`2023 Toyota Camry`,sales:8,revenue:`$28,400`},{name:`Premium Oil Change`,sales:45,revenue:`$3,600`},{name:`Tire Rotation`,sales:32,revenue:`$1,120`}];return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Reports`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Business analytics and performance metrics`})]}),(0,$.jsxs)(`select`,{value:e,onChange:e=>t(e.target.value),style:{padding:`10px 16px`,borderRadius:`12px`,border:`1px solid var(--line)`},children:[(0,$.jsx)(`option`,{value:`7days`,children:`Last 7 Days`}),(0,$.jsx)(`option`,{value:`30days`,children:`Last 30 Days`}),(0,$.jsx)(`option`,{value:`90days`,children:`Last 90 Days`}),(0,$.jsx)(`option`,{value:`year`,children:`This Year`})]})]}),(0,$.jsxs)(`div`,{className:`kpiRow`,children:[(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Total Revenue`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:n.revenue.value}),(0,$.jsx)(`div`,{className:`kpiChange`,style:{color:n.revenue.positive?`var(--success)`:`var(--danger)`},children:n.revenue.change})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Total Sales`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:n.sales.value}),(0,$.jsx)(`div`,{className:`kpiChange`,style:{color:n.sales.positive?`var(--success)`:`var(--danger)`},children:n.sales.change})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Active Customers`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:n.customers.value}),(0,$.jsx)(`div`,{className:`kpiChange`,style:{color:n.customers.positive?`var(--success)`:`var(--danger)`},children:n.customers.change})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Avg Deal Size`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:n.avgDealSize.value}),(0,$.jsx)(`div`,{className:`kpiChange`,style:{color:n.avgDealSize.positive?`var(--success)`:`var(--danger)`},children:n.avgDealSize.change})]})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`2fr 1fr`,gap:`16px`},children:[(0,$.jsxs)(`div`,{className:`card`,children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsx)(`div`,{className:`cardTitle`,children:`Revenue Trend`})}),(0,$.jsx)(`div`,{style:{padding:`32px`,display:`flex`,alignItems:`center`,justifyContent:`center`,minHeight:`300px`,color:`var(--textMuted)`,background:`#f8fafc`,borderRadius:`8px`,margin:`16px`},children:`[Chart: Revenue over time - integrate Chart.js or similar]`})]}),(0,$.jsxs)(`div`,{className:`card`,children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsx)(`div`,{className:`cardTitle`,children:`Top Products`})}),(0,$.jsx)(`div`,{style:{padding:`16px`,display:`flex`,flexDirection:`column`,gap:`12px`},children:r.map((e,t)=>(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`flex-start`,paddingBottom:`12px`,borderBottom:t<r.length-1?`1px solid var(--line)`:`none`},children:[(0,$.jsxs)(`div`,{style:{flex:1},children:[(0,$.jsx)(`div`,{style:{fontWeight:600,fontSize:`14px`},children:e.name}),(0,$.jsxs)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:[e.sales,` sales`]})]}),(0,$.jsx)(`div`,{style:{fontWeight:600,fontSize:`14px`},children:e.revenue})]},t))})]})]}),(0,$.jsxs)(`div`,{className:`card`,style:{marginTop:`16px`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsx)(`div`,{className:`cardTitle`,children:`Recent Activity`})}),(0,$.jsx)(`div`,{className:`tableWrap`,children:(0,$.jsxs)(`table`,{className:`table`,children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{children:`Date`}),(0,$.jsx)(`th`,{children:`Type`}),(0,$.jsx)(`th`,{children:`Description`}),(0,$.jsx)(`th`,{children:`Amount`})]})}),(0,$.jsx)(`tbody`,{children:[{date:`2026-02-14`,type:`Sale`,description:`2024 Honda Accord to John Smith`,amount:`$28,500`},{date:`2026-02-13`,type:`Service`,description:`Premium Oil Change for Sarah Lee`,amount:`$79.99`},{date:`2026-02-13`,type:`Sale`,description:`2023 Toyota Camry to Mike Johnson`,amount:`$25,900`},{date:`2026-02-12`,type:`Service`,description:`Brake Inspection for Lisa Park`,amount:`$120.00`}].map((e,t)=>(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`td`,{className:`tdMuted`,children:new Date(e.date).toLocaleDateString()}),(0,$.jsx)(`td`,{children:(0,$.jsx)(`span`,{className:`badge ${e.type===`Sale`?`badge-completed`:``}`,children:e.type})}),(0,$.jsx)(`td`,{children:e.description}),(0,$.jsx)(`td`,{className:`tdStrong`,children:e.amount})]},t))})]})})]}),(0,$.jsxs)(`div`,{className:`card`,style:{marginTop:`16px`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`Export Reports`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Download data for external analysis`})]})}),(0,$.jsxs)(`div`,{style:{padding:`16px`,display:`flex`,gap:`12px`},children:[(0,$.jsx)(`button`,{className:`iconBtn`,children:`Export as CSV`}),(0,$.jsx)(`button`,{className:`iconBtn`,children:`Export as PDF`}),(0,$.jsx)(`button`,{className:`iconBtn`,children:`Export as Excel`})]})]})]})}function v_(){let[e,t]=(0,_.useState)([]),[n,r]=(0,_.useState)(!1),[i,a]=(0,_.useState)(``),[o,s]=(0,_.useState)(!1),[c,l]=(0,_.useState)(null),u=localStorage.getItem(`VERTICAL`)||`auto`,d=localStorage.getItem(`JURISDICTION`)||`IL`,f=[{id:`salesforce`,name:`Salesforce`,type:`CRM`,icon:`SF`},{id:`hubspot`,name:`HubSpot`,type:`CRM`,icon:`HS`},{id:`quickbooks`,name:`QuickBooks`,type:`Accounting`,icon:`QB`},{id:`stripe`,name:`Stripe`,type:`Payments`,icon:`ST`},{id:`square`,name:`Square`,type:`Payments`,icon:`SQ`},{id:`twilio`,name:`Twilio`,type:`SMS`,icon:`TW`},{id:`sendgrid`,name:`SendGrid`,type:`Email`,icon:`SG`},{id:`foreflight`,name:`ForeFlight`,type:`Aviation`,icon:`FF`}];(0,_.useEffect)(()=>{p()},[]);async function p(){r(!0),a(``);try{t((await t_({vertical:u,jurisdiction:d})).integrations||[])}catch(e){a(e?.message||String(e)),console.error(`Failed to load integrations:`,e)}finally{r(!1)}}async function m(e){if(confirm(`Are you sure you want to disconnect this integration?`)){a(``);try{await n_({vertical:u,jurisdiction:d,integrationId:e}),await p()}catch(e){a(e?.message||String(e)),console.error(`Failed to disconnect integration:`,e)}}}async function h(e){a(``);try{await r_({vertical:u,jurisdiction:d,integrationId:e}),await p(),alert(`Sync started successfully!`)}catch(e){a(e?.message||String(e)),console.error(`Failed to sync integration:`,e),alert(`Sync failed: `+(e?.message||String(e)))}}return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Data & APIs`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Third-party integrations and data synchronization`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>s(!0),style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`},children:`+ Add Integration`})]}),e.length>0&&(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{className:`cardTitle`,children:[`Active Integrations (`,e.length,`)`]})}),(0,$.jsx)(`div`,{style:{padding:`16px`,display:`flex`,flexDirection:`column`,gap:`16px`},children:e.map(e=>(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,padding:`16px`,border:`1px solid var(--line)`,borderRadius:`12px`,cursor:`pointer`},onClick:()=>l(e),children:[(0,$.jsxs)(`div`,{style:{flex:1},children:[(0,$.jsx)(`div`,{style:{fontWeight:600,fontSize:`16px`,marginBottom:`4px`},children:e.name}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`,marginBottom:`8px`},children:e.description}),(0,$.jsxs)(`div`,{style:{fontSize:`12px`,color:`var(--textMuted)`},children:[`Last synced: `,new Date(e.lastSync).toLocaleString(),` `,` `,e.recordsSync,` records`]})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`,marginLeft:`16px`},children:[(0,$.jsx)(`button`,{className:`iconBtn`,onClick:t=>{t.stopPropagation(),h(e.id)},children:`Sync Now`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:t=>{t.stopPropagation(),m(e.id)},style:{color:`var(--danger)`},children:`Disconnect`})]})]},e.id))})]}),c&&(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`},children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:c.name}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Integration Details`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>l(null),children:`Close`})]}),(0,$.jsxs)(`div`,{className:`detail`,children:[(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Status`}),(0,$.jsx)(`div`,{className:`v`,children:(0,$.jsx)(`span`,{className:`badge badge-completed`,children:`Connected`})})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Type`}),(0,$.jsx)(`div`,{className:`v`,children:c.type})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Last Sync`}),(0,$.jsx)(`div`,{className:`v`,children:new Date(c.lastSync).toLocaleString()})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Records Synced`}),(0,$.jsx)(`div`,{className:`v`,children:c.recordsSync})]})]}),(0,$.jsxs)(`div`,{style:{padding:`16px`,borderTop:`1px solid var(--line)`},children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`12px`},children:`Sync Settings`}),(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`8px`},children:[(0,$.jsxs)(`label`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,$.jsx)(`input`,{type:`checkbox`,defaultChecked:!0}),(0,$.jsx)(`span`,{children:`Auto-sync every hour`})]}),(0,$.jsxs)(`label`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,$.jsx)(`input`,{type:`checkbox`,defaultChecked:!0}),(0,$.jsx)(`span`,{children:`Sync customer data`})]}),(0,$.jsxs)(`label`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,$.jsx)(`input`,{type:`checkbox`,defaultChecked:!0}),(0,$.jsx)(`span`,{children:`Sync transactions`})]}),(0,$.jsxs)(`label`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,$.jsx)(`input`,{type:`checkbox`}),(0,$.jsx)(`span`,{children:`Sync inventory`})]})]})]})]}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`},children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`Webhooks`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Receive real-time notifications`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,children:`+ Add Webhook`})]}),(0,$.jsx)(`div`,{style:{padding:`16px`},children:(0,$.jsxs)(`div`,{style:{padding:`16px`,border:`1px solid var(--line)`,borderRadius:`12px`,fontFamily:`monospace`,fontSize:`13px`,background:`#f8fafc`},children:[(0,$.jsx)(`div`,{style:{marginBottom:`8px`,fontWeight:600},children:`POST https://your-app.com/webhooks/titleapp`}),(0,$.jsx)(`div`,{style:{color:`var(--textMuted)`},children:`Events: customer.created, deal.updated, payment.received`})]})})]}),(0,$.jsxs)(`div`,{className:`card`,children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`API Keys`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Programmatic access to your data`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,children:`Generate New Key`})]}),(0,$.jsxs)(`div`,{style:{padding:`16px`,display:`flex`,flexDirection:`column`,gap:`12px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,fontWeight:600,marginBottom:`6px`},children:`Production API Key`}),(0,$.jsxs)(`div`,{style:{fontFamily:`monospace`,padding:`12px`,background:`#f8fafc`,borderRadius:`8px`,fontSize:`13px`,display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsx)(`span`,{children:`ta_prod_`}),(0,$.jsx)(`button`,{className:`iconBtn`,children:`Reveal`})]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,fontWeight:600,marginBottom:`6px`},children:`Test API Key`}),(0,$.jsxs)(`div`,{style:{fontFamily:`monospace`,padding:`12px`,background:`#f8fafc`,borderRadius:`8px`,fontSize:`13px`,display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsx)(`span`,{children:`ta_test_`}),(0,$.jsx)(`button`,{className:`iconBtn`,children:`Reveal`})]})]})]})]}),(0,$.jsx)(u_,{isOpen:o,onClose:()=>s(!1),title:`Add Integration`,onSubmit:e=>{e.preventDefault(),s(!1)},submitLabel:`Connect`,children:(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`var(--textMuted)`,marginBottom:`8px`},children:`Select an integration to connect`}),(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(2, 1fr)`,gap:`12px`},children:f.map(e=>(0,$.jsxs)(`button`,{type:`button`,style:{padding:`16px`,border:`1px solid var(--line)`,borderRadius:`12px`,background:`white`,cursor:`pointer`,textAlign:`left`},onClick:()=>{alert(`Connecting to ${e.name}...`),s(!1)},children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`4px`},children:e.name}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:e.type})]},e.id))})]})})]})}function y_(){let[e,t]=(0,_.useState)([]),[n,r]=(0,_.useState)(localStorage.getItem(`CURRENT_TENANT_ID`)||null),[i,a]=(0,_.useState)(!1),[o,s]=(0,_.useState)({name:``,type:`business`,vertical:`auto`,jurisdiction:`IL`}),[c,l]=(0,_.useState)({name:`Velocity Motors`,type:`Auto Dealer`,vertical:`auto`,jurisdiction:`il`,address:`123 Dealer Drive, Chicago, IL 60601`,phone:`+1-555-DEALER`,email:`info@velocitymotors.com`,timezone:`America/Chicago`,notifications:{email:!0,sms:!0,lowInventoryAlert:!0,appointmentReminders:!0},blockchain:{enabled:!1,provider:`venly`,inventoryOnChain:0,dealsOnChain:0}}),[u,d]=(0,_.useState)(!1),[f,p]=(0,_.useState)(null),[m,h]=(0,_.useState)({});function g(e){p(e),e===`business`?h({name:c.name,type:c.type,address:c.address,phone:c.phone,email:c.email}):e===`notifications`&&h({...c.notifications}),d(!0)}function v(e){e.preventDefault(),f===`business`?l({...c,...m}):f===`notifications`&&l({...c,notifications:m}),d(!1)}(0,_.useEffect)(()=>{y()},[]);async function y(){try{localStorage.getItem(`VERTICAL`),localStorage.getItem(`JURISDICTION`),t([{id:`demo-company-1`,name:`Velocity Motors`,type:`Auto Dealer`,role:`admin`}])}catch(e){console.error(`Failed to load companies:`,e)}}function b(e){localStorage.setItem(`CURRENT_TENANT_ID`,e),r(e),window.location.reload()}return(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`pageHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Settings`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Business configuration and preferences`})]})}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`},children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`My Companies`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Manage multiple businesses with one account (perfect for ICs & solo operators)`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>a(!0),style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`},children:`+ New Company`})]}),(0,$.jsx)(`div`,{style:{padding:`16px`},children:e.map(e=>(0,$.jsxs)(`div`,{style:{padding:`12px`,marginBottom:`8px`,border:`2px solid ${n===e.id?`var(--accent)`:`var(--line)`}`,borderRadius:`8px`,display:`flex`,justifyContent:`space-between`,alignItems:`center`,background:n===e.id?`rgba(124,58,237,0.05)`:`transparent`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600},children:e.name}),(0,$.jsxs)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:[e.type,`  `,e.role,n===e.id&&(0,$.jsx)(`span`,{style:{color:`var(--accent)`,marginLeft:`8px`},children:` Active`})]})]}),n!==e.id&&(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>b(e.id),children:`Switch`})]},e.id))})]}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`},children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`Business Information`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Your dealership details`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>g(`business`),children:`Edit`})]}),(0,$.jsxs)(`div`,{className:`detail`,children:[(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Business Name`}),(0,$.jsx)(`div`,{className:`v`,children:c.name})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Type`}),(0,$.jsx)(`div`,{className:`v`,children:c.type})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Vertical`}),(0,$.jsxs)(`div`,{className:`v`,children:[c.vertical.toUpperCase(),` (`,c.jurisdiction.toUpperCase(),`)`]})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Address`}),(0,$.jsx)(`div`,{className:`v`,children:c.address})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Phone`}),(0,$.jsx)(`div`,{className:`v`,children:c.phone})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Email`}),(0,$.jsx)(`div`,{className:`v`,children:c.email})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Timezone`}),(0,$.jsx)(`div`,{className:`v`,children:c.timezone})]})]})]}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`},children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`Notification Preferences`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`How your business receives alerts`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>g(`notifications`),children:`Edit`})]}),(0,$.jsxs)(`div`,{style:{padding:`16px`,display:`flex`,flexDirection:`column`,gap:`12px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`},children:[(0,$.jsx)(`input`,{type:`checkbox`,checked:c.notifications.email,readOnly:!0}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600},children:`Email Notifications`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:`Receive updates via email`})]})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`},children:[(0,$.jsx)(`input`,{type:`checkbox`,checked:c.notifications.sms,readOnly:!0}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600},children:`SMS Notifications`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:`Receive updates via text message`})]})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`},children:[(0,$.jsx)(`input`,{type:`checkbox`,checked:c.notifications.lowInventoryAlert,readOnly:!0}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600},children:`Low Inventory Alerts`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:`Get notified when inventory is running low`})]})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`},children:[(0,$.jsx)(`input`,{type:`checkbox`,checked:c.notifications.appointmentReminders,readOnly:!0}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600},children:`Appointment Reminders`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:`Remind staff about upcoming appointments`})]})]})]})]}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`Integrations`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Connected third-party services`})]})}),(0,$.jsxs)(`div`,{style:{padding:`16px`,display:`flex`,flexDirection:`column`,gap:`12px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600},children:`Salesforce CRM`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:`Sync customer data with Salesforce`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,children:`Connect`})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600},children:`QuickBooks`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:`Sync financial data and invoices`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,children:`Connect`})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600},children:`Stripe Payments`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:`Accept online payments`})]}),(0,$.jsx)(`span`,{className:`badge badge-completed`,children:`Connected`})]})]})]}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`},children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`API Access`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`API keys for programmatic access`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,children:`Generate New Key`})]}),(0,$.jsxs)(`div`,{style:{padding:`16px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`,marginBottom:`8px`},children:`Production API Key`}),(0,$.jsx)(`div`,{style:{fontFamily:`monospace`,padding:`12px`,background:`#f8fafc`,borderRadius:`8px`,fontSize:`13px`},children:`ta_prod_`})]})]}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`},children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`Blockchain Verification`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`NFT records for inventory and deals via VENLY`})]}),(0,$.jsx)(`span`,{className:`badge ${c.blockchain.enabled?`badge-completed`:``}`,style:{fontSize:`11px`},children:c.blockchain.enabled?`Active`:`Inactive`})]}),(0,$.jsxs)(`div`,{style:{padding:`16px`},children:[(0,$.jsxs)(`div`,{style:{padding:`16px`,background:c.blockchain.enabled?`#f0fdf4`:`#f8fafc`,border:c.blockchain.enabled?`1px solid #86efac`:`1px solid #e5e7eb`,borderRadius:`12px`,marginBottom:`16px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`,marginBottom:`12px`},children:[(0,$.jsx)(`input`,{type:`checkbox`,checked:c.blockchain.enabled,onChange:e=>l({...c,blockchain:{...c.blockchain,enabled:e.target.checked}}),style:{width:`20px`,height:`20px`}}),(0,$.jsxs)(`div`,{style:{flex:1},children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`4px`},children:`Enable Blockchain Records`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:`Create immutable NFT records of inventory and customer deals on Polygon`})]})]}),c.blockchain.enabled&&(0,$.jsxs)(`div`,{style:{paddingTop:`12px`,borderTop:`1px solid #e5e7eb`,display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`12px`,fontSize:`13px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{color:`var(--textMuted)`,marginBottom:`4px`},children:`Inventory on Chain`}),(0,$.jsx)(`div`,{style:{fontWeight:600,fontSize:`18px`},children:c.blockchain.inventoryOnChain})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{color:`var(--textMuted)`,marginBottom:`4px`},children:`Deals on Chain`}),(0,$.jsx)(`div`,{style:{fontWeight:600,fontSize:`18px`},children:c.blockchain.dealsOnChain})]})]})]}),(0,$.jsxs)(`div`,{style:{padding:`12px`,background:`#fff5f5`,border:`1px solid #fecaca`,borderRadius:`8px`,fontSize:`13px`,marginBottom:`12px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`4px`},children:`Cost Notice`}),(0,$.jsx)(`div`,{style:{color:`#dc2626`},children:`VENLY blockchain integration costs $700/month when active. Requires 30+ active clients to justify the expense. Only enable when you have scale.`})]}),(0,$.jsxs)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`,lineHeight:`1.6`},children:[(0,$.jsx)(`strong`,{children:`How it works:`}),` When enabled, all new inventory items and customer deals are minted as NFTs on Polygon blockchain via VENLY. This provides immutable proof of transactions and builds trust with customers through verifiable records.`]})]})]}),(0,$.jsxs)(`div`,{className:`card`,style:{borderColor:`var(--danger)`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,style:{color:`var(--danger)`},children:`Danger Zone`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Irreversible actions`})]})}),(0,$.jsxs)(`div`,{style:{padding:`16px`,display:`flex`,flexDirection:`column`,gap:`12px`},children:[(0,$.jsx)(`button`,{className:`iconBtn`,style:{width:`fit-content`,color:`var(--danger)`},children:`Export All Data`}),(0,$.jsx)(`button`,{className:`iconBtn`,style:{width:`fit-content`,color:`var(--danger)`},children:`Delete Business Account`})]})]}),(0,$.jsxs)(u_,{isOpen:u,onClose:()=>d(!1),title:f===`business`?`Edit Business Information`:`Edit Notifications`,onSubmit:v,submitLabel:`Save Changes`,children:[f===`business`&&(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Business Name`}),(0,$.jsx)(`input`,{type:`text`,value:m.name||``,onChange:e=>h({...m,name:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`}})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Type`}),(0,$.jsx)(`input`,{type:`text`,value:m.type||``,onChange:e=>h({...m,type:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`}})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Address`}),(0,$.jsx)(`input`,{type:`text`,value:m.address||``,onChange:e=>h({...m,address:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`}})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Phone`}),(0,$.jsx)(`input`,{type:`tel`,value:m.phone||``,onChange:e=>h({...m,phone:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`}})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Email`}),(0,$.jsx)(`input`,{type:`email`,value:m.email||``,onChange:e=>h({...m,email:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`}})]})]}),f===`notifications`&&(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`},children:[(0,$.jsx)(`input`,{type:`checkbox`,checked:m.email||!1,onChange:e=>h({...m,email:e.target.checked})}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600},children:`Email Notifications`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:`Receive updates via email`})]})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`},children:[(0,$.jsx)(`input`,{type:`checkbox`,checked:m.sms||!1,onChange:e=>h({...m,sms:e.target.checked})}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600},children:`SMS Notifications`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:`Receive updates via text message`})]})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`},children:[(0,$.jsx)(`input`,{type:`checkbox`,checked:m.lowInventoryAlert||!1,onChange:e=>h({...m,lowInventoryAlert:e.target.checked})}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600},children:`Low Inventory Alerts`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:`Get notified when inventory is running low`})]})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`},children:[(0,$.jsx)(`input`,{type:`checkbox`,checked:m.appointmentReminders||!1,onChange:e=>h({...m,appointmentReminders:e.target.checked})}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600},children:`Appointment Reminders`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:`Remind staff about upcoming appointments`})]})]})]})]})]})}function b_(){let[e,t]=(0,_.useState)(`dashboard`),[n,r]=(0,_.useState)(!1);(0,_.useEffect)(()=>{localStorage.getItem(`hasSeenOnboardingTour`)||setTimeout(()=>r(!0),500)},[]);function i(){switch(e){case`dashboard`:return(0,$.jsx)(c_,{});case`analyst`:return(0,$.jsx)(l_,{});case`rules-resources`:return(0,$.jsx)(d_,{});case`inventory`:return(0,$.jsx)(f_,{});case`ai-chats`:return(0,$.jsx)(p_,{});case`customers`:return(0,$.jsx)(m_,{});case`appointments`:return(0,$.jsx)(h_,{});case`staff`:return(0,$.jsx)(g_,{});case`reports`:return(0,$.jsx)(__,{});case`data-apis`:return(0,$.jsx)(v_,{});case`settings`:return(0,$.jsx)(y_,{});default:return(0,$.jsx)(c_,{})}}let a=localStorage.getItem(`VERTICAL`)||`auto`;return(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(s_,{currentSection:e,onNavigate:t,children:i()}),n&&(0,$.jsx)(Fg,{vertical:a,onComplete:()=>r(!1)})]})}function x_(){let[e,t]=(0,_.useState)(()=>typeof window<`u`?localStorage.getItem(`ID_TOKEN`):null),[n,r]=(0,_.useState)(null),[i,a]=(0,_.useState)(!0),[o,s]=(0,_.useState)(()=>!!new URLSearchParams(window.location.search).get(`token`));return(0,_.useEffect)(()=>{let e=new URLSearchParams(window.location.search),n=e.get(`token`),r=e.get(`sid`);r&&sessionStorage.setItem(`ta_platform_sid`,r),n&&ua(yg,n).then(async e=>{let n=await e.user.getIdToken(!0);localStorage.setItem(`ID_TOKEN`,n),t(n),window.history.replaceState({},``,window.location.pathname),s(!1)}).catch(e=>{console.error(`Custom token sign-in failed:`,e),s(!1)}),n||t(localStorage.getItem(`ID_TOKEN`));let i=e=>{e.key===`ID_TOKEN`&&t(e.newValue)};window.addEventListener(`storage`,i);let a=yg.onAuthStateChanged(async e=>{if(e)try{let n=await e.getIdToken(!0);localStorage.setItem(`ID_TOKEN`,n),t(n)}catch(e){console.error(`Failed to refresh token:`,e)}else localStorage.removeItem(`ID_TOKEN`),t(null)});return()=>{window.removeEventListener(`storage`,i),a()}},[]),(0,_.useEffect)(()=>{if(!e||o){o||a(!1);return}async function n(){try{let n=await fetch(`https://titleapp-frontdoor.titleapp-core.workers.dev/api?path=/v1/me:memberships`,{headers:{Authorization:`Bearer ${e}`}});if(n.status===401){localStorage.removeItem(`ID_TOKEN`),localStorage.removeItem(`TENANT_ID`),t(null);return}let i=await n.json();if(i.ok&&i.memberships)if(i.memberships.length===0)r(!0);else{let e=localStorage.getItem(`TENANT_ID`);(!e||e===`demo`)&&localStorage.setItem(`TENANT_ID`,i.memberships[0].tenantId),r(!1)}else r(!0)}catch(e){console.error(`Failed to check memberships:`,e),r(!0)}finally{a(!1)}}n()},[e,o]),o||i?(0,$.jsx)(`div`,{style:{minHeight:`100vh`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`#f8fafc`},children:(0,$.jsxs)(`div`,{style:{textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:600,color:`#7c3aed`,marginBottom:`16px`},children:`TitleApp`}),(0,$.jsx)(`div`,{style:{fontSize:`16px`,color:`#6b7280`},children:`Loading...`})]})}):e?n?(0,$.jsx)(Pg,{onComplete:()=>r(!1)}):(0,$.jsx)(b_,{}):(0,$.jsx)(Sg,{})}(0,g.createRoot)(document.getElementById(`root`)).render((0,$.jsx)(_.StrictMode,{children:(0,$.jsx)(x_,{})}));