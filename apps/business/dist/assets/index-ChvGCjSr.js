var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,o=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),s=(e,i,o,s)=>{if(i&&typeof i==`object`||typeof i==`function`)for(var c=r(i),l=0,u=c.length,d;l<u;l++)d=c[l],!a.call(e,d)&&d!==o&&t(e,d,{get:(e=>i[e]).bind(null,d),enumerable:!(s=n(i,d))||s.enumerable});return e},c=(n,r,a)=>(a=n==null?{}:e(i(n)),s(r||!n||!n.__esModule?t(a,`default`,{value:n,enumerable:!0}):a,n));(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var l=o((e=>{var t=Symbol.for(`react.transitional.element`),n=Symbol.for(`react.portal`),r=Symbol.for(`react.fragment`),i=Symbol.for(`react.strict_mode`),a=Symbol.for(`react.profiler`),o=Symbol.for(`react.consumer`),s=Symbol.for(`react.context`),c=Symbol.for(`react.forward_ref`),l=Symbol.for(`react.suspense`),u=Symbol.for(`react.memo`),d=Symbol.for(`react.lazy`),f=Symbol.for(`react.activity`),p=Symbol.iterator;function m(e){return typeof e!=`object`||!e?null:(e=p&&e[p]||e[`@@iterator`],typeof e==`function`?e:null)}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,_={};function v(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||h}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if(typeof e!=`object`&&typeof e!=`function`&&e!=null)throw Error(`takes an object of state variables to update or a function which returns an object of state variables.`);this.updater.enqueueSetState(this,e,t,`setState`)},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,`forceUpdate`)};function y(){}y.prototype=v.prototype;function b(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||h}var x=b.prototype=new y;x.constructor=b,g(x,v.prototype),x.isPureReactComponent=!0;var S=Array.isArray;function C(){}var w={H:null,A:null,T:null,S:null},ee=Object.prototype.hasOwnProperty;function te(e,n,r){var i=r.ref;return{$$typeof:t,type:e,key:n,ref:i===void 0?null:i,props:r}}function ne(e,t){return te(e.type,t,e.props)}function T(e){return typeof e==`object`&&!!e&&e.$$typeof===t}function re(e){var t={"=":`=0`,":":`=2`};return`$`+e.replace(/[=:]/g,function(e){return t[e]})}var ie=/\/+/g;function ae(e,t){return typeof e==`object`&&e&&e.key!=null?re(``+e.key):t.toString(36)}function oe(e){switch(e.status){case`fulfilled`:return e.value;case`rejected`:throw e.reason;default:switch(typeof e.status==`string`?e.then(C,C):(e.status=`pending`,e.then(function(t){e.status===`pending`&&(e.status=`fulfilled`,e.value=t)},function(t){e.status===`pending`&&(e.status=`rejected`,e.reason=t)})),e.status){case`fulfilled`:return e.value;case`rejected`:throw e.reason}}throw e}function se(e,r,i,a,o){var s=typeof e;(s===`undefined`||s===`boolean`)&&(e=null);var c=!1;if(e===null)c=!0;else switch(s){case`bigint`:case`string`:case`number`:c=!0;break;case`object`:switch(e.$$typeof){case t:case n:c=!0;break;case d:return c=e._init,se(c(e._payload),r,i,a,o)}}if(c)return o=o(e),c=a===``?`.`+ae(e,0):a,S(o)?(i=``,c!=null&&(i=c.replace(ie,`$&/`)+`/`),se(o,r,i,``,function(e){return e})):o!=null&&(T(o)&&(o=ne(o,i+(o.key==null||e&&e.key===o.key?``:(``+o.key).replace(ie,`$&/`)+`/`)+c)),r.push(o)),1;c=0;var l=a===``?`.`:a+`:`;if(S(e))for(var u=0;u<e.length;u++)a=e[u],s=l+ae(a,u),c+=se(a,r,i,s,o);else if(u=m(e),typeof u==`function`)for(e=u.call(e),u=0;!(a=e.next()).done;)a=a.value,s=l+ae(a,u++),c+=se(a,r,i,s,o);else if(s===`object`){if(typeof e.then==`function`)return se(oe(e),r,i,a,o);throw r=String(e),Error(`Objects are not valid as a React child (found: `+(r===`[object Object]`?`object with keys {`+Object.keys(e).join(`, `)+`}`:r)+`). If you meant to render a collection of children, use an array instead.`)}return c}function ce(e,t,n){if(e==null)return e;var r=[],i=0;return se(e,r,``,``,function(e){return t.call(n,e,i++)}),r}function le(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(t){(e._status===0||e._status===-1)&&(e._status=1,e._result=t)},function(t){(e._status===0||e._status===-1)&&(e._status=2,e._result=t)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var E=typeof reportError==`function`?reportError:function(e){if(typeof window==`object`&&typeof window.ErrorEvent==`function`){var t=new window.ErrorEvent(`error`,{bubbles:!0,cancelable:!0,message:typeof e==`object`&&e&&typeof e.message==`string`?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process==`object`&&typeof process.emit==`function`){process.emit(`uncaughtException`,e);return}console.error(e)},D={map:ce,forEach:function(e,t,n){ce(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ce(e,function(){t++}),t},toArray:function(e){return ce(e,function(e){return e})||[]},only:function(e){if(!T(e))throw Error(`React.Children.only expected to receive a single React element child.`);return e}};e.Activity=f,e.Children=D,e.Component=v,e.Fragment=r,e.Profiler=a,e.PureComponent=b,e.StrictMode=i,e.Suspense=l,e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,e.__COMPILER_RUNTIME={__proto__:null,c:function(e){return w.H.useMemoCache(e)}},e.cache=function(e){return function(){return e.apply(null,arguments)}},e.cacheSignal=function(){return null},e.cloneElement=function(e,t,n){if(e==null)throw Error(`The argument must be a React element, but you passed `+e+`.`);var r=g({},e.props),i=e.key;if(t!=null)for(a in t.key!==void 0&&(i=``+t.key),t)!ee.call(t,a)||a===`key`||a===`__self`||a===`__source`||a===`ref`&&t.ref===void 0||(r[a]=t[a]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var o=Array(a),s=0;s<a;s++)o[s]=arguments[s+2];r.children=o}return te(e.type,i,r)},e.createContext=function(e){return e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:o,_context:e},e},e.createElement=function(e,t,n){var r,i={},a=null;if(t!=null)for(r in t.key!==void 0&&(a=``+t.key),t)ee.call(t,r)&&r!==`key`&&r!==`__self`&&r!==`__source`&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var s=Array(o),c=0;c<o;c++)s[c]=arguments[c+2];i.children=s}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return te(e,a,i)},e.createRef=function(){return{current:null}},e.forwardRef=function(e){return{$$typeof:c,render:e}},e.isValidElement=T,e.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:le}},e.memo=function(e,t){return{$$typeof:u,type:e,compare:t===void 0?null:t}},e.startTransition=function(e){var t=w.T,n={};w.T=n;try{var r=e(),i=w.S;i!==null&&i(n,r),typeof r==`object`&&r&&typeof r.then==`function`&&r.then(C,E)}catch(e){E(e)}finally{t!==null&&n.types!==null&&(t.types=n.types),w.T=t}},e.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},e.use=function(e){return w.H.use(e)},e.useActionState=function(e,t,n){return w.H.useActionState(e,t,n)},e.useCallback=function(e,t){return w.H.useCallback(e,t)},e.useContext=function(e){return w.H.useContext(e)},e.useDebugValue=function(){},e.useDeferredValue=function(e,t){return w.H.useDeferredValue(e,t)},e.useEffect=function(e,t){return w.H.useEffect(e,t)},e.useEffectEvent=function(e){return w.H.useEffectEvent(e)},e.useId=function(){return w.H.useId()},e.useImperativeHandle=function(e,t,n){return w.H.useImperativeHandle(e,t,n)},e.useInsertionEffect=function(e,t){return w.H.useInsertionEffect(e,t)},e.useLayoutEffect=function(e,t){return w.H.useLayoutEffect(e,t)},e.useMemo=function(e,t){return w.H.useMemo(e,t)},e.useOptimistic=function(e,t){return w.H.useOptimistic(e,t)},e.useReducer=function(e,t,n){return w.H.useReducer(e,t,n)},e.useRef=function(e){return w.H.useRef(e)},e.useState=function(e){return w.H.useState(e)},e.useSyncExternalStore=function(e,t,n){return w.H.useSyncExternalStore(e,t,n)},e.useTransition=function(){return w.H.useTransition()},e.version=`19.2.4`})),u=o(((e,t)=>{t.exports=l()})),d=o((e=>{function t(e,t){var n=e.length;e.push(t);a:for(;0<n;){var r=n-1>>>1,a=e[r];if(0<i(a,t))e[r]=t,e[n]=a,n=r;else break a}}function n(e){return e.length===0?null:e[0]}function r(e){if(e.length===0)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;a:for(var r=0,a=e.length,o=a>>>1;r<o;){var s=2*(r+1)-1,c=e[s],l=s+1,u=e[l];if(0>i(c,n))l<a&&0>i(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[s]=n,r=s);else if(l<a&&0>i(u,n))e[r]=u,e[l]=n,r=l;else break a}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return n===0?e.id-t.id:n}if(e.unstable_now=void 0,typeof performance==`object`&&typeof performance.now==`function`){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var c=[],l=[],u=1,d=null,f=3,p=!1,m=!1,h=!1,g=!1,_=typeof setTimeout==`function`?setTimeout:null,v=typeof clearTimeout==`function`?clearTimeout:null,y=typeof setImmediate<`u`?setImmediate:null;function b(e){for(var i=n(l);i!==null;){if(i.callback===null)r(l);else if(i.startTime<=e)r(l),i.sortIndex=i.expirationTime,t(c,i);else break;i=n(l)}}function x(e){if(h=!1,b(e),!m)if(n(c)!==null)m=!0,S||(S=!0,T());else{var t=n(l);t!==null&&ae(x,t.startTime-e)}}var S=!1,C=-1,w=5,ee=-1;function te(){return g?!0:!(e.unstable_now()-ee<w)}function ne(){if(g=!1,S){var t=e.unstable_now();ee=t;var i=!0;try{a:{m=!1,h&&(h=!1,v(C),C=-1),p=!0;var a=f;try{b:{for(b(t),d=n(c);d!==null&&!(d.expirationTime>t&&te());){var o=d.callback;if(typeof o==`function`){d.callback=null,f=d.priorityLevel;var s=o(d.expirationTime<=t);if(t=e.unstable_now(),typeof s==`function`){d.callback=s,b(t),i=!0;break b}d===n(c)&&r(c),b(t)}else r(c);d=n(c)}if(d!==null)i=!0;else{var u=n(l);u!==null&&ae(x,u.startTime-t),i=!1}}break a}finally{d=null,f=a,p=!1}i=void 0}}finally{i?T():S=!1}}}var T;if(typeof y==`function`)T=function(){y(ne)};else if(typeof MessageChannel<`u`){var re=new MessageChannel,ie=re.port2;re.port1.onmessage=ne,T=function(){ie.postMessage(null)}}else T=function(){_(ne,0)};function ae(t,n){C=_(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error(`forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported`):w=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_requestPaint=function(){g=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_scheduleCallback=function(r,i,a){var o=e.unstable_now();switch(typeof a==`object`&&a?(a=a.delay,a=typeof a==`number`&&0<a?o+a:o):a=o,r){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return s=a+s,r={id:u++,callback:i,priorityLevel:r,startTime:a,expirationTime:s,sortIndex:-1},a>o?(r.sortIndex=a,t(l,r),n(c)===null&&r===n(l)&&(h?(v(C),C=-1):h=!0,ae(x,a-o))):(r.sortIndex=s,t(c,r),m||p||(m=!0,S||(S=!0,T()))),r},e.unstable_shouldYield=te,e.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}})),f=o(((e,t)=>{t.exports=d()})),p=o((e=>{var t=u();function n(e){var t=`https://react.dev/errors/`+e;if(1<arguments.length){t+=`?args[]=`+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+=`&args[]=`+encodeURIComponent(arguments[n])}return`Minified React error #`+e+`; visit `+t+` for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`}function r(){}var i={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for(`react.portal`);function o(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:r==null?null:``+r,children:e,containerInfo:t,implementation:n}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){if(e===`font`)return``;if(typeof t==`string`)return t===`use-credentials`?t:``}e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,e.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(n(299));return o(e,t,null,r)},e.flushSync=function(e){var t=s.T,n=i.p;try{if(s.T=null,i.p=2,e)return e()}finally{s.T=t,i.p=n,i.d.f()}},e.preconnect=function(e,t){typeof e==`string`&&(t?(t=t.crossOrigin,t=typeof t==`string`?t===`use-credentials`?t:``:void 0):t=null,i.d.C(e,t))},e.prefetchDNS=function(e){typeof e==`string`&&i.d.D(e)},e.preinit=function(e,t){if(typeof e==`string`&&t&&typeof t.as==`string`){var n=t.as,r=c(n,t.crossOrigin),a=typeof t.integrity==`string`?t.integrity:void 0,o=typeof t.fetchPriority==`string`?t.fetchPriority:void 0;n===`style`?i.d.S(e,typeof t.precedence==`string`?t.precedence:void 0,{crossOrigin:r,integrity:a,fetchPriority:o}):n===`script`&&i.d.X(e,{crossOrigin:r,integrity:a,fetchPriority:o,nonce:typeof t.nonce==`string`?t.nonce:void 0})}},e.preinitModule=function(e,t){if(typeof e==`string`)if(typeof t==`object`&&t){if(t.as==null||t.as===`script`){var n=c(t.as,t.crossOrigin);i.d.M(e,{crossOrigin:n,integrity:typeof t.integrity==`string`?t.integrity:void 0,nonce:typeof t.nonce==`string`?t.nonce:void 0})}}else t??i.d.M(e)},e.preload=function(e,t){if(typeof e==`string`&&typeof t==`object`&&t&&typeof t.as==`string`){var n=t.as,r=c(n,t.crossOrigin);i.d.L(e,n,{crossOrigin:r,integrity:typeof t.integrity==`string`?t.integrity:void 0,nonce:typeof t.nonce==`string`?t.nonce:void 0,type:typeof t.type==`string`?t.type:void 0,fetchPriority:typeof t.fetchPriority==`string`?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy==`string`?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet==`string`?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes==`string`?t.imageSizes:void 0,media:typeof t.media==`string`?t.media:void 0})}},e.preloadModule=function(e,t){if(typeof e==`string`)if(t){var n=c(t.as,t.crossOrigin);i.d.m(e,{as:typeof t.as==`string`&&t.as!==`script`?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity==`string`?t.integrity:void 0})}else i.d.m(e)},e.requestFormReset=function(e){i.d.r(e)},e.unstable_batchedUpdates=function(e,t){return e(t)},e.useFormState=function(e,t,n){return s.H.useFormState(e,t,n)},e.useFormStatus=function(){return s.H.useHostTransitionStatus()},e.version=`19.2.4`})),m=o(((e,t)=>{function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>`u`||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=`function`))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}n(),t.exports=p()})),h=o((e=>{var t=f(),n=u(),r=m();function i(e){var t=`https://react.dev/errors/`+e;if(1<arguments.length){t+=`?args[]=`+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+=`&args[]=`+encodeURIComponent(arguments[n])}return`Minified React error #`+e+`; visit `+t+` for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`}function a(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function o(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function s(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function c(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function l(e){if(o(e)!==e)throw Error(i(188))}function d(e){var t=e.alternate;if(!t){if(t=o(e),t===null)throw Error(i(188));return t===e?e:null}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var s=a.alternate;if(s===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===n)return l(a),e;if(s===r)return l(a),t;s=s.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=s;else{for(var c=!1,u=a.child;u;){if(u===n){c=!0,n=a,r=s;break}if(u===r){c=!0,r=a,n=s;break}u=u.sibling}if(!c){for(u=s.child;u;){if(u===n){c=!0,n=s,r=a;break}if(u===r){c=!0,r=s,n=a;break}u=u.sibling}if(!c)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(n.tag!==3)throw Error(i(188));return n.stateNode.current===n?e:t}function p(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=p(e),t!==null)return t;e=e.sibling}return null}var h=Object.assign,g=Symbol.for(`react.element`),_=Symbol.for(`react.transitional.element`),v=Symbol.for(`react.portal`),y=Symbol.for(`react.fragment`),b=Symbol.for(`react.strict_mode`),x=Symbol.for(`react.profiler`),S=Symbol.for(`react.consumer`),C=Symbol.for(`react.context`),w=Symbol.for(`react.forward_ref`),ee=Symbol.for(`react.suspense`),te=Symbol.for(`react.suspense_list`),ne=Symbol.for(`react.memo`),T=Symbol.for(`react.lazy`),re=Symbol.for(`react.activity`),ie=Symbol.for(`react.memo_cache_sentinel`),ae=Symbol.iterator;function oe(e){return typeof e!=`object`||!e?null:(e=ae&&e[ae]||e[`@@iterator`],typeof e==`function`?e:null)}var se=Symbol.for(`react.client.reference`);function ce(e){if(e==null)return null;if(typeof e==`function`)return e.$$typeof===se?null:e.displayName||e.name||null;if(typeof e==`string`)return e;switch(e){case y:return`Fragment`;case x:return`Profiler`;case b:return`StrictMode`;case ee:return`Suspense`;case te:return`SuspenseList`;case re:return`Activity`}if(typeof e==`object`)switch(e.$$typeof){case v:return`Portal`;case C:return e.displayName||`Context`;case S:return(e._context.displayName||`Context`)+`.Consumer`;case w:var t=e.render;return e=e.displayName,e||=(e=t.displayName||t.name||``,e===``?`ForwardRef`:`ForwardRef(`+e+`)`),e;case ne:return t=e.displayName||null,t===null?ce(e.type)||`Memo`:t;case T:t=e._payload,e=e._init;try{return ce(e(t))}catch{}}return null}var le=Array.isArray,E=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue={pending:!1,data:null,method:null,action:null},de=[],fe=-1;function pe(e){return{current:e}}function me(e){0>fe||(e.current=de[fe],de[fe]=null,fe--)}function O(e,t){fe++,de[fe]=e.current,e.current=t}var he=pe(null),ge=pe(null),_e=pe(null),ve=pe(null);function ye(e,t){switch(O(_e,t),O(ge,e),O(he,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Hd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Hd(t),e=Ud(t,e);else switch(e){case`svg`:e=1;break;case`math`:e=2;break;default:e=0}}me(he),O(he,e)}function be(){me(he),me(ge),me(_e)}function xe(e){e.memoizedState!==null&&O(ve,e);var t=he.current,n=Ud(t,e.type);t!==n&&(O(ge,e),O(he,n))}function Se(e){ge.current===e&&(me(he),me(ge)),ve.current===e&&(me(ve),$f._currentValue=ue)}var Ce,we;function Te(e){if(Ce===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);Ce=t&&t[1]||``,we=-1<e.stack.indexOf(`
    at`)?` (<anonymous>)`:-1<e.stack.indexOf(`@`)?`@unknown:0:0`:``}return`
`+Ce+e+we}var Ee=!1;function De(e,t){if(!e||Ee)return``;Ee=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,`props`,{set:function(){throw Error()}}),typeof Reflect==`object`&&Reflect.construct){try{Reflect.construct(n,[])}catch(e){var r=e}Reflect.construct(e,[],n)}else{try{n.call()}catch(e){r=e}e.call(n.prototype)}}else{try{throw Error()}catch(e){r=e}(n=e())&&typeof n.catch==`function`&&n.catch(function(){})}}catch(e){if(e&&r&&typeof e.stack==`string`)return[e.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName=`DetermineComponentFrameRoot`;var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,`name`);i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,`name`,{value:`DetermineComponentFrameRoot`});var a=r.DetermineComponentFrameRoot(),o=a[0],s=a[1];if(o&&s){var c=o.split(`
`),l=s.split(`
`);for(i=r=0;r<c.length&&!c[r].includes(`DetermineComponentFrameRoot`);)r++;for(;i<l.length&&!l[i].includes(`DetermineComponentFrameRoot`);)i++;if(r===c.length||i===l.length)for(r=c.length-1,i=l.length-1;1<=r&&0<=i&&c[r]!==l[i];)i--;for(;1<=r&&0<=i;r--,i--)if(c[r]!==l[i]){if(r!==1||i!==1)do if(r--,i--,0>i||c[r]!==l[i]){var u=`
`+c[r].replace(` at new `,` at `);return e.displayName&&u.includes(`<anonymous>`)&&(u=u.replace(`<anonymous>`,e.displayName)),u}while(1<=r&&0<=i);break}}}finally{Ee=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:``)?Te(n):``}function Oe(e,t){switch(e.tag){case 26:case 27:case 5:return Te(e.type);case 16:return Te(`Lazy`);case 13:return e.child!==t&&t!==null?Te(`Suspense Fallback`):Te(`Suspense`);case 19:return Te(`SuspenseList`);case 0:case 15:return De(e.type,!1);case 11:return De(e.type.render,!1);case 1:return De(e.type,!0);case 31:return Te(`Activity`);default:return``}}function ke(e){try{var t=``,n=null;do t+=Oe(e,n),n=e,e=e.return;while(e);return t}catch(e){return`
Error generating stack: `+e.message+`
`+e.stack}}var Ae=Object.prototype.hasOwnProperty,je=t.unstable_scheduleCallback,Me=t.unstable_cancelCallback,Ne=t.unstable_shouldYield,Pe=t.unstable_requestPaint,Fe=t.unstable_now,Ie=t.unstable_getCurrentPriorityLevel,Le=t.unstable_ImmediatePriority,Re=t.unstable_UserBlockingPriority,ze=t.unstable_NormalPriority,Be=t.unstable_LowPriority,Ve=t.unstable_IdlePriority,He=t.log,Ue=t.unstable_setDisableYieldValue,We=null,Ge=null;function Ke(e){if(typeof He==`function`&&Ue(e),Ge&&typeof Ge.setStrictMode==`function`)try{Ge.setStrictMode(We,e)}catch{}}var qe=Math.clz32?Math.clz32:Ye,k=Math.log,Je=Math.LN2;function Ye(e){return e>>>=0,e===0?32:31-(k(e)/Je|0)|0}var Xe=256,Ze=262144,Qe=4194304;function $e(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function et(e,t,n){var r=e.pendingLanes;if(r===0)return 0;var i=0,a=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var s=r&134217727;return s===0?(s=r&~a,s===0?o===0?n||(n=r&~e,n!==0&&(i=$e(n))):i=$e(o):i=$e(s)):(r=s&~a,r===0?(o&=s,o===0?n||(n=s&~e,n!==0&&(i=$e(n))):i=$e(o)):i=$e(r)),i===0?0:t!==0&&t!==i&&(t&a)===0&&(a=i&-i,n=t&-t,a>=n||a===32&&n&4194048)?t:i}function tt(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function nt(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rt(){var e=Qe;return Qe<<=1,!(Qe&62914560)&&(Qe=4194304),e}function it(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function at(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ot(e,t,n,r,i,a){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,c=e.expirationTimes,l=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-qe(n),d=1<<u;s[u]=0,c[u]=-1;var f=l[u];if(f!==null)for(l[u]=null,u=0;u<f.length;u++){var p=f[u];p!==null&&(p.lane&=-536870913)}n&=~d}r!==0&&st(e,r,0),a!==0&&i===0&&e.tag!==0&&(e.suspendedLanes|=a&~(o&~t))}function st(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-qe(t);e.entangledLanes|=t,e.entanglements[r]=e.entanglements[r]|1073741824|n&261930}function ct(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-qe(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function lt(e,t){var n=t&-t;return n=n&42?1:ut(n),(n&(e.suspendedLanes|t))===0?n:0}function ut(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function dt(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function ft(){var e=D.p;return e===0?(e=window.event,e===void 0?32:hp(e.type)):e}function pt(e,t){var n=D.p;try{return D.p=e,t()}finally{D.p=n}}var mt=Math.random().toString(36).slice(2),ht=`__reactFiber$`+mt,gt=`__reactProps$`+mt,_t=`__reactContainer$`+mt,vt=`__reactEvents$`+mt,yt=`__reactListeners$`+mt,bt=`__reactHandles$`+mt,xt=`__reactResources$`+mt,St=`__reactMarker$`+mt;function Ct(e){delete e[ht],delete e[gt],delete e[vt],delete e[yt],delete e[bt]}function wt(e){var t=e[ht];if(t)return t;for(var n=e.parentNode;n;){if(t=n[_t]||n[ht]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=ff(e);e!==null;){if(n=e[ht])return n;e=ff(e)}return t}e=n,n=e.parentNode}return null}function Tt(e){if(e=e[ht]||e[_t]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Et(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(i(33))}function Dt(e){var t=e[xt];return t||=e[xt]={hoistableStyles:new Map,hoistableScripts:new Map},t}function Ot(e){e[St]=!0}var kt=new Set,At={};function jt(e,t){Mt(e,t),Mt(e+`Capture`,t)}function Mt(e,t){for(At[e]=t,e=0;e<t.length;e++)kt.add(t[e])}var Nt=RegExp(`^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$`),Pt={},Ft={};function It(e){return Ae.call(Ft,e)?!0:Ae.call(Pt,e)?!1:Nt.test(e)?Ft[e]=!0:(Pt[e]=!0,!1)}function Lt(e,t,n){if(It(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case`undefined`:case`function`:case`symbol`:e.removeAttribute(t);return;case`boolean`:var r=t.toLowerCase().slice(0,5);if(r!==`data-`&&r!==`aria-`){e.removeAttribute(t);return}}e.setAttribute(t,``+n)}}function Rt(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case`undefined`:case`function`:case`symbol`:case`boolean`:e.removeAttribute(t);return}e.setAttribute(t,``+n)}}function zt(e,t,n,r){if(r===null)e.removeAttribute(n);else{switch(typeof r){case`undefined`:case`function`:case`symbol`:case`boolean`:e.removeAttribute(n);return}e.setAttributeNS(t,n,``+r)}}function A(e){switch(typeof e){case`bigint`:case`boolean`:case`number`:case`string`:case`undefined`:return e;case`object`:return e;default:return``}}function Bt(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()===`input`&&(t===`checkbox`||t===`radio`)}function Vt(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&r!==void 0&&typeof r.get==`function`&&typeof r.set==`function`){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=``+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=``+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ht(e){if(!e._valueTracker){var t=Bt(e)?`checked`:`value`;e._valueTracker=Vt(e,t,``+e[t])}}function Ut(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r=``;return e&&(r=Bt(e)?e.checked?`true`:`false`:e.value),e=r,e===n?!1:(t.setValue(e),!0)}function Wt(e){if(e||=typeof document<`u`?document:void 0,e===void 0)return null;try{return e.activeElement||e.body}catch{return e.body}}var Gt=/[\n"\\]/g;function Kt(e){return e.replace(Gt,function(e){return`\\`+e.charCodeAt(0).toString(16)+` `})}function qt(e,t,n,r,i,a,o,s){e.name=``,o!=null&&typeof o!=`function`&&typeof o!=`symbol`&&typeof o!=`boolean`?e.type=o:e.removeAttribute(`type`),t==null?o!==`submit`&&o!==`reset`||e.removeAttribute(`value`):o===`number`?(t===0&&e.value===``||e.value!=t)&&(e.value=``+A(t)):e.value!==``+A(t)&&(e.value=``+A(t)),t==null?n==null?r!=null&&e.removeAttribute(`value`):Yt(e,o,A(n)):Yt(e,o,A(t)),i==null&&a!=null&&(e.defaultChecked=!!a),i!=null&&(e.checked=i&&typeof i!=`function`&&typeof i!=`symbol`),s!=null&&typeof s!=`function`&&typeof s!=`symbol`&&typeof s!=`boolean`?e.name=``+A(s):e.removeAttribute(`name`)}function Jt(e,t,n,r,i,a,o,s){if(a!=null&&typeof a!=`function`&&typeof a!=`symbol`&&typeof a!=`boolean`&&(e.type=a),t!=null||n!=null){if(!(a!==`submit`&&a!==`reset`||t!=null)){Ht(e);return}n=n==null?``:``+A(n),t=t==null?n:``+A(t),s||t===e.value||(e.value=t),e.defaultValue=t}r??=i,r=typeof r!=`function`&&typeof r!=`symbol`&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,o!=null&&typeof o!=`function`&&typeof o!=`symbol`&&typeof o!=`boolean`&&(e.name=o),Ht(e)}function Yt(e,t,n){t===`number`&&Wt(e.ownerDocument)===e||e.defaultValue===``+n||(e.defaultValue=``+n)}function Xt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t[`$`+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty(`$`+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=``+A(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Zt(e,t,n){if(t!=null&&(t=``+A(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n==null?``:``+A(n)}function Qt(e,t,n,r){if(t==null){if(r!=null){if(n!=null)throw Error(i(92));if(le(r)){if(1<r.length)throw Error(i(93));r=r[0]}n=r}n??=``,t=n}n=A(t),e.defaultValue=n,r=e.textContent,r===n&&r!==``&&r!==null&&(e.value=r),Ht(e)}function $t(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var en=new Set(`animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp`.split(` `));function tn(e,t,n){var r=t.indexOf(`--`)===0;n==null||typeof n==`boolean`||n===``?r?e.setProperty(t,``):t===`float`?e.cssFloat=``:e[t]=``:r?e.setProperty(t,n):typeof n!=`number`||n===0||en.has(t)?t===`float`?e.cssFloat=n:e[t]=(``+n).trim():e[t]=n+`px`}function nn(e,t,n){if(t!=null&&typeof t!=`object`)throw Error(i(62));if(e=e.style,n!=null){for(var r in n)!n.hasOwnProperty(r)||t!=null&&t.hasOwnProperty(r)||(r.indexOf(`--`)===0?e.setProperty(r,``):r===`float`?e.cssFloat=``:e[r]=``);for(var a in t)r=t[a],t.hasOwnProperty(a)&&n[a]!==r&&tn(e,a,r)}else for(var o in t)t.hasOwnProperty(o)&&tn(e,o,t[o])}function rn(e){if(e.indexOf(`-`)===-1)return!1;switch(e){case`annotation-xml`:case`color-profile`:case`font-face`:case`font-face-src`:case`font-face-uri`:case`font-face-format`:case`font-face-name`:case`missing-glyph`:return!1;default:return!0}}var an=new Map([[`acceptCharset`,`accept-charset`],[`htmlFor`,`for`],[`httpEquiv`,`http-equiv`],[`crossOrigin`,`crossorigin`],[`accentHeight`,`accent-height`],[`alignmentBaseline`,`alignment-baseline`],[`arabicForm`,`arabic-form`],[`baselineShift`,`baseline-shift`],[`capHeight`,`cap-height`],[`clipPath`,`clip-path`],[`clipRule`,`clip-rule`],[`colorInterpolation`,`color-interpolation`],[`colorInterpolationFilters`,`color-interpolation-filters`],[`colorProfile`,`color-profile`],[`colorRendering`,`color-rendering`],[`dominantBaseline`,`dominant-baseline`],[`enableBackground`,`enable-background`],[`fillOpacity`,`fill-opacity`],[`fillRule`,`fill-rule`],[`floodColor`,`flood-color`],[`floodOpacity`,`flood-opacity`],[`fontFamily`,`font-family`],[`fontSize`,`font-size`],[`fontSizeAdjust`,`font-size-adjust`],[`fontStretch`,`font-stretch`],[`fontStyle`,`font-style`],[`fontVariant`,`font-variant`],[`fontWeight`,`font-weight`],[`glyphName`,`glyph-name`],[`glyphOrientationHorizontal`,`glyph-orientation-horizontal`],[`glyphOrientationVertical`,`glyph-orientation-vertical`],[`horizAdvX`,`horiz-adv-x`],[`horizOriginX`,`horiz-origin-x`],[`imageRendering`,`image-rendering`],[`letterSpacing`,`letter-spacing`],[`lightingColor`,`lighting-color`],[`markerEnd`,`marker-end`],[`markerMid`,`marker-mid`],[`markerStart`,`marker-start`],[`overlinePosition`,`overline-position`],[`overlineThickness`,`overline-thickness`],[`paintOrder`,`paint-order`],[`panose-1`,`panose-1`],[`pointerEvents`,`pointer-events`],[`renderingIntent`,`rendering-intent`],[`shapeRendering`,`shape-rendering`],[`stopColor`,`stop-color`],[`stopOpacity`,`stop-opacity`],[`strikethroughPosition`,`strikethrough-position`],[`strikethroughThickness`,`strikethrough-thickness`],[`strokeDasharray`,`stroke-dasharray`],[`strokeDashoffset`,`stroke-dashoffset`],[`strokeLinecap`,`stroke-linecap`],[`strokeLinejoin`,`stroke-linejoin`],[`strokeMiterlimit`,`stroke-miterlimit`],[`strokeOpacity`,`stroke-opacity`],[`strokeWidth`,`stroke-width`],[`textAnchor`,`text-anchor`],[`textDecoration`,`text-decoration`],[`textRendering`,`text-rendering`],[`transformOrigin`,`transform-origin`],[`underlinePosition`,`underline-position`],[`underlineThickness`,`underline-thickness`],[`unicodeBidi`,`unicode-bidi`],[`unicodeRange`,`unicode-range`],[`unitsPerEm`,`units-per-em`],[`vAlphabetic`,`v-alphabetic`],[`vHanging`,`v-hanging`],[`vIdeographic`,`v-ideographic`],[`vMathematical`,`v-mathematical`],[`vectorEffect`,`vector-effect`],[`vertAdvY`,`vert-adv-y`],[`vertOriginX`,`vert-origin-x`],[`vertOriginY`,`vert-origin-y`],[`wordSpacing`,`word-spacing`],[`writingMode`,`writing-mode`],[`xmlnsXlink`,`xmlns:xlink`],[`xHeight`,`x-height`]]),on=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function sn(e){return on.test(``+e)?`javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')`:e}function cn(){}var ln=null;function un(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var dn=null,fn=null;function pn(e){var t=Tt(e);if(t&&(e=t.stateNode)){var n=e[gt]||null;a:switch(e=t.stateNode,t.type){case`input`:if(qt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type===`radio`&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll(`input[name="`+Kt(``+t)+`"][type="radio"]`),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=r[gt]||null;if(!a)throw Error(i(90));qt(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<n.length;t++)r=n[t],r.form===e.form&&Ut(r)}break a;case`textarea`:Zt(e,n.value,n.defaultValue);break a;case`select`:t=n.value,t!=null&&Xt(e,!!n.multiple,t,!1)}}}var mn=!1;function hn(e,t,n){if(mn)return e(t,n);mn=!0;try{return e(t)}finally{if(mn=!1,(dn!==null||fn!==null)&&(Su(),dn&&(t=dn,e=fn,fn=dn=null,pn(t),e)))for(t=0;t<e.length;t++)pn(e[t])}}function gn(e,t){var n=e.stateNode;if(n===null)return null;var r=n[gt]||null;if(r===null)return null;n=r[t];a:switch(t){case`onClick`:case`onClickCapture`:case`onDoubleClick`:case`onDoubleClickCapture`:case`onMouseDown`:case`onMouseDownCapture`:case`onMouseMove`:case`onMouseMoveCapture`:case`onMouseUp`:case`onMouseUpCapture`:case`onMouseEnter`:(r=!r.disabled)||(e=e.type,r=!(e===`button`||e===`input`||e===`select`||e===`textarea`)),e=!r;break a;default:e=!1}if(e)return null;if(n&&typeof n!=`function`)throw Error(i(231,t,typeof n));return n}var _n=!(typeof window>`u`||window.document===void 0||window.document.createElement===void 0),vn=!1;if(_n)try{var yn={};Object.defineProperty(yn,`passive`,{get:function(){vn=!0}}),window.addEventListener(`test`,yn,yn),window.removeEventListener(`test`,yn,yn)}catch{vn=!1}var bn=null,xn=null,Sn=null;function Cn(){if(Sn)return Sn;var e,t=xn,n=t.length,r,i=`value`in bn?bn.value:bn.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[a-r];r++);return Sn=i.slice(e,1<r?1-r:void 0)}function wn(e){var t=e.keyCode;return`charCode`in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Tn(){return!0}function En(){return!1}function Dn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented==null?!1===i.returnValue:i.defaultPrevented)?Tn:En,this.isPropagationStopped=En,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!=`unknown`&&(e.returnValue=!1),this.isDefaultPrevented=Tn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!=`unknown`&&(e.cancelBubble=!0),this.isPropagationStopped=Tn)},persist:function(){},isPersistent:Tn}),t}var On={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kn=Dn(On),An=h({},On,{view:0,detail:0}),jn=Dn(An),Mn,Nn,Pn,Fn=h({},An,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gn,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return`movementX`in e?e.movementX:(e!==Pn&&(Pn&&e.type===`mousemove`?(Mn=e.screenX-Pn.screenX,Nn=e.screenY-Pn.screenY):Nn=Mn=0,Pn=e),Mn)},movementY:function(e){return`movementY`in e?e.movementY:Nn}}),In=Dn(Fn),Ln=Dn(h({},Fn,{dataTransfer:0})),Rn=Dn(h({},An,{relatedTarget:0})),zn=Dn(h({},On,{animationName:0,elapsedTime:0,pseudoElement:0})),Bn=Dn(h({},On,{clipboardData:function(e){return`clipboardData`in e?e.clipboardData:window.clipboardData}})),Vn=Dn(h({},On,{data:0})),Hn={Esc:`Escape`,Spacebar:` `,Left:`ArrowLeft`,Up:`ArrowUp`,Right:`ArrowRight`,Down:`ArrowDown`,Del:`Delete`,Win:`OS`,Menu:`ContextMenu`,Apps:`ContextMenu`,Scroll:`ScrollLock`,MozPrintableKey:`Unidentified`},Un={8:`Backspace`,9:`Tab`,12:`Clear`,13:`Enter`,16:`Shift`,17:`Control`,18:`Alt`,19:`Pause`,20:`CapsLock`,27:`Escape`,32:` `,33:`PageUp`,34:`PageDown`,35:`End`,36:`Home`,37:`ArrowLeft`,38:`ArrowUp`,39:`ArrowRight`,40:`ArrowDown`,45:`Insert`,46:`Delete`,112:`F1`,113:`F2`,114:`F3`,115:`F4`,116:`F5`,117:`F6`,118:`F7`,119:`F8`,120:`F9`,121:`F10`,122:`F11`,123:`F12`,144:`NumLock`,145:`ScrollLock`,224:`Meta`},Wn={Alt:`altKey`,Control:`ctrlKey`,Meta:`metaKey`,Shift:`shiftKey`};function j(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Wn[e])?!!t[e]:!1}function Gn(){return j}var Kn=Dn(h({},An,{key:function(e){if(e.key){var t=Hn[e.key]||e.key;if(t!==`Unidentified`)return t}return e.type===`keypress`?(e=wn(e),e===13?`Enter`:String.fromCharCode(e)):e.type===`keydown`||e.type===`keyup`?Un[e.keyCode]||`Unidentified`:``},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gn,charCode:function(e){return e.type===`keypress`?wn(e):0},keyCode:function(e){return e.type===`keydown`||e.type===`keyup`?e.keyCode:0},which:function(e){return e.type===`keypress`?wn(e):e.type===`keydown`||e.type===`keyup`?e.keyCode:0}})),qn=Dn(h({},Fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Jn=Dn(h({},An,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gn})),Yn=Dn(h({},On,{propertyName:0,elapsedTime:0,pseudoElement:0})),Xn=Dn(h({},Fn,{deltaX:function(e){return`deltaX`in e?e.deltaX:`wheelDeltaX`in e?-e.wheelDeltaX:0},deltaY:function(e){return`deltaY`in e?e.deltaY:`wheelDeltaY`in e?-e.wheelDeltaY:`wheelDelta`in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Zn=Dn(h({},On,{newState:0,oldState:0})),Qn=[9,13,27,32],$n=_n&&`CompositionEvent`in window,er=null;_n&&`documentMode`in document&&(er=document.documentMode);var tr=_n&&`TextEvent`in window&&!er,nr=_n&&(!$n||er&&8<er&&11>=er),rr=` `,ir=!1;function ar(e,t){switch(e){case`keyup`:return Qn.indexOf(t.keyCode)!==-1;case`keydown`:return t.keyCode!==229;case`keypress`:case`mousedown`:case`focusout`:return!0;default:return!1}}function or(e){return e=e.detail,typeof e==`object`&&`data`in e?e.data:null}var sr=!1;function cr(e,t){switch(e){case`compositionend`:return or(t);case`keypress`:return t.which===32?(ir=!0,rr):null;case`textInput`:return e=t.data,e===rr&&ir?null:e;default:return null}}function lr(e,t){if(sr)return e===`compositionend`||!$n&&ar(e,t)?(e=Cn(),Sn=xn=bn=null,sr=!1,e):null;switch(e){case`paste`:return null;case`keypress`:if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case`compositionend`:return nr&&t.locale!==`ko`?null:t.data;default:return null}}var ur={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t===`input`?!!ur[e.type]:t===`textarea`}function fr(e,t,n,r){dn?fn?fn.push(r):fn=[r]:dn=r,t=Dd(t,`onChange`),0<t.length&&(n=new kn(`onChange`,`change`,null,n,r),e.push({event:n,listeners:t}))}var pr=null,mr=null;function hr(e){xd(e,0)}function gr(e){if(Ut(Et(e)))return e}function _r(e,t){if(e===`change`)return t}var vr=!1;if(_n){var yr;if(_n){var br=`oninput`in document;if(!br){var xr=document.createElement(`div`);xr.setAttribute(`oninput`,`return;`),br=typeof xr.oninput==`function`}yr=br}else yr=!1;vr=yr&&(!document.documentMode||9<document.documentMode)}function Sr(){pr&&(pr.detachEvent(`onpropertychange`,Cr),mr=pr=null)}function Cr(e){if(e.propertyName===`value`&&gr(mr)){var t=[];fr(t,mr,e,un(e)),hn(hr,t)}}function wr(e,t,n){e===`focusin`?(Sr(),pr=t,mr=n,pr.attachEvent(`onpropertychange`,Cr)):e===`focusout`&&Sr()}function Tr(e){if(e===`selectionchange`||e===`keyup`||e===`keydown`)return gr(mr)}function Er(e,t){if(e===`click`)return gr(t)}function Dr(e,t){if(e===`input`||e===`change`)return gr(t)}function Or(e,t){return e===t&&(e!==0||1/e==1/t)||e!==e&&t!==t}var kr=typeof Object.is==`function`?Object.is:Or;function Ar(e,t){if(kr(e,t))return!0;if(typeof e!=`object`||!e||typeof t!=`object`||!t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ae.call(t,i)||!kr(e[i],t[i]))return!1}return!0}function jr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Mr(e,t){var n=jr(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}a:{for(;n;){if(n.nextSibling){n=n.nextSibling;break a}n=n.parentNode}n=void 0}n=jr(n)}}function Nr(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Nr(e,t.parentNode):`contains`in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Pr(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Wt(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href==`string`}catch{n=!1}if(n)e=t.contentWindow;else break;t=Wt(e.document)}return t}function Fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t===`input`&&(e.type===`text`||e.type===`search`||e.type===`tel`||e.type===`url`||e.type===`password`)||t===`textarea`||e.contentEditable===`true`)}var Ir=_n&&`documentMode`in document&&11>=document.documentMode,Lr=null,Rr=null,zr=null,Br=!1;function Vr(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Br||Lr==null||Lr!==Wt(r)||(r=Lr,`selectionStart`in r&&Fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),zr&&Ar(zr,r)||(zr=r,r=Dd(Rr,`onSelect`),0<r.length&&(t=new kn(`onSelect`,`select`,null,t,n),e.push({event:t,listeners:r}),t.target=Lr)))}function Hr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n[`Webkit`+e]=`webkit`+t,n[`Moz`+e]=`moz`+t,n}var Ur={animationend:Hr(`Animation`,`AnimationEnd`),animationiteration:Hr(`Animation`,`AnimationIteration`),animationstart:Hr(`Animation`,`AnimationStart`),transitionrun:Hr(`Transition`,`TransitionRun`),transitionstart:Hr(`Transition`,`TransitionStart`),transitioncancel:Hr(`Transition`,`TransitionCancel`),transitionend:Hr(`Transition`,`TransitionEnd`)},Wr={},Gr={};_n&&(Gr=document.createElement(`div`).style,`AnimationEvent`in window||(delete Ur.animationend.animation,delete Ur.animationiteration.animation,delete Ur.animationstart.animation),`TransitionEvent`in window||delete Ur.transitionend.transition);function Kr(e){if(Wr[e])return Wr[e];if(!Ur[e])return e;var t=Ur[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Gr)return Wr[e]=t[n];return e}var qr=Kr(`animationend`),Jr=Kr(`animationiteration`),Yr=Kr(`animationstart`),Xr=Kr(`transitionrun`),Zr=Kr(`transitionstart`),Qr=Kr(`transitioncancel`),$r=Kr(`transitionend`),ei=new Map,ti=`abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel`.split(` `);ti.push(`scrollEnd`);function ni(e,t){ei.set(e,t),jt(t,[e])}var ri=typeof reportError==`function`?reportError:function(e){if(typeof window==`object`&&typeof window.ErrorEvent==`function`){var t=new window.ErrorEvent(`error`,{bubbles:!0,cancelable:!0,message:typeof e==`object`&&e&&typeof e.message==`string`?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process==`object`&&typeof process.emit==`function`){process.emit(`uncaughtException`,e);return}console.error(e)},ii=[],ai=0,oi=0;function si(){for(var e=ai,t=oi=ai=0;t<e;){var n=ii[t];ii[t++]=null;var r=ii[t];ii[t++]=null;var i=ii[t];ii[t++]=null;var a=ii[t];if(ii[t++]=null,r!==null&&i!==null){var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}a!==0&&di(n,i,a)}}function ci(e,t,n,r){ii[ai++]=e,ii[ai++]=t,ii[ai++]=n,ii[ai++]=r,oi|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function li(e,t,n,r){return ci(e,t,n,r),fi(e)}function ui(e,t){return ci(e,null,null,t),fi(e)}function di(e,t,n){e.lanes|=n;var r=e.alternate;r!==null&&(r.lanes|=n);for(var i=!1,a=e.return;a!==null;)a.childLanes|=n,r=a.alternate,r!==null&&(r.childLanes|=n),a.tag===22&&(e=a.stateNode,e===null||e._visibility&1||(i=!0)),e=a,a=a.return;return e.tag===3?(a=e.stateNode,i&&t!==null&&(i=31-qe(n),e=a.hiddenUpdates,r=e[i],r===null?e[i]=[t]:r.push(t),t.lane=n|536870912),a):null}function fi(e){if(50<pu)throw pu=0,mu=null,Error(i(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var pi={};function mi(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hi(e,t,n,r){return new mi(e,t,n,r)}function gi(e){return e=e.prototype,!(!e||!e.isReactComponent)}function _i(e,t){var n=e.alternate;return n===null?(n=hi(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function vi(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function yi(e,t,n,r,a,o){var s=0;if(r=e,typeof e==`function`)gi(e)&&(s=1);else if(typeof e==`string`)s=Wf(e,n,he.current)?26:e===`html`||e===`head`||e===`body`?27:5;else a:switch(e){case re:return e=hi(31,n,t,a),e.elementType=re,e.lanes=o,e;case y:return bi(n.children,a,o,t);case b:s=8,a|=24;break;case x:return e=hi(12,n,t,a|2),e.elementType=x,e.lanes=o,e;case ee:return e=hi(13,n,t,a),e.elementType=ee,e.lanes=o,e;case te:return e=hi(19,n,t,a),e.elementType=te,e.lanes=o,e;default:if(typeof e==`object`&&e)switch(e.$$typeof){case C:s=10;break a;case S:s=9;break a;case w:s=11;break a;case ne:s=14;break a;case T:s=16,r=null;break a}s=29,n=Error(i(130,e===null?`null`:typeof e,``)),r=null}return t=hi(s,n,t,a),t.elementType=e,t.type=r,t.lanes=o,t}function bi(e,t,n,r){return e=hi(7,e,r,t),e.lanes=n,e}function xi(e,t,n){return e=hi(6,e,null,t),e.lanes=n,e}function Si(e){var t=hi(18,null,null,0);return t.stateNode=e,t}function Ci(e,t,n){return t=hi(4,e.children===null?[]:e.children,e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var wi=new WeakMap;function Ti(e,t){if(typeof e==`object`&&e){var n=wi.get(e);return n===void 0?(t={value:e,source:t,stack:ke(t)},wi.set(e,t),t):n}return{value:e,source:t,stack:ke(t)}}var Ei=[],Di=0,Oi=null,ki=0,Ai=[],ji=0,Mi=null,Ni=1,Pi=``;function Fi(e,t){Ei[Di++]=ki,Ei[Di++]=Oi,Oi=e,ki=t}function Ii(e,t,n){Ai[ji++]=Ni,Ai[ji++]=Pi,Ai[ji++]=Mi,Mi=e;var r=Ni;e=Pi;var i=32-qe(r)-1;r&=~(1<<i),n+=1;var a=32-qe(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ni=1<<32-qe(t)+i|n<<i|r,Pi=a+e}else Ni=1<<a|n<<i|r,Pi=e}function Li(e){e.return!==null&&(Fi(e,1),Ii(e,1,0))}function Ri(e){for(;e===Oi;)Oi=Ei[--Di],Ei[Di]=null,ki=Ei[--Di],Ei[Di]=null;for(;e===Mi;)Mi=Ai[--ji],Ai[ji]=null,Pi=Ai[--ji],Ai[ji]=null,Ni=Ai[--ji],Ai[ji]=null}function zi(e,t){Ai[ji++]=Ni,Ai[ji++]=Pi,Ai[ji++]=Mi,Ni=t.id,Pi=t.overflow,Mi=e}var Bi=null,Vi=null,M=!1,Hi=null,Ui=!1,Wi=Error(i(519));function Gi(e){throw Zi(Ti(Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?`text`:`HTML`,``)),e)),Wi}function Ki(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[ht]=e,t[gt]=r,n){case`dialog`:X(`cancel`,t),X(`close`,t);break;case`iframe`:case`object`:case`embed`:X(`load`,t);break;case`video`:case`audio`:for(n=0;n<yd.length;n++)X(yd[n],t);break;case`source`:X(`error`,t);break;case`img`:case`image`:case`link`:X(`error`,t),X(`load`,t);break;case`details`:X(`toggle`,t);break;case`input`:X(`invalid`,t),Jt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case`select`:X(`invalid`,t);break;case`textarea`:X(`invalid`,t),Qt(t,r.value,r.defaultValue,r.children)}n=r.children,typeof n!=`string`&&typeof n!=`number`&&typeof n!=`bigint`||t.textContent===``+n||!0===r.suppressHydrationWarning||Nd(t.textContent,n)?(r.popover!=null&&(X(`beforetoggle`,t),X(`toggle`,t)),r.onScroll!=null&&X(`scroll`,t),r.onScrollEnd!=null&&X(`scrollend`,t),r.onClick!=null&&(t.onclick=cn),t=!0):t=!1,t||Gi(e,!0)}function qi(e){for(Bi=e.return;Bi;)switch(Bi.tag){case 5:case 31:case 13:Ui=!1;return;case 27:case 3:Ui=!0;return;default:Bi=Bi.return}}function Ji(e){if(e!==Bi)return!1;if(!M)return qi(e),M=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!==`form`&&n!==`button`)||Wd(e.type,e.memoizedProps)),n=!n),n&&Vi&&Gi(e),qi(e),t===13){if(e=e.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(i(317));Vi=df(e)}else if(t===31){if(e=e.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(i(317));Vi=df(e)}else t===27?(t=Vi,Qd(e.type)?(e=uf,uf=null,Vi=e):Vi=t):Vi=Bi?lf(e.stateNode.nextSibling):null;return!0}function Yi(){Vi=Bi=null,M=!1}function Xi(){var e=Hi;return e!==null&&($l===null?$l=e:$l.push.apply($l,e),Hi=null),e}function Zi(e){Hi===null?Hi=[e]:Hi.push(e)}var Qi=pe(null),$i=null,ea=null;function ta(e,t,n){O(Qi,t._currentValue),t._currentValue=n}function na(e){e._currentValue=Qi.current,me(Qi)}function ra(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)===t?r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t):(e.childLanes|=t,r!==null&&(r.childLanes|=t)),e===n)break;e=e.return}}function ia(e,t,n,r){var a=e.child;for(a!==null&&(a.return=e);a!==null;){var o=a.dependencies;if(o!==null){var s=a.child;o=o.firstContext;a:for(;o!==null;){var c=o;o=a;for(var l=0;l<t.length;l++)if(c.context===t[l]){o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),ra(o.return,n,e),r||(s=null);break a}o=c.next}}else if(a.tag===18){if(s=a.return,s===null)throw Error(i(341));s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),ra(s,n,e),s=null}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===e){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}}function aa(e,t,n,r){e=null;for(var a=t,o=!1;a!==null;){if(!o){if(a.flags&524288)o=!0;else if(a.flags&262144)break}if(a.tag===10){var s=a.alternate;if(s===null)throw Error(i(387));if(s=s.memoizedProps,s!==null){var c=a.type;kr(a.pendingProps.value,s.value)||(e===null?e=[c]:e.push(c))}}else if(a===ve.current){if(s=a.alternate,s===null)throw Error(i(387));s.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(e===null?e=[$f]:e.push($f))}a=a.return}e!==null&&ia(t,e,n,r),t.flags|=262144}function oa(e){for(e=e.firstContext;e!==null;){if(!kr(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function sa(e){$i=e,ea=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ca(e){return ua($i,e)}function la(e,t){return $i===null&&sa(e),ua(e,t)}function ua(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},ea===null){if(e===null)throw Error(i(308));ea=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ea=ea.next=t;return n}var da=typeof AbortController<`u`?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},fa=t.unstable_scheduleCallback,pa=t.unstable_NormalPriority,ma={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ha(){return{controller:new da,data:new Map,refCount:0}}function ga(e){e.refCount--,e.refCount===0&&fa(pa,function(){e.controller.abort()})}var _a=null,va=0,ya=0,ba=null;function xa(e,t){if(_a===null){var n=_a=[];va=0,ya=pd(),ba={status:`pending`,value:void 0,then:function(e){n.push(e)}}}return va++,t.then(Sa,Sa),t}function Sa(){if(--va===0&&_a!==null){ba!==null&&(ba.status=`fulfilled`);var e=_a;_a=null,ya=0,ba=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Ca(e,t){var n=[],r={status:`pending`,value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status=`fulfilled`,r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status=`rejected`,r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}var wa=E.S;E.S=function(e,t){nu=Fe(),typeof t==`object`&&t&&typeof t.then==`function`&&xa(e,t),wa!==null&&wa(e,t)};var Ta=pe(null);function Ea(){var e=Ta.current;return e===null?zl.pooledCache:e}function Da(e,t){t===null?O(Ta,Ta.current):O(Ta,t.pool)}function Oa(){var e=Ea();return e===null?null:{parent:ma._currentValue,pool:e}}var ka=Error(i(460)),Aa=Error(i(474)),ja=Error(i(542)),Ma={then:function(){}};function Na(e){return e=e.status,e===`fulfilled`||e===`rejected`}function Pa(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(cn,cn),t=n),t.status){case`fulfilled`:return t.value;case`rejected`:throw e=t.reason,Ra(e),e;default:if(typeof t.status==`string`)t.then(cn,cn);else{if(e=zl,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=t,e.status=`pending`,e.then(function(e){if(t.status===`pending`){var n=t;n.status=`fulfilled`,n.value=e}},function(e){if(t.status===`pending`){var n=t;n.status=`rejected`,n.reason=e}})}switch(t.status){case`fulfilled`:return t.value;case`rejected`:throw e=t.reason,Ra(e),e}throw Ia=t,ka}}function Fa(e){try{var t=e._init;return t(e._payload)}catch(e){throw typeof e==`object`&&e&&typeof e.then==`function`?(Ia=e,ka):e}}var Ia=null;function La(){if(Ia===null)throw Error(i(459));var e=Ia;return Ia=null,e}function Ra(e){if(e===ka||e===ja)throw Error(i(483))}var za=null,Ba=0;function Va(e){var t=Ba;return Ba+=1,za===null&&(za=[]),Pa(za,e,t)}function Ha(e,t){t=t.props.ref,e.ref=t===void 0?null:t}function Ua(e,t){throw t.$$typeof===g?Error(i(525)):(e=Object.prototype.toString.call(t),Error(i(31,e===`[object Object]`?`object with keys {`+Object.keys(t).join(`, `)+`}`:e)))}function Wa(e){function t(t,n){if(e){var r=t.deletions;r===null?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;r!==null;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;e!==null;)e.key===null?t.set(e.index,e):t.set(e.key,e),e=e.sibling;return t}function a(e,t){return e=_i(e,t),e.index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?(r=t.alternate,r===null?(t.flags|=67108866,n):(r=r.index,r<n?(t.flags|=67108866,n):r)):(t.flags|=1048576,n)}function s(t){return e&&t.alternate===null&&(t.flags|=67108866),t}function c(e,t,n,r){return t===null||t.tag!==6?(t=xi(n,e.mode,r),t.return=e,t):(t=a(t,n),t.return=e,t)}function l(e,t,n,r){var i=n.type;return i===y?d(e,t,n.props.children,r,n.key):t!==null&&(t.elementType===i||typeof i==`object`&&i&&i.$$typeof===T&&Fa(i)===t.type)?(t=a(t,n.props),Ha(t,n),t.return=e,t):(t=yi(n.type,n.key,n.props,null,e.mode,r),Ha(t,n),t.return=e,t)}function u(e,t,n,r){return t===null||t.tag!==4||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=Ci(n,e.mode,r),t.return=e,t):(t=a(t,n.children||[]),t.return=e,t)}function d(e,t,n,r,i){return t===null||t.tag!==7?(t=bi(n,e.mode,r,i),t.return=e,t):(t=a(t,n),t.return=e,t)}function f(e,t,n){if(typeof t==`string`&&t!==``||typeof t==`number`||typeof t==`bigint`)return t=xi(``+t,e.mode,n),t.return=e,t;if(typeof t==`object`&&t){switch(t.$$typeof){case _:return n=yi(t.type,t.key,t.props,null,e.mode,n),Ha(n,t),n.return=e,n;case v:return t=Ci(t,e.mode,n),t.return=e,t;case T:return t=Fa(t),f(e,t,n)}if(le(t)||oe(t))return t=bi(t,e.mode,n,null),t.return=e,t;if(typeof t.then==`function`)return f(e,Va(t),n);if(t.$$typeof===C)return f(e,la(e,t),n);Ua(e,t)}return null}function p(e,t,n,r){var i=t===null?null:t.key;if(typeof n==`string`&&n!==``||typeof n==`number`||typeof n==`bigint`)return i===null?c(e,t,``+n,r):null;if(typeof n==`object`&&n){switch(n.$$typeof){case _:return n.key===i?l(e,t,n,r):null;case v:return n.key===i?u(e,t,n,r):null;case T:return n=Fa(n),p(e,t,n,r)}if(le(n)||oe(n))return i===null?d(e,t,n,r,null):null;if(typeof n.then==`function`)return p(e,t,Va(n),r);if(n.$$typeof===C)return p(e,t,la(e,n),r);Ua(e,n)}return null}function m(e,t,n,r,i){if(typeof r==`string`&&r!==``||typeof r==`number`||typeof r==`bigint`)return e=e.get(n)||null,c(t,e,``+r,i);if(typeof r==`object`&&r){switch(r.$$typeof){case _:return e=e.get(r.key===null?n:r.key)||null,l(t,e,r,i);case v:return e=e.get(r.key===null?n:r.key)||null,u(t,e,r,i);case T:return r=Fa(r),m(e,t,n,r,i)}if(le(r)||oe(r))return e=e.get(n)||null,d(t,e,r,i,null);if(typeof r.then==`function`)return m(e,t,n,Va(r),i);if(r.$$typeof===C)return m(e,t,n,la(t,r),i);Ua(t,r)}return null}function h(i,a,s,c){for(var l=null,u=null,d=a,h=a=0,g=null;d!==null&&h<s.length;h++){d.index>h?(g=d,d=null):g=d.sibling;var _=p(i,d,s[h],c);if(_===null){d===null&&(d=g);break}e&&d&&_.alternate===null&&t(i,d),a=o(_,a,h),u===null?l=_:u.sibling=_,u=_,d=g}if(h===s.length)return n(i,d),M&&Fi(i,h),l;if(d===null){for(;h<s.length;h++)d=f(i,s[h],c),d!==null&&(a=o(d,a,h),u===null?l=d:u.sibling=d,u=d);return M&&Fi(i,h),l}for(d=r(d);h<s.length;h++)g=m(d,i,h,s[h],c),g!==null&&(e&&g.alternate!==null&&d.delete(g.key===null?h:g.key),a=o(g,a,h),u===null?l=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(i,e)}),M&&Fi(i,h),l}function g(a,s,c,l){if(c==null)throw Error(i(151));for(var u=null,d=null,h=s,g=s=0,_=null,v=c.next();h!==null&&!v.done;g++,v=c.next()){h.index>g?(_=h,h=null):_=h.sibling;var y=p(a,h,v.value,l);if(y===null){h===null&&(h=_);break}e&&h&&y.alternate===null&&t(a,h),s=o(y,s,g),d===null?u=y:d.sibling=y,d=y,h=_}if(v.done)return n(a,h),M&&Fi(a,g),u;if(h===null){for(;!v.done;g++,v=c.next())v=f(a,v.value,l),v!==null&&(s=o(v,s,g),d===null?u=v:d.sibling=v,d=v);return M&&Fi(a,g),u}for(h=r(h);!v.done;g++,v=c.next())v=m(h,a,g,v.value,l),v!==null&&(e&&v.alternate!==null&&h.delete(v.key===null?g:v.key),s=o(v,s,g),d===null?u=v:d.sibling=v,d=v);return e&&h.forEach(function(e){return t(a,e)}),M&&Fi(a,g),u}function b(e,r,o,c){if(typeof o==`object`&&o&&o.type===y&&o.key===null&&(o=o.props.children),typeof o==`object`&&o){switch(o.$$typeof){case _:a:{for(var l=o.key;r!==null;){if(r.key===l){if(l=o.type,l===y){if(r.tag===7){n(e,r.sibling),c=a(r,o.props.children),c.return=e,e=c;break a}}else if(r.elementType===l||typeof l==`object`&&l&&l.$$typeof===T&&Fa(l)===r.type){n(e,r.sibling),c=a(r,o.props),Ha(c,o),c.return=e,e=c;break a}n(e,r);break}else t(e,r);r=r.sibling}o.type===y?(c=bi(o.props.children,e.mode,c,o.key),c.return=e,e=c):(c=yi(o.type,o.key,o.props,null,e.mode,c),Ha(c,o),c.return=e,e=c)}return s(e);case v:a:{for(l=o.key;r!==null;){if(r.key===l)if(r.tag===4&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),c=a(r,o.children||[]),c.return=e,e=c;break a}else{n(e,r);break}else t(e,r);r=r.sibling}c=Ci(o,e.mode,c),c.return=e,e=c}return s(e);case T:return o=Fa(o),b(e,r,o,c)}if(le(o))return h(e,r,o,c);if(oe(o)){if(l=oe(o),typeof l!=`function`)throw Error(i(150));return o=l.call(o),g(e,r,o,c)}if(typeof o.then==`function`)return b(e,r,Va(o),c);if(o.$$typeof===C)return b(e,r,la(e,o),c);Ua(e,o)}return typeof o==`string`&&o!==``||typeof o==`number`||typeof o==`bigint`?(o=``+o,r!==null&&r.tag===6?(n(e,r.sibling),c=a(r,o),c.return=e,e=c):(n(e,r),c=xi(o,e.mode,c),c.return=e,e=c),s(e)):n(e,r)}return function(e,t,n,r){try{Ba=0;var i=b(e,t,n,r);return za=null,i}catch(t){if(t===ka||t===ja)throw t;var a=hi(29,t,null,e.mode);return a.lanes=r,a.return=e,a}}}var Ga=Wa(!0),Ka=Wa(!1),qa=!1;function Ja(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ya(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Xa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Za(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,K&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=fi(e),di(e,null,n),t}return ci(e,r,t,n),fi(e)}function Qa(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,n&4194048)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ct(e,n)}}function $a(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var eo=!1;function to(){if(eo){var e=ba;if(e!==null)throw e}}function no(e,t,n,r){eo=!1;var i=e.updateQueue;qa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var c=s,l=c.next;c.next=null,o===null?a=l:o.next=l,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,s=u.lastBaseUpdate,s!==o&&(s===null?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=c))}if(a!==null){var d=i.baseState;o=0,u=l=c=null,s=a;do{var f=s.lane&-536870913,p=f!==s.lane;if(p?(J&f)===f:(r&f)===f){f!==0&&f===ya&&(eo=!0),u!==null&&(u=u.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});a:{var m=e,g=s;f=t;var _=n;switch(g.tag){case 1:if(m=g.payload,typeof m==`function`){d=m.call(_,d,f);break a}d=m;break a;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m==`function`?m.call(_,d,f):m,f==null)break a;d=h({},d,f);break a;case 2:qa=!0}}f=s.callback,f!==null&&(e.flags|=64,p&&(e.flags|=8192),p=i.callbacks,p===null?i.callbacks=[f]:p.push(f))}else p={lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(l=u=p,c=d):u=u.next=p,o|=f;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;p=s,s=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);u===null&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,a===null&&(i.shared.lanes=0),ql|=o,e.lanes=o,e.memoizedState=d}}function ro(e,t){if(typeof e!=`function`)throw Error(i(191,e));e.call(t)}function io(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)ro(n[e],t)}var ao=pe(null),oo=pe(0);function so(e,t){e=Gl,O(oo,e),O(ao,t),Gl=e|t.baseLanes}function co(){O(oo,Gl),O(ao,ao.current)}function lo(){Gl=oo.current,me(ao),me(oo)}var uo=pe(null),fo=null;function po(e){var t=e.alternate;O(vo,vo.current&1),O(uo,e),fo===null&&(t===null||ao.current!==null||t.memoizedState!==null)&&(fo=e)}function mo(e){O(vo,vo.current),O(uo,e),fo===null&&(fo=e)}function ho(e){e.tag===22?(O(vo,vo.current),O(uo,e),fo===null&&(fo=e)):go(e)}function go(){O(vo,vo.current),O(uo,uo.current)}function _o(e){me(uo),fo===e&&(fo=null),me(vo)}var vo=pe(0);function yo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||of(n)||sf(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder===`forwards`||t.memoizedProps.revealOrder===`backwards`||t.memoizedProps.revealOrder===`unstable_legacy-backwards`||t.memoizedProps.revealOrder===`together`)){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var bo=0,N=null,xo=null,So=null,Co=!1,wo=!1,To=!1,Eo=0,Do=0,Oo=null,ko=0;function Ao(){throw Error(i(321))}function jo(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!kr(e[n],t[n]))return!1;return!0}function Mo(e,t,n,r,i,a){return bo=a,N=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,E.H=e===null||e.memoizedState===null?P:Ys,To=!1,a=n(r,i),To=!1,wo&&(a=Po(t,n,r,i)),No(e),a}function No(e){E.H=Js;var t=xo!==null&&xo.next!==null;if(bo=0,So=xo=N=null,Co=!1,Do=0,Oo=null,t)throw Error(i(300));e===null||cc||(e=e.dependencies,e!==null&&oa(e)&&(cc=!0))}function Po(e,t,n,r){N=e;var a=0;do{if(wo&&(Oo=null),Do=0,wo=!1,25<=a)throw Error(i(301));if(a+=1,So=xo=null,e.updateQueue!=null){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}E.H=Xs,o=t(n,r)}while(wo);return o}function Fo(){var e=E.H,t=e.useState()[0];return t=typeof t.then==`function`?Ho(t):t,e=e.useState()[0],(xo===null?null:xo.memoizedState)!==e&&(N.flags|=1024),t}function Io(){var e=Eo!==0;return Eo=0,e}function Lo(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Ro(e){if(Co){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Co=!1}bo=0,So=xo=N=null,wo=!1,Do=Eo=0,Oo=null}function zo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return So===null?N.memoizedState=So=e:So=So.next=e,So}function Bo(){if(xo===null){var e=N.alternate;e=e===null?null:e.memoizedState}else e=xo.next;var t=So===null?N.memoizedState:So.next;if(t!==null)So=t,xo=e;else{if(e===null)throw N.alternate===null?Error(i(467)):Error(i(310));xo=e,e={memoizedState:xo.memoizedState,baseState:xo.baseState,baseQueue:xo.baseQueue,queue:xo.queue,next:null},So===null?N.memoizedState=So=e:So=So.next=e}return So}function Vo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ho(e){var t=Do;return Do+=1,Oo===null&&(Oo=[]),e=Pa(Oo,e,t),t=N,(So===null?t.memoizedState:So.next)===null&&(t=t.alternate,E.H=t===null||t.memoizedState===null?P:Ys),e}function Uo(e){if(typeof e==`object`&&e){if(typeof e.then==`function`)return Ho(e);if(e.$$typeof===C)return ca(e)}throw Error(i(438,String(e)))}function Wo(e){var t=null,n=N.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var r=N.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(t??={data:[],index:0},n===null&&(n=Vo(),N.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=ie;return t.index++,n}function Go(e,t){return typeof t==`function`?t(e):t}function Ko(e){return qo(Bo(),xo,e)}function qo(e,t,n){var r=e.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=n;var a=e.baseQueue,o=r.pending;if(o!==null){if(a!==null){var s=a.next;a.next=o.next,o.next=s}t.baseQueue=a=o,r.pending=null}if(o=e.baseState,a===null)e.memoizedState=o;else{t=a.next;var c=s=null,l=null,u=t,d=!1;do{var f=u.lane&-536870913;if(f===u.lane?(bo&f)===f:(J&f)===f){var p=u.revertLane;if(p===0)l!==null&&(l=l.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),f===ya&&(d=!0);else if((bo&p)===p){u=u.next,p===ya&&(d=!0);continue}else f={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(c=l=f,s=o):l=l.next=f,N.lanes|=p,ql|=p;f=u.action,To&&n(o,f),o=u.hasEagerState?u.eagerState:n(o,f)}else p={lane:f,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(c=l=p,s=o):l=l.next=p,N.lanes|=f,ql|=f;u=u.next}while(u!==null&&u!==t);if(l===null?s=o:l.next=c,!kr(o,e.memoizedState)&&(cc=!0,d&&(n=ba,n!==null)))throw n;e.memoizedState=o,e.baseState=s,e.baseQueue=l,r.lastRenderedState=o}return a===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Jo(e){var t=Bo(),n=t.queue;if(n===null)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(a!==null){n.pending=null;var s=a=a.next;do o=e(o,s.action),s=s.next;while(s!==a);kr(o,t.memoizedState)||(cc=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Yo(e,t,n){var r=N,a=Bo(),o=M;if(o){if(n===void 0)throw Error(i(407));n=n()}else n=t();var s=!kr((xo||a).memoizedState,n);if(s&&(a.memoizedState=n,cc=!0),a=a.queue,bs(Qo.bind(null,r,a,e),[e]),a.getSnapshot!==t||s||So!==null&&So.memoizedState.tag&1){if(r.flags|=2048,hs(9,{destroy:void 0},Zo.bind(null,r,a,n,t),null),zl===null)throw Error(i(349));o||bo&127||Xo(r,t,n)}return n}function Xo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=N.updateQueue,t===null?(t=Vo(),N.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Zo(e,t,n,r){t.value=n,t.getSnapshot=r,$o(t)&&es(e)}function Qo(e,t,n){return n(function(){$o(t)&&es(e)})}function $o(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!kr(e,n)}catch{return!0}}function es(e){var t=ui(e,2);t!==null&&_u(t,e,2)}function ts(e){var t=zo();if(typeof e==`function`){var n=e;if(e=n(),To){Ke(!0);try{n()}finally{Ke(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Go,lastRenderedState:e},t}function ns(e,t,n,r){return e.baseState=n,qo(e,xo,typeof r==`function`?r:Go)}function rs(e,t,n,r,a){if(Gs(e))throw Error(i(485));if(e=t.action,e!==null){var o={payload:a,action:e,next:null,isTransition:!0,status:`pending`,value:null,reason:null,listeners:[],then:function(e){o.listeners.push(e)}};E.T===null?o.isTransition=!1:n(!0),r(o),n=t.pending,n===null?(o.next=t.pending=o,is(t,o)):(o.next=n.next,t.pending=n.next=o)}}function is(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var a=E.T,o={};E.T=o;try{var s=n(i,r),c=E.S;c!==null&&c(o,s),as(e,t,s)}catch(n){ss(e,t,n)}finally{a!==null&&o.types!==null&&(a.types=o.types),E.T=a}}else try{a=n(i,r),as(e,t,a)}catch(n){ss(e,t,n)}}function as(e,t,n){typeof n==`object`&&n&&typeof n.then==`function`?n.then(function(n){os(e,t,n)},function(n){return ss(e,t,n)}):os(e,t,n)}function os(e,t,n){t.status=`fulfilled`,t.value=n,cs(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,is(e,n)))}function ss(e,t,n){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do t.status=`rejected`,t.reason=n,cs(t),t=t.next;while(t!==r)}e.action=null}function cs(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ls(e,t){return t}function us(e,t){if(M){var n=zl.formState;if(n!==null){a:{var r=N;if(M){if(Vi){b:{for(var i=Vi,a=Ui;i.nodeType!==8;){if(!a){i=null;break b}if(i=lf(i.nextSibling),i===null){i=null;break b}}a=i.data,i=a===`F!`||a===`F`?i:null}if(i){Vi=lf(i.nextSibling),r=i.data===`F!`;break a}}Gi(r)}r=!1}r&&(t=n[0])}}return n=zo(),n.memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ls,lastRenderedState:t},n.queue=r,n=Hs.bind(null,N,r),r.dispatch=n,r=ts(!1),a=Ws.bind(null,N,!1,r.queue),r=zo(),i={state:t,dispatch:null,action:e,pending:null},r.queue=i,n=rs.bind(null,N,i,a,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function ds(e){return fs(Bo(),xo,e)}function fs(e,t,n){if(t=qo(e,t,ls)[0],e=Ko(Go)[0],typeof t==`object`&&t&&typeof t.then==`function`)try{var r=Ho(t)}catch(e){throw e===ka?ja:e}else r=t;t=Bo();var i=t.queue,a=i.dispatch;return n!==t.memoizedState&&(N.flags|=2048,hs(9,{destroy:void 0},ps.bind(null,i,n),null)),[r,a,e]}function ps(e,t){e.action=t}function ms(e){var t=Bo(),n=xo;if(n!==null)return fs(t,n,e);Bo(),t=t.memoizedState,n=Bo();var r=n.queue.dispatch;return n.memoizedState=e,[t,r,!1]}function hs(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},t=N.updateQueue,t===null&&(t=Vo(),N.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function gs(){return Bo().memoizedState}function _s(e,t,n,r){var i=zo();N.flags|=e,i.memoizedState=hs(1|t,{destroy:void 0},n,r===void 0?null:r)}function vs(e,t,n,r){var i=Bo();r=r===void 0?null:r;var a=i.memoizedState.inst;xo!==null&&r!==null&&jo(r,xo.memoizedState.deps)?i.memoizedState=hs(t,a,n,r):(N.flags|=e,i.memoizedState=hs(1|t,a,n,r))}function ys(e,t){_s(8390656,8,e,t)}function bs(e,t){vs(2048,8,e,t)}function xs(e){N.flags|=4;var t=N.updateQueue;if(t===null)t=Vo(),N.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function Ss(e){var t=Bo().memoizedState;return xs({ref:t,nextImpl:e}),function(){if(K&2)throw Error(i(440));return t.impl.apply(void 0,arguments)}}function Cs(e,t){return vs(4,2,e,t)}function ws(e,t){return vs(4,4,e,t)}function Ts(e,t){if(typeof t==`function`){e=e();var n=t(e);return function(){typeof n==`function`?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Es(e,t,n){n=n==null?null:n.concat([e]),vs(4,4,Ts.bind(null,t,e),n)}function Ds(){}function Os(e,t){var n=Bo();t=t===void 0?null:t;var r=n.memoizedState;return t!==null&&jo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ks(e,t){var n=Bo();t=t===void 0?null:t;var r=n.memoizedState;if(t!==null&&jo(t,r[1]))return r[0];if(r=e(),To){Ke(!0);try{e()}finally{Ke(!1)}}return n.memoizedState=[r,t],r}function As(e,t,n){return n===void 0||bo&1073741824&&!(J&261930)?e.memoizedState=t:(e.memoizedState=n,e=gu(),N.lanes|=e,ql|=e,n)}function js(e,t,n,r){return kr(n,t)?n:ao.current===null?!(bo&42)||bo&1073741824&&!(J&261930)?(cc=!0,e.memoizedState=n):(e=gu(),N.lanes|=e,ql|=e,t):(e=As(e,n,r),kr(e,t)||(cc=!0),e)}function Ms(e,t,n,r,i){var a=D.p;D.p=a!==0&&8>a?a:8;var o=E.T,s={};E.T=s,Ws(e,!1,t,n);try{var c=i(),l=E.S;l!==null&&l(s,c),typeof c==`object`&&c&&typeof c.then==`function`?Us(e,t,Ca(c,r),hu(e)):Us(e,t,r,hu(e))}catch(n){Us(e,t,{then:function(){},status:`rejected`,reason:n},hu())}finally{D.p=a,o!==null&&s.types!==null&&(o.types=s.types),E.T=o}}function Ns(){}function Ps(e,t,n,r){if(e.tag!==5)throw Error(i(476));var a=Fs(e).queue;Ms(e,a,t,ue,n===null?Ns:function(){return Is(e),n(r)})}function Fs(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ue,baseState:ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Go,lastRenderedState:ue},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Go,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Is(e){var t=Fs(e);t.next===null&&(t=e.alternate.memoizedState),Us(e,t.next.queue,{},hu())}function Ls(){return ca($f)}function Rs(){return Bo().memoizedState}function zs(){return Bo().memoizedState}function Bs(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=hu();e=Xa(n);var r=Za(t,e,n);r!==null&&(_u(r,t,n),Qa(r,t,n)),t={cache:ha()},e.payload=t;return}t=t.return}}function Vs(e,t,n){var r=hu();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Gs(e)?Ks(t,n):(n=li(e,t,n,r),n!==null&&(_u(n,e,r),qs(n,t,r)))}function Hs(e,t,n){Us(e,t,n,hu())}function Us(e,t,n,r){var i={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Gs(e))Ks(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,kr(s,o))return ci(e,t,i,0),zl===null&&si(),!1}catch{}if(n=li(e,t,i,r),n!==null)return _u(n,e,r),qs(n,t,r),!0}return!1}function Ws(e,t,n,r){if(r={lane:2,revertLane:pd(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Gs(e)){if(t)throw Error(i(479))}else t=li(e,n,r,2),t!==null&&_u(t,e,2)}function Gs(e){var t=e.alternate;return e===N||t!==null&&t===N}function Ks(e,t){wo=Co=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function qs(e,t,n){if(n&4194048){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ct(e,n)}}var Js={readContext:ca,use:Uo,useCallback:Ao,useContext:Ao,useEffect:Ao,useImperativeHandle:Ao,useLayoutEffect:Ao,useInsertionEffect:Ao,useMemo:Ao,useReducer:Ao,useRef:Ao,useState:Ao,useDebugValue:Ao,useDeferredValue:Ao,useTransition:Ao,useSyncExternalStore:Ao,useId:Ao,useHostTransitionStatus:Ao,useFormState:Ao,useActionState:Ao,useOptimistic:Ao,useMemoCache:Ao,useCacheRefresh:Ao};Js.useEffectEvent=Ao;var P={readContext:ca,use:Uo,useCallback:function(e,t){return zo().memoizedState=[e,t===void 0?null:t],e},useContext:ca,useEffect:ys,useImperativeHandle:function(e,t,n){n=n==null?null:n.concat([e]),_s(4194308,4,Ts.bind(null,t,e),n)},useLayoutEffect:function(e,t){return _s(4194308,4,e,t)},useInsertionEffect:function(e,t){_s(4,2,e,t)},useMemo:function(e,t){var n=zo();t=t===void 0?null:t;var r=e();if(To){Ke(!0);try{e()}finally{Ke(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=zo();if(n!==void 0){var i=n(t);if(To){Ke(!0);try{n(t)}finally{Ke(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=Vs.bind(null,N,e),[r.memoizedState,e]},useRef:function(e){var t=zo();return e={current:e},t.memoizedState=e},useState:function(e){e=ts(e);var t=e.queue,n=Hs.bind(null,N,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Ds,useDeferredValue:function(e,t){return As(zo(),e,t)},useTransition:function(){var e=ts(!1);return e=Ms.bind(null,N,e.queue,!0,!1),zo().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=N,a=zo();if(M){if(n===void 0)throw Error(i(407));n=n()}else{if(n=t(),zl===null)throw Error(i(349));J&127||Xo(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,ys(Qo.bind(null,r,o,e),[e]),r.flags|=2048,hs(9,{destroy:void 0},Zo.bind(null,r,o,n,t),null),n},useId:function(){var e=zo(),t=zl.identifierPrefix;if(M){var n=Pi,r=Ni;n=(r&~(1<<32-qe(r)-1)).toString(32)+n,t=`_`+t+`R_`+n,n=Eo++,0<n&&(t+=`H`+n.toString(32)),t+=`_`}else n=ko++,t=`_`+t+`r_`+n.toString(32)+`_`;return e.memoizedState=t},useHostTransitionStatus:Ls,useFormState:us,useActionState:us,useOptimistic:function(e){var t=zo();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Ws.bind(null,N,!0,n),n.dispatch=t,[e,t]},useMemoCache:Wo,useCacheRefresh:function(){return zo().memoizedState=Bs.bind(null,N)},useEffectEvent:function(e){var t=zo(),n={impl:e};return t.memoizedState=n,function(){if(K&2)throw Error(i(440));return n.impl.apply(void 0,arguments)}}},Ys={readContext:ca,use:Uo,useCallback:Os,useContext:ca,useEffect:bs,useImperativeHandle:Es,useInsertionEffect:Cs,useLayoutEffect:ws,useMemo:ks,useReducer:Ko,useRef:gs,useState:function(){return Ko(Go)},useDebugValue:Ds,useDeferredValue:function(e,t){return js(Bo(),xo.memoizedState,e,t)},useTransition:function(){var e=Ko(Go)[0],t=Bo().memoizedState;return[typeof e==`boolean`?e:Ho(e),t]},useSyncExternalStore:Yo,useId:Rs,useHostTransitionStatus:Ls,useFormState:ds,useActionState:ds,useOptimistic:function(e,t){return ns(Bo(),xo,e,t)},useMemoCache:Wo,useCacheRefresh:zs};Ys.useEffectEvent=Ss;var Xs={readContext:ca,use:Uo,useCallback:Os,useContext:ca,useEffect:bs,useImperativeHandle:Es,useInsertionEffect:Cs,useLayoutEffect:ws,useMemo:ks,useReducer:Jo,useRef:gs,useState:function(){return Jo(Go)},useDebugValue:Ds,useDeferredValue:function(e,t){var n=Bo();return xo===null?As(n,e,t):js(n,xo.memoizedState,e,t)},useTransition:function(){var e=Jo(Go)[0],t=Bo().memoizedState;return[typeof e==`boolean`?e:Ho(e),t]},useSyncExternalStore:Yo,useId:Rs,useHostTransitionStatus:Ls,useFormState:ms,useActionState:ms,useOptimistic:function(e,t){var n=Bo();return xo===null?(n.baseState=e,[e,n.queue.dispatch]):ns(n,xo,e,t)},useMemoCache:Wo,useCacheRefresh:zs};Xs.useEffectEvent=Ss;function Zs(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:h({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var F={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=hu(),i=Xa(r);i.payload=t,n!=null&&(i.callback=n),t=Za(e,i,r),t!==null&&(_u(t,e,r),Qa(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=hu(),i=Xa(r);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Za(e,i,r),t!==null&&(_u(t,e,r),Qa(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=hu(),r=Xa(n);r.tag=2,t!=null&&(r.callback=t),t=Za(e,r,n),t!==null&&(_u(t,e,n),Qa(t,e,n))}};function Qs(e,t,n,r,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate==`function`?e.shouldComponentUpdate(r,a,o):t.prototype&&t.prototype.isPureReactComponent?!Ar(n,r)||!Ar(i,a):!0}function $s(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps==`function`&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps==`function`&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&F.enqueueReplaceState(t,t.state,null)}function I(e,t){var n=t;if(`ref`in t)for(var r in n={},t)r!==`ref`&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=h({},n)),e)n[i]===void 0&&(n[i]=e[i]);return n}function L(e){ri(e)}function R(e){console.error(e)}function ec(e){ri(e)}function tc(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(e){setTimeout(function(){throw e})}}function nc(e,t,n){try{var r=e.onCaughtError;r(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(e){setTimeout(function(){throw e})}}function rc(e,t,n){return n=Xa(n),n.tag=3,n.payload={element:null},n.callback=function(){tc(e,t)},n}function ic(e){return e=Xa(e),e.tag=3,e}function ac(e,t,n,r){var i=n.type.getDerivedStateFromError;if(typeof i==`function`){var a=r.value;e.payload=function(){return i(a)},e.callback=function(){nc(t,n,r)}}var o=n.stateNode;o!==null&&typeof o.componentDidCatch==`function`&&(e.callback=function(){nc(t,n,r),typeof i!=`function`&&(au===null?au=new Set([this]):au.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:e===null?``:e})})}function oc(e,t,n,r,a){if(n.flags|=32768,typeof r==`object`&&r&&typeof r.then==`function`){if(t=n.alternate,t!==null&&aa(t,n,a,!0),n=uo.current,n!==null){switch(n.tag){case 31:case 13:return fo===null?ku():n.alternate===null&&Kl===0&&(Kl=3),n.flags&=-257,n.flags|=65536,n.lanes=a,r===Ma?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([r]):t.add(r),qu(e,r,a)),!1;case 22:return n.flags|=65536,r===Ma?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([r]):n.add(r)),qu(e,r,a)),!1}throw Error(i(435,n.tag))}return qu(e,r,a),ku(),!1}if(M)return t=uo.current,t===null?(r!==Wi&&(t=Error(i(423),{cause:r}),Zi(Ti(t,n))),e=e.current.alternate,e.flags|=65536,a&=-a,e.lanes|=a,r=Ti(r,n),a=rc(e.stateNode,r,a),$a(e,a),Kl!==4&&(Kl=2)):(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=a,r!==Wi&&(e=Error(i(422),{cause:r}),Zi(Ti(e,n)))),!1;var o=Error(i(520),{cause:r});if(o=Ti(o,n),Ql===null?Ql=[o]:Ql.push(o),Kl!==4&&(Kl=2),t===null)return!0;r=Ti(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,e=rc(n.stateNode,r,e),$a(n,e),!1;case 1:if(t=n.type,o=n.stateNode,!(n.flags&128)&&(typeof t.getDerivedStateFromError==`function`||o!==null&&typeof o.componentDidCatch==`function`&&(au===null||!au.has(o))))return n.flags|=65536,a&=-a,n.lanes|=a,a=ic(a),ac(a,e,n,r),$a(n,a),!1}n=n.return}while(n!==null);return!1}var sc=Error(i(461)),cc=!1;function lc(e,t,n,r){t.child=e===null?Ka(t,null,n,r):Ga(t,e.child,n,r)}function uc(e,t,n,r,i){n=n.render;var a=t.ref;if(`ref`in r){var o={};for(var s in r)s!==`ref`&&(o[s]=r[s])}else o=r;return sa(t),r=Mo(e,t,n,o,a,i),s=Io(),e!==null&&!cc?(Lo(e,t,i),Mc(e,t,i)):(M&&s&&Li(t),t.flags|=1,lc(e,t,r,i),t.child)}function z(e,t,n,r,i){if(e===null){var a=n.type;return typeof a==`function`&&!gi(a)&&a.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=a,dc(e,t,a,r,i)):(e=yi(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!Nc(e,i)){var o=a.memoizedProps;if(n=n.compare,n=n===null?Ar:n,n(o,r)&&e.ref===t.ref)return Mc(e,t,i)}return t.flags|=1,e=_i(a,r),e.ref=t.ref,e.return=t,t.child=e}function dc(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(Ar(a,r)&&e.ref===t.ref)if(cc=!1,t.pendingProps=r=a,Nc(e,i))e.flags&131072&&(cc=!0);else return t.lanes=e.lanes,Mc(e,t,i)}return yc(e,t,n,r,i)}function fc(e,t,n,r){var i=r.children,a=e===null?null:e.memoizedState;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode===`hidden`){if(t.flags&128){if(a=a===null?n:a.baseLanes|n,e!==null){for(r=t.child=e.child,i=0;r!==null;)i=i|r.lanes|r.childLanes,r=r.sibling;r=i&~a}else r=0,t.child=null;return mc(e,t,a,n,r)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Da(t,a===null?null:a.cachePool),a===null?co():so(t,a),ho(t);else return r=t.lanes=536870912,mc(e,t,a===null?n:a.baseLanes|n,n,r)}else a===null?(e!==null&&Da(t,null),co(),go(t)):(Da(t,a.cachePool),so(t,a),go(t),t.memoizedState=null);return lc(e,t,i,n),t.child}function pc(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function mc(e,t,n,r,i){var a=Ea();return a=a===null?null:{parent:ma._currentValue,pool:a},t.memoizedState={baseLanes:n,cachePool:a},e!==null&&Da(t,null),co(),ho(t),e!==null&&aa(e,t,r,!0),t.childLanes=i,null}function hc(e,t){return t=Dc({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function gc(e,t,n){return Ga(t,e.child,null,n),e=hc(t,t.pendingProps),e.flags|=2,_o(t),t.memoizedState=null,e}function _c(e,t,n){var r=t.pendingProps,a=(t.flags&128)!=0;if(t.flags&=-129,e===null){if(M){if(r.mode===`hidden`)return e=hc(t,r),t.lanes=536870912,pc(null,e);if(mo(t),(e=Vi)?(e=af(e,Ui),e=e!==null&&e.data===`&`?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Mi===null?null:{id:Ni,overflow:Pi},retryLane:536870912,hydrationErrors:null},n=Si(e),n.return=t,t.child=n,Bi=t,Vi=null)):e=null,e===null)throw Gi(t);return t.lanes=536870912,null}return hc(t,r)}var o=e.memoizedState;if(o!==null){var s=o.dehydrated;if(mo(t),a)if(t.flags&256)t.flags&=-257,t=gc(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(i(558));else if(cc||aa(e,t,n,!1),a=(n&e.childLanes)!==0,cc||a){if(r=zl,r!==null&&(s=lt(r,n),s!==0&&s!==o.retryLane))throw o.retryLane=s,ui(e,s),_u(r,e,s),sc;ku(),t=gc(e,t,n)}else e=o.treeContext,Vi=lf(s.nextSibling),Bi=t,M=!0,Hi=null,Ui=!1,e!==null&&zi(t,e),t=hc(t,r),t.flags|=4096;return t}return e=_i(e.child,{mode:r.mode,children:r.children}),e.ref=t.ref,t.child=e,e.return=t,e}function vc(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!=`function`&&typeof n!=`object`)throw Error(i(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function yc(e,t,n,r,i){return sa(t),n=Mo(e,t,n,r,void 0,i),r=Io(),e!==null&&!cc?(Lo(e,t,i),Mc(e,t,i)):(M&&r&&Li(t),t.flags|=1,lc(e,t,n,i),t.child)}function bc(e,t,n,r,i,a){return sa(t),t.updateQueue=null,n=Po(t,r,n,i),No(e),r=Io(),e!==null&&!cc?(Lo(e,t,a),Mc(e,t,a)):(M&&r&&Li(t),t.flags|=1,lc(e,t,n,a),t.child)}function B(e,t,n,r,i){if(sa(t),t.stateNode===null){var a=pi,o=n.contextType;typeof o==`object`&&o&&(a=ca(o)),a=new n(r,a),t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=F,t.stateNode=a,a._reactInternals=t,a=t.stateNode,a.props=r,a.state=t.memoizedState,a.refs={},Ja(t),o=n.contextType,a.context=typeof o==`object`&&o?ca(o):pi,a.state=t.memoizedState,o=n.getDerivedStateFromProps,typeof o==`function`&&(Zs(t,n,o,r),a.state=t.memoizedState),typeof n.getDerivedStateFromProps==`function`||typeof a.getSnapshotBeforeUpdate==`function`||typeof a.UNSAFE_componentWillMount!=`function`&&typeof a.componentWillMount!=`function`||(o=a.state,typeof a.componentWillMount==`function`&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount==`function`&&a.UNSAFE_componentWillMount(),o!==a.state&&F.enqueueReplaceState(a,a.state,null),no(t,r,a,i),to(),a.state=t.memoizedState),typeof a.componentDidMount==`function`&&(t.flags|=4194308),r=!0}else if(e===null){a=t.stateNode;var s=t.memoizedProps,c=I(n,s);a.props=c;var l=a.context,u=n.contextType;o=pi,typeof u==`object`&&u&&(o=ca(u));var d=n.getDerivedStateFromProps;u=typeof d==`function`||typeof a.getSnapshotBeforeUpdate==`function`,s=t.pendingProps!==s,u||typeof a.UNSAFE_componentWillReceiveProps!=`function`&&typeof a.componentWillReceiveProps!=`function`||(s||l!==o)&&$s(t,a,r,o),qa=!1;var f=t.memoizedState;a.state=f,no(t,r,a,i),to(),l=t.memoizedState,s||f!==l||qa?(typeof d==`function`&&(Zs(t,n,d,r),l=t.memoizedState),(c=qa||Qs(t,n,c,r,f,l,o))?(u||typeof a.UNSAFE_componentWillMount!=`function`&&typeof a.componentWillMount!=`function`||(typeof a.componentWillMount==`function`&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount==`function`&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount==`function`&&(t.flags|=4194308)):(typeof a.componentDidMount==`function`&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=o,r=c):(typeof a.componentDidMount==`function`&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Ya(e,t),o=t.memoizedProps,u=I(n,o),a.props=u,d=t.pendingProps,f=a.context,l=n.contextType,c=pi,typeof l==`object`&&l&&(c=ca(l)),s=n.getDerivedStateFromProps,(l=typeof s==`function`||typeof a.getSnapshotBeforeUpdate==`function`)||typeof a.UNSAFE_componentWillReceiveProps!=`function`&&typeof a.componentWillReceiveProps!=`function`||(o!==d||f!==c)&&$s(t,a,r,c),qa=!1,f=t.memoizedState,a.state=f,no(t,r,a,i),to();var p=t.memoizedState;o!==d||f!==p||qa||e!==null&&e.dependencies!==null&&oa(e.dependencies)?(typeof s==`function`&&(Zs(t,n,s,r),p=t.memoizedState),(u=qa||Qs(t,n,u,r,f,p,c)||e!==null&&e.dependencies!==null&&oa(e.dependencies))?(l||typeof a.UNSAFE_componentWillUpdate!=`function`&&typeof a.componentWillUpdate!=`function`||(typeof a.componentWillUpdate==`function`&&a.componentWillUpdate(r,p,c),typeof a.UNSAFE_componentWillUpdate==`function`&&a.UNSAFE_componentWillUpdate(r,p,c)),typeof a.componentDidUpdate==`function`&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate==`function`&&(t.flags|=1024)):(typeof a.componentDidUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=c,r=u):(typeof a.componentDidUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return a=r,vc(e,t),r=(t.flags&128)!=0,a||r?(a=t.stateNode,n=r&&typeof n.getDerivedStateFromError!=`function`?null:a.render(),t.flags|=1,e!==null&&r?(t.child=Ga(t,e.child,null,i),t.child=Ga(t,null,n,i)):lc(e,t,n,i),t.memoizedState=a.state,e=t.child):e=Mc(e,t,i),e}function xc(e,t,n,r){return Yi(),t.flags|=256,lc(e,t,n,r),t.child}var Sc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Cc(e){return{baseLanes:e,cachePool:Oa()}}function wc(e,t,n){return e=e===null?0:e.childLanes&~n,t&&(e|=Xl),e}function Tc(e,t,n){var r=t.pendingProps,a=!1,o=(t.flags&128)!=0,s;if((s=o)||(s=e!==null&&e.memoizedState===null?!1:(vo.current&2)!=0),s&&(a=!0,t.flags&=-129),s=(t.flags&32)!=0,t.flags&=-33,e===null){if(M){if(a?po(t):go(t),(e=Vi)?(e=af(e,Ui),e=e!==null&&e.data!==`&`?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Mi===null?null:{id:Ni,overflow:Pi},retryLane:536870912,hydrationErrors:null},n=Si(e),n.return=t,t.child=n,Bi=t,Vi=null)):e=null,e===null)throw Gi(t);return sf(e)?t.lanes=32:t.lanes=536870912,null}var c=r.children;return r=r.fallback,a?(go(t),a=t.mode,c=Dc({mode:`hidden`,children:c},a),r=bi(r,a,n,null),c.return=t,r.return=t,c.sibling=r,t.child=c,r=t.child,r.memoizedState=Cc(n),r.childLanes=wc(e,s,n),t.memoizedState=Sc,pc(null,r)):(po(t),Ec(t,c))}var l=e.memoizedState;if(l!==null&&(c=l.dehydrated,c!==null)){if(o)t.flags&256?(po(t),t.flags&=-257,t=Oc(e,t,n)):t.memoizedState===null?(go(t),c=r.fallback,a=t.mode,r=Dc({mode:`visible`,children:r.children},a),c=bi(c,a,n,null),c.flags|=2,r.return=t,c.return=t,r.sibling=c,t.child=r,Ga(t,e.child,null,n),r=t.child,r.memoizedState=Cc(n),r.childLanes=wc(e,s,n),t.memoizedState=Sc,t=pc(null,r)):(go(t),t.child=e.child,t.flags|=128,t=null);else if(po(t),sf(c)){if(s=c.nextSibling&&c.nextSibling.dataset,s)var u=s.dgst;s=u,r=Error(i(419)),r.stack=``,r.digest=s,Zi({value:r,source:null,stack:null}),t=Oc(e,t,n)}else if(cc||aa(e,t,n,!1),s=(n&e.childLanes)!==0,cc||s){if(s=zl,s!==null&&(r=lt(s,n),r!==0&&r!==l.retryLane))throw l.retryLane=r,ui(e,r),_u(s,e,r),sc;of(c)||ku(),t=Oc(e,t,n)}else of(c)?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,Vi=lf(c.nextSibling),Bi=t,M=!0,Hi=null,Ui=!1,e!==null&&zi(t,e),t=Ec(t,r.children),t.flags|=4096);return t}return a?(go(t),c=r.fallback,a=t.mode,l=e.child,u=l.sibling,r=_i(l,{mode:`hidden`,children:r.children}),r.subtreeFlags=l.subtreeFlags&65011712,u===null?(c=bi(c,a,n,null),c.flags|=2):c=_i(u,c),c.return=t,r.return=t,r.sibling=c,t.child=r,pc(null,r),r=t.child,c=e.child.memoizedState,c===null?c=Cc(n):(a=c.cachePool,a===null?a=Oa():(l=ma._currentValue,a=a.parent===l?a:{parent:l,pool:l}),c={baseLanes:c.baseLanes|n,cachePool:a}),r.memoizedState=c,r.childLanes=wc(e,s,n),t.memoizedState=Sc,pc(e.child,r)):(po(t),n=e.child,e=n.sibling,n=_i(n,{mode:`visible`,children:r.children}),n.return=t,n.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n)}function Ec(e,t){return t=Dc({mode:`visible`,children:t},e.mode),t.return=e,e.child=t}function Dc(e,t){return e=hi(22,e,null,t),e.lanes=0,e}function Oc(e,t,n){return Ga(t,e.child,null,n),e=Ec(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function kc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),ra(e.return,t,n)}function Ac(e,t,n,r,i,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,treeForkCount:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.treeForkCount=a)}function jc(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;r=r.children;var o=vo.current,s=(o&2)!=0;if(s?(o=o&1|2,t.flags|=128):o&=1,O(vo,o),lc(e,t,r,n),r=M?ki:0,!s&&e!==null&&e.flags&128)a:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&kc(e,n,t);else if(e.tag===19)kc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break a;for(;e.sibling===null;){if(e.return===null||e.return===t)break a;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case`forwards`:for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&yo(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ac(t,!1,i,n,a,r);break;case`backwards`:case`unstable_legacy-backwards`:for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&yo(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ac(t,!0,n,null,a,r);break;case`together`:Ac(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function Mc(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ql|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(aa(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,n=_i(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=_i(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Nc(e,t){return(e.lanes&t)===0?(e=e.dependencies,!!(e!==null&&oa(e))):!0}function V(e,t,n){switch(t.tag){case 3:ye(t,t.stateNode.containerInfo),ta(t,ma,e.memoizedState.cache),Yi();break;case 27:case 5:xe(t);break;case 4:ye(t,t.stateNode.containerInfo);break;case 10:ta(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,mo(t),null;break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated===null?(n&t.child.childLanes)===0?(po(t),e=Mc(e,t,n),e===null?null:e.sibling):Tc(e,t,n):(po(t),t.flags|=128,null);po(t);break;case 19:var i=(e.flags&128)!=0;if(r=(n&t.childLanes)!==0,r||=(aa(e,t,n,!1),(n&t.childLanes)!==0),i){if(r)return jc(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),O(vo,vo.current),r)break;return null;case 22:return t.lanes=0,fc(e,t,n,t.pendingProps);case 24:ta(t,ma,e.memoizedState.cache)}return Mc(e,t,n)}function Pc(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)cc=!0;else{if(!Nc(e,n)&&!(t.flags&128))return cc=!1,V(e,t,n);cc=!!(e.flags&131072)}else cc=!1,M&&t.flags&1048576&&Ii(t,ki,t.index);switch(t.lanes=0,t.tag){case 16:a:{var r=t.pendingProps;if(e=Fa(t.elementType),t.type=e,typeof e==`function`)gi(e)?(r=I(e,r),t.tag=1,t=B(null,t,e,r,n)):(t.tag=0,t=yc(null,t,e,r,n));else{if(e!=null){var a=e.$$typeof;if(a===w){t.tag=11,t=uc(null,t,e,r,n);break a}else if(a===ne){t.tag=14,t=z(null,t,e,r,n);break a}}throw t=ce(e)||e,Error(i(306,t,``))}}return t;case 0:return yc(e,t,t.type,t.pendingProps,n);case 1:return r=t.type,a=I(r,t.pendingProps),B(e,t,r,a,n);case 3:a:{if(ye(t,t.stateNode.containerInfo),e===null)throw Error(i(387));r=t.pendingProps;var o=t.memoizedState;a=o.element,Ya(e,t),no(t,r,null,n);var s=t.memoizedState;if(r=s.cache,ta(t,ma,r),r!==o.cache&&ia(t,[ma],n,!0),to(),r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){t=xc(e,t,r,n);break a}else if(r!==a){a=Ti(Error(i(424)),t),Zi(a),t=xc(e,t,r,n);break a}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName===`HTML`?e.ownerDocument.body:e}for(Vi=lf(e.firstChild),Bi=t,M=!0,Hi=null,Ui=!0,n=Ka(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Yi(),r===a){t=Mc(e,t,n);break a}lc(e,t,r,n)}t=t.child}return t;case 26:return vc(e,t),e===null?(n=Af(t.type,null,t.pendingProps,null))?t.memoizedState=n:M||(n=t.type,e=t.pendingProps,r=Vd(_e.current).createElement(n),r[ht]=t,r[gt]=e,Fd(r,n,e),Ot(r),t.stateNode=r):t.memoizedState=Af(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return xe(t),e===null&&M&&(r=t.stateNode=pf(t.type,t.pendingProps,_e.current),Bi=t,Ui=!0,a=Vi,Qd(t.type)?(uf=a,Vi=lf(r.firstChild)):Vi=a),lc(e,t,t.pendingProps.children,n),vc(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&M&&((a=r=Vi)&&(r=nf(r,t.type,t.pendingProps,Ui),r===null?a=!1:(t.stateNode=r,Bi=t,Vi=lf(r.firstChild),Ui=!1,a=!0)),a||Gi(t)),xe(t),a=t.type,o=t.pendingProps,s=e===null?null:e.memoizedProps,r=o.children,Wd(a,o)?r=null:s!==null&&Wd(a,s)&&(t.flags|=32),t.memoizedState!==null&&(a=Mo(e,t,Fo,null,null,n),$f._currentValue=a),vc(e,t),lc(e,t,r,n),t.child;case 6:return e===null&&M&&((e=n=Vi)&&(n=rf(n,t.pendingProps,Ui),n===null?e=!1:(t.stateNode=n,Bi=t,Vi=null,e=!0)),e||Gi(t)),null;case 13:return Tc(e,t,n);case 4:return ye(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ga(t,null,r,n):lc(e,t,r,n),t.child;case 11:return uc(e,t,t.type,t.pendingProps,n);case 7:return lc(e,t,t.pendingProps,n),t.child;case 8:return lc(e,t,t.pendingProps.children,n),t.child;case 12:return lc(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,ta(t,t.type,r.value),lc(e,t,r.children,n),t.child;case 9:return a=t.type._context,r=t.pendingProps.children,sa(t),a=ca(a),r=r(a),t.flags|=1,lc(e,t,r,n),t.child;case 14:return z(e,t,t.type,t.pendingProps,n);case 15:return dc(e,t,t.type,t.pendingProps,n);case 19:return jc(e,t,n);case 31:return _c(e,t,n);case 22:return fc(e,t,n,t.pendingProps);case 24:return sa(t),r=ca(ma),e===null?(a=Ea(),a===null&&(a=zl,o=ha(),a.pooledCache=o,o.refCount++,o!==null&&(a.pooledCacheLanes|=n),a=o),t.memoizedState={parent:r,cache:a},Ja(t),ta(t,ma,a)):((e.lanes&n)!==0&&(Ya(e,t),no(t,null,null,n),to()),a=e.memoizedState,o=t.memoizedState,a.parent===r?(r=o.cache,ta(t,ma,r),r!==a.cache&&ia(t,[ma],n,!0)):(a={parent:r,cache:r},t.memoizedState=a,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=a),ta(t,ma,r))),lc(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function Fc(e){e.flags|=4}function Ic(e,t,n,r,i){if((t=(e.mode&32)!=0)&&(t=!1),t){if(e.flags|=16777216,(i&335544128)===i)if(e.stateNode.complete)e.flags|=8192;else if(Eu())e.flags|=8192;else throw Ia=Ma,Aa}else e.flags&=-16777217}function Lc(e,t){if(t.type!==`stylesheet`||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!Gf(t))if(Eu())e.flags|=8192;else throw Ia=Ma,Aa}function Rc(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag===22?536870912:rt(),e.lanes|=t,Zl|=t)}function zc(e,t){if(!M)switch(e.tailMode){case`hidden`:t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case`collapsed`:n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Bc(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&65011712,r|=i.flags&65011712,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Vc(e,t,n){var r=t.pendingProps;switch(Ri(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bc(t),null;case 1:return Bc(t),null;case 3:return n=t.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),na(ma),be(),n.pendingContext&&=(n.context=n.pendingContext,null),(e===null||e.child===null)&&(Ji(t)?Fc(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Xi())),Bc(t),null;case 26:var a=t.type,o=t.memoizedState;return e===null?(Fc(t),o===null?(Bc(t),Ic(t,a,null,r,n)):(Bc(t),Lc(t,o))):o?o===e.memoizedState?(Bc(t),t.flags&=-16777217):(Fc(t),Bc(t),Lc(t,o)):(e=e.memoizedProps,e!==r&&Fc(t),Bc(t),Ic(t,a,e,r,n)),null;case 27:if(Se(t),n=_e.current,a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Fc(t);else{if(!r){if(t.stateNode===null)throw Error(i(166));return Bc(t),null}e=he.current,Ji(t)?Ki(t,e):(e=pf(a,r,n),t.stateNode=e,Fc(t))}return Bc(t),null;case 5:if(Se(t),a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Fc(t);else{if(!r){if(t.stateNode===null)throw Error(i(166));return Bc(t),null}if(o=he.current,Ji(t))Ki(t,o);else{var s=Vd(_e.current);switch(o){case 1:o=s.createElementNS(`http://www.w3.org/2000/svg`,a);break;case 2:o=s.createElementNS(`http://www.w3.org/1998/Math/MathML`,a);break;default:switch(a){case`svg`:o=s.createElementNS(`http://www.w3.org/2000/svg`,a);break;case`math`:o=s.createElementNS(`http://www.w3.org/1998/Math/MathML`,a);break;case`script`:o=s.createElement(`div`),o.innerHTML=`<script><\/script>`,o=o.removeChild(o.firstChild);break;case`select`:o=typeof r.is==`string`?s.createElement(`select`,{is:r.is}):s.createElement(`select`),r.multiple?o.multiple=!0:r.size&&(o.size=r.size);break;default:o=typeof r.is==`string`?s.createElement(a,{is:r.is}):s.createElement(a)}}o[ht]=t,o[gt]=r;a:for(s=t.child;s!==null;){if(s.tag===5||s.tag===6)o.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break a;for(;s.sibling===null;){if(s.return===null||s.return===t)break a;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=o;a:switch(Fd(o,a,r),a){case`button`:case`input`:case`select`:case`textarea`:r=!!r.autoFocus;break a;case`img`:r=!0;break a;default:r=!1}r&&Fc(t)}}return Bc(t),Ic(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==r&&Fc(t);else{if(typeof r!=`string`&&t.stateNode===null)throw Error(i(166));if(e=_e.current,Ji(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,a=Bi,a!==null)switch(a.tag){case 27:case 5:r=a.memoizedProps}e[ht]=t,e=!!(e.nodeValue===n||r!==null&&!0===r.suppressHydrationWarning||Nd(e.nodeValue,n)),e||Gi(t,!0)}else e=Vd(e).createTextNode(r),e[ht]=t,t.stateNode=e}return Bc(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(r=Ji(t),n!==null){if(e===null){if(!r)throw Error(i(318));if(e=t.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(i(557));e[ht]=t}else Yi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Bc(t),e=!1}else n=Xi(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(_o(t),t):(_o(t),null);if(t.flags&128)throw Error(i(558))}return Bc(t),null;case 13:if(r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(a=Ji(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(i(318));if(a=t.memoizedState,a=a===null?null:a.dehydrated,!a)throw Error(i(317));a[ht]=t}else Yi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Bc(t),a=!1}else a=Xi(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return t.flags&256?(_o(t),t):(_o(t),null)}return _o(t),t.flags&128?(t.lanes=n,t):(n=r!==null,e=e!==null&&e.memoizedState!==null,n&&(r=t.child,a=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(a=r.alternate.memoizedState.cachePool.pool),o=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),o!==a&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Rc(t,t.updateQueue),Bc(t),null);case 4:return be(),e===null&&wd(t.stateNode.containerInfo),Bc(t),null;case 10:return na(t.type),Bc(t),null;case 19:if(me(vo),r=t.memoizedState,r===null)return Bc(t),null;if(a=(t.flags&128)!=0,o=r.rendering,o===null)if(a)zc(r,!1);else{if(Kl!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=yo(e),o!==null){for(t.flags|=128,zc(r,!1),e=o.updateQueue,t.updateQueue=e,Rc(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)vi(n,e),n=n.sibling;return O(vo,vo.current&1|2),M&&Fi(t,r.treeForkCount),t.child}e=e.sibling}r.tail!==null&&Fe()>ru&&(t.flags|=128,a=!0,zc(r,!1),t.lanes=4194304)}else{if(!a)if(e=yo(o),e!==null){if(t.flags|=128,a=!0,e=e.updateQueue,t.updateQueue=e,Rc(t,e),zc(r,!0),r.tail===null&&r.tailMode===`hidden`&&!o.alternate&&!M)return Bc(t),null}else 2*Fe()-r.renderingStartTime>ru&&n!==536870912&&(t.flags|=128,a=!0,zc(r,!1),t.lanes=4194304);r.isBackwards?(o.sibling=t.child,t.child=o):(e=r.last,e===null?t.child=o:e.sibling=o,r.last=o)}return r.tail===null?(Bc(t),null):(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=Fe(),e.sibling=null,n=vo.current,O(vo,a?n&1|2:n&1),M&&Fi(t,r.treeForkCount),e);case 22:case 23:return _o(t),lo(),r=t.memoizedState!==null,e===null?r&&(t.flags|=8192):e.memoizedState!==null!==r&&(t.flags|=8192),r?n&536870912&&!(t.flags&128)&&(Bc(t),t.subtreeFlags&6&&(t.flags|=8192)):Bc(t),n=t.updateQueue,n!==null&&Rc(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),r=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),e!==null&&me(Ta),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),na(ma),Bc(t),null;case 25:return null;case 30:return null}throw Error(i(156,t.tag))}function Hc(e,t){switch(Ri(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return na(ma),be(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Se(t),null;case 31:if(t.memoizedState!==null){if(_o(t),t.alternate===null)throw Error(i(340));Yi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(_o(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));Yi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return me(vo),null;case 4:return be(),null;case 10:return na(t.type),null;case 22:case 23:return _o(t),lo(),e!==null&&me(Ta),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return na(ma),null;case 25:return null;default:return null}}function H(e,t){switch(Ri(t),t.tag){case 3:na(ma),be();break;case 26:case 27:case 5:Se(t);break;case 4:be();break;case 31:t.memoizedState!==null&&_o(t);break;case 13:_o(t);break;case 19:me(vo);break;case 10:na(t.type);break;case 22:case 23:_o(t),lo(),e!==null&&me(Ta);break;case 24:na(ma)}}function Uc(e,t){try{var n=t.updateQueue,r=n===null?null:n.lastEffect;if(r!==null){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var a=n.create,o=n.inst;r=a(),o.destroy=r}n=n.next}while(n!==i)}}catch(e){Y(t,t.return,e)}}function Wc(e,t,n){try{var r=t.updateQueue,i=r===null?null:r.lastEffect;if(i!==null){var a=i.next;r=a;do{if((r.tag&e)===e){var o=r.inst,s=o.destroy;if(s!==void 0){o.destroy=void 0,i=t;var c=n,l=s;try{l()}catch(e){Y(i,c,e)}}}r=r.next}while(r!==a)}}catch(e){Y(t,t.return,e)}}function Gc(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{io(t,n)}catch(t){Y(e,e.return,t)}}}function Kc(e,t,n){n.props=I(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(n){Y(e,t,n)}}function qc(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof n==`function`?e.refCleanup=n(r):n.current=r}}catch(n){Y(e,t,n)}}function Jc(e,t){var n=e.ref,r=e.refCleanup;if(n!==null)if(typeof r==`function`)try{r()}catch(n){Y(e,t,n)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n==`function`)try{n(null)}catch(n){Y(e,t,n)}else n.current=null}function Yc(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{a:switch(t){case`button`:case`input`:case`select`:case`textarea`:n.autoFocus&&r.focus();break a;case`img`:n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(t){Y(e,e.return,t)}}function Xc(e,t,n){try{var r=e.stateNode;Id(r,e.type,n,t),r[gt]=t}catch(t){Y(e,e.return,t)}}function Zc(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Qd(e.type)||e.tag===4}function Qc(e){a:for(;;){for(;e.sibling===null;){if(e.return===null||Zc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Qd(e.type)||e.flags&2||e.child===null||e.tag===4)continue a;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function $c(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName===`HTML`?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName===`HTML`?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=cn));else if(r!==4&&(r===27&&Qd(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for($c(e,t,n),e=e.sibling;e!==null;)$c(e,t,n),e=e.sibling}function el(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(r===27&&Qd(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(el(e,t,n),e=e.sibling;e!==null;)el(e,t,n),e=e.sibling}function tl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Fd(t,r,n),t[ht]=e,t[gt]=n}catch(t){Y(e,e.return,t)}}var nl=!1,U=!1,rl=!1,il=typeof WeakSet==`function`?WeakSet:Set,W=null;function al(e,t){if(e=e.containerInfo,zd=cp,e=Pr(e),Fr(e)){if(`selectionStart`in e)var n={start:e.selectionStart,end:e.selectionEnd};else a:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break a}var s=0,c=-1,l=-1,u=0,d=0,f=e,p=null;b:for(;;){for(var m;f!==n||a!==0&&f.nodeType!==3||(c=s+a),f!==o||r!==0&&f.nodeType!==3||(l=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===e)break b;if(p===n&&++u===a&&(c=s),p===o&&++d===r&&(l=s),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}n=c===-1||l===-1?null:{start:c,end:l}}else n=null}n||={start:0,end:0}}else n=null;for(Bd={focusedElem:e,selectionRange:n},cp=!1,W=t;W!==null;)if(t=W,e=t.child,t.subtreeFlags&1028&&e!==null)e.return=t,W=e;else for(;W!==null;){switch(t=W,o=t.alternate,e=t.flags,t.tag){case 0:if(e&4&&(e=t.updateQueue,e=e===null?null:e.events,e!==null))for(n=0;n<e.length;n++)a=e[n],a.ref.impl=a.nextImpl;break;case 11:case 15:break;case 1:if(e&1024&&o!==null){e=void 0,n=t,a=o.memoizedProps,o=o.memoizedState,r=n.stateNode;try{var h=I(n.type,a);e=r.getSnapshotBeforeUpdate(h,o),r.__reactInternalSnapshotBeforeUpdate=e}catch(e){Y(n,n.return,e)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)tf(e);else if(n===1)switch(e.nodeName){case`HEAD`:case`HTML`:case`BODY`:tf(e);break;default:e.textContent=``}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(i(163))}if(e=t.sibling,e!==null){e.return=t.return,W=e;break}W=t.return}}function ol(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:bl(e,n),r&4&&Uc(5,n);break;case 1:if(bl(e,n),r&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(e){Y(n,n.return,e)}else{var i=I(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(e){Y(n,n.return,e)}}r&64&&Gc(n),r&512&&qc(n,n.return);break;case 3:if(bl(e,n),r&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{io(e,t)}catch(e){Y(n,n.return,e)}}break;case 27:t===null&&r&4&&tl(n);case 26:case 5:bl(e,n),t===null&&r&4&&Yc(n),r&512&&qc(n,n.return);break;case 12:bl(e,n);break;case 31:bl(e,n),r&4&&dl(e,n);break;case 13:bl(e,n),r&4&&fl(e,n),r&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Xu.bind(null,n),cf(e,n))));break;case 22:if(r=n.memoizedState!==null||nl,!r){t=t!==null&&t.memoizedState!==null||U,i=nl;var a=U;nl=r,(U=t)&&!a?Sl(e,n,(n.subtreeFlags&8772)!=0):bl(e,n),nl=i,U=a}break;case 30:break;default:bl(e,n)}}function sl(e){var t=e.alternate;t!==null&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Ct(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var G=null,cl=!1;function ll(e,t,n){for(n=n.child;n!==null;)ul(e,t,n),n=n.sibling}function ul(e,t,n){if(Ge&&typeof Ge.onCommitFiberUnmount==`function`)try{Ge.onCommitFiberUnmount(We,n)}catch{}switch(n.tag){case 26:U||Jc(n,t),ll(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:U||Jc(n,t);var r=G,i=cl;Qd(n.type)&&(G=n.stateNode,cl=!1),ll(e,t,n),mf(n.stateNode),G=r,cl=i;break;case 5:U||Jc(n,t);case 6:if(r=G,i=cl,G=null,ll(e,t,n),G=r,cl=i,G!==null)if(cl)try{(G.nodeType===9?G.body:G.nodeName===`HTML`?G.ownerDocument.body:G).removeChild(n.stateNode)}catch(e){Y(n,t,e)}else try{G.removeChild(n.stateNode)}catch(e){Y(n,t,e)}break;case 18:G!==null&&(cl?(e=G,$d(e.nodeType===9?e.body:e.nodeName===`HTML`?e.ownerDocument.body:e,n.stateNode),Pp(e)):$d(G,n.stateNode));break;case 4:r=G,i=cl,G=n.stateNode.containerInfo,cl=!0,ll(e,t,n),G=r,cl=i;break;case 0:case 11:case 14:case 15:Wc(2,n,t),U||Wc(4,n,t),ll(e,t,n);break;case 1:U||(Jc(n,t),r=n.stateNode,typeof r.componentWillUnmount==`function`&&Kc(n,t,r)),ll(e,t,n);break;case 21:ll(e,t,n);break;case 22:U=(r=U)||n.memoizedState!==null,ll(e,t,n),U=r;break;default:ll(e,t,n)}}function dl(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Pp(e)}catch(e){Y(t,t.return,e)}}}function fl(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Pp(e)}catch(e){Y(t,t.return,e)}}function pl(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new il),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new il),t;default:throw Error(i(435,e.tag))}}function ml(e,t){var n=pl(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=Zu.bind(null,e,t);t.then(r,r)}})}function hl(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r],o=e,s=t,c=s;a:for(;c!==null;){switch(c.tag){case 27:if(Qd(c.type)){G=c.stateNode,cl=!1;break a}break;case 5:G=c.stateNode,cl=!1;break a;case 3:case 4:G=c.stateNode.containerInfo,cl=!0;break a}c=c.return}if(G===null)throw Error(i(160));ul(o,s,a),G=null,cl=!1,o=a.alternate,o!==null&&(o.return=null),a.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)_l(t,e),t=t.sibling}var gl=null;function _l(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:hl(t,e),vl(e),r&4&&(Wc(3,e,e.return),Uc(3,e),Wc(5,e,e.return));break;case 1:hl(t,e),vl(e),r&512&&(U||n===null||Jc(n,n.return)),r&64&&nl&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?r:n.concat(r))));break;case 26:var a=gl;if(hl(t,e),vl(e),r&512&&(U||n===null||Jc(n,n.return)),r&4){var o=n===null?null:n.memoizedState;if(r=e.memoizedState,n===null)if(r===null)if(e.stateNode===null){a:{r=e.type,n=e.memoizedProps,a=a.ownerDocument||a;b:switch(r){case`title`:o=a.getElementsByTagName(`title`)[0],(!o||o[St]||o[ht]||o.namespaceURI===`http://www.w3.org/2000/svg`||o.hasAttribute(`itemprop`))&&(o=a.createElement(r),a.head.insertBefore(o,a.querySelector(`head > title`))),Fd(o,r,n),o[ht]=e,Ot(o),r=o;break a;case`link`:var s=Hf(`link`,`href`,a).get(r+(n.href||``));if(s){for(var c=0;c<s.length;c++)if(o=s[c],o.getAttribute(`href`)===(n.href==null||n.href===``?null:n.href)&&o.getAttribute(`rel`)===(n.rel==null?null:n.rel)&&o.getAttribute(`title`)===(n.title==null?null:n.title)&&o.getAttribute(`crossorigin`)===(n.crossOrigin==null?null:n.crossOrigin)){s.splice(c,1);break b}}o=a.createElement(r),Fd(o,r,n),a.head.appendChild(o);break;case`meta`:if(s=Hf(`meta`,`content`,a).get(r+(n.content||``))){for(c=0;c<s.length;c++)if(o=s[c],o.getAttribute(`content`)===(n.content==null?null:``+n.content)&&o.getAttribute(`name`)===(n.name==null?null:n.name)&&o.getAttribute(`property`)===(n.property==null?null:n.property)&&o.getAttribute(`http-equiv`)===(n.httpEquiv==null?null:n.httpEquiv)&&o.getAttribute(`charset`)===(n.charSet==null?null:n.charSet)){s.splice(c,1);break b}}o=a.createElement(r),Fd(o,r,n),a.head.appendChild(o);break;default:throw Error(i(468,r))}o[ht]=e,Ot(o),r=o}e.stateNode=r}else Uf(a,e.type,e.stateNode);else e.stateNode=Lf(a,r,e.memoizedProps);else o===r?r===null&&e.stateNode!==null&&Xc(e,e.memoizedProps,n.memoizedProps):(o===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):o.count--,r===null?Uf(a,e.type,e.stateNode):Lf(a,r,e.memoizedProps))}break;case 27:hl(t,e),vl(e),r&512&&(U||n===null||Jc(n,n.return)),n!==null&&r&4&&Xc(e,e.memoizedProps,n.memoizedProps);break;case 5:if(hl(t,e),vl(e),r&512&&(U||n===null||Jc(n,n.return)),e.flags&32){a=e.stateNode;try{$t(a,``)}catch(t){Y(e,e.return,t)}}r&4&&e.stateNode!=null&&(a=e.memoizedProps,Xc(e,a,n===null?a:n.memoizedProps)),r&1024&&(rl=!0);break;case 6:if(hl(t,e),vl(e),r&4){if(e.stateNode===null)throw Error(i(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(t){Y(e,e.return,t)}}break;case 3:if(Vf=null,a=gl,gl=_f(t.containerInfo),hl(t,e),gl=a,vl(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Pp(t.containerInfo)}catch(t){Y(e,e.return,t)}rl&&(rl=!1,yl(e));break;case 4:r=gl,gl=_f(e.stateNode.containerInfo),hl(t,e),vl(e),gl=r;break;case 12:hl(t,e),vl(e);break;case 31:hl(t,e),vl(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,ml(e,r)));break;case 13:hl(t,e),vl(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(tu=Fe()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,ml(e,r)));break;case 22:a=e.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,u=nl,d=U;if(nl=u||a,U=d||l,hl(t,e),U=d,nl=u,vl(e),r&8192)a:for(t=e.stateNode,t._visibility=a?t._visibility&-2:t._visibility|1,a&&(n===null||l||nl||U||xl(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){l=n=t;try{if(o=l.stateNode,a)s=o.style,typeof s.setProperty==`function`?s.setProperty(`display`,`none`,`important`):s.display=`none`;else{c=l.stateNode;var f=l.memoizedProps.style,p=f!=null&&f.hasOwnProperty(`display`)?f.display:null;c.style.display=p==null||typeof p==`boolean`?``:(``+p).trim()}}catch(e){Y(l,l.return,e)}}}else if(t.tag===6){if(n===null){l=t;try{l.stateNode.nodeValue=a?``:l.memoizedProps}catch(e){Y(l,l.return,e)}}}else if(t.tag===18){if(n===null){l=t;try{var m=l.stateNode;a?ef(m,!0):ef(l.stateNode,!1)}catch(e){Y(l,l.return,e)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break a;for(;t.sibling===null;){if(t.return===null||t.return===e)break a;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}r&4&&(r=e.updateQueue,r!==null&&(n=r.retryQueue,n!==null&&(r.retryQueue=null,ml(e,n))));break;case 19:hl(t,e),vl(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,ml(e,r)));break;case 30:break;case 21:break;default:hl(t,e),vl(e)}}function vl(e){var t=e.flags;if(t&2){try{for(var n,r=e.return;r!==null;){if(Zc(r)){n=r;break}r=r.return}if(n==null)throw Error(i(160));switch(n.tag){case 27:var a=n.stateNode;el(e,Qc(e),a);break;case 5:var o=n.stateNode;n.flags&32&&($t(o,``),n.flags&=-33),el(e,Qc(e),o);break;case 3:case 4:var s=n.stateNode.containerInfo;$c(e,Qc(e),s);break;default:throw Error(i(161))}}catch(t){Y(e,e.return,t)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function yl(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;yl(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function bl(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)ol(e,t.alternate,t),t=t.sibling}function xl(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Wc(4,t,t.return),xl(t);break;case 1:Jc(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount==`function`&&Kc(t,t.return,n),xl(t);break;case 27:mf(t.stateNode);case 26:case 5:Jc(t,t.return),xl(t);break;case 22:t.memoizedState===null&&xl(t);break;case 30:xl(t);break;default:xl(t)}e=e.sibling}}function Sl(e,t,n){for(n&&=(t.subtreeFlags&8772)!=0,t=t.child;t!==null;){var r=t.alternate,i=e,a=t,o=a.flags;switch(a.tag){case 0:case 11:case 15:Sl(i,a,n),Uc(4,a);break;case 1:if(Sl(i,a,n),r=a,i=r.stateNode,typeof i.componentDidMount==`function`)try{i.componentDidMount()}catch(e){Y(r,r.return,e)}if(r=a,i=r.updateQueue,i!==null){var s=r.stateNode;try{var c=i.shared.hiddenCallbacks;if(c!==null)for(i.shared.hiddenCallbacks=null,i=0;i<c.length;i++)ro(c[i],s)}catch(e){Y(r,r.return,e)}}n&&o&64&&Gc(a),qc(a,a.return);break;case 27:tl(a);case 26:case 5:Sl(i,a,n),n&&r===null&&o&4&&Yc(a),qc(a,a.return);break;case 12:Sl(i,a,n);break;case 31:Sl(i,a,n),n&&o&4&&dl(i,a);break;case 13:Sl(i,a,n),n&&o&4&&fl(i,a);break;case 22:a.memoizedState===null&&Sl(i,a,n),qc(a,a.return);break;case 30:break;default:Sl(i,a,n)}t=t.sibling}}function Cl(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&ga(n))}function wl(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ga(e))}function Tl(e,t,n,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)El(e,t,n,r),t=t.sibling}function El(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Tl(e,t,n,r),i&2048&&Uc(9,t);break;case 1:Tl(e,t,n,r);break;case 3:Tl(e,t,n,r),i&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ga(e)));break;case 12:if(i&2048){Tl(e,t,n,r),e=t.stateNode;try{var a=t.memoizedProps,o=a.id,s=a.onPostCommit;typeof s==`function`&&s(o,t.alternate===null?`mount`:`update`,e.passiveEffectDuration,-0)}catch(e){Y(t,t.return,e)}}else Tl(e,t,n,r);break;case 31:Tl(e,t,n,r);break;case 13:Tl(e,t,n,r);break;case 23:break;case 22:a=t.stateNode,o=t.alternate,t.memoizedState===null?a._visibility&2?Tl(e,t,n,r):(a._visibility|=2,Dl(e,t,n,r,(t.subtreeFlags&10256)!=0||!1)):a._visibility&2?Tl(e,t,n,r):Ol(e,t),i&2048&&Cl(o,t);break;case 24:Tl(e,t,n,r),i&2048&&wl(t.alternate,t);break;default:Tl(e,t,n,r)}}function Dl(e,t,n,r,i){for(i&&=(t.subtreeFlags&10256)!=0||!1,t=t.child;t!==null;){var a=e,o=t,s=n,c=r,l=o.flags;switch(o.tag){case 0:case 11:case 15:Dl(a,o,s,c,i),Uc(8,o);break;case 23:break;case 22:var u=o.stateNode;o.memoizedState===null?(u._visibility|=2,Dl(a,o,s,c,i)):u._visibility&2?Dl(a,o,s,c,i):Ol(a,o),i&&l&2048&&Cl(o.alternate,o);break;case 24:Dl(a,o,s,c,i),i&&l&2048&&wl(o.alternate,o);break;default:Dl(a,o,s,c,i)}t=t.sibling}}function Ol(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:Ol(n,r),i&2048&&Cl(r.alternate,r);break;case 24:Ol(n,r),i&2048&&wl(r.alternate,r);break;default:Ol(n,r)}t=t.sibling}}var kl=8192;function Al(e,t,n){if(e.subtreeFlags&kl)for(e=e.child;e!==null;)jl(e,t,n),e=e.sibling}function jl(e,t,n){switch(e.tag){case 26:Al(e,t,n),e.flags&kl&&e.memoizedState!==null&&Kf(n,gl,e.memoizedState,e.memoizedProps);break;case 5:Al(e,t,n);break;case 3:case 4:var r=gl;gl=_f(e.stateNode.containerInfo),Al(e,t,n),gl=r;break;case 22:e.memoizedState===null&&(r=e.alternate,r!==null&&r.memoizedState!==null?(r=kl,kl=16777216,Al(e,t,n),kl=r):Al(e,t,n));break;default:Al(e,t,n)}}function Ml(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Nl(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];W=r,Il(r,e)}Ml(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Pl(e),e=e.sibling}function Pl(e){switch(e.tag){case 0:case 11:case 15:Nl(e),e.flags&2048&&Wc(9,e,e.return);break;case 3:Nl(e);break;case 12:Nl(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Fl(e)):Nl(e);break;default:Nl(e)}}function Fl(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];W=r,Il(r,e)}Ml(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Wc(8,t,t.return),Fl(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Fl(t));break;default:Fl(t)}e=e.sibling}}function Il(e,t){for(;W!==null;){var n=W;switch(n.tag){case 0:case 11:case 15:Wc(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var r=n.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:ga(n.memoizedState.cache)}if(r=n.child,r!==null)r.return=n,W=r;else a:for(n=e;W!==null;){r=W;var i=r.sibling,a=r.return;if(sl(r),r===n){W=null;break a}if(i!==null){i.return=a,W=i;break a}W=a}}}var Ll={getCacheForType:function(e){var t=ca(ma),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return ca(ma).controller.signal}},Rl=typeof WeakMap==`function`?WeakMap:Map,K=0,zl=null,q=null,J=0,Bl=0,Vl=null,Hl=!1,Ul=!1,Wl=!1,Gl=0,Kl=0,ql=0,Jl=0,Yl=0,Xl=0,Zl=0,Ql=null,$l=null,eu=!1,tu=0,nu=0,ru=1/0,iu=null,au=null,ou=0,su=null,cu=null,lu=0,uu=0,du=null,fu=null,pu=0,mu=null;function hu(){return K&2&&J!==0?J&-J:E.T===null?ft():pd()}function gu(){if(Xl===0)if(!(J&536870912)||M){var e=Ze;Ze<<=1,!(Ze&3932160)&&(Ze=262144),Xl=e}else Xl=536870912;return e=uo.current,e!==null&&(e.flags|=32),Xl}function _u(e,t,n){(e===zl&&(Bl===2||Bl===9)||e.cancelPendingCommit!==null)&&(wu(e,0),xu(e,J,Xl,!1)),at(e,n),(!(K&2)||e!==zl)&&(e===zl&&(!(K&2)&&(Jl|=n),Kl===4&&xu(e,J,Xl,!1)),ad(e))}function vu(e,t,n){if(K&6)throw Error(i(327));var r=!n&&(t&127)==0&&(t&e.expiredLanes)===0||tt(e,t),a=r?Mu(e,t):Au(e,t,!0),o=r;do{if(a===0){Ul&&!r&&xu(e,t,0,!1);break}else{if(n=e.current.alternate,o&&!bu(n)){a=Au(e,t,!1),o=!1;continue}if(a===2){if(o=t,e.errorRecoveryDisabledLanes&o)var s=0;else s=e.pendingLanes&-536870913,s=s===0?s&536870912?536870912:0:s;if(s!==0){t=s;a:{var c=e;a=Ql;var l=c.current.memoizedState.isDehydrated;if(l&&(wu(c,s).flags|=256),s=Au(c,s,!1),s!==2){if(Wl&&!l){c.errorRecoveryDisabledLanes|=o,Jl|=o,a=4;break a}o=$l,$l=a,o!==null&&($l===null?$l=o:$l.push.apply($l,o))}a=s}if(o=!1,a!==2)continue}}if(a===1){wu(e,0),xu(e,t,0,!0);break}a:{switch(r=e,o=a,o){case 0:case 1:throw Error(i(345));case 4:if((t&4194048)!==t)break;case 6:xu(r,t,Xl,!Hl);break a;case 2:$l=null;break;case 3:case 5:break;default:throw Error(i(329))}if((t&62914560)===t&&(a=tu+300-Fe(),10<a)){if(xu(r,t,Xl,!Hl),et(r,0,!0)!==0)break a;lu=t,r.timeoutHandle=qd(yu.bind(null,r,n,$l,iu,eu,t,Xl,Jl,Zl,Hl,o,`Throttled`,-0,0),a);break a}yu(r,n,$l,iu,eu,t,Xl,Jl,Zl,Hl,o,null,-0,0)}}break}while(1);ad(e)}function yu(e,t,n,r,i,a,o,s,c,l,u,d,f,p){if(e.timeoutHandle=-1,d=t.subtreeFlags,d&8192||(d&16785408)==16785408){d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:cn},jl(t,a,d);var m=(a&62914560)===a?tu-Fe():(a&4194048)===a?nu-Fe():0;if(m=Jf(d,m),m!==null){lu=a,e.cancelPendingCommit=m(zu.bind(null,e,t,a,n,r,i,o,s,c,u,d,null,f,p)),xu(e,a,o,!l);return}}zu(e,t,a,n,r,i,o,s,c)}function bu(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!kr(a(),i))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function xu(e,t,n,r){t&=~Yl,t&=~Jl,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var a=31-qe(i),o=1<<a;r[a]=-1,i&=~o}n!==0&&st(e,n,t)}function Su(){return K&6?!0:(od(0,!1),!1)}function Cu(){if(q!==null){if(Bl===0)var e=q.return;else e=q,ea=$i=null,Ro(e),za=null,Ba=0,e=q;for(;e!==null;)H(e.alternate,e),e=e.return;q=null}}function wu(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Jd(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),lu=0,Cu(),zl=e,q=n=_i(e.current,null),J=t,Bl=0,Vl=null,Hl=!1,Ul=tt(e,t),Wl=!1,Zl=Xl=Yl=Jl=ql=Kl=0,$l=Ql=null,eu=!1,t&8&&(t|=t&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=t;0<r;){var i=31-qe(r),a=1<<i;t|=e[i],r&=~a}return Gl=t,si(),n}function Tu(e,t){N=null,E.H=Js,t===ka||t===ja?(t=La(),Bl=3):t===Aa?(t=La(),Bl=4):Bl=t===sc?8:typeof t==`object`&&t&&typeof t.then==`function`?6:1,Vl=t,q===null&&(Kl=1,tc(e,Ti(t,e.current)))}function Eu(){var e=uo.current;return e===null?!0:(J&4194048)===J?fo===null:(J&62914560)===J||J&536870912?e===fo:!1}function Du(){var e=E.H;return E.H=Js,e===null?Js:e}function Ou(){var e=E.A;return E.A=Ll,e}function ku(){Kl=4,Hl||(J&4194048)!==J&&uo.current!==null||(Ul=!0),!(ql&134217727)&&!(Jl&134217727)||zl===null||xu(zl,J,Xl,!1)}function Au(e,t,n){var r=K;K|=2;var i=Du(),a=Ou();(zl!==e||J!==t)&&(iu=null,wu(e,t)),t=!1;var o=Kl;a:do try{if(Bl!==0&&q!==null){var s=q,c=Vl;switch(Bl){case 8:Cu(),o=6;break a;case 3:case 2:case 9:case 6:uo.current===null&&(t=!0);var l=Bl;if(Bl=0,Vl=null,Iu(e,s,c,l),n&&Ul){o=0;break a}break;default:l=Bl,Bl=0,Vl=null,Iu(e,s,c,l)}}ju(),o=Kl;break}catch(t){Tu(e,t)}while(1);return t&&e.shellSuspendCounter++,ea=$i=null,K=r,E.H=i,E.A=a,q===null&&(zl=null,J=0,si()),o}function ju(){for(;q!==null;)Pu(q)}function Mu(e,t){var n=K;K|=2;var r=Du(),a=Ou();zl!==e||J!==t?(iu=null,ru=Fe()+500,wu(e,t)):Ul=tt(e,t);a:do try{if(Bl!==0&&q!==null){t=q;var o=Vl;b:switch(Bl){case 1:Bl=0,Vl=null,Iu(e,t,o,1);break;case 2:case 9:if(Na(o)){Bl=0,Vl=null,Fu(t);break}t=function(){Bl!==2&&Bl!==9||zl!==e||(Bl=7),ad(e)},o.then(t,t);break a;case 3:Bl=7;break a;case 4:Bl=5;break a;case 7:Na(o)?(Bl=0,Vl=null,Fu(t)):(Bl=0,Vl=null,Iu(e,t,o,7));break;case 5:var s=null;switch(q.tag){case 26:s=q.memoizedState;case 5:case 27:var c=q;if(s?Gf(s):c.stateNode.complete){Bl=0,Vl=null;var l=c.sibling;if(l!==null)q=l;else{var u=c.return;u===null?q=null:(q=u,Lu(u))}break b}}Bl=0,Vl=null,Iu(e,t,o,5);break;case 6:Bl=0,Vl=null,Iu(e,t,o,6);break;case 8:Cu(),Kl=6;break a;default:throw Error(i(462))}}Nu();break}catch(t){Tu(e,t)}while(1);return ea=$i=null,E.H=r,E.A=a,K=n,q===null?(zl=null,J=0,si(),Kl):0}function Nu(){for(;q!==null&&!Ne();)Pu(q)}function Pu(e){var t=Pc(e.alternate,e,Gl);e.memoizedProps=e.pendingProps,t===null?Lu(e):q=t}function Fu(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=bc(n,t,t.pendingProps,t.type,void 0,J);break;case 11:t=bc(n,t,t.pendingProps,t.type.render,t.ref,J);break;case 5:Ro(t);default:H(n,t),t=q=vi(t,Gl),t=Pc(n,t,Gl)}e.memoizedProps=e.pendingProps,t===null?Lu(e):q=t}function Iu(e,t,n,r){ea=$i=null,Ro(t),za=null,Ba=0;var i=t.return;try{if(oc(e,i,t,n,J)){Kl=1,tc(e,Ti(n,e.current)),q=null;return}}catch(t){if(i!==null)throw q=i,t;Kl=1,tc(e,Ti(n,e.current)),q=null;return}t.flags&32768?(M||r===1?e=!0:Ul||J&536870912?e=!1:(Hl=e=!0,(r===2||r===9||r===3||r===6)&&(r=uo.current,r!==null&&r.tag===13&&(r.flags|=16384))),Ru(t,e)):Lu(t)}function Lu(e){var t=e;do{if(t.flags&32768){Ru(t,Hl);return}e=t.return;var n=Vc(t.alternate,t,Gl);if(n!==null){q=n;return}if(t=t.sibling,t!==null){q=t;return}q=t=e}while(t!==null);Kl===0&&(Kl=5)}function Ru(e,t){do{var n=Hc(e.alternate,e);if(n!==null){n.flags&=32767,q=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){q=e;return}q=e=n}while(e!==null);Kl=6,q=null}function zu(e,t,n,r,a,o,s,c,l){e.cancelPendingCommit=null;do Wu();while(ou!==0);if(K&6)throw Error(i(327));if(t!==null){if(t===e.current)throw Error(i(177));if(o=t.lanes|t.childLanes,o|=oi,ot(e,n,o,s,c,l),e===zl&&(q=zl=null,J=0),cu=t,su=e,lu=n,uu=o,du=a,fu=r,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,Qu(ze,function(){return Gu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(t.flags&13878)!=0,t.subtreeFlags&13878||r){r=E.T,E.T=null,a=D.p,D.p=2,s=K,K|=4;try{al(e,t,n)}finally{K=s,D.p=a,E.T=r}}ou=1,Bu(),Vu(),Hu()}}function Bu(){if(ou===1){ou=0;var e=su,t=cu,n=(t.flags&13878)!=0;if(t.subtreeFlags&13878||n){n=E.T,E.T=null;var r=D.p;D.p=2;var i=K;K|=4;try{_l(t,e);var a=Bd,o=Pr(e.containerInfo),s=a.focusedElem,c=a.selectionRange;if(o!==s&&s&&s.ownerDocument&&Nr(s.ownerDocument.documentElement,s)){if(c!==null&&Fr(s)){var l=c.start,u=c.end;if(u===void 0&&(u=l),`selectionStart`in s)s.selectionStart=l,s.selectionEnd=Math.min(u,s.value.length);else{var d=s.ownerDocument||document,f=d&&d.defaultView||window;if(f.getSelection){var p=f.getSelection(),m=s.textContent.length,h=Math.min(c.start,m),g=c.end===void 0?h:Math.min(c.end,m);!p.extend&&h>g&&(o=g,g=h,h=o);var _=Mr(s,h),v=Mr(s,g);if(_&&v&&(p.rangeCount!==1||p.anchorNode!==_.node||p.anchorOffset!==_.offset||p.focusNode!==v.node||p.focusOffset!==v.offset)){var y=d.createRange();y.setStart(_.node,_.offset),p.removeAllRanges(),h>g?(p.addRange(y),p.extend(v.node,v.offset)):(y.setEnd(v.node,v.offset),p.addRange(y))}}}}for(d=[],p=s;p=p.parentNode;)p.nodeType===1&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof s.focus==`function`&&s.focus(),s=0;s<d.length;s++){var b=d[s];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}cp=!!zd,Bd=zd=null}finally{K=i,D.p=r,E.T=n}}e.current=t,ou=2}}function Vu(){if(ou===2){ou=0;var e=su,t=cu,n=(t.flags&8772)!=0;if(t.subtreeFlags&8772||n){n=E.T,E.T=null;var r=D.p;D.p=2;var i=K;K|=4;try{ol(e,t.alternate,t)}finally{K=i,D.p=r,E.T=n}}ou=3}}function Hu(){if(ou===4||ou===3){ou=0,Pe();var e=su,t=cu,n=lu,r=fu;t.subtreeFlags&10256||t.flags&10256?ou=5:(ou=0,cu=su=null,Uu(e,e.pendingLanes));var i=e.pendingLanes;if(i===0&&(au=null),dt(n),t=t.stateNode,Ge&&typeof Ge.onCommitFiberRoot==`function`)try{Ge.onCommitFiberRoot(We,t,void 0,(t.current.flags&128)==128)}catch{}if(r!==null){t=E.T,i=D.p,D.p=2,E.T=null;try{for(var a=e.onRecoverableError,o=0;o<r.length;o++){var s=r[o];a(s.value,{componentStack:s.stack})}}finally{E.T=t,D.p=i}}lu&3&&Wu(),ad(e),i=e.pendingLanes,n&261930&&i&42?e===mu?pu++:(pu=0,mu=e):pu=0,od(0,!1)}}function Uu(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,ga(t)))}function Wu(){return Bu(),Vu(),Hu(),Gu()}function Gu(){if(ou!==5)return!1;var e=su,t=uu;uu=0;var n=dt(lu),r=E.T,a=D.p;try{D.p=32>n?32:n,E.T=null,n=du,du=null;var o=su,s=lu;if(ou=0,cu=su=null,lu=0,K&6)throw Error(i(331));var c=K;if(K|=4,Pl(o.current),El(o,o.current,s,n),K=c,od(0,!1),Ge&&typeof Ge.onPostCommitFiberRoot==`function`)try{Ge.onPostCommitFiberRoot(We,o)}catch{}return!0}finally{D.p=a,E.T=r,Uu(e,t)}}function Ku(e,t,n){t=Ti(n,t),t=rc(e.stateNode,t,2),e=Za(e,t,2),e!==null&&(at(e,2),ad(e))}function Y(e,t,n){if(e.tag===3)Ku(e,e,n);else for(;t!==null;){if(t.tag===3){Ku(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError==`function`||typeof r.componentDidCatch==`function`&&(au===null||!au.has(r))){e=Ti(n,e),n=ic(2),r=Za(t,n,2),r!==null&&(ac(n,r,t,e),at(r,2),ad(r));break}}t=t.return}}function qu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Rl;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(Wl=!0,i.add(n),e=Ju.bind(null,e,t,n),t.then(e,e))}function Ju(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,zl===e&&(J&n)===n&&(Kl===4||Kl===3&&(J&62914560)===J&&300>Fe()-tu?!(K&2)&&wu(e,0):Yl|=n,Zl===J&&(Zl=0)),ad(e)}function Yu(e,t){t===0&&(t=rt()),e=ui(e,t),e!==null&&(at(e,t),ad(e))}function Xu(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Yu(e,n)}function Zu(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(i(314))}r!==null&&r.delete(t),Yu(e,n)}function Qu(e,t){return je(e,t)}var $u=null,ed=null,td=!1,nd=!1,rd=!1,id=0;function ad(e){e!==ed&&e.next===null&&(ed===null?$u=ed=e:ed=ed.next=e),nd=!0,td||(td=!0,fd())}function od(e,t){if(!rd&&nd){rd=!0;do for(var n=!1,r=$u;r!==null;){if(!t)if(e!==0){var i=r.pendingLanes;if(i===0)var a=0;else{var o=r.suspendedLanes,s=r.pingedLanes;a=(1<<31-qe(42|e)+1)-1,a&=i&~(o&~s),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(n=!0,dd(r,a))}else a=J,a=et(r,r===zl?a:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),!(a&3)||tt(r,a)||(n=!0,dd(r,a));r=r.next}while(n);rd=!1}}function sd(){cd()}function cd(){nd=td=!1;var e=0;id!==0&&Kd()&&(e=id);for(var t=Fe(),n=null,r=$u;r!==null;){var i=r.next,a=ld(r,t);a===0?(r.next=null,n===null?$u=i:n.next=i,i===null&&(ed=n)):(n=r,(e!==0||a&3)&&(nd=!0)),r=i}ou!==0&&ou!==5||od(e,!1),id!==0&&(id=0)}function ld(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes&-62914561;0<a;){var o=31-qe(a),s=1<<o,c=i[o];c===-1?((s&n)===0||(s&r)!==0)&&(i[o]=nt(s,t)):c<=t&&(e.expiredLanes|=s),a&=~s}if(t=zl,n=J,n=et(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,n===0||e===t&&(Bl===2||Bl===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&Me(r),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||tt(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(r!==null&&Me(r),dt(n)){case 2:case 8:n=Re;break;case 32:n=ze;break;case 268435456:n=Ve;break;default:n=ze}return r=ud.bind(null,e),n=je(n,r),e.callbackPriority=t,e.callbackNode=n,t}return r!==null&&r!==null&&Me(r),e.callbackPriority=2,e.callbackNode=null,2}function ud(e,t){if(ou!==0&&ou!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Wu()&&e.callbackNode!==n)return null;var r=J;return r=et(e,e===zl?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(vu(e,r,t),ld(e,Fe()),e.callbackNode!=null&&e.callbackNode===n?ud.bind(null,e):null)}function dd(e,t){if(Wu())return null;vu(e,t,!0)}function fd(){Xd(function(){K&6?je(Le,sd):cd()})}function pd(){if(id===0){var e=ya;e===0&&(e=Xe,Xe<<=1,!(Xe&261888)&&(Xe=256)),id=e}return id}function md(e){return e==null||typeof e==`symbol`||typeof e==`boolean`?null:typeof e==`function`?e:sn(``+e)}function hd(e,t){var n=t.ownerDocument.createElement(`input`);return n.name=t.name,n.value=t.value,e.id&&n.setAttribute(`form`,e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function gd(e,t,n,r,i){if(t===`submit`&&n&&n.stateNode===i){var a=md((i[gt]||null).action),o=r.submitter;o&&(t=(t=o[gt]||null)?md(t.formAction):o.getAttribute(`formAction`),t!==null&&(a=t,o=null));var s=new kn(`action`,`action`,null,r,i);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(id!==0){var e=o?hd(i,o):new FormData(i);Ps(n,{pending:!0,data:e,method:i.method,action:a},null,e)}}else typeof a==`function`&&(s.preventDefault(),e=o?hd(i,o):new FormData(i),Ps(n,{pending:!0,data:e,method:i.method,action:a},a,e))},currentTarget:i}]})}}for(var _d=0;_d<ti.length;_d++){var vd=ti[_d];ni(vd.toLowerCase(),`on`+(vd[0].toUpperCase()+vd.slice(1)))}ni(qr,`onAnimationEnd`),ni(Jr,`onAnimationIteration`),ni(Yr,`onAnimationStart`),ni(`dblclick`,`onDoubleClick`),ni(`focusin`,`onFocus`),ni(`focusout`,`onBlur`),ni(Xr,`onTransitionRun`),ni(Zr,`onTransitionStart`),ni(Qr,`onTransitionCancel`),ni($r,`onTransitionEnd`),Mt(`onMouseEnter`,[`mouseout`,`mouseover`]),Mt(`onMouseLeave`,[`mouseout`,`mouseover`]),Mt(`onPointerEnter`,[`pointerout`,`pointerover`]),Mt(`onPointerLeave`,[`pointerout`,`pointerover`]),jt(`onChange`,`change click focusin focusout input keydown keyup selectionchange`.split(` `)),jt(`onSelect`,`focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange`.split(` `)),jt(`onBeforeInput`,[`compositionend`,`keypress`,`textInput`,`paste`]),jt(`onCompositionEnd`,`compositionend focusout keydown keypress keyup mousedown`.split(` `)),jt(`onCompositionStart`,`compositionstart focusout keydown keypress keyup mousedown`.split(` `)),jt(`onCompositionUpdate`,`compositionupdate focusout keydown keypress keyup mousedown`.split(` `));var yd=`abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting`.split(` `),bd=new Set(`beforetoggle cancel close invalid load scroll scrollend toggle`.split(` `).concat(yd));function xd(e,t){t=(t&4)!=0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;a:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==a&&i.isPropagationStopped())break a;a=s,i.currentTarget=l;try{a(i)}catch(e){ri(e)}i.currentTarget=null,a=c}else for(o=0;o<r.length;o++){if(s=r[o],c=s.instance,l=s.currentTarget,s=s.listener,c!==a&&i.isPropagationStopped())break a;a=s,i.currentTarget=l;try{a(i)}catch(e){ri(e)}i.currentTarget=null,a=c}}}}function X(e,t){var n=t[vt];n===void 0&&(n=t[vt]=new Set);var r=e+`__bubble`;n.has(r)||(Td(t,e,2,!1),n.add(r))}function Sd(e,t,n){var r=0;t&&(r|=4),Td(n,e,r,t)}var Cd=`_reactListening`+Math.random().toString(36).slice(2);function wd(e){if(!e[Cd]){e[Cd]=!0,kt.forEach(function(t){t!==`selectionchange`&&(bd.has(t)||Sd(t,!1,e),Sd(t,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Cd]||(t[Cd]=!0,Sd(`selectionchange`,!1,t))}}function Td(e,t,n,r){switch(hp(t)){case 2:var i=lp;break;case 8:i=up;break;default:i=dp}n=i.bind(null,t,n,e),i=void 0,!vn||t!==`touchstart`&&t!==`touchmove`&&t!==`wheel`||(i=!0),r?i===void 0?e.addEventListener(t,n,!0):e.addEventListener(t,n,{capture:!0,passive:i}):i===void 0?e.addEventListener(t,n,!1):e.addEventListener(t,n,{passive:i})}function Ed(e,t,n,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)a:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var c=r.stateNode.containerInfo;if(c===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&s.stateNode.containerInfo===i)return;s=s.return}for(;c!==null;){if(s=wt(c),s===null)return;if(l=s.tag,l===5||l===6||l===26||l===27){r=a=s;continue a}c=c.parentNode}}r=r.return}hn(function(){var r=a,i=un(n),s=[];a:{var c=ei.get(e);if(c!==void 0){var l=kn,u=e;switch(e){case`keypress`:if(wn(n)===0)break a;case`keydown`:case`keyup`:l=Kn;break;case`focusin`:u=`focus`,l=Rn;break;case`focusout`:u=`blur`,l=Rn;break;case`beforeblur`:case`afterblur`:l=Rn;break;case`click`:if(n.button===2)break a;case`auxclick`:case`dblclick`:case`mousedown`:case`mousemove`:case`mouseup`:case`mouseout`:case`mouseover`:case`contextmenu`:l=In;break;case`drag`:case`dragend`:case`dragenter`:case`dragexit`:case`dragleave`:case`dragover`:case`dragstart`:case`drop`:l=Ln;break;case`touchcancel`:case`touchend`:case`touchmove`:case`touchstart`:l=Jn;break;case qr:case Jr:case Yr:l=zn;break;case $r:l=Yn;break;case`scroll`:case`scrollend`:l=jn;break;case`wheel`:l=Xn;break;case`copy`:case`cut`:case`paste`:l=Bn;break;case`gotpointercapture`:case`lostpointercapture`:case`pointercancel`:case`pointerdown`:case`pointermove`:case`pointerout`:case`pointerover`:case`pointerup`:l=qn;break;case`toggle`:case`beforetoggle`:l=Zn}var d=(t&4)!=0,f=!d&&(e===`scroll`||e===`scrollend`),p=d?c===null?null:c+`Capture`:c;d=[];for(var m=r,h;m!==null;){var g=m;if(h=g.stateNode,g=g.tag,g!==5&&g!==26&&g!==27||h===null||p===null||(g=gn(m,p),g!=null&&d.push(Z(m,g,h))),f)break;m=m.return}0<d.length&&(c=new l(c,u,null,n,i),s.push({event:c,listeners:d}))}}if(!(t&7)){a:{if(c=e===`mouseover`||e===`pointerover`,l=e===`mouseout`||e===`pointerout`,c&&n!==ln&&(u=n.relatedTarget||n.fromElement)&&(wt(u)||u[_t]))break a;if((l||c)&&(c=i.window===i?i:(c=i.ownerDocument)?c.defaultView||c.parentWindow:window,l?(u=n.relatedTarget||n.toElement,l=r,u=u?wt(u):null,u!==null&&(f=o(u),d=u.tag,u!==f||d!==5&&d!==27&&d!==6)&&(u=null)):(l=null,u=r),l!==u)){if(d=In,g=`onMouseLeave`,p=`onMouseEnter`,m=`mouse`,(e===`pointerout`||e===`pointerover`)&&(d=qn,g=`onPointerLeave`,p=`onPointerEnter`,m=`pointer`),f=l==null?c:Et(l),h=u==null?c:Et(u),c=new d(g,m+`leave`,l,n,i),c.target=f,c.relatedTarget=h,g=null,wt(i)===r&&(d=new d(p,m+`enter`,u,n,i),d.target=h,d.relatedTarget=f,g=d),f=g,l&&u)b:{for(d=Od,p=l,m=u,h=0,g=p;g;g=d(g))h++;g=0;for(var _=m;_;_=d(_))g++;for(;0<h-g;)p=d(p),h--;for(;0<g-h;)m=d(m),g--;for(;h--;){if(p===m||m!==null&&p===m.alternate){d=p;break b}p=d(p),m=d(m)}d=null}else d=null;l!==null&&kd(s,c,l,d,!1),u!==null&&f!==null&&kd(s,f,u,d,!0)}}a:{if(c=r?Et(r):window,l=c.nodeName&&c.nodeName.toLowerCase(),l===`select`||l===`input`&&c.type===`file`)var v=_r;else if(dr(c))if(vr)v=Dr;else{v=Tr;var y=wr}else l=c.nodeName,!l||l.toLowerCase()!==`input`||c.type!==`checkbox`&&c.type!==`radio`?r&&rn(r.elementType)&&(v=_r):v=Er;if(v&&=v(e,r)){fr(s,v,n,i);break a}y&&y(e,c,r),e===`focusout`&&r&&c.type===`number`&&r.memoizedProps.value!=null&&Yt(c,`number`,c.value)}switch(y=r?Et(r):window,e){case`focusin`:(dr(y)||y.contentEditable===`true`)&&(Lr=y,Rr=r,zr=null);break;case`focusout`:zr=Rr=Lr=null;break;case`mousedown`:Br=!0;break;case`contextmenu`:case`mouseup`:case`dragend`:Br=!1,Vr(s,n,i);break;case`selectionchange`:if(Ir)break;case`keydown`:case`keyup`:Vr(s,n,i)}var b;if($n)b:{switch(e){case`compositionstart`:var x=`onCompositionStart`;break b;case`compositionend`:x=`onCompositionEnd`;break b;case`compositionupdate`:x=`onCompositionUpdate`;break b}x=void 0}else sr?ar(e,n)&&(x=`onCompositionEnd`):e===`keydown`&&n.keyCode===229&&(x=`onCompositionStart`);x&&(nr&&n.locale!==`ko`&&(sr||x!==`onCompositionStart`?x===`onCompositionEnd`&&sr&&(b=Cn()):(bn=i,xn=`value`in bn?bn.value:bn.textContent,sr=!0)),y=Dd(r,x),0<y.length&&(x=new Vn(x,e,null,n,i),s.push({event:x,listeners:y}),b?x.data=b:(b=or(n),b!==null&&(x.data=b)))),(b=tr?cr(e,n):lr(e,n))&&(x=Dd(r,`onBeforeInput`),0<x.length&&(y=new Vn(`onBeforeInput`,`beforeinput`,null,n,i),s.push({event:y,listeners:x}),y.data=b)),gd(s,e,r,n,i)}xd(s,t)})}function Z(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Dd(e,t){for(var n=t+`Capture`,r=[];e!==null;){var i=e,a=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||a===null||(i=gn(e,n),i!=null&&r.unshift(Z(e,i,a)),i=gn(e,t),i!=null&&r.push(Z(e,i,a))),e.tag===3)return r;e=e.return}return[]}function Od(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function kd(e,t,n,r,i){for(var a=t._reactName,o=[];n!==null&&n!==r;){var s=n,c=s.alternate,l=s.stateNode;if(s=s.tag,c!==null&&c===r)break;s!==5&&s!==26&&s!==27||l===null||(c=l,i?(l=gn(n,a),l!=null&&o.unshift(Z(n,l,c))):i||(l=gn(n,a),l!=null&&o.push(Z(n,l,c)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Ad=/\r\n?/g,jd=/\u0000|\uFFFD/g;function Md(e){return(typeof e==`string`?e:``+e).replace(Ad,`
`).replace(jd,``)}function Nd(e,t){return t=Md(t),Md(e)===t}function Q(e,t,n,r,a,o){switch(n){case`children`:typeof r==`string`?t===`body`||t===`textarea`&&r===``||$t(e,r):(typeof r==`number`||typeof r==`bigint`)&&t!==`body`&&$t(e,``+r);break;case`className`:Rt(e,`class`,r);break;case`tabIndex`:Rt(e,`tabindex`,r);break;case`dir`:case`role`:case`viewBox`:case`width`:case`height`:Rt(e,n,r);break;case`style`:nn(e,r,o);break;case`data`:if(t!==`object`){Rt(e,`data`,r);break}case`src`:case`href`:if(r===``&&(t!==`a`||n!==`href`)){e.removeAttribute(n);break}if(r==null||typeof r==`function`||typeof r==`symbol`||typeof r==`boolean`){e.removeAttribute(n);break}r=sn(``+r),e.setAttribute(n,r);break;case`action`:case`formAction`:if(typeof r==`function`){e.setAttribute(n,`javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')`);break}else typeof o==`function`&&(n===`formAction`?(t!==`input`&&Q(e,t,`name`,a.name,a,null),Q(e,t,`formEncType`,a.formEncType,a,null),Q(e,t,`formMethod`,a.formMethod,a,null),Q(e,t,`formTarget`,a.formTarget,a,null)):(Q(e,t,`encType`,a.encType,a,null),Q(e,t,`method`,a.method,a,null),Q(e,t,`target`,a.target,a,null)));if(r==null||typeof r==`symbol`||typeof r==`boolean`){e.removeAttribute(n);break}r=sn(``+r),e.setAttribute(n,r);break;case`onClick`:r!=null&&(e.onclick=cn);break;case`onScroll`:r!=null&&X(`scroll`,e);break;case`onScrollEnd`:r!=null&&X(`scrollend`,e);break;case`dangerouslySetInnerHTML`:if(r!=null){if(typeof r!=`object`||!(`__html`in r))throw Error(i(61));if(n=r.__html,n!=null){if(a.children!=null)throw Error(i(60));e.innerHTML=n}}break;case`multiple`:e.multiple=r&&typeof r!=`function`&&typeof r!=`symbol`;break;case`muted`:e.muted=r&&typeof r!=`function`&&typeof r!=`symbol`;break;case`suppressContentEditableWarning`:case`suppressHydrationWarning`:case`defaultValue`:case`defaultChecked`:case`innerHTML`:case`ref`:break;case`autoFocus`:break;case`xlinkHref`:if(r==null||typeof r==`function`||typeof r==`boolean`||typeof r==`symbol`){e.removeAttribute(`xlink:href`);break}n=sn(``+r),e.setAttributeNS(`http://www.w3.org/1999/xlink`,`xlink:href`,n);break;case`contentEditable`:case`spellCheck`:case`draggable`:case`value`:case`autoReverse`:case`externalResourcesRequired`:case`focusable`:case`preserveAlpha`:r!=null&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,``+r):e.removeAttribute(n);break;case`inert`:case`allowFullScreen`:case`async`:case`autoPlay`:case`controls`:case`default`:case`defer`:case`disabled`:case`disablePictureInPicture`:case`disableRemotePlayback`:case`formNoValidate`:case`hidden`:case`loop`:case`noModule`:case`noValidate`:case`open`:case`playsInline`:case`readOnly`:case`required`:case`reversed`:case`scoped`:case`seamless`:case`itemScope`:r&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,``):e.removeAttribute(n);break;case`capture`:case`download`:!0===r?e.setAttribute(n,``):!1!==r&&r!=null&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,r):e.removeAttribute(n);break;case`cols`:case`rows`:case`size`:case`span`:r!=null&&typeof r!=`function`&&typeof r!=`symbol`&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case`rowSpan`:case`start`:r==null||typeof r==`function`||typeof r==`symbol`||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case`popover`:X(`beforetoggle`,e),X(`toggle`,e),Lt(e,`popover`,r);break;case`xlinkActuate`:zt(e,`http://www.w3.org/1999/xlink`,`xlink:actuate`,r);break;case`xlinkArcrole`:zt(e,`http://www.w3.org/1999/xlink`,`xlink:arcrole`,r);break;case`xlinkRole`:zt(e,`http://www.w3.org/1999/xlink`,`xlink:role`,r);break;case`xlinkShow`:zt(e,`http://www.w3.org/1999/xlink`,`xlink:show`,r);break;case`xlinkTitle`:zt(e,`http://www.w3.org/1999/xlink`,`xlink:title`,r);break;case`xlinkType`:zt(e,`http://www.w3.org/1999/xlink`,`xlink:type`,r);break;case`xmlBase`:zt(e,`http://www.w3.org/XML/1998/namespace`,`xml:base`,r);break;case`xmlLang`:zt(e,`http://www.w3.org/XML/1998/namespace`,`xml:lang`,r);break;case`xmlSpace`:zt(e,`http://www.w3.org/XML/1998/namespace`,`xml:space`,r);break;case`is`:Lt(e,`is`,r);break;case`innerText`:case`textContent`:break;default:(!(2<n.length)||n[0]!==`o`&&n[0]!==`O`||n[1]!==`n`&&n[1]!==`N`)&&(n=an.get(n)||n,Lt(e,n,r))}}function Pd(e,t,n,r,a,o){switch(n){case`style`:nn(e,r,o);break;case`dangerouslySetInnerHTML`:if(r!=null){if(typeof r!=`object`||!(`__html`in r))throw Error(i(61));if(n=r.__html,n!=null){if(a.children!=null)throw Error(i(60));e.innerHTML=n}}break;case`children`:typeof r==`string`?$t(e,r):(typeof r==`number`||typeof r==`bigint`)&&$t(e,``+r);break;case`onScroll`:r!=null&&X(`scroll`,e);break;case`onScrollEnd`:r!=null&&X(`scrollend`,e);break;case`onClick`:r!=null&&(e.onclick=cn);break;case`suppressContentEditableWarning`:case`suppressHydrationWarning`:case`innerHTML`:case`ref`:break;case`innerText`:case`textContent`:break;default:if(!At.hasOwnProperty(n))a:{if(n[0]===`o`&&n[1]===`n`&&(a=n.endsWith(`Capture`),t=n.slice(2,a?n.length-7:void 0),o=e[gt]||null,o=o==null?null:o[n],typeof o==`function`&&e.removeEventListener(t,o,a),typeof r==`function`)){typeof o!=`function`&&o!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,a);break a}n in e?e[n]=r:!0===r?e.setAttribute(n,``):Lt(e,n,r)}}}function Fd(e,t,n){switch(t){case`div`:case`span`:case`svg`:case`path`:case`a`:case`g`:case`p`:case`li`:break;case`img`:X(`error`,e),X(`load`,e);var r=!1,a=!1,o;for(o in n)if(n.hasOwnProperty(o)){var s=n[o];if(s!=null)switch(o){case`src`:r=!0;break;case`srcSet`:a=!0;break;case`children`:case`dangerouslySetInnerHTML`:throw Error(i(137,t));default:Q(e,t,o,s,n,null)}}a&&Q(e,t,`srcSet`,n.srcSet,n,null),r&&Q(e,t,`src`,n.src,n,null);return;case`input`:X(`invalid`,e);var c=o=s=a=null,l=null,u=null;for(r in n)if(n.hasOwnProperty(r)){var d=n[r];if(d!=null)switch(r){case`name`:a=d;break;case`type`:s=d;break;case`checked`:l=d;break;case`defaultChecked`:u=d;break;case`value`:o=d;break;case`defaultValue`:c=d;break;case`children`:case`dangerouslySetInnerHTML`:if(d!=null)throw Error(i(137,t));break;default:Q(e,t,r,d,n,null)}}Jt(e,o,c,l,u,s,a,!1);return;case`select`:for(a in X(`invalid`,e),r=s=o=null,n)if(n.hasOwnProperty(a)&&(c=n[a],c!=null))switch(a){case`value`:o=c;break;case`defaultValue`:s=c;break;case`multiple`:r=c;default:Q(e,t,a,c,n,null)}t=o,n=s,e.multiple=!!r,t==null?n!=null&&Xt(e,!!r,n,!0):Xt(e,!!r,t,!1);return;case`textarea`:for(s in X(`invalid`,e),o=a=r=null,n)if(n.hasOwnProperty(s)&&(c=n[s],c!=null))switch(s){case`value`:r=c;break;case`defaultValue`:a=c;break;case`children`:o=c;break;case`dangerouslySetInnerHTML`:if(c!=null)throw Error(i(91));break;default:Q(e,t,s,c,n,null)}Qt(e,r,a,o);return;case`option`:for(l in n)if(n.hasOwnProperty(l)&&(r=n[l],r!=null))switch(l){case`selected`:e.selected=r&&typeof r!=`function`&&typeof r!=`symbol`;break;default:Q(e,t,l,r,n,null)}return;case`dialog`:X(`beforetoggle`,e),X(`toggle`,e),X(`cancel`,e),X(`close`,e);break;case`iframe`:case`object`:X(`load`,e);break;case`video`:case`audio`:for(r=0;r<yd.length;r++)X(yd[r],e);break;case`image`:X(`error`,e),X(`load`,e);break;case`details`:X(`toggle`,e);break;case`embed`:case`source`:case`link`:X(`error`,e),X(`load`,e);case`area`:case`base`:case`br`:case`col`:case`hr`:case`keygen`:case`meta`:case`param`:case`track`:case`wbr`:case`menuitem`:for(u in n)if(n.hasOwnProperty(u)&&(r=n[u],r!=null))switch(u){case`children`:case`dangerouslySetInnerHTML`:throw Error(i(137,t));default:Q(e,t,u,r,n,null)}return;default:if(rn(t)){for(d in n)n.hasOwnProperty(d)&&(r=n[d],r!==void 0&&Pd(e,t,d,r,n,void 0));return}}for(c in n)n.hasOwnProperty(c)&&(r=n[c],r!=null&&Q(e,t,c,r,n,null))}function Id(e,t,n,r){switch(t){case`div`:case`span`:case`svg`:case`path`:case`a`:case`g`:case`p`:case`li`:break;case`input`:var a=null,o=null,s=null,c=null,l=null,u=null,d=null;for(m in n){var f=n[m];if(n.hasOwnProperty(m)&&f!=null)switch(m){case`checked`:break;case`value`:break;case`defaultValue`:l=f;default:r.hasOwnProperty(m)||Q(e,t,m,null,r,f)}}for(var p in r){var m=r[p];if(f=n[p],r.hasOwnProperty(p)&&(m!=null||f!=null))switch(p){case`type`:o=m;break;case`name`:a=m;break;case`checked`:u=m;break;case`defaultChecked`:d=m;break;case`value`:s=m;break;case`defaultValue`:c=m;break;case`children`:case`dangerouslySetInnerHTML`:if(m!=null)throw Error(i(137,t));break;default:m!==f&&Q(e,t,p,m,r,f)}}qt(e,s,c,l,u,d,o,a);return;case`select`:for(o in m=s=c=p=null,n)if(l=n[o],n.hasOwnProperty(o)&&l!=null)switch(o){case`value`:break;case`multiple`:m=l;default:r.hasOwnProperty(o)||Q(e,t,o,null,r,l)}for(a in r)if(o=r[a],l=n[a],r.hasOwnProperty(a)&&(o!=null||l!=null))switch(a){case`value`:p=o;break;case`defaultValue`:c=o;break;case`multiple`:s=o;default:o!==l&&Q(e,t,a,o,r,l)}t=c,n=s,r=m,p==null?!!r!=!!n&&(t==null?Xt(e,!!n,n?[]:``,!1):Xt(e,!!n,t,!0)):Xt(e,!!n,p,!1);return;case`textarea`:for(c in m=p=null,n)if(a=n[c],n.hasOwnProperty(c)&&a!=null&&!r.hasOwnProperty(c))switch(c){case`value`:break;case`children`:break;default:Q(e,t,c,null,r,a)}for(s in r)if(a=r[s],o=n[s],r.hasOwnProperty(s)&&(a!=null||o!=null))switch(s){case`value`:p=a;break;case`defaultValue`:m=a;break;case`children`:break;case`dangerouslySetInnerHTML`:if(a!=null)throw Error(i(91));break;default:a!==o&&Q(e,t,s,a,r,o)}Zt(e,p,m);return;case`option`:for(var h in n)if(p=n[h],n.hasOwnProperty(h)&&p!=null&&!r.hasOwnProperty(h))switch(h){case`selected`:e.selected=!1;break;default:Q(e,t,h,null,r,p)}for(l in r)if(p=r[l],m=n[l],r.hasOwnProperty(l)&&p!==m&&(p!=null||m!=null))switch(l){case`selected`:e.selected=p&&typeof p!=`function`&&typeof p!=`symbol`;break;default:Q(e,t,l,p,r,m)}return;case`img`:case`link`:case`area`:case`base`:case`br`:case`col`:case`embed`:case`hr`:case`keygen`:case`meta`:case`param`:case`source`:case`track`:case`wbr`:case`menuitem`:for(var g in n)p=n[g],n.hasOwnProperty(g)&&p!=null&&!r.hasOwnProperty(g)&&Q(e,t,g,null,r,p);for(u in r)if(p=r[u],m=n[u],r.hasOwnProperty(u)&&p!==m&&(p!=null||m!=null))switch(u){case`children`:case`dangerouslySetInnerHTML`:if(p!=null)throw Error(i(137,t));break;default:Q(e,t,u,p,r,m)}return;default:if(rn(t)){for(var _ in n)p=n[_],n.hasOwnProperty(_)&&p!==void 0&&!r.hasOwnProperty(_)&&Pd(e,t,_,void 0,r,p);for(d in r)p=r[d],m=n[d],!r.hasOwnProperty(d)||p===m||p===void 0&&m===void 0||Pd(e,t,d,p,r,m);return}}for(var v in n)p=n[v],n.hasOwnProperty(v)&&p!=null&&!r.hasOwnProperty(v)&&Q(e,t,v,null,r,p);for(f in r)p=r[f],m=n[f],!r.hasOwnProperty(f)||p===m||p==null&&m==null||Q(e,t,f,p,r,m)}function Ld(e){switch(e){case`css`:case`script`:case`font`:case`img`:case`image`:case`input`:case`link`:return!0;default:return!1}}function Rd(){if(typeof performance.getEntriesByType==`function`){for(var e=0,t=0,n=performance.getEntriesByType(`resource`),r=0;r<n.length;r++){var i=n[r],a=i.transferSize,o=i.initiatorType,s=i.duration;if(a&&s&&Ld(o)){for(o=0,s=i.responseEnd,r+=1;r<n.length;r++){var c=n[r],l=c.startTime;if(l>s)break;var u=c.transferSize,d=c.initiatorType;u&&Ld(d)&&(c=c.responseEnd,o+=u*(c<s?1:(s-l)/(c-l)))}if(--r,t+=8*(a+o)/(i.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e==`number`)?e:5}var zd=null,Bd=null;function Vd(e){return e.nodeType===9?e:e.ownerDocument}function Hd(e){switch(e){case`http://www.w3.org/2000/svg`:return 1;case`http://www.w3.org/1998/Math/MathML`:return 2;default:return 0}}function Ud(e,t){if(e===0)switch(t){case`svg`:return 1;case`math`:return 2;default:return 0}return e===1&&t===`foreignObject`?0:e}function Wd(e,t){return e===`textarea`||e===`noscript`||typeof t.children==`string`||typeof t.children==`number`||typeof t.children==`bigint`||typeof t.dangerouslySetInnerHTML==`object`&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Gd=null;function Kd(){var e=window.event;return e&&e.type===`popstate`?e===Gd?!1:(Gd=e,!0):(Gd=null,!1)}var qd=typeof setTimeout==`function`?setTimeout:void 0,Jd=typeof clearTimeout==`function`?clearTimeout:void 0,Yd=typeof Promise==`function`?Promise:void 0,Xd=typeof queueMicrotask==`function`?queueMicrotask:Yd===void 0?qd:function(e){return Yd.resolve(null).then(e).catch(Zd)};function Zd(e){setTimeout(function(){throw e})}function Qd(e){return e===`head`}function $d(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n===`/$`||n===`/&`){if(r===0){e.removeChild(i),Pp(t);return}r--}else if(n===`$`||n===`$?`||n===`$~`||n===`$!`||n===`&`)r++;else if(n===`html`)mf(e.ownerDocument.documentElement);else if(n===`head`){n=e.ownerDocument.head,mf(n);for(var a=n.firstChild;a;){var o=a.nextSibling,s=a.nodeName;a[St]||s===`SCRIPT`||s===`STYLE`||s===`LINK`&&a.rel.toLowerCase()===`stylesheet`||n.removeChild(a),a=o}}else n===`body`&&mf(e.ownerDocument.body);n=i}while(n);Pp(t)}function ef(e,t){var n=e;e=0;do{var r=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display=`none`):(n.style.display=n._stashedDisplay||``,n.getAttribute(`style`)===``&&n.removeAttribute(`style`)):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=``):n.nodeValue=n._stashedText||``),r&&r.nodeType===8)if(n=r.data,n===`/$`){if(e===0)break;e--}else n!==`$`&&n!==`$?`&&n!==`$~`&&n!==`$!`||e++;n=r}while(n)}function tf(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case`HTML`:case`HEAD`:case`BODY`:tf(n),Ct(n);continue;case`SCRIPT`:case`STYLE`:continue;case`LINK`:if(n.rel.toLowerCase()===`stylesheet`)continue}e.removeChild(n)}}function nf(e,t,n,r){for(;e.nodeType===1;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&(e.nodeName!==`INPUT`||e.type!==`hidden`))break}else if(r){if(!e[St])switch(t){case`meta`:if(!e.hasAttribute(`itemprop`))break;return e;case`link`:if(a=e.getAttribute(`rel`),a===`stylesheet`&&e.hasAttribute(`data-precedence`)||a!==i.rel||e.getAttribute(`href`)!==(i.href==null||i.href===``?null:i.href)||e.getAttribute(`crossorigin`)!==(i.crossOrigin==null?null:i.crossOrigin)||e.getAttribute(`title`)!==(i.title==null?null:i.title))break;return e;case`style`:if(e.hasAttribute(`data-precedence`))break;return e;case`script`:if(a=e.getAttribute(`src`),(a!==(i.src==null?null:i.src)||e.getAttribute(`type`)!==(i.type==null?null:i.type)||e.getAttribute(`crossorigin`)!==(i.crossOrigin==null?null:i.crossOrigin))&&a&&e.hasAttribute(`async`)&&!e.hasAttribute(`itemprop`))break;return e;default:return e}}else if(t===`input`&&e.type===`hidden`){var a=i.name==null?null:``+i.name;if(i.type===`hidden`&&e.getAttribute(`name`)===a)return e}else return e;if(e=lf(e.nextSibling),e===null)break}return null}function rf(e,t,n){if(t===``)return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!==`INPUT`||e.type!==`hidden`)&&!n||(e=lf(e.nextSibling),e===null))return null;return e}function af(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!==`INPUT`||e.type!==`hidden`)&&!t||(e=lf(e.nextSibling),e===null))return null;return e}function of(e){return e.data===`$?`||e.data===`$~`}function sf(e){return e.data===`$!`||e.data===`$?`&&e.ownerDocument.readyState!==`loading`}function cf(e,t){var n=e.ownerDocument;if(e.data===`$~`)e._reactRetry=t;else if(e.data!==`$?`||n.readyState!==`loading`)t();else{var r=function(){t(),n.removeEventListener(`DOMContentLoaded`,r)};n.addEventListener(`DOMContentLoaded`,r),e._reactRetry=r}}function lf(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t===`$`||t===`$!`||t===`$?`||t===`$~`||t===`&`||t===`F!`||t===`F`)break;if(t===`/$`||t===`/&`)return null}}return e}var uf=null;function df(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n===`/$`||n===`/&`){if(t===0)return lf(e.nextSibling);t--}else n!==`$`&&n!==`$!`&&n!==`$?`&&n!==`$~`&&n!==`&`||t++}e=e.nextSibling}return null}function ff(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n===`$`||n===`$!`||n===`$?`||n===`$~`||n===`&`){if(t===0)return e;t--}else n!==`/$`&&n!==`/&`||t++}e=e.previousSibling}return null}function pf(e,t,n){switch(t=Vd(n),e){case`html`:if(e=t.documentElement,!e)throw Error(i(452));return e;case`head`:if(e=t.head,!e)throw Error(i(453));return e;case`body`:if(e=t.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function mf(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ct(e)}var hf=new Map,gf=new Set;function _f(e){return typeof e.getRootNode==`function`?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var vf=D.d;D.d={f:yf,r:bf,D:Cf,C:wf,L:Tf,m:Ef,X:Of,S:Df,M:kf};function yf(){var e=vf.f(),t=Su();return e||t}function bf(e){var t=Tt(e);t!==null&&t.tag===5&&t.type===`form`?Is(t):vf.r(e)}var xf=typeof document>`u`?null:document;function Sf(e,t,n){var r=xf;if(r&&typeof t==`string`&&t){var i=Kt(t);i=`link[rel="`+e+`"][href="`+i+`"]`,typeof n==`string`&&(i+=`[crossorigin="`+n+`"]`),gf.has(i)||(gf.add(i),e={rel:e,crossOrigin:n,href:t},r.querySelector(i)===null&&(t=r.createElement(`link`),Fd(t,`link`,e),Ot(t),r.head.appendChild(t)))}}function Cf(e){vf.D(e),Sf(`dns-prefetch`,e,null)}function wf(e,t){vf.C(e,t),Sf(`preconnect`,e,t)}function Tf(e,t,n){vf.L(e,t,n);var r=xf;if(r&&e&&t){var i=`link[rel="preload"][as="`+Kt(t)+`"]`;t===`image`&&n&&n.imageSrcSet?(i+=`[imagesrcset="`+Kt(n.imageSrcSet)+`"]`,typeof n.imageSizes==`string`&&(i+=`[imagesizes="`+Kt(n.imageSizes)+`"]`)):i+=`[href="`+Kt(e)+`"]`;var a=i;switch(t){case`style`:a=jf(e);break;case`script`:a=Ff(e)}hf.has(a)||(e=h({rel:`preload`,href:t===`image`&&n&&n.imageSrcSet?void 0:e,as:t},n),hf.set(a,e),r.querySelector(i)!==null||t===`style`&&r.querySelector(Mf(a))||t===`script`&&r.querySelector(If(a))||(t=r.createElement(`link`),Fd(t,`link`,e),Ot(t),r.head.appendChild(t)))}}function Ef(e,t){vf.m(e,t);var n=xf;if(n&&e){var r=t&&typeof t.as==`string`?t.as:`script`,i=`link[rel="modulepreload"][as="`+Kt(r)+`"][href="`+Kt(e)+`"]`,a=i;switch(r){case`audioworklet`:case`paintworklet`:case`serviceworker`:case`sharedworker`:case`worker`:case`script`:a=Ff(e)}if(!hf.has(a)&&(e=h({rel:`modulepreload`,href:e},t),hf.set(a,e),n.querySelector(i)===null)){switch(r){case`audioworklet`:case`paintworklet`:case`serviceworker`:case`sharedworker`:case`worker`:case`script`:if(n.querySelector(If(a)))return}r=n.createElement(`link`),Fd(r,`link`,e),Ot(r),n.head.appendChild(r)}}}function Df(e,t,n){vf.S(e,t,n);var r=xf;if(r&&e){var i=Dt(r).hoistableStyles,a=jf(e);t||=`default`;var o=i.get(a);if(!o){var s={loading:0,preload:null};if(o=r.querySelector(Mf(a)))s.loading=5;else{e=h({rel:`stylesheet`,href:e,"data-precedence":t},n),(n=hf.get(a))&&zf(e,n);var c=o=r.createElement(`link`);Ot(c),Fd(c,`link`,e),c._p=new Promise(function(e,t){c.onload=e,c.onerror=t}),c.addEventListener(`load`,function(){s.loading|=1}),c.addEventListener(`error`,function(){s.loading|=2}),s.loading|=4,Rf(o,t,r)}o={type:`stylesheet`,instance:o,count:1,state:s},i.set(a,o)}}}function Of(e,t){vf.X(e,t);var n=xf;if(n&&e){var r=Dt(n).hoistableScripts,i=Ff(e),a=r.get(i);a||(a=n.querySelector(If(i)),a||(e=h({src:e,async:!0},t),(t=hf.get(i))&&Bf(e,t),a=n.createElement(`script`),Ot(a),Fd(a,`link`,e),n.head.appendChild(a)),a={type:`script`,instance:a,count:1,state:null},r.set(i,a))}}function kf(e,t){vf.M(e,t);var n=xf;if(n&&e){var r=Dt(n).hoistableScripts,i=Ff(e),a=r.get(i);a||(a=n.querySelector(If(i)),a||(e=h({src:e,async:!0,type:`module`},t),(t=hf.get(i))&&Bf(e,t),a=n.createElement(`script`),Ot(a),Fd(a,`link`,e),n.head.appendChild(a)),a={type:`script`,instance:a,count:1,state:null},r.set(i,a))}}function Af(e,t,n,r){var a=(a=_e.current)?_f(a):null;if(!a)throw Error(i(446));switch(e){case`meta`:case`title`:return null;case`style`:return typeof n.precedence==`string`&&typeof n.href==`string`?(t=jf(n.href),n=Dt(a).hoistableStyles,r=n.get(t),r||(r={type:`style`,instance:null,count:0,state:null},n.set(t,r)),r):{type:`void`,instance:null,count:0,state:null};case`link`:if(n.rel===`stylesheet`&&typeof n.href==`string`&&typeof n.precedence==`string`){e=jf(n.href);var o=Dt(a).hoistableStyles,s=o.get(e);if(s||(a=a.ownerDocument||a,s={type:`stylesheet`,instance:null,count:0,state:{loading:0,preload:null}},o.set(e,s),(o=a.querySelector(Mf(e)))&&!o._p&&(s.instance=o,s.state.loading=5),hf.has(e)||(n={rel:`preload`,as:`style`,href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},hf.set(e,n),o||Pf(a,e,n,s.state))),t&&r===null)throw Error(i(528,``));return s}if(t&&r!==null)throw Error(i(529,``));return null;case`script`:return t=n.async,n=n.src,typeof n==`string`&&t&&typeof t!=`function`&&typeof t!=`symbol`?(t=Ff(n),n=Dt(a).hoistableScripts,r=n.get(t),r||(r={type:`script`,instance:null,count:0,state:null},n.set(t,r)),r):{type:`void`,instance:null,count:0,state:null};default:throw Error(i(444,e))}}function jf(e){return`href="`+Kt(e)+`"`}function Mf(e){return`link[rel="stylesheet"][`+e+`]`}function Nf(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Pf(e,t,n,r){e.querySelector(`link[rel="preload"][as="style"][`+t+`]`)?r.loading=1:(t=e.createElement(`link`),r.preload=t,t.addEventListener(`load`,function(){return r.loading|=1}),t.addEventListener(`error`,function(){return r.loading|=2}),Fd(t,`link`,n),Ot(t),e.head.appendChild(t))}function Ff(e){return`[src="`+Kt(e)+`"]`}function If(e){return`script[async]`+e}function Lf(e,t,n){if(t.count++,t.instance===null)switch(t.type){case`style`:var r=e.querySelector(`style[data-href~="`+Kt(n.href)+`"]`);if(r)return t.instance=r,Ot(r),r;var a=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement(`style`),Ot(r),Fd(r,`style`,a),Rf(r,n.precedence,e),t.instance=r;case`stylesheet`:a=jf(n.href);var o=e.querySelector(Mf(a));if(o)return t.state.loading|=4,t.instance=o,Ot(o),o;r=Nf(n),(a=hf.get(a))&&zf(r,a),o=(e.ownerDocument||e).createElement(`link`),Ot(o);var s=o;return s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),Fd(o,`link`,r),t.state.loading|=4,Rf(o,n.precedence,e),t.instance=o;case`script`:return o=Ff(n.src),(a=e.querySelector(If(o)))?(t.instance=a,Ot(a),a):(r=n,(a=hf.get(o))&&(r=h({},n),Bf(r,a)),e=e.ownerDocument||e,a=e.createElement(`script`),Ot(a),Fd(a,`link`,r),e.head.appendChild(a),t.instance=a);case`void`:return null;default:throw Error(i(443,t.type))}else t.type===`stylesheet`&&!(t.state.loading&4)&&(r=t.instance,t.state.loading|=4,Rf(r,n.precedence,e));return t.instance}function Rf(e,t,n){for(var r=n.querySelectorAll(`link[rel="stylesheet"][data-precedence],style[data-precedence]`),i=r.length?r[r.length-1]:null,a=i,o=0;o<r.length;o++){var s=r[o];if(s.dataset.precedence===t)a=s;else if(a!==i)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function zf(e,t){e.crossOrigin??=t.crossOrigin,e.referrerPolicy??=t.referrerPolicy,e.title??=t.title}function Bf(e,t){e.crossOrigin??=t.crossOrigin,e.referrerPolicy??=t.referrerPolicy,e.integrity??=t.integrity}var Vf=null;function Hf(e,t,n){if(Vf===null){var r=new Map,i=Vf=new Map;i.set(n,r)}else i=Vf,r=i.get(n),r||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var a=n[i];if(!(a[St]||a[ht]||e===`link`&&a.getAttribute(`rel`)===`stylesheet`)&&a.namespaceURI!==`http://www.w3.org/2000/svg`){var o=a.getAttribute(t)||``;o=e+o;var s=r.get(o);s?s.push(a):r.set(o,[a])}}return r}function Uf(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t===`title`?e.querySelector(`head > title`):null)}function Wf(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case`meta`:case`title`:return!0;case`style`:if(typeof t.precedence!=`string`||typeof t.href!=`string`||t.href===``)break;return!0;case`link`:if(typeof t.rel!=`string`||typeof t.href!=`string`||t.href===``||t.onLoad||t.onError)break;switch(t.rel){case`stylesheet`:return e=t.disabled,typeof t.precedence==`string`&&e==null;default:return!0}case`script`:if(t.async&&typeof t.async!=`function`&&typeof t.async!=`symbol`&&!t.onLoad&&!t.onError&&t.src&&typeof t.src==`string`)return!0}return!1}function Gf(e){return!(e.type===`stylesheet`&&!(e.state.loading&3))}function Kf(e,t,n,r){if(n.type===`stylesheet`&&(typeof r.media!=`string`||!1!==matchMedia(r.media).matches)&&!(n.state.loading&4)){if(n.instance===null){var i=jf(r.href),a=t.querySelector(Mf(i));if(a){t=a._p,typeof t==`object`&&t&&typeof t.then==`function`&&(e.count++,e=Yf.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=a,Ot(a);return}a=t.ownerDocument||t,r=Nf(r),(i=hf.get(i))&&zf(r,i),a=a.createElement(`link`),Ot(a);var o=a;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),Fd(a,`link`,r),n.instance=a}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(n.state.loading&3)&&(e.count++,n=Yf.bind(e),t.addEventListener(`load`,n),t.addEventListener(`error`,n))}}var qf=0;function Jf(e,t){return e.stylesheets&&e.count===0&&Zf(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&Zf(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&qf===0&&(qf=62500*Rd());var i=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Zf(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>qf?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(i)}}:null}function Yf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Zf(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Xf=null;function Zf(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Xf=new Map,t.forEach(Qf,e),Xf=null,Yf.call(e))}function Qf(e,t){if(!(t.state.loading&4)){var n=Xf.get(e);if(n)var r=n.get(null);else{n=new Map,Xf.set(e,n);for(var i=e.querySelectorAll(`link[data-precedence],style[data-precedence]`),a=0;a<i.length;a++){var o=i[a];(o.nodeName===`LINK`||o.getAttribute(`media`)!==`not all`)&&(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}i=t.instance,o=i.getAttribute(`data-precedence`),a=n.get(o)||r,a===r&&n.set(null,i),n.set(o,i),this.count++,r=Yf.bind(this),i.addEventListener(`load`,r),i.addEventListener(`error`,r),a?a.parentNode.insertBefore(i,a.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(i,e.firstChild)),t.state.loading|=4}}var $f={$$typeof:C,Provider:null,Consumer:null,_currentValue:ue,_currentValue2:ue,_threadCount:0};function ep(e,t,n,r,i,a,o,s,c){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=it(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=it(0),this.hiddenUpdates=it(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=a,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function tp(e,t,n,r,i,a,o,s,c,l,u,d){return e=new ep(e,t,n,o,c,l,u,d,s),t=1,!0===a&&(t|=24),a=hi(3,null,null,t),e.current=a,a.stateNode=e,t=ha(),t.refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:r,isDehydrated:n,cache:t},Ja(a),e}function np(e){return e?(e=pi,e):pi}function rp(e,t,n,r,i,a){i=np(i),r.context===null?r.context=i:r.pendingContext=i,r=Xa(t),r.payload={element:n},a=a===void 0?null:a,a!==null&&(r.callback=a),n=Za(e,r,t),n!==null&&(_u(n,e,t),Qa(n,e,t))}function ip(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ap(e,t){ip(e,t),(e=e.alternate)&&ip(e,t)}function op(e){if(e.tag===13||e.tag===31){var t=ui(e,67108864);t!==null&&_u(t,e,67108864),ap(e,67108864)}}function sp(e){if(e.tag===13||e.tag===31){var t=hu();t=ut(t);var n=ui(e,t);n!==null&&_u(n,e,t),ap(e,t)}}var cp=!0;function lp(e,t,n,r){var i=E.T;E.T=null;var a=D.p;try{D.p=2,dp(e,t,n,r)}finally{D.p=a,E.T=i}}function up(e,t,n,r){var i=E.T;E.T=null;var a=D.p;try{D.p=8,dp(e,t,n,r)}finally{D.p=a,E.T=i}}function dp(e,t,n,r){if(cp){var i=fp(r);if(i===null)Ed(e,t,r,pp,n),wp(e,r);else if(Ep(i,e,t,n,r))r.stopPropagation();else if(wp(e,r),t&4&&-1<Cp.indexOf(e)){for(;i!==null;){var a=Tt(i);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var o=$e(a.pendingLanes);if(o!==0){var s=a;for(s.pendingLanes|=2,s.entangledLanes|=2;o;){var c=1<<31-qe(o);s.entanglements[1]|=c,o&=~c}ad(a),!(K&6)&&(ru=Fe()+500,od(0,!1))}}break;case 31:case 13:s=ui(a,2),s!==null&&_u(s,a,2),Su(),ap(a,2)}if(a=fp(r),a===null&&Ed(e,t,r,pp,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else Ed(e,t,r,null,n)}}function fp(e){return e=un(e),mp(e)}var pp=null;function mp(e){if(pp=null,e=wt(e),e!==null){var t=o(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=s(t),e!==null)return e;e=null}else if(n===31){if(e=c(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return pp=e,null}function hp(e){switch(e){case`beforetoggle`:case`cancel`:case`click`:case`close`:case`contextmenu`:case`copy`:case`cut`:case`auxclick`:case`dblclick`:case`dragend`:case`dragstart`:case`drop`:case`focusin`:case`focusout`:case`input`:case`invalid`:case`keydown`:case`keypress`:case`keyup`:case`mousedown`:case`mouseup`:case`paste`:case`pause`:case`play`:case`pointercancel`:case`pointerdown`:case`pointerup`:case`ratechange`:case`reset`:case`resize`:case`seeked`:case`submit`:case`toggle`:case`touchcancel`:case`touchend`:case`touchstart`:case`volumechange`:case`change`:case`selectionchange`:case`textInput`:case`compositionstart`:case`compositionend`:case`compositionupdate`:case`beforeblur`:case`afterblur`:case`beforeinput`:case`blur`:case`fullscreenchange`:case`focus`:case`hashchange`:case`popstate`:case`select`:case`selectstart`:return 2;case`drag`:case`dragenter`:case`dragexit`:case`dragleave`:case`dragover`:case`mousemove`:case`mouseout`:case`mouseover`:case`pointermove`:case`pointerout`:case`pointerover`:case`scroll`:case`touchmove`:case`wheel`:case`mouseenter`:case`mouseleave`:case`pointerenter`:case`pointerleave`:return 8;case`message`:switch(Ie()){case Le:return 2;case Re:return 8;case ze:case Be:return 32;case Ve:return 268435456;default:return 32}default:return 32}}var gp=!1,_p=null,vp=null,yp=null,bp=new Map,xp=new Map,Sp=[],Cp=`mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset`.split(` `);function wp(e,t){switch(e){case`focusin`:case`focusout`:_p=null;break;case`dragenter`:case`dragleave`:vp=null;break;case`mouseover`:case`mouseout`:yp=null;break;case`pointerover`:case`pointerout`:bp.delete(t.pointerId);break;case`gotpointercapture`:case`lostpointercapture`:xp.delete(t.pointerId)}}function Tp(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=Tt(t),t!==null&&op(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Ep(e,t,n,r,i){switch(t){case`focusin`:return _p=Tp(_p,e,t,n,r,i),!0;case`dragenter`:return vp=Tp(vp,e,t,n,r,i),!0;case`mouseover`:return yp=Tp(yp,e,t,n,r,i),!0;case`pointerover`:var a=i.pointerId;return bp.set(a,Tp(bp.get(a)||null,e,t,n,r,i)),!0;case`gotpointercapture`:return a=i.pointerId,xp.set(a,Tp(xp.get(a)||null,e,t,n,r,i)),!0}return!1}function Dp(e){var t=wt(e.target);if(t!==null){var n=o(t);if(n!==null){if(t=n.tag,t===13){if(t=s(n),t!==null){e.blockedOn=t,pt(e.priority,function(){sp(n)});return}}else if(t===31){if(t=c(n),t!==null){e.blockedOn=t,pt(e.priority,function(){sp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Op(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=fp(e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);ln=r,n.target.dispatchEvent(r),ln=null}else return t=Tt(n),t!==null&&op(t),e.blockedOn=n,!1;t.shift()}return!0}function kp(e,t,n){Op(e)&&n.delete(t)}function Ap(){gp=!1,_p!==null&&Op(_p)&&(_p=null),vp!==null&&Op(vp)&&(vp=null),yp!==null&&Op(yp)&&(yp=null),bp.forEach(kp),xp.forEach(kp)}function jp(e,n){e.blockedOn===n&&(e.blockedOn=null,gp||(gp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Ap)))}var Mp=null;function Np(e){Mp!==e&&(Mp=e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Mp===e&&(Mp=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if(typeof r!=`function`){if(mp(r||n)===null)continue;break}var a=Tt(n);a!==null&&(e.splice(t,3),t-=3,Ps(a,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Pp(e){function t(t){return jp(t,e)}_p!==null&&jp(_p,e),vp!==null&&jp(vp,e),yp!==null&&jp(yp,e),bp.forEach(t),xp.forEach(t);for(var n=0;n<Sp.length;n++){var r=Sp[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Sp.length&&(n=Sp[0],n.blockedOn===null);)Dp(n),n.blockedOn===null&&Sp.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(r=0;r<n.length;r+=3){var i=n[r],a=n[r+1],o=i[gt]||null;if(typeof a==`function`)o||Np(n);else if(o){var s=null;if(a&&a.hasAttribute(`formAction`)){if(i=a,o=a[gt]||null)s=o.formAction;else if(mp(i)!==null)continue}else s=o.action;typeof s==`function`?n[r+1]=s:(n.splice(r,3),r-=3),Np(n)}}}function Fp(){function e(e){e.canIntercept&&e.info===`react-transition`&&e.intercept({handler:function(){return new Promise(function(e){return i=e})},focusReset:`manual`,scroll:`manual`})}function t(){i!==null&&(i(),i=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&e.url!=null&&navigation.navigate(e.url,{state:e.getState(),info:`react-transition`,history:`replace`})}}if(typeof navigation==`object`){var r=!1,i=null;return navigation.addEventListener(`navigate`,e),navigation.addEventListener(`navigatesuccess`,t),navigation.addEventListener(`navigateerror`,t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener(`navigate`,e),navigation.removeEventListener(`navigatesuccess`,t),navigation.removeEventListener(`navigateerror`,t),i!==null&&(i(),i=null)}}}function Ip(e){this._internalRoot=e}Lp.prototype.render=Ip.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));var n=t.current;rp(n,hu(),e,t,null,null)},Lp.prototype.unmount=Ip.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;rp(e.current,2,null,e,null,null),Su(),t[_t]=null}};function Lp(e){this._internalRoot=e}Lp.prototype.unstable_scheduleHydration=function(e){if(e){var t=ft();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Sp.length&&t!==0&&t<Sp[n].priority;n++);Sp.splice(n,0,e),n===0&&Dp(e)}};var Rp=n.version;if(Rp!==`19.2.4`)throw Error(i(527,Rp,`19.2.4`));D.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render==`function`?Error(i(188)):(e=Object.keys(e).join(`,`),Error(i(268,e)));return e=d(t),e=e===null?null:p(e),e=e===null?null:e.stateNode,e};var zp={bundleType:0,version:`19.2.4`,rendererPackageName:`react-dom`,currentDispatcherRef:E,reconcilerVersion:`19.2.4`};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<`u`){var Bp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bp.isDisabled&&Bp.supportsFiber)try{We=Bp.inject(zp),Ge=Bp}catch{}}e.createRoot=function(e,t){if(!a(e))throw Error(i(299));var n=!1,r=``,o=L,s=R,c=ec;return t!=null&&(!0===t.unstable_strictMode&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=tp(e,1,!1,null,null,n,r,null,o,s,c,Fp),e[_t]=t.current,wd(e),new Ip(t)}})),g=o(((e,t)=>{function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>`u`||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=`function`))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}n(),t.exports=h()}))(),_=c(u(),1),v=()=>void 0,y=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)==55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)==56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},b=function(e){let t=[],n=0,r=0;for(;n<e.length;){let i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){let a=e[n++];t[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){let a=e[n++],o=e[n++],s=e[n++],c=((i&7)<<18|(a&63)<<12|(o&63)<<6|s&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{let a=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return t.join(``)},x={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789`,get ENCODED_VALS(){return this.ENCODED_VALS_BASE+`+/=`},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+`-_.`},HAS_NATIVE_SUPPORT:typeof atob==`function`,encodeByteArray(e,t){if(!Array.isArray(e))throw Error(`encodeByteArray takes an array as a parameter`);this.init_();let n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){let i=e[t],a=t+1<e.length,o=a?e[t+1]:0,s=t+2<e.length,c=s?e[t+2]:0,l=i>>2,u=(i&3)<<4|o>>4,d=(o&15)<<2|c>>6,f=c&63;s||(f=64,a||(d=64)),r.push(n[l],n[u],n[d],n[f])}return r.join(``)},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(y(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):b(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){let i=n[e.charAt(t++)],a=t<e.length?n[e.charAt(t)]:0;++t;let o=t<e.length?n[e.charAt(t)]:64;++t;let s=t<e.length?n[e.charAt(t)]:64;if(++t,i==null||a==null||o==null||s==null)throw new S;let c=i<<2|a>>4;if(r.push(c),o!==64){let e=a<<4&240|o>>2;if(r.push(e),s!==64){let e=o<<6&192|s;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},S=class extends Error{constructor(){super(...arguments),this.name=`DecodeBase64StringError`}},C=function(e){let t=y(e);return x.encodeByteArray(t,!0)},w=function(e){return C(e).replace(/\./g,``)},ee=function(e){try{return x.decodeString(e,!0)}catch(e){console.error(`base64Decode failed: `,e)}return null};function te(){if(typeof self<`u`)return self;if(typeof window<`u`)return window;if(typeof global<`u`)return global;throw Error(`Unable to locate global object.`)}var ne=()=>te().__FIREBASE_DEFAULTS__,T=()=>{if(typeof process>`u`)return;let e={}.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},re=()=>{if(typeof document>`u`)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=e&&ee(e[1]);return t&&JSON.parse(t)},ie=()=>{try{return v()||ne()||T()||re()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},ae=e=>ie()?.emulatorHosts?.[e],oe=e=>{let t=ae(e);if(!t)return;let n=t.lastIndexOf(`:`);if(n<=0||n+1===t.length)throw Error(`Invalid host ${t} with no separate hostname and port!`);let r=parseInt(t.substring(n+1),10);return t[0]===`[`?[t.substring(1,n-1),r]:[t.substring(0,n),r]},se=()=>ie()?.config,ce=e=>ie()?.[`_${e}`],le=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e==`function`&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}};function E(e){try{return(e.startsWith(`http://`)||e.startsWith(`https://`)?new URL(e).hostname:e).endsWith(`.cloudworkstations.dev`)}catch{return!1}}async function D(e){return(await fetch(e,{credentials:`include`})).ok}function ue(e,t){if(e.uid)throw Error(`The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.`);let n={alg:`none`,type:`JWT`},r=t||`demo-project`,i=e.iat||0,a=e.sub||e.user_id;if(!a)throw Error(`mockUserToken must contain 'sub' or 'user_id' field!`);let o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:`custom`,identities:{}},...e};return[w(JSON.stringify(n)),w(JSON.stringify(o)),``].join(`.`)}var de={};function fe(){let e={prod:[],emulator:[]};for(let t of Object.keys(de))de[t]?e.emulator.push(t):e.prod.push(t);return e}function pe(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement(`div`),t.setAttribute(`id`,e),n=!0),{created:n,element:t}}var me=!1;function O(e,t){if(typeof window>`u`||typeof document>`u`||!E(window.location.host)||de[e]===t||de[e]||me)return;de[e]=t;function n(e){return`__firebase__banner__${e}`}let r=`__firebase__banner`,i=fe().prod.length>0;function a(){let e=document.getElementById(r);e&&e.remove()}function o(e){e.style.display=`flex`,e.style.background=`#7faaf0`,e.style.position=`fixed`,e.style.bottom=`5px`,e.style.left=`5px`,e.style.padding=`.5em`,e.style.borderRadius=`5px`,e.style.alignItems=`center`}function s(e,t){e.setAttribute(`width`,`24`),e.setAttribute(`id`,t),e.setAttribute(`height`,`24`),e.setAttribute(`viewBox`,`0 0 24 24`),e.setAttribute(`fill`,`none`),e.style.marginLeft=`-6px`}function c(){let e=document.createElement(`span`);return e.style.cursor=`pointer`,e.style.marginLeft=`16px`,e.style.fontSize=`24px`,e.innerHTML=` &times;`,e.onclick=()=>{me=!0,a()},e}function l(e,t){e.setAttribute(`id`,t),e.innerText=`Learn more`,e.href=`https://firebase.google.com/docs/studio/preview-apps#preview-backend`,e.setAttribute(`target`,`__blank`),e.style.paddingLeft=`5px`,e.style.textDecoration=`underline`}function u(){let e=pe(r),t=n(`text`),a=document.getElementById(t)||document.createElement(`span`),u=n(`learnmore`),d=document.getElementById(u)||document.createElement(`a`),f=n(`preprendIcon`),p=document.getElementById(f)||document.createElementNS(`http://www.w3.org/2000/svg`,`svg`);if(e.created){let t=e.element;o(t),l(d,u);let n=c();s(p,f),t.append(p,a,d,n),document.body.appendChild(t)}i?(a.innerText=`Preview backend disconnected.`,p.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(p.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,a.innerText=`Preview backend running in this workspace.`),a.setAttribute(`id`,t)}document.readyState===`loading`?window.addEventListener(`DOMContentLoaded`,u):u()}function he(){return typeof navigator<`u`&&typeof navigator.userAgent==`string`?navigator.userAgent:``}function ge(){return typeof window<`u`&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(he())}function _e(){let e=ie()?.forceEnvironment;if(e===`node`)return!0;if(e===`browser`)return!1;try{return Object.prototype.toString.call(global.process)===`[object process]`}catch{return!1}}function ve(){return typeof navigator<`u`&&navigator.userAgent===`Cloudflare-Workers`}function ye(){let e=typeof chrome==`object`?chrome.runtime:typeof browser==`object`?browser.runtime:void 0;return typeof e==`object`&&e.id!==void 0}function be(){return typeof navigator==`object`&&navigator.product===`ReactNative`}function xe(){let e=he();return e.indexOf(`MSIE `)>=0||e.indexOf(`Trident/`)>=0}function Se(){return!_e()&&!!navigator.userAgent&&navigator.userAgent.includes(`Safari`)&&!navigator.userAgent.includes(`Chrome`)}function Ce(){try{return typeof indexedDB==`object`}catch{return!1}}function we(){return new Promise((e,t)=>{try{let n=!0,r=`validate-browser-context-for-indexeddb-analytics-module`,i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{t(i.error?.message||``)}}catch(e){t(e)}})}var Te=`FirebaseError`,Ee=class e extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=Te,Object.setPrototypeOf(this,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,De.prototype.create)}},De=class{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){let n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],a=i?Oe(i,n):`Error`;return new Ee(r,`${this.serviceName}: ${a} (${r}).`,n)}};function Oe(e,t){return e.replace(ke,(e,n)=>{let r=t[n];return r==null?`<${n}?>`:String(r)})}var ke=/\{\$([^}]+)}/g;function Ae(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function je(e,t){if(e===t)return!0;let n=Object.keys(e),r=Object.keys(t);for(let i of n){if(!r.includes(i))return!1;let n=e[i],a=t[i];if(Me(n)&&Me(a)){if(!je(n,a))return!1}else if(n!==a)return!1}for(let e of r)if(!n.includes(e))return!1;return!0}function Me(e){return typeof e==`object`&&!!e}function Ne(e){let t=[];for(let[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+`=`+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+`=`+encodeURIComponent(r));return t.length?`&`+t.join(`&`):``}function Pe(e){let t={};return e.replace(/^\?/,``).split(`&`).forEach(e=>{if(e){let[n,r]=e.split(`=`);t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function Fe(e){let t=e.indexOf(`?`);if(!t)return``;let n=e.indexOf(`#`,t);return e.substring(t,n>0?n:void 0)}function Ie(e,t){let n=new Le(e,t);return n.subscribe.bind(n)}var Le=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(e===void 0&&t===void 0&&n===void 0)throw Error(`Missing Observer.`);r=Re(e,[`next`,`error`,`complete`])?e:{next:e,error:t,complete:n},r.next===void 0&&(r.next=ze),r.error===void 0&&(r.error=ze),r.complete===void 0&&(r.complete=ze);let i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],--this.observerCount,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(e){typeof console<`u`&&console.error&&console.error(e)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Re(e,t){if(typeof e!=`object`||!e)return!1;for(let n of t)if(n in e&&typeof e[n]==`function`)return!0;return!1}function ze(){}function Be(e){return e&&e._delegate?e._delegate:e}var Ve=class{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode=`LAZY`,this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}},He=`[DEFAULT]`,Ue=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let e=new le;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{let n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(e){if(n)return null;throw e}else if(n)return null;else throw Error(`Service ${this.name} is not available`)}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(Ge(e))try{this.getOrInitializeService({instanceIdentifier:He})}catch{}for(let[e,t]of this.instancesDeferred.entries()){let n=this.normalizeInstanceIdentifier(e);try{let e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch{}}}}clearInstance(e=He){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>`INTERNAL`in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>`_delete`in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=He){return this.instances.has(e)}getOptions(e=He){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(let[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(r);return r}onInit(e,t){let n=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(n)??new Set;r.add(e),this.onInitCallbacks.set(n,r);let i=this.instances.get(n);return i&&e(i,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){let n=this.onInitCallbacks.get(t);if(n)for(let r of n)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:We(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=He){return this.component?this.component.multipleInstances?e:He:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!==`EXPLICIT`}};function We(e){return e===He?void 0:e}function Ge(e){return e.instantiationMode===`EAGER`}var Ke=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Ue(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}},qe=[],k;(function(e){e[e.DEBUG=0]=`DEBUG`,e[e.VERBOSE=1]=`VERBOSE`,e[e.INFO=2]=`INFO`,e[e.WARN=3]=`WARN`,e[e.ERROR=4]=`ERROR`,e[e.SILENT=5]=`SILENT`})(k||={});var Je={debug:k.DEBUG,verbose:k.VERBOSE,info:k.INFO,warn:k.WARN,error:k.ERROR,silent:k.SILENT},Ye=k.INFO,Xe={[k.DEBUG]:`log`,[k.VERBOSE]:`log`,[k.INFO]:`info`,[k.WARN]:`warn`,[k.ERROR]:`error`},Ze=(e,t,...n)=>{if(t<e.logLevel)return;let r=new Date().toISOString(),i=Xe[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)},Qe=class{constructor(e){this.name=e,this._logLevel=Ye,this._logHandler=Ze,this._userLogHandler=null,qe.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in k))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e==`string`?Je[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!=`function`)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,k.DEBUG,...e),this._logHandler(this,k.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,k.VERBOSE,...e),this._logHandler(this,k.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,k.INFO,...e),this._logHandler(this,k.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,k.WARN,...e),this._logHandler(this,k.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,k.ERROR,...e),this._logHandler(this,k.ERROR,...e)}},$e=(e,t)=>t.some(t=>e instanceof t),et,tt;function nt(){return et||=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]}function rt(){return tt||=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey]}var it=new WeakMap,at=new WeakMap,ot=new WeakMap,st=new WeakMap,ct=new WeakMap;function lt(e){let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener(`success`,i),e.removeEventListener(`error`,a)},i=()=>{t(ht(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener(`success`,i),e.addEventListener(`error`,a)});return t.then(t=>{t instanceof IDBCursor&&it.set(t,e)}).catch(()=>{}),ct.set(t,e),t}function ut(e){if(at.has(e))return;let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener(`complete`,i),e.removeEventListener(`error`,a),e.removeEventListener(`abort`,a)},i=()=>{t(),r()},a=()=>{n(e.error||new DOMException(`AbortError`,`AbortError`)),r()};e.addEventListener(`complete`,i),e.addEventListener(`error`,a),e.addEventListener(`abort`,a)});at.set(e,t)}var dt={get(e,t,n){if(e instanceof IDBTransaction){if(t===`done`)return at.get(e);if(t===`objectStoreNames`)return e.objectStoreNames||ot.get(e);if(t===`store`)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ht(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t===`done`||t===`store`)?!0:t in e}};function ft(e){dt=e(dt)}function pt(e){return e===IDBDatabase.prototype.transaction&&!(`objectStoreNames`in IDBTransaction.prototype)?function(t,...n){let r=e.call(gt(this),t,...n);return ot.set(r,t.sort?t.sort():[t]),ht(r)}:rt().includes(e)?function(...t){return e.apply(gt(this),t),ht(it.get(this))}:function(...t){return ht(e.apply(gt(this),t))}}function mt(e){return typeof e==`function`?pt(e):(e instanceof IDBTransaction&&ut(e),$e(e,nt())?new Proxy(e,dt):e)}function ht(e){if(e instanceof IDBRequest)return lt(e);if(st.has(e))return st.get(e);let t=mt(e);return t!==e&&(st.set(e,t),ct.set(t,e)),t}var gt=e=>ct.get(e);function _t(e,t,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){let o=indexedDB.open(e,t),s=ht(o);return r&&o.addEventListener(`upgradeneeded`,e=>{r(ht(o.result),e.oldVersion,e.newVersion,ht(o.transaction),e)}),n&&o.addEventListener(`blocked`,e=>n(e.oldVersion,e.newVersion,e)),s.then(e=>{a&&e.addEventListener(`close`,()=>a()),i&&e.addEventListener(`versionchange`,e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}var vt=[`get`,`getKey`,`getAll`,`getAllKeys`,`count`],yt=[`put`,`add`,`delete`,`clear`],bt=new Map;function xt(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t==`string`))return;if(bt.get(t))return bt.get(t);let n=t.replace(/FromIndex$/,``),r=t!==n,i=yt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||vt.includes(n)))return;let a=async function(e,...t){let a=this.transaction(e,i?`readwrite`:`readonly`),o=a.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&a.done]))[0]};return bt.set(t,a),a}ft(e=>({...e,get:(t,n,r)=>xt(t,n)||e.get(t,n,r),has:(t,n)=>!!xt(t,n)||e.has(t,n)}));var St=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(Ct(e)){let t=e.getImmediate();return`${t.library}/${t.version}`}else return null}).filter(e=>e).join(` `)}};function Ct(e){return e.getComponent()?.type===`VERSION`}var wt=`@firebase/app`,Tt=`0.14.8`,Et=new Qe(`@firebase/app`),Dt=`@firebase/app-compat`,Ot=`@firebase/analytics-compat`,kt=`@firebase/analytics`,At=`@firebase/app-check-compat`,jt=`@firebase/app-check`,Mt=`@firebase/auth`,Nt=`@firebase/auth-compat`,Pt=`@firebase/database`,Ft=`@firebase/data-connect`,It=`@firebase/database-compat`,Lt=`@firebase/functions`,Rt=`@firebase/functions-compat`,zt=`@firebase/installations`,A=`@firebase/installations-compat`,Bt=`@firebase/messaging`,Vt=`@firebase/messaging-compat`,Ht=`@firebase/performance`,Ut=`@firebase/performance-compat`,Wt=`@firebase/remote-config`,Gt=`@firebase/remote-config-compat`,Kt=`@firebase/storage`,qt=`@firebase/storage-compat`,Jt=`@firebase/firestore`,Yt=`@firebase/ai`,Xt=`@firebase/firestore-compat`,Zt=`firebase`,Qt=`12.9.0`,$t=`[DEFAULT]`,en={[wt]:`fire-core`,[Dt]:`fire-core-compat`,[kt]:`fire-analytics`,[Ot]:`fire-analytics-compat`,[jt]:`fire-app-check`,[At]:`fire-app-check-compat`,[Mt]:`fire-auth`,[Nt]:`fire-auth-compat`,[Pt]:`fire-rtdb`,[Ft]:`fire-data-connect`,[It]:`fire-rtdb-compat`,[Lt]:`fire-fn`,[Rt]:`fire-fn-compat`,[zt]:`fire-iid`,[A]:`fire-iid-compat`,[Bt]:`fire-fcm`,[Vt]:`fire-fcm-compat`,[Ht]:`fire-perf`,[Ut]:`fire-perf-compat`,[Wt]:`fire-rc`,[Gt]:`fire-rc-compat`,[Kt]:`fire-gcs`,[qt]:`fire-gcs-compat`,[Jt]:`fire-fst`,[Xt]:`fire-fst-compat`,[Yt]:`fire-vertex`,"fire-js":`fire-js`,[Zt]:`fire-js-all`},tn=new Map,nn=new Map,rn=new Map;function an(e,t){try{e.container.addComponent(t)}catch(n){Et.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function on(e){let t=e.name;if(rn.has(t))return Et.debug(`There were multiple attempts to register component ${t}.`),!1;rn.set(t,e);for(let t of tn.values())an(t,e);for(let t of nn.values())an(t,e);return!0}function sn(e,t){let n=e.container.getProvider(`heartbeat`).getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function cn(e){return e==null?!1:e.settings!==void 0}var ln=new De(`app`,`Firebase`,{"no-app":`No Firebase App '{$appName}' has been created - call initializeApp() first`,"bad-app-name":`Illegal App name: '{$appName}'`,"duplicate-app":`Firebase App named '{$appName}' already exists with different options or config`,"app-deleted":`Firebase App named '{$appName}' already deleted`,"server-app-deleted":`Firebase Server App has been deleted`,"no-options":`Need to provide options, when not being deployed to hosting via source.`,"invalid-app-argument":`firebase.{$appName}() takes either no argument or a Firebase App instance.`,"invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":`Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.`,"idb-get":`Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.`,"idb-set":`Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.`,"idb-delete":`Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.`,"finalization-registry-not-supported":`FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.`,"invalid-server-app-environment":`FirebaseServerApp is not for use in browser environments.`}),un=class{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ve(`app`,()=>this,`PUBLIC`))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ln.create(`app-deleted`,{appName:this._name})}},dn=Qt;function fn(e,t={}){let n=e;typeof t!=`object`&&(t={name:t});let r={name:$t,automaticDataCollectionEnabled:!0,...t},i=r.name;if(typeof i!=`string`||!i)throw ln.create(`bad-app-name`,{appName:String(i)});if(n||=se(),!n)throw ln.create(`no-options`);let a=tn.get(i);if(a){if(je(n,a.options)&&je(r,a.config))return a;throw ln.create(`duplicate-app`,{appName:i})}let o=new Ke(i);for(let e of rn.values())o.addComponent(e);let s=new un(n,r,o);return tn.set(i,s),s}function pn(e=$t){let t=tn.get(e);if(!t&&e===`[DEFAULT]`&&se())return fn();if(!t)throw ln.create(`no-app`,{appName:e});return t}function mn(){return Array.from(tn.values())}function hn(e,t,n){let r=en[e]??e;n&&(r+=`-${n}`);let i=r.match(/\s|\//),a=t.match(/\s|\//);if(i||a){let e=[`Unable to register library "${r}" with version "${t}":`];i&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&e.push(`and`),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Et.warn(e.join(` `));return}on(new Ve(`${r}-version`,()=>({library:r,version:t}),`VERSION`))}var gn=`firebase-heartbeat-database`,_n=1,vn=`firebase-heartbeat-store`,yn=null;function bn(){return yn||=_t(gn,_n,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(vn)}catch(e){console.warn(e)}}}}).catch(e=>{throw ln.create(`idb-open`,{originalErrorMessage:e.message})}),yn}async function xn(e){try{let t=(await bn()).transaction(vn),n=await t.objectStore(vn).get(Cn(e));return await t.done,n}catch(e){if(e instanceof Ee)Et.warn(e.message);else{let t=ln.create(`idb-get`,{originalErrorMessage:e?.message});Et.warn(t.message)}}}async function Sn(e,t){try{let n=(await bn()).transaction(vn,`readwrite`);await n.objectStore(vn).put(t,Cn(e)),await n.done}catch(e){if(e instanceof Ee)Et.warn(e.message);else{let t=ln.create(`idb-set`,{originalErrorMessage:e?.message});Et.warn(t.message)}}}function Cn(e){return`${e.name}!${e.options.appId}`}var wn=1024,Tn=30,En=class{constructor(e){this.container=e,this._heartbeatsCache=null,this._storage=new kn(this.container.getProvider(`app`).getImmediate()),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{let e=this.container.getProvider(`platform-logger`).getImmediate().getPlatformInfoString(),t=Dn();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===t||this._heartbeatsCache.heartbeats.some(e=>e.date===t))return;if(this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats.length>Tn){let e=jn(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Et.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return``;let e=Dn(),{heartbeatsToSend:t,unsentEntries:n}=On(this._heartbeatsCache.heartbeats),r=w(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return Et.warn(e),``}}};function Dn(){return new Date().toISOString().substring(0,10)}function On(e,t=wn){let n=[],r=e.slice();for(let i of e){let e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),An(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),An(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var kn=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ce()?we().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let e=await xn(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return Sn(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return Sn(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}else return}};function An(e){return w(JSON.stringify({version:2,heartbeats:e})).length}function jn(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}function Mn(e){on(new Ve(`platform-logger`,e=>new St(e),`PRIVATE`)),on(new Ve(`heartbeat`,e=>new En(e),`PRIVATE`)),hn(wt,Tt,e),hn(wt,Tt,`esm2020`),hn(`fire-js`,``)}Mn(``);function Nn(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Pn=Nn,Fn=new De(`auth`,`Firebase`,Nn()),In=new Qe(`@firebase/auth`);function Ln(e,...t){In.logLevel<=k.WARN&&In.warn(`Auth (${dn}): ${e}`,...t)}function Rn(e,...t){In.logLevel<=k.ERROR&&In.error(`Auth (${dn}): ${e}`,...t)}function zn(e,...t){throw Wn(e,...t)}function Bn(e,...t){return Wn(e,...t)}function Vn(e,t,n){return new De(`auth`,`Firebase`,{...Pn(),[t]:n}).create(t,{appName:e.name})}function Hn(e){return Vn(e,`operation-not-supported-in-this-environment`,`Operations that alter the current user are not supported in conjunction with FirebaseServerApp`)}function Un(e,t,n){let r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&zn(e,`argument-error`),Vn(e,`argument-error`,`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Wn(e,...t){if(typeof e!=`string`){let n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return Fn.create(e,...t)}function j(e,t,...n){if(!e)throw Wn(t,...n)}function Gn(e){let t=`INTERNAL ASSERTION FAILED: `+e;throw Rn(t),Error(t)}function Kn(e,t){e||Gn(t)}function qn(){return typeof self<`u`&&self.location?.href||``}function Jn(){return Yn()===`http:`||Yn()===`https:`}function Yn(){return typeof self<`u`&&self.location?.protocol||null}function Xn(){return typeof navigator<`u`&&navigator&&`onLine`in navigator&&typeof navigator.onLine==`boolean`&&(Jn()||ye()||`connection`in navigator)?navigator.onLine:!0}function Zn(){if(typeof navigator>`u`)return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}var Qn=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Kn(t>e,`Short delay should be less than long delay!`),this.isMobile=ge()||be()}get(){return Xn()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function $n(e,t){Kn(e.emulator,`Emulator should always be set here`);let{url:n}=e.emulator;return t?`${n}${t.startsWith(`/`)?t.slice(1):t}`:n}var er=class{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<`u`&&`fetch`in self)return self.fetch;if(typeof globalThis<`u`&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<`u`)return fetch;Gn(`Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<`u`&&`Headers`in self)return self.Headers;if(typeof globalThis<`u`&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<`u`)return Headers;Gn(`Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<`u`&&`Response`in self)return self.Response;if(typeof globalThis<`u`&&globalThis.Response)return globalThis.Response;if(typeof Response<`u`)return Response;Gn(`Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}},tr={CREDENTIAL_MISMATCH:`custom-token-mismatch`,MISSING_CUSTOM_TOKEN:`internal-error`,INVALID_IDENTIFIER:`invalid-email`,MISSING_CONTINUE_URI:`internal-error`,INVALID_PASSWORD:`wrong-password`,MISSING_PASSWORD:`missing-password`,INVALID_LOGIN_CREDENTIALS:`invalid-credential`,EMAIL_EXISTS:`email-already-in-use`,PASSWORD_LOGIN_DISABLED:`operation-not-allowed`,INVALID_IDP_RESPONSE:`invalid-credential`,INVALID_PENDING_TOKEN:`invalid-credential`,FEDERATED_USER_ID_ALREADY_LINKED:`credential-already-in-use`,MISSING_REQ_TYPE:`internal-error`,EMAIL_NOT_FOUND:`user-not-found`,RESET_PASSWORD_EXCEED_LIMIT:`too-many-requests`,EXPIRED_OOB_CODE:`expired-action-code`,INVALID_OOB_CODE:`invalid-action-code`,MISSING_OOB_CODE:`internal-error`,CREDENTIAL_TOO_OLD_LOGIN_AGAIN:`requires-recent-login`,INVALID_ID_TOKEN:`invalid-user-token`,TOKEN_EXPIRED:`user-token-expired`,USER_NOT_FOUND:`user-token-expired`,TOO_MANY_ATTEMPTS_TRY_LATER:`too-many-requests`,PASSWORD_DOES_NOT_MEET_REQUIREMENTS:`password-does-not-meet-requirements`,INVALID_CODE:`invalid-verification-code`,INVALID_SESSION_INFO:`invalid-verification-id`,INVALID_TEMPORARY_PROOF:`invalid-credential`,MISSING_SESSION_INFO:`missing-verification-id`,SESSION_EXPIRED:`code-expired`,MISSING_ANDROID_PACKAGE_NAME:`missing-android-pkg-name`,UNAUTHORIZED_DOMAIN:`unauthorized-continue-uri`,INVALID_OAUTH_CLIENT_ID:`invalid-oauth-client-id`,ADMIN_ONLY_OPERATION:`admin-restricted-operation`,INVALID_MFA_PENDING_CREDENTIAL:`invalid-multi-factor-session`,MFA_ENROLLMENT_NOT_FOUND:`multi-factor-info-not-found`,MISSING_MFA_ENROLLMENT_ID:`missing-multi-factor-info`,MISSING_MFA_PENDING_CREDENTIAL:`missing-multi-factor-session`,SECOND_FACTOR_EXISTS:`second-factor-already-in-use`,SECOND_FACTOR_LIMIT_EXCEEDED:`maximum-second-factor-count-exceeded`,BLOCKING_FUNCTION_ERROR_RESPONSE:`internal-error`,RECAPTCHA_NOT_ENABLED:`recaptcha-not-enabled`,MISSING_RECAPTCHA_TOKEN:`missing-recaptcha-token`,INVALID_RECAPTCHA_TOKEN:`invalid-recaptcha-token`,INVALID_RECAPTCHA_ACTION:`invalid-recaptcha-action`,MISSING_CLIENT_TYPE:`missing-client-type`,MISSING_RECAPTCHA_VERSION:`missing-recaptcha-version`,INVALID_RECAPTCHA_VERSION:`invalid-recaptcha-version`,INVALID_REQ_TYPE:`invalid-req-type`},nr=[`/v1/accounts:signInWithCustomToken`,`/v1/accounts:signInWithEmailLink`,`/v1/accounts:signInWithIdp`,`/v1/accounts:signInWithPassword`,`/v1/accounts:signInWithPhoneNumber`,`/v1/token`],rr=new Qn(3e4,6e4);function ir(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function ar(e,t,n,r,i={}){return or(e,i,async()=>{let i={},a={};r&&(t===`GET`?a=r:i={body:JSON.stringify(r)});let o=Ne({key:e.config.apiKey,...a}).slice(1),s=await e._getAdditionalHeaders();s[`Content-Type`]=`application/json`,e.languageCode&&(s[`X-Firebase-Locale`]=e.languageCode);let c={method:t,headers:s,...i};return ve()||(c.referrerPolicy=`no-referrer`),e.emulatorConfig&&E(e.emulatorConfig.host)&&(c.credentials=`include`),er.fetch()(await cr(e,e.config.apiHost,n,o),c)})}async function or(e,t,n){e._canInitEmulator=!1;let r={...tr,...t};try{let t=new ur(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();let a=await i.json();if(`needConfirmation`in a)throw dr(e,`account-exists-with-different-credential`,a);if(i.ok&&!(`errorMessage`in a))return a;{let[t,n]=(i.ok?a.errorMessage:a.error.message).split(` : `);if(t===`FEDERATED_USER_ID_ALREADY_LINKED`)throw dr(e,`credential-already-in-use`,a);if(t===`EMAIL_EXISTS`)throw dr(e,`email-already-in-use`,a);if(t===`USER_DISABLED`)throw dr(e,`user-disabled`,a);let o=r[t]||t.toLowerCase().replace(/[_\s]+/g,`-`);if(n)throw Vn(e,o,n);zn(e,o)}}catch(t){if(t instanceof Ee)throw t;zn(e,`network-request-failed`,{message:String(t)})}}async function sr(e,t,n,r,i={}){let a=await ar(e,t,n,r,i);return`mfaPendingCredential`in a&&zn(e,`multi-factor-auth-required`,{_serverResponse:a}),a}async function cr(e,t,n,r){let i=`${t}${n}?${r}`,a=e,o=a.config.emulator?$n(e.config,i):`${e.config.apiScheme}://${i}`;return nr.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()===`COOKIE`)?a._getPersistence()._getFinalTarget(o).toString():o}function lr(e){switch(e){case`ENFORCE`:return`ENFORCE`;case`AUDIT`:return`AUDIT`;case`OFF`:return`OFF`;default:return`ENFORCEMENT_STATE_UNSPECIFIED`}}var ur=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Bn(this.auth,`network-request-failed`)),rr.get())})}};function dr(e,t,n){let r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Bn(e,t,r);return i.customData._tokenResponse=n,i}function fr(e){return e!==void 0&&e.enterprise!==void 0}var pr=class{constructor(e){if(this.siteKey=``,this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw Error(`recaptchaKey undefined`);this.siteKey=e.recaptchaKey.split(`/`)[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return lr(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)===`ENFORCE`||this.getProviderEnforcementState(e)===`AUDIT`}isAnyProviderEnabled(){return this.isProviderEnabled(`EMAIL_PASSWORD_PROVIDER`)||this.isProviderEnabled(`PHONE_PROVIDER`)}};async function mr(e,t){return ar(e,`GET`,`/v2/recaptchaConfig`,ir(e,t))}async function hr(e,t){return ar(e,`POST`,`/v1/accounts:delete`,t)}async function gr(e,t){return ar(e,`POST`,`/v1/accounts:lookup`,t)}function _r(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function vr(e,t=!1){let n=Be(e),r=await n.getIdToken(t),i=br(r);j(i&&i.exp&&i.auth_time&&i.iat,n.auth,`internal-error`);let a=typeof i.firebase==`object`?i.firebase:void 0,o=a?.sign_in_provider;return{claims:i,token:r,authTime:_r(yr(i.auth_time)),issuedAtTime:_r(yr(i.iat)),expirationTime:_r(yr(i.exp)),signInProvider:o||null,signInSecondFactor:a?.sign_in_second_factor||null}}function yr(e){return Number(e)*1e3}function br(e){let[t,n,r]=e.split(`.`);if(t===void 0||n===void 0||r===void 0)return Rn(`JWT malformed, contained fewer than 3 sections`),null;try{let e=ee(n);return e?JSON.parse(e):(Rn(`Failed to decode base64 JWT payload`),null)}catch(e){return Rn(`Caught error parsing JWT payload as JSON`,e?.toString()),null}}function xr(e){let t=br(e);return j(t,`internal-error`),j(t.exp!==void 0,`internal-error`),j(t.iat!==void 0,`internal-error`),Number(t.exp)-Number(t.iat)}async function Sr(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof Ee&&Cr(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}function Cr({code:e}){return e===`auth/user-disabled`||e===`auth/user-token-expired`}var wr=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;let e=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code===`auth/network-request-failed`&&this.schedule(!0);return}this.schedule()}},Tr=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=_r(this.lastLoginAt),this.creationTime=_r(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Er(e){let t=e.auth,n=await Sr(e,gr(t,{idToken:await e.getIdToken()}));j(n?.users.length,t,`internal-error`);let r=n.users[0];e._notifyReloadListener(r);let i=r.providerUserInfo?.length?kr(r.providerUserInfo):[],a=Or(e.providerData,i),o=e.isAnonymous,s=!(e.email&&r.passwordHash)&&!a?.length,c=o?s:!1,l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Tr(r.createdAt,r.lastLoginAt),isAnonymous:c};Object.assign(e,l)}async function Dr(e){let t=Be(e);await Er(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Or(e,t){return[...e.filter(e=>!t.some(t=>t.providerId===e.providerId)),...t]}function kr(e){return e.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||``,displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function Ar(e,t){let n=await or(e,{},async()=>{let n=Ne({grant_type:`refresh_token`,refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,a=await cr(e,r,`/v1/token`,`key=${i}`),o=await e._getAdditionalHeaders();o[`Content-Type`]=`application/x-www-form-urlencoded`;let s={method:`POST`,headers:o,body:n};return e.emulatorConfig&&E(e.emulatorConfig.host)&&(s.credentials=`include`),er.fetch()(a,s)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function jr(e,t){return ar(e,`POST`,`/v2/accounts:revokeToken`,ir(e,t))}var Mr=class e{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){j(e.idToken,`internal-error`),j(e.idToken!==void 0,`internal-error`),j(e.refreshToken!==void 0,`internal-error`);let t=`expiresIn`in e&&e.expiresIn!==void 0?Number(e.expiresIn):xr(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){j(e.length!==0,`internal-error`);let t=xr(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(j(this.refreshToken,e,`user-token-expired`),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:n,refreshToken:r,expiresIn:i}=await Ar(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,n){let{refreshToken:r,accessToken:i,expirationTime:a}=n,o=new e;return r&&(j(typeof r==`string`,`internal-error`,{appName:t}),o.refreshToken=r),i&&(j(typeof i==`string`,`internal-error`,{appName:t}),o.accessToken=i),a&&(j(typeof a==`number`,`internal-error`,{appName:t}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new e,this.toJSON())}_performRefresh(){return Gn(`not implemented`)}};function Nr(e,t){j(typeof e==`string`||e===void 0,`internal-error`,{appName:t})}var Pr=class e{constructor({uid:e,auth:t,stsTokenManager:n,...r}){this.providerId=`firebase`,this.proactiveRefresh=new wr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Tr(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){let t=await Sr(this,this.stsTokenManager.getToken(this.auth,e));return j(t,this.auth,`internal-error`),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return vr(this,e)}reload(){return Dr(this)}_assign(e){this!==e&&(j(this.uid===e.uid,this.auth,`internal-error`),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>({...e})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(t){let n=new e({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){j(!this.reloadListener,this.auth,`internal-error`),this.reloadListener=e,this.reloadUserInfo&&=(this._notifyReloadListener(this.reloadUserInfo),null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Er(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(cn(this.auth.app))return Promise.reject(Hn(this.auth));let e=await this.getIdToken();return await Sr(this,hr(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||``}static _fromJSON(t,n){let r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,o=n.photoURL??void 0,s=n.tenantId??void 0,c=n._redirectEventId??void 0,l=n.createdAt??void 0,u=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:p,providerData:m,stsTokenManager:h}=n;j(d&&h,t,`internal-error`);let g=Mr.fromJSON(this.name,h);j(typeof d==`string`,t,`internal-error`),Nr(r,t.name),Nr(i,t.name),j(typeof f==`boolean`,t,`internal-error`),j(typeof p==`boolean`,t,`internal-error`),Nr(a,t.name),Nr(o,t.name),Nr(s,t.name),Nr(c,t.name),Nr(l,t.name),Nr(u,t.name);let _=new e({uid:d,auth:t,email:i,emailVerified:f,displayName:r,isAnonymous:p,photoURL:o,phoneNumber:a,tenantId:s,stsTokenManager:g,createdAt:l,lastLoginAt:u});return m&&Array.isArray(m)&&(_.providerData=m.map(e=>({...e}))),c&&(_._redirectEventId=c),_}static async _fromIdTokenResponse(t,n,r=!1){let i=new Mr;i.updateFromServerResponse(n);let a=new e({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await Er(a),a}static async _fromGetAccountInfoResponse(t,n,r){let i=n.users[0];j(i.localId!==void 0,`internal-error`);let a=i.providerUserInfo===void 0?[]:kr(i.providerUserInfo),o=!(i.email&&i.passwordHash)&&!a?.length,s=new Mr;s.updateFromIdToken(r);let c=new e({uid:i.localId,auth:t,stsTokenManager:s,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Tr(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(c,l),c}},Fr=new Map;function Ir(e){Kn(e instanceof Function,`Expected a class definition`);let t=Fr.get(e);return t?(Kn(t instanceof e,`Instance stored in cache mismatched with class`),t):(t=new e,Fr.set(e,t),t)}var Lr=class{constructor(){this.type=`NONE`,this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){let t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}};Lr.type=`NONE`;var Rr=Lr;function zr(e,t,n){return`firebase:${e}:${t}:${n}`}var Br=class e{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;let{config:r,name:i}=this.auth;this.fullUserKey=zr(this.userKey,r.apiKey,i),this.fullPersistenceKey=zr(`persistence`,r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e==`string`){let t=await gr(this.auth,{idToken:e}).catch(()=>void 0);return t?Pr._fromGetAccountInfoResponse(this.auth,t,e):null}return Pr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r=`authUser`){if(!n.length)return new e(Ir(Rr),t,r);let i=(await Promise.all(n.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e),a=i[0]||Ir(Rr),o=zr(r,t.config.apiKey,t.name),s=null;for(let e of n)try{let n=await e._get(o);if(n){let r;if(typeof n==`string`){let e=await gr(t,{idToken:n}).catch(()=>void 0);if(!e)break;r=await Pr._fromGetAccountInfoResponse(t,e,n)}else r=Pr._fromJSON(t,n);e!==a&&(s=r),a=e;break}}catch{}let c=i.filter(e=>e._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new e(a,t,r):(a=c[0],s&&await a._set(o,s.toJSON()),await Promise.all(n.map(async e=>{if(e!==a)try{await e._remove(o)}catch{}})),new e(a,t,r))}};function Vr(e){let t=e.toLowerCase();if(t.includes(`opera/`)||t.includes(`opr/`)||t.includes(`opios/`))return`Opera`;if(Gr(t))return`IEMobile`;if(t.includes(`msie`)||t.includes(`trident/`))return`IE`;if(t.includes(`edge/`))return`Edge`;if(Hr(t))return`Firefox`;if(t.includes(`silk/`))return`Silk`;if(qr(t))return`Blackberry`;if(Jr(t))return`Webos`;if(Ur(t))return`Safari`;if((t.includes(`chrome/`)||Wr(t))&&!t.includes(`edge/`))return`Chrome`;if(Kr(t))return`Android`;{let t=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(t?.length===2)return t[1]}return`Other`}function Hr(e=he()){return/firefox\//i.test(e)}function Ur(e=he()){let t=e.toLowerCase();return t.includes(`safari/`)&&!t.includes(`chrome/`)&&!t.includes(`crios/`)&&!t.includes(`android`)}function Wr(e=he()){return/crios\//i.test(e)}function Gr(e=he()){return/iemobile/i.test(e)}function Kr(e=he()){return/android/i.test(e)}function qr(e=he()){return/blackberry/i.test(e)}function Jr(e=he()){return/webos/i.test(e)}function Yr(e=he()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Xr(e=he()){return Yr(e)&&!!window.navigator?.standalone}function Zr(){return xe()&&document.documentMode===10}function Qr(e=he()){return Yr(e)||Kr(e)||Jr(e)||qr(e)||/windows phone/i.test(e)||Gr(e)}function $r(e,t=[]){let n;switch(e){case`Browser`:n=Vr(he());break;case`Worker`:n=`${Vr(he())}-${e}`;break;default:n=e}let r=t.length?t.join(`,`):`FirebaseCore-web`;return`${n}/JsCore/${dn}/${r}`}var ei=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let n=t=>new Promise((n,r)=>{try{n(e(t))}catch(e){r(e)}});n.onAbort=t,this.queue.push(n);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(e){t.reverse();for(let e of t)try{e()}catch{}throw this.auth._errorFactory.create(`login-blocked`,{originalMessage:e?.message})}}};async function ti(e,t={}){return ar(e,`GET`,`/v2/passwordPolicy`,ir(e,t))}var ni=6,ri=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??ni,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState===`ENFORCEMENT_STATE_UNSPECIFIED`&&(this.enforcementState=`OFF`),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join(``)??``,this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&=t.meetsMinPasswordLength??!0,t.isValid&&=t.meetsMaxPasswordLength??!0,t.isValid&&=t.containsLowercaseLetter??!0,t.isValid&&=t.containsUppercaseLetter??!0,t.isValid&&=t.containsNumericCharacter??!0,t.isValid&&=t.containsNonAlphanumericCharacter??!0,t}validatePasswordLengthOptions(e,t){let n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>=`a`&&n<=`z`,n>=`A`&&n<=`Z`,n>=`0`&&n<=`9`,this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||=t),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||=n),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||=r),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||=i)}},ii=class{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new oi(this),this.idTokenSubscription=new oi(this),this.beforeStateQueue=new ei(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Fn,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ir(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Br.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await gr(this,{idToken:e}),n=await Pr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(e){console.warn(`FirebaseServerApp could not login user with provided authIdToken: `,e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(cn(this.app)){let e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),n=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let t=this.redirectUser?._redirectEventId,i=n?._redirectEventId,a=await this.tryRedirectSignIn(e);(!t||t===i)&&a?.user&&(n=a.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(e){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(e))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return j(this._popupRedirectResolver,this,`argument-error`),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Er(e)}catch(e){if(e?.code!==`auth/network-request-failed`)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Zn()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(cn(this.app))return Promise.reject(Hn(this));let t=e?Be(e):null;return t&&j(t.auth.config.apiKey===this.config.apiKey,this,`invalid-user-token`),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&j(this.tenantId===e.tenantId,this,`tenant-id-mismatch`),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return cn(this.app)?Promise.reject(Hn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return cn(this.app)?Promise.reject(Hn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ir(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion===this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?t.validatePassword(e):Promise.reject(this._errorFactory.create(`unsupported-password-policy-schema-version`,{}))}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=new ri(await ti(this));this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new De(`auth`,`Firebase`,e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t={providerId:`apple.com`,tokenType:`ACCESS_TOKEN`,token:e,idToken:await this.currentUser.getIdToken()};this.tenantId!=null&&(t.tenantId=this.tenantId),await jr(this,t)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&Ir(e)||this._popupRedirectResolver;j(t,this,`argument-error`),this.redirectPersistenceManager=await Br.create(this,[Ir(t._redirectPersistence)],`redirectUser`),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};let i=typeof t==`function`?t:t.next.bind(t),a=!1,o=this._isInitialized?Promise.resolve():this._initializationPromise;if(j(o,this,`internal-error`),o.then(()=>{a||i(this.currentUser)}),typeof t==`function`){let i=e.addObserver(t,n,r);return()=>{a=!0,i()}}else{let n=e.addObserver(t);return()=>{a=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return j(this.persistenceManager,this,`internal-error`),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$r(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e[`X-Firebase-gmpid`]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e[`X-Firebase-Client`]=t);let n=await this._getAppCheckToken();return n&&(e[`X-Firebase-AppCheck`]=n),e}async _getAppCheckToken(){if(cn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Ln(`Error while retrieving App Check token: ${e.error}`),e?.token}};function ai(e){return Be(e)}var oi=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ie(e=>this.observer=e)}get next(){return j(this.observer,this.auth,`internal-error`),this.observer.next.bind(this.observer)}},si={async loadJS(){throw Error(`Unable to load external scripts`)},recaptchaV2Script:``,recaptchaEnterpriseScript:``,gapiScript:``};function ci(e){si=e}function li(e){return si.loadJS(e)}function ui(){return si.recaptchaEnterpriseScript}function di(){return si.gapiScript}function fi(e){return`__${e}${Math.floor(Math.random()*1e6)}`}var pi=class{constructor(){this.enterprise=new mi}ready(e){e()}execute(e,t){return Promise.resolve(`token`)}render(e,t){return``}},mi=class{ready(e){e()}execute(e,t){return Promise.resolve(`token`)}render(e,t){return``}},hi=`recaptcha-enterprise`,gi=`NO_RECAPTCHA`,_i=class{constructor(e){this.type=hi,this.auth=ai(e)}async verify(e=`verify`,t=!1){async function n(e){if(!t){if(e.tenantId==null&&e._agentRecaptchaConfig!=null)return e._agentRecaptchaConfig.siteKey;if(e.tenantId!=null&&e._tenantRecaptchaConfigs[e.tenantId]!==void 0)return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{mr(e,{clientType:`CLIENT_TYPE_WEB`,version:`RECAPTCHA_ENTERPRISE`}).then(r=>{if(r.recaptchaKey===void 0)n(Error(`recaptcha Enterprise site key undefined`));else{let n=new pr(r);return e.tenantId==null?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}}).catch(e=>{n(e)})})}function r(t,n,r){let i=window.grecaptcha;fr(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(gi)})}):r(Error(`No reCAPTCHA enterprise script loaded.`))}return this.auth.settings.appVerificationDisabledForTesting?new pi().execute(`siteKey`,{action:`verify`}):new Promise((e,i)=>{n(this.auth).then(n=>{if(!t&&fr(window.grecaptcha))r(n,e,i);else{if(typeof window>`u`){i(Error(`RecaptchaVerifier is only supported in browser`));return}let t=ui();t.length!==0&&(t+=n),li(t).then(()=>{r(n,e,i)}).catch(e=>{i(e)})}}).catch(e=>{i(e)})})}};async function vi(e,t,n,r=!1,i=!1){let a=new _i(e),o;if(i)o=gi;else try{o=await a.verify(n)}catch{o=await a.verify(n,!0)}let s={...t};if(n===`mfaSmsEnrollment`||n===`mfaSmsSignIn`){if(`phoneEnrollmentInfo`in s){let e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.recaptchaToken;Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:`CLIENT_TYPE_WEB`,recaptchaVersion:`RECAPTCHA_ENTERPRISE`}})}else if(`phoneSignInInfo`in s){let e=s.phoneSignInInfo.recaptchaToken;Object.assign(s,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:`CLIENT_TYPE_WEB`,recaptchaVersion:`RECAPTCHA_ENTERPRISE`}})}return s}return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:`CLIENT_TYPE_WEB`}),Object.assign(s,{recaptchaVersion:`RECAPTCHA_ENTERPRISE`}),s}async function yi(e,t,n,r,i){return i===`EMAIL_PASSWORD_PROVIDER`?e._getRecaptchaConfig()?.isProviderEnabled(`EMAIL_PASSWORD_PROVIDER`)?r(e,await vi(e,t,n,n===`getOobCode`)):r(e,t).catch(async i=>i.code===`auth/missing-recaptcha-token`?(console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`),r(e,await vi(e,t,n,n===`getOobCode`))):Promise.reject(i)):i===`PHONE_PROVIDER`?e._getRecaptchaConfig()?.isProviderEnabled(`PHONE_PROVIDER`)?r(e,await vi(e,t,n)).catch(async i=>e._getRecaptchaConfig()?.getProviderEnforcementState(`PHONE_PROVIDER`)===`AUDIT`&&(i.code===`auth/missing-recaptcha-token`||i.code===`auth/invalid-app-credential`)?(console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`),r(e,await vi(e,t,n,!1,!0))):Promise.reject(i)):r(e,await vi(e,t,n,!1,!0)):Promise.reject(i+` provider is not supported.`)}async function bi(e){let t=ai(e),n=new pr(await mr(t,{clientType:`CLIENT_TYPE_WEB`,version:`RECAPTCHA_ENTERPRISE`}));t.tenantId==null?t._agentRecaptchaConfig=n:t._tenantRecaptchaConfigs[t.tenantId]=n,n.isAnyProviderEnabled()&&new _i(t).verify()}function xi(e,t){let n=sn(e,`auth`);if(n.isInitialized()){let e=n.getImmediate();if(je(n.getOptions(),t??{}))return e;zn(e,`already-initialized`)}return n.initialize({options:t})}function Si(e,t){let n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Ir);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}function Ci(e,t,n){let r=ai(e);j(/^https?:\/\//.test(t),r,`invalid-emulator-scheme`);let i=!!n?.disableWarnings,a=wi(t),{host:o,port:s}=Ti(t),c=s===null?``:`:${s}`,l={url:`${a}//${o}${c}/`},u=Object.freeze({host:o,port:s,protocol:a.replace(`:`,``),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){j(r.config.emulator&&r.emulatorConfig,r,`emulator-config-failed`),j(je(l,r.config.emulator)&&je(u,r.emulatorConfig),r,`emulator-config-failed`);return}r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,E(o)?(D(`${a}//${o}${c}`),O(`Auth`,!0)):i||Di()}function wi(e){let t=e.indexOf(`:`);return t<0?``:e.substr(0,t+1)}function Ti(e){let t=wi(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:``,port:null};let r=n[2].split(`@`).pop()||``,i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let e=i[1];return{host:e,port:Ei(r.substr(e.length+1))}}else{let[e,t]=r.split(`:`);return{host:e,port:Ei(t)}}}function Ei(e){if(!e)return null;let t=Number(e);return isNaN(t)?null:t}function Di(){function e(){let e=document.createElement(`p`),t=e.style;e.innerText=`Running in emulator mode. Do not use with production credentials.`,t.position=`fixed`,t.width=`100%`,t.backgroundColor=`#ffffff`,t.border=`.1em solid #000000`,t.color=`#b50000`,t.bottom=`0px`,t.left=`0px`,t.margin=`0px`,t.zIndex=`10000`,t.textAlign=`center`,e.classList.add(`firebase-emulator-warning`),document.body.appendChild(e)}typeof console<`u`&&typeof console.info==`function`&&console.info(`WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.`),typeof window<`u`&&typeof document<`u`&&(document.readyState===`loading`?window.addEventListener(`DOMContentLoaded`,e):e())}var Oi=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Gn(`not implemented`)}_getIdTokenResponse(e){return Gn(`not implemented`)}_linkToIdToken(e,t){return Gn(`not implemented`)}_getReauthenticationResolver(e){return Gn(`not implemented`)}};async function ki(e,t){return ar(e,`POST`,`/v1/accounts:signUp`,t)}async function Ai(e,t){return sr(e,`POST`,`/v1/accounts:signInWithPassword`,ir(e,t))}async function ji(e,t){return ar(e,`POST`,`/v1/accounts:sendOobCode`,ir(e,t))}async function Mi(e,t){return ji(e,t)}async function Ni(e,t){return sr(e,`POST`,`/v1/accounts:signInWithEmailLink`,ir(e,t))}async function Pi(e,t){return sr(e,`POST`,`/v1/accounts:signInWithEmailLink`,ir(e,t))}var Fi=class e extends Oi{constructor(e,t,n,r=null){super(`password`,n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(t,n){return new e(t,n,`password`)}static _fromEmailAndCode(t,n,r=null){return new e(t,n,`emailLink`,r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e==`string`?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod===`password`)return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod===`emailLink`)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case`password`:return yi(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:`CLIENT_TYPE_WEB`},`signInWithPassword`,Ai,`EMAIL_PASSWORD_PROVIDER`);case`emailLink`:return Ni(e,{email:this._email,oobCode:this._password});default:zn(e,`internal-error`)}}async _linkToIdToken(e,t){switch(this.signInMethod){case`password`:return yi(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:`CLIENT_TYPE_WEB`},`signUpPassword`,ki,`EMAIL_PASSWORD_PROVIDER`);case`emailLink`:return Pi(e,{idToken:t,email:this._email,oobCode:this._password});default:zn(e,`internal-error`)}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};async function Ii(e,t){return sr(e,`POST`,`/v1/accounts:signInWithIdp`,ir(e,t))}var Li=`http://localhost`,Ri=class e extends Oi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){let n=new e(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):zn(`argument-error`),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){let{providerId:n,signInMethod:r,...i}=typeof t==`string`?JSON.parse(t):t;if(!n||!r)return null;let a=new e(n,r);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){return Ii(e,this.buildRequest())}_linkToIdToken(e,t){let n=this.buildRequest();return n.idToken=t,Ii(e,n)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,Ii(e,t)}buildRequest(){let e={requestUri:Li,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ne(t)}return e}};async function zi(e,t){return ar(e,`POST`,`/v1/accounts:sendVerificationCode`,ir(e,t))}async function Bi(e,t){return sr(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,ir(e,t))}async function Vi(e,t){let n=await sr(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,ir(e,t));if(n.temporaryProof)throw dr(e,`account-exists-with-different-credential`,n);return n}var M={USER_NOT_FOUND:`user-not-found`};async function Hi(e,t){return sr(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,ir(e,{...t,operation:`REAUTH`}),M)}var Ui=class e extends Oi{constructor(e){super(`phone`,`phone`),this.params=e}static _fromVerification(t,n){return new e({verificationId:t,verificationCode:n})}static _fromTokenResponse(t,n){return new e({phoneNumber:t,temporaryProof:n})}_getIdTokenResponse(e){return Bi(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return Vi(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return Hi(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(t){typeof t==`string`&&(t=JSON.parse(t));let{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:a}=t;return!r&&!n&&!i&&!a?null:new e({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:a})}};function Wi(e){switch(e){case`recoverEmail`:return`RECOVER_EMAIL`;case`resetPassword`:return`PASSWORD_RESET`;case`signIn`:return`EMAIL_SIGNIN`;case`verifyEmail`:return`VERIFY_EMAIL`;case`verifyAndChangeEmail`:return`VERIFY_AND_CHANGE_EMAIL`;case`revertSecondFactorAddition`:return`REVERT_SECOND_FACTOR_ADDITION`;default:return null}}function Gi(e){let t=Pe(Fe(e)).link,n=t?Pe(Fe(t)).deep_link_id:null,r=Pe(Fe(e)).deep_link_id;return(r?Pe(Fe(r)).link:null)||r||n||t||e}var Ki=class e{constructor(e){let t=Pe(Fe(e)),n=t.apiKey??null,r=t.oobCode??null,i=Wi(t.mode??null);j(n&&r&&i,`argument-error`),this.apiKey=n,this.operation=i,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(t){let n=Gi(t);try{return new e(n)}catch{return null}}},qi=class e{constructor(){this.providerId=e.PROVIDER_ID}static credential(e,t){return Fi._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){let n=Ki.parseLink(t);return j(n,`argument-error`),Fi._fromEmailAndCode(e,n.code,n.tenantId)}};qi.PROVIDER_ID=`password`,qi.EMAIL_PASSWORD_SIGN_IN_METHOD=`password`,qi.EMAIL_LINK_SIGN_IN_METHOD=`emailLink`;var Ji=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}},Yi=class extends Ji{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}},Xi=class e extends Yi{constructor(){super(`facebook.com`)}static credential(t){return Ri._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!(`oauthAccessToken`in t)||!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch{return null}}};Xi.FACEBOOK_SIGN_IN_METHOD=`facebook.com`,Xi.PROVIDER_ID=`facebook.com`;var Zi=class e extends Yi{constructor(){super(`google.com`),this.addScope(`profile`)}static credential(t,n){return Ri._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return e.credential(n,r)}catch{return null}}};Zi.GOOGLE_SIGN_IN_METHOD=`google.com`,Zi.PROVIDER_ID=`google.com`;var Qi=class e extends Yi{constructor(){super(`github.com`)}static credential(t){return Ri._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!(`oauthAccessToken`in t)||!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch{return null}}};Qi.GITHUB_SIGN_IN_METHOD=`github.com`,Qi.PROVIDER_ID=`github.com`;var $i=class e extends Yi{constructor(){super(`twitter.com`)}static credential(t,n){return Ri._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return e.credential(n,r)}catch{return null}}};$i.TWITTER_SIGN_IN_METHOD=`twitter.com`,$i.PROVIDER_ID=`twitter.com`;var ea=class e{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){return new e({user:await Pr._fromIdTokenResponse(t,r,i),providerId:ta(r),_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){return await t._updateTokensIfNecessary(r,!0),new e({user:t,providerId:ta(r),_tokenResponse:r,operationType:n})}};function ta(e){return e.providerId?e.providerId:`phoneNumber`in e?`phone`:null}var na=class e extends Ee{constructor(t,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,e.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new e(t,n,r,i)}};function ra(e,t,n,r){return(t===`reauthenticate`?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{throw n.code===`auth/multi-factor-auth-required`?na._fromErrorAndOperation(e,n,t,r):n})}async function ia(e,t,n=!1){let r=await Sr(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return ea._forOperation(e,`link`,r)}async function aa(e,t,n=!1){let{auth:r}=e;if(cn(r.app))return Promise.reject(Hn(r));let i=`reauthenticate`;try{let a=await Sr(e,ra(r,i,t,e),n);j(a.idToken,r,`internal-error`);let o=br(a.idToken);j(o,r,`internal-error`);let{sub:s}=o;return j(e.uid===s,r,`user-mismatch`),ea._forOperation(e,i,a)}catch(e){throw e?.code===`auth/user-not-found`&&zn(r,`user-mismatch`),e}}async function oa(e,t,n=!1){if(cn(e.app))return Promise.reject(Hn(e));let r=`signIn`,i=await ra(e,r,t),a=await ea._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(a.user),a}async function sa(e,t){return oa(ai(e),t)}async function ca(e,t){return sr(e,`POST`,`/v1/accounts:signInWithCustomToken`,ir(e,t))}async function la(e,t){if(cn(e.app))return Promise.reject(Hn(e));let n=ai(e),r=await ca(n,{token:t,returnSecureToken:!0}),i=await ea._fromIdTokenResponse(n,`signIn`,r);return await n._updateCurrentUser(i.user),i}function ua(e,t,n){j(n.url?.length>0,e,`invalid-continue-uri`),j(n.dynamicLinkDomain===void 0||n.dynamicLinkDomain.length>0,e,`invalid-dynamic-link-domain`),j(n.linkDomain===void 0||n.linkDomain.length>0,e,`invalid-hosting-link-domain`),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.linkDomain=n.linkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(j(n.iOS.bundleId.length>0,e,`missing-ios-bundle-id`),t.iOSBundleId=n.iOS.bundleId),n.android&&(j(n.android.packageName.length>0,e,`missing-android-pkg-name`),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function da(e){let t=ai(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function fa(e,t,n){return cn(e.app)?Promise.reject(Hn(e)):sa(Be(e),qi.credential(t,n)).catch(async t=>{throw t.code===`auth/password-does-not-meet-requirements`&&da(e),t})}async function pa(e,t,n){let r=ai(e),i={requestType:`EMAIL_SIGNIN`,email:t,clientType:`CLIENT_TYPE_WEB`};function a(e,t){j(t.handleCodeInApp,r,`argument-error`),t&&ua(r,e,t)}a(i,n),await yi(r,i,`getOobCode`,Mi,`EMAIL_PASSWORD_PROVIDER`)}function ma(e,t){return Ki.parseLink(t)?.operation===`EMAIL_SIGNIN`}async function ha(e,t,n){if(cn(e.app))return Promise.reject(Hn(e));let r=Be(e),i=qi.credentialWithLink(t,n||qn());return j(i._tenantId===(r.tenantId||null),r,`tenant-id-mismatch`),sa(r,i)}function ga(e,t,n,r){return Be(e).onIdTokenChanged(t,n,r)}function _a(e,t,n){return Be(e).beforeAuthStateChanged(t,n)}function va(e){return Be(e).signOut()}function ya(e,t){return ar(e,`POST`,`/v2/accounts/mfaEnrollment:start`,ir(e,t))}function ba(e,t){return ar(e,`POST`,`/v2/accounts/mfaEnrollment:finalize`,ir(e,t))}function xa(e,t){return ar(e,`POST`,`/v2/accounts/mfaEnrollment:start`,ir(e,t))}function Sa(e,t){return ar(e,`POST`,`/v2/accounts/mfaEnrollment:finalize`,ir(e,t))}var Ca=`__sak`,wa=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ca,`1`),this.storage.removeItem(Ca),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}},Ta=1e3,Ea=10,Da=class extends wa{constructor(){super(()=>window.localStorage,`LOCAL`),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Qr(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let t of Object.keys(this.listeners)){let n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});return}let n=e.key;t?this.detachListener():this.stopPolling();let r=()=>{let e=this.storage.getItem(n);!t&&this.localCache[n]===e||this.notifyListeners(n,e)},i=this.storage.getItem(n);Zr()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,Ea):r()}notifyListeners(e,t){this.localCache[e]=t;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent(`storage`,{key:e,oldValue:t,newValue:n}),!0)})},Ta)}stopPolling(){this.pollTimer&&=(clearInterval(this.pollTimer),null)}attachListener(){window.addEventListener(`storage`,this.boundEventHandler)}detachListener(){window.removeEventListener(`storage`,this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){let t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}};Da.type=`LOCAL`;var Oa=Da,ka=1e3;function Aa(e){let t=e.replace(/[\\^$.*+?()[\]{}|]/g,`\\$&`),n=RegExp(`${t}=([^;]+)`);return document.cookie.match(n)?.[1]??null}function ja(e){return`${window.location.protocol===`http:`?`__dev_`:`__HOST-`}FIREBASE_${e.split(`:`)[3]}`}var Ma=class{constructor(){this.type=`COOKIE`,this.listenerUnsubscribes=new Map}_getFinalTarget(e){let t=new URL(`${window.location.origin}/__cookies__`);return t.searchParams.set(`finalTarget`,e),t}async _isAvailable(){return typeof isSecureContext==`boolean`&&!isSecureContext||typeof navigator>`u`||typeof document>`u`?!1:navigator.cookieEnabled??!0}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;let t=ja(e);return window.cookieStore?(await window.cookieStore.get(t))?.value:Aa(t)}async _remove(e){if(!this._isAvailable()||!await this._get(e))return;let t=ja(e);document.cookie=`${t}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch(`/__cookies__`,{method:`DELETE`}).catch(()=>void 0)}_addListener(e,t){if(!this._isAvailable())return;let n=ja(e);if(window.cookieStore){let e=(e=>{let r=e.changed.find(e=>e.name===n);r&&t(r.value),e.deleted.find(e=>e.name===n)&&t(null)});return this.listenerUnsubscribes.set(t,()=>window.cookieStore.removeEventListener(`change`,e)),window.cookieStore.addEventListener(`change`,e)}let r=Aa(n),i=setInterval(()=>{let e=Aa(n);e!==r&&(t(e),r=e)},ka);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){let n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}};Ma.type=`COOKIE`;var Na=class extends wa{constructor(){super(()=>window.sessionStorage,`SESSION`)}_addListener(e,t){}_removeListener(e,t){}};Na.type=`SESSION`;var Pa=Na;function Fa(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}}))}var Ia=class e{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let n=this.receivers.find(e=>e.isListeningto(t));if(n)return n;let r=new e(t);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let t=e,{eventId:n,eventType:r,data:i}=t.data,a=this.handlersMap[r];if(!a?.size)return;t.ports[0].postMessage({status:`ack`,eventId:n,eventType:r});let o=await Fa(Array.from(a).map(async e=>e(t.origin,i)));t.ports[0].postMessage({status:`done`,eventId:n,eventType:r,response:o})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener(`message`,this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener(`message`,this.boundEventHandler)}};Ia.receivers=[];function La(e=``,t=10){let n=``;for(let e=0;e<t;e++)n+=Math.floor(Math.random()*10);return e+n}var Ra=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener(`message`,e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){let r=typeof MessageChannel<`u`?new MessageChannel:null;if(!r)throw Error(`connection_unavailable`);let i,a;return new Promise((o,s)=>{let c=La(``,20);r.port1.start();let l=setTimeout(()=>{s(Error(`unsupported_event`))},n);a={messageChannel:r,onMessage(e){let t=e;if(t.data.eventId===c)switch(t.data.status){case`ack`:clearTimeout(l),i=setTimeout(()=>{s(Error(`timeout`))},3e3);break;case`done`:clearTimeout(i),o(t.data.response);break;default:clearTimeout(l),clearTimeout(i),s(Error(`invalid_response`));break}}},this.handlers.add(a),r.port1.addEventListener(`message`,a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}};function za(){return window}function Ba(e){za().location.href=e}function Va(){return za().WorkerGlobalScope!==void 0&&typeof za().importScripts==`function`}async function Ha(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Ua(){return navigator?.serviceWorker?.controller||null}function Wa(){return Va()?self:null}var Ga=`firebaseLocalStorageDb`,Ka=1,qa=`firebaseLocalStorage`,Ja=`fbase_key`,Ya=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener(`success`,()=>{e(this.request.result)}),this.request.addEventListener(`error`,()=>{t(this.request.error)})})}};function Xa(e,t){return e.transaction([qa],t?`readwrite`:`readonly`).objectStore(qa)}function Za(){return new Ya(indexedDB.deleteDatabase(Ga)).toPromise()}function Qa(){let e=indexedDB.open(Ga,Ka);return new Promise((t,n)=>{e.addEventListener(`error`,()=>{n(e.error)}),e.addEventListener(`upgradeneeded`,()=>{let t=e.result;try{t.createObjectStore(qa,{keyPath:Ja})}catch(e){n(e)}}),e.addEventListener(`success`,async()=>{let n=e.result;n.objectStoreNames.contains(qa)?t(n):(n.close(),await Za(),t(await Qa()))})})}async function $a(e,t,n){return new Ya(Xa(e,!0).put({[Ja]:t,value:n})).toPromise()}async function eo(e,t){let n=await new Ya(Xa(e,!1).get(t)).toPromise();return n===void 0?null:n.value}function to(e,t){return new Ya(Xa(e,!0).delete(t)).toPromise()}var no=800,ro=3,io=class{constructor(){this.type=`LOCAL`,this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||=await Qa(),this.db}async _withRetries(e){let t=0;for(;;)try{return await e(await this._openDb())}catch(e){if(t++>ro)throw e;this.db&&=(this.db.close(),void 0)}}async initializeServiceWorkerMessaging(){return Va()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ia._getInstance(Wa()),this.receiver._subscribe(`keyChanged`,async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe(`ping`,async(e,t)=>[`keyChanged`])}async initializeSender(){if(this.activeServiceWorker=await Ha(),!this.activeServiceWorker)return;this.sender=new Ra(this.activeServiceWorker);let e=await this.sender._send(`ping`,{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes(`keyChanged`)&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Ua()!==this.activeServiceWorker))try{await this.sender._send(`keyChanged`,{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await Qa();return await $a(e,Ca,`1`),await to(e,Ca),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>$a(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){let t=await this._withRetries(t=>eo(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>to(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(e=>new Ya(Xa(e,!1).getAll()).toPromise());if(!e||this.pendingWrites!==0)return[];let t=[],n=new Set;if(e.length!==0)for(let{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(let e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),no)}stopPolling(){this.pollTimer&&=(clearInterval(this.pollTimer),null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}};io.type=`LOCAL`;var ao=io;function oo(e,t){return ar(e,`POST`,`/v2/accounts/mfaSignIn:start`,ir(e,t))}function so(e,t){return ar(e,`POST`,`/v2/accounts/mfaSignIn:finalize`,ir(e,t))}function co(e,t){return ar(e,`POST`,`/v2/accounts/mfaSignIn:finalize`,ir(e,t))}fi(`rcb`),new Qn(3e4,6e4);var lo=`recaptcha`;async function uo(e,t,n){if(!e._getRecaptchaConfig())try{await bi(e)}catch{console.log(`Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.`)}try{let r;if(r=typeof t==`string`?{phoneNumber:t}:t,`session`in r){let t=r.session;if(`phoneNumber`in r)return j(t.type===`enroll`,e,`internal-error`),(await yi(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:`CLIENT_TYPE_WEB`}},`mfaSmsEnrollment`,async(e,t)=>t.phoneEnrollmentInfo.captchaResponse===gi?(j(n?.type===lo,e,`argument-error`),ya(e,await fo(e,t,n))):ya(e,t),`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo;{j(t.type===`signin`,e,`internal-error`);let i=r.multiFactorHint?.uid||r.multiFactorUid;return j(i,e,`missing-multi-factor-info`),(await yi(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:i,phoneSignInInfo:{clientType:`CLIENT_TYPE_WEB`}},`mfaSmsSignIn`,async(e,t)=>t.phoneSignInInfo.captchaResponse===gi?(j(n?.type===lo,e,`argument-error`),oo(e,await fo(e,t,n))):oo(e,t),`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}else return(await yi(e,{phoneNumber:r.phoneNumber,clientType:`CLIENT_TYPE_WEB`},`sendVerificationCode`,async(e,t)=>t.captchaResponse===gi?(j(n?.type===lo,e,`argument-error`),zi(e,await fo(e,t,n))):zi(e,t),`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).sessionInfo}finally{n?._reset()}}async function fo(e,t,n){j(n.type===lo,e,`argument-error`);let r=await n.verify();j(typeof r==`string`,e,`argument-error`);let i={...t};if(`phoneEnrollmentInfo`in i){let e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,a=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:a}}),i}else if(`phoneSignInInfo`in i){let e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}else return Object.assign(i,{recaptchaToken:r}),i}var po=class e{constructor(t){this.providerId=e.PROVIDER_ID,this.auth=ai(t)}verifyPhoneNumber(e,t){return uo(this.auth,e,Be(t))}static credential(e,t){return Ui._fromVerification(e,t)}static credentialFromResult(t){let n=t;return e.credentialFromTaggedObject(n)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{phoneNumber:t,temporaryProof:n}=e;return t&&n?Ui._fromTokenResponse(t,n):null}};po.PROVIDER_ID=`phone`,po.PHONE_SIGN_IN_METHOD=`phone`;function mo(e,t){return t?Ir(t):(j(e._popupRedirectResolver,e,`argument-error`),e._popupRedirectResolver)}var ho=class extends Oi{constructor(e){super(`custom`,`custom`),this.params=e}_getIdTokenResponse(e){return Ii(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ii(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ii(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function go(e){return oa(e.auth,new ho(e),e.bypassAuthState)}function _o(e){let{auth:t,user:n}=e;return j(n,t,`internal-error`),aa(n,new ho(e),e.bypassAuthState)}async function vo(e){let{auth:t,user:n}=e;return j(n,t,`internal-error`),ia(n,new ho(e),e.bypassAuthState)}var yo=class{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}let s={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(s))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case`signInViaPopup`:case`signInViaRedirect`:return go;case`linkViaPopup`:case`linkViaRedirect`:return vo;case`reauthViaPopup`:case`reauthViaRedirect`:return _o;default:zn(this.auth,`internal-error`)}}resolve(e){Kn(this.pendingPromise,`Pending promise was never set`),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Kn(this.pendingPromise,`Pending promise was never set`),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}},bo=new Qn(2e3,1e4);async function N(e,t,n){if(cn(e.app))return Promise.reject(Bn(e,`operation-not-supported-in-this-environment`));let r=ai(e);return Un(e,t,Ji),new xo(r,`signInViaPopup`,t,mo(r,n)).executeNotNull()}var xo=class e extends yo{constructor(t,n,r,i,a){super(t,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,e.currentPopupAction&&e.currentPopupAction.cancel(),e.currentPopupAction=this}async executeNotNull(){let e=await this.execute();return j(e,this.auth,`internal-error`),e}async onExecution(){Kn(this.filter.length===1,`Popup operations only handle one event`);let e=La();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Bn(this.auth,`web-storage-unsupported`))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Bn(this.auth,`cancelled-popup-request`))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,e.currentPopupAction=null}pollUserCancellation(){let e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Bn(this.auth,`popup-closed-by-user`))},8e3);return}this.pollId=window.setTimeout(e,bo.get())};e()}};xo.currentPopupAction=null;var So=`pendingRedirect`,Co=new Map,wo=class extends yo{constructor(e,t,n=!1){super(e,[`signInViaRedirect`,`linkViaRedirect`,`reauthViaRedirect`,`unknown`],t,void 0,n),this.eventId=null}async execute(){let e=Co.get(this.auth._key());if(!e){try{let t=await To(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}Co.set(this.auth._key(),e)}return this.bypassAuthState||Co.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type===`signInViaRedirect`)return super.onAuthEvent(e);if(e.type===`unknown`){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function To(e,t){let n=Oo(t),r=Do(e);if(!await r._isAvailable())return!1;let i=await r._get(n)===`true`;return await r._remove(n),i}function Eo(e,t){Co.set(e._key(),t)}function Do(e){return Ir(e._redirectPersistence)}function Oo(e){return zr(So,e.config.apiKey,e.name)}async function ko(e,t,n=!1){if(cn(e.app))return Promise.reject(Hn(e));let r=ai(e),i=await new wo(r,mo(r,t),n).execute();return i&&!n&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,t)),i}var Ao=600*1e3,jo=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Po(e)?t:(this.hasHandledPotentialRedirect=!0,t||=(this.queuedRedirectEvent=e,!0),t)}sendToConsumer(e,t){if(e.error&&!No(e)){let n=e.error.code?.split(`auth/`)[1]||`internal-error`;t.onError(Bn(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Ao&&this.cachedEventUids.clear(),this.cachedEventUids.has(Mo(e))}saveEventToCache(e){this.cachedEventUids.add(Mo(e)),this.lastProcessedEventTime=Date.now()}};function Mo(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join(`-`)}function No({type:e,error:t}){return e===`unknown`&&t?.code===`auth/no-auth-event`}function Po(e){switch(e.type){case`signInViaRedirect`:case`linkViaRedirect`:case`reauthViaRedirect`:return!0;case`unknown`:return No(e);default:return!1}}async function Fo(e,t={}){return ar(e,`GET`,`/v1/projects`,t)}var Io=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Lo=/^https?/;async function Ro(e){if(e.config.emulator)return;let{authorizedDomains:t}=await Fo(e);for(let e of t)try{if(zo(e))return}catch{}zn(e,`unauthorized-domain`)}function zo(e){let t=qn(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith(`chrome-extension://`)){let i=new URL(e);return i.hostname===``&&r===``?n===`chrome-extension:`&&e.replace(`chrome-extension://`,``)===t.replace(`chrome-extension://`,``):n===`chrome-extension:`&&i.hostname===r}if(!Lo.test(n))return!1;if(Io.test(e))return r===e;let i=e.replace(/\./g,`\\.`);return RegExp(`^(.+\\.`+i+`|`+i+`)$`,`i`).test(r)}var Bo=new Qn(3e4,6e4);function Vo(){let e=za().___jsl;if(e?.H){for(let t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}}function Ho(e){return new Promise((t,n)=>{function r(){Vo(),gapi.load(`gapi.iframes`,{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Vo(),n(Bn(e,`network-request-failed`))},timeout:Bo.get()})}if(za().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(za().gapi?.load)r();else{let t=fi(`iframefcb`);return za()[t]=()=>{gapi.load?r():n(Bn(e,`network-request-failed`))},li(`${di()}?onload=${t}`).catch(e=>n(e))}}).catch(e=>{throw Uo=null,e})}var Uo=null;function Wo(e){return Uo||=Ho(e),Uo}var Go=new Qn(5e3,15e3),Ko=`__/auth/iframe`,qo=`emulator/auth/iframe`,Jo={style:{position:`absolute`,top:`-100px`,width:`1px`,height:`1px`},"aria-hidden":`true`,tabindex:`-1`},Yo=new Map([[`identitytoolkit.googleapis.com`,`p`],[`staging-identitytoolkit.sandbox.googleapis.com`,`s`],[`test-identitytoolkit.sandbox.googleapis.com`,`t`]]);function Xo(e){let t=e.config;j(t.authDomain,e,`auth-domain-config-required`);let n=t.emulator?$n(t,qo):`https://${e.config.authDomain}/${Ko}`,r={apiKey:t.apiKey,appName:e.name,v:dn},i=Yo.get(e.config.apiHost);i&&(r.eid=i);let a=e._getFrameworks();return a.length&&(r.fw=a.join(`,`)),`${n}?${Ne(r).slice(1)}`}async function Zo(e){let t=await Wo(e),n=za().gapi;return j(n,e,`internal-error`),t.open({where:document.body,url:Xo(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Jo,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});let i=Bn(e,`network-request-failed`),a=za().setTimeout(()=>{r(i)},Go.get());function o(){za().clearTimeout(a),n(t)}t.ping(o).then(o,()=>{r(i)})}))}var Qo={location:`yes`,resizable:`yes`,statusbar:`yes`,toolbar:`no`},$o=500,es=600,ts=`_blank`,ns=`http://localhost`,rs=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function is(e,t,n,r=$o,i=es){let a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s=``,c={...Qo,width:r.toString(),height:i.toString(),top:a,left:o},l=he().toLowerCase();n&&(s=Wr(l)?ts:n),Hr(l)&&(t||=ns,c.scrollbars=`yes`);let u=Object.entries(c).reduce((e,[t,n])=>`${e}${t}=${n},`,``);if(Xr(l)&&s!==`_self`)return as(t||``,s),new rs(null);let d=window.open(t||``,s,u);j(d,e,`popup-blocked`);try{d.focus()}catch{}return new rs(d)}function as(e,t){let n=document.createElement(`a`);n.href=e,n.target=t;let r=document.createEvent(`MouseEvent`);r.initMouseEvent(`click`,!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var os=`__/auth/handler`,ss=`emulator/auth/handler`,cs=`fac`;async function ls(e,t,n,r,i,a){j(e.config.authDomain,e,`auth-domain-config-required`),j(e.config.apiKey,e,`invalid-api-key`);let o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:dn,eventId:i};if(t instanceof Ji){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||``,Ae(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(let[e,t]of Object.entries(a||{}))o[e]=t}if(t instanceof Yi){let e=t.getScopes().filter(e=>e!==``);e.length>0&&(o.scopes=e.join(`,`))}e.tenantId&&(o.tid=e.tenantId);let s=o;for(let e of Object.keys(s))s[e]===void 0&&delete s[e];let c=await e._getAppCheckToken(),l=c?`#${cs}=${encodeURIComponent(c)}`:``;return`${us(e)}?${Ne(s).slice(1)}${l}`}function us({config:e}){return e.emulator?$n(e,ss):`https://${e.authDomain}/${os}`}var ds=`webStorageSupport`,fs=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Pa,this._completeRedirectFn=ko,this._overrideRedirectResult=Eo}async _openPopup(e,t,n,r){return Kn(this.eventManagers[e._key()]?.manager,`_initialize() not called before _openPopup()`),is(e,await ls(e,t,n,qn(),r),La())}async _openRedirect(e,t,n,r){return await this._originValidation(e),Ba(await ls(e,t,n,qn(),r)),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Kn(n,`If manager is not set, promise should be`),n)}let n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){let t=await Zo(e),n=new jo(e);return t.register(`authEvent`,t=>(j(t?.authEvent,e,`invalid-auth-event`),{status:n.onEvent(t.authEvent)?`ACK`:`ERROR`}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ds,{type:ds},n=>{let r=n?.[0]?.[ds];r!==void 0&&t(!!r),zn(e,`internal-error`)},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Ro(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Qr()||Ur()||Yr()}},ps=class{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case`enroll`:return this._finalizeEnroll(e,t.credential,n);case`signin`:return this._finalizeSignIn(e,t.credential);default:return Gn(`unexpected MultiFactorSessionType`)}}},ms=class e extends ps{constructor(e){super(`phone`),this.credential=e}static _fromCredential(t){return new e(t)}_finalizeEnroll(e,t,n){return ba(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return so(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},hs=class{constructor(){}static assertion(e){return ms._fromCredential(e)}};hs.FACTOR_ID=`phone`;var gs=class{static assertionForEnrollment(e,t){return _s._fromSecret(e,t)}static assertionForSignIn(e,t){return _s._fromEnrollmentId(e,t)}static async generateSecret(e){let t=e;j(t.user?.auth!==void 0,`internal-error`);let n=await xa(t.user.auth,{idToken:t.credential,totpEnrollmentInfo:{}});return vs._fromStartTotpMfaEnrollmentResponse(n,t.user.auth)}};gs.FACTOR_ID=`totp`;var _s=class e extends ps{constructor(e,t,n){super(`totp`),this.otp=e,this.enrollmentId=t,this.secret=n}static _fromSecret(t,n){return new e(n,void 0,t)}static _fromEnrollmentId(t,n){return new e(n,t)}async _finalizeEnroll(e,t,n){return j(this.secret!==void 0,e,`argument-error`),Sa(e,{idToken:t,displayName:n,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,t){j(this.enrollmentId!==void 0&&this.otp!==void 0,e,`argument-error`);let n={verificationCode:this.otp};return co(e,{mfaPendingCredential:t,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:n})}},vs=class e{constructor(e,t,n,r,i,a,o){this.sessionInfo=a,this.auth=o,this.secretKey=e,this.hashingAlgorithm=t,this.codeLength=n,this.codeIntervalSeconds=r,this.enrollmentCompletionDeadline=i}static _fromStartTotpMfaEnrollmentResponse(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,t){let n=!1;return(ys(e)||ys(t))&&(n=!0),n&&(ys(e)&&(e=this.auth.currentUser?.email||`unknownuser`),ys(t)&&(t=this.auth.name)),`otpauth://totp/${t}:${e}?secret=${this.secretKey}&issuer=${t}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}};function ys(e){return e===void 0||e?.length===0}var bs=`@firebase/auth`,xs=`1.12.0`,Ss=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(t=>{e(t?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){j(this.auth._initializationPromise,`dependent-sdk-initialized-before-auth`)}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Cs(e){switch(e){case`Node`:return`node`;case`ReactNative`:return`rn`;case`Worker`:return`webworker`;case`Cordova`:return`cordova`;case`WebExtension`:return`web-extension`;default:return}}function ws(e){on(new Ve(`auth`,(t,{options:n})=>{let r=t.getProvider(`app`).getImmediate(),i=t.getProvider(`heartbeat`),a=t.getProvider(`app-check-internal`),{apiKey:o,authDomain:s}=r.options;j(o&&!o.includes(`:`),`invalid-api-key`,{appName:r.name});let c=new ii(r,i,a,{apiKey:o,authDomain:s,clientPlatform:e,apiHost:`identitytoolkit.googleapis.com`,tokenApiHost:`securetoken.googleapis.com`,apiScheme:`https`,sdkClientVersion:$r(e)});return Si(c,n),c},`PUBLIC`).setInstantiationMode(`EXPLICIT`).setInstanceCreatedCallback((e,t,n)=>{e.getProvider(`auth-internal`).initialize()})),on(new Ve(`auth-internal`,e=>(e=>new Ss(e))(ai(e.getProvider(`auth`).getImmediate())),`PRIVATE`).setInstantiationMode(`EXPLICIT`)),hn(bs,xs,Cs(e)),hn(bs,xs,`esm2020`)}var Ts=ce(`authIdTokenMaxAge`)||300,Es=null,Ds=e=>async t=>{let n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Ts)return;let i=n?.token;Es!==i&&(Es=i,await fetch(e,{method:i?`POST`:`DELETE`,headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Os(e=pn()){let t=sn(e,`auth`);if(t.isInitialized())return t.getImmediate();let n=xi(e,{popupRedirectResolver:fs,persistence:[ao,Oa,Pa]}),r=ce(`authTokenSyncURL`);if(r&&typeof isSecureContext==`boolean`&&isSecureContext){let e=new URL(r,location.origin);if(location.origin===e.origin){let t=Ds(e.toString());_a(n,t,()=>t(n.currentUser)),ga(n,e=>t(e))}}let i=ae(`auth`);return i&&Ci(n,`http://${i}`),n}function ks(){return document.getElementsByTagName(`head`)?.[0]??document}ci({loadJS(e){return new Promise((t,n)=>{let r=document.createElement(`script`);r.setAttribute(`src`,e),r.onload=t,r.onerror=e=>{let t=Bn(`internal-error`);t.customData=e,n(t)},r.type=`text/javascript`,r.charset=`UTF-8`,ks().appendChild(r)})},gapiScript:`https://apis.google.com/js/api.js`,recaptchaV2Script:`https://www.google.com/recaptcha/api.js`,recaptchaEnterpriseScript:`https://www.google.com/recaptcha/enterprise.js?render=`}),ws(`Browser`),hn(`firebase`,`12.9.0`,`app`);var As=typeof globalThis<`u`?globalThis:typeof window<`u`?window:typeof global<`u`?global:typeof self<`u`?self:{},js={},Ms,Ns;(function(){var e;function t(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=[,,,,],this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(e,t,n){n||=0;let r=Array(16);if(typeof t==`string`)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let a=e.g[3],o;o=t+(a^n&(i^a))+r[0]+3614090360&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[1]+3905402710&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[2]+606105819&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[4]+4118548399&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[5]+1200080426&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[6]+2821735955&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[8]+1770035416&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[9]+2336552879&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[10]+4294925233&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[12]+1804603682&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[13]+4254626195&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[14]+2792965006&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(i^a&(n^i))+r[1]+4129170786&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[6]+3225465664&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[11]+643717713&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[5]+3593408605&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[10]+38016083&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[15]+3634488961&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[9]+568446438&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[14]+3275163606&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[3]+4107603335&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[13]+2850285829&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[2]+4243563512&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[7]+1735328473&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(n^i^a)+r[5]+4294588738&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[8]+2272392833&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[11]+1839030562&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[1]+2763975236&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[4]+1272893353&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[7]+4139469664&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[13]+681279174&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[0]+3936430074&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[3]+3572445317&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[9]+3654602809&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[12]+3873151461&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[15]+530742520&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(i^(n|~a))+r[0]+4096336452&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[7]+1126891415&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[14]+2878612391&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[12]+1700485571&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[3]+2399980690&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[10]+4293915773&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[8]+1873313359&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[15]+4264355552&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[6]+2734768916&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[4]+4149444226&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[11]+3174756917&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[2]+718787259&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}r.prototype.v=function(e,t){t===void 0&&(t=e.length);let n=t-this.blockSize,r=this.C,a=this.h,o=0;for(;o<t;){if(a==0)for(;o<=n;)i(this,e,o),o+=this.blockSize;if(typeof e==`string`){for(;o<t;)if(r[a++]=e.charCodeAt(o++),a==this.blockSize){i(this,r),a=0;break}}else for(;o<t;)if(r[a++]=e[o++],a==this.blockSize){i(this,r),a=0;break}}this.h=a,this.o+=t},r.prototype.A=function(){var e=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=this.o*8;for(var n=e.length-8;n<e.length;++n)e[n]=t&255,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};function a(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}function o(e,t){this.h=t;let n=[],r=!0;for(let i=e.length-1;i>=0;i--){let a=e[i]|0;r&&a==t||(n[i]=a,r=!1)}this.g=n}var s={};function c(e){return-128<=e&&e<128?a(e,function(e){return new o([e|0],e<0?-1:0)}):new o([e|0],e<0?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return d;if(e<0)return g(l(-e));let t=[],n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new o(t,0)}function u(e,t){if(e.length==0)throw Error(`number format error: empty string`);if(t||=10,t<2||36<t)throw Error(`radix out of range: `+t);if(e.charAt(0)==`-`)return g(u(e.substring(1),t));if(e.indexOf(`-`)>=0)throw Error(`number format error: interior "-" character`);let n=l(t**8),r=d;for(let a=0;a<e.length;a+=8){var i=Math.min(8,e.length-a);let o=parseInt(e.substring(a,a+i),t);i<8?(i=l(t**+i),r=r.j(i).add(l(o))):(r=r.j(n),r=r.add(l(o)))}return r}var d=c(0),f=c(1),p=c(16777216);e=o.prototype,e.m=function(){if(h(this))return-g(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){let r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(e||=10,e<2||36<e)throw Error(`radix out of range: `+e);if(m(this))return`0`;if(h(this))return`-`+g(this).toString(e);let t=l(e**6);var n=this;let r=``;for(;;){let i=b(n,t).g;n=_(n,i.j(t));let a=((n.g.length>0?n.g[0]:n.h)>>>0).toString(e);if(n=i,m(n))return a+r;for(;a.length<6;)a=`0`+a;r=a+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h};function m(e){if(e.h!=0)return!1;for(let t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function h(e){return e.h==-1}e.l=function(e){return e=_(this,e),h(e)?-1:m(e)?0:1};function g(e){let t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new o(n,~e.h).add(f)}e.abs=function(){return h(this)?g(this):this},e.add=function(e){let t=Math.max(this.g.length,e.g.length),n=[],r=0;for(let i=0;i<=t;i++){let t=r+(this.i(i)&65535)+(e.i(i)&65535),a=(t>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);r=a>>>16,t&=65535,a&=65535,n[i]=a<<16|t}return new o(n,n[n.length-1]&-2147483648?-1:0)};function _(e,t){return e.add(g(t))}e.j=function(e){if(m(this)||m(e))return d;if(h(this))return h(e)?g(this).j(g(e)):g(g(this).j(e));if(h(e))return g(this.j(g(e)));if(this.l(p)<0&&e.l(p)<0)return l(this.m()*e.m());let t=this.g.length+e.g.length,n=[];for(var r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(let t=0;t<e.g.length;t++){let i=this.i(r)>>>16,a=this.i(r)&65535,o=e.i(t)>>>16,s=e.i(t)&65535;n[2*r+2*t]+=a*s,v(n,2*r+2*t),n[2*r+2*t+1]+=i*s,v(n,2*r+2*t+1),n[2*r+2*t+1]+=a*o,v(n,2*r+2*t+1),n[2*r+2*t+2]+=i*o,v(n,2*r+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new o(n,0)};function v(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function y(e,t){this.g=e,this.h=t}function b(e,t){if(m(t))throw Error(`division by zero`);if(m(e))return new y(d,d);if(h(e))return t=b(g(e),t),new y(g(t.g),g(t.h));if(h(t))return t=b(e,g(t)),new y(g(t.g),t.h);if(e.g.length>30){if(h(e)||h(t))throw Error(`slowDivide_ only works with positive integers.`);for(var n=f,r=t;r.l(e)<=0;)n=x(n),r=x(r);var i=S(n,1),a=S(r,1);for(r=S(r,2),n=S(n,2);!m(r);){var o=a.add(r);o.l(e)<=0&&(i=i.add(n),a=o),r=S(r,1),n=S(n,1)}return t=_(e,i.j(t)),new y(i,t)}for(i=d;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=Math.ceil(Math.log(n)/Math.LN2),r=r<=48?1:2**(r-48),a=l(n),o=a.j(t);h(o)||o.l(e)>0;)n-=r,a=l(n),o=a.j(t);m(a)&&(a=f),i=i.add(a),e=_(e,o)}return new y(i,e)}e.B=function(e){return b(this,e).h},e.and=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new o(n,this.h&e.h)},e.or=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new o(n,this.h|e.h)},e.xor=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new o(n,this.h^e.h)};function x(e){let t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new o(n,e.h)}function S(e,t){let n=t>>5;t%=32;let r=e.g.length-n,i=[];for(let a=0;a<r;a++)i[a]=t>0?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new o(i,e.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Ns=js.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=u,Ms=js.Integer=o}).apply(As===void 0?typeof self<`u`?self:typeof window<`u`?window:{}:As);var Ps=typeof globalThis<`u`?globalThis:typeof window<`u`?window:typeof global<`u`?global:typeof self<`u`?self:{},Fs={},Is,Ls,Rs,zs,Bs,Vs,Hs,Us;(function(){var e,t=Object.defineProperty;function n(e){e=[typeof globalThis==`object`&&globalThis,e,typeof window==`object`&&window,typeof self==`object`&&self,typeof Ps==`object`&&Ps];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error(`Cannot find global object`)}var r=n(this);function i(e,n){if(n)a:{var i=r;e=e.split(`.`);for(var a=0;a<e.length-1;a++){var o=e[a];if(!(o in i))break a;i=i[o]}e=e[e.length-1],a=i[e],n=n(a),n!=a&&n!=null&&t(i,e,{configurable:!0,writable:!0,value:n})}}i(`Symbol.dispose`,function(e){return e||Symbol(`Symbol.dispose`)}),i(`Array.prototype.values`,function(e){return e||function(){return this[Symbol.iterator]()}}),i(`Object.entries`,function(e){return e||function(e){var t=[],n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push([n,e[n]]);return t}});var a=a||{},o=this||self;function s(e){var t=typeof e;return t==`object`&&e!=null||t==`function`}function c(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return l=c,l.apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}var f=typeof AsyncContext<`u`&&typeof AsyncContext.Snapshot==`function`?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function p(e){let t=e.length;if(t>0){let n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function m(e,t){for(let t=1;t<arguments.length;t++){let r=arguments[t];var n=typeof r;if(n=n==`object`?r?Array.isArray(r)?`array`:n:`null`:n,n==`array`||n==`object`&&typeof r.length==`number`){n=e.length||0;let t=r.length||0;e.length=n+t;for(let i=0;i<t;i++)e[n+i]=r[i]}else e.push(r)}}class h{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function g(e){o.setTimeout(()=>{throw e},0)}function _(){var e=C;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class v{constructor(){this.h=this.g=null}add(e,t){let n=y.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}var y=new h(()=>new b,e=>e.reset());class b{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let x,S=!1,C=new v,w=()=>{let e=Promise.resolve(void 0);x=()=>{e.then(ee)}};function ee(){for(var e;e=_();){try{e.h.call(e.g)}catch(e){g(e)}var t=y;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}S=!1}function te(){this.u=this.u,this.C=this.C}te.prototype.u=!1,te.prototype.dispose=function(){this.u||(this.u=!0,this.N())},te.prototype[Symbol.dispose]=function(){this.dispose()},te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ne(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}ne.prototype.h=function(){this.defaultPrevented=!0};var T=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},`passive`,{get:function(){e=!0}});try{let e=()=>{};o.addEventListener(`test`,e,t),o.removeEventListener(`test`,e,t)}catch{}return e}();function re(e){return/^[\s\xa0]*$/.test(e)}function ie(e,t){ne.call(this,e?e.type:``),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key=``,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType=``,this.i=null,e&&this.init(e,t)}d(ie,ne),ie.prototype.init=function(e,t){let n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget,t||(n==`mouseover`?t=e.fromElement:n==`mouseout`&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=r.clientX===void 0?r.pageX:r.clientX,this.clientY=r.clientY===void 0?r.pageY:r.clientY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX===void 0?e.pageX:e.clientX,this.clientY=e.clientY===void 0?e.pageY:e.clientY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||``,this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&ie.Z.h.call(this)},ie.prototype.h=function(){ie.Z.h.call(this);let e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ae=`closure_listenable_`+(Math.random()*1e6|0),oe=0;function se(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++oe,this.da=this.fa=!1}function ce(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function le(e,t,n){for(let r in e)t.call(n,e[r],r,e)}function E(e,t){for(let n in e)t.call(void 0,e[n],n,e)}function D(e){let t={};for(let n in e)t[n]=e[n];return t}let ue=`constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf`.split(` `);function de(e,t){let n,r;for(let t=1;t<arguments.length;t++){for(n in r=arguments[t],r)e[n]=r[n];for(let t=0;t<ue.length;t++)n=ue[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function fe(e){this.src=e,this.g={},this.h=0}fe.prototype.add=function(e,t,n,r,i){let a=e.toString();e=this.g[a],e||(e=this.g[a]=[],this.h++);let o=me(e,t,r,i);return o>-1?(t=e[o],n||(t.fa=!1)):(t=new se(t,this.src,a,!!r,i),t.fa=n,e.push(t)),t};function pe(e,t){let n=t.type;if(n in e.g){var r=e.g[n],i=Array.prototype.indexOf.call(r,t,void 0),a;(a=i>=0)&&Array.prototype.splice.call(r,i,1),a&&(ce(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function me(e,t,n,r){for(let i=0;i<e.length;++i){let a=e[i];if(!a.da&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}var O=`closure_lm_`+(Math.random()*1e6|0),he={};function ge(e,t,n,r,i){if(r&&r.once)return ye(e,t,n,r,i);if(Array.isArray(t)){for(let a=0;a<t.length;a++)ge(e,t[a],n,r,i);return null}return n=Ee(n),e&&e[ae]?e.J(t,n,s(r)?!!r.capture:!!r,i):_e(e,t,n,!1,r,i)}function _e(e,t,n,r,i,a){if(!t)throw Error(`Invalid event type`);let o=s(i)?!!i.capture:!!i,c=we(e);if(c||(e[O]=c=new fe(e)),n=c.add(t,n,r,o,a),n.proxy)return n;if(r=ve(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)T||(i=o),i===void 0&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Se(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error(`addEventListener and attachEvent are unavailable.`);return n}function ve(){function e(n){return t.call(e.src,e.listener,n)}let t=Ce;return e}function ye(e,t,n,r,i){if(Array.isArray(t)){for(let a=0;a<t.length;a++)ye(e,t[a],n,r,i);return null}return n=Ee(n),e&&e[ae]?e.K(t,n,s(r)?!!r.capture:!!r,i):_e(e,t,n,!0,r,i)}function be(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)be(e,t[a],n,r,i);else r=s(r)?!!r.capture:!!r,n=Ee(n),e&&e[ae]?(e=e.i,a=String(t).toString(),a in e.g&&(t=e.g[a],n=me(t,n,r,i),n>-1&&(ce(t[n]),Array.prototype.splice.call(t,n,1),t.length==0&&(delete e.g[a],e.h--)))):(e&&=we(e))&&(t=e.g[t.toString()],e=-1,t&&(e=me(t,n,r,i)),(n=e>-1?t[e]:null)&&xe(n))}function xe(e){if(typeof e!=`number`&&e&&!e.da){var t=e.src;if(t&&t[ae])pe(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Se(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=we(t))?(pe(n,e),n.h==0&&(n.src=null,t[O]=null)):ce(e)}}}function Se(e){return e in he?he[e]:he[e]=`on`+e}function Ce(e,t){if(e.da)e=!0;else{t=new ie(t,this);let n=e.listener,r=e.ha||e.src;e.fa&&xe(e),e=n.call(r,t)}return e}function we(e){return e=e[O],e instanceof fe?e:null}var Te=`__closure_events_fn_`+(Math.random()*1e9>>>0);function Ee(e){return typeof e==`function`?e:(e[Te]||(e[Te]=function(t){return e.handleEvent(t)}),e[Te])}function De(){te.call(this),this.i=new fe(this),this.M=this,this.G=null}d(De,te),De.prototype[ae]=!0,De.prototype.removeEventListener=function(e,t,n,r){be(this,e,t,n,r)};function Oe(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,typeof t==`string`)t=new ne(t,e);else if(t instanceof ne)t.target=t.target||e;else{var i=t;t=new ne(r,e),de(t,i)}i=!0;let a,o;if(n)for(o=n.length-1;o>=0;o--)a=t.g=n[o],i=ke(a,r,!0,t)&&i;if(a=t.g=e,i=ke(a,r,!0,t)&&i,i=ke(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)a=t.g=n[o],i=ke(a,r,!1,t)&&i}De.prototype.N=function(){if(De.Z.N.call(this),this.i){var e=this.i;for(let t in e.g){let n=e.g[t];for(let e=0;e<n.length;e++)ce(n[e]);delete e.g[t],e.h--}}this.G=null},De.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},De.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function ke(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();let i=!0;for(let a=0;a<t.length;++a){let o=t[a];if(o&&!o.da&&o.capture==n){let t=o.listener,n=o.ha||o.src;o.fa&&pe(e.i,o),i=t.call(n,r)!==!1&&i}}return i&&!r.defaultPrevented}function Ae(e,t){if(typeof e!=`function`)if(e&&typeof e.handleEvent==`function`)e=l(e.handleEvent,e);else throw Error(`Invalid listener argument`);return Number(t)>2147483647?-1:o.setTimeout(e,t||0)}function je(e){e.g=Ae(()=>{e.g=null,e.i&&(e.i=!1,je(e))},e.l);let t=e.h;e.h=null,e.m.apply(null,t)}class Me extends te{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:je(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ne(e){te.call(this),this.h=e,this.g={}}d(Ne,te);var Pe=[];function Fe(e){le(e.g,function(e,t){this.g.hasOwnProperty(t)&&xe(e)},e),e.g={}}Ne.prototype.N=function(){Ne.Z.N.call(this),Fe(this)},Ne.prototype.handleEvent=function(){throw Error(`EventHandler.handleEvent not implemented`)};var Ie=o.JSON.stringify,Le=o.JSON.parse,Re=class{stringify(e){return o.JSON.stringify(e,void 0)}parse(e){return o.JSON.parse(e,void 0)}};function ze(){}function Be(){}var Ve={OPEN:`a`,hb:`b`,ERROR:`c`,tb:`d`};function He(){ne.call(this,`d`)}d(He,ne);function Ue(){ne.call(this,`c`)}d(Ue,ne);var We={},Ge=null;function Ke(){return Ge||=new De}We.Ia=`serverreachability`;function qe(e){ne.call(this,We.Ia,e)}d(qe,ne);function k(e){let t=Ke();Oe(t,new qe(t))}We.STAT_EVENT=`statevent`;function Je(e,t){ne.call(this,We.STAT_EVENT,e),this.stat=t}d(Je,ne);function Ye(e){let t=Ke();Oe(t,new Je(t,e))}We.Ja=`timingevent`;function Xe(e,t){ne.call(this,We.Ja,e),this.size=t}d(Xe,ne);function Ze(e,t){if(typeof e!=`function`)throw Error(`Fn must not be null and must be a function`);return o.setTimeout(function(){e()},t)}function Qe(){this.g=!0}Qe.prototype.ua=function(){this.g=!1};function $e(e,t,n,r,i,a){e.info(function(){if(e.g)if(a){var o=``,s=a.split(`&`);for(let e=0;e<s.length;e++){var c=s[e].split(`=`);if(c.length>1){let e=c[0];c=c[1];let t=e.split(`_`);o=t.length>=2&&t[1]==`type`?o+(e+`=`+c+`&`):o+(e+`=redacted&`)}}}else o=null;else o=a;return`XMLHTTP REQ (`+r+`) [attempt `+i+`]: `+t+`
`+n+`
`+o})}function et(e,t,n,r,i,a,o){e.info(function(){return`XMLHTTP RESP (`+r+`) [ attempt `+i+`]: `+t+`
`+n+`
`+a+` `+o})}function tt(e,t,n,r){e.info(function(){return`XMLHTTP TEXT (`+t+`): `+rt(e,n)+(r?` `+r:``)})}function nt(e,t){e.info(function(){return`TIMEOUT: `+t})}Qe.prototype.info=function(){};function rt(e,t){if(!e.g)return t;if(!t)return null;try{let a=JSON.parse(t);if(a){for(e=0;e<a.length;e++)if(Array.isArray(a[e])){var n=a[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if(i!=`noop`&&i!=`stop`&&i!=`close`)for(let e=1;e<r.length;e++)r[e]=``}}}}return Ie(a)}catch{return t}}var it={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},at={ib:`complete`,Fb:`success`,ERROR:`error`,Ga:`abort`,xb:`ready`,yb:`readystatechange`,TIMEOUT:`timeout`,sb:`incrementaldata`,wb:`progress`,lb:`downloadprogress`,Nb:`uploadprogress`},ot;function st(){}d(st,ze),st.prototype.g=function(){return new XMLHttpRequest},ot=new st;function ct(e){return encodeURIComponent(String(e))}function lt(e){var t=1;e=e.split(`:`);let n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(`:`)),n}function ut(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new Ne(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new dt}function dt(){this.i=null,this.g=``,this.h=!1}var ft={},pt={};function mt(e,t,n){e.M=1,e.A=Bt(It(t)),e.u=n,e.R=!0,ht(e,null)}function ht(e,t){e.F=Date.now(),yt(e),e.B=It(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),en(n.i,`t`,r),e.C=0,n=e.j.L,e.h=new dt,e.g=Gn(e.j,n?t:null,!e.u),e.P>0&&(e.O=new Me(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i=`readystatechange`;Array.isArray(i)||(i&&(Pe[0]=i.toString()),i=Pe);for(let e=0;e<i.length;e++){let a=ge(n,i[e],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.J?D(e.J):{},e.u?(e.v||=`POST`,t[`Content-Type`]=`application/x-www-form-urlencoded`,e.g.ea(e.B,e.v,e.u,t)):(e.v=`GET`,e.g.ea(e.B,e.v,null,t)),k(),$e(e.i,e.v,e.B,e.l,e.S,e.u)}ut.prototype.ba=function(e){e=e.target;let t=this.O;t&&Cn(e)==3?t.j():this.Y(e)},ut.prototype.Y=function(e){try{if(e==this.g)a:{let s=Cn(this.g),c=this.g.ya(),l=this.g.ca();if(!(s<3)&&(s!=3||this.g&&(this.h.h||this.g.la()||wn(this.g)))){this.K||s!=4||c==7||k(c==8||l<=0?3:2),xt(this);var t=this.g.ca();this.X=t;var n=gt(this);if(this.o=t==200,et(this.i,this.v,this.B,this.l,this.S,s,t),this.o){if(this.U&&!this.L){b:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader(`X-HTTP-Initial-Response`):null)&&!re(r)){var a=r;break b}}a=null}if(e=a)tt(this.i,this.l,e,`Initial handshake response via X-HTTP-Initial-Response`),this.L=!0,wt(this,e);else{this.o=!1,this.m=3,Ye(12),Ct(this),St(this);break a}}if(this.R){e=!0;let t;for(;!this.K&&this.C<n.length;)if(t=vt(this,n),t==pt){s==4&&(this.m=4,Ye(14),e=!1),tt(this.i,this.l,null,`[Incomplete Response]`);break}else if(t==ft){this.m=4,Ye(15),tt(this.i,this.l,n,`[Invalid Chunk]`),e=!1;break}else tt(this.i,this.l,t,null),wt(this,t);if(_t(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),s!=4||n.length!=0||this.h.h||(this.m=1,Ye(16),e=!1),this.o=this.o&&e,!e)tt(this.i,this.l,n,`[Invalid Chunked Response]`),Ct(this),St(this);else if(n.length>0&&!this.W){this.W=!0;var o=this.j;o.g==this&&o.aa&&!o.P&&(o.j.info(`Great, no buffering proxy detected. Bytes received: `+n.length),Rn(o),o.P=!0,Ye(11))}}else tt(this.i,this.l,n,null),wt(this,n);s==4&&Ct(this),this.o&&!this.K&&(s==4?Vn(this.j,this):(this.o=!1,yt(this)))}else Tn(this.g),t==400&&n.indexOf(`Unknown SID`)>0?(this.m=3,Ye(12)):(this.m=0,Ye(13)),Ct(this),St(this)}}}catch{}};function gt(e){if(!_t(e))return e.g.la();let t=wn(e.g);if(t===``)return``;let n=``,r=t.length,i=Cn(e.g)==4;if(!e.h.i){if(typeof TextDecoder>`u`)return Ct(e),St(e),``;e.h.i=new o.TextDecoder}for(let a=0;a<r;a++)e.h.h=!0,n+=e.h.i.decode(t[a],{stream:!(i&&a==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}function _t(e){return e.g?e.v==`GET`&&e.M!=2&&e.j.Aa:!1}function vt(e,t){var n=e.C,r=t.indexOf(`
`,n);return r==-1?pt:(n=Number(t.substring(n,r)),isNaN(n)?ft:(r+=1,r+n>t.length?pt:(t=t.slice(r,r+n),e.C=r+n,t)))}ut.prototype.cancel=function(){this.K=!0,Ct(this)};function yt(e){e.T=Date.now()+e.H,bt(e,e.H)}function bt(e,t){if(e.D!=null)throw Error(`WatchDog timer not null`);e.D=Ze(l(e.aa,e),t)}function xt(e){e.D&&=(o.clearTimeout(e.D),null)}ut.prototype.aa=function(){this.D=null;let e=Date.now();e-this.T>=0?(nt(this.i,this.B),this.M!=2&&(k(),Ye(17)),Ct(this),this.m=2,St(this)):bt(this,this.T-e)};function St(e){e.j.I==0||e.K||Vn(e.j,e)}function Ct(e){xt(e);var t=e.O;t&&typeof t.dispose==`function`&&t.dispose(),e.O=null,Fe(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function wt(e,t){try{var n=e.j;if(n.I!=0&&(n.g==e||kt(n.h,e))){if(!e.L&&kt(n.h,e)&&n.I==3){try{var r=n.Ba.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){a:if(!n.v){if(n.g)if(n.g.F+3e3<e.F)Bn(n),kn(n);else break a;Ln(n),Ye(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&n.A==0&&!n.C&&(n.C=Ze(l(n.Va,n),6e3));Ot(n.h)<=1&&n.ta&&(n.ta=void 0)}else Un(n,11)}else if((e.L||n.g==e)&&Bn(n),!re(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t],u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],n.I==2)if(l[0]==`c`){n.M=l[1],n.ba=l[2];let t=l[3];t!=null&&(n.ka=t,n.j.info(`VER=`+n.ka));let i=l[4];i!=null&&(n.za=i,n.j.info(`SVER=`+n.za));let u=l[5];u!=null&&typeof u==`number`&&u>0&&(r=1.5*u,n.O=r,n.j.info(`backChannelRequestTimeoutMs_=`+r)),r=n;let d=e.g;if(d){let e=d.g?d.g.getResponseHeader(`X-Client-Wire-Protocol`):null;if(e){var a=r.h;a.g||e.indexOf(`spdy`)==-1&&e.indexOf(`quic`)==-1&&e.indexOf(`h2`)==-1||(a.j=a.l,a.g=new Set,a.h&&=(At(a,a.h),null))}if(r.G){let e=d.g?d.g.getResponseHeader(`X-HTTP-Session-Id`):null;e&&(r.wa=e,A(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info(`Handshake RTT: `+n.T+`ms`)),r=n;var o=e;if(r.na=j(r,r.L?r.ba:null,r.W),o.L){jt(r.h,o);var s=o,c=r.O;c&&(s.H=c),s.D&&(xt(s),yt(s)),r.g=o}else In(r);n.i.length>0&&jn(n)}else l[0]!=`stop`&&l[0]!=`close`||Un(n,7);else n.I==3&&(l[0]==`stop`||l[0]==`close`?l[0]==`stop`?Un(n,7):On(n):l[0]!=`noop`&&n.l&&n.l.qa(l),n.A=0)}}k(4)}catch{}}var Tt=class{constructor(e,t){this.g=e,this.map=t}};function Et(e){this.l=e||10,o.PerformanceNavigationTiming?(e=o.performance.getEntriesByType(`navigation`),e=e.length>0&&(e[0].nextHopProtocol==`hq`||e[0].nextHopProtocol==`h2`)):e=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Dt(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function Ot(e){return e.h?1:e.g?e.g.size:0}function kt(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function At(e,t){e.g?e.g.add(t):e.h=t}function jt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}Et.prototype.cancel=function(){if(this.i=Mt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let e of this.g.values())e.cancel();this.g.clear()}};function Mt(e){if(e.h!=null)return e.i.concat(e.h.G);if(e.g!=null&&e.g.size!==0){let t=e.i;for(let n of e.g.values())t=t.concat(n.G);return t}return p(e.i)}var Nt=RegExp(`^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$`);function Pt(e,t){if(e){e=e.split(`&`);for(let n=0;n<e.length;n++){let r=e[n].indexOf(`=`),i,a=null;r>=0?(i=e[n].substring(0,r),a=e[n].substring(r+1)):i=e[n],t(i,a?decodeURIComponent(a.replace(/\+/g,` `)):``)}}}function Ft(e){this.g=this.o=this.j=``,this.u=null,this.m=this.h=``,this.l=!1;let t;e instanceof Ft?(this.l=e.l,Lt(this,e.j),this.o=e.o,this.g=e.g,Rt(this,e.u),this.h=e.h,zt(this,tn(e.i)),this.m=e.m):e&&(t=String(e).match(Nt))?(this.l=!1,Lt(this,t[1]||``,!0),this.o=Vt(t[2]||``),this.g=Vt(t[3]||``,!0),Rt(this,t[4]),this.h=Vt(t[5]||``,!0),zt(this,t[6]||``,!0),this.m=Vt(t[7]||``)):(this.l=!1,this.i=new Yt(null,this.l))}Ft.prototype.toString=function(){let e=[];var t=this.j;t&&e.push(Ht(t,Wt,!0),`:`);var n=this.g;return(n||t==`file`)&&(e.push(`//`),(t=this.o)&&e.push(Ht(t,Wt,!0),`@`),e.push(ct(n).replace(/%25([0-9a-fA-F]{2})/g,`%$1`)),n=this.u,n!=null&&e.push(`:`,String(n))),(n=this.h)&&(this.g&&n.charAt(0)!=`/`&&e.push(`/`),e.push(Ht(n,n.charAt(0)==`/`?Kt:Gt,!0))),(n=this.i.toString())&&e.push(`?`,n),(n=this.m)&&e.push(`#`,Ht(n,Jt)),e.join(``)},Ft.prototype.resolve=function(e){let t=It(this),n=!!e.j;n?Lt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=e.u!=null;var r=e.h;if(n)Rt(t,e.u);else if(n=!!e.h){if(r.charAt(0)!=`/`)if(this.g&&!this.h)r=`/`+r;else{var i=t.h.lastIndexOf(`/`);i!=-1&&(r=t.h.slice(0,i+1)+r)}if(i=r,i==`..`||i==`.`)r=``;else if(i.indexOf(`./`)!=-1||i.indexOf(`/.`)!=-1){r=i.lastIndexOf(`/`,0)==0,i=i.split(`/`);let e=[];for(let t=0;t<i.length;){let n=i[t++];n==`.`?r&&t==i.length&&e.push(``):n==`..`?((e.length>1||e.length==1&&e[0]!=``)&&e.pop(),r&&t==i.length&&e.push(``)):(e.push(n),r=!0)}r=e.join(`/`)}else r=i}return n?t.h=r:n=e.i.toString()!==``,n?zt(t,tn(e.i)):n=!!e.m,n&&(t.m=e.m),t};function It(e){return new Ft(e)}function Lt(e,t,n){e.j=n?Vt(t,!0):t,e.j&&=e.j.replace(/:$/,``)}function Rt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error(`Bad port number `+t);e.u=t}else e.u=null}function zt(e,t,n){t instanceof Yt?(e.i=t,rn(e.i,e.l)):(n||(t=Ht(t,qt)),e.i=new Yt(t,e.l))}function A(e,t,n){e.i.set(t,n)}function Bt(e){return A(e,`zx`,Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),e}function Vt(e,t){return e?t?decodeURI(e.replace(/%25/g,`%2525`)):decodeURIComponent(e):``}function Ht(e,t,n){return typeof e==`string`?(e=encodeURI(e).replace(t,Ut),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,`%$1`)),e):null}function Ut(e){return e=e.charCodeAt(0),`%`+(e>>4&15).toString(16)+(e&15).toString(16)}var Wt=/[#\/\?@]/g,Gt=/[#\?:]/g,Kt=/[#\?]/g,qt=/[#\?@]/g,Jt=/#/g;function Yt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Xt(e){e.g||(e.g=new Map,e.h=0,e.i&&Pt(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g,` `)),n)}))}e=Yt.prototype,e.add=function(e,t){Xt(this),this.i=null,e=nn(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function Zt(e,t){Xt(e),t=nn(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Qt(e,t){return Xt(e),t=nn(e,t),e.g.has(t)}e.forEach=function(e,t){Xt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)};function $t(e,t){Xt(e);let n=[];if(typeof t==`string`)Qt(e,t)&&(n=n.concat(e.g.get(nn(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}e.set=function(e,t){return Xt(this),this.i=null,e=nn(this,e),Qt(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e?(e=$t(this,e),e.length>0?String(e[0]):t):t};function en(e,t,n){Zt(e,t),n.length>0&&(e.i=null,e.g.set(nn(e,t),p(n)),e.h+=n.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return``;let e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];let i=ct(n);n=$t(this,n);for(let t=0;t<n.length;t++){let r=i;n[t]!==``&&(r+=`=`+ct(n[t])),e.push(r)}}return this.i=e.join(`&`)};function tn(e){let t=new Yt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function nn(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function rn(e,t){t&&!e.j&&(Xt(e),e.i=null,e.g.forEach(function(e,t){let n=t.toLowerCase();t!=n&&(Zt(this,t),en(this,n,e))},e)),e.j=t}function an(e,t){let n=new Qe;if(o.Image){let r=new Image;r.onload=u(sn,n,`TestLoadImage: loaded`,!0,t,r),r.onerror=u(sn,n,`TestLoadImage: error`,!1,t,r),r.onabort=u(sn,n,`TestLoadImage: abort`,!1,t,r),r.ontimeout=u(sn,n,`TestLoadImage: timeout`,!1,t,r),o.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function on(e,t){let n=new Qe,r=new AbortController,i=setTimeout(()=>{r.abort(),sn(n,`TestPingServer: timeout`,!1,t)},1e4);fetch(e,{signal:r.signal}).then(e=>{clearTimeout(i),e.ok?sn(n,`TestPingServer: ok`,!0,t):sn(n,`TestPingServer: server error`,!1,t)}).catch(()=>{clearTimeout(i),sn(n,`TestPingServer: error`,!1,t)})}function sn(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch{}}function cn(){this.g=new Re}function ln(e){this.i=e.Sb||null,this.h=e.ab||!1}d(ln,ze),ln.prototype.g=function(){return new un(this.i,this.h)};function un(e,t){De.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText=``,this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F=`GET`,this.D=``,this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(un,De),e=un.prototype,e.open=function(e,t){if(this.readyState!=0)throw this.abort(),Error(`Error reopening a connection`);this.F=e,this.D=t,this.readyState=1,pn(this)},e.send=function(e){if(this.readyState!=1)throw this.abort(),Error(`need to call open() first. `);if(this.v.signal.aborted)throw this.abort(),Error(`Request was aborted.`);this.g=!0;let t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||o).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText=``,this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel(`Request was aborted.`).catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,fn(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,pn(this)),this.g&&(this.readyState=3,pn(this),this.g)))if(this.responseType===`arraybuffer`)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(o.ReadableStream!==void 0&&`body`in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error(`responseType must be empty for "streamBinaryChunks" mode responses.`);this.response=[]}else this.response=this.responseText=``,this.B=new TextDecoder;dn(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))};function dn(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array;(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?fn(this):pn(this),this.readyState==3&&dn(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,fn(this))},e.Na=function(e){this.g&&(this.response=e,fn(this))},e.ga=function(){this.g&&fn(this)};function fn(e){e.readyState=4,e.l=null,e.j=null,e.B=null,pn(e)}e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||``},e.getAllResponseHeaders=function(){if(!this.h)return``;let e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+`: `+n[1]),n=t.next();return e.join(`\r
`)};function pn(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(un.prototype,`withCredentials`,{get:function(){return this.m===`include`},set:function(e){this.m=e?`include`:`same-origin`}});function mn(e){let t=``;return le(e,function(e,n){t+=n,t+=`:`,t+=e,t+=`\r
`}),t}function hn(e,t,n){a:{for(r in n){var r=!1;break a}r=!0}r||(n=mn(n),typeof e==`string`||A(e,t,n))}function gn(e){De.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D=``,this.o=0,this.l=``,this.j=this.B=this.v=this.A=!1,this.m=null,this.F=``,this.H=!1}d(gn,De);var _n=/^https?$/i,vn=[`POST`,`PUT`];e=gn.prototype,e.Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error(`[goog.net.XhrIo] Object is active with another request=`+this.D+`; newUri=`+e);t=t?t.toUpperCase():`GET`,this.D=e,this.l=``,this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ot.g(),this.g.onreadystatechange=f(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(e){yn(this,e);return}if(e=n||``,n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys==`function`&&typeof r.get==`function`)for(let e of r.keys())n.set(e,r.get(e));else throw Error(`Unknown input type for opt_headers: `+String(r));r=Array.from(n.keys()).find(e=>e.toLowerCase()==`content-type`),i=o.FormData&&e instanceof o.FormData,!(Array.prototype.indexOf.call(vn,t,void 0)>=0)||r||i||n.set(`Content-Type`,`application/x-www-form-urlencoded;charset=utf-8`);for(let[e,t]of n)this.g.setRequestHeader(e,t);this.F&&(this.g.responseType=this.F),`withCredentials`in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&=(clearTimeout(this.m),null),this.v=!0,this.g.send(e),this.v=!1}catch(e){yn(this,e)}};function yn(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,bn(e),Sn(e)}function bn(e){e.A||(e.A=!0,Oe(e,`complete`),Oe(e,`error`))}e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,Oe(this,`complete`),Oe(this,`abort`),Sn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Sn(this,!0)),gn.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?xn(this):this.Xa())},e.Xa=function(){xn(this)};function xn(e){if(e.h&&a!==void 0){if(e.v&&Cn(e)==4)setTimeout(e.Ca.bind(e),0);else if(Oe(e,`readystatechange`),Cn(e)==4){e.h=!1;try{let a=e.ca();a:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break a;default:t=!1}var n;if(!(n=t)){var r;if(r=a===0){let t=String(e.D).match(Nt)[1]||null;!t&&o.self&&o.self.location&&(t=o.self.location.protocol.slice(0,-1)),r=!_n.test(t?t.toLowerCase():``)}n=r}if(n)Oe(e,`complete`),Oe(e,`success`);else{e.o=6;try{var i=Cn(e)>2?e.g.statusText:``}catch{i=``}e.l=i+` [`+e.ca()+`]`,bn(e)}}finally{Sn(e)}}}}function Sn(e,t){if(e.g){e.m&&=(clearTimeout(e.m),null);let n=e.g;e.g=null,t||Oe(e,`ready`);try{n.onreadystatechange=null}catch{}}}e.isActive=function(){return!!this.g};function Cn(e){return e.g?e.g.readyState:0}e.ca=function(){try{return Cn(this)>2?this.g.status:-1}catch{return-1}},e.la=function(){try{return this.g?this.g.responseText:``}catch{return``}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),Le(t)}};function wn(e){try{if(!e.g)return null;if(`response`in e.g)return e.g.response;switch(e.F){case``:case`text`:return e.g.responseText;case`arraybuffer`:if(`mozResponseArrayBuffer`in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function Tn(e){let t={};e=(e.g&&Cn(e)>=2&&e.g.getAllResponseHeaders()||``).split(`\r
`);for(let r=0;r<e.length;r++){if(re(e[r]))continue;var n=lt(e[r]);let i=n[0];if(n=n[1],typeof n!=`string`)continue;n=n.trim();let a=t[i]||[];t[i]=a,a.push(n)}E(t,function(e){return e.join(`, `)})}e.ya=function(){return this.o},e.Ha=function(){return typeof this.l==`string`?this.l:String(this.l)};function En(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Dn(e){this.za=0,this.i=[],this.j=new Qe,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=En(`failFast`,!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=En(`baseRetryDelayMs`,5e3,e),this.Za=En(`retryDelaySeedMs`,1e4,e),this.Ta=En(`forwardChannelMaxRetries`,2,e),this.va=En(`forwardChannelRequestTimeoutMs`,2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M=``,this.h=new Et(e&&e.concurrentRequestLimit),this.Ba=new cn,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}e=Dn.prototype,e.ka=8,e.I=1,e.connect=function(e,t,n,r){Ye(0),this.W=e,this.H=t||{},n&&r!==void 0&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=j(this,null,this.W),jn(this)};function On(e){if(An(e),e.I==3){var t=e.V++,n=It(e.J);if(A(n,`SID`,e.M),A(n,`RID`,t),A(n,`TYPE`,`terminate`),Pn(e,n),t=new ut(e,e.j,t),t.M=2,t.A=Bt(It(n)),n=!1,o.navigator&&o.navigator.sendBeacon)try{n=o.navigator.sendBeacon(t.A.toString(),``)}catch{}!n&&o.Image&&(new Image().src=t.A,n=!0),n||(t.g=Gn(t.j,null),t.g.ea(t.A)),t.F=Date.now(),yt(t)}Wn(e)}function kn(e){e.g&&=(Rn(e),e.g.cancel(),null)}function An(e){kn(e),e.v&&=(o.clearTimeout(e.v),null),Bn(e),e.h.cancel(),e.m&&=(typeof e.m==`number`&&o.clearTimeout(e.m),null)}function jn(e){if(!Dt(e.h)&&!e.m){e.m=!0;var t=e.Ea;x||w(),S||=(x(),!0),C.add(t,e),e.D=0}}function Mn(e,t){return Ot(e.h)>=e.h.j-(e.m?1:0)?!1:e.m?(e.i=t.G.concat(e.i),!0):e.I==1||e.I==2||e.D>=(e.Sa?0:e.Ta)?!1:(e.m=Ze(l(e.Ea,e,t),Hn(e,e.D)),e.D++,!0)}e.Ea=function(e){if(this.m)if(this.m=null,this.I==1){if(!e){this.V=Math.floor(Math.random()*1e5),e=this.V++;let i=new ut(this,this.j,e),a=this.o;if(this.U&&(a?(a=D(a),de(a,this.U)):a=this.U),this.u!==null||this.R||(i.J=a,a=null),this.S)a:{for(var t=0,n=0;n<this.i.length;n++){b:{var r=this.i[n];if(`__data__`in r.map&&(r=r.map.__data__,typeof r==`string`)){r=r.length;break b}r=void 0}if(r===void 0)break;if(t+=r,t>4096){t=n;break a}if(t===4096||n===this.i.length-1){t=n+1;break a}}t=1e3}else t=1e3;t=Fn(this,i,t),n=It(this.J),A(n,`RID`,e),A(n,`CVER`,22),this.G&&A(n,`X-HTTP-Session-Id`,this.G),Pn(this,n),a&&(this.R?t=`headers=`+ct(mn(a))+`&`+t:this.u&&hn(n,this.u,a)),At(this.h,i),this.Ra&&A(n,`TYPE`,`init`),this.S?(A(n,`$req`,t),A(n,`SID`,`null`),i.U=!0,mt(i,n,null)):mt(i,n,t),this.I=2}}else this.I==3&&(e?Nn(this,e):this.i.length==0||Dt(this.h)||Nn(this))};function Nn(e,t){var n=t?t.l:e.V++;let r=It(e.J);A(r,`SID`,e.M),A(r,`RID`,n),A(r,`AID`,e.K),Pn(e,r),e.u&&e.o&&hn(r,e.u,e.o),n=new ut(e,e.j,n,e.D+1),e.u===null&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=Fn(e,n,1e3),n.H=Math.round(e.va*.5)+Math.round(e.va*.5*Math.random()),At(e.h,n),mt(n,r,t)}function Pn(e,t){e.H&&le(e.H,function(e,n){A(t,n,e)}),e.l&&le({},function(e,n){A(t,n,e)})}function Fn(e,t,n){n=Math.min(e.i.length,n);let r=e.l?l(e.l.Ka,e.l,e):null;a:{var i=e.i;let t=-1;for(;;){let e=[`count=`+n];t==-1?n>0?(t=i[0].g,e.push(`ofs=`+t)):t=0:e.push(`ofs=`+t);let c=!0;for(let l=0;l<n;l++){var a=i[l].g;let n=i[l].map;if(a-=t,a<0)t=Math.max(0,i[l].g-100),c=!1;else try{a=`req`+a+`_`||``;try{var o=n instanceof Map?n:Object.entries(n);for(let[t,n]of o){let r=n;s(n)&&(r=Ie(n)),e.push(a+t+`=`+encodeURIComponent(r))}}catch(t){throw e.push(a+`type=_badmap`),t}}catch{r&&r(n)}}if(c){o=e.join(`&`);break a}}o=void 0}return e=e.i.splice(0,n),t.G=e,o}function In(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;x||w(),S||=(x(),!0),C.add(t,e),e.A=0}}function Ln(e){return e.g||e.v||e.A>=3?!1:(e.Y++,e.v=Ze(l(e.Da,e),Hn(e,e.A)),e.A++,!0)}e.Da=function(){if(this.v=null,zn(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var e=4*this.T;this.j.info(`BP detection timer enabled: `+e),this.B=Ze(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info(`BP detection timeout reached.`),this.j.info(`Buffering proxy detected and switch to long-polling!`),this.F=!1,this.P=!0,Ye(10),kn(this),zn(this))};function Rn(e){e.B!=null&&(o.clearTimeout(e.B),e.B=null)}function zn(e){e.g=new ut(e,e.j,`rpc`,e.Y),e.u===null&&(e.g.J=e.o),e.g.P=0;var t=It(e.na);A(t,`RID`,`rpc`),A(t,`SID`,e.M),A(t,`AID`,e.K),A(t,`CI`,e.F?`0`:`1`),!e.F&&e.ia&&A(t,`TO`,e.ia),A(t,`TYPE`,`xmlhttp`),Pn(e,t),e.u&&e.o&&hn(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=Bt(It(t)),n.u=null,n.R=!0,ht(n,e)}e.Va=function(){this.C!=null&&(this.C=null,kn(this),Ln(this),Ye(19))};function Bn(e){e.C!=null&&(o.clearTimeout(e.C),e.C=null)}function Vn(e,t){var n=null;if(e.g==t){Bn(e),Rn(e),e.g=null;var r=2}else if(kt(e.h,t))n=t.G,jt(e.h,t),r=1;else return;if(e.I!=0){if(t.o)if(r==1){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;r=Ke(),Oe(r,new Xe(r,n)),jn(e)}else In(e);else if(i=t.m,i==3||i==0&&t.X>0||!(r==1&&Mn(e,t)||r==2&&Ln(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:Un(e,5);break;case 4:Un(e,10);break;case 3:Un(e,6);break;default:Un(e,2)}}}function Hn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function Un(e,t){if(e.j.info(`Error code `+t),t==2){var n=l(e.bb,e),r=e.Ua;let t=!r;r=new Ft(r||`//www.google.com/images/cleardot.gif`),o.location&&o.location.protocol==`http`||Lt(r,`https`),Bt(r),t?an(r.toString(),n):on(r.toString(),n)}else Ye(2);e.I=0,e.l&&e.l.pa(t),Wn(e),An(e)}e.bb=function(e){e?(this.j.info(`Successfully pinged google.com`),Ye(2)):(this.j.info(`Failed to ping google.com`),Ye(1))};function Wn(e){if(e.I=0,e.ja=[],e.l){let t=Mt(e.h);(t.length!=0||e.i.length!=0)&&(m(e.ja,t),m(e.ja,e.i),e.h.i.length=0,p(e.i),e.i.length=0),e.l.oa()}}function j(e,t,n){var r=n instanceof Ft?It(n):new Ft(n);if(r.g!=``)t&&(r.g=t+`.`+r.g),Rt(r,r.u);else{var i=o.location;r=i.protocol,t=t?t+`.`+i.hostname:i.hostname,i=+i.port;let e=new Ft(null);r&&Lt(e,r),t&&(e.g=t),i&&Rt(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&A(r,n,t),A(r,`VER`,e.ka),Pn(e,r),r}function Gn(e,t,n){if(t&&!e.L)throw Error(`Can't create secondary domain capable XhrIo object.`);return t=e.Aa&&!e.ma?new gn(new ln({ab:n})):new gn(e.ma),t.Fa(e.L),t}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Kn(){}e=Kn.prototype,e.ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){};function qn(){}qn.prototype.g=function(e,t){return new Jn(e,t)};function Jn(e,t){De.call(this),this.g=new Dn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e[`X-Client-Protocol`]=`webchannel`:e={"X-Client-Protocol":`webchannel`}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e[`X-WebChannel-Content-Type`]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e[`X-WebChannel-Client-Profile`]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!re(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t&&=t.httpSessionIdParam)&&!re(t)&&(this.g.G=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new Zn(this)}d(Jn,De),Jn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Jn.prototype.close=function(){On(this.g)},Jn.prototype.o=function(e){var t=this.g;if(typeof e==`string`){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=Ie(e),e=n);t.i.push(new Tt(t.Ya++,e)),t.I==3&&jn(t)},Jn.prototype.N=function(){this.g.l=null,delete this.j,On(this.g),delete this.g,Jn.Z.N.call(this)};function Yn(e){He.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){a:{for(let n in t){e=n;break a}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}d(Yn,He);function Xn(){Ue.call(this),this.status=1}d(Xn,Ue);function Zn(e){this.g=e}d(Zn,Kn),Zn.prototype.ra=function(){Oe(this.g,`a`)},Zn.prototype.qa=function(e){Oe(this.g,new Yn(e))},Zn.prototype.pa=function(e){Oe(this.g,new Xn)},Zn.prototype.oa=function(){Oe(this.g,`b`)},qn.prototype.createWebChannel=qn.prototype.g,Jn.prototype.send=Jn.prototype.o,Jn.prototype.open=Jn.prototype.m,Jn.prototype.close=Jn.prototype.close,Us=Fs.createWebChannelTransport=function(){return new qn},Hs=Fs.getStatEventTarget=function(){return Ke()},Vs=Fs.Event=We,Bs=Fs.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},it.NO_ERROR=0,it.TIMEOUT=8,it.HTTP_ERROR=6,zs=Fs.ErrorCode=it,at.COMPLETE=`complete`,Rs=Fs.EventType=at,Be.EventType=Ve,Ve.OPEN=`a`,Ve.CLOSE=`b`,Ve.ERROR=`c`,Ve.MESSAGE=`d`,De.prototype.listen=De.prototype.J,Ls=Fs.WebChannel=Be,Fs.FetchXmlHttpFactory=ln,gn.prototype.listenOnce=gn.prototype.K,gn.prototype.getLastError=gn.prototype.Ha,gn.prototype.getLastErrorCode=gn.prototype.ya,gn.prototype.getStatus=gn.prototype.ca,gn.prototype.getResponseJson=gn.prototype.La,gn.prototype.getResponseText=gn.prototype.la,gn.prototype.send=gn.prototype.ea,gn.prototype.setWithCredentials=gn.prototype.Fa,Is=Fs.XhrIo=gn}).apply(Ps===void 0?typeof self<`u`?self:typeof window<`u`?window:{}:Ps);var Ws=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?`uid:`+this.uid:`anonymous-user`}isEqual(e){return e.uid===this.uid}};Ws.UNAUTHENTICATED=new Ws(null),Ws.GOOGLE_CREDENTIALS=new Ws(`google-credentials-uid`),Ws.FIRST_PARTY=new Ws(`first-party-uid`),Ws.MOCK_USER=new Ws(`mock-user`);var Gs=`12.9.0`;function Ks(e){Gs=e}var qs=new Qe(`@firebase/firestore`);function Js(){return qs.logLevel}function P(e,...t){if(qs.logLevel<=k.DEBUG){let n=t.map(Zs);qs.debug(`Firestore (${Gs}): ${e}`,...n)}}function Ys(e,...t){if(qs.logLevel<=k.ERROR){let n=t.map(Zs);qs.error(`Firestore (${Gs}): ${e}`,...n)}}function Xs(e,...t){if(qs.logLevel<=k.WARN){let n=t.map(Zs);qs.warn(`Firestore (${Gs}): ${e}`,...n)}}function Zs(e){if(typeof e==`string`)return e;try{return function(e){return JSON.stringify(e)}(e)}catch{return e}}function F(e,t,n){let r=`Unexpected state`;typeof t==`string`?r=t:n=t,Qs(e,r,n)}function Qs(e,t,n){let r=`FIRESTORE (${Gs}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=` CONTEXT: `+JSON.stringify(n)}catch{r+=` CONTEXT: `+n}throw Ys(r),Error(r)}function $s(e,t,n,r){let i=`Unexpected state`;typeof n==`string`?i=n:r=n,e||Qs(t,i,r)}function I(e,t){return e}var L={OK:`ok`,CANCELLED:`cancelled`,UNKNOWN:`unknown`,INVALID_ARGUMENT:`invalid-argument`,DEADLINE_EXCEEDED:`deadline-exceeded`,NOT_FOUND:`not-found`,ALREADY_EXISTS:`already-exists`,PERMISSION_DENIED:`permission-denied`,UNAUTHENTICATED:`unauthenticated`,RESOURCE_EXHAUSTED:`resource-exhausted`,FAILED_PRECONDITION:`failed-precondition`,ABORTED:`aborted`,OUT_OF_RANGE:`out-of-range`,UNIMPLEMENTED:`unimplemented`,INTERNAL:`internal`,UNAVAILABLE:`unavailable`,DATA_LOSS:`data-loss`},R=class extends Ee{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}},ec=class{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}},tc=class{constructor(e,t){this.user=t,this.type=`OAuth`,this.headers=new Map,this.headers.set(`Authorization`,`Bearer ${e}`)}},nc=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ws.UNAUTHENTICATED)))}shutdown(){}},rc=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}},ic=class{constructor(e){this.t=e,this.currentUser=Ws.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){$s(this.o===void 0,42304);let n=this.i,r=e=>this.i===n?Promise.resolve():(n=this.i,t(e)),i=new ec;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ec,e.enqueueRetryable((()=>r(this.currentUser)))};let a=()=>{let t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{P(`FirebaseAuthCredentialsProvider`,`Auth detected`),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){let e=this.t.getImmediate({optional:!0});e?o(e):(P(`FirebaseAuthCredentialsProvider`,`Auth not yet detected`),i.resolve(),i=new ec)}}),0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i===e?t?($s(typeof t.accessToken==`string`,31837,{l:t}),new tc(t.accessToken,this.currentUser)):null:(P(`FirebaseAuthCredentialsProvider`,`getToken aborted due to token change.`),this.getToken()))):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return $s(e===null||typeof e==`string`,2055,{h:e}),new Ws(e)}},ac=class{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type=`FirstParty`,this.user=Ws.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set(`X-Goog-AuthUser`,this.P);let e=this.A();return e&&this.R.set(`Authorization`,e),this.T&&this.R.set(`X-Goog-Iam-Authorization-Token`,this.T),this.R}},oc=class{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new ac(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Ws.FIRST_PARTY)))}shutdown(){}invalidateToken(){}},sc=class{constructor(e){this.value=e,this.type=`AppCheck`,this.headers=new Map,e&&e.length>0&&this.headers.set(`x-firebase-appcheck`,this.value)}},cc=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,cn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){$s(this.o===void 0,3512);let n=e=>{e.error!=null&&P(`FirebaseAppCheckTokenProvider`,`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);let n=e.token!==this.m;return this.m=e.token,P(`FirebaseAppCheckTokenProvider`,`Received ${n?`new`:`existing`} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};let r=e=>{P(`FirebaseAppCheckTokenProvider`,`AppCheck detected`),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){let e=this.V.getImmediate({optional:!0});e?r(e):P(`FirebaseAppCheckTokenProvider`,`AppCheck not yet detected`)}}),0)}getToken(){if(this.p)return Promise.resolve(new sc(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?($s(typeof e.token==`string`,44558,{tokenResult:e}),this.m=e.token,new sc(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function lc(e){let t=typeof self<`u`&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues==`function`)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}var uc=class{static newId(){let e=``;for(;e.length<20;){let t=lc(40);for(let n=0;n<t.length;++n)e.length<20&&t[n]<248&&(e+=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789`.charAt(t[n]%62))}return e}};function z(e,t){return e<t?-1:e>t?1:0}function dc(e,t){let n=Math.min(e.length,t.length);for(let r=0;r<n;r++){let n=e.charAt(r),i=t.charAt(r);if(n!==i)return mc(n)===mc(i)?z(n,i):mc(n)?1:-1}return z(e.length,t.length)}var fc=55296,pc=57343;function mc(e){let t=e.charCodeAt(0);return t>=fc&&t<=pc}function hc(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}var gc=`__name__`,_c=class e{constructor(e,t,n){t===void 0?t=0:t>e.length&&F(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&F(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(t){return e.comparator(this,t)===0}child(t){let n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((e=>{n.push(e)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){let r=Math.min(t.length,n.length);for(let i=0;i<r;i++){let r=e.compareSegments(t.get(i),n.get(i));if(r!==0)return r}return z(t.length,n.length)}static compareSegments(t,n){let r=e.isNumericId(t),i=e.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?e.extractNumericId(t).compare(e.extractNumericId(n)):dc(t,n)}static isNumericId(e){return e.startsWith(`__id`)&&e.endsWith(`__`)}static extractNumericId(e){return Ms.fromString(e.substring(4,e.length-2))}},vc=class e extends _c{construct(t,n,r){return new e(t,n,r)}canonicalString(){return this.toArray().join(`/`)}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join(`/`)}static fromString(...t){let n=[];for(let e of t){if(e.indexOf(`//`)>=0)throw new R(L.INVALID_ARGUMENT,`Invalid segment (${e}). Paths must not contain // in them.`);n.push(...e.split(`/`).filter((e=>e.length>0)))}return new e(n)}static emptyPath(){return new e([])}},yc=/^[_a-zA-Z][_a-zA-Z0-9]*$/,bc=class e extends _c{construct(t,n,r){return new e(t,n,r)}static isValidIdentifier(e){return yc.test(e)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,`\\\\`).replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(`.`)}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===`__name__`}static keyField(){return new e([gc])}static fromServerFormat(t){let n=[],r=``,i=0,a=()=>{if(r.length===0)throw new R(L.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=``},o=!1;for(;i<t.length;){let e=t[i];if(e===`\\`){if(i+1===t.length)throw new R(L.INVALID_ARGUMENT,`Path has trailing escape character: `+t);let e=t[i+1];if(e!==`\\`&&e!==`.`&&e!=="`")throw new R(L.INVALID_ARGUMENT,`Path has invalid escape sequence: `+t);r+=e,i+=2}else e==="`"?(o=!o,i++):e!==`.`||o?(r+=e,i++):(a(),i++)}if(a(),o)throw new R(L.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)}static emptyPath(){return new e([])}},B=class e{constructor(e){this.path=e}static fromPath(t){return new e(vc.fromString(t))}static fromName(t){return new e(vc.fromString(t).popFirst(5))}static empty(){return new e(vc.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&vc.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return vc.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(t){return new e(new vc(t.slice()))}};function xc(e,t,n){if(!n)throw new R(L.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Sc(e,t,n,r){if(!0===t&&!0===r)throw new R(L.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Cc(e){if(!B.isDocumentKey(e))throw new R(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function wc(e){if(B.isDocumentKey(e))throw new R(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Tc(e){return typeof e==`object`&&!!e&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function Ec(e){if(e===void 0)return`undefined`;if(e===null)return`null`;if(typeof e==`string`)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e==`number`||typeof e==`boolean`)return``+e;if(typeof e==`object`){if(e instanceof Array)return`an array`;{let t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:`an object`}}return typeof e==`function`?`a function`:F(12329,{type:typeof e})}function Dc(e,t){if(`_delegate`in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new R(L.INVALID_ARGUMENT,`Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?`);{let n=Ec(e);throw new R(L.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function Oc(e,t){if(t<=0)throw new R(L.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}function kc(e,t){let n={typeString:e};return t&&(n.value=t),n}function Ac(e,t){if(!Tc(e))throw new R(L.INVALID_ARGUMENT,`JSON must be an object`);let n;for(let r in t)if(t[r]){let i=t[r].typeString,a=`value`in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}let o=e[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&o!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new R(L.INVALID_ARGUMENT,n);return!0}var jc=-62135596800,Mc=1e6,Nc=class e{static now(){return e.fromMillis(Date.now())}static fromDate(t){return e.fromMillis(t.getTime())}static fromMillis(t){let n=Math.floor(t/1e3);return new e(n,Math.floor((t-1e3*n)*Mc))}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0||t>=1e9)throw new R(L.INVALID_ARGUMENT,`Timestamp nanoseconds out of range: `+t);if(e<jc||e>=253402300800)throw new R(L.INVALID_ARGUMENT,`Timestamp seconds out of range: `+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Mc}_compareTo(e){return this.seconds===e.seconds?z(this.nanoseconds,e.nanoseconds):z(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return`Timestamp(seconds=`+this.seconds+`, nanoseconds=`+this.nanoseconds+`)`}toJSON(){return{type:e._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Ac(t,e._jsonSchema))return new e(t.seconds,t.nanoseconds)}valueOf(){let e=this.seconds-jc;return String(e).padStart(12,`0`)+`.`+String(this.nanoseconds).padStart(9,`0`)}};Nc._jsonSchemaVersion=`firestore/timestamp/1.0`,Nc._jsonSchema={type:kc(`string`,Nc._jsonSchemaVersion),seconds:kc(`number`),nanoseconds:kc(`number`)};var V=class e{static fromTimestamp(t){return new e(t)}static min(){return new e(new Nc(0,0))}static max(){return new e(new Nc(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return`SnapshotVersion(`+this.timestamp.toString()+`)`}toTimestamp(){return this.timestamp}},Pc=-1,Fc=class{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}};Fc.UNKNOWN_ID=-1;function Ic(e,t){let n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1;return new Rc(V.fromTimestamp(r===1e9?new Nc(n+1,0):new Nc(n,r)),B.empty(),t)}function Lc(e){return new Rc(e.readTime,e.key,Pc)}var Rc=class e{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new e(V.min(),B.empty(),Pc)}static max(){return new e(V.max(),B.empty(),Pc)}};function zc(e,t){let n=e.readTime.compareTo(t.readTime);return n===0?(n=B.comparator(e.documentKey,t.documentKey),n===0?z(e.largestBatchId,t.largestBatchId):n):n}var Bc=`The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.`,Vc=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}};async function Hc(e){if(e.code!==L.FAILED_PRECONDITION||e.message!==Bc)throw e;P(`LocalStore`,`Unexpectedly lost primary lease`)}var H=class e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(t,n){return this.callbackAttached&&F(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(((e,r)=>{this.nextCallback=n=>{this.wrapSuccess(t,n).next(e,r)},this.catchCallback=t=>{this.wrapFailure(n,t).next(e,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(t){try{let n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):e.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):e.reject(n)}static resolve(t){return new e(((e,n)=>{e(t)}))}static reject(t){return new e(((e,n)=>{n(t)}))}static waitFor(t){return new e(((e,n)=>{let r=0,i=0,a=!1;t.forEach((t=>{++r,t.next((()=>{++i,a&&i===r&&e()}),(e=>n(e)))})),a=!0,i===r&&e()}))}static or(t){let n=e.resolve(!1);for(let r of t)n=n.next((t=>t?e.resolve(t):r()));return n}static forEach(e,t){let n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(t,n){return new e(((e,r)=>{let i=t.length,a=Array(i),o=0;for(let s=0;s<i;s++){let c=s;n(t[c]).next((t=>{a[c]=t,++o,o===i&&e(a)}),(e=>r(e)))}}))}static doWhile(t,n){return new e(((e,r)=>{let i=()=>{!0===t()?n().next((()=>{i()}),r):e()};i()}))}};function Uc(e){let t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(`.`).slice(0,2).join(`.`):`-1`;return Number(n)}function Wc(e){return e.name===`IndexedDbTransactionError`}var Gc=class{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.ue&&this.ue(e),e}};Gc.ce=-1;var Kc=-1;function qc(e){return e==null}function Jc(e){return e===0&&1/e==-1/0}function Yc(e){return typeof e==`number`&&Number.isInteger(e)&&!Jc(e)&&e<=2**53-1&&e>=-(2**53-1)}var Xc=``;function Zc(e){let t=``;for(let n=0;n<e.length;n++)t.length>0&&(t=$c(t)),t=Qc(e.get(n),t);return $c(t)}function Qc(e,t){let n=t,r=e.length;for(let t=0;t<r;t++){let r=e.charAt(t);switch(r){case`\0`:n+=``;break;case Xc:n+=``;break;default:n+=r}}return n}function $c(e){return e+Xc+``}function el(e){let t=0;for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function tl(e,t){for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function nl(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var U=class e{constructor(e,t){this.comparator=e,this.root=t||il.EMPTY}insert(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,il.BLACK,null,null))}remove(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,il.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){let e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(`, `)}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rl(this.root,e,this.comparator,!1)}getReverseIterator(){return new rl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rl(this.root,e,this.comparator,!0)}},rl=class{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},il=class e{constructor(t,n,r,i,a){this.key=t,this.value=n,this.color=r??e.RED,this.left=i??e.EMPTY,this.right=a??e.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,a){return new e(t??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this,i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):i===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return e.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){return 2**this.check()<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw F(43730,{key:this.key,value:this.value});if(this.right.isRed())throw F(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw F(27949);return e+(this.isRed()?0:1)}};il.EMPTY=null,il.RED=!0,il.BLACK=!1,il.EMPTY=new class{constructor(){this.size=0}get key(){throw F(57766)}get value(){throw F(16141)}get color(){throw F(16727)}get left(){throw F(29726)}get right(){throw F(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new il(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var W=class e{constructor(e){this.comparator=e,this.data=new U(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){let n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){let r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=t===void 0?this.data.getIterator():this.data.getIteratorFrom(t);n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new al(this.data.getIterator())}getIteratorFrom(e){return new al(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){let e=n.getNext().key,t=r.getNext().key;if(this.comparator(e,t)!==0)return!1}return!0}toArray(){let e=[];return this.forEach((t=>{e.push(t)})),e}toString(){let e=[];return this.forEach((t=>e.push(t))),`SortedSet(`+e.toString()+`)`}copy(t){let n=new e(this.comparator);return n.data=t,n}},al=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}},ol=class e{constructor(e){this.fields=e,e.sort(bc.comparator)}static empty(){return new e([])}unionWith(t){let n=new W(bc.comparator);for(let e of this.fields)n=n.add(e);for(let e of t)n=n.add(e);return new e(n.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return hc(this.fields,e.fields,((e,t)=>e.isEqual(t)))}},sl=class extends Error{constructor(){super(...arguments),this.name=`Base64DecodeError`}},G=class e{constructor(e){this.binaryString=e}static fromBase64String(t){return new e(function(e){try{return atob(e)}catch(e){throw typeof DOMException<`u`&&e instanceof DOMException?new sl(`Invalid base64 string: `+e):e}}(t))}static fromUint8Array(t){return new e(function(e){let t=``;for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t))}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){let t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return z(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};G.EMPTY_BYTE_STRING=new G(``);var cl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ll(e){if($s(!!e,39018),typeof e==`string`){let t=0,n=cl.exec(e);if($s(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+`000000000`).substr(0,9),t=Number(e)}let r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ul(e.seconds),nanos:ul(e.nanos)}}function ul(e){return typeof e==`number`?e:typeof e==`string`?Number(e):0}function dl(e){return typeof e==`string`?G.fromBase64String(e):G.fromUint8Array(e)}var fl=`server_timestamp`,pl=`__type__`,ml=`__previous_value__`,hl=`__local_write_time__`;function gl(e){return(e?.mapValue?.fields||{})[pl]?.stringValue===fl}function _l(e){let t=e.mapValue.fields[ml];return gl(t)?_l(t):t}function vl(e){let t=ll(e.mapValue.fields[hl].timestampValue);return new Nc(t.seconds,t.nanos)}var yl=class{constructor(e,t,n,r,i,a,o,s,c,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=s,this.useFetchStreams=c,this.isUsingEmulator=l,this.apiKey=u}},bl=`(default)`,xl=class e{constructor(e,t){this.projectId=e,this.database=t||bl}static empty(){return new e(``,``)}get isDefaultDatabase(){return this.database===bl}isEqual(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}};function Sl(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,[`projectId`]))throw new R(L.INVALID_ARGUMENT,`"projectId" not provided in firebase.initializeApp.`);return new xl(e.options.projectId,t)}var Cl=`__type__`,wl=`__max__`,Tl={mapValue:{fields:{__type__:{stringValue:wl}}}},El=`__vector__`,Dl=`value`;function Ol(e){return`nullValue`in e?0:`booleanValue`in e?1:`integerValue`in e||`doubleValue`in e?2:`timestampValue`in e?3:`stringValue`in e?5:`bytesValue`in e?6:`referenceValue`in e?7:`geoPointValue`in e?8:`arrayValue`in e?9:`mapValue`in e?gl(e)?4:Hl(e)?9007199254740991:Bl(e)?10:11:F(28295,{value:e})}function kl(e,t){if(e===t)return!0;let n=Ol(e);if(n!==Ol(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return vl(e).isEqual(vl(t));case 3:return function(e,t){if(typeof e.timestampValue==`string`&&typeof t.timestampValue==`string`&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;let n=ll(e.timestampValue),r=ll(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return dl(e.bytesValue).isEqual(dl(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ul(e.geoPointValue.latitude)===ul(t.geoPointValue.latitude)&&ul(e.geoPointValue.longitude)===ul(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if(`integerValue`in e&&`integerValue`in t)return ul(e.integerValue)===ul(t.integerValue);if(`doubleValue`in e&&`doubleValue`in t){let n=ul(e.doubleValue),r=ul(t.doubleValue);return n===r?Jc(n)===Jc(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return hc(e.arrayValue.values||[],t.arrayValue.values||[],kl);case 10:case 11:return function(e,t){let n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(el(n)!==el(r))return!1;for(let e in n)if(n.hasOwnProperty(e)&&(r[e]===void 0||!kl(n[e],r[e])))return!1;return!0}(e,t);default:return F(52216,{left:e})}}function Al(e,t){return(e.values||[]).find((e=>kl(e,t)))!==void 0}function jl(e,t){if(e===t)return 0;let n=Ol(e),r=Ol(t);if(n!==r)return z(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return z(e.booleanValue,t.booleanValue);case 2:return function(e,t){let n=ul(e.integerValue||e.doubleValue),r=ul(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Ml(e.timestampValue,t.timestampValue);case 4:return Ml(vl(e),vl(t));case 5:return dc(e.stringValue,t.stringValue);case 6:return function(e,t){let n=dl(e),r=dl(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){let n=e.split(`/`),r=t.split(`/`);for(let e=0;e<n.length&&e<r.length;e++){let t=z(n[e],r[e]);if(t!==0)return t}return z(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){let n=z(ul(e.latitude),ul(t.latitude));return n===0?z(ul(e.longitude),ul(t.longitude)):n}(e.geoPointValue,t.geoPointValue);case 9:return Nl(e.arrayValue,t.arrayValue);case 10:return function(e,t){let n=e.fields||{},r=t.fields||{},i=n[Dl]?.arrayValue,a=r[Dl]?.arrayValue,o=z(i?.values?.length||0,a?.values?.length||0);return o===0?Nl(i,a):o}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Tl.mapValue&&t===Tl.mapValue)return 0;if(e===Tl.mapValue)return 1;if(t===Tl.mapValue)return-1;let n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(let e=0;e<r.length&&e<a.length;++e){let t=dc(r[e],a[e]);if(t!==0)return t;let o=jl(n[r[e]],i[a[e]]);if(o!==0)return o}return z(r.length,a.length)}(e.mapValue,t.mapValue);default:throw F(23264,{he:n})}}function Ml(e,t){if(typeof e==`string`&&typeof t==`string`&&e.length===t.length)return z(e,t);let n=ll(e),r=ll(t),i=z(n.seconds,r.seconds);return i===0?z(n.nanos,r.nanos):i}function Nl(e,t){let n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){let t=jl(n[e],r[e]);if(t)return t}return z(n.length,r.length)}function Pl(e){return Fl(e)}function Fl(e){return`nullValue`in e?`null`:`booleanValue`in e?``+e.booleanValue:`integerValue`in e?``+e.integerValue:`doubleValue`in e?``+e.doubleValue:`timestampValue`in e?function(e){let t=ll(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):`stringValue`in e?e.stringValue:`bytesValue`in e?function(e){return dl(e).toBase64()}(e.bytesValue):`referenceValue`in e?function(e){return B.fromName(e).toString()}(e.referenceValue):`geoPointValue`in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):`arrayValue`in e?function(e){let t=`[`,n=!0;for(let r of e.values||[])n?n=!1:t+=`,`,t+=Fl(r);return t+`]`}(e.arrayValue):`mapValue`in e?function(e){let t=Object.keys(e.fields||{}).sort(),n=`{`,r=!0;for(let i of t)r?r=!1:n+=`,`,n+=`${i}:${Fl(e.fields[i])}`;return n+`}`}(e.mapValue):F(61005,{value:e})}function Il(e){switch(Ol(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let t=_l(e);return t?16+Il(t):16;case 5:return 2*e.stringValue.length;case 6:return dl(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+Il(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return tl(e.fields,((e,n)=>{t+=e.length+Il(n)})),t}(e.mapValue);default:throw F(13486,{value:e})}}function Ll(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Rl(e){return!!e&&`integerValue`in e}function K(e){return!!e&&`arrayValue`in e}function zl(e){return!!e&&`nullValue`in e}function q(e){return!!e&&`doubleValue`in e&&isNaN(Number(e.doubleValue))}function J(e){return!!e&&`mapValue`in e}function Bl(e){return(e?.mapValue?.fields||{})[Cl]?.stringValue===El}function Vl(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue==`object`)return{timestampValue:{...e.timestampValue}};if(e.mapValue){let t={mapValue:{fields:{}}};return tl(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Vl(n))),t}if(e.arrayValue){let t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Vl(e.arrayValue.values[n]);return t}return{...e}}function Hl(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===wl}var Ul=class e{constructor(e){this.value=e}static empty(){return new e({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!J(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vl(t)}setAll(e){let t=bc.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){let e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Vl(e):r.push(i.lastSegment())}));let i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){let t=this.field(e.popLast());J(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return kl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];J(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){tl(t,((t,n)=>e[t]=n));for(let t of n)delete e[t]}clone(){return new e(Vl(this.value))}},Wl=class e{constructor(e,t,n,r,i,a,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(t){return new e(t,0,V.min(),V.min(),V.min(),Ul.empty(),0)}static newFoundDocument(t,n,r,i){return new e(t,1,n,V.min(),r,i,0)}static newNoDocument(t,n){return new e(t,2,n,V.min(),V.min(),Ul.empty(),0)}static newUnknownDocument(t,n){return new e(t,3,n,V.min(),V.min(),Ul.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(V.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ul.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ul.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=V.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}},Gl=class{constructor(e,t){this.position=e,this.inclusive=t}};function Kl(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){let a=t[i],o=e.position[i];if(r=a.field.isKeyField()?B.comparator(B.fromName(o.referenceValue),n.key):jl(o,n.data.field(a.field)),a.dir===`desc`&&(r*=-1),r!==0)break}return r}function ql(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!kl(e.position[n],t.position[n]))return!1;return!0}var Jl=class{constructor(e,t=`asc`){this.field=e,this.dir=t}};function Yl(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Xl=class{},Zl=class e extends Xl{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(t,n,r){return t.isKeyField()?n===`in`||n===`not-in`?this.createKeyFieldInFilter(t,n,r):new au(t,n,r):n===`array-contains`?new lu(t,r):n===`in`?new uu(t,r):n===`not-in`?new du(t,r):n===`array-contains-any`?new fu(t,r):new e(t,n,r)}static createKeyFieldInFilter(e,t,n){return t===`in`?new ou(e,n):new su(e,n)}matches(e){let t=e.data.field(this.field);return this.op===`!=`?t!==null&&t.nullValue===void 0&&this.matchesComparison(jl(t,this.value)):t!==null&&Ol(this.value)===Ol(t)&&this.matchesComparison(jl(t,this.value))}matchesComparison(e){switch(this.op){case`<`:return e<0;case`<=`:return e<=0;case`==`:return e===0;case`!=`:return e!==0;case`>`:return e>0;case`>=`:return e>=0;default:return F(47266,{operator:this.op})}}isInequality(){return[`<`,`<=`,`>`,`>=`,`!=`,`not-in`].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ql=class e extends Xl{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(t,n){return new e(t,n)}matches(e){return $l(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function $l(e){return e.op===`and`}function eu(e){return tu(e)&&$l(e)}function tu(e){for(let t of e.filters)if(t instanceof Ql)return!1;return!0}function nu(e){if(e instanceof Zl)return e.field.canonicalString()+e.op.toString()+Pl(e.value);if(eu(e))return e.filters.map((e=>nu(e))).join(`,`);{let t=e.filters.map((e=>nu(e))).join(`,`);return`${e.op}(${t})`}}function ru(e,t){return e instanceof Zl?function(e,t){return t instanceof Zl&&e.op===t.op&&e.field.isEqual(t.field)&&kl(e.value,t.value)}(e,t):e instanceof Ql?function(e,t){return t instanceof Ql&&e.op===t.op&&e.filters.length===t.filters.length?e.filters.reduce(((e,n,r)=>e&&ru(n,t.filters[r])),!0):!1}(e,t):void F(19439)}function iu(e){return e instanceof Zl?function(e){return`${e.field.canonicalString()} ${e.op} ${Pl(e.value)}`}(e):e instanceof Ql?function(e){return e.op.toString()+` {`+e.getFilters().map(iu).join(` ,`)+`}`}(e):`Filter`}var au=class extends Zl{constructor(e,t,n){super(e,t,n),this.key=B.fromName(n.referenceValue)}matches(e){let t=B.comparator(e.key,this.key);return this.matchesComparison(t)}},ou=class extends Zl{constructor(e,t){super(e,`in`,t),this.keys=cu(`in`,t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}},su=class extends Zl{constructor(e,t){super(e,`not-in`,t),this.keys=cu(`not-in`,t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}};function cu(e,t){return(t.arrayValue?.values||[]).map((e=>B.fromName(e.referenceValue)))}var lu=class extends Zl{constructor(e,t){super(e,`array-contains`,t)}matches(e){let t=e.data.field(this.field);return K(t)&&Al(t.arrayValue,this.value)}},uu=class extends Zl{constructor(e,t){super(e,`in`,t)}matches(e){let t=e.data.field(this.field);return t!==null&&Al(this.value.arrayValue,t)}},du=class extends Zl{constructor(e,t){super(e,`not-in`,t)}matches(e){if(Al(this.value.arrayValue,{nullValue:`NULL_VALUE`}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Al(this.value.arrayValue,t)}},fu=class extends Zl{constructor(e,t){super(e,`array-contains-any`,t)}matches(e){let t=e.data.field(this.field);return!(!K(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Al(this.value.arrayValue,e)))}},pu=class{constructor(e,t=null,n=[],r=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=a,this.endAt=o,this.Te=null}};function mu(e,t=null,n=[],r=[],i=null,a=null,o=null){return new pu(e,t,n,r,i,a,o)}function hu(e){let t=I(e);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+=`|cg:`+t.collectionGroup),e+=`|f:`,e+=t.filters.map((e=>nu(e))).join(`,`),e+=`|ob:`,e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(`,`),qc(t.limit)||(e+=`|l:`,e+=t.limit),t.startAt&&(e+=`|lb:`,e+=t.startAt.inclusive?`b:`:`a:`,e+=t.startAt.position.map((e=>Pl(e))).join(`,`)),t.endAt&&(e+=`|ub:`,e+=t.endAt.inclusive?`a:`:`b:`,e+=t.endAt.position.map((e=>Pl(e))).join(`,`)),t.Te=e}return t.Te}function gu(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Yl(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!ru(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ql(e.startAt,t.startAt)&&ql(e.endAt,t.endAt)}function _u(e){return B.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}var vu=class{constructor(e,t=null,n=[],r=[],i=null,a=`F`,o=null,s=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=s,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}};function yu(e,t,n,r,i,a,o,s){return new vu(e,t,n,r,i,a,o,s)}function bu(e){return new vu(e)}function xu(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Su(e){return B.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}function Cu(e){return e.collectionGroup!==null}function wu(e){let t=I(e);if(t.Ie===null){t.Ie=[];let e=new Set;for(let n of t.explicitOrderBy)t.Ie.push(n),e.add(n.field.canonicalString());let n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:`asc`;(function(e){let t=new W(bc.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t})(t).forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new Jl(r,n))})),e.has(bc.keyField().canonicalString())||t.Ie.push(new Jl(bc.keyField(),n))}return t.Ie}function Tu(e){let t=I(e);return t.Ee||=Eu(t,wu(e)),t.Ee}function Eu(e,t){if(e.limitType===`F`)return mu(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{let t=e.dir===`desc`?`asc`:`desc`;return new Jl(e.field,t)}));let n=e.endAt?new Gl(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Gl(e.startAt.position,e.startAt.inclusive):null;return mu(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Du(e,t){let n=e.filters.concat([t]);return new vu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Ou(e,t){let n=e.explicitOrderBy.concat([t]);return new vu(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}function ku(e,t,n){return new vu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Au(e,t){return gu(Tu(e),Tu(t))&&e.limitType===t.limitType}function ju(e){return`${hu(Tu(e))}|lt:${e.limitType}`}function Mu(e){return`Query(target=${function(e){let t=e.path.canonicalString();return e.collectionGroup!==null&&(t+=` collectionGroup=`+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>iu(e))).join(`, `)}]`),qc(e.limit)||(t+=`, limit: `+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(`, `)}]`),e.startAt&&(t+=`, startAt: `,t+=e.startAt.inclusive?`b:`:`a:`,t+=e.startAt.position.map((e=>Pl(e))).join(`,`)),e.endAt&&(t+=`, endAt: `,t+=e.endAt.inclusive?`a:`:`b:`,t+=e.endAt.position.map((e=>Pl(e))).join(`,`)),`Target(${t})`}(Tu(e))}; limitType=${e.limitType})`}function Nu(e,t){return t.isFoundDocument()&&function(e,t){let n=t.key.path;return e.collectionGroup===null?B.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n):t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n)}(e,t)&&function(e,t){for(let n of wu(e))if(!n.field.isKeyField()&&t.data.field(n.field)===null)return!1;return!0}(e,t)&&function(e,t){for(let n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){let r=Kl(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,wu(e),t)||e.endAt&&!function(e,t,n){let r=Kl(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,wu(e),t))}(e,t)}function Pu(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Fu(e){return(t,n)=>{let r=!1;for(let i of wu(e)){let e=Iu(i,t,n);if(e!==0)return e;r||=i.field.isKeyField()}return 0}}function Iu(e,t,n){let r=e.field.isKeyField()?B.comparator(t.key,n.key):function(e,t,n){let r=t.data.field(e),i=n.data.field(e);return r!==null&&i!==null?jl(r,i):F(42886)}(e.field,t,n);switch(e.dir){case`asc`:return r;case`desc`:return-1*r;default:return F(19790,{direction:e.dir})}}var Lu=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(let[t,r]of n)if(this.equalsFn(t,e))return r}}has(e){return this.get(e)!==void 0}set(e,t){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return n.length===1?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){tl(this.inner,((t,n)=>{for(let[t,r]of n)e(t,r)}))}isEmpty(){return nl(this.inner)}size(){return this.innerSize}},Ru=new U(B.comparator);function zu(){return Ru}var Bu=new U(B.comparator);function Vu(...e){let t=Bu;for(let n of e)t=t.insert(n.key,n);return t}function Hu(e){let t=Bu;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Uu(){return Gu()}function Wu(){return Gu()}function Gu(){return new Lu((e=>e.toString()),((e,t)=>e.isEqual(t)))}new U(B.comparator);var Ku=new W(B.comparator);function Y(...e){let t=Ku;for(let n of e)t=t.add(n);return t}var qu=new W(z);function Ju(){return qu}function Yu(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:`NaN`};if(t===1/0)return{doubleValue:`Infinity`};if(t===-1/0)return{doubleValue:`-Infinity`}}return{doubleValue:Jc(t)?`-0`:t}}function Xu(e){return{integerValue:``+e}}function Zu(e,t){return Yc(t)?Xu(t):Yu(e,t)}var Qu=class{constructor(){this._=void 0}};function $u(e,t,n){return e instanceof nd?function(e,t){let n={fields:{[pl]:{stringValue:fl},[hl]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&gl(t)&&(t=_l(t)),t&&(n.fields[ml]=t),{mapValue:n}}(n,t):e instanceof rd?id(e,t):e instanceof ad?od(e,t):function(e,t){let n=td(e,t),r=cd(n)+cd(e.Ae);return Rl(n)&&Rl(e.Ae)?Xu(r):Yu(e.serializer,r)}(e,t)}function ed(e,t,n){return e instanceof rd?id(e,t):e instanceof ad?od(e,t):n}function td(e,t){return e instanceof sd?function(e){return Rl(e)||function(e){return!!e&&`doubleValue`in e}(e)}(t)?t:{integerValue:0}:null}var nd=class extends Qu{},rd=class extends Qu{constructor(e){super(),this.elements=e}};function id(e,t){let n=ld(t);for(let t of e.elements)n.some((e=>kl(e,t)))||n.push(t);return{arrayValue:{values:n}}}var ad=class extends Qu{constructor(e){super(),this.elements=e}};function od(e,t){let n=ld(t);for(let t of e.elements)n=n.filter((e=>!kl(e,t)));return{arrayValue:{values:n}}}var sd=class extends Qu{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function cd(e){return ul(e.integerValue||e.doubleValue)}function ld(e){return K(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function ud(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof rd&&t instanceof rd||e instanceof ad&&t instanceof ad?hc(e.elements,t.elements,kl):e instanceof sd&&t instanceof sd?kl(e.Ae,t.Ae):e instanceof nd&&t instanceof nd}(e.transform,t.transform)}var dd=class e{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new e}static exists(t){return new e(void 0,t)}static updateTime(t){return new e(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function fd(e,t){return e.updateTime===void 0?e.exists===void 0||e.exists===t.isFoundDocument():t.isFoundDocument()&&t.version.isEqual(e.updateTime)}var pd=class{};function md(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Sd(e.key,dd.none()):new vd(e.key,e.data,dd.none());{let n=e.data,r=Ul.empty(),i=new W(bc.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);t===null&&e.length>1&&(e=e.popLast(),t=n.field(e)),t===null?r.delete(e):r.set(e,t),i=i.add(e)}return new yd(e.key,r,new ol(i.toArray()),dd.none())}}function hd(e,t,n){e instanceof vd?function(e,t,n){let r=e.value.clone(),i=xd(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof yd?function(e,t,n){if(!fd(e.precondition,t))return void t.convertToUnknownDocument(n.version);let r=xd(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(bd(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function gd(e,t,n,r){return e instanceof vd?function(e,t,n,r){if(!fd(e.precondition,t))return n;let i=e.value.clone(),a=X(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof yd?function(e,t,n,r){if(!fd(e.precondition,t))return n;let i=X(e.fieldTransforms,r,t),a=t.data;return a.setAll(bd(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),n===null?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return fd(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function _d(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return e===void 0&&t===void 0||!(!e||!t)&&hc(e,t,((e,t)=>ud(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var vd=class extends pd{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},yd=class extends pd{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}};function bd(e){let t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){let r=e.data.field(n);t.set(n,r)}})),t}function xd(e,t,n){let r=new Map;$s(e.length===n.length,32656,{Ve:n.length,de:e.length});for(let i=0;i<n.length;i++){let a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,ed(o,s,n[i]))}return r}function X(e,t,n){let r=new Map;for(let i of e){let e=i.transform,a=n.data.field(i.field);r.set(i.field,$u(e,a,t))}return r}var Sd=class extends pd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Cd=class{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){let n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){let r=this.mutations[t];r.key.isEqual(e.key)&&hd(r,e,n[t])}}applyToLocalView(e,t){for(let n of this.baseMutations)n.key.isEqual(e.key)&&(t=gd(n,e,t,this.localWriteTime));for(let n of this.mutations)n.key.isEqual(e.key)&&(t=gd(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let n=Wu();return this.mutations.forEach((r=>{let i=e.get(r.key),a=i.overlayedDocument,o=this.applyToLocalView(a,i.mutatedFields);o=t.has(r.key)?null:o;let s=md(a,o);s!==null&&n.set(r.key,s),a.isValidDocument()||a.convertToNoDocument(V.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Y())}isEqual(e){return this.batchId===e.batchId&&hc(this.mutations,e.mutations,((e,t)=>_d(e,t)))&&hc(this.baseMutations,e.baseMutations,((e,t)=>_d(e,t)))}},wd=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}},Td=class{constructor(e,t){this.count=e,this.unchangedNames=t}},Ed,Z;function Dd(e){if(e===void 0)return Ys(`GRPC error has no .code`),L.UNKNOWN;switch(e){case Ed.OK:return L.OK;case Ed.CANCELLED:return L.CANCELLED;case Ed.UNKNOWN:return L.UNKNOWN;case Ed.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Ed.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Ed.INTERNAL:return L.INTERNAL;case Ed.UNAVAILABLE:return L.UNAVAILABLE;case Ed.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Ed.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Ed.NOT_FOUND:return L.NOT_FOUND;case Ed.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Ed.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Ed.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Ed.ABORTED:return L.ABORTED;case Ed.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Ed.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Ed.DATA_LOSS:return L.DATA_LOSS;default:return F(39323,{code:e})}}(Z=Ed||={})[Z.OK=0]=`OK`,Z[Z.CANCELLED=1]=`CANCELLED`,Z[Z.UNKNOWN=2]=`UNKNOWN`,Z[Z.INVALID_ARGUMENT=3]=`INVALID_ARGUMENT`,Z[Z.DEADLINE_EXCEEDED=4]=`DEADLINE_EXCEEDED`,Z[Z.NOT_FOUND=5]=`NOT_FOUND`,Z[Z.ALREADY_EXISTS=6]=`ALREADY_EXISTS`,Z[Z.PERMISSION_DENIED=7]=`PERMISSION_DENIED`,Z[Z.UNAUTHENTICATED=16]=`UNAUTHENTICATED`,Z[Z.RESOURCE_EXHAUSTED=8]=`RESOURCE_EXHAUSTED`,Z[Z.FAILED_PRECONDITION=9]=`FAILED_PRECONDITION`,Z[Z.ABORTED=10]=`ABORTED`,Z[Z.OUT_OF_RANGE=11]=`OUT_OF_RANGE`,Z[Z.UNIMPLEMENTED=12]=`UNIMPLEMENTED`,Z[Z.INTERNAL=13]=`INTERNAL`,Z[Z.UNAVAILABLE=14]=`UNAVAILABLE`,Z[Z.DATA_LOSS=15]=`DATA_LOSS`;var Od=null;function kd(){return new TextEncoder}var Ad=new Ms([4294967295,4294967295],0);function jd(e){let t=kd().encode(e),n=new Ns;return n.update(t),new Uint8Array(n.digest())}function Md(e){let t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Ms([n,r],0),new Ms([i,a],0)]}var Nd=class e{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Q(`Invalid padding: ${t}`);if(n<0||e.length>0&&this.hashCount===0)throw new Q(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new Q(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ms.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(Ms.fromNumber(n)));return r.compare(Ad)===1&&(r=new Ms([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let[t,n]=Md(jd(e));for(let e=0;e<this.hashCount;e++){let r=this.ye(t,n,e);if(!this.we(r))return!1}return!0}static create(t,n,r){let i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((e=>a.insert(e))),a}insert(e){if(this.ge===0)return;let[t,n]=Md(jd(e));for(let e=0;e<this.hashCount;e++){let r=this.ye(t,n,e);this.be(r)}}be(e){let t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}},Q=class extends Error{constructor(){super(...arguments),this.name=`BloomFilterError`}},Pd=class e{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){let i=new Map;return i.set(t,Fd.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(V.min(),i,new U(z),zu(),Y())}},Fd=class e{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new e(r,n,Y(),Y(),Y())}},Id=class{constructor(e,t,n,r){this.Se=e,this.removedTargetIds=t,this.key=n,this.De=r}},Ld=class{constructor(e,t){this.targetId=e,this.Ce=t}},Rd=class{constructor(e,t,n=G.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}},zd=class{constructor(){this.ve=0,this.Fe=Hd(),this.Me=G.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Y(),t=Y(),n=Y();return this.Fe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:F(38017,{changeType:i})}})),new Fd(this.Me,this.xe,e,t,n)}Ke(){this.Oe=!1,this.Fe=Hd()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){--this.ve,$s(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}},Bd=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=zu(),this.He=Vd(),this.Je=Vd(),this.Ze=new U(z)}Xe(e){for(let t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{let n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.We(),n.Ne||n.Ke(),n.Le(e.resumeToken);break;case 2:n.We(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.Qe(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:F(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((e,n)=>{this.rt(n)&&t(n)}))}st(e){let t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){let i=r.target;if(_u(i))if(n===0){let e=new B(i.path);this.et(t,e,Wl.newNoDocument(e,V.min()))}else $s(n===1,20013,{expectedCount:n});else{let r=this._t(t);if(r!==n){let n=this.ut(e),i=n?this.ct(n,e,r):1;if(i!==0){this.it(t);let e=i===2?`TargetPurposeExistenceFilterMismatchBloom`:`TargetPurposeExistenceFilterMismatch`;this.Ze=this.Ze.insert(t,e)}Od?.lt(function(e,t,n,r,i){let a={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},o=t.unchangedNames;return o&&(a.bloomFilter={applied:i===0,hashCount:o?.hashCount??0,bitmapLength:o?.bits?.bitmap?.length??0,padding:o?.bits?.padding??0,mightContain:e=>r?.mightContain(e)??!1}),a}(r,e.Ce,this.Ge.ht(),n,i))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:n=``,padding:r=0},hashCount:i=0}=t,a,o;try{a=dl(n).toUint8Array()}catch(e){if(e instanceof sl)return Xs(`Decoding the base64 bloom filter in existence filter failed (`+e.message+`); ignoring the bloom filter and falling back to full re-query.`),null;throw e}try{o=new Nd(a,r,i)}catch(e){return Xs(e instanceof Q?`BloomFilter error: `:`Applying bloom filter failed: `,e),null}return o.ge===0?null:o}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){let n=this.Ge.getRemoteKeysForTarget(t),r=0;return n.forEach((n=>{let i=this.Ge.ht(),a=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(a)||(this.et(t,n,null),r++)})),r}Tt(e){let t=new Map;this.ze.forEach(((n,r)=>{let i=this.ot(r);if(i){if(n.current&&_u(i.target)){let t=new B(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,Wl.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.Ke())}}));let n=Y();this.Je.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{let t=this.ot(e);return!t||t.purpose===`TargetPurposeLimboResolution`||(r=!1,!1)})),r&&(n=n.add(e))})),this.je.forEach(((t,n)=>n.setReadTime(e)));let r=new Pd(e,t,this.Ze,this.je,n);return this.je=zu(),this.He=Vd(),this.Je=Vd(),this.Ze=new U(z),r}Ye(e,t){if(!this.rt(e))return;let n=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,n),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;let r=this.nt(e);this.Et(e,t)?r.qe(t,1):r.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new zd,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new W(z),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new W(z),this.He=this.He.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||P(`WatchChangeAggregator`,`Detected inactive target`,e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new zd),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function Vd(){return new U(B.comparator)}function Hd(){return new U(B.comparator)}var Ud=(()=>({asc:`ASCENDING`,desc:`DESCENDING`}))(),Wd=(()=>({"<":`LESS_THAN`,"<=":`LESS_THAN_OR_EQUAL`,">":`GREATER_THAN`,">=":`GREATER_THAN_OR_EQUAL`,"==":`EQUAL`,"!=":`NOT_EQUAL`,"array-contains":`ARRAY_CONTAINS`,in:`IN`,"not-in":`NOT_IN`,"array-contains-any":`ARRAY_CONTAINS_ANY`}))(),Gd=(()=>({and:`AND`,or:`OR`}))(),Kd=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function qd(e,t){return e.useProto3Json||qc(t)?t:{value:t}}function Jd(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,``).replace(`Z`,``)}.${(`000000000`+t.nanoseconds).slice(-9)}Z`:{seconds:``+t.seconds,nanos:t.nanoseconds}}function Yd(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Xd(e){return $s(!!e,49232),V.fromTimestamp(function(e){let t=ll(e);return new Nc(t.seconds,t.nanos)}(e))}function Zd(e,t){return Qd(e,t).canonicalString()}function Qd(e,t){let n=function(e){return new vc([`projects`,e.projectId,`databases`,e.database])}(e).child(`documents`);return t===void 0?n:n.child(t)}function $d(e){let t=vc.fromString(e);return $s(vf(t),10190,{key:t.toString()}),t}function ef(e,t){let n=$d(t);if(n.get(1)!==e.databaseId.projectId)throw new R(L.INVALID_ARGUMENT,`Tried to deserialize key from different project: `+n.get(1)+` vs `+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new R(L.INVALID_ARGUMENT,`Tried to deserialize key from different database: `+n.get(3)+` vs `+e.databaseId.database);return new B(af(n))}function tf(e,t){return Zd(e.databaseId,t)}function nf(e){let t=$d(e);return t.length===4?vc.emptyPath():af(t)}function rf(e){return new vc([`projects`,e.databaseId.projectId,`databases`,e.databaseId.database]).canonicalString()}function af(e){return $s(e.length>4&&e.get(4)===`documents`,29091,{key:e.toString()}),e.popFirst(5)}function of(e,t){let n;if(`targetChange`in t){t.targetChange;let r=function(e){return e===`NO_CHANGE`?0:e===`ADD`?1:e===`REMOVE`?2:e===`CURRENT`?3:e===`RESET`?4:F(39313,{state:e})}(t.targetChange.targetChangeType||`NO_CHANGE`),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?($s(t===void 0||typeof t==`string`,58123),G.fromBase64String(t||``)):($s(t===void 0||t instanceof Buffer||t instanceof Uint8Array,16193),G.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause;n=new Rd(r,i,a,o&&function(e){return new R(e.code===void 0?L.UNKNOWN:Dd(e.code),e.message||``)}(o)||null)}else if(`documentChange`in t){t.documentChange;let r=t.documentChange;r.document,r.document.name,r.document.updateTime;let i=ef(e,r.document.name),a=Xd(r.document.updateTime),o=r.document.createTime?Xd(r.document.createTime):V.min(),s=new Ul({mapValue:{fields:r.document.fields}}),c=Wl.newFoundDocument(i,a,o,s);n=new Id(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if(`documentDelete`in t){t.documentDelete;let r=t.documentDelete;r.document;let i=ef(e,r.document),a=r.readTime?Xd(r.readTime):V.min(),o=Wl.newNoDocument(i,a);n=new Id([],r.removedTargetIds||[],o.key,o)}else if(`documentRemove`in t){t.documentRemove;let r=t.documentRemove;r.document;let i=ef(e,r.document);n=new Id([],r.removedTargetIds||[],i,null)}else{if(!(`filter`in t))return F(11601,{Vt:t});{t.filter;let e=t.filter;e.targetId;let{count:r=0,unchangedNames:i}=e,a=new Td(r,i),o=e.targetId;n=new Ld(o,a)}}return n}function sf(e,t){return{documents:[tf(e,t.path)]}}function cf(e,t){let n={structuredQuery:{}},r=t.path,i;t.collectionGroup===null?(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]):(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]),n.parent=tf(e,i);let a=function(e){if(e.length!==0)return _f(Ql.create(e,`and`))}(t.filters);a&&(n.structuredQuery.where=a);let o=function(e){if(e.length!==0)return e.map((e=>function(e){return{field:hf(e.field),direction:ff(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);let s=qd(e,t.limit);return s!==null&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function lf(e){let t=nf(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){$s(r===1,65062);let e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let a=[];n.where&&(a=function(e){let t=df(e);return t instanceof Ql&&eu(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new Jl(gf(e.field),function(e){switch(e){case`ASCENDING`:return`asc`;case`DESCENDING`:return`desc`;default:return}}(e.direction))}(e)))}(n.orderBy));let s=null;n.limit&&(s=function(e){let t;return t=typeof e==`object`?e.value:e,qc(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){let t=!!e.before;return new Gl(e.values||[],t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){let t=!e.before;return new Gl(e.values||[],t)}(n.endAt)),yu(t,i,o,a,s,`F`,c,l)}function uf(e,t){let n=function(e){switch(e){case`TargetPurposeListen`:return null;case`TargetPurposeExistenceFilterMismatch`:return`existence-filter-mismatch`;case`TargetPurposeExistenceFilterMismatchBloom`:return`existence-filter-mismatch-bloom`;case`TargetPurposeLimboResolution`:return`limbo-document`;default:return F(28987,{purpose:e})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function df(e){return e.unaryFilter===void 0?e.fieldFilter===void 0?e.compositeFilter===void 0?F(30097,{filter:e}):function(e){return Ql.create(e.compositeFilter.filters.map((e=>df(e))),function(e){switch(e){case`AND`:return`and`;case`OR`:return`or`;default:return F(1026)}}(e.compositeFilter.op))}(e):function(e){return Zl.create(gf(e.fieldFilter.field),function(e){switch(e){case`EQUAL`:return`==`;case`NOT_EQUAL`:return`!=`;case`GREATER_THAN`:return`>`;case`GREATER_THAN_OR_EQUAL`:return`>=`;case`LESS_THAN`:return`<`;case`LESS_THAN_OR_EQUAL`:return`<=`;case`ARRAY_CONTAINS`:return`array-contains`;case`IN`:return`in`;case`NOT_IN`:return`not-in`;case`ARRAY_CONTAINS_ANY`:return`array-contains-any`;case`OPERATOR_UNSPECIFIED`:return F(58110);default:return F(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):function(e){switch(e.unaryFilter.op){case`IS_NAN`:let t=gf(e.unaryFilter.field);return Zl.create(t,`==`,{doubleValue:NaN});case`IS_NULL`:let n=gf(e.unaryFilter.field);return Zl.create(n,`==`,{nullValue:`NULL_VALUE`});case`IS_NOT_NAN`:let r=gf(e.unaryFilter.field);return Zl.create(r,`!=`,{doubleValue:NaN});case`IS_NOT_NULL`:let i=gf(e.unaryFilter.field);return Zl.create(i,`!=`,{nullValue:`NULL_VALUE`});case`OPERATOR_UNSPECIFIED`:return F(61313);default:return F(60726)}}(e)}function ff(e){return Ud[e]}function pf(e){return Wd[e]}function mf(e){return Gd[e]}function hf(e){return{fieldPath:e.canonicalString()}}function gf(e){return bc.fromServerFormat(e.fieldPath)}function _f(e){return e instanceof Zl?function(e){if(e.op===`==`){if(q(e.value))return{unaryFilter:{field:hf(e.field),op:`IS_NAN`}};if(zl(e.value))return{unaryFilter:{field:hf(e.field),op:`IS_NULL`}}}else if(e.op===`!=`){if(q(e.value))return{unaryFilter:{field:hf(e.field),op:`IS_NOT_NAN`}};if(zl(e.value))return{unaryFilter:{field:hf(e.field),op:`IS_NOT_NULL`}}}return{fieldFilter:{field:hf(e.field),op:pf(e.op),value:e.value}}}(e):e instanceof Ql?function(e){let t=e.getFilters().map((e=>_f(e)));return t.length===1?t[0]:{compositeFilter:{op:mf(e.op),filters:t}}}(e):F(54877,{filter:e})}function vf(e){return e.length>=4&&e.get(0)===`projects`&&e.get(2)===`databases`}function yf(e){return!!e&&typeof e._toProto==`function`&&e._protoValueType===`ProtoValue`}var bf=class e{constructor(e,t,n,r,i=V.min(),a=V.min(),o=G.EMPTY_BYTE_STRING,s=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=s}withSequenceNumber(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}},xf=class{constructor(e){this.yt=e}};function Sf(e){let t=lf({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType===`LAST`?ku(t,t.limit,`L`):t}var Cf=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if(`nullValue`in e)this.Ft(t,5);else if(`booleanValue`in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if(`integerValue`in e)this.Ft(t,15),t.Mt(ul(e.integerValue));else if(`doubleValue`in e){let n=ul(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),Jc(n)?t.Mt(0):t.Mt(n))}else if(`timestampValue`in e){let n=e.timestampValue;this.Ft(t,20),typeof n==`string`&&(n=ll(n)),t.xt(`${n.seconds||``}`),t.Mt(n.nanos||0)}else if(`stringValue`in e)this.Ot(e.stringValue,t),this.Nt(t);else if(`bytesValue`in e)this.Ft(t,30),t.Bt(dl(e.bytesValue)),this.Nt(t);else if(`referenceValue`in e)this.Lt(e.referenceValue,t);else if(`geoPointValue`in e){let n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else `mapValue`in e?Hl(e)?this.Ft(t,2**53-1):Bl(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):`arrayValue`in e?(this.qt(e.arrayValue,t),this.Nt(t)):F(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){let n=e.fields||{};this.Ft(t,55);for(let e of Object.keys(n))this.Ot(e,t),this.Ct(n[e],t)}kt(e,t){let n=e.fields||{};this.Ft(t,53);let r=Dl,i=n[r].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(ul(i)),this.Ot(r,t),this.Ct(n[r],t)}qt(e,t){let n=e.values||[];this.Ft(t,50);for(let e of n)this.Ct(e,t)}Lt(e,t){this.Ft(t,37),B.fromName(e).path.forEach((e=>{this.Ft(t,60),this.$t(e,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};Cf.Wt=new Cf;var wf=class{constructor(){this.Sn=new Tf}addToCollectionParentIndex(e,t){return this.Sn.add(t),H.resolve()}getCollectionParents(e,t){return H.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return H.resolve()}deleteFieldIndex(e,t){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,t){return H.resolve()}getDocumentsMatchingTarget(e,t){return H.resolve(null)}getIndexType(e,t){return H.resolve(0)}getFieldIndexes(e,t){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,t){return H.resolve(Rc.min())}getMinOffsetFromCollectionGroup(e,t){return H.resolve(Rc.min())}updateCollectionGroup(e,t,n){return H.resolve()}updateIndexEntries(e,t){return H.resolve()}},Tf=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new W(vc.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){let t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new W(vc.comparator)).toArray()}};new Uint8Array;var Ef={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Df=41943040,Of=class e{static withCacheSize(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}};Of.DEFAULT_COLLECTION_PERCENTILE=10,Of.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Of.DEFAULT=new Of(Df,Of.DEFAULT_COLLECTION_PERCENTILE,Of.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Of.DISABLED=new Of(-1,0,0);var kf=class e{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new e(0)}static ar(){return new e(-1)}},Af=`LruGarbageCollector`,jf=1048576;function Mf([e,t],[n,r]){let i=z(e,n);return i===0?z(t,r):i}var Nf=class{constructor(e){this.Pr=e,this.buffer=new W(Mf),this.Tr=0}Ir(){return++this.Tr}Er(e){let t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{let e=this.buffer.last();Mf(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}},Pf=class{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&=(this.Rr.cancel(),null)}get started(){return this.Rr!==null}Ar(e){P(Af,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay(`lru_garbage_collection`,e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Wc(e)?P(Af,`Ignoring IndexedDB error during garbage collection: `,e):await Hc(e)}await this.Ar(3e5)}))}},Ff=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(t===0)return H.resolve(Gc.ce);let n=new Nf(t);return this.Vr.forEachTarget(e,(e=>n.Er(e.sequenceNumber))).next((()=>this.Vr.mr(e,(e=>n.Er(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.Vr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(P(`LruGarbageCollector`,`Garbage collection skipped; disabled`),H.resolve(Ef)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(P(`LruGarbageCollector`,`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ef):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let n,r,i,a,o,s,c,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(P(`LruGarbageCollector`,`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,s=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),Js()<=k.DEBUG&&P(`LruGarbageCollector`,`LRU Garbage Collection\n\tCounted targets in ${a-l}ms\n\tDetermined least recently used ${r} in `+(o-a)+`ms
\tRemoved ${i} targets in `+(s-o)+`ms
\tRemoved ${e} documents in `+(c-s)+`ms
Total Duration: ${c-l}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}};function If(e,t){return new Ff(e,t)}var Lf=class{constructor(){this.changes=new Lu((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Wl.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let n=this.changes.get(t);return n===void 0?this.getFromCache(e,t):H.resolve(n)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}},Rf=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}},zf=class{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(n!==null&&gd(n.mutation,e,ol.empty(),Nc.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Y()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=Y()){let r=Uu();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Vu();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){let n=Uu();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Y())))}populateOverlays(e,t,n){let r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=zu(),a=Gu(),o=function(){return Gu()}();return t.forEach(((e,t)=>{let o=n.get(t.key);r.has(t.key)&&(o===void 0||o.mutation instanceof yd)?i=i.insert(t.key,t):o===void 0?a.set(t.key,ol.empty()):(a.set(t.key,o.mutation.getFieldMask()),gd(o.mutation,t,o.mutation.getFieldMask(),Nc.now()))})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>a.set(e,t))),t.forEach(((e,t)=>o.set(e,new Rf(t,a.get(e)??null)))),o)))}recalculateAndSaveOverlays(e,t){let n=Gu(),r=new U(((e,t)=>e-t)),i=Y();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(let i of e)i.keys().forEach((e=>{let a=t.get(e);if(a===null)return;let o=n.get(e)||ol.empty();o=i.applyToLocalView(a,o),n.set(e,o);let s=(r.get(i.batchId)||Y()).add(e);r=r.insert(i.batchId,s)}))})).next((()=>{let a=[],o=r.getReverseIterator();for(;o.hasNext();){let r=o.getNext(),s=r.key,c=r.value,l=Wu();c.forEach((e=>{if(!i.has(e)){let r=md(t.get(e),n.get(e));r!==null&&l.set(e,r),i=i.add(e)}})),a.push(this.documentOverlayCache.saveOverlays(e,s,l))}return H.waitFor(a)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return Su(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Cu(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{let a=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):H.resolve(Uu()),o=Pc,s=i;return a.next((t=>H.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?H.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{s=s.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,s,t,Y()))).next((e=>({batchId:o,changes:Hu(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new B(t)).next((e=>{let t=Vu();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){let i=t.collectionGroup,a=Vu();return this.indexManager.getCollectionParents(e,i).next((o=>H.forEach(o,(o=>{let s=function(e,t){return new vu(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,s,n,r).next((e=>{e.forEach(((e,t)=>{a=a.insert(e,t)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{let r=n.getKey();e.get(r)===null&&(e=e.insert(r,Wl.newInvalidDocument(r)))}));let n=Vu();return e.forEach(((e,r)=>{let a=i.get(e);a!==void 0&&gd(a.mutation,r,ol.empty(),Nc.now()),Nu(t,r)&&(n=n.insert(e,r))})),n}))}},Bf=class{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return H.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Xd(e.createTime)}}(t)),H.resolve()}getNamedQuery(e,t){return H.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,function(e){return{name:e.name,query:Sf(e.bundledQuery),readTime:Xd(e.readTime)}}(t)),H.resolve()}},Vf=class{constructor(){this.overlays=new U(B.comparator),this.Lr=new Map}getOverlay(e,t){return H.resolve(this.overlays.get(t))}getOverlays(e,t){let n=Uu();return H.forEach(t,(t=>this.getOverlay(e,t).next((e=>{e!==null&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.bt(e,t,r)})),H.resolve()}removeOverlaysForBatchId(e,t,n){let r=this.Lr.get(n);return r!==void 0&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Lr.delete(n)),H.resolve()}getOverlaysForCollection(e,t,n){let r=Uu(),i=t.length+1,a=new B(t.child(``)),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){let e=o.getNext().value,a=e.getKey();if(!t.isPrefixOf(a.path))break;a.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return H.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new U(((e,t)=>e-t)),a=this.overlays.getIterator();for(;a.hasNext();){let e=a.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);t===null&&(t=Uu(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}let o=Uu(),s=i.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return H.resolve(o)}bt(e,t,n){let r=this.overlays.get(n.key);if(r!==null){let e=this.Lr.get(r.largestBatchId).delete(n.key);this.Lr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new wd(t,n));let i=this.Lr.get(t);i===void 0&&(i=Y(),this.Lr.set(t,i)),this.Lr.set(t,i.add(n.key))}},Hf=class{constructor(){this.sessionToken=G.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,H.resolve()}},Uf=class{constructor(){this.kr=new W(Wf.Kr),this.qr=new W(Wf.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){let n=new Wf(e,t);this.kr=this.kr.add(n),this.qr=this.qr.add(n)}$r(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Wr(new Wf(e,t))}Qr(e,t){e.forEach((e=>this.removeReference(e,t)))}Gr(e){let t=new B(new vc([])),n=new Wf(t,e),r=new Wf(t,e+1),i=[];return this.qr.forEachInRange([n,r],(e=>{this.Wr(e),i.push(e.key)})),i}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){let t=new B(new vc([])),n=new Wf(t,e),r=new Wf(t,e+1),i=Y();return this.qr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){let t=new Wf(e,0),n=this.kr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}},Wf=class{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return B.comparator(e.key,t.key)||z(e.Hr,t.Hr)}static Ur(e,t){return z(e.Hr,t.Hr)||B.comparator(e.key,t.key)}},Gf=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new W(Wf.Kr)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,r){let i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new Cd(i,t,n,r);this.mutationQueue.push(a);for(let t of r)this.Jr=this.Jr.add(new Wf(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return H.resolve(a)}lookupMutationBatch(e,t){return H.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let n=t+1,r=this.Xr(n),i=r<0?0:r;return H.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?Kc:this.Yn-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let n=new Wf(t,0),r=new Wf(t,1/0),i=[];return this.Jr.forEachInRange([n,r],(e=>{let t=this.Zr(e.Hr);i.push(t)})),H.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new W(z);return t.forEach((e=>{let t=new Wf(e,0),r=new Wf(e,1/0);this.Jr.forEachInRange([t,r],(e=>{n=n.add(e.Hr)}))})),H.resolve(this.Yr(n))}getAllMutationBatchesAffectingQuery(e,t){let n=t.path,r=n.length+1,i=n;B.isDocumentKey(i)||(i=i.child(``));let a=new Wf(new B(i),0),o=new W(z);return this.Jr.forEachWhile((e=>{let t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Hr)),!0)}),a),H.resolve(this.Yr(o))}Yr(e){let t=[];return e.forEach((e=>{let n=this.Zr(e);n!==null&&t.push(n)})),t}removeMutationBatch(e,t){$s(this.ei(t.batchId,`removed`)===0,55003),this.mutationQueue.shift();let n=this.Jr;return H.forEach(t.mutations,(r=>{let i=new Wf(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Jr=n}))}nr(e){}containsKey(e,t){let n=new Wf(t,0),r=this.Jr.firstAfterOrEqual(n);return H.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}},Kf=class{constructor(e){this.ti=e,this.docs=function(){return new U(B.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ti(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let n=this.docs.get(t);return H.resolve(n?n.document.mutableCopy():Wl.newInvalidDocument(t))}getEntries(e,t){let n=zu();return t.forEach((e=>{let t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Wl.newInvalidDocument(e))})),H.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=zu(),a=t.path,o=new B(a.child(`__id-9223372036854775808__`)),s=this.docs.getIteratorFrom(o);for(;s.hasNext();){let{key:e,value:{document:o}}=s.getNext();if(!a.isPrefixOf(e.path))break;e.path.length>a.length+1||zc(Lc(o),n)<=0||(r.has(o.key)||Nu(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return H.resolve(i)}getAllFromCollectionGroup(e,t,n,r){F(9500)}ni(e,t){return H.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new qf(this)}getSize(e){return H.resolve(this.size)}},qf=class extends Lf{constructor(e){super(),this.Mr=e}applyChanges(e){let t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Mr.addEntry(e,r)):this.Mr.removeEntry(n)})),H.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}},Jf=class{constructor(e){this.persistence=e,this.ri=new Lu((e=>hu(e)),gu),this.lastRemoteSnapshotVersion=V.min(),this.highestTargetId=0,this.ii=0,this.si=new Uf,this.targetCount=0,this.oi=kf._r()}forEachTarget(e,t){return this.ri.forEach(((e,n)=>t(n))),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ii&&(this.ii=t),H.resolve()}lr(e){this.ri.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.oi=new kf(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,H.resolve()}updateTargetData(e,t){return this.lr(t),H.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),--this.targetCount,H.resolve()}removeTargets(e,t,n){let r=0,i=[];return this.ri.forEach(((a,o)=>{o.sequenceNumber<=t&&n.get(o.targetId)===null&&(this.ri.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),H.waitFor(i).next((()=>r))}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,t){let n=this.ri.get(t)||null;return H.resolve(n)}addMatchingKeys(e,t,n){return this.si.$r(t,n),H.resolve()}removeMatchingKeys(e,t,n){this.si.Qr(t,n);let r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),H.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),H.resolve()}getMatchingKeysForTargetId(e,t){let n=this.si.jr(t);return H.resolve(n)}containsKey(e,t){return H.resolve(this.si.containsKey(t))}},Yf=class{constructor(e,t){this._i={},this.overlays={},this.ai=new Gc(0),this.ui=!1,this.ui=!0,this.ci=new Hf,this.referenceDelegate=e(this),this.li=new Jf(this),this.indexManager=new wf,this.remoteDocumentCache=function(e){return new Kf(e)}((e=>this.referenceDelegate.hi(e))),this.serializer=new xf(t),this.Pi=new Bf(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Vf,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this._i[e.toKey()];return n||(n=new Gf(t,this.referenceDelegate),this._i[e.toKey()]=n),n}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,n){P(`MemoryPersistence`,`Starting transaction:`,e);let r=new Xf(this.ai.next());return this.referenceDelegate.Ti(),n(r).next((e=>this.referenceDelegate.Ii(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Ei(e,t){return H.or(Object.values(this._i).map((n=>()=>n.containsKey(e,t))))}},Xf=class extends Vc{constructor(e){super(),this.currentSequenceNumber=e}},Zf=class e{constructor(e){this.persistence=e,this.Ri=new Uf,this.Ai=null}static Vi(t){return new e(t)}get di(){if(this.Ai)return this.Ai;throw F(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.di.delete(n.toString()),H.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.di.add(n.toString()),H.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),H.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((e=>this.di.add(e.toString())));let n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.di.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.di,(n=>{let r=B.fromPath(n);return this.mi(e,r).next((e=>{e||t.removeEntry(r,V.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((e=>{e?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return H.or([()=>H.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},Qf=class e{constructor(e,t){this.persistence=e,this.fi=new Lu((e=>Zc(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=If(this,t)}static Vi(t,n){return new e(t,n)}Ti(){}Ii(e){return H.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){let t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}pr(e){let t=0;return this.mr(e,(e=>{t++})).next((()=>t))}mr(e,t){return H.forEach(this.fi,((n,r)=>this.wr(e,n,r).next((e=>e?H.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0,r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ni(e,(r=>this.wr(e,r,t).next((e=>{e||(n++,i.removeEntry(r,V.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),H.resolve()}removeTarget(e,t){let n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.fi.set(n,e.currentSequenceNumber),H.resolve()}removeReference(e,t,n){return this.fi.set(n,e.currentSequenceNumber),H.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),H.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Il(e.data.value)),t}wr(e,t,n){return H.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let e=this.fi.get(t);return H.resolve(e!==void 0&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}},$f=class e{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Ts=n,this.Is=r}static Es(t,n){let r=Y(),i=Y();for(let e of n.docChanges)switch(e.type){case 0:r=r.add(e.doc.key);break;case 1:i=i.add(e.doc.key)}return new e(t,n.fromCache,r,i)}},ep=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}},tp=class{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return Se()?8:Uc(he())>0?6:4}()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){let i={result:null};return this.gs(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ps(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;let n=new ep;return this.ys(e,t,n).next((r=>{if(i.result=r,this.As)return this.ws(e,t,n,r.size)}))})).next((()=>i.result))}ws(e,t,n,r){return n.documentReadCount<this.Vs?(Js()<=k.DEBUG&&P(`QueryEngine`,`SDK will not create cache indexes for query:`,Mu(t),`since it only creates cache indexes for collection contains`,`more than or equal to`,this.Vs,`documents`),H.resolve()):(Js()<=k.DEBUG&&P(`QueryEngine`,`Query:`,Mu(t),`scans`,n.documentReadCount,`local documents and returns`,r,`documents as results.`),n.documentReadCount>this.ds*r?(Js()<=k.DEBUG&&P(`QueryEngine`,`The SDK decides to create cache indexes for query:`,Mu(t),`as using cache indexes may help improve performance.`),this.indexManager.createTargetIndexes(e,Tu(t))):H.resolve())}gs(e,t){if(xu(t))return H.resolve(null);let n=Tu(t);return this.indexManager.getIndexType(e,n).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=ku(t,null,`F`),n=Tu(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{let i=Y(...r);return this.fs.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{let a=this.bs(t,r);return this.Ss(t,a,i,n.readTime)?this.gs(e,ku(t,null,`F`)):this.Ds(e,a,t,n)}))))})))))}ps(e,t,n,r){return xu(t)||r.isEqual(V.min())?H.resolve(null):this.fs.getDocuments(e,n).next((i=>{let a=this.bs(t,i);return this.Ss(t,a,n,r)?H.resolve(null):(Js()<=k.DEBUG&&P(`QueryEngine`,`Re-using previous result from %s to execute query: %s`,r.toString(),Mu(t)),this.Ds(e,a,t,Ic(r,Pc)).next((e=>e)))}))}bs(e,t){let n=new W(Fu(e));return t.forEach(((t,r)=>{Nu(e,r)&&(n=n.add(r))})),n}Ss(e,t,n,r){if(e.limit===null)return!1;if(n.size!==t.size)return!0;let i=e.limitType===`F`?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}ys(e,t,n){return Js()<=k.DEBUG&&P(`QueryEngine`,`Using full collection scan to execute query:`,Mu(t)),this.fs.getDocumentsMatchingQuery(e,t,Rc.min(),n)}Ds(e,t,n,r){return this.fs.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}},np=`LocalStore`,rp=3e8,ip=class{constructor(e,t,n,r){this.persistence=e,this.Cs=t,this.serializer=r,this.vs=new U(z),this.Fs=new Lu((e=>hu(e)),gu),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(n)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zf(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction(`Collect garbage`,`readwrite-primary`,(t=>e.collect(t,this.vs)))}};function ap(e,t,n,r){return new ip(e,t,n,r)}async function op(e,t){let n=I(e);return await n.persistence.runTransaction(`Handle user change`,`readonly`,(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.Os(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{let i=[],a=[],o=Y();for(let e of r){i.push(e.batchId);for(let t of e.mutations)o=o.add(t.key)}for(let e of t){a.push(e.batchId);for(let t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({Ns:e,removedBatchIds:i,addedBatchIds:a})))}))}))}function sp(e){let t=I(e);return t.persistence.runTransaction(`Get last remote snapshot version`,`readonly`,(e=>t.li.getLastRemoteSnapshotVersion(e)))}function cp(e,t){let n=I(e),r=t.snapshotVersion,i=n.vs;return n.persistence.runTransaction(`Apply remote event`,`readwrite-primary`,(e=>{let a=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;let o=[];t.targetChanges.forEach(((a,s)=>{let c=i.get(s);if(!c)return;o.push(n.li.removeMatchingKeys(e,a.removedDocuments,s).next((()=>n.li.addMatchingKeys(e,a.addedDocuments,s))));let l=c.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.get(s)===null?a.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(a.resumeToken,r)):l=l.withResumeToken(G.EMPTY_BYTE_STRING,V.min()).withLastLimboFreeSnapshotVersion(V.min()),i=i.insert(s,l),function(e,t,n){return e.resumeToken.approximateByteSize()===0||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=rp?!0:n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,a)&&o.push(n.li.updateTargetData(e,l))}));let s=zu(),c=Y();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(lp(e,a,t.documentUpdates).next((e=>{s=e.Bs,c=e.Ls}))),!r.isEqual(V.min())){let t=n.li.getLastRemoteSnapshotVersion(e).next((t=>n.li.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return H.waitFor(o).next((()=>a.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,s,c))).next((()=>s))})).then((e=>(n.vs=i,e)))}function lp(e,t,n){let r=Y(),i=Y();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=zu();return n.forEach(((n,a)=>{let o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(V.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||a.version.compareTo(o.version)===0&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):P(np,`Ignoring outdated watch update for `,n,`. Current version:`,o.version,` Watch version:`,a.version)})),{Bs:r,Ls:i}}))}function up(e,t){let n=I(e);return n.persistence.runTransaction(`Allocate target`,`readwrite`,(e=>{let r;return n.li.getTargetData(e,t).next((i=>i?(r=i,H.resolve(r)):n.li.allocateTargetId(e).next((i=>(r=new bf(t,i,`TargetPurposeListen`,e.currentSequenceNumber),n.li.addTargetData(e,r).next((()=>r)))))))})).then((e=>{let r=n.vs.get(e.targetId);return(r===null||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.vs=n.vs.insert(e.targetId,e),n.Fs.set(t,e.targetId)),e}))}async function dp(e,t,n){let r=I(e),i=r.vs.get(t),a=n?`readwrite`:`readwrite-primary`;try{n||await r.persistence.runTransaction(`Release target`,a,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Wc(e))throw e;P(np,`Failed to update sequence numbers for target ${t}: ${e}`)}r.vs=r.vs.remove(t),r.Fs.delete(i.target)}function fp(e,t,n){let r=I(e),i=V.min(),a=Y();return r.persistence.runTransaction(`Execute query`,`readwrite`,(e=>function(e,t,n){let r=I(e),i=r.Fs.get(n);return i===void 0?r.li.getTargetData(t,n):H.resolve(r.vs.get(i))}(r,e,Tu(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(e,t.targetId).next((e=>{a=e}))})).next((()=>r.Cs.getDocumentsMatchingQuery(e,t,n?i:V.min(),n?a:Y()))).next((e=>(pp(r,Pu(t),e),{documents:e,ks:a})))))}function pp(e,t,n){let r=e.Ms.get(t)||V.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ms.set(t,r)}var mp=class{constructor(){this.activeTargetIds=Ju()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},hp=class{constructor(){this.vo=new mp,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||`not-current`}updateQueryState(e,t,n){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new mp,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}},gp=class{Mo(e){}shutdown(){}},_p=`ConnectivityMonitor`,vp=class{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener(`online`,this.xo),window.removeEventListener(`offline`,this.No)}ko(){window.addEventListener(`online`,this.xo),window.addEventListener(`offline`,this.No)}Oo(){P(_p,`Network connectivity changed: AVAILABLE`);for(let e of this.Lo)e(0)}Bo(){P(_p,`Network connectivity changed: UNAVAILABLE`);for(let e of this.Lo)e(1)}static v(){return typeof window<`u`&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}},yp=null;function bp(){return yp===null?yp=function(){return 268435456+Math.round(2147483648*Math.random())}():yp++,`0x`+yp.toString(16)}var xp=`RestConnection`,Sp={BatchGetDocuments:`batchGet`,Commit:`commit`,RunQuery:`runQuery`,RunAggregationQuery:`runAggregationQuery`,ExecutePipeline:`executePipeline`},Cp=class{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?`https`:`http`,n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.qo=t+`://`+e.host,this.Uo=`projects/${n}/databases/${r}`,this.$o=this.databaseId.database===bl?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Wo(e,t,n,r,i){let a=bp(),o=this.Qo(e,t.toUriEncodedString());P(xp,`Sending RPC '${e}' ${a}:`,o,n);let s={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(s,r,i);let{host:c}=new URL(o),l=E(c);return this.zo(e,o,s,n,l).then((t=>(P(xp,`Received RPC '${e}' ${a}: `,t),t)),(t=>{throw Xs(xp,`RPC '${e}' ${a} failed with error: `,t,`url: `,o,`request:`,n),t}))}jo(e,t,n,r,i,a){return this.Wo(e,t,n,r,i)}Go(e,t,n){e[`X-Goog-Api-Client`]=function(){return`gl-js/ fire/`+Gs}(),e[`Content-Type`]=`text/plain`,this.databaseInfo.appId&&(e[`X-Firebase-GMPID`]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}Qo(e,t){let n=Sp[e],r=`${this.qo}/v1/${t}:${n}`;return this.databaseInfo.apiKey&&(r=`${r}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),r}terminate(){}},wp=class{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}},Tp=`WebChannelConnection`,Ep=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))},Dp=class e extends Cp{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){e.c_||=(Ep(Hs(),Vs.STAT_EVENT,(e=>{e.stat===Bs.PROXY?P(Tp,`STAT_EVENT: detected buffering proxy`):e.stat===Bs.NOPROXY&&P(Tp,`STAT_EVENT: detected no buffering proxy`)})),!0)}zo(e,t,n,r,i){let a=bp();return new Promise(((i,o)=>{let s=new Is;s.setWithCredentials(!0),s.listenOnce(Rs.COMPLETE,(()=>{try{switch(s.getLastErrorCode()){case zs.NO_ERROR:let t=s.getResponseJson();P(Tp,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(t)),i(t);break;case zs.TIMEOUT:P(Tp,`RPC '${e}' ${a} timed out`),o(new R(L.DEADLINE_EXCEEDED,`Request time out`));break;case zs.HTTP_ERROR:let n=s.getStatus();if(P(Tp,`RPC '${e}' ${a} failed with status:`,n,`response text:`,s.getResponseText()),n>0){let e=s.getResponseJson();Array.isArray(e)&&(e=e[0]);let t=e?.error;t&&t.status&&t.message?o(new R(function(e){let t=e.toLowerCase().replace(/_/g,`-`);return Object.values(L).indexOf(t)>=0?t:L.UNKNOWN}(t.status),t.message)):o(new R(L.UNKNOWN,`Server responded with status `+s.getStatus()))}else o(new R(L.UNAVAILABLE,`Connection failed.`));break;default:F(9055,{l_:e,streamId:a,h_:s.getLastErrorCode(),P_:s.getLastError()})}}finally{P(Tp,`RPC '${e}' ${a} completed.`)}}));let c=JSON.stringify(r);P(Tp,`RPC '${e}' ${a} sending request:`,r),s.send(t,`POST`,c,n,15)}))}T_(t,n,r){let i=bp(),a=[this.qo,`/`,`google.firestore.v1.Firestore`,`/`,t,`/channel`],o=this.createWebChannelTransport(),s={httpSessionIdParam:`gsessionid`,initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(s.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(s.useFetchStreams=!0),this.Go(s.initMessageHeaders,n,r),s.encodeInitMessageHeaders=!0;let l=a.join(``);P(Tp,`Creating RPC '${t}' stream ${i}: ${l}`,s);let u=o.createWebChannel(l,s);this.I_(u);let d=!1,f=!1,p=new wp({Ho:e=>{f?P(Tp,`Not sending because RPC '${t}' stream ${i} is closed:`,e):(d||=(P(Tp,`Opening RPC '${t}' stream ${i} transport.`),u.open(),!0),P(Tp,`RPC '${t}' stream ${i} sending:`,e),u.send(e))},Jo:()=>u.close()});return Ep(u,Ls.EventType.OPEN,(()=>{f||(P(Tp,`RPC '${t}' stream ${i} transport opened.`),p.i_())})),Ep(u,Ls.EventType.CLOSE,(()=>{f||(f=!0,P(Tp,`RPC '${t}' stream ${i} transport closed`),p.o_(),this.E_(u))})),Ep(u,Ls.EventType.ERROR,(e=>{f||(f=!0,Xs(Tp,`RPC '${t}' stream ${i} transport errored. Name:`,e.name,`Message:`,e.message),p.o_(new R(L.UNAVAILABLE,`The operation could not be completed`)))})),Ep(u,Ls.EventType.MESSAGE,(e=>{if(!f){let n=e.data[0];$s(!!n,16349);let r=n,a=r?.error||r[0]?.error;if(a){P(Tp,`RPC '${t}' stream ${i} received error:`,a);let e=a.status,n=function(e){let t=Ed[e];if(t!==void 0)return Dd(t)}(e),r=a.message;e===`NOT_FOUND`&&r.includes(`database`)&&r.includes(`does not exist`)&&r.includes(this.databaseId.database)&&Xs(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),n===void 0&&(n=L.INTERNAL,r=`Unknown error status: `+e+` with message `+a.message),f=!0,p.o_(new R(n,r)),u.close()}else P(Tp,`RPC '${t}' stream ${i} received:`,n),p.__(n)}})),e.u_(),setTimeout((()=>{p.s_()}),0),p}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,n){super.Go(e,t,n),this.databaseInfo.apiKey&&(e[`x-goog-api-key`]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Us()}};function Op(e){return new Dp(e)}function kp(){return typeof document<`u`?document:null}function Ap(e){return new Kd(e,!0)}Dp.c_=!1;var jp=class{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Ci=e,this.timerId=t,this.R_=n,this.A_=r,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();let t=Math.floor(this.d_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&P(`ExponentialBackoff`,`Backing off for ${r} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}},Mp=`PersistentStream`,Np=class{constructor(e,t,n,r,i,a,o,s){this.Ci=e,this.b_=n,this.S_=r,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=s,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new jp(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state===4?this.N_():this.auth()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&=(this.C_.cancel(),null)}U_(){this.v_&&=(this.v_.cancel(),null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e===4?t&&t.code===L.RESOURCE_EXHAUSTED?(Ys(t.toString()),Ys(`Using maximum backoff delay to prevent overloading the backend.`),this.M_.g_()):t&&t.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()):this.M_.reset(),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;let e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.D_===t&&this.G_(e,n)}),(t=>{e((()=>{let e=new R(L.UNKNOWN,`Fetching auth token failed: `+t.message);return this.z_(e)}))}))}G_(e,t){let n=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{n((()=>this.listener.Zo()))})),this.stream.Yo((()=>{n((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((e=>{n((()=>this.z_(e)))})),this.stream.onMessage((e=>{n((()=>++this.F_==1?this.H_(e):this.onNext(e)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return P(Mp,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(P(Mp,`stream callback skipped by getCloseGuardedDispatcher.`),Promise.resolve())))}}},Pp=class extends Np{constructor(e,t,n,r,i,a){super(e,`listen_stream_connection_backoff`,`listen_stream_idle`,`health_check_timeout`,t,n,r,a),this.serializer=i}j_(e,t){return this.connection.T_(`Listen`,e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=of(this.serializer,e),n=function(e){if(!(`targetChange`in e))return V.min();let t=e.targetChange;return t.targetIds&&t.targetIds.length?V.min():t.readTime?Xd(t.readTime):V.min()}(e);return this.listener.J_(t,n)}Z_(e){let t={};t.database=rf(this.serializer),t.addTarget=function(e,t){let n,r=t.target;if(n=_u(r)?{documents:sf(e,r)}:{query:cf(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Yd(e,t.resumeToken);let r=qd(e,t.expectedCount);r!==null&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(V.min())>0){n.readTime=Jd(e,t.snapshotVersion.toTimestamp());let r=qd(e,t.expectedCount);r!==null&&(n.expectedCount=r)}return n}(this.serializer,e);let n=uf(this.serializer,e);n&&(t.labels=n),this.K_(t)}X_(e){let t={};t.database=rf(this.serializer),t.removeTarget=e,this.K_(t)}},Fp=class{},Ip=class extends Fp{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new R(L.FAILED_PRECONDITION,`The client has already been terminated.`)}Wo(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,a])=>this.connection.Wo(e,Qd(t,n),r,i,a))).catch((e=>{throw e.name===`FirebaseError`?(e.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new R(L.UNKNOWN,e.toString())}))}jo(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.jo(e,Qd(t,n),r,a,o,i))).catch((e=>{throw e.name===`FirebaseError`?(e.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new R(L.UNKNOWN,e.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}};function Lp(e,t,n,r){return new Ip(e,t,n,r)}var Rp=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=`Unknown`,this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca(`Unknown`),this._a=this.asyncQueue.enqueueAfterDelay(`online_state_timeout`,1e4,(()=>(this._a=null,this.la(`Backend didn't respond within 10 seconds.`),this.ca(`Offline`),Promise.resolve()))))}ha(e){this.state===`Online`?this.ca(`Unknown`):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca(`Offline`)))}set(e){this.Pa(),this.oa=0,e===`Online`&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ys(t),this.aa=!1):P(`OnlineStateTracker`,t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}},zp=`RemoteStore`,Bp=class{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo((e=>{n.enqueueAndForget((async()=>{Yp(this)&&(P(zp,`Restarting streams for network reachability change.`),await async function(e){let t=I(e);t.Ea.add(4),await Hp(t),t.Va.set(`Unknown`),t.Ea.delete(4),await Vp(t)}(this))}))})),this.Va=new Rp(n,r)}};async function Vp(e){if(Yp(e))for(let t of e.Ra)await t(!0)}async function Hp(e){for(let t of e.Ra)await t(!1)}function Up(e,t){let n=I(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Jp(n)?qp(n):im(n).O_()&&Gp(n,t))}function Wp(e,t){let n=I(e),r=im(n);n.Ia.delete(t),r.O_()&&Kp(n,t),n.Ia.size===0&&(r.O_()?r.L_():Yp(n)&&n.Va.set(`Unknown`))}function Gp(e,t){if(e.da.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(V.min())>0){let n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}im(e).Z_(t)}function Kp(e,t){e.da.$e(t),im(e).X_(t)}function qp(e){e.da=new Bd({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),im(e).start(),e.Va.ua()}function Jp(e){return Yp(e)&&!im(e).x_()&&e.Ia.size>0}function Yp(e){return I(e).Ea.size===0}function Xp(e){e.da=void 0}async function Zp(e){e.Va.set(`Online`)}async function Qp(e){e.Ia.forEach(((t,n)=>{Gp(e,t)}))}async function $p(e,t){Xp(e),Jp(e)?(e.Va.ha(t),qp(e)):e.Va.set(`Unknown`)}async function em(e,t,n){if(e.Va.set(`Online`),t instanceof Rd&&t.state===2&&t.cause)try{await async function(e,t){let n=t.cause;for(let r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.da.removeTarget(r))}(e,t)}catch(n){P(zp,`Failed to remove targets %s: %s `,t.targetIds.join(`,`),n),await tm(e,n)}else if(t instanceof Id?e.da.Xe(t):t instanceof Ld?e.da.st(t):e.da.tt(t),!n.isEqual(V.min()))try{let t=await sp(e.localStore);n.compareTo(t)>=0&&await function(e,t){let n=e.da.Tt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){let i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{let r=e.Ia.get(t);r&&(e.Ia.set(t,r.withResumeToken(G.EMPTY_BYTE_STRING,r.snapshotVersion)),Kp(e,t),Gp(e,new bf(r.target,t,n,r.sequenceNumber)))})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){P(zp,`Failed to raise snapshot:`,t),await tm(e,t)}}async function tm(e,t,n){if(!Wc(t))throw t;e.Ea.add(1),await Hp(e),e.Va.set(`Offline`),n||=()=>sp(e.localStore),e.asyncQueue.enqueueRetryable((async()=>{P(zp,`Retrying IndexedDB access`),await n(),e.Ea.delete(1),await Vp(e)}))}async function nm(e,t){let n=I(e);n.asyncQueue.verifyOperationInProgress(),P(zp,`RemoteStore received new credentials`);let r=Yp(n);n.Ea.add(3),await Hp(n),r&&n.Va.set(`Unknown`),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Vp(n)}async function rm(e,t){let n=I(e);t?(n.Ea.delete(2),await Vp(n)):t||(n.Ea.add(2),await Hp(n),n.Va.set(`Unknown`))}function im(e){return e.ma||(e.ma=function(e,t,n){let r=I(e);return r.sa(),new Pp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:Zp.bind(null,e),Yo:Qp.bind(null,e),t_:$p.bind(null,e),J_:em.bind(null,e)}),e.Ra.push((async t=>{t?(e.ma.B_(),Jp(e)?qp(e):e.Va.set(`Unknown`)):(await e.ma.stop(),Xp(e))}))),e.ma}var am=class e{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new ec,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,a){let o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new R(L.CANCELLED,`Operation cancelled`+(e?`: `+e:``))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle===null?Promise.resolve():(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e))))))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function om(e,t){if(Ys(`AsyncQueue`,`${t}: ${e}`),Wc(e))return new R(L.UNAVAILABLE,`${t}: ${e}`);throw e}var sm=class e{static emptySet(t){return new e(t.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||B.comparator(t.key,n.key):(e,t)=>B.comparator(e.key,t.key),this.keyedMap=Vu(),this.sortedSet=new U(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){let e=n.getNext().key,t=r.getNext().key;if(!e.isEqual(t))return!1}return!0}toString(){let e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?`DocumentSet ()`:`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(t,n){let r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}},cm=class{constructor(){this.ga=new U(B.comparator)}track(e){let t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):F(63341,{Vt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}},lm=class e{constructor(e,t,n,r,i,a,o,s,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=s,this.hasCachedResults=c}static fromInitialDocuments(t,n,r,i,a){let o=[];return n.forEach((e=>{o.push({type:0,doc:e})})),new e(t,n,sm.emptySet(n),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Au(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}},um=class{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}},dm=class{constructor(){this.queries=fm(),this.onlineState=`Unknown`,this.Ca=new Set}terminate(){(function(e,t){let n=I(e),r=n.queries;n.queries=fm(),r.forEach(((e,n)=>{for(let e of n.ba)e.onError(t)}))})(this,new R(L.ABORTED,`Firestore shutting down`))}};function fm(){return new Lu((e=>ju(e)),Au)}async function pm(e,t){let n=I(e),r=3,i=t.query,a=n.queries.get(i);a?!a.Sa()&&t.Da()&&(r=2):(a=new um,r=t.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){let n=om(e,`Initialization of query '${Mu(t.query)}' failed`);t.onError(n);return}n.queries.set(i,a),a.ba.push(t),t.va(n.onlineState),a.wa&&t.Fa(a.wa)&&_m(n)}async function mm(e,t){let n=I(e),r=t.query,i=3,a=n.queries.get(r);if(a){let e=a.ba.indexOf(t);e>=0&&(a.ba.splice(e,1),a.ba.length===0?i=t.Da()?0:1:!a.Sa()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function hm(e,t){let n=I(e),r=!1;for(let e of t){let t=e.query,i=n.queries.get(t);if(i){for(let t of i.ba)t.Fa(e)&&(r=!0);i.wa=e}}r&&_m(n)}function gm(e,t,n){let r=I(e),i=r.queries.get(t);if(i)for(let e of i.ba)e.onError(n);r.queries.delete(t)}function _m(e){e.Ca.forEach((e=>{e.next()}))}var vm,ym;(ym=vm||={}).Ma=`default`,ym.Cache=`cache`;var bm=class{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState=`Unknown`,this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){let t=[];for(let n of e.docChanges)n.type!==3&&t.push(n);e=new lm(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let n=t!==`Offline`;return(!this.options.Ka||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t===`Offline`)}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=lm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==vm.Cache}},xm=class{constructor(e){this.key=e}},Sm=class{constructor(e){this.key=e}},Cm=class{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Y(),this.mutatedKeys=Y(),this.eu=Fu(e),this.tu=new sm(this.eu)}get nu(){return this.Za}ru(e,t){let n=t?t.iu:new cm,r=t?t.tu:this.tu,i=t?t.mutatedKeys:this.mutatedKeys,a=r,o=!1,s=this.query.limitType===`F`&&r.size===this.query.limit?r.last():null,c=this.query.limitType===`L`&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{let l=r.get(e),u=Nu(this.query,t)?t:null,d=!!l&&this.mutatedKeys.has(l.key),f=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations),p=!1;l&&u?l.data.isEqual(u.data)?d!==f&&(n.track({type:3,doc:u}),p=!0):this.su(l,u)||(n.track({type:2,doc:u}),p=!0,(s&&this.eu(u,s)>0||c&&this.eu(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),p=!0):l&&!u&&(n.track({type:1,doc:l}),p=!0,(s||c)&&(o=!0)),p&&(u?(a=a.add(u),i=f?i.add(e):i.delete(e)):(a=a.delete(e),i=i.delete(e)))})),this.query.limit!==null)for(;a.size>this.query.limit;){let e=this.query.limitType===`F`?a.last():a.first();a=a.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:a,iu:n,Ss:o,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){let i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let a=e.iu.ya();a.sort(((e,t)=>function(e,t){let n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return F(20277,{Vt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc))),this.ou(n),r??=!1;let o=t&&!r?this._u():[],s=this.Ya.size===0&&this.current&&!r?1:0,c=s!==this.Xa;return this.Xa=s,a.length!==0||c?{snapshot:new lm(this.query,e.tu,i,a,e.mutatedKeys,s===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e===`Offline`?(this.current=!1,this.applyChanges({tu:this.tu,iu:new cm,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((e=>this.Za=this.Za.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Za=this.Za.delete(e))),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Ya;this.Ya=Y(),this.tu.forEach((e=>{this.uu(e.key)&&(this.Ya=this.Ya.add(e.key))}));let t=[];return e.forEach((e=>{this.Ya.has(e)||t.push(new Sm(e))})),this.Ya.forEach((n=>{e.has(n)||t.push(new xm(n))})),t}cu(e){this.Za=e.ks,this.Ya=Y();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return lm.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}},wm=`SyncEngine`,Tm=class{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}},Em=class{constructor(e){this.key=e,this.hu=!1}},Dm=class{constructor(e,t,n,r,i,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Lu((e=>ju(e)),Au),this.Iu=new Map,this.Eu=new Set,this.Ru=new U(B.comparator),this.Au=new Map,this.Vu=new Uf,this.du={},this.mu=new Map,this.fu=kf.ar(),this.onlineState=`Unknown`,this.gu=void 0}get isPrimaryClient(){return!0===this.gu}};async function Om(e,t,n=!0){let r=Gm(e),i,a=r.Tu.get(t);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await Am(r,t,n,!0),i}async function km(e,t){await Am(Gm(e),t,!0,!1)}async function Am(e,t,n,r){let i=await up(e.localStore,Tu(t)),a=i.targetId,o=e.sharedClientState.addLocalQueryTarget(a,n),s;return r&&(s=await jm(e,t,a,o===`current`,i.resumeToken)),e.isPrimaryClient&&n&&Up(e.remoteStore,i),s}async function jm(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Ss&&(i=await fp(e.localStore,t.query,!1).then((({documents:e})=>t.view.ru(e,i))));let a=r&&r.targetChanges.get(t.targetId),o=r&&r.targetMismatches.get(t.targetId)!=null,s=t.view.applyChanges(i,e.isPrimaryClient,a,o);return zm(e,t.targetId,s.au),s.snapshot}(e,t,n,r);let a=await fp(e.localStore,t,!0),o=new Cm(t,a.ks),s=o.ru(a.documents),c=Fd.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!==`Offline`,i),l=o.applyChanges(s,e.isPrimaryClient,c);zm(e,n,l.au);let u=new Tm(t,n,o);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),l.snapshot}async function Mm(e,t,n){let r=I(e),i=r.Tu.get(t),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((e=>!Au(e,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await dp(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Wp(r.remoteStore,i.targetId),Lm(r,i.targetId)})).catch(Hc)):(Lm(r,i.targetId),await dp(r.localStore,i.targetId,!0))}async function Nm(e,t){let n=I(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Wp(n.remoteStore,r.targetId))}async function Pm(e,t){let n=I(e);try{let e=await cp(n.localStore,t);t.targetChanges.forEach(((e,t)=>{let r=n.Au.get(t);r&&($s(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?$s(r.hu,14607):e.removedDocuments.size>0&&($s(r.hu,42227),r.hu=!1))})),await Hm(n,e,t)}catch(e){await Hc(e)}}function Fm(e,t,n){let r=I(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let e=[];r.Tu.forEach(((n,r)=>{let i=r.view.va(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){let n=I(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(let e of n.ba)e.va(t)&&(r=!0)})),r&&_m(n)}(r.eventManager,t),e.length&&r.Pu.J_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Im(e,t,n){let r=I(e);r.sharedClientState.updateQueryState(t,`rejected`,n);let i=r.Au.get(t),a=i&&i.key;if(a){let e=new U(B.comparator);e=e.insert(a,Wl.newNoDocument(a,V.min()));let n=Y().add(a);await Pm(r,new Pd(V.min(),new Map,new U(z),e,n)),r.Ru=r.Ru.remove(a),r.Au.delete(t),Vm(r)}else await dp(r.localStore,t,!1).then((()=>Lm(r,t,n))).catch(Hc)}function Lm(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(let r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Vu.Gr(t).forEach((t=>{e.Vu.containsKey(t)||Rm(e,t)}))}function Rm(e,t){e.Eu.delete(t.path.canonicalString());let n=e.Ru.get(t);n!==null&&(Wp(e.remoteStore,n),e.Ru=e.Ru.remove(t),e.Au.delete(n),Vm(e))}function zm(e,t,n){for(let r of n)r instanceof xm?(e.Vu.addReference(r.key,t),Bm(e,r)):r instanceof Sm?(P(wm,`Document no longer in limbo: `+r.key),e.Vu.removeReference(r.key,t),e.Vu.containsKey(r.key)||Rm(e,r.key)):F(19791,{wu:r})}function Bm(e,t){let n=t.key,r=n.path.canonicalString();e.Ru.get(n)||e.Eu.has(r)||(P(wm,`New document in limbo: `+n),e.Eu.add(r),Vm(e))}function Vm(e){for(;e.Eu.size>0&&e.Ru.size<e.maxConcurrentLimboResolutions;){let t=e.Eu.values().next().value;e.Eu.delete(t);let n=new B(vc.fromString(t)),r=e.fu.next();e.Au.set(r,new Em(n)),e.Ru=e.Ru.insert(n,r),Up(e.remoteStore,new bf(Tu(bu(n.path)),r,`TargetPurposeLimboResolution`,Gc.ce))}}async function Hm(e,t,n){let r=I(e),i=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((e,s)=>{o.push(r.pu(s,t,n).then((e=>{if((e||n)&&r.isPrimaryClient){let t=e?!e.fromCache:n?.targetChanges.get(s.targetId)?.current;r.sharedClientState.updateQueryState(s.targetId,t?`current`:`not-current`)}if(e){i.push(e);let t=$f.Es(s.targetId,e);a.push(t)}})))})),await Promise.all(o),r.Pu.J_(i),await async function(e,t){let n=I(e);try{await n.persistence.runTransaction(`notifyLocalViewChanges`,`readwrite`,(e=>H.forEach(t,(t=>H.forEach(t.Ts,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>H.forEach(t.Is,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Wc(e))throw e;P(np,`Failed to update sequence numbers: `+e)}for(let e of t){let t=e.targetId;if(!e.fromCache){let e=n.vs.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.vs=n.vs.insert(t,i)}}}(r.localStore,a))}async function Um(e,t){let n=I(e);if(!n.currentUser.isEqual(t)){P(wm,`User change. New user:`,t.toKey());let e=await op(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach((e=>{e.forEach((e=>{e.reject(new R(L.CANCELLED,t))}))})),e.mu.clear()}(n,`'waitForPendingWrites' promise is rejected due to a user change.`),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Hm(n,e.Ns)}}function Wm(e,t){let n=I(e),r=n.Au.get(t);if(r&&r.hu)return Y().add(r.key);{let e=Y(),r=n.Iu.get(t);if(!r)return e;for(let t of r){let r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function Gm(e){let t=I(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Pm.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Wm.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Im.bind(null,t),t.Pu.J_=hm.bind(null,t.eventManager),t.Pu.yu=gm.bind(null,t.eventManager),t}var Km=class{constructor(){this.kind=`memory`,this.synchronizeTabs=!1}async initialize(e){this.serializer=Ap(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return ap(this.persistence,new tp,e.initialUser,this.serializer)}Cu(e){return new Yf(Zf.Vi,this.serializer)}Du(e){return new hp}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}};Km.provider={build:()=>new Km};var qm=class extends Km{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){$s(this.persistence.referenceDelegate instanceof Qf,46915);let n=this.persistence.referenceDelegate.garbageCollector;return new Pf(n,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes===void 0?Of.DEFAULT:Of.withCacheSize(this.cacheSizeBytes);return new Yf((e=>Qf.Vi(e,t)),this.serializer)}},Jm=class{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Fm(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Um.bind(null,this.syncEngine),await rm(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new dm}()}createDatastore(e){let t=Ap(e.databaseInfo.databaseId),n=Op(e.databaseInfo);return Lp(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Bp(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>Fm(this.syncEngine,e,0)),function(){return vp.v()?new vp:new gp}())}createSyncEngine(e,t){return function(e,t,n,r,i,a,o){let s=new Dm(e,t,n,r,i,a);return o&&(s.gu=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function(e){let t=I(e);P(zp,`RemoteStore shutting down.`),t.Ea.add(5),await Hp(t),t.Aa.shutdown(),t.Va.set(`Unknown`)}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}};Jm.provider={build:()=>new Jm};var Ym=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ys(`Uncaught Error in snapshot listener:`,e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}},Xm=`FirestoreClient`,Zm=class{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this._databaseInfo=r,this.user=Ws.UNAUTHENTICATED,this.clientId=uc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{P(Xm,`Received user=`,e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(P(Xm,`Received new app check token=`,e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ec;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let n=om(t,`Failed to shutdown persistence`);e.reject(n)}})),e.promise}};async function Qm(e,t){e.asyncQueue.verifyOperationInProgress(),P(Xm,`Initializing OfflineComponentProvider`);let n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await op(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function $m(e,t){e.asyncQueue.verifyOperationInProgress();let n=await eh(e);P(Xm,`Initializing OnlineComponentProvider`),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>nm(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>nm(t.remoteStore,n))),e._onlineComponents=t}async function eh(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){P(Xm,`Using user provided OfflineComponentProvider`);try{await Qm(e,e._uninitializedComponentsProvider._offline)}catch(t){let n=t;if(!function(e){return e.name===`FirebaseError`?e.code===L.FAILED_PRECONDITION||e.code===L.UNIMPLEMENTED:!(typeof DOMException<`u`&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}(n))throw n;Xs(`Error using user provided cache. Falling back to memory cache: `+n),await Qm(e,new Km)}}else P(Xm,`Using default OfflineComponentProvider`),await Qm(e,new qm(void 0));return e._offlineComponents}async function th(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(P(Xm,`Using user provided OnlineComponentProvider`),await $m(e,e._uninitializedComponentsProvider._online)):(P(Xm,`Using default OnlineComponentProvider`),await $m(e,new Jm))),e._onlineComponents}async function nh(e){let t=await th(e),n=t.eventManager;return n.onListen=Om.bind(null,t.syncEngine),n.onUnlisten=Mm.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=km.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Nm.bind(null,t.syncEngine),n}function rh(e,t,n={}){let r=new ec;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){let a=new Ym({next:s=>{a.Nu(),t.enqueueAndForget((()=>mm(e,o)));let c=s.docs.has(n);!c&&s.fromCache?i.reject(new R(L.UNAVAILABLE,`Failed to get document because the client is offline.`)):c&&s.fromCache&&r&&r.source===`server`?i.reject(new R(L.UNAVAILABLE,`Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)`)):i.resolve(s)},error:e=>i.reject(e)}),o=new bm(bu(n.path),a,{includeMetadataChanges:!0,Ka:!0});return pm(e,o)}(await nh(e),e.asyncQueue,t,n,r))),r.promise}function ih(e,t,n={}){let r=new ec;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){let a=new Ym({next:n=>{a.Nu(),t.enqueueAndForget((()=>mm(e,o))),n.fromCache&&r.source===`server`?i.reject(new R(L.UNAVAILABLE,`Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)`)):i.resolve(n)},error:e=>i.reject(e)}),o=new bm(n,a,{includeMetadataChanges:!0,Ka:!0});return pm(e,o)}(await nh(e),e.asyncQueue,t,n,r))),r.promise}function ah(e){let t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}var oh=`ComponentProvider`,sh=new Map;function ch(e,t,n,r,i){return new yl(e,t,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,ah(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}var lh=`firestore.googleapis.com`,uh=!0,dh=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new R(L.INVALID_ARGUMENT,`Can't provide ssl option if host option is not set`);this.host=lh,this.ssl=uh}else this.host=e.host,this.ssl=e.ssl??uh;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Df;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<jf)throw new R(L.INVALID_ARGUMENT,`cacheSizeBytes must be at least 1048576`);this.cacheSizeBytes=e.cacheSizeBytes}Sc(`experimentalForceLongPolling`,e.experimentalForceLongPolling,`experimentalAutoDetectLongPolling`,e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ah(e.experimentalLongPollingOptions??{}),function(e){if(e.timeoutSeconds!==void 0){if(isNaN(e.timeoutSeconds))throw new R(L.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new R(L.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new R(L.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},fh=class{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type=`firestore-lite`,this._persistenceKey=`(lite)`,this._settings=new dh({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask=`notTerminated`}get app(){if(!this._app)throw new R(L.FAILED_PRECONDITION,`Firestore was not initialized using the Firebase SDK. 'app' is not available`);return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==`notTerminated`}_setSettings(e){if(this._settingsFrozen)throw new R(L.FAILED_PRECONDITION,`Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.`);this._settings=new dh(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(e){if(!e)return new nc;switch(e.type){case`firstParty`:return new oc(e.sessionIndex||`0`,e.iamToken||null,e.authTokenFactory||null);case`provider`:return e.client;default:throw new R(L.INVALID_ARGUMENT,`makeAuthCredentialsProvider failed due to invalid credential type`)}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask===`notTerminated`&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask===`notTerminated`?await this._terminate():this._terminateTask=`notTerminated`}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let t=sh.get(e);t&&(P(oh,`Removing Datastore`),sh.delete(e),t.terminate())}(this),Promise.resolve()}};function ph(e,t,n,r={}){e=Dc(e,fh);let i=E(t),a=e._getSettings(),o={...a,emulatorOptions:e._getEmulatorOptions()},s=`${t}:${n}`;i&&(D(`https://${s}`),O(`Firestore`,!0)),a.host!==lh&&a.host!==s&&Xs(`Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.`);let c={...a,host:s,ssl:i,emulatorOptions:r};if(!je(c,o)&&(e._setSettings(c),r.mockUserToken)){let t,n;if(typeof r.mockUserToken==`string`)t=r.mockUserToken,n=Ws.MOCK_USER;else{t=ue(r.mockUserToken,e._app?.options.projectId);let i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new R(L.INVALID_ARGUMENT,`mockUserToken must contain 'sub' or 'user_id' field!`);n=new Ws(i)}e._authCredentials=new rc(new tc(t,n))}}var mh=class e{constructor(e,t,n){this.converter=t,this._query=n,this.type=`query`,this.firestore=e}withConverter(t){return new e(this.firestore,t,this._query)}},hh=class e{constructor(e,t,n){this.converter=t,this._key=n,this.type=`document`,this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gh(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new e(this.firestore,t,this._key)}toJSON(){return{type:e._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,r){if(Ac(n,e._jsonSchema))return new e(t,r||null,new B(vc.fromString(n.referencePath)))}};hh._jsonSchemaVersion=`firestore/documentReference/1.0`,hh._jsonSchema={type:kc(`string`,hh._jsonSchemaVersion),referencePath:kc(`string`)};var gh=class e extends mh{constructor(e,t,n){super(e,t,bu(n)),this._path=n,this.type=`collection`}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new hh(this.firestore,null,new B(e))}withConverter(t){return new e(this.firestore,t,this._path)}};function _h(e,t,...n){if(e=Be(e),xc(`collection`,`path`,t),e instanceof fh){let r=vc.fromString(t,...n);return wc(r),new gh(e,null,r)}{if(!(e instanceof hh||e instanceof gh))throw new R(L.INVALID_ARGUMENT,`Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore`);let r=e._path.child(vc.fromString(t,...n));return wc(r),new gh(e.firestore,null,r)}}function vh(e,t,...n){if(e=Be(e),arguments.length===1&&(t=uc.newId()),xc(`doc`,`path`,t),e instanceof fh){let r=vc.fromString(t,...n);return Cc(r),new hh(e,null,new B(r))}{if(!(e instanceof hh||e instanceof gh))throw new R(L.INVALID_ARGUMENT,`Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore`);let r=e._path.child(vc.fromString(t,...n));return Cc(r),new hh(e.firestore,e instanceof gh?e.converter:null,new B(r))}}var yh=`AsyncQueue`,bh=class{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new jp(this,`async_queue_retry`),this._c=()=>{let e=kp();e&&P(yh,`Visibility state changed to `+e.visibilityState),this.M_.w_()},this.ac=e;let t=kp();t&&typeof t.addEventListener==`function`&&t.addEventListener(`visibilitychange`,this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=kp();t&&typeof t.removeEventListener==`function`&&t.removeEventListener(`visibilitychange`,this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));let t=new ec;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Wc(e))throw e;P(yh,`Operation failed with retryable error: `+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){let t=this.ac.then((()=>(this.rc=!0,e().catch((e=>{throw this.nc=e,this.rc=!1,Ys(`INTERNAL UNHANDLED ERROR: `,xh(e)),e})).then((e=>(this.rc=!1,e))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let r=am.createAndSchedule(this,e,t,n,(e=>this.hc(e)));return this.tc.push(r),r}uc(){this.nc&&F(47125,{Pc:xh(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(let t of this.tc)if(t.skipDelay(),e!==`all`&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function xh(e){let t=e.message||``;return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}var Sh=class extends fh{constructor(e,t,n,r){super(e,t,n,r),this.type=`firestore`,this._queue=new bh,this._persistenceKey=r?.name||`[DEFAULT]`}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new bh(e),this._firestoreClient=void 0,await e}}};function Ch(e,t){let n=typeof e==`object`?e:pn(),r=typeof e==`string`?e:t||bl,i=sn(n,`firestore`).getImmediate({identifier:r});if(!i._initialized){let e=oe(`firestore`);e&&ph(i,...e)}return i}function wh(e){if(e._terminated)throw new R(L.FAILED_PRECONDITION,`The client has already been terminated.`);return e._firestoreClient||Th(e),e._firestoreClient}function Th(e){let t=e._freezeSettings(),n=ch(e._databaseId,e._app?.options.appId||``,e._persistenceKey,e._app?.options.apiKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new Zm(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(e){let t=e?._online.build();return{_offline:e?._offline.build(t),_online:t}}(e._componentsProvider))}var Eh=class e{constructor(e){this._byteString=e}static fromBase64String(t){try{return new e(G.fromBase64String(t))}catch(e){throw new R(L.INVALID_ARGUMENT,`Failed to construct data from Base64 string: `+e)}}static fromUint8Array(t){return new e(G.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return`Bytes(base64: `+this.toBase64()+`)`}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:e._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Ac(t,e._jsonSchema))return e.fromBase64String(t.bytes)}};Eh._jsonSchemaVersion=`firestore/bytes/1.0`,Eh._jsonSchema={type:kc(`string`,Eh._jsonSchemaVersion),bytes:kc(`string`)};var Dh=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new R(L.INVALID_ARGUMENT,`Invalid field name at argument $(i + 1). Field names must not be empty.`);this._internalPath=new bc(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}},Oh=class{constructor(e){this._methodName=e}},kh=class e{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new R(L.INVALID_ARGUMENT,`Latitude must be a number between -90 and 90, but was: `+e);if(!isFinite(t)||t<-180||t>180)throw new R(L.INVALID_ARGUMENT,`Longitude must be a number between -180 and 180, but was: `+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return z(this._lat,e._lat)||z(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:e._jsonSchemaVersion}}static fromJSON(t){if(Ac(t,e._jsonSchema))return new e(t.latitude,t.longitude)}};kh._jsonSchemaVersion=`firestore/geoPoint/1.0`,kh._jsonSchema={type:kc(`string`,kh._jsonSchemaVersion),latitude:kc(`number`),longitude:kc(`number`)};var Ah=class e{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:e._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Ac(t,e._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e==`number`)))return new e(t.vectorValues);throw new R(L.INVALID_ARGUMENT,`Expected 'vectorValues' field to be a number array`)}}};Ah._jsonSchemaVersion=`firestore/vectorValue/1.0`,Ah._jsonSchema={type:kc(`string`,Ah._jsonSchemaVersion),vectorValues:kc(`object`)};var jh=/^__.*__$/;function Mh(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw F(40011,{dataSource:e})}}var Nh=class e{constructor(e,t,n,r,i,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,i===void 0&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(t){return new e({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){let t=this.path?.child(e),n=this.contextWith({path:t,arrayElement:!1});return n.validatePathSegment(e),n}childContextForFieldPath(e){let t=this.path?.child(e),n=this.contextWith({path:t,arrayElement:!1});return n.validatePath(),n}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Wh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError(`Document fields must not be empty`);if(Mh(this.dataSource)&&jh.test(e))throw this.createError(`Document fields cannot begin and end with "__"`)}},Ph=class{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Ap(e)}createContext(e,t,n,r=!1){return new Nh({dataSource:e,methodName:t,targetDoc:n,path:bc.emptyPath(),arrayElement:!1,hasConverter:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Fh(e){let t=e._freezeSettings(),n=Ap(e._databaseId);return new Ph(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Ih(e,t,n,r=!1){return Lh(n,e.createContext(r?4:3,t))}function Lh(e,t){if(zh(e=Be(e)))return Bh(`Unsupported field value:`,t,e),Rh(e,t);if(e instanceof Oh)return function(e,t){if(!Mh(t.dataSource))throw t.createError(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.createError(`${e._methodName}() is not currently supported inside arrays`);let n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.arrayElement&&t.dataSource!==4)throw t.createError(`Nested arrays are not supported`);return function(e,t){let n=[],r=0;for(let i of e){let e=Lh(i,t.childContextForArray(r));e??={nullValue:`NULL_VALUE`},n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if((e=Be(e))===null)return{nullValue:`NULL_VALUE`};if(typeof e==`number`)return Zu(t.serializer,e);if(typeof e==`boolean`)return{booleanValue:e};if(typeof e==`string`)return{stringValue:e};if(e instanceof Date){let n=Nc.fromDate(e);return{timestampValue:Jd(t.serializer,n)}}if(e instanceof Nc){let n=new Nc(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Jd(t.serializer,n)}}if(e instanceof kh)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Eh)return{bytesValue:Yd(t.serializer,e._byteString)};if(e instanceof hh){let n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.createError(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Zd(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Ah)return function(e,t){let n=e instanceof Ah?e.toArray():e;return{mapValue:{fields:{[Cl]:{stringValue:El},[Dl]:{arrayValue:{values:n.map((e=>{if(typeof e!=`number`)throw t.createError(`VectorValues must only contain numeric values.`);return Yu(t.serializer,e)}))}}}}}}(e,t);if(yf(e))return e._toProto(t.serializer);throw t.createError(`Unsupported field value: ${Ec(e)}`)}(e,t)}function Rh(e,t){let n={};return nl(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):tl(e,((e,r)=>{let i=Lh(r,t.childContextForField(e));i!=null&&(n[e]=i)})),{mapValue:{fields:n}}}function zh(e){return!(typeof e!=`object`||!e||e instanceof Array||e instanceof Date||e instanceof Nc||e instanceof kh||e instanceof Eh||e instanceof hh||e instanceof Oh||e instanceof Ah||yf(e))}function Bh(e,t,n){if(!zh(n)||!Tc(n)){let r=Ec(n);throw r===`an object`?t.createError(e+` a custom object`):t.createError(e+` `+r)}}function Vh(e,t,n){if((t=Be(t))instanceof Dh)return t._internalPath;if(typeof t==`string`)return Uh(e,t);throw Wh(`Field path arguments must be of type string or `,e,!1,void 0,n)}var Hh=RegExp(`[~\\*/\\[\\]]`);function Uh(e,t,n){if(t.search(Hh)>=0)throw Wh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Dh(...t.split(`.`))._internalPath}catch{throw Wh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Wh(e,t,n,r,i){let a=r&&!r.isEmpty(),o=i!==void 0,s=`Function ${t}() called with invalid data`;n&&(s+=" (via `toFirestore()`)"),s+=`. `;let c=``;return(a||o)&&(c+=` (found`,a&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=`)`),new R(L.INVALID_ARGUMENT,s+e+c)}var Gh=class{convertValue(e,t=`none`){switch(Ol(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ul(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(dl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw F(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t=`none`){let n={};return tl(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){let t=e.fields?.[Dl].arrayValue?.values?.map((e=>ul(e.doubleValue)));return new Ah(t)}convertGeoPoint(e){return new kh(ul(e.latitude),ul(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case`previous`:let n=_l(e);return n==null?null:this.convertValue(n,t);case`estimate`:return this.convertTimestamp(vl(e));default:return null}}convertTimestamp(e){let t=ll(e);return new Nc(t.seconds,t.nanos)}convertDocumentKey(e,t){let n=vc.fromString(e);$s(vf(n),9688,{name:e});let r=new xl(n.get(1),n.get(3)),i=new B(n.popFirst(5));return r.isEqual(t)||Ys(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}},Kh=class extends Gh{constructor(e){super(),this.firestore=e}convertBytes(e){return new Eh(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new hh(this.firestore,null,t)}},qh=`@firebase/firestore`,Jh=`4.11.0`,Yh=class{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new hh(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Xh(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){let t=this._document.data.field(Vh(`DocumentSnapshot.get`,e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Xh=class extends Yh{data(){return super.data()}};function Zh(e){if(e.limitType===`L`&&e.explicitOrderBy.length===0)throw new R(L.UNIMPLEMENTED,`limitToLast() queries require specifying at least one orderBy() clause`)}var Qh=class{},$h=class extends Qh{};function eg(e,t,...n){let r=[];t instanceof Qh&&r.push(t),r=r.concat(n),function(e){let t=e.filter((e=>e instanceof rg)).length,n=e.filter((e=>e instanceof tg)).length;if(t>1||t>0&&n>0)throw new R(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let t of r)e=t._apply(e);return e}var tg=class e extends $h{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type=`where`}static _create(t,n,r){return new e(t,n,r)}_apply(e){let t=this._parse(e);return ug(e._query,t),new mh(e.firestore,e.converter,Du(e._query,t))}_parse(e){let t=Fh(e.firestore);return function(e,t,n,r,i,a,o){let s;if(i.isKeyField()){if(a===`array-contains`||a===`array-contains-any`)throw new R(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${a}' queries on documentId().`);if(a===`in`||a===`not-in`){lg(o,a);let t=[];for(let n of o)t.push(cg(r,e,n));s={arrayValue:{values:t}}}else s=cg(r,e,o)}else a!==`in`&&a!==`not-in`&&a!==`array-contains-any`||lg(o,a),s=Ih(n,t,o,a===`in`||a===`not-in`);return Zl.create(i,a,s)}(e._query,`where`,t,e.firestore._databaseId,this._field,this._op,this._value)}};function ng(e,t,n){let r=t,i=Vh(`where`,e);return tg._create(i,r,n)}var rg=class e extends Qh{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(t,n){return new e(t,n)}_parse(e){let t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return t.length===1?t[0]:Ql.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(e,t){let n=e,r=t.getFlattenedFilters();for(let e of r)ug(n,e),n=Du(n,e)}(e._query,t),new mh(e.firestore,e.converter,Du(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type===`and`?`and`:`or`}},ig=class e extends $h{constructor(e,t){super(),this._field=e,this._direction=t,this.type=`orderBy`}static _create(t,n){return new e(t,n)}_apply(e){let t=function(e,t,n){if(e.startAt!==null)throw new R(L.INVALID_ARGUMENT,`Invalid query. You must not call startAt() or startAfter() before calling orderBy().`);if(e.endAt!==null)throw new R(L.INVALID_ARGUMENT,`Invalid query. You must not call endAt() or endBefore() before calling orderBy().`);return new Jl(t,n)}(e._query,this._field,this._direction);return new mh(e.firestore,e.converter,Ou(e._query,t))}};function ag(e,t=`asc`){let n=t,r=Vh(`orderBy`,e);return ig._create(r,n)}var og=class e extends $h{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(t,n,r){return new e(t,n,r)}_apply(e){return new mh(e.firestore,e.converter,ku(e._query,this._limit,this._limitType))}};function sg(e){return Oc(`limit`,e),og._create(`limit`,e,`F`)}function cg(e,t,n){if(typeof(n=Be(n))==`string`){if(n===``)throw new R(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.`);if(!Cu(t)&&n.indexOf(`/`)!==-1)throw new R(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=t.path.child(vc.fromString(n));if(!B.isDocumentKey(r))throw new R(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ll(e,new B(r))}if(n instanceof hh)return Ll(e,n._key);throw new R(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ec(n)}.`)}function lg(e,t){if(!Array.isArray(e)||e.length===0)throw new R(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function ug(e,t){let n=function(e,t){for(let n of e)for(let e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case`!=`:return[`!=`,`not-in`];case`array-contains-any`:case`in`:return[`not-in`];case`not-in`:return[`array-contains-any`,`in`,`not-in`,`!=`];default:return[]}}(t.op));if(n!==null)throw n===t.op?new R(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new R(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}var dg=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},fg=class e extends Yh{constructor(e,t,n,r,i,a){super(e,t,n,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new pg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let n=this._document.data.field(Vh(`DocumentSnapshot.get`,e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new R(L.FAILED_PRECONDITION,`DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().`);let t=this._document,n={};return n.type=e._jsonSchemaVersion,n.bundle=``,n.bundleSource=`DocumentSnapshot`,n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,`previous`),n.bundle=(this._firestore,this.ref.path,`NOT SUPPORTED`),n)}};fg._jsonSchemaVersion=`firestore/documentSnapshot/1.0`,fg._jsonSchema={type:kc(`string`,fg._jsonSchemaVersion),bundleSource:kc(`string`,`DocumentSnapshot`),bundleName:kc(`string`),bundle:kc(`string`)};var pg=class extends fg{data(e={}){return super.data(e)}},mg=class e{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new dg(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){let e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new pg(this._firestore,this._userDataWriter,n.key,n,new dg(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new R(L.INVALID_ARGUMENT,`To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().`);return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{let r=new pg(e._firestore,e._userDataWriter,n.doc.key,n.doc,new dg(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:`added`,doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||e.type!==3)).map((t=>{let r=new pg(e._firestore,e._userDataWriter,t.doc.key,t.doc,new dg(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return t.type!==0&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),t.type!==1&&(n=n.add(t.doc),a=n.indexOf(t.doc.key)),{type:hg(t.type),doc:r,oldIndex:i,newIndex:a}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new R(L.FAILED_PRECONDITION,`QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().`);let t={};t.type=e._jsonSchemaVersion,t.bundleSource=`QuerySnapshot`,t.bundleName=uc.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach((e=>{e._document!==null&&(n.push(e._document),r.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,`previous`)),i.push(e.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,`NOT SUPPORTED`),t}};function hg(e){switch(e){case 0:return`added`;case 2:case 3:return`modified`;case 1:return`removed`;default:return F(61501,{type:e})}}mg._jsonSchemaVersion=`firestore/querySnapshot/1.0`,mg._jsonSchema={type:kc(`string`,mg._jsonSchemaVersion),bundleSource:kc(`string`,`QuerySnapshot`),bundleName:kc(`string`),bundle:kc(`string`)};function gg(e){e=Dc(e,hh);let t=Dc(e.firestore,Sh);return rh(wh(t),e._key).then((n=>vg(t,e,n)))}function _g(e){e=Dc(e,mh);let t=Dc(e.firestore,Sh),n=wh(t),r=new Kh(t);return Zh(e._query),ih(n,e._query).then((n=>new mg(t,r,e,n)))}function vg(e,t,n){let r=n.docs.get(t._key);return new fg(e,new Kh(e),t._key,r,new dg(n.hasPendingWrites,n.fromCache),t.converter)}(function(e,t=!0){Ks(dn),on(new Ve(`firestore`,((e,{instanceIdentifier:n,options:r})=>{let i=e.getProvider(`app`).getImmediate(),a=new Sh(new ic(e.getProvider(`auth-internal`)),new cc(i,e.getProvider(`app-check-internal`)),Sl(i,n),i);return r={useFetchStreams:t,...r},a._setSettings(r),a}),`PUBLIC`).setMultipleInstances(!0)),hn(qh,Jh,e),hn(qh,Jh,`esm2020`)})();const yg=mn().length?mn()[0]:fn({apiKey:`AIzaSyBY6fvHTTR4jVVEAlXua4Mwb1bwsksVeUY`,authDomain:`title-app-alpha.firebaseapp.com`,projectId:`title-app-alpha`,storageBucket:`title-app-alpha.firebasestorage.app`,messagingSenderId:`496560182504`,appId:`1:496560182504:web:d3c393bd7d4898a891e55d`,measurementId:`G-REDNYLES89`}),bg=Os(yg),xg=Ch(yg);var Sg=o((e=>{var t=Symbol.for(`react.transitional.element`),n=Symbol.for(`react.fragment`);function r(e,n,r){var i=null;if(r!==void 0&&(i=``+r),n.key!==void 0&&(i=``+n.key),`key`in n)for(var a in r={},n)a!==`key`&&(r[a]=n[a]);else r=n;return n=r.ref,{$$typeof:t,type:e,key:i,ref:n===void 0?null:n,props:r}}e.Fragment=n,e.jsx=r,e.jsxs=r})),$=o(((e,t)=>{t.exports=Sg()}))();function Cg(){let[e,t]=(0,_.useState)(`magic`),[n,r]=(0,_.useState)(``),[i,a]=(0,_.useState)(``),[o,s]=(0,_.useState)(``),[c,l]=(0,_.useState)(!1);(0,_.useEffect)(()=>{ma(bg,window.location.href)&&u()},[]);async function u(){let e=window.localStorage.getItem(`emailForSignIn`);if(e||=window.prompt(`Please provide your email for confirmation`),e)try{s(`Completing sign in...`);let t=await(await ha(bg,e,window.location.href)).user.getIdToken(!0);localStorage.setItem(`ID_TOKEN`,t),window.localStorage.removeItem(`emailForSignIn`),window.location.href=`/`}catch(e){console.error(e),s(`Failed to complete sign in: ${e?.message||String(e)}`)}}async function d(e){e.preventDefault(),s(`Sending magic link...`);let t={url:window.location.origin+`/`,handleCodeInApp:!0};try{let e=n.trim().toLowerCase();await pa(bg,e,t),window.localStorage.setItem(`emailForSignIn`,e),l(!0),s(``)}catch(e){console.error(e),s(`Failed to send link: ${e?.message||String(e)}`)}}async function f(e){e.preventDefault(),s(`Signing in...`);try{let e=await(await fa(bg,n,i)).user.getIdToken(!0);localStorage.setItem(`ID_TOKEN`,e),s(`Signed in successfully`),window.location.reload()}catch(e){console.error(e);let t=e?.code||``;s(t===`auth/wrong-password`||t===`auth/user-not-found`||t===`auth/invalid-credential`||t===`auth/invalid-login-credentials`?`No password set for this account. Please use Magic Link or Google to sign in.`:`Login failed: ${e?.message||String(e)}`)}}async function p(){s(`Signing in with Google...`);try{let e=await(await N(bg,new Zi)).user.getIdToken(!0);localStorage.setItem(`ID_TOKEN`,e),s(`Signed in successfully`),window.location.reload()}catch(e){console.error(e),e?.code===`auth/popup-closed-by-user`?s(``):s(`Google sign-in failed: ${e?.message||String(e)}`)}}return(0,$.jsx)(`div`,{style:{minHeight:`100vh`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`#f8fafc`,fontFamily:`-apple-system, BlinkMacSystemFont, sans-serif`},children:(0,$.jsxs)(`div`,{style:{width:`100%`,maxWidth:`420px`,padding:`32px`,background:`white`,borderRadius:`16px`,border:`1px solid #e5e7eb`},children:[(0,$.jsxs)(`div`,{style:{textAlign:`center`,marginBottom:`32px`},children:[(0,$.jsx)(`img`,{src:`/logo.png`,alt:`TitleApp AI`,style:{width:`48px`,height:`48px`,borderRadius:`12px`,marginBottom:`16px`}}),(0,$.jsx)(`h1`,{style:{margin:0,fontSize:`24px`,fontWeight:700},children:`TitleApp AI`}),(0,$.jsx)(`p`,{style:{margin:`8px 0 0`,color:`#6b7280`,fontSize:`14px`},children:`Sign in to Business`})]}),c?(0,$.jsxs)(`div`,{style:{padding:`20px`,background:`#f0fdf4`,border:`1px solid #86efac`,borderRadius:`12px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`16px`,fontWeight:600,marginBottom:`8px`},children:`Check your email`}),(0,$.jsxs)(`div`,{style:{fontSize:`14px`,color:`#6b7280`},children:[`We sent a magic link to `,(0,$.jsx)(`strong`,{children:n})]}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#6b7280`,marginTop:`12px`},children:`Click the link in your email to sign in`}),(0,$.jsx)(`button`,{onClick:()=>{l(!1),r(``)},style:{marginTop:`16px`,padding:`10px 20px`,background:`white`,border:`1px solid #e5e7eb`,borderRadius:`8px`,cursor:`pointer`,fontSize:`14px`},children:`Use different email`})]}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`,marginBottom:`24px`},children:[(0,$.jsx)(`button`,{onClick:()=>t(`magic`),style:{flex:1,padding:`12px`,background:e===`magic`?`rgba(124,58,237,0.1)`:`white`,border:e===`magic`?`1px solid rgba(124,58,237,0.3)`:`1px solid #e5e7eb`,borderRadius:`8px`,cursor:`pointer`,fontWeight:e===`magic`?600:400,fontSize:`14px`},children:`Magic Link`}),(0,$.jsx)(`button`,{onClick:()=>t(`password`),style:{flex:1,padding:`12px`,background:e===`password`?`rgba(124,58,237,0.1)`:`white`,border:e===`password`?`1px solid rgba(124,58,237,0.3)`:`1px solid #e5e7eb`,borderRadius:`8px`,cursor:`pointer`,fontWeight:e===`password`?600:400,fontSize:`14px`},children:`Password`})]}),e===`magic`&&(0,$.jsxs)(`form`,{onSubmit:d,style:{display:`grid`,gap:`16px`},children:[(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`Email`}),(0,$.jsx)(`input`,{type:`email`,value:n,onChange:e=>r(e.target.value),placeholder:`you@example.com`,autoComplete:`email`,required:!0,style:{padding:`12px`,fontSize:`14px`,border:`1px solid #e5e7eb`,borderRadius:`8px`}})]}),(0,$.jsx)(`button`,{type:`submit`,style:{padding:`12px`,fontSize:`14px`,fontWeight:600,background:`rgb(124,58,237)`,color:`white`,border:`none`,borderRadius:`8px`,cursor:`pointer`},children:`Send Magic Link`})]}),e===`password`&&(0,$.jsxs)(`form`,{onSubmit:f,style:{display:`grid`,gap:`16px`},children:[(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`Email`}),(0,$.jsx)(`input`,{type:`email`,value:n,onChange:e=>r(e.target.value),placeholder:`you@example.com`,autoComplete:`email`,required:!0,style:{padding:`12px`,fontSize:`14px`,border:`1px solid #e5e7eb`,borderRadius:`8px`}})]}),(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`Password`}),(0,$.jsx)(`input`,{type:`password`,value:i,onChange:e=>a(e.target.value),placeholder:``,autoComplete:`current-password`,required:!0,style:{padding:`12px`,fontSize:`14px`,border:`1px solid #e5e7eb`,borderRadius:`8px`}})]}),(0,$.jsx)(`button`,{type:`submit`,style:{padding:`12px`,fontSize:`14px`,fontWeight:600,background:`rgb(124,58,237)`,color:`white`,border:`none`,borderRadius:`8px`,cursor:`pointer`},children:`Sign In`})]}),o&&(0,$.jsx)(`div`,{style:{marginTop:`16px`,padding:`12px`,background:o.includes(`Failed`)||o.includes(`failed`)||o.includes(`No password`)?`#fff5f5`:`#f0fdf4`,border:o.includes(`Failed`)||o.includes(`failed`)||o.includes(`No password`)?`1px solid #fecaca`:`1px solid #86efac`,borderRadius:`8px`,fontSize:`13px`,color:o.includes(`Failed`)||o.includes(`failed`)||o.includes(`No password`)?`#dc2626`:`#16a34a`},children:o}),(0,$.jsxs)(`div`,{style:{marginTop:`24px`,paddingTop:`24px`,borderTop:`1px solid #e5e7eb`},children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#6b7280`,textAlign:`center`,marginBottom:`12px`},children:`Or continue with`}),(0,$.jsx)(`div`,{style:{display:`grid`,gap:`8px`},children:(0,$.jsx)(`button`,{onClick:p,style:{padding:`12px`,fontSize:`14px`,background:`white`,border:`1px solid #e5e7eb`,borderRadius:`8px`,cursor:`pointer`},children:`Google`})})]})]})]})})}function wg({onComplete:e,onSkip:t}){let[n,r]=(0,_.useState)(`choose`),[i,a]=(0,_.useState)(`medium`),[o,s]=(0,_.useState)([`private_equity`]),[c,l]=(0,_.useState)(``),[u,d]=(0,_.useState)(``),[f,p]=(0,_.useState)(``),[m,h]=(0,_.useState)(`medium`),[g,v]=(0,_.useState)(``),[y,b]=(0,_.useState)(``),x=new Intl.NumberFormat(`en-US`);function S(e){let t=e.replace(/[^0-9]/g,``);return t?x.format(Number(t)):``}function C(e){return e.replace(/[^0-9]/g,``)}function w(){e({target_asset_types:[`private_equity`],risk_tolerance:i,min_net_irr:i===`low`?20:i===`medium`?15:12,min_equity_multiple:2,onboarding_preset:`novice`})}function ee(){let t={target_asset_types:o,risk_tolerance:m,onboarding_preset:`experienced`};c&&(t.min_net_irr=parseFloat(c)),u&&(t.min_cash_on_cash=parseFloat(u)),f&&(t.min_equity_multiple=parseFloat(f)),g&&(t.deal_size_min=parseFloat(C(g))),y&&(t.deal_size_max=parseFloat(C(y))),e(t)}function te(e){o.includes(e)?s(o.filter(t=>t!==e)):s([...o,e])}return n===`choose`?(0,$.jsxs)(`div`,{style:{display:`grid`,gap:`24px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h2`,{style:{margin:`0 0 8px 0`,fontSize:`20px`,fontWeight:700},children:`Investment Experience`}),(0,$.jsx)(`p`,{style:{margin:0,color:`#6b7280`,fontSize:`14px`},children:`Help us set up your deal screening criteria`})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gap:`12px`},children:[(0,$.jsxs)(`button`,{onClick:()=>r(`novice`),style:{padding:`20px`,textAlign:`left`,background:`white`,border:`2px solid #e5e7eb`,borderRadius:`12px`,cursor:`pointer`},children:[(0,$.jsx)(`div`,{style:{fontSize:`16px`,fontWeight:600,marginBottom:`4px`},children:`I'm new to investing`}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`#6b7280`},children:`We'll set up sensible defaults and guide you through the basics`})]}),(0,$.jsxs)(`button`,{onClick:()=>r(`experienced`),style:{padding:`20px`,textAlign:`left`,background:`white`,border:`2px solid #e5e7eb`,borderRadius:`12px`,cursor:`pointer`},children:[(0,$.jsx)(`div`,{style:{fontSize:`16px`,fontWeight:600,marginBottom:`4px`},children:`I have a target box`}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`#6b7280`},children:`Define specific criteria: IRR targets, deal size, risk parameters`})]})]}),(0,$.jsx)(`button`,{onClick:t,style:{padding:`12px`,fontSize:`14px`,background:`transparent`,border:`1px solid #e5e7eb`,borderRadius:`8px`,cursor:`pointer`,color:`#6b7280`},children:`Skip for now (set up later in Settings)`})]}):n===`novice`?(0,$.jsxs)(`div`,{style:{display:`grid`,gap:`24px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`button`,{onClick:()=>r(`choose`),style:{padding:`8px 12px`,fontSize:`14px`,background:`transparent`,border:`1px solid #e5e7eb`,borderRadius:`6px`,cursor:`pointer`,marginBottom:`16px`},children:` Back`}),(0,$.jsx)(`h2`,{style:{margin:`0 0 8px 0`,fontSize:`20px`,fontWeight:700},children:`Getting Started with Deal Analysis`}),(0,$.jsx)(`p`,{style:{margin:0,color:`#6b7280`,fontSize:`14px`},children:`We'll set up conservative defaults to protect you`})]}),(0,$.jsxs)(`div`,{style:{padding:`16px`,background:`#f0fdf4`,border:`1px solid #86efac`,borderRadius:`8px`,fontSize:`14px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`8px`},children:`What we'll set up:`}),(0,$.jsxs)(`ul`,{style:{margin:`8px 0 0 0`,paddingLeft:`20px`},children:[(0,$.jsx)(`li`,{children:`Minimum 15% net IRR target (industry standard)`}),(0,$.jsx)(`li`,{children:`2x equity multiple minimum (double your money)`}),(0,$.jsx)(`li`,{children:`Evidence-first analysis (no assumptions without data)`}),(0,$.jsx)(`li`,{children:`Red flags for high-risk sectors (crypto, pre-revenue, etc.)`})]})]}),(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`12px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`How conservative should we be?`}),(0,$.jsx)(`div`,{style:{display:`grid`,gap:`8px`},children:[{value:`low`,label:`Conservative (20% IRR min)`,desc:`Only strong, proven deals`},{value:`medium`,label:`Balanced (15% IRR min)`,desc:`Industry standard`},{value:`high`,label:`Aggressive (12% IRR min)`,desc:`More opportunities, higher risk`}].map(e=>(0,$.jsxs)(`button`,{onClick:()=>a(e.value),style:{padding:`16px`,textAlign:`left`,background:i===e.value?`rgba(124,58,237,0.1)`:`white`,border:i===e.value?`2px solid rgb(124,58,237)`:`2px solid #e5e7eb`,borderRadius:`8px`,cursor:`pointer`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:e.label}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#6b7280`,marginTop:`4px`},children:e.desc})]},e.value))})]}),(0,$.jsx)(`button`,{onClick:w,style:{padding:`14px`,fontSize:`15px`,fontWeight:600,background:`rgb(124,58,237)`,color:`white`,border:`none`,borderRadius:`8px`,cursor:`pointer`},children:`Continue with These Settings `})]}):(0,$.jsxs)(`div`,{style:{display:`grid`,gap:`24px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`button`,{onClick:()=>r(`choose`),style:{padding:`8px 12px`,fontSize:`14px`,background:`transparent`,border:`1px solid #e5e7eb`,borderRadius:`6px`,cursor:`pointer`,marginBottom:`16px`},children:` Back`}),(0,$.jsx)(`h2`,{style:{margin:`0 0 8px 0`,fontSize:`20px`,fontWeight:700},children:`Define Your Target Box`}),(0,$.jsx)(`p`,{style:{margin:0,color:`#6b7280`,fontSize:`14px`},children:`Set specific criteria for deal screening`})]}),(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`Deal Types *`}),(0,$.jsx)(`div`,{style:{display:`flex`,flexWrap:`wrap`,gap:`8px`},children:[{value:`seed`,label:`Seed`},{value:`series_a`,label:`Series A`},{value:`series_b`,label:`Series B`},{value:`pe_buyout`,label:`PE Buyout`},{value:`acquisition`,label:`Acquisition`},{value:`development`,label:`Development`},{value:`value_add`,label:`Value-Add`},{value:`refinance`,label:`Refinance`},{value:`bridge_loan`,label:`Bridge Loan`},{value:`mezzanine`,label:`Mezzanine`},{value:`joint_venture`,label:`Joint Venture`},{value:`sale_leaseback`,label:`Sale-Leaseback`}].map(e=>(0,$.jsxs)(`button`,{onClick:()=>te(e.value),style:{padding:`12px`,textAlign:`left`,background:o.includes(e.value)?`rgba(124,58,237,0.1)`:`white`,border:o.includes(e.value)?`1px solid rgb(124,58,237)`:`1px solid #e5e7eb`,borderRadius:`6px`,cursor:`pointer`,fontSize:`14px`},children:[o.includes(e.value)?` `:``,e.label]},e.value))})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gap:`16px`,gridTemplateColumns:`1fr 1fr`},children:[(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`Min Net IRR (%)`}),(0,$.jsx)(`input`,{type:`number`,value:c,onChange:e=>l(e.target.value),placeholder:`15`,style:{padding:`10px 12px`,fontSize:`14px`,border:`1px solid #e5e7eb`,borderRadius:`6px`}})]}),(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`Min Cash-on-Cash (%)`}),(0,$.jsx)(`input`,{type:`number`,value:u,onChange:e=>d(e.target.value),placeholder:`8`,style:{padding:`10px 12px`,fontSize:`14px`,border:`1px solid #e5e7eb`,borderRadius:`6px`}})]}),(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`Min Equity Multiple`}),(0,$.jsx)(`input`,{type:`number`,step:`0.1`,value:f,onChange:e=>p(e.target.value),placeholder:`2.0`,style:{padding:`10px 12px`,fontSize:`14px`,border:`1px solid #e5e7eb`,borderRadius:`6px`}})]}),(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`Risk Tolerance *`}),(0,$.jsxs)(`select`,{value:m,onChange:e=>h(e.target.value),style:{padding:`10px 12px`,fontSize:`14px`,border:`1px solid #e5e7eb`,borderRadius:`6px`,background:`white`},children:[(0,$.jsx)(`option`,{value:`low`,children:`Conservative`}),(0,$.jsx)(`option`,{value:`medium`,children:`Balanced`}),(0,$.jsx)(`option`,{value:`high`,children:`Aggressive`})]})]})]}),(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`Deal Size Range (USD)`}),(0,$.jsxs)(`div`,{style:{display:`grid`,gap:`8px`,gridTemplateColumns:`1fr 1fr`},children:[(0,$.jsx)(`input`,{type:`text`,inputMode:`numeric`,value:g,onChange:e=>v(S(e.target.value)),placeholder:`Min (e.g., 500,000)`,style:{padding:`10px 12px`,fontSize:`14px`,border:`1px solid #e5e7eb`,borderRadius:`6px`}}),(0,$.jsx)(`input`,{type:`text`,inputMode:`numeric`,value:y,onChange:e=>b(S(e.target.value)),placeholder:`Max (e.g., 10,000,000)`,style:{padding:`10px 12px`,fontSize:`14px`,border:`1px solid #e5e7eb`,borderRadius:`6px`}})]})]}),(0,$.jsx)(`button`,{onClick:ee,disabled:o.length===0,style:{padding:`14px`,fontSize:`15px`,fontWeight:600,background:o.length===0?`#9ca3af`:`rgb(124,58,237)`,color:`white`,border:`none`,borderRadius:`8px`,cursor:o.length===0?`not-allowed`:`pointer`},children:`Save Investment Criteria `}),(0,$.jsx)(`p`,{style:{fontSize:`13px`,color:`#6b7280`,textAlign:`center`,margin:0},children:`You can refine these parameters later in Settings`})]})}function Tg({purpose:e}){let[t,n]=(0,_.useState)(!1),[r,i]=(0,_.useState)(!1),[a,o]=(0,_.useState)(null),[s,c]=(0,_.useState)(null);function l(){n(!1),i(!1),o(null),c(null)}async function u(t){n(!0),c(null);try{let r=localStorage.getItem(`ID_TOKEN`),a=localStorage.getItem(`VERTICAL`)||`auto`,s=localStorage.getItem(`JURISDICTION`)||`IL`,c=localStorage.getItem(`TENANT_ID`)||``,l=`https://titleapp-frontdoor.titleapp-core.workers.dev`,u=await fetch(`${l}/api?path=/v1/files:sign`,{method:`POST`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${r}`,"X-Vertical":a,"X-Jurisdiction":s,...c?{"X-Tenant-Id":c}:{}},body:JSON.stringify({filename:t.name,contentType:t.type||`application/octet-stream`,sizeBytes:t.size,purpose:e})}),d=await u.json();if(!u.ok||!d.ok)throw Error(d.error||`Failed to get upload URL`);if(!(await fetch(d.uploadUrl,{method:`PUT`,headers:{"Content-Type":t.type||`application/octet-stream`},body:t})).ok)throw Error(`Upload to storage failed`);return await fetch(`${l}/api?path=/v1/files:finalize`,{method:`POST`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${r}`,"X-Vertical":a,"X-Jurisdiction":s,...c?{"X-Tenant-Id":c}:{}},body:JSON.stringify({fileId:d.fileId,storagePath:d.storagePath,contentType:t.type||`application/octet-stream`,sizeBytes:t.size})}),o(d.fileId),i(!0),n(!1),d.fileId}catch(e){return c(e.message||`Upload failed`),n(!1),null}}return{uploadFile:u,uploading:t,uploaded:r,fileId:a,error:s,reset:l}}function Eg({criteria:e,onComplete:t,onSkip:n}){let[r,i]=(0,_.useState)([]),[a,o]=(0,_.useState)(!1),[s,c]=(0,_.useState)(!1),l=Tg({purpose:`deal_memo`});function u(e){e.preventDefault(),e.stopPropagation(),c(!0)}function d(e){e.preventDefault(),e.stopPropagation(),c(!1)}function f(e){e.preventDefault(),e.stopPropagation(),c(!1);let t=Array.from(e.dataTransfer.files).filter(e=>e.type===`application/pdf`||e.name.toLowerCase().endsWith(`.pdf`));t.length>0&&m(t)}async function p(e){let t=Array.from(e.target.files||[]);t.length!==0&&m(t)}async function m(e){let t=e.map(e=>({file:e,analyzing:!1,analysis:null,error:null}));i(e=>[...e,...t]);for(let e=0;e<t.length;e++)await h(r.length+e,t[e].file)}async function h(e,t){i(t=>{let n=[...t];return n[e]={...n[e],analyzing:!0,error:null},n});try{let n=await l.uploadFile(t),r=localStorage.getItem(`ID_TOKEN`),a=await fetch(`https://titleapp-frontdoor.titleapp-core.workers.dev/api?path=/v1/analyst:analyze`,{method:`POST`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${r}`,"X-Vertical":`analyst`,"X-Jurisdiction":`GLOBAL`},body:JSON.stringify({deal:{companyName:t.name.replace(/\.(pdf|PDF)$/,``),dealType:`private_equity`,fileId:n}})}),o=await a.json();if(!a.ok||!o.ok)throw Error(o.error||`Analysis failed`);i(t=>{let n=[...t];return n[e]={...n[e],analyzing:!1,analysis:o.analysis},n})}catch(t){i(n=>{let r=[...n];return r[e]={...r[e],analyzing:!1,error:t.message||`Failed to analyze`},r})}}function g(e){i(r.filter((t,n)=>n!==e))}let v=r.length>0&&r.every(e=>e.analysis||e.error),y=r.some(e=>e.analysis);return(0,$.jsxs)(`div`,{style:{display:`grid`,gap:`24px`,maxWidth:`700px`,margin:`0 auto`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h2`,{style:{margin:`0 0 8px 0`,fontSize:`24px`,fontWeight:700},children:`Upload Sample Deals`}),(0,$.jsx)(`p`,{style:{margin:0,color:`#6b7280`,fontSize:`15px`,lineHeight:1.5},children:`Upload 2-3 deals you're interested in. Our AI will analyze them against your criteria and help you identify your investment sweet spot.`})]}),(0,$.jsxs)(`div`,{style:{padding:`16px 20px`,background:`rgba(124, 58, 237, 0.05)`,border:`1px solid rgba(124, 58, 237, 0.2)`,borderRadius:`12px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,fontWeight:600,color:`rgb(124, 58, 237)`,marginBottom:`8px`},children:`YOUR INVESTMENT CRITERIA`}),(0,$.jsxs)(`div`,{style:{fontSize:`14px`,color:`#374151`,display:`grid`,gap:`4px`},children:[e.min_net_irr&&(0,$.jsxs)(`div`,{children:[` Min IRR: `,e.min_net_irr,`%`]}),e.min_equity_multiple&&(0,$.jsxs)(`div`,{children:[` Min Equity Multiple: `,e.min_equity_multiple,`x`]}),e.risk_tolerance&&(0,$.jsxs)(`div`,{children:[` Risk Tolerance: `,e.risk_tolerance.charAt(0).toUpperCase()+e.risk_tolerance.slice(1)]}),e.target_asset_types&&(0,$.jsxs)(`div`,{children:[` Asset Types: `,e.target_asset_types.join(`, `).replace(/_/g,` `)]})]})]}),(0,$.jsxs)(`div`,{onDragOver:u,onDragEnter:u,onDragLeave:d,onDrop:f,style:{padding:`32px`,border:s?`2px dashed rgb(124, 58, 237)`:`2px dashed #d1d5db`,borderRadius:`12px`,textAlign:`center`,background:s?`rgba(124, 58, 237, 0.05)`:`#f9fafb`,transition:`border-color 0.2s, background 0.2s`},children:[(0,$.jsx)(`div`,{style:{fontSize:`24px`,fontWeight:600,color:`#64748b`,marginBottom:`16px`},children:`Deal Memos`}),(0,$.jsx)(`p`,{style:{fontSize:`16px`,fontWeight:600,marginBottom:`8px`},children:`Upload Deal Memos (PDFs)`}),(0,$.jsx)(`p`,{style:{fontSize:`14px`,color:`#6b7280`,marginBottom:`20px`},children:s?`Drop PDF files here`:`Drag and drop PDFs here, or click to choose files`}),(0,$.jsx)(`input`,{type:`file`,accept:`.pdf`,multiple:!0,onChange:p,style:{display:`none`},id:`deal-upload`}),(0,$.jsx)(`label`,{htmlFor:`deal-upload`,style:{display:`inline-block`,padding:`12px 24px`,background:`rgb(124, 58, 237)`,color:`white`,borderRadius:`8px`,cursor:`pointer`,fontSize:`15px`,fontWeight:600},children:`Choose Files`})]}),r.length>0&&(0,$.jsxs)(`div`,{style:{display:`grid`,gap:`12px`},children:[(0,$.jsxs)(`div`,{style:{fontSize:`16px`,fontWeight:600},children:[`Uploaded Deals (`,r.length,`)`]}),r.map((e,t)=>(0,$.jsxs)(`div`,{style:{padding:`16px`,background:`white`,border:`1px solid #e5e7eb`,borderRadius:`12px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`start`,marginBottom:`12px`},children:[(0,$.jsxs)(`div`,{style:{flex:1},children:[(0,$.jsx)(`div`,{style:{fontSize:`15px`,fontWeight:600,marginBottom:`4px`},children:e.file.name}),(0,$.jsxs)(`div`,{style:{fontSize:`13px`,color:`#6b7280`},children:[(e.file.size/1024).toFixed(1),` KB`]})]}),(0,$.jsx)(`button`,{onClick:()=>g(t),style:{padding:`6px 12px`,fontSize:`13px`,background:`transparent`,border:`1px solid #e5e7eb`,borderRadius:`6px`,cursor:`pointer`,color:`#6b7280`},children:`Remove`})]}),e.analyzing&&(0,$.jsx)(`div`,{style:{padding:`12px`,background:`#f0fdf4`,borderRadius:`8px`,fontSize:`14px`},children:`Analyzing with AI...`}),e.error&&(0,$.jsx)(`div`,{style:{padding:`12px`,background:`#fef2f2`,border:`1px solid #fca5a5`,borderRadius:`8px`,fontSize:`14px`,color:`#dc2626`},children:e.error}),e.analysis&&(0,$.jsxs)(`div`,{style:{padding:`16px`,background:`#f8fafc`,borderRadius:`8px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,marginBottom:`12px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,fontWeight:600,color:`#6b7280`,marginBottom:`4px`},children:`RECOMMENDATION`}),(0,$.jsxs)(`div`,{className:`badge badge-${e.analysis.recommendation===`INVEST`?`completed`:e.analysis.recommendation===`PASS`?``:`processing`}`,style:{fontSize:`16px`,padding:`6px 12px`},children:[e.analysis.emoji||``,` `,e.analysis.recommendation]})]}),(0,$.jsxs)(`div`,{style:{textAlign:`right`},children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,fontWeight:600,color:`#6b7280`,marginBottom:`4px`},children:`RISK SCORE`}),(0,$.jsxs)(`div`,{style:{fontSize:`24px`,fontWeight:700,color:e.analysis.riskScore>=70?`#ef4444`:e.analysis.riskScore>=40?`#f59e0b`:`#10b981`},children:[e.analysis.riskScore||0,`/100`]})]})]}),e.analysis.summary&&(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`#4b5563`,lineHeight:1.5},children:e.analysis.summary})]})]},t))]}),y&&(0,$.jsxs)(`div`,{style:{padding:`20px`,background:`#f0fdf4`,border:`2px solid #86efac`,borderRadius:`12px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`16px`,fontWeight:600,marginBottom:`12px`},children:`Sweet Spot Identified`}),(0,$.jsx)(`p`,{style:{fontSize:`14px`,color:`#374151`,marginBottom:`12px`,lineHeight:1.5},children:`Based on your uploaded deals and criteria, TitleApp will help you:`}),(0,$.jsxs)(`ul`,{style:{margin:0,paddingLeft:`20px`,fontSize:`14px`,color:`#374151`},children:[(0,$.jsx)(`li`,{children:`Screen incoming deals against your target box`}),(0,$.jsx)(`li`,{children:`Identify red flags and missing information`}),(0,$.jsx)(`li`,{children:`Suggest risk-scaled deal structures`}),(0,$.jsx)(`li`,{children:`Track your pipeline and decision history`})]})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`12px`,justifyContent:`space-between`},children:[(0,$.jsx)(`button`,{onClick:n,style:{padding:`12px 24px`,fontSize:`15px`,background:`transparent`,border:`1px solid #e5e7eb`,borderRadius:`8px`,cursor:`pointer`,color:`#6b7280`},children:`Skip for Now`}),(0,$.jsx)(`button`,{onClick:t,disabled:!v,style:{padding:`12px 32px`,fontSize:`15px`,fontWeight:600,background:v?`rgb(124, 58, 237)`:`#9ca3af`,color:`white`,border:`none`,borderRadius:`8px`,cursor:v?`pointer`:`not-allowed`},children:r.length===0?`Continue Without Samples`:`Complete Setup `})]})]})}var Dg=[{type:`customer_list`,label:`Customer Database`,description:`Customer contact info, purchase history, preferences`,icon:``,required:!0},{type:`dealer_inventory`,label:`Current Inventory`,description:`VINs, models, prices, stock numbers`,icon:``,required:!0},{type:`service_schedule`,label:`Service Appointments`,description:`Scheduled services, maintenance history`,icon:``,required:!1},{type:`financial_products`,label:`Financing Options`,description:`Available loan products, rates, terms`,icon:``,required:!1},{type:`warranty_products`,label:`Warranty Products`,description:`Extended warranties, service contracts`,icon:``,required:!1}];function Og({onComplete:e,onSkip:t}){let[n,r]=(0,_.useState)(Dg.map(e=>({type:e.type,file:null,uploaded:!1,uploading:!1,error:null})));function i(e,t){r(n=>n.map(n=>n.type===e?{...n,file:t,uploaded:!1,error:null}:n))}async function a(e){let t=n.find(t=>t.type===e);if(t?.file){r(t=>t.map(t=>t.type===e?{...t,uploading:!0,error:null}:t));try{let n=localStorage.getItem(`ID_TOKEN`),i=`auto`,a=localStorage.getItem(`JURISDICTION`)||`IL`,o=`https://titleapp-frontdoor.titleapp-core.workers.dev`,s=await fetch(`${o}/api?path=/v1/files:sign`,{method:`POST`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${n}`,"X-Vertical":i,"X-Jurisdiction":a},body:JSON.stringify({filename:t.file.name,contentType:t.file.type||`application/vnd.openxmlformats-officedocument.spreadsheetml.sheet`,sizeBytes:t.file.size,purpose:e})}),c=await s.json();if(!s.ok||!c.ok)throw Error(c.error||`Failed to get upload URL`);if(!(await fetch(c.uploadUrl,{method:`PUT`,headers:{"Content-Type":t.file.type||`application/vnd.openxmlformats-officedocument.spreadsheetml.sheet`},body:t.file})).ok)throw Error(`Upload failed`);await fetch(`${o}/api?path=/v1/files:finalize`,{method:`POST`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${n}`,"X-Vertical":i,"X-Jurisdiction":a},body:JSON.stringify({fileId:c.fileId,storagePath:c.storagePath,contentType:t.file.type||`application/vnd.openxmlformats-officedocument.spreadsheetml.sheet`,sizeBytes:t.file.size})}),r(t=>t.map(t=>t.type===e?{...t,uploading:!1,uploaded:!0}:t))}catch(t){r(n=>n.map(n=>n.type===e?{...n,uploading:!1,error:t.message||`Upload failed`}:n))}}}let o=Dg.filter(e=>e.required).every(e=>n.find(t=>t.type===e.type)?.uploaded),s=n.some(e=>e.uploaded);return(0,$.jsxs)(`div`,{style:{display:`grid`,gap:`24px`,maxWidth:`800px`,margin:`0 auto`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h2`,{style:{margin:`0 0 8px 0`,fontSize:`24px`,fontWeight:700},children:`Upload Your Dealership Data`}),(0,$.jsx)(`p`,{style:{margin:0,color:`#6b7280`,fontSize:`15px`,lineHeight:1.5},children:`To help you sell more effectively, we need some basic data about your business. Upload Excel files (.xlsx) for each category below.`})]}),(0,$.jsxs)(`div`,{style:{padding:`16px 20px`,background:`#fef3c7`,border:`1px solid #fbbf24`,borderRadius:`12px`,fontSize:`14px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`4px`},children:`Minimum Viable Data`}),(0,$.jsx)(`div`,{style:{color:`#92400e`},children:`Customer database and inventory are required. The more data you provide, the more AI can help you sell.`})]}),(0,$.jsx)(`div`,{style:{display:`grid`,gap:`16px`},children:Dg.map(e=>{let t=n.find(t=>t.type===e.type),r=t?.file!==null;return(0,$.jsxs)(`div`,{style:{padding:`20px`,background:`white`,border:t?.uploaded?`2px solid #10b981`:e.required?`2px solid #e5e7eb`:`1px solid #e5e7eb`,borderRadius:`12px`,position:`relative`},children:[e.required&&!t?.uploaded&&(0,$.jsx)(`div`,{style:{position:`absolute`,top:`12px`,right:`12px`,padding:`4px 8px`,background:`#fef2f2`,border:`1px solid #fca5a5`,borderRadius:`6px`,fontSize:`11px`,fontWeight:600,color:`#dc2626`},children:`REQUIRED`}),t?.uploaded&&(0,$.jsx)(`div`,{style:{position:`absolute`,top:`12px`,right:`12px`,padding:`4px 8px`,background:`#f0fdf4`,border:`1px solid #86efac`,borderRadius:`6px`,fontSize:`11px`,fontWeight:600,color:`#10b981`},children:` UPLOADED`}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`16px`,alignItems:`start`},children:[(0,$.jsx)(`div`,{style:{fontSize:`32px`},children:e.icon}),(0,$.jsxs)(`div`,{style:{flex:1},children:[(0,$.jsx)(`div`,{style:{fontSize:`16px`,fontWeight:600,marginBottom:`4px`},children:e.label}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`#6b7280`,marginBottom:`12px`},children:e.description}),r&&(0,$.jsxs)(`div`,{style:{marginBottom:`12px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#374151`,marginBottom:`4px`},children:t.file?.name}),(0,$.jsxs)(`div`,{style:{fontSize:`12px`,color:`#9ca3af`},children:[t.file?(t.file.size/1024).toFixed(1):0,` KB`]})]}),t?.error&&(0,$.jsx)(`div`,{style:{padding:`8px 12px`,background:`#fef2f2`,border:`1px solid #fca5a5`,borderRadius:`6px`,fontSize:`13px`,color:`#dc2626`,marginBottom:`12px`},children:t.error}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`},children:[(0,$.jsx)(`input`,{type:`file`,accept:`.xlsx,.xls,.csv`,onChange:t=>{let n=t.target.files?.[0];n&&i(e.type,n)},style:{display:`none`},id:`file-${e.type}`,disabled:t?.uploaded}),(0,$.jsx)(`label`,{htmlFor:`file-${e.type}`,style:{display:`inline-block`,padding:`8px 16px`,fontSize:`14px`,fontWeight:500,background:t?.uploaded?`#f3f4f6`:`white`,border:`1px solid #d1d5db`,borderRadius:`6px`,cursor:t?.uploaded?`not-allowed`:`pointer`,color:t?.uploaded?`#9ca3af`:`#374151`},children:`Choose File`}),r&&!t?.uploaded&&(0,$.jsx)(`button`,{onClick:()=>a(e.type),disabled:t?.uploading,style:{padding:`8px 16px`,fontSize:`14px`,fontWeight:500,background:t?.uploading?`#9ca3af`:`rgb(124, 58, 237)`,color:`white`,border:`none`,borderRadius:`6px`,cursor:t?.uploading?`not-allowed`:`pointer`},children:t?.uploading?`Uploading...`:`Upload`})]})]})]})]},e.type)})}),s&&(0,$.jsxs)(`div`,{style:{padding:`16px 20px`,background:`#f0fdf4`,border:`2px solid #86efac`,borderRadius:`12px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`15px`,fontWeight:600,marginBottom:`8px`},children:`Your data is being processed`}),(0,$.jsx)(`p`,{style:{fontSize:`14px`,color:`#374151`,margin:0},children:`TitleApp AI will analyze your data and start helping you match customers to vehicles, suggest optimal pricing, and identify sales opportunities.`})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`12px`,justifyContent:`space-between`},children:[(0,$.jsx)(`button`,{onClick:t,style:{padding:`12px 24px`,fontSize:`15px`,background:`transparent`,border:`1px solid #e5e7eb`,borderRadius:`8px`,cursor:`pointer`,color:`#6b7280`},children:`Skip for Now`}),(0,$.jsx)(`button`,{onClick:e,disabled:!o&&!s,style:{padding:`12px 32px`,fontSize:`15px`,fontWeight:600,background:o||s?`rgb(124, 58, 237)`:`#9ca3af`,color:`white`,border:`none`,borderRadius:`8px`,cursor:o||s?`pointer`:`not-allowed`},children:`Complete Setup `})]})]})}function kg({onComplete:e,onSkip:t}){let[n,r]=(0,_.useState)([]),[i,a]=(0,_.useState)([]),[o,s]=(0,_.useState)(!1),[c,l]=(0,_.useState)(!1),[u,d]=(0,_.useState)({}),f=Tg({purpose:`real_estate_data`});async function p(e){let t=Array.from(e.target.files||[]);r([...n,...t]);for(let e of t)await m(e)}async function m(e){s(!0);try{let t=await h(e);a(e=>[...e,t])}catch(e){console.error(`Parse error:`,e)}finally{s(!1)}}async function h(e){await new Promise(e=>setTimeout(e,1e3));let t=e.name.toLowerCase(),n=`brokerage`,r=[],i=[];return t.includes(`summit`)||t.includes(`buyers_sellers`)?(n=`brokerage`,r=[{name:`Buyer Prospects`,detectedType:`buyer_prospects`,rowCount:75,headers:[`Name`,`Budget Min`,`Budget Max`,`Neighborhoods`,`Must-Haves`,`Status`],confidence:.95,sample:[]},{name:`Seller Pipeline`,detectedType:`seller_pipeline`,rowCount:50,headers:[`Address`,`List Price`,`Zillow URL`,`Days on Market`,`Offers`,`Status`],confidence:.92,sample:[]},{name:`Transactions`,detectedType:`transactions`,rowCount:60,headers:[`Date`,`Address`,`Sale Price`,`Commission`,`Agent`,`Status`],confidence:.98,sample:[]},{name:`Agent Roster`,detectedType:`agent_roster`,rowCount:6,headers:[`Name`,`License #`,`Specialization`,`YTD Volume`,`Commission Split`],confidence:.99,sample:[]},{name:`Platform Integrations`,detectedType:`platform_integrations`,rowCount:14,headers:[`Platform`,`Type`,`Account`,`Status`,`API Key Needed`],confidence:1,sample:[]}],i=[`Zillow`,`Redfin`,`MLS`,`DocuSign`,`CRM`,`QuickBooks`,`Matterport`,`ShowingTime`]):t.includes(`pm_operations`)?(n=`property_management`,r=[{name:`Tenant Roster`,detectedType:`tenant_roster`,rowCount:100,headers:[`Unit`,`Tenant Name`,`Lease Start`,`Rent Amount`,`Deposit`,`Status`],confidence:.97,sample:[]},{name:`Rent Roll`,detectedType:`rent_roll`,rowCount:100,headers:[`Unit`,`Rent`,`Fees`,`Total Due`,`Paid`,`Balance`,`Payment Method`],confidence:.96,sample:[]},{name:`Maintenance Orders`,detectedType:`maintenance`,rowCount:120,headers:[`Date`,`Unit`,`Category`,`Priority`,`Technician`,`Cost`,`Status`],confidence:.94,sample:[]},{name:`Inspections`,detectedType:`inspections`,rowCount:60,headers:[`Date`,`Unit`,`Type`,`Rating`,`Issues`,`Action Items`],confidence:.93,sample:[]},{name:`Platform Integrations`,detectedType:`platform_integrations`,rowCount:21,headers:[`Platform`,`Type`,`Purpose`,`Status`,`Credentials Needed`],confidence:1,sample:[]}],i=[`AppFolio`,`Guesty`,`Airbnb`,`VRBO`,`Booking.com`,`PriceLabs`,`Latchel`,`Properly`,`QuickBooks`,`Xero`]):t.includes(`str_portfolio`)&&(n=`str_portfolio`,r=[{name:`Portfolio Summary`,detectedType:`str_portfolio`,rowCount:12,headers:[`Property`,`Location`,`Purchase Price`,`Monthly Revenue`,`Occupancy`,`ROI`],confidence:.98,sample:[]},...Array.from({length:12},(e,t)=>({name:`STR-${String(t+1).padStart(2,`0`)}`,detectedType:`str_property_detail`,rowCount:25,headers:[`Date`,`Guest`,`Nightly Rate`,`Nights`,`Revenue`,`Platform`,`Status`],confidence:.95,sample:[]}))],i=[`Airbnb`,`VRBO`,`Booking.com`,`Guesty`,`PriceLabs`,`Properly`]),{filename:e.name,sheets:r,detectedProfile:n,platformIntegrations:i}}async function g(){l(!0);try{for(let e of n){d(t=>({...t,[e.name]:`uploading`}));let t=await f.uploadFile(e);d(n=>({...n,[e.name]:t?`done`:`error`}))}e()}catch(e){console.error(`Import error:`,e)}finally{l(!1)}}let v=i.reduce((e,t)=>e+t.sheets.length,0),y=i.reduce((e,t)=>e+t.sheets.reduce((e,t)=>e+t.rowCount,0),0);return(0,$.jsxs)(`div`,{style:{display:`grid`,gap:`24px`,maxWidth:`900px`,margin:`0 auto`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h2`,{style:{margin:`0 0 8px 0`,fontSize:`24px`,fontWeight:700},children:`Upload Your Real Estate Data`}),(0,$.jsx)(`p`,{style:{margin:0,color:`#6b7280`,fontSize:`15px`,lineHeight:1.5},children:`Upload your Excel files containing client data, listings, tenants, or property portfolios. We'll automatically detect the data type and map it to our system.`})]}),(0,$.jsxs)(`div`,{style:{padding:`32px`,border:`2px dashed #d1d5db`,borderRadius:`12px`,textAlign:`center`,background:`#f9fafb`},children:[(0,$.jsx)(`div`,{style:{fontSize:`24px`,fontWeight:600,color:`#64748b`,marginBottom:`16px`},children:`Data Upload`}),(0,$.jsx)(`p`,{style:{fontSize:`16px`,fontWeight:600,marginBottom:`8px`},children:`Upload Real Estate Data Files`}),(0,$.jsx)(`p`,{style:{fontSize:`14px`,color:`#6b7280`,marginBottom:`20px`},children:`CRM exports, tenant rosters, transaction history, property portfolios`}),(0,$.jsx)(`input`,{type:`file`,accept:`.xlsx,.xls,.csv`,multiple:!0,onChange:p,style:{display:`none`},id:`re-file-upload`}),(0,$.jsx)(`label`,{htmlFor:`re-file-upload`,style:{display:`inline-block`,padding:`12px 24px`,background:`rgb(124, 58, 237)`,color:`white`,borderRadius:`8px`,cursor:`pointer`,fontSize:`15px`,fontWeight:600},children:`Choose Files`})]}),o&&(0,$.jsx)(`div`,{style:{padding:`16px`,background:`#f0fdf4`,borderRadius:`12px`,textAlign:`center`},children:`Analyzing file structure and detecting data types...`}),i.length>0&&(0,$.jsxs)(`div`,{style:{display:`grid`,gap:`16px`},children:[(0,$.jsxs)(`div`,{style:{fontSize:`18px`,fontWeight:600},children:[`Detected Data (`,v,` sheets, `,y.toLocaleString(),` records)`]}),i.map((e,t)=>(0,$.jsxs)(`div`,{style:{padding:`20px`,background:`white`,border:`2px solid #e5e7eb`,borderRadius:`12px`},children:[(0,$.jsxs)(`div`,{style:{marginBottom:`16px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`16px`,fontWeight:600,marginBottom:`4px`},children:e.filename}),(0,$.jsxs)(`div`,{style:{fontSize:`14px`,color:`#6b7280`},children:[`Profile: `,e.detectedProfile.replace(/_/g,` `).toUpperCase()]})]}),(0,$.jsx)(`div`,{style:{display:`grid`,gap:`8px`,marginBottom:`16px`},children:e.sheets.map((e,t)=>(0,$.jsxs)(`div`,{style:{padding:`12px`,background:`#f9fafb`,borderRadius:`8px`,display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:e.name}),(0,$.jsxs)(`div`,{style:{fontSize:`13px`,color:`#6b7280`},children:[e.detectedType.replace(/_/g,` `),`  `,e.rowCount,` rows  `,Math.round(e.confidence*100),`% confidence`]})]}),(0,$.jsx)(`div`,{style:{fontSize:`20px`},children:``})]},t))}),e.platformIntegrations.length>0&&(0,$.jsxs)(`div`,{style:{padding:`12px 16px`,background:`#fef3c7`,border:`1px solid #fbbf24`,borderRadius:`8px`},children:[(0,$.jsxs)(`div`,{style:{fontSize:`13px`,fontWeight:600,marginBottom:`8px`},children:[`Platform Integrations Detected (`,e.platformIntegrations.length,`)`]}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#92400e`,display:`flex`,flexWrap:`wrap`,gap:`6px`},children:e.platformIntegrations.map((e,t)=>(0,$.jsx)(`span`,{style:{padding:`4px 8px`,background:`white`,borderRadius:`4px`,fontSize:`12px`},children:e},t))}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#92400e`,marginTop:`8px`},children:`You'll need to provide API keys/credentials for these platforms after onboarding`})]})]},t))]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`12px`,justifyContent:`space-between`},children:[(0,$.jsx)(`button`,{onClick:t,style:{padding:`12px 24px`,fontSize:`15px`,background:`transparent`,border:`1px solid #e5e7eb`,borderRadius:`8px`,cursor:`pointer`,color:`#6b7280`},children:`Skip for Now`}),(0,$.jsx)(`button`,{onClick:g,disabled:i.length===0||c,style:{padding:`12px 32px`,fontSize:`15px`,fontWeight:600,background:i.length>0&&!c?`rgb(124, 58, 237)`:`#9ca3af`,color:`white`,border:`none`,borderRadius:`8px`,cursor:i.length>0&&!c?`pointer`:`not-allowed`},children:c?`Importing...`:`Import ${y.toLocaleString()} Records `})]})]})}function Ag({onAccept:e,onDecline:t}){let[n,r]=(0,_.useState)(!1),[i,a]=(0,_.useState)(!1);function o(e){let t=e.currentTarget;t.scrollHeight-t.scrollTop<=t.clientHeight+50&&a(!0)}return(0,$.jsx)(`div`,{style:{display:`flex`,alignItems:`flex-start`,justifyContent:`center`,padding:`40px 20px`,minHeight:`100%`},children:(0,$.jsxs)(`div`,{style:{width:`100%`,maxWidth:`640px`,background:`white`,borderRadius:`16px`,border:`1px solid #e5e7eb`,boxShadow:`0 10px 24px rgba(15, 23, 42, 0.08)`,overflow:`hidden`},children:[(0,$.jsxs)(`div`,{style:{padding:`32px 32px 0`},children:[(0,$.jsx)(`h2`,{style:{margin:`0 0 8px 0`,fontSize:`22px`,fontWeight:700},children:`Terms of Service`}),(0,$.jsx)(`p`,{style:{margin:`0 0 20px 0`,color:`#6b7280`,fontSize:`14px`},children:`Please read and accept before continuing`})]}),(0,$.jsxs)(`div`,{onScroll:o,style:{maxHeight:`340px`,overflowY:`auto`,margin:`0 32px`,padding:`20px`,background:`#f9fafb`,border:`1px solid #e5e7eb`,borderRadius:`8px`,fontSize:`13px`,lineHeight:`1.6`},children:[(0,$.jsx)(`h3`,{style:{fontSize:`14px`,fontWeight:700,marginTop:0},children:`1. NO FINANCIAL, LEGAL, OR PROFESSIONAL ADVICE`}),(0,$.jsx)(`p`,{children:`TitleApp AI is a software tool only. It does NOT provide financial, investment, legal, tax, accounting, or any other professional advice. All AI-generated analyses are for informational purposes only.`}),(0,$.jsx)(`p`,{children:`You acknowledge that:`}),(0,$.jsxs)(`ul`,{children:[(0,$.jsx)(`li`,{children:`AI analysis may be incomplete, inaccurate, or misleading`}),(0,$.jsx)(`li`,{children:`Investment decisions are YOUR responsibility alone`}),(0,$.jsx)(`li`,{children:`You will consult licensed professionals before making decisions`}),(0,$.jsx)(`li`,{children:`No professional relationship is created`})]}),(0,$.jsx)(`h3`,{style:{fontSize:`14px`,fontWeight:700},children:`2. RELEASE OF LIABILITY`}),(0,$.jsx)(`p`,{children:`TO THE MAXIMUM EXTENT PERMITTED BY LAW, YOU RELEASE AND HOLD HARMLESS TitleApp AI from ANY AND ALL claims, damages, losses, or expenses arising from your use of the platform, including investment losses, data errors, third-party integrations, and service interruptions.`}),(0,$.jsx)(`h3`,{style:{fontSize:`14px`,fontWeight:700},children:`3. NO WARRANTY`}),(0,$.jsx)(`p`,{children:`THE PLATFORM IS PROVIDED "AS IS" WITHOUT ANY WARRANTIES OF ANY KIND. We do not warrant that the service will be uninterrupted, accurate, or error-free.`}),(0,$.jsx)(`h3`,{style:{fontSize:`14px`,fontWeight:700},children:`4. USER RESPONSIBILITY`}),(0,$.jsx)(`p`,{children:`You are solely responsible for all decisions made using this platform, verifying all data independently, compliance with applicable laws, and securing your credentials.`}),(0,$.jsx)(`h3`,{style:{fontSize:`14px`,fontWeight:700},children:`5. LIMITATION OF LIABILITY`}),(0,$.jsx)(`p`,{children:`Our total liability shall not exceed the amount you paid us in the past 12 months, or $100, whichever is less. We shall not be liable for indirect, incidental, special, or consequential damages.`}),(0,$.jsx)(`h3`,{style:{fontSize:`14px`,fontWeight:700},children:`6. INDUSTRY DISCLAIMERS`}),(0,$.jsxs)(`p`,{children:[(0,$.jsx)(`strong`,{children:`Investors:`}),` We are NOT registered broker-dealers or investment advisors. Deal analysis is NOT investment advice.`]}),(0,$.jsxs)(`p`,{children:[(0,$.jsx)(`strong`,{children:`Pilots:`}),` This platform is NOT certified for flight operations. Maintain official FAA logbooks separately.`]}),(0,$.jsx)(`h3`,{style:{fontSize:`14px`,fontWeight:700},children:`7. GOVERNING LAW`}),(0,$.jsx)(`p`,{children:`Governed by Delaware law. Disputes resolved through binding arbitration. Class action waiver applies.`}),(0,$.jsx)(`p`,{style:{marginTop:`16px`,fontStyle:`italic`,color:`#6b7280`,fontSize:`12px`},children:`Last Updated: February 15, 2026`})]}),(0,$.jsxs)(`div`,{style:{padding:`20px 32px 32px`},children:[!i&&(0,$.jsx)(`div`,{style:{padding:`10px 14px`,background:`#fef3c7`,border:`1px solid #fbbf24`,borderRadius:`6px`,fontSize:`13px`,marginBottom:`16px`,color:`#92400e`},children:`Please scroll to the bottom to read all terms`}),(0,$.jsxs)(`label`,{style:{display:`flex`,alignItems:`center`,gap:`12px`,padding:`14px`,background:i?`#f0fdf4`:`#f9fafb`,border:i?`2px solid #86efac`:`1px solid #e5e7eb`,borderRadius:`8px`,marginBottom:`16px`,cursor:i?`pointer`:`not-allowed`,opacity:i?1:.5},children:[(0,$.jsx)(`input`,{type:`checkbox`,checked:n,onChange:e=>r(e.target.checked),disabled:!i,style:{width:`18px`,height:`18px`,cursor:i?`pointer`:`not-allowed`}}),(0,$.jsxs)(`div`,{style:{fontSize:`14px`},children:[(0,$.jsx)(`strong`,{children:`I have read and agree to the Terms of Service.`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#6b7280`,marginTop:`2px`},children:`I am solely responsible for all decisions made using this platform.`})]})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`12px`},children:[(0,$.jsx)(`button`,{onClick:e,disabled:!n,style:{flex:1,padding:`12px`,fontSize:`15px`,fontWeight:600,background:n?`rgb(124,58,237)`:`#9ca3af`,color:`white`,border:`none`,borderRadius:`8px`,cursor:n?`pointer`:`not-allowed`},children:`I Agree - Continue`}),(0,$.jsx)(`button`,{onClick:t,style:{padding:`12px 20px`,fontSize:`15px`,background:`white`,color:`#6b7280`,border:`1px solid #e5e7eb`,borderRadius:`8px`,cursor:`pointer`},children:`Decline`})]})]})]})})}function jg({onComplete:e,onSkip:t}){let[n,r]=(0,_.useState)(!1),[i,a]=(0,_.useState)(!1);async function o(){r(!0);try{await new Promise(e=>setTimeout(e,2e3));let t=localStorage.getItem(`ID_TOKEN`);await fetch(`https://titleapp-frontdoor.titleapp-core.workers.dev/api?path=/v1/me:update`,{method:`POST`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${t}`},body:JSON.stringify({idVerified:!0,idVerifiedAt:new Date().toISOString()})}),a(!0),setTimeout(()=>e(),1200)}catch(e){console.error(`ID verification failed:`,e),r(!1)}}return(0,$.jsx)(`div`,{style:{display:`flex`,alignItems:`flex-start`,justifyContent:`center`,padding:`40px 20px`,minHeight:`100%`},children:(0,$.jsx)(`div`,{style:{width:`100%`,maxWidth:`480px`,padding:`40px`,background:`white`,borderRadius:`16px`,border:`1px solid #e5e7eb`,boxShadow:`0 10px 24px rgba(15, 23, 42, 0.08)`,textAlign:`center`},children:i?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{style:{fontSize:`48px`,marginBottom:`16px`},children:``}),(0,$.jsx)(`h2`,{style:{margin:`0 0 8px 0`,fontSize:`24px`,fontWeight:700},children:`Identity Verified`}),(0,$.jsx)(`p`,{style:{margin:0,color:`#6b7280`,fontSize:`15px`},children:`Setting up your account...`})]}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{style:{width:`64px`,height:`64px`,borderRadius:`16px`,background:`rgba(124, 58, 237, 0.1)`,display:`flex`,alignItems:`center`,justifyContent:`center`,margin:`0 auto 24px`,fontSize:`28px`},children:`ID`}),(0,$.jsx)(`h2`,{style:{margin:`0 0 8px 0`,fontSize:`24px`,fontWeight:700},children:`Verify Your Identity`}),(0,$.jsx)(`p`,{style:{margin:`0 0 24px 0`,color:`#6b7280`,fontSize:`15px`,lineHeight:1.5},children:`A quick identity check helps protect your records and enables publishing. It costs $2 and takes about a minute. Valid for one year.`}),(0,$.jsxs)(`div`,{style:{display:`grid`,gap:`12px`},children:[(0,$.jsx)(`button`,{onClick:o,disabled:n,style:{padding:`14px`,fontSize:`15px`,fontWeight:600,background:n?`#9ca3af`:`rgb(124, 58, 237)`,color:`white`,border:`none`,borderRadius:`8px`,cursor:n?`not-allowed`:`pointer`},children:n?`Verifying...`:`Verify Now`}),(0,$.jsx)(`button`,{onClick:t,disabled:n,style:{padding:`14px`,fontSize:`15px`,background:`transparent`,border:`1px solid #e5e7eb`,borderRadius:`8px`,cursor:n?`not-allowed`:`pointer`,color:`#6b7280`},children:`I'll do it later`})]})]})})})}var Mg=[`Single Family`,`Multi-Family`,`Apartment Complex`,`Condo / Townhome`,`Commercial`,`Mixed Use`];function Ng({onComplete:e,onSkip:t}){let[n,r]=(0,_.useState)(`portfolio`),[i,a]=(0,_.useState)(``),[o,s]=(0,_.useState)([]),[c,l]=(0,_.useState)(``),[u,d]=(0,_.useState)(`Multi-Family`),[f,p]=(0,_.useState)(``),[m,h]=(0,_.useState)(``),g=Tg({purpose:`property_deed`}),v=Tg({purpose:`property_insurance`}),y=Tg({purpose:`property_leases`});function b(e){s(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])}async function x(e,t){await e.uploadFile(t)}if(n===`portfolio`)return(0,$.jsxs)(`div`,{style:{display:`grid`,gap:`24px`,maxWidth:`600px`,margin:`0 auto`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h2`,{style:{margin:`0 0 8px 0`,fontSize:`24px`,fontWeight:700},children:`Portfolio Basics`}),(0,$.jsx)(`p`,{style:{margin:0,color:`#6b7280`,fontSize:`15px`},children:`Tell us about your property management portfolio.`})]}),(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`How many properties do you manage?`}),(0,$.jsx)(`input`,{type:`number`,value:i,onChange:e=>a(e.target.value),placeholder:`e.g. 12`,style:{padding:`12px 16px`,fontSize:`15px`,border:`1px solid #e5e7eb`,borderRadius:`8px`}})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600,marginBottom:`8px`},children:`Property types (select all that apply)`}),(0,$.jsx)(`div`,{style:{display:`flex`,flexWrap:`wrap`,gap:`8px`},children:Mg.map(e=>(0,$.jsx)(`button`,{onClick:()=>b(e),style:{padding:`8px 16px`,fontSize:`14px`,borderRadius:`8px`,border:o.includes(e)?`2px solid rgb(124,58,237)`:`1px solid #e5e7eb`,background:o.includes(e)?`rgba(124,58,237,0.08)`:`white`,cursor:`pointer`,fontWeight:o.includes(e)?600:400},children:e},e))})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`12px`,justifyContent:`space-between`},children:[(0,$.jsx)(`button`,{onClick:t,style:{padding:`12px 24px`,fontSize:`15px`,background:`transparent`,border:`1px solid #e5e7eb`,borderRadius:`8px`,cursor:`pointer`,color:`#6b7280`},children:`Skip`}),(0,$.jsx)(`button`,{onClick:()=>r(`firstProperty`),disabled:!i,style:{padding:`12px 32px`,fontSize:`15px`,fontWeight:600,background:i?`rgb(124,58,237)`:`#9ca3af`,color:`white`,border:`none`,borderRadius:`8px`,cursor:i?`pointer`:`not-allowed`},children:`Next: First Property`})]})]});if(n===`firstProperty`)return(0,$.jsxs)(`div`,{style:{display:`grid`,gap:`24px`,maxWidth:`600px`,margin:`0 auto`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h2`,{style:{margin:`0 0 8px 0`,fontSize:`24px`,fontWeight:700},children:`First Property`}),(0,$.jsx)(`p`,{style:{margin:0,color:`#6b7280`,fontSize:`15px`},children:`Add one property to get started. You can add more later.`})]}),(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`Property Address`}),(0,$.jsx)(`input`,{type:`text`,value:c,onChange:e=>l(e.target.value),placeholder:`123 Main St, Chicago, IL`,style:{padding:`12px 16px`,fontSize:`15px`,border:`1px solid #e5e7eb`,borderRadius:`8px`}})]}),(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`Property Type`}),(0,$.jsx)(`select`,{value:u,onChange:e=>d(e.target.value),style:{padding:`12px 16px`,fontSize:`15px`,border:`1px solid #e5e7eb`,borderRadius:`8px`,background:`white`},children:Mg.map(e=>(0,$.jsx)(`option`,{value:e,children:e},e))})]}),(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`Unit Count`}),(0,$.jsx)(`input`,{type:`number`,value:f,onChange:e=>p(e.target.value),placeholder:`e.g. 24`,style:{padding:`12px 16px`,fontSize:`15px`,border:`1px solid #e5e7eb`,borderRadius:`8px`}})]}),(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`Ownership Entity`}),(0,$.jsx)(`input`,{type:`text`,value:m,onChange:e=>h(e.target.value),placeholder:`e.g. Acme Properties LLC`,style:{padding:`12px 16px`,fontSize:`15px`,border:`1px solid #e5e7eb`,borderRadius:`8px`}})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`12px`,justifyContent:`space-between`},children:[(0,$.jsx)(`button`,{onClick:()=>r(`portfolio`),style:{padding:`12px 24px`,fontSize:`15px`,background:`transparent`,border:`1px solid #e5e7eb`,borderRadius:`8px`,cursor:`pointer`,color:`#6b7280`},children:`Back`}),(0,$.jsx)(`button`,{onClick:()=>r(`docs`),disabled:!c,style:{padding:`12px 32px`,fontSize:`15px`,fontWeight:600,background:c?`rgb(124,58,237)`:`#9ca3af`,color:`white`,border:`none`,borderRadius:`8px`,cursor:c?`pointer`:`not-allowed`},children:`Next: Documents`})]})]});let S=[{label:`Deed / Title`,upload:g,accept:`.pdf,.jpg,.png`},{label:`Insurance Policy`,upload:v,accept:`.pdf`},{label:`Lease Templates`,upload:y,accept:`.pdf,.docx`}],C=S.some(e=>e.upload.uploaded);return(0,$.jsxs)(`div`,{style:{display:`grid`,gap:`24px`,maxWidth:`600px`,margin:`0 auto`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h2`,{style:{margin:`0 0 8px 0`,fontSize:`24px`,fontWeight:700},children:`Property Documents`}),(0,$.jsx)(`p`,{style:{margin:0,color:`#6b7280`,fontSize:`15px`},children:`Upload key documents for your first property. You can add more later.`})]}),S.map(e=>(0,$.jsxs)(`div`,{style:{padding:`16px`,background:`white`,border:e.upload.uploaded?`2px solid #10b981`:`1px solid #e5e7eb`,borderRadius:`12px`,display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:`15px`,fontWeight:600},children:e.label}),e.upload.uploaded&&(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#10b981`,marginTop:`4px`},children:`Uploaded`}),e.upload.error&&(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#dc2626`,marginTop:`4px`},children:e.upload.error})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`input`,{type:`file`,accept:e.accept,onChange:t=>{let n=t.target.files?.[0];n&&x(e.upload,n)},style:{display:`none`},id:`doc-${e.label}`,disabled:e.upload.uploaded||e.upload.uploading}),(0,$.jsx)(`label`,{htmlFor:`doc-${e.label}`,style:{display:`inline-block`,padding:`8px 16px`,fontSize:`14px`,background:e.upload.uploading?`#9ca3af`:`white`,border:`1px solid #d1d5db`,borderRadius:`6px`,cursor:e.upload.uploaded?`not-allowed`:`pointer`,color:e.upload.uploaded?`#9ca3af`:`#374151`},children:e.upload.uploading?`Uploading...`:e.upload.uploaded?`Done`:`Choose File`})]})]},e.label)),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`12px`,justifyContent:`space-between`},children:[(0,$.jsx)(`button`,{onClick:()=>r(`firstProperty`),style:{padding:`12px 24px`,fontSize:`15px`,background:`transparent`,border:`1px solid #e5e7eb`,borderRadius:`8px`,cursor:`pointer`,color:`#6b7280`},children:`Back`}),(0,$.jsx)(`button`,{onClick:e,style:{padding:`12px 32px`,fontSize:`15px`,fontWeight:600,background:`rgb(124,58,237)`,color:`white`,border:`none`,borderRadius:`8px`,cursor:`pointer`},children:C?`Complete Setup`:`Skip Documents`})]})]})}function Pg({onComplete:e,onSkip:t}){let[n,r]=(0,_.useState)(`focus`),[i,a]=(0,_.useState)(`residential`),[o,s]=(0,_.useState)(``),[c,l]=(0,_.useState)(``),[u,d]=(0,_.useState)(``),f=Tg({purpose:`listing_agreement`}),p=Tg({purpose:`disclosures`});async function m(e,t){await e.uploadFile(t)}if(n===`focus`)return(0,$.jsxs)(`div`,{style:{display:`grid`,gap:`24px`,maxWidth:`600px`,margin:`0 auto`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h2`,{style:{margin:`0 0 8px 0`,fontSize:`24px`,fontWeight:700},children:`Brokerage Focus`}),(0,$.jsx)(`p`,{style:{margin:0,color:`#6b7280`,fontSize:`15px`},children:`What type of real estate does your brokerage focus on?`})]}),(0,$.jsx)(`div`,{style:{display:`grid`,gap:`8px`},children:[{value:`residential`,label:`Residential`},{value:`commercial`,label:`Commercial`},{value:`land`,label:`Land / Lots`},{value:`mixed`,label:`Mixed (All Types)`}].map(e=>(0,$.jsx)(`button`,{onClick:()=>a(e.value),style:{padding:`16px 20px`,fontSize:`15px`,textAlign:`left`,borderRadius:`12px`,border:i===e.value?`2px solid rgb(124,58,237)`:`1px solid #e5e7eb`,background:i===e.value?`rgba(124,58,237,0.05)`:`white`,cursor:`pointer`,fontWeight:i===e.value?600:400},children:e.label},e.value))}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`12px`,justifyContent:`space-between`},children:[(0,$.jsx)(`button`,{onClick:t,style:{padding:`12px 24px`,fontSize:`15px`,background:`transparent`,border:`1px solid #e5e7eb`,borderRadius:`8px`,cursor:`pointer`,color:`#6b7280`},children:`Skip`}),(0,$.jsx)(`button`,{onClick:()=>r(`firstListing`),style:{padding:`12px 32px`,fontSize:`15px`,fontWeight:600,background:`rgb(124,58,237)`,color:`white`,border:`none`,borderRadius:`8px`,cursor:`pointer`},children:`Next: First Listing`})]})]});if(n===`firstListing`)return(0,$.jsxs)(`div`,{style:{display:`grid`,gap:`24px`,maxWidth:`600px`,margin:`0 auto`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h2`,{style:{margin:`0 0 8px 0`,fontSize:`24px`,fontWeight:700},children:`First Listing`}),(0,$.jsx)(`p`,{style:{margin:0,color:`#6b7280`,fontSize:`15px`},children:`Add a listing to see the platform in action. You can add more later.`})]}),(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`Property Address`}),(0,$.jsx)(`input`,{type:`text`,value:o,onChange:e=>s(e.target.value),placeholder:`456 Oak Ave, Los Angeles, CA`,style:{padding:`12px 16px`,fontSize:`15px`,border:`1px solid #e5e7eb`,borderRadius:`8px`}})]}),(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`List Price`}),(0,$.jsx)(`input`,{type:`text`,value:c,onChange:e=>l(e.target.value),placeholder:`$850,000`,style:{padding:`12px 16px`,fontSize:`15px`,border:`1px solid #e5e7eb`,borderRadius:`8px`}})]}),(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`MLS ID (optional)`}),(0,$.jsx)(`input`,{type:`text`,value:u,onChange:e=>d(e.target.value),placeholder:`MLS-12345`,style:{padding:`12px 16px`,fontSize:`15px`,border:`1px solid #e5e7eb`,borderRadius:`8px`}})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`12px`,justifyContent:`space-between`},children:[(0,$.jsx)(`button`,{onClick:()=>r(`focus`),style:{padding:`12px 24px`,fontSize:`15px`,background:`transparent`,border:`1px solid #e5e7eb`,borderRadius:`8px`,cursor:`pointer`,color:`#6b7280`},children:`Back`}),(0,$.jsx)(`button`,{onClick:()=>r(`docs`),disabled:!o,style:{padding:`12px 32px`,fontSize:`15px`,fontWeight:600,background:o?`rgb(124,58,237)`:`#9ca3af`,color:`white`,border:`none`,borderRadius:`8px`,cursor:o?`pointer`:`not-allowed`},children:`Next: Documents`})]})]});let h=[{label:`Listing Agreement`,upload:f,accept:`.pdf`},{label:`Disclosures`,upload:p,accept:`.pdf`}],g=h.some(e=>e.upload.uploaded);return(0,$.jsxs)(`div`,{style:{display:`grid`,gap:`24px`,maxWidth:`600px`,margin:`0 auto`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h2`,{style:{margin:`0 0 8px 0`,fontSize:`24px`,fontWeight:700},children:`Listing Documents`}),(0,$.jsx)(`p`,{style:{margin:0,color:`#6b7280`,fontSize:`15px`},children:`Upload documents for your first listing.`})]}),h.map(e=>(0,$.jsxs)(`div`,{style:{padding:`16px`,background:`white`,border:e.upload.uploaded?`2px solid #10b981`:`1px solid #e5e7eb`,borderRadius:`12px`,display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:`15px`,fontWeight:600},children:e.label}),e.upload.uploaded&&(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#10b981`,marginTop:`4px`},children:`Uploaded`}),e.upload.error&&(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#dc2626`,marginTop:`4px`},children:e.upload.error})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`input`,{type:`file`,accept:e.accept,onChange:t=>{let n=t.target.files?.[0];n&&m(e.upload,n)},style:{display:`none`},id:`brokerage-doc-${e.label}`,disabled:e.upload.uploaded||e.upload.uploading}),(0,$.jsx)(`label`,{htmlFor:`brokerage-doc-${e.label}`,style:{display:`inline-block`,padding:`8px 16px`,fontSize:`14px`,background:e.upload.uploading?`#9ca3af`:`white`,border:`1px solid #d1d5db`,borderRadius:`6px`,cursor:e.upload.uploaded?`not-allowed`:`pointer`,color:e.upload.uploaded?`#9ca3af`:`#374151`},children:e.upload.uploading?`Uploading...`:e.upload.uploaded?`Done`:`Choose File`})]})]},e.label)),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`12px`,justifyContent:`space-between`},children:[(0,$.jsx)(`button`,{onClick:()=>r(`firstListing`),style:{padding:`12px 24px`,fontSize:`15px`,background:`transparent`,border:`1px solid #e5e7eb`,borderRadius:`8px`,cursor:`pointer`,color:`#6b7280`},children:`Back`}),(0,$.jsx)(`button`,{onClick:e,style:{padding:`12px 32px`,fontSize:`15px`,fontWeight:600,background:`rgb(124,58,237)`,color:`white`,border:`none`,borderRadius:`8px`,cursor:`pointer`},children:g?`Complete Setup`:`Skip Documents`})]})]})}function Fg({onComplete:e,onStepChange:t}){let[n,r]=(0,_.useState)(`checking`);function i(e){r(e),t?.(e)}let[a,o]=(0,_.useState)(``),[s,c]=(0,_.useState)(`auto`),[l,u]=(0,_.useState)(`IL`),[d,f]=(0,_.useState)(null),[p,m]=(0,_.useState)(``),[h,g]=(0,_.useState)(``),[v,y]=(0,_.useState)(``),[b,x]=(0,_.useState)(!1),[S,C]=(0,_.useState)(``);(0,_.useEffect)(()=>{async function e(){try{let e=bg.currentUser;if(!e){i(`terms`);return}let t=await gg(vh(xg,`users`,e.uid));if(t.exists()){let e=t.data();if(e.termsAcceptedAt){e.companyName&&o(e.companyName),i(`details`);return}}i(`terms`)}catch(e){console.error(`Failed to check onboarding progress:`,e),i(`terms`)}}e()},[]);function w(){if(!a.trim()){C(`Please enter your company name`);return}i(`raas`)}function ee(){i(`aiPersona`)}function te(){s===`analyst`?i(`criteria`):s===`auto`?i(`dealerData`):s===`real-estate`?i(`brokerage`):s===`property-mgmt`?i(`propertyMgmt`):T(null)}function ne(e){f(e),i(`sampleDeals`)}async function T(t){x(!0),C(``);try{let n=localStorage.getItem(`ID_TOKEN`),r={tenantName:a,tenantType:`business`,vertical:s,jurisdiction:l};t&&(r.riskProfile=t),p.trim()&&(r.raasRules=p.trim()),(h.trim()||v.trim())&&(r.aiPersona={name:h.trim()||`TitleApp AI Assistant`,title:v.trim()||`AI Assistant`});let o=await fetch(`https://titleapp-frontdoor.titleapp-core.workers.dev/api?path=/v1/onboarding:claimTenant`,{method:`POST`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${n}`},body:JSON.stringify(r)}),c=await o.json();if(!o.ok||!c.ok)throw Error(c.error||`Failed to create account`);localStorage.setItem(`TENANT_ID`,c.tenantId),localStorage.setItem(`VERTICAL`,s),localStorage.setItem(`JURISDICTION`,l),p.trim()&&localStorage.setItem(`RAAS_RULES`,p.trim()),i(`magic`),setTimeout(()=>{e(c.tenantId)},2500)}catch(e){console.error(e),C(e?.message||String(e)),x(!1)}}return n===`checking`?(0,$.jsx)(`div`,{style:{minHeight:`100%`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`#f8fafc`,fontFamily:`-apple-system, BlinkMacSystemFont, sans-serif`},children:(0,$.jsxs)(`div`,{style:{textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:600,color:`#7c3aed`,marginBottom:`16px`},children:`TitleApp`}),(0,$.jsx)(`div`,{style:{fontSize:`16px`,color:`#6b7280`},children:`Loading...`})]})}):n===`terms`?(0,$.jsx)(Ag,{onAccept:()=>i(`welcome`),onDecline:()=>{alert(`You must accept the terms to use TitleApp AI`),window.location.href=`/`}}):n===`aiPersona`?(0,$.jsx)(`div`,{style:{minHeight:`100%`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`#f8fafc`,fontFamily:`-apple-system, BlinkMacSystemFont, sans-serif`,padding:`20px`},children:(0,$.jsxs)(`div`,{style:{width:`100%`,maxWidth:`500px`,padding:`40px`,background:`white`,borderRadius:`16px`,border:`1px solid #e5e7eb`},children:[(0,$.jsxs)(`div`,{style:{marginBottom:`24px`},children:[(0,$.jsx)(`h2`,{style:{margin:`0 0 8px 0`,fontSize:`24px`,fontWeight:700},children:`Name Your AI Assistant`}),(0,$.jsx)(`p`,{style:{margin:0,color:`#6b7280`,fontSize:`15px`,lineHeight:1.5},children:`Your AI assistant handles outreach and follow-ups on your behalf. Give it a name and title that will appear on emails and messages.`})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gap:`16px`,marginBottom:`24px`},children:[(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`Assistant Name`}),(0,$.jsx)(`input`,{type:`text`,value:h,onChange:e=>g(e.target.value),placeholder:`e.g., Rachel Kim, Alex Thompson`,style:{padding:`12px 16px`,fontSize:`15px`,border:`1px solid #e5e7eb`,borderRadius:`8px`,outline:`none`}})]}),(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`Title`}),(0,$.jsxs)(`select`,{value:v,onChange:e=>y(e.target.value),style:{padding:`12px 16px`,fontSize:`15px`,border:`1px solid #e5e7eb`,borderRadius:`8px`,outline:`none`,background:`white`},children:[(0,$.jsx)(`option`,{value:``,children:`Select a title...`}),(0,$.jsx)(`option`,{value:`Associate Analyst`,children:`Associate Analyst`}),(0,$.jsx)(`option`,{value:`Analyst`,children:`Analyst`}),(0,$.jsx)(`option`,{value:`Executive Assistant`,children:`Executive Assistant`}),(0,$.jsx)(`option`,{value:`Chief of Staff`,children:`Chief of Staff`}),(0,$.jsx)(`option`,{value:`Operations Associate`,children:`Operations Associate`}),(0,$.jsx)(`option`,{value:`Client Relations`,children:`Client Relations`}),(0,$.jsx)(`option`,{value:`AI Assistant`,children:`AI Assistant`})]}),(0,$.jsx)(`input`,{type:`text`,value:v,onChange:e=>y(e.target.value),placeholder:`Or type a custom title...`,style:{padding:`12px 16px`,fontSize:`15px`,border:`1px solid #e5e7eb`,borderRadius:`8px`,outline:`none`}})]})]}),(h.trim()||v.trim())&&(0,$.jsxs)(`div`,{style:{padding:`16px`,background:`#f8f4ff`,borderRadius:`12px`,border:`1px solid #e9d5ff`,marginBottom:`24px`,fontSize:`14px`,color:`#374151`},children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`4px`},children:`Preview`}),(0,$.jsx)(`div`,{children:`Outbound messages will be signed:`}),(0,$.jsxs)(`div`,{style:{marginTop:`8px`,fontStyle:`italic`,color:`#6b7280`},children:[h.trim()||`TitleApp AI Assistant`,v.trim()?`, ${v.trim()}`:``,` -- `,a||`Your Company`]})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`12px`},children:[(0,$.jsx)(`button`,{onClick:te,style:{flex:1,padding:`14px`,fontSize:`15px`,background:`transparent`,border:`1px solid #e5e7eb`,borderRadius:`8px`,cursor:`pointer`,color:`#6b7280`},children:`Skip -- use default`}),(0,$.jsx)(`button`,{onClick:te,style:{flex:1,padding:`14px`,fontSize:`15px`,fontWeight:600,background:`rgb(124,58,237)`,color:`white`,border:`none`,borderRadius:`8px`,cursor:`pointer`},children:h.trim()?`Save & Continue`:`Continue`})]})]})}):n===`criteria`?(0,$.jsx)(`div`,{style:{minHeight:`100%`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`#f8fafc`,fontFamily:`-apple-system, BlinkMacSystemFont, sans-serif`,padding:`20px`},children:(0,$.jsx)(`div`,{style:{width:`100%`,maxWidth:`600px`,padding:`40px`,background:`white`,borderRadius:`16px`,border:`1px solid #e5e7eb`},children:(0,$.jsx)(wg,{onComplete:ne,onSkip:()=>T(null)})})}):n===`sampleDeals`?(0,$.jsx)(`div`,{style:{minHeight:`100%`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`#f8fafc`,fontFamily:`-apple-system, BlinkMacSystemFont, sans-serif`,padding:`40px 20px`},children:(0,$.jsx)(`div`,{style:{width:`100%`,maxWidth:`800px`,padding:`40px`,background:`white`,borderRadius:`16px`,border:`1px solid #e5e7eb`},children:(0,$.jsx)(Eg,{criteria:d,onComplete:()=>T(d),onSkip:()=>T(d)})})}):n===`dealerData`?(0,$.jsx)(`div`,{style:{minHeight:`100%`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`#f8fafc`,fontFamily:`-apple-system, BlinkMacSystemFont, sans-serif`,padding:`40px 20px`},children:(0,$.jsx)(`div`,{style:{width:`100%`,maxWidth:`900px`,padding:`40px`,background:`white`,borderRadius:`16px`,border:`1px solid #e5e7eb`},children:(0,$.jsx)(Og,{onComplete:()=>T(null),onSkip:()=>T(null)})})}):n===`realEstateData`?(0,$.jsx)(`div`,{style:{minHeight:`100%`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`#f8fafc`,fontFamily:`-apple-system, BlinkMacSystemFont, sans-serif`,padding:`40px 20px`},children:(0,$.jsx)(`div`,{style:{width:`100%`,maxWidth:`950px`,padding:`40px`,background:`white`,borderRadius:`16px`,border:`1px solid #e5e7eb`},children:(0,$.jsx)(kg,{onComplete:()=>T(null),onSkip:()=>T(null)})})}):n===`raas`?(0,$.jsx)(`div`,{style:{minHeight:`100%`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`#f8fafc`,fontFamily:`-apple-system, BlinkMacSystemFont, sans-serif`,padding:`20px`},children:(0,$.jsxs)(`div`,{style:{width:`100%`,maxWidth:`560px`,padding:`40px`,background:`white`,borderRadius:`16px`,border:`1px solid #e5e7eb`},children:[(0,$.jsxs)(`div`,{style:{marginBottom:`24px`},children:[(0,$.jsx)(`h2`,{style:{margin:`0 0 8px 0`,fontSize:`24px`,fontWeight:700},children:`AI Assistant Rules`}),(0,$.jsx)(`p`,{style:{margin:0,color:`#6b7280`,fontSize:`15px`,lineHeight:1.5},children:`Any custom rules for your AI assistant? For example, tone of voice, topics to avoid, preferred terminology, or specific workflows.`})]}),(0,$.jsx)(`textarea`,{value:p,onChange:e=>m(e.target.value),placeholder:`e.g. Always address clients formally. Never discuss competitor pricing. Use metric units.`,rows:4,style:{width:`100%`,padding:`12px 16px`,fontSize:`15px`,border:`1px solid #e5e7eb`,borderRadius:`8px`,resize:`vertical`,fontFamily:`inherit`,lineHeight:1.5}}),(0,$.jsxs)(`div`,{style:{marginTop:`24px`,marginBottom:`24px`},children:[(0,$.jsx)(`h3`,{style:{margin:`0 0 8px 0`,fontSize:`16px`,fontWeight:600},children:`Compliance & Regulations`}),(0,$.jsx)(`p`,{style:{margin:`0 0 12px 0`,color:`#6b7280`,fontSize:`14px`,lineHeight:1.5},children:`Which regulations apply to your business? The AI will factor these into every recommendation.`}),(0,$.jsx)(`div`,{style:{display:`flex`,flexWrap:`wrap`,gap:`8px`},children:[{label:`State Licensing`,value:`state_licensing`},{label:`FTC / Consumer Protection`,value:`ftc`},{label:`Fair Housing`,value:`fair_housing`},{label:`AML / KYC`,value:`aml_kyc`},{label:`SEC Reporting`,value:`sec`},{label:`RESPA / TILA`,value:`respa_tila`},{label:`GDPR / Privacy`,value:`gdpr`},{label:`EPA / Environmental`,value:`epa`}].map(e=>{let t=p.includes(e.value);return(0,$.jsx)(`button`,{type:`button`,onClick:()=>{m(t?p.replace(`[${e.value}]`,``).trim():(p+` [${e.value}]`).trim())},style:{padding:`6px 14px`,fontSize:`13px`,borderRadius:`20px`,border:t?`2px solid rgb(124,58,237)`:`1px solid #e5e7eb`,background:t?`rgba(124,58,237,0.08)`:`white`,color:t?`rgb(124,58,237)`:`#374151`,cursor:`pointer`,fontWeight:t?600:400},children:e.label},e.value)})})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`12px`},children:[(0,$.jsx)(`button`,{onClick:ee,style:{flex:1,padding:`14px`,fontSize:`15px`,background:`transparent`,border:`1px solid #e5e7eb`,borderRadius:`8px`,cursor:`pointer`,color:`#6b7280`},children:`Use Standard Rules`}),(0,$.jsx)(`button`,{onClick:ee,style:{flex:1,padding:`14px`,fontSize:`15px`,fontWeight:600,background:`rgb(124,58,237)`,color:`white`,border:`none`,borderRadius:`8px`,cursor:`pointer`},children:p.trim()?`Save & Continue`:`Continue`})]})]})}):n===`brokerage`?(0,$.jsx)(`div`,{style:{minHeight:`100%`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`#f8fafc`,fontFamily:`-apple-system, BlinkMacSystemFont, sans-serif`,padding:`40px 20px`},children:(0,$.jsx)(`div`,{style:{width:`100%`,maxWidth:`700px`,padding:`40px`,background:`white`,borderRadius:`16px`,border:`1px solid #e5e7eb`},children:(0,$.jsx)(Pg,{onComplete:()=>T(null),onSkip:()=>T(null)})})}):n===`propertyMgmt`?(0,$.jsx)(`div`,{style:{minHeight:`100%`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`#f8fafc`,fontFamily:`-apple-system, BlinkMacSystemFont, sans-serif`,padding:`40px 20px`},children:(0,$.jsx)(`div`,{style:{width:`100%`,maxWidth:`700px`,padding:`40px`,background:`white`,borderRadius:`16px`,border:`1px solid #e5e7eb`},children:(0,$.jsx)(Ng,{onComplete:()=>T(null),onSkip:()=>T(null)})})}):n===`magic`?(0,$.jsxs)(`div`,{style:{minHeight:`100%`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`linear-gradient(135deg, #667eea 0%, #764ba2 100%)`,fontFamily:`-apple-system, BlinkMacSystemFont, sans-serif`},children:[(0,$.jsxs)(`div`,{style:{textAlign:`center`,color:`white`,animation:`fadeInScale 0.6s ease-out`,maxWidth:`500px`,padding:`40px 20px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`48px`,marginBottom:`24px`,fontWeight:300,letterSpacing:`-2px`},children:`TitleApp`}),(0,$.jsxs)(`h1`,{style:{fontSize:`32px`,fontWeight:700,margin:`0 0 16px 0`},children:[`Welcome, `,a||`partner`,`.`]}),(0,$.jsx)(`p`,{style:{fontSize:`18px`,opacity:.9,marginBottom:`32px`},children:`Your AI-powered business platform is ready`}),(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`8px`,marginBottom:`32px`,textAlign:`left`,background:`rgba(255,255,255,0.12)`,borderRadius:`12px`,padding:`20px 24px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,opacity:.8},children:`Setting up your workspace`}),(0,$.jsxs)(`div`,{style:{fontSize:`14px`,opacity:.8},children:[`Configuring AI assistant for `,s===`auto`?`automotive`:s===`analyst`?`investment`:s===`real-estate`?`real estate`:s===`property-mgmt`?`property management`:s]}),(0,$.jsxs)(`div`,{style:{fontSize:`14px`,opacity:.8},children:[`Loading `,l,` compliance rules`]})]}),(0,$.jsx)(`div`,{style:{width:`200px`,height:`3px`,background:`rgba(255,255,255,0.2)`,borderRadius:`2px`,margin:`0 auto`,overflow:`hidden`},children:(0,$.jsx)(`div`,{style:{width:`100%`,height:`100%`,background:`white`,borderRadius:`2px`,animation:`progressSlide 2s ease-in-out`}})})]}),(0,$.jsx)(`style`,{children:`
          @keyframes fadeInScale {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
          }
          @keyframes progressSlide {
            from { transform: translateX(-100%); }
            to { transform: translateX(0); }
          }
        `})]}):n===`idVerify`?(0,$.jsx)(jg,{onComplete:()=>i(`details`),onSkip:()=>i(`details`)}):n===`details`?(0,$.jsx)(`div`,{style:{minHeight:`100%`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`#f8fafc`,fontFamily:`-apple-system, BlinkMacSystemFont, sans-serif`,padding:`20px`},children:(0,$.jsxs)(`div`,{style:{width:`100%`,maxWidth:`500px`,padding:`40px`,background:`white`,borderRadius:`16px`,border:`1px solid #e5e7eb`},children:[(0,$.jsxs)(`div`,{style:{marginBottom:`32px`},children:[(0,$.jsx)(`h1`,{style:{margin:`0 0 8px 0`,fontSize:`28px`,fontWeight:700},children:`Set up your account`}),(0,$.jsx)(`p`,{style:{margin:0,color:`#6b7280`,fontSize:`15px`},children:`Just a few quick details to get started`})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gap:`24px`},children:[(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`Company Name *`}),(0,$.jsx)(`input`,{type:`text`,value:a,onChange:e=>o(e.target.value),placeholder:`Acme Auto Dealership`,autoFocus:!0,required:!0,style:{padding:`12px 16px`,fontSize:`15px`,border:`1px solid #e5e7eb`,borderRadius:`8px`,outline:`none`},onKeyDown:e=>{e.key===`Enter`&&w()}})]}),(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`Industry`}),(0,$.jsxs)(`select`,{value:s,onChange:e=>c(e.target.value),style:{padding:`12px 16px`,fontSize:`15px`,border:`1px solid #e5e7eb`,borderRadius:`8px`,outline:`none`,background:`white`},children:[(0,$.jsx)(`option`,{value:`auto`,children:`Automotive`}),(0,$.jsx)(`option`,{value:`real-estate`,children:`Real Estate (Brokerage)`}),(0,$.jsx)(`option`,{value:`property-mgmt`,children:`Property Management`}),(0,$.jsx)(`option`,{value:`aviation`,children:`Aviation`}),(0,$.jsx)(`option`,{value:`marine`,children:`Marine`}),(0,$.jsx)(`option`,{value:`analyst`,children:`Investment / PE`}),(0,$.jsx)(`option`,{value:`GLOBAL`,children:`Other`})]})]}),(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`State / Jurisdiction`}),(0,$.jsxs)(`select`,{value:l,onChange:e=>u(e.target.value),style:{padding:`12px 16px`,fontSize:`15px`,border:`1px solid #e5e7eb`,borderRadius:`8px`,outline:`none`,background:`white`},children:[(0,$.jsx)(`option`,{value:`IL`,children:`Illinois`}),(0,$.jsx)(`option`,{value:`CA`,children:`California`}),(0,$.jsx)(`option`,{value:`TX`,children:`Texas`}),(0,$.jsx)(`option`,{value:`FL`,children:`Florida`}),(0,$.jsx)(`option`,{value:`NY`,children:`New York`}),(0,$.jsx)(`option`,{value:`NV`,children:`Nevada`}),(0,$.jsx)(`option`,{value:`GLOBAL`,children:`Other / Multi-State`})]})]}),S&&(0,$.jsx)(`div`,{style:{padding:`12px`,background:`#fff5f5`,border:`1px solid #fecaca`,borderRadius:`8px`,fontSize:`14px`,color:`#dc2626`},children:S}),(0,$.jsx)(`button`,{onClick:w,disabled:b,style:{padding:`14px`,fontSize:`15px`,fontWeight:600,background:b?`#9ca3af`:`rgb(124,58,237)`,color:`white`,border:`none`,borderRadius:`8px`,cursor:b?`not-allowed`:`pointer`,marginTop:`8px`},children:b?`Creating your account...`:`Next `}),(0,$.jsx)(`p`,{style:{fontSize:`13px`,color:`#6b7280`,textAlign:`center`,margin:0},children:`You can add team members, integrations, and billing later`})]})]})}):(0,$.jsx)(`div`,{style:{minHeight:`100%`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`linear-gradient(135deg, #667eea 0%, #764ba2 100%)`,fontFamily:`-apple-system, BlinkMacSystemFont, sans-serif`,padding:`20px`},children:(0,$.jsxs)(`div`,{style:{textAlign:`center`,color:`white`,maxWidth:`600px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`48px`,marginBottom:`24px`,fontWeight:300,letterSpacing:`-2px`},children:`TitleApp`}),(0,$.jsx)(`h1`,{style:{fontSize:`40px`,fontWeight:700,margin:`0 0 16px 0`},children:`Welcome to TitleApp AI`}),(0,$.jsx)(`p`,{style:{fontSize:`20px`,opacity:.95,marginBottom:`40px`,lineHeight:1.5},children:`Your AI-powered platform for title, ownership, and business automation`}),(0,$.jsx)(`button`,{onClick:()=>i(`idVerify`),style:{padding:`16px 48px`,fontSize:`18px`,fontWeight:600,background:`white`,color:`#667eea`,border:`none`,borderRadius:`12px`,cursor:`pointer`,boxShadow:`0 4px 20px rgba(0,0,0,0.2)`},children:`Create Your Account`})]})})}function Ig({onComplete:e,vertical:t=`auto`}){let[n,r]=(0,_.useState)(0),[i,a]=(0,_.useState)(!1);(0,_.useEffect)(()=>{localStorage.getItem(`hasSeenOnboardingTour`)||setTimeout(()=>a(!0),1e3)},[]);let o=(()=>{let e=[{title:`Welcome to TitleApp AI`,content:`Let me show you around. This quick tour will help you get started with your AI-powered business platform.`,action:`Get Started`,highlight:null},{title:`Your Dashboard`,content:`This is your command center. Here you'll see key metrics, recent activity, and quick actions.`,highlight:`.pageHeader`,section:`dashboard`},{title:`AI Chat Assistant`,content:`Click the chat button in the bottom right to talk to your AI assistant. Ask about customers, inventory, records, or get help with any task.`,highlight:`.floating-chat-button`,action:`Try It`},{title:`Navigation Sidebar`,content:`Access all your tools here. Each section is designed to help you manage different aspects of your business.`,highlight:`.sidebar`}],n={auto:[{title:`Upload Your Data`,content:`To get the most out of TitleApp, upload your business data:

 Customer database
 Current inventory
 Service schedules
 Financial products
 Warranty offerings

We'll use AI to analyze and help you sell more effectively.`,action:`Upload Now`,highlight:null},{title:`Inventory & Customers`,content:`Manage your vehicle inventory and customer relationships. The AI will help you match customers to vehicles and suggest optimal pricing.`,highlight:null}],analyst:[{title:`Upload Deal Memos`,content:`Upload 2-3 sample deals you're interested in. Our AI will analyze them against your investment criteria and help you identify your sweet spot.`,action:`Upload Deals`,highlight:null},{title:`Deal Analysis`,content:`The Analyst section uses AI to screen deals, identify risks, and recommend investment structures. All analysis follows your custom criteria.`,section:`analyst`,highlight:null}],"real-estate":[{title:`Upload Property Docs`,content:`Upload property titles, inspection reports, and transaction records. We'll help you track ownership and identify opportunities.`,action:`Upload Now`,highlight:null}]},r=[{title:`You're All Set`,content:`That's it! Remember, you can always ask the AI chat assistant for help. It knows your business context and can guide you through any task.`,action:`Start Using TitleApp`,highlight:null}];return[...e,...n[t]||[],...r]})(),s=o[n],c=()=>{n<o.length-1?r(n+1):u()},l=()=>{u()},u=()=>{localStorage.setItem(`hasSeenOnboardingTour`,`true`),a(!1),e&&e()},d=()=>{if(s.action===`Try It`){let e=document.querySelector(`.floating-chat-button`);e&&e.click(),c()}else s.action===`Upload Now`||s.action,c()};return i?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{className:`onboarding-overlay`}),s.highlight&&(0,$.jsx)(`div`,{className:`onboarding-spotlight`,style:{"--spotlight-target":s.highlight}}),(0,$.jsxs)(`div`,{className:`onboarding-card`,children:[(0,$.jsxs)(`div`,{className:`onboarding-header`,children:[(0,$.jsxs)(`div`,{className:`onboarding-progress`,children:[`Step `,n+1,` of `,o.length]}),(0,$.jsx)(`button`,{className:`onboarding-skip`,onClick:l,children:`Skip Tour`})]}),(0,$.jsxs)(`div`,{className:`onboarding-content`,children:[(0,$.jsx)(`h2`,{className:`onboarding-title`,children:s.title}),(0,$.jsx)(`p`,{className:`onboarding-text`,style:{whiteSpace:`pre-line`},children:s.content})]}),(0,$.jsxs)(`div`,{className:`onboarding-footer`,children:[(0,$.jsx)(`div`,{className:`onboarding-dots`,children:o.map((e,t)=>(0,$.jsx)(`div`,{className:`onboarding-dot ${t===n?`active`:``} ${t<n?`completed`:``}`},t))}),(0,$.jsxs)(`div`,{className:`onboarding-actions`,children:[n>0&&(0,$.jsx)(`button`,{className:`onboarding-btn onboarding-btn-secondary`,onClick:()=>r(n-1),children:`Back`}),s.action?(0,$.jsx)(`button`,{className:`onboarding-btn onboarding-btn-primary`,onClick:d,children:s.action}):(0,$.jsx)(`button`,{className:`onboarding-btn onboarding-btn-primary`,onClick:c,children:n===o.length-1?`Finish`:`Next`})]})]})]})]}):null}var Lg={consumer:[{id:`dashboard`,label:`Dashboard`},{id:`my-vehicles`,label:`My Vehicles`},{id:`my-properties`,label:`My Properties`},{id:`my-documents`,label:`My Important Stuff`},{id:`my-certifications`,label:`Student Records & Certifications`},{id:`my-logbook`,label:`My Logbooks`},{id:`my-wallet`,label:`My Wallet`},{id:`ai-chats`,label:`My AI Activity`},{id:`settings`,label:`Settings`}],analyst:[{id:`dashboard`,label:`Dashboard`},{id:`analyst`,label:`Analyst`},{id:`rules-resources`,label:`Rules & Resources`},{id:`inventory`,label:`Services & Fees`},{id:`staff`,label:`Team`},{id:`ai-chats`,label:`AI Activity`},{id:`reports`,label:`Reports`},{id:`data-apis`,label:`Data & APIs`},{id:`settings`,label:`Settings`}],"property-mgmt":[{id:`dashboard`,label:`Dashboard`},{id:`inventory`,label:`Properties`},{id:`customers`,label:`Tenants`},{id:`appointments`,label:`Maintenance`},{id:`rules-resources`,label:`Rules & Resources`},{id:`reports`,label:`Reports`},{id:`settings`,label:`Settings`}],auto:[{id:`dashboard`,label:`Dashboard`},{id:`inventory`,label:`Inventory`},{id:`customers`,label:`Customers`},{id:`sales-pipeline`,label:`Sales Pipeline`},{id:`fi-products`,label:`F&I Products`},{id:`auto-service`,label:`Service`},{id:`reports`,label:`Reports`},{id:`ai-chats`,label:`AI Activity`},{id:`rules`,label:`Rules`},{id:`settings`,label:`Settings`}],"real-estate":[{id:`dashboard`,label:`Dashboard`},{id:`inventory`,label:`Listings`},{id:`customers`,label:`Clients`},{id:`rules-resources`,label:`Rules & Resources`},{id:`reports`,label:`Reports`},{id:`settings`,label:`Settings`}]},Rg=[{id:`dashboard`,label:`Dashboard`},{id:`rules-resources`,label:`Rules & Resources`},{id:`ai-chats`,label:`AI Activity`},{id:`reports`,label:`Reports`},{id:`settings`,label:`Settings`}];function zg({currentSection:e,onNavigate:t,onClose:n,tenantName:r,onBackToHub:i}){let a=localStorage.getItem(`VERTICAL`)||`auto`,o=Lg[a]||Rg,s=a===`consumer`,c=localStorage.getItem(`WORKSPACE_NAME`)||``,l=/^ws_\d+_[a-z0-9]+$/i.test(c)?``:c,u=(l||r||localStorage.getItem(`COMPANY_NAME`)||localStorage.getItem(`TENANT_NAME`)||``).split(` `)[0]||``,d=s&&u?`${u}'s Vault`:l||r||(s?`Personal Vault`:`Business`);function f(e){t(e),n&&n()}function p(){va(Os()).then(()=>{localStorage.removeItem(`ID_TOKEN`),localStorage.removeItem(`TENANT_ID`),window.location.reload()}).catch(()=>{localStorage.removeItem(`ID_TOKEN`),localStorage.removeItem(`TENANT_ID`),window.location.reload()})}return(0,$.jsxs)(`div`,{className:`sidebar`,children:[(0,$.jsxs)(`div`,{className:`sidebarHeader`,children:[(0,$.jsxs)(`div`,{className:`brand`,children:[(0,$.jsx)(`img`,{src:`/logo.png`,alt:`TitleApp AI`,style:{width:`32px`,height:`32px`,borderRadius:`8px`}}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`brandName`,children:s?d:l||`TitleApp AI`}),(0,$.jsx)(`div`,{className:`brandSub`,children:s?`TitleApp Vault`:{auto:`Auto Dealer`,analyst:`Investment Analyst`,"real-estate":`Real Estate`,aviation:`Aviation`}[a]||`Business`})]})]}),(0,$.jsx)(`button`,{className:`sidebarClose iconBtn`,onClick:n,"aria-label":`Close menu`,children:``})]}),(0,$.jsxs)(`div`,{className:`sidebarSection`,children:[(0,$.jsx)(`div`,{className:`sidebarLabel`,children:`Navigation`}),(0,$.jsx)(`nav`,{className:`nav`,children:o.map(t=>(0,$.jsx)(`button`,{className:`navItem ${e===t.id?`navItemActive`:``}`,onClick:()=>f(t.id),style:{width:`100%`,textAlign:`left`,cursor:`pointer`},children:t.label},t.id))})]}),(0,$.jsxs)(`div`,{className:`sidebarFooter`,children:[i&&(0,$.jsx)(`button`,{onClick:i,className:`iconBtn`,style:{width:`100%`,marginTop:`10px`,color:`#7c3aed`},children:`Switch Workspace`}),(0,$.jsx)(`button`,{onClick:p,className:`iconBtn`,style:{width:`100%`,marginTop:`10px`},children:`Sign Out`})]})]})}var Bg={terms:`This is our standard terms and liability agreement. Take a look and let me know if you have questions.`,idVerify:`Quick identity check -- keeps your records secure and verified. $2, once a year.`,details:`This is where we set your foundation. The jurisdiction matters because compliance rules vary by state.`,raas:`Tell me how you want your AI assistant to work. I'll follow these rules in every interaction.`,criteria:`This is your target box. Every deal gets screened against these numbers automatically.`,sampleDeals:`Drop your deal memos here. I'll pull out the key data so you don't have to enter it manually.`,dealerData:`Upload your dealership data. The more I know about your inventory and customers, the more I can help.`,brokerage:`Tell me about your brokerage. I'll help you track listings, manage documents, and stay compliant.`,propertyMgmt:`Let's set up your property portfolio. I'll help you track units, leases, and maintenance.`,dashboard:`Welcome to your workspace. Everything starts from here -- your deals, your analysis, your pipeline.`,analyst:`Your deal analysis hub. Upload deals and I'll screen them against your criteria.`,inventory:`Your inventory hub. I can look up any vehicle, check aging, and recommend pricing actions.`,customers:`Your customer database. I can pull up any customer's history, identify outreach opportunities, and draft communications.`,"fi-products":`Your F&I product catalog. I can match products to any customer profile and calculate payment impacts.`,"auto-service":`Your service schedule. I can identify upsell opportunities, draft service reminders, and flag warranty expirations.`,"sales-pipeline":`Your active deals. I can prioritize follow-ups, draft communications, and recommend next steps for each deal.`},Vg={dashboard:`Welcome to your Vault. This is your personal command center -- vehicles, properties, documents, and certifications all in one place.`,"my-vehicles":`Your vehicle records. I can help you add a new vehicle, look up a VIN, or check on registration and insurance status.`,"my-properties":`Your property records. I can help you add a property, track mortgage details, or organize tax and insurance documents.`,"my-documents":`Your important documents. I can help you store and organize IDs, contracts, tax records, insurance policies, and anything else that matters.`,"my-certifications":`Your certifications and credentials. I can help you add licenses, track expiration dates, and set up renewal reminders.`,"my-logbook":`Your activity logbook. Every Digital Title Certificate and action is recorded here permanently.`,settings:`Your Vault settings. You can update your profile, configure your AI assistant, and manage notification preferences.`};function Hg({currentSection:e,onboardingStep:t}){let[n,r]=(0,_.useState)([]),[i,a]=(0,_.useState)(``),[o,s]=(0,_.useState)(!1),[c,l]=(0,_.useState)(!1),[u,d]=(0,_.useState)(!1),[f,p]=(0,_.useState)(null),m=(0,_.useRef)(null),[h,g]=(0,_.useState)(null),[v,y]=(0,_.useState)(null),[b,x]=(0,_.useState)(!1),S=(0,_.useRef)(null),C=(0,_.useRef)(null),[w,ee]=(0,_.useState)(!1);(0,_.useEffect)(()=>{function e(e){let t=e.detail?.message;e.detail?.dealContext&&g(e.detail.dealContext),t&&(a(t),setTimeout(()=>ie(null,t),200))}return window.addEventListener(`ta:chatPrompt`,e),()=>window.removeEventListener(`ta:chatPrompt`,e)},[]);let te=Os(),ne=Ch(),T=te?.currentUser;(0,_.useEffect)(()=>{let e=te.onAuthStateChanged(()=>{d(!0)});return()=>e()},[]),(0,_.useEffect)(()=>{T&&u&&n.length===0&&re()},[T,u]),(0,_.useEffect)(()=>{let n=t||e,i=(localStorage.getItem(`VERTICAL`)||`auto`)===`consumer`;if(n&&n!==f&&n!==`checking`&&n!==`welcome`&&n!==`magic`){let e=i&&Vg[n]||Bg[n];if(e){p(n);let t=setTimeout(()=>{r(t=>[...t,{role:`assistant`,content:e,isSystem:!0}])},600);return()=>clearTimeout(t)}}},[t,e]),(0,_.useEffect)(()=>{m.current&&(m.current.scrollTop=m.current.scrollHeight)},[n,o]);async function re(){try{let e=sessionStorage.getItem(`ta_platform_sid`),t=localStorage.getItem(`TENANT_ID`)||localStorage.getItem(`WORKSPACE_ID`),n=[ng(`userId`,`==`,T.uid),...t?[ng(`tenantId`,`==`,t)]:[],ag(`createdAt`,`asc`),sg(50)];e&&n.splice(t?2:1,0,ng(`sessionId`,`==`,e));let i=await _g(eg(_h(ne,`messageEvents`),...n)),a=[];i.forEach(e=>{let t=e.data();t.type===`chat:message:received`?a.push({role:`user`,content:t.message}):t.type===`chat:message:responded`&&a.push({role:`assistant`,content:t.response})}),e&&a.length>0&&a.push({role:`assistant`,content:`Welcome to your business platform. Your onboarding steps are on the left -- I'm right here if you need help.`,isSystem:!0}),r(a)}catch(e){console.error(`Failed to load conversation history:`,e)}}async function ie(t,n){t?.preventDefault();let o=(n||i).trim();if(!o||c)return;if(!T){r(e=>[...e,{role:`assistant`,content:`Please sign in to use the AI assistant.`,isError:!0}]);return}let u=o,d=v;d&&(u+=` [File attached: ${d.name}]`,y(null)),a(``),l(!0),r(e=>[...e,{role:`user`,content:u}]);let f=null;if(d){ee(!0),r(e=>[...e,{role:`assistant`,content:`Uploading ${d.name}...`,isSystem:!0}]);try{f=await new Promise((e,t)=>{let n=new FileReader;n.onload=()=>e({name:d.name,type:d.type,data:n.result}),n.onerror=()=>t(Error(`Failed to read file`)),n.readAsDataURL(d)}),r(e=>{let t=[...e],n=t.findLastIndex(e=>e.isSystem&&e.content.startsWith(`Uploading `));return n>=0&&(t[n]={...t[n],content:`File ready: ${d.name}`}),t})}catch(e){console.error(`File read failed:`,e),r(e=>{let t=[...e],n=t.findLastIndex(e=>e.isSystem&&e.content.startsWith(`Uploading `));return n>=0&&(t[n]={...t[n],content:`Could not read ${d.name}. Message sent without file.`}),t})}finally{ee(!1)}}s(!0);try{let t=await T.getIdToken(),n=localStorage.getItem(`TENANT_ID`)||localStorage.getItem(`WORKSPACE_ID`)||``,i=localStorage.getItem(`VERTICAL`)||`auto`,a=localStorage.getItem(`JURISDICTION`)||``,o=await fetch(`https://titleapp-frontdoor.titleapp-core.workers.dev/api?path=/v1/chat:message`,{method:`POST`,headers:{Authorization:`Bearer ${t}`,"Content-Type":`application/json`,"X-Tenant-Id":n,"X-Vertical":i,"X-Jurisdiction":a},body:JSON.stringify({message:u,...f?{file:f}:{},context:{source:`business_portal`,currentSection:e||`dashboard`,vertical:i,jurisdiction:a,workspaceId:localStorage.getItem(`WORKSPACE_ID`)||``,workspaceName:localStorage.getItem(`WORKSPACE_NAME`)||``,...h?{dealContext:h}:{}}})}),c=await o.json();if(!o.ok)throw Error(c.error||`Request failed`);s(!1),g(null),r(e=>[...e,{role:`assistant`,content:c.response||`No response received.`,structuredData:c.structuredData}])}catch(e){console.error(`Send failed:`,e),s(!1),r(t=>[...t,{role:`assistant`,content:e.message||`Failed to send message. Please try again.`,isError:!0}])}finally{l(!1)}}function ae(e){e.key===`Enter`&&!e.shiftKey&&(e.preventDefault(),ie())}function oe(e){let t=e.target.files?.[0];t&&y(t)}function se(){let e=window.SpeechRecognition||window.webkitSpeechRecognition;if(!e)return;let t=new e;t.continuous=!1,t.interimResults=!1,t.lang=`en-US`,t.onresult=e=>{let t=e.results[0][0].transcript;a(e=>e?e+` `+t:t),x(!1)},t.onerror=()=>x(!1),t.onend=()=>x(!1),C.current=t,t.start(),x(!0)}function ce(){C.current?.stop(),x(!1)}function le(e){if(!e||typeof e!=`object`)return null;if(e.type===`record_created`){let t={vehicle:`#7c3aed`,property:`#22c55e`,document:`#6366f1`,certification:`#d97706`,valuable:`#ec4899`},n={vehicle:`Vehicle`,property:`Real Estate`,document:`Document`,certification:`Certification`,valuable:`Valuable`},r=t[e.recordType]||`#64748b`,i=n[e.recordType]||`Record`,a=e.metadata||{},o=Object.entries(a).filter(([e,t])=>e!==`title`&&t);return(0,$.jsxs)(`div`,{style:{border:`2px solid ${r}30`,borderRadius:`14px`,overflow:`hidden`,marginTop:`8px`},children:[(0,$.jsxs)(`div`,{style:{background:`${r}12`,padding:`12px 16px`,display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`15px`,color:`#1e293b`},children:a.title||`New Record`}),(0,$.jsx)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`3px 10px`,borderRadius:`20px`,background:`${r}20`,color:r},children:i})]}),o.length>0&&(0,$.jsx)(`div`,{style:{padding:`10px 16px`},children:o.map(([e,t])=>(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,padding:`4px 0`,fontSize:`13px`},children:[(0,$.jsx)(`span`,{style:{color:`#64748b`,flexShrink:0,marginRight:`12px`},children:e.replace(/([A-Z])/g,` $1`).replace(/^./,e=>e.toUpperCase())}),(0,$.jsx)(`span`,{style:{fontWeight:500,color:`#1e293b`,textAlign:`right`},children:t})]},e))}),(0,$.jsx)(`div`,{style:{padding:`8px 16px`,borderTop:`1px solid #f1f5f9`},children:(0,$.jsxs)(`span`,{style:{fontSize:`12px`,fontWeight:600,color:`#16a34a`,display:`flex`,alignItems:`center`,gap:`4px`},children:[(0,$.jsx)(`svg`,{width:`14`,height:`14`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`3`,strokeLinecap:`round`,strokeLinejoin:`round`,children:(0,$.jsx)(`polyline`,{points:`20 6 9 17 4 12`})}),`Digital Title Certificate Created`]})})]})}return e.type===`analyst_result`?(0,$.jsxs)(`div`,{className:`structured-analyst-result`,children:[(0,$.jsxs)(`div`,{className:`analyst-header`,children:[(0,$.jsx)(`span`,{className:`analyst-emoji`,children:e.verdict_emoji}),(0,$.jsx)(`h4`,{children:e.verdict}),(0,$.jsxs)(`span`,{className:`analyst-score`,children:[e.score,`/100`]})]}),e.summary&&(0,$.jsx)(`p`,{className:`analyst-summary`,children:e.summary}),e.key_findings&&e.key_findings.length>0&&(0,$.jsxs)(`div`,{className:`analyst-findings`,children:[(0,$.jsx)(`h5`,{children:`Key Findings:`}),(0,$.jsx)(`ul`,{children:e.key_findings.map((e,t)=>(0,$.jsx)(`li`,{children:e},t))})]})]}):e.type===`dtc_preview`?(0,$.jsxs)(`div`,{className:`structured-dtc-preview`,children:[(0,$.jsxs)(`div`,{className:`dtc-header`,children:[(0,$.jsxs)(`h4`,{children:[e.asset_type,` DTC Preview`]}),e.blockchain_verified&&(0,$.jsx)(`span`,{className:`dtc-verified`,children:`Verified`})]}),e.details&&(0,$.jsx)(`div`,{className:`dtc-details`,children:Object.entries(e.details).map(([e,t])=>(0,$.jsxs)(`div`,{className:`dtc-field`,children:[(0,$.jsxs)(`span`,{className:`dtc-label`,children:[e,`:`]}),(0,$.jsx)(`span`,{className:`dtc-value`,children:String(t)})]},e))})]}):e.type===`trade_summary`?(0,$.jsxs)(`div`,{className:`structured-trade-summary`,children:[(0,$.jsx)(`h4`,{children:`Trade Summary`}),(0,$.jsxs)(`div`,{className:`trade-details`,children:[(0,$.jsxs)(`div`,{className:`trade-field`,children:[(0,$.jsx)(`strong`,{children:`Your Vehicle:`}),` `,e.your_vehicle]}),(0,$.jsxs)(`div`,{className:`trade-field`,children:[(0,$.jsx)(`strong`,{children:`Trade Value:`}),` $`,e.trade_value?.toLocaleString()]}),(0,$.jsxs)(`div`,{className:`trade-field`,children:[(0,$.jsx)(`strong`,{children:`New Vehicle:`}),` `,e.new_vehicle]}),(0,$.jsxs)(`div`,{className:`trade-field`,children:[(0,$.jsx)(`strong`,{children:`Price:`}),` $`,e.new_price?.toLocaleString()]}),(0,$.jsxs)(`div`,{className:`trade-field`,children:[(0,$.jsx)(`strong`,{children:`Net Cost:`}),` $`,e.net_cost?.toLocaleString()]})]})]}):(0,$.jsx)(`div`,{className:`structured-generic`,children:(0,$.jsx)(`pre`,{children:JSON.stringify(e,null,2)})})}return(0,$.jsxs)(`div`,{className:`chatPanelContainer`,children:[(0,$.jsxs)(`div`,{className:`chatPanelHeader`,children:[(0,$.jsx)(`svg`,{width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:(0,$.jsx)(`path`,{d:`M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z`})}),(0,$.jsx)(`span`,{children:(()=>{try{let e=JSON.parse(localStorage.getItem(`COS_CONFIG`)||`{}`);return e.name?`${e.name} -- AI Assistant`:`AI Assistant`}catch{return`AI Assistant`}})()})]}),(0,$.jsxs)(`div`,{className:`chatPanelMessages`,ref:m,children:[n.length===0&&!o&&(0,$.jsx)(`div`,{className:`chat-welcome`,children:(()=>{let e=localStorage.getItem(`VERTICAL`)||`auto`;if(e===`consumer`){let e=`your AI assistant`;try{let t=JSON.parse(localStorage.getItem(`COS_CONFIG`)||`{}`);t.name&&(e=`${t.name}, your AI assistant`)}catch{}return(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(`p`,{children:[`Hi. I'm `,e,`.`]}),T?(0,$.jsx)(`p`,{children:`I can help you manage your vehicles, properties, documents, and certifications. What would you like to do?`}):(0,$.jsx)(`p`,{children:`Please sign in to start chatting.`})]})}if(e===`auto`)return T?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`p`,{children:`Good evening. I've been reviewing the lot and customer database. Here's what I found:`}),(0,$.jsx)(`p`,{children:`Maria Gonzalez's Corolla lease expires in 60 days -- she's a cash buyer. I've matched her to 3 vehicles in stock.`}),(0,$.jsx)(`p`,{children:`The BMW X3 on the used lot is at 143 days. I recommend marking it down to $31,999 and pushing it to Marketplace.`}),(0,$.jsx)(`p`,{children:`Charles Cox is due for his 60K service -- his factory warranty is about to expire. Good opportunity to pitch Extra Care Gold.`}),(0,$.jsx)(`p`,{children:`Want me to start with any of these?`})]}):(0,$.jsx)(`p`,{children:`Please sign in to start chatting.`});let t=`your AI assistant`;try{let e=JSON.parse(localStorage.getItem(`COS_CONFIG`)||`{}`);e.name&&(t=`${e.name}, your AI assistant`)}catch{}return(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(`p`,{children:[`Hi. I'm `,t,`.`]}),T?(0,$.jsx)(`p`,{children:`Ask me anything about your records, documents, customers, inventory, or business operations.`}):(0,$.jsx)(`p`,{children:`Please sign in to start chatting.`})]})})()}),n.map((e,t)=>(0,$.jsxs)(`div`,{className:`chat-message ${e.role} ${e.isError?`error`:``}`,children:[(0,$.jsx)(`div`,{className:`chat-bubble`,children:e.content}),e.structuredData&&(0,$.jsx)(`div`,{className:`chat-structured-data`,children:le(e.structuredData)})]},t)),o&&(0,$.jsx)(`div`,{className:`chat-message assistant`,children:(0,$.jsxs)(`div`,{className:`chat-typing-indicator`,children:[(0,$.jsx)(`div`,{className:`typing-dot`}),(0,$.jsx)(`div`,{className:`typing-dot`}),(0,$.jsx)(`div`,{className:`typing-dot`})]})})]}),(0,$.jsxs)(`form`,{className:`chatPanelInput`,onSubmit:ie,children:[v&&(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`6px`,padding:`4px 8px`,background:`#f1f5f9`,borderRadius:`8px`,fontSize:`12px`,color:`#64748b`,marginBottom:`4px`,width:`100%`},children:[(0,$.jsx)(`span`,{style:{flex:1,overflow:`hidden`,textOverflow:`ellipsis`,whiteSpace:`nowrap`},children:v.name}),(0,$.jsx)(`button`,{type:`button`,onClick:()=>y(null),style:{background:`none`,border:`none`,cursor:`pointer`,color:`#94a3b8`,fontSize:`14px`,padding:`0 2px`},children:`x`})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`,alignItems:`flex-end`,width:`100%`},children:[(0,$.jsx)(`input`,{ref:S,type:`file`,style:{display:`none`},onChange:oe}),(0,$.jsx)(`button`,{type:`button`,onClick:()=>S.current?.click(),style:{width:`36px`,height:`36px`,borderRadius:`10px`,background:`transparent`,border:`1px solid #e2e8f0`,cursor:`pointer`,display:`flex`,alignItems:`center`,justifyContent:`center`,flexShrink:0,color:`#94a3b8`},"aria-label":`Attach file`,children:(0,$.jsx)(`svg`,{width:`18`,height:`18`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:(0,$.jsx)(`path`,{d:`M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48`})})}),(0,$.jsx)(`button`,{type:`button`,onClick:b?ce:se,style:{width:`36px`,height:`36px`,borderRadius:`10px`,background:b?`#ef4444`:`transparent`,border:b?`none`:`1px solid #e2e8f0`,cursor:`pointer`,display:`flex`,alignItems:`center`,justifyContent:`center`,flexShrink:0,color:b?`white`:`#94a3b8`},"aria-label":b?`Stop recording`:`Voice input`,children:(0,$.jsxs)(`svg`,{width:`18`,height:`18`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,$.jsx)(`path`,{d:`M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z`}),(0,$.jsx)(`path`,{d:`M19 10v2a7 7 0 0 1-14 0v-2`}),(0,$.jsx)(`line`,{x1:`12`,y1:`19`,x2:`12`,y2:`23`}),(0,$.jsx)(`line`,{x1:`8`,y1:`23`,x2:`16`,y2:`23`})]})}),(0,$.jsx)(`textarea`,{value:i,onChange:e=>a(e.target.value),onKeyDown:ae,placeholder:`Ask me anything...`,rows:3,disabled:c||w,style:{minHeight:`72px`}}),(0,$.jsx)(`button`,{type:`submit`,disabled:c||w||!i.trim(),"aria-label":`Send message`,children:(0,$.jsxs)(`svg`,{width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,$.jsx)(`line`,{x1:`22`,y1:`2`,x2:`11`,y2:`13`}),(0,$.jsx)(`polygon`,{points:`22 2 15 22 11 13 2 9 22 2`})]})})]})]})]})}function Ug(){let e=localStorage.getItem(`ID_TOKEN`);if(!e)throw Error(`Missing ID_TOKEN in localStorage. Please sign in.`);return e}function Wg(){let e=localStorage.getItem(`SESSION_ID`);if(!e){let t=globalThis.crypto;e=t&&typeof t.randomUUID==`function`?t.randomUUID():`sess_`+Math.random().toString(16).slice(2)+`_`+Date.now(),localStorage.setItem(`SESSION_ID`,e)}return e}function Gg(){return`https://titleapp-frontdoor.titleapp-core.workers.dev`.replace(/\/+$/,``)}async function Kg(e,t,n){let r=Wg(),i=new URL(Gg()+`/api`);i.searchParams.set(`path`,t);let a=localStorage.getItem(`TENANT_ID`)||`public`,o=await fetch(i.toString(),{method:e,headers:{"Content-Type":`application/json`,Authorization:`Bearer `+Ug(),"X-Session-Id":r,"X-Tenant-Id":a,"X-Vertical":n.vertical,"X-Jurisdiction":n.jurisdiction},body:n.body?JSON.stringify(n.body):void 0}),s=await o.text(),c=null;try{c=s?JSON.parse(s):null}catch{c={raw:s}}if(!o.ok)throw Error(c?.error||c?.reason||`HTTP `+o.status);return c}async function qg(e){let t=`/v1/logbook:list`;return e.dtcId&&(t+=`?dtcId=${encodeURIComponent(e.dtcId)}`),Kg(`GET`,t,{vertical:e.vertical,jurisdiction:e.jurisdiction})}async function Jg(e){return Kg(`POST`,`/v1/logbook:append`,{vertical:e.vertical,jurisdiction:e.jurisdiction,body:{...e.entry,...e.file?{file:e.file}:{}}})}async function Yg(e){let t=`/v1/inventory:list`;return e.type&&(t+=`?type=${encodeURIComponent(e.type)}`),Kg(`GET`,t,{vertical:e.vertical,jurisdiction:e.jurisdiction})}async function Xg(e){return Kg(`POST`,`/v1/inventory:create`,{vertical:e.vertical,jurisdiction:e.jurisdiction,body:e.item})}async function Zg(e){return Kg(`PUT`,`/v1/inventory:update`,{vertical:e.vertical,jurisdiction:e.jurisdiction,body:{id:e.id,...e.item}})}async function Qg(e){return Kg(`DELETE`,`/v1/inventory:delete`,{vertical:e.vertical,jurisdiction:e.jurisdiction,body:{id:e.id}})}async function $g(e){return Kg(`POST`,`/v1/inventory:attest`,{vertical:e.vertical,jurisdiction:e.jurisdiction,body:{dtcId:e.dtcId}})}async function e_(e){return Kg(`GET`,`/v1/customers:list`,{vertical:e.vertical,jurisdiction:e.jurisdiction})}async function t_(e){return Kg(`POST`,`/v1/customers:create`,{vertical:e.vertical,jurisdiction:e.jurisdiction,body:e.customer})}async function n_(e){return Kg(`PUT`,`/v1/customers:update`,{vertical:e.vertical,jurisdiction:e.jurisdiction,body:{id:e.id,...e.customer}})}async function r_(e){return Kg(`DELETE`,`/v1/customers:delete`,{vertical:e.vertical,jurisdiction:e.jurisdiction,body:{id:e.id}})}async function i_(e){return Kg(`GET`,`/v1/appointments:list`,{vertical:e.vertical,jurisdiction:e.jurisdiction})}async function a_(e){return Kg(`POST`,`/v1/appointments:create`,{vertical:e.vertical,jurisdiction:e.jurisdiction,body:e.appointment})}async function o_(e){return Kg(`PUT`,`/v1/appointments:update`,{vertical:e.vertical,jurisdiction:e.jurisdiction,body:{id:e.id,...e.appointment}})}async function s_(e){return Kg(`DELETE`,`/v1/appointments:delete`,{vertical:e.vertical,jurisdiction:e.jurisdiction,body:{id:e.id}})}async function c_(e){let t=`/v1/ai:activity`;return e.limit&&(t+=`?limit=${e.limit}`),Kg(`GET`,t,{vertical:e.vertical,jurisdiction:e.jurisdiction})}async function l_(e){return Kg(`GET`,`/v1/integrations:list`,{vertical:e.vertical,jurisdiction:e.jurisdiction})}async function u_(e){return Kg(`POST`,`/v1/integrations:disconnect`,{vertical:e.vertical,jurisdiction:e.jurisdiction,body:{id:e.integrationId}})}async function d_(e){return Kg(`POST`,`/v1/integrations:sync`,{vertical:e.vertical,jurisdiction:e.jurisdiction,body:{id:e.integrationId}})}async function f_(e){return Kg(`POST`,`/v1/analyst:analyze`,{vertical:e.vertical,jurisdiction:e.jurisdiction,body:{deal:e.deal}})}async function p_(e){return Kg(`GET`,`/v1/analyst:deals${e.limit?`?limit=${e.limit}`:``}`,{vertical:e.vertical,jurisdiction:e.jurisdiction})}async function m_(e){return Kg(`GET`,`/v1/me:memberships`,{vertical:e.vertical,jurisdiction:e.jurisdiction})}async function h_(e){return Kg(`GET`,`/v1/wallet:assets`,{vertical:e.vertical,jurisdiction:e.jurisdiction})}async function g_(e){return Kg(`GET`,`/v1/wallet:tokens:list`,{vertical:e.vertical,jurisdiction:e.jurisdiction})}async function __(e){return Kg(`POST`,`/v1/wallet:token:create`,{vertical:e.vertical,jurisdiction:e.jurisdiction,body:e.token})}async function v_(e){return Kg(`GET`,`/v1/wallet:captables:list`,{vertical:e.vertical,jurisdiction:e.jurisdiction})}async function y_(e){return Kg(`POST`,`/v1/wallet:captable:create`,{vertical:e.vertical,jurisdiction:e.jurisdiction,body:e.capTable})}function b_({children:e,currentSection:t,onNavigate:n,onBackToHub:r}){let[i,a]=(0,_.useState)(!1),[o,s]=(0,_.useState)(null);(0,_.useEffect)(()=>{c()},[]);async function c(){try{let e=await m_({vertical:localStorage.getItem(`VERTICAL`)||`auto`,jurisdiction:localStorage.getItem(`JURISDICTION`)||`IL`});if(e.ok&&e.memberships&&e.memberships.length>0){let t=e.memberships[0].tenantId,n=e.tenants?.[t];s(n)}}catch(e){console.error(`Failed to load tenant info:`,e)}}let[l,u]=(0,_.useState)(!1);return(0,$.jsxs)(`div`,{className:`appShell`,children:[(0,$.jsxs)(`div`,{className:`topbar`,children:[(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>a(!i),"aria-label":`Toggle menu`,children:``}),(0,$.jsx)(`div`,{className:`topbarTitle`,children:`TitleApp`}),o&&(0,$.jsxs)(`div`,{style:{marginLeft:`auto`,display:`flex`,alignItems:`center`,gap:`12px`,padding:`8px 16px`,background:`rgba(124, 58, 237, 0.1)`,borderRadius:`12px`,border:`1px solid rgba(124, 58, 237, 0.2)`},children:[o.logoUrl?(0,$.jsx)(`img`,{src:o.logoUrl,alt:o.name||`Business logo`,style:{width:`32px`,height:`32px`,borderRadius:`50%`,objectFit:`cover`}}):(0,$.jsx)(`div`,{style:{width:`32px`,height:`32px`,borderRadius:`50%`,background:`linear-gradient(135deg, rgb(124, 58, 237) 0%, rgb(147, 51, 234) 100%)`,display:`flex`,alignItems:`center`,justifyContent:`center`,color:`white`,fontWeight:600,fontSize:`14px`},children:o.name?.charAt(0)?.toUpperCase()||`B`}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600,color:`var(--text)`,whiteSpace:`nowrap`},children:(()=>{if((localStorage.getItem(`VERTICAL`)||`auto`)===`consumer`){let e=(o.name||``).split(` `)[0];return e?`${e}'s Vault`:`My Vault`}return o.name||`Business`})()})]}),!o&&(0,$.jsx)(`div`,{className:`pill`,children:`Business`})]}),i&&(0,$.jsx)(`div`,{className:`backdrop`,onClick:()=>a(!1),"aria-hidden":`true`}),(0,$.jsx)(`div`,{className:i?`sidebar sidebarOpen`:`sidebar`,children:(0,$.jsx)(zg,{currentSection:t,onNavigate:n,onClose:()=>a(!1),tenantName:o?.name,onBackToHub:r})}),(0,$.jsxs)(`div`,{className:`dualPanel`,children:[(0,$.jsx)(`main`,{className:`main`,children:e}),(0,$.jsx)(`aside`,{className:`chatSidebar`,children:(0,$.jsx)(Hg,{currentSection:t})})]}),(0,$.jsx)(`button`,{className:`chatToggleTab`,onClick:()=>u(!l),"aria-label":l?`Close chat`:`Open chat`,children:l?(0,$.jsxs)(`svg`,{width:`24`,height:`24`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:[(0,$.jsx)(`line`,{x1:`18`,y1:`6`,x2:`6`,y2:`18`}),(0,$.jsx)(`line`,{x1:`6`,y1:`6`,x2:`18`,y2:`18`})]}):(0,$.jsx)(`svg`,{width:`24`,height:`24`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:(0,$.jsx)(`path`,{d:`M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z`})})}),l&&(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{className:`mobileChatBackdrop`,onClick:()=>u(!1)}),(0,$.jsx)(`div`,{className:`mobileChatPanel`,children:(0,$.jsx)(Hg,{currentSection:t})})]})]})}var x_={auto:`AD`,analyst:`IA`,"real-estate":`RE`,aviation:`AV`},S_=[{id:`auto`,label:`Auto Dealer`,description:`Manage inventory, sales, service, and compliance`,cosManages:[`Vehicle inventory and aging alerts`,`Customer outreach and lead gen`,`F&I product recommendations`,`Service scheduling and upsells`]},{id:`analyst`,label:`Investment Analyst`,description:`Analyze deals, portfolio, and risk`,cosManages:[`Deal screening and analysis`,`Portfolio risk monitoring`,`Due diligence workflows`,`Investment memo generation`]},{id:`real-estate`,label:`Real Estate`,description:`Manage listings, tenants, and closings`,cosManages:[`Property listings and showings`,`Tenant management and leases`,`Maintenance requests`,`Closing coordination`]},{id:`aviation`,label:`Aviation`,description:`Track aircraft, flights, and certifications`,cosManages:[`Aircraft records and maintenance`,`Flight hour tracking`,`Certification management`,`Compliance documentation`]}],C_=[{code:`IL`,label:`Illinois`},{code:`FL`,label:`Florida`},{code:`CA`,label:`California`},{code:`TX`,label:`Texas`}];function w_({existingWorkspaces:e,onCreated:t,onCancel:n}){let[r,i]=(0,_.useState)(1),[a,o]=(0,_.useState)(null),[s,c]=(0,_.useState)(``),[l,u]=(0,_.useState)(``),[d,f]=(0,_.useState)(``),[p,m]=(0,_.useState)(!1),[h,g]=(0,_.useState)(null),v=S_.find(e=>e.id===a);function y(e){o(e),i(2)}function b(){if(!s.trim()){g(`Business name is required`);return}if(!d){g(`Please select a state`);return}if(e.find(e=>e.vertical===a&&e.jurisdiction===d)){g(`You already have a ${v.label} workspace for ${d}`);return}g(null),i(3)}async function x(){m(!0),g(null);try{let e=localStorage.getItem(`ID_TOKEN`),n=await(await fetch(`https://titleapp-frontdoor.titleapp-core.workers.dev/api?path=/v1/workspaces`,{method:`POST`,headers:{Authorization:`Bearer ${e}`,"Content-Type":`application/json`},body:JSON.stringify({vertical:a,name:s.trim(),tagline:l.trim(),jurisdiction:d})})).json();n.ok?t(n.workspace):(g(n.error||`Failed to create workspace`),m(!1))}catch(e){console.error(`Create workspace failed:`,e),g(`Failed to create workspace`),m(!1)}}let S=C_.find(e=>e.code===d)?.label||d;return(0,$.jsx)(`div`,{style:{minHeight:`100vh`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`#f8fafc`,padding:20},children:(0,$.jsxs)(`div`,{style:{maxWidth:640,width:`100%`},children:[(0,$.jsxs)(`div`,{style:{marginBottom:24,display:`flex`,alignItems:`center`,justifyContent:`space-between`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:20,fontWeight:700,color:`#7c3aed`},children:`TitleApp AI`}),(0,$.jsx)(`div`,{style:{fontSize:14,color:`#64748b`,marginTop:2},children:`Add a Business Workspace`})]}),(0,$.jsx)(`button`,{onClick:n,style:{background:`none`,border:`1px solid #e2e8f0`,borderRadius:8,padding:`6px 16px`,cursor:`pointer`,color:`#64748b`,fontSize:14},children:`Cancel`})]}),(0,$.jsx)(`div`,{style:{display:`flex`,gap:8,marginBottom:32},children:[1,2,3].map(e=>(0,$.jsx)(`div`,{style:{flex:1,height:4,borderRadius:2,background:e<=r?`#7c3aed`:`#e2e8f0`,transition:`background 0.2s`}},e))}),r===1&&(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:18,fontWeight:600,color:`#1e293b`,marginBottom:20},children:`What kind of business are you running?`}),(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(auto-fill, minmax(140px, 1fr))`,gap:12},children:S_.map(e=>(0,$.jsxs)(`div`,{onClick:()=>y(e.id),style:{border:`1px solid #e2e8f0`,borderRadius:12,padding:20,cursor:`pointer`,textAlign:`center`,transition:`all 0.2s`,background:`white`},onMouseEnter:e=>{e.currentTarget.style.borderColor=`#7c3aed`,e.currentTarget.style.background=`#faf5ff`},onMouseLeave:e=>{e.currentTarget.style.borderColor=`#e2e8f0`,e.currentTarget.style.background=`white`},children:[(0,$.jsx)(`div`,{style:{width:40,height:40,borderRadius:8,backgroundColor:`#f1f5f9`,display:`flex`,alignItems:`center`,justifyContent:`center`,fontSize:14,fontWeight:700,color:`#475569`,marginBottom:8,margin:`0 auto 8px`,letterSpacing:1},children:x_[e.id]||e.id.slice(0,2).toUpperCase()}),(0,$.jsx)(`div`,{style:{fontWeight:600,fontSize:14,color:`#1e293b`,marginBottom:4},children:e.label}),(0,$.jsx)(`div`,{style:{fontSize:12,color:`#64748b`,lineHeight:1.4},children:e.description})]},e.id))}),(0,$.jsx)(`div`,{style:{textAlign:`center`,marginTop:20,color:`#94a3b8`,fontSize:13},children:`$9/month per workspace  14-day free trial  Cancel anytime`})]}),r===2&&(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:18,fontWeight:600,color:`#1e293b`,marginBottom:20},children:`Tell us about your business`}),(0,$.jsxs)(`div`,{style:{background:`white`,borderRadius:12,padding:24},children:[(0,$.jsxs)(`div`,{style:{marginBottom:16},children:[(0,$.jsx)(`label`,{style:{display:`block`,fontSize:13,fontWeight:600,color:`#334155`,marginBottom:6},children:`Business Name`}),(0,$.jsx)(`input`,{type:`text`,value:s,onChange:e=>c(e.target.value),placeholder:`Demo Motors`,maxLength:200,style:{width:`100%`,padding:`10px 12px`,border:`1px solid #d1d5db`,borderRadius:8,fontSize:14,outline:`none`,boxSizing:`border-box`},onFocus:e=>e.target.style.borderColor=`#7c3aed`,onBlur:e=>e.target.style.borderColor=`#d1d5db`})]}),(0,$.jsxs)(`div`,{style:{marginBottom:16},children:[(0,$.jsx)(`label`,{style:{display:`block`,fontSize:13,fontWeight:600,color:`#334155`,marginBottom:6},children:`Tagline (optional)`}),(0,$.jsx)(`input`,{type:`text`,value:l,onChange:e=>u(e.target.value),placeholder:`Toyota Dealership \\u2014 Houston, TX`,maxLength:500,style:{width:`100%`,padding:`10px 12px`,border:`1px solid #d1d5db`,borderRadius:8,fontSize:14,outline:`none`,boxSizing:`border-box`},onFocus:e=>e.target.style.borderColor=`#7c3aed`,onBlur:e=>e.target.style.borderColor=`#d1d5db`})]}),(0,$.jsxs)(`div`,{style:{marginBottom:8},children:[(0,$.jsx)(`label`,{style:{display:`block`,fontSize:13,fontWeight:600,color:`#334155`,marginBottom:6},children:`What state do you operate in?`}),(0,$.jsxs)(`select`,{value:d,onChange:e=>f(e.target.value),style:{width:`100%`,padding:`10px 12px`,border:`1px solid #d1d5db`,borderRadius:8,fontSize:14,outline:`none`,background:`white`,boxSizing:`border-box`},children:[(0,$.jsx)(`option`,{value:``,children:`Select a state`}),C_.map(e=>(0,$.jsx)(`option`,{value:e.code,children:e.label},e.code))]}),(0,$.jsx)(`div`,{style:{fontSize:12,color:`#94a3b8`,marginTop:6},children:`This determines your compliance rules and tax structure`})]}),h&&(0,$.jsx)(`div`,{style:{color:`#dc2626`,fontSize:13,marginTop:12},children:h})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:12,marginTop:20},children:[(0,$.jsx)(`button`,{onClick:()=>{i(1),g(null)},style:{padding:`10px 20px`,border:`1px solid #e2e8f0`,borderRadius:8,background:`white`,cursor:`pointer`,fontSize:14,color:`#64748b`},children:`Back`}),(0,$.jsx)(`button`,{onClick:b,style:{flex:1,padding:`10px 20px`,border:`none`,borderRadius:8,background:`#7c3aed`,color:`white`,cursor:`pointer`,fontSize:14,fontWeight:600},children:`Continue`})]})]}),r===3&&v&&(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:18,fontWeight:600,color:`#1e293b`,marginBottom:20},children:`Ready to launch?`}),(0,$.jsxs)(`div`,{style:{background:`white`,borderRadius:12,padding:24},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:12,marginBottom:16},children:[(0,$.jsx)(`div`,{style:{width:36,height:36,borderRadius:8,backgroundColor:`#f1f5f9`,display:`flex`,alignItems:`center`,justifyContent:`center`,fontSize:13,fontWeight:700,color:`#475569`,letterSpacing:1,flexShrink:0},children:x_[v.id]||v.id.slice(0,2).toUpperCase()}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600,fontSize:16,color:`#1e293b`},children:s}),(0,$.jsxs)(`div`,{style:{fontSize:13,color:`#64748b`},children:[v.label,`  `,S]})]})]}),l&&(0,$.jsx)(`div`,{style:{color:`#475569`,fontSize:14,marginBottom:16},children:l}),(0,$.jsxs)(`div`,{style:{marginBottom:16},children:[(0,$.jsx)(`div`,{style:{fontSize:13,fontWeight:600,color:`#334155`,marginBottom:8},children:`Your AI assistant will manage:`}),v.cosManages.map((e,t)=>(0,$.jsxs)(`div`,{style:{fontSize:13,color:`#475569`,padding:`3px 0`,paddingLeft:16,position:`relative`},children:[(0,$.jsx)(`span`,{style:{position:`absolute`,left:0},children:``}),e,t===v.cosManages.length-1&&d?` (${d} rules)`:``]},t))]}),(0,$.jsx)(`div`,{style:{background:`#f8fafc`,borderRadius:8,padding:`10px 14px`,fontSize:13,color:`#64748b`},children:`14-day free trial, then $9/month`}),h&&(0,$.jsx)(`div`,{style:{color:`#dc2626`,fontSize:13,marginTop:12},children:h})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:12,marginTop:20},children:[(0,$.jsx)(`button`,{onClick:()=>{i(2),g(null)},style:{padding:`10px 20px`,border:`1px solid #e2e8f0`,borderRadius:8,background:`white`,cursor:`pointer`,fontSize:14,color:`#64748b`},children:`Back`}),(0,$.jsx)(`button`,{onClick:x,disabled:p,style:{flex:1,padding:`12px 20px`,border:`none`,borderRadius:8,background:p?`#a78bfa`:`#7c3aed`,color:`white`,cursor:p?`default`:`pointer`,fontSize:15,fontWeight:600},children:p?`Creating...`:`Start Free Trial`})]})]})]})})}var T_={consumer:`PV`,analyst:`IA`,auto:`AD`,"real-estate":`RE`,aviation:`AV`};function E_(e){if(!e)return 0;let t=(e.toDate?e.toDate():new Date(e))-Date.now();return Math.max(0,Math.ceil(t/(1e3*60*60*24)))}function D_({workspace:e,onLaunch:t}){let[n,r]=(0,_.useState)(!1),i={active:{label:e.monthlyPrice===0?`FREE`:`$${e.monthlyPrice/100}/mo`,color:`#16a34a`},trial:{label:`Trial \u00B7 ${E_(e.trialEndsAt)} days left`,color:`#d97706`},suspended:{label:`Suspended`,color:`#dc2626`}}[e.status]||{label:e.status,color:`#6b7280`},a=T_[e.vertical]||e.vertical?.slice(0,2).toUpperCase()||`??`;return(0,$.jsxs)(`div`,{style:{border:n?`1px solid #7c3aed`:`1px solid #e2e8f0`,borderRadius:12,padding:20,cursor:`pointer`,transition:`all 0.2s`,background:n?`#faf5ff`:`white`,minWidth:180,flex:`1 1 180px`,maxWidth:240},onClick:()=>t(e),onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:[(0,$.jsx)(`div`,{style:{width:40,height:40,borderRadius:8,backgroundColor:`#f1f5f9`,display:`flex`,alignItems:`center`,justifyContent:`center`,fontSize:14,fontWeight:700,color:`#475569`,marginBottom:8,letterSpacing:1},children:a}),(0,$.jsx)(`div`,{style:{fontWeight:600,fontSize:16,color:`#1e293b`},children:e.name}),(0,$.jsx)(`div`,{style:{color:`#64748b`,fontSize:13,marginBottom:12,minHeight:18},children:e.tagline||``}),(0,$.jsx)(`div`,{style:{display:`inline-block`,padding:`2px 10px`,borderRadius:20,fontSize:12,fontWeight:600,backgroundColor:i.color+`15`,color:i.color},children:i.label}),(0,$.jsx)(`div`,{style:{marginTop:12},children:(0,$.jsx)(`button`,{style:{width:`100%`,padding:`8px 0`,backgroundColor:`#7c3aed`,color:`white`,border:`none`,borderRadius:8,fontWeight:600,cursor:`pointer`,fontSize:14},children:`Launch `})})]})}function O_({workspaces:e}){let t=e.filter(e=>e.status===`active`&&e.monthlyPrice>0).reduce((e,t)=>e+t.monthlyPrice,0);return(0,$.jsxs)(`div`,{style:{marginTop:32,padding:20,backgroundColor:`#f8fafc`,borderRadius:12},children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:12,color:`#1e293b`},children:`Monthly Summary`}),e.map(e=>(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,padding:`4px 0`,fontSize:14},children:[(0,$.jsx)(`span`,{style:{color:`#334155`},children:e.name}),(0,$.jsx)(`span`,{style:{color:`#64748b`},children:e.monthlyPrice===0?`FREE`:e.status===`trial`?`Trial (${E_(e.trialEndsAt)} days)`:`$${e.monthlyPrice/100}/mo`})]},e.id)),(0,$.jsxs)(`div`,{style:{borderTop:`1px solid #e2e8f0`,marginTop:8,paddingTop:8,display:`flex`,justifyContent:`space-between`,fontWeight:600,fontSize:14},children:[(0,$.jsx)(`span`,{style:{color:`#1e293b`},children:`Total`}),(0,$.jsxs)(`span`,{style:{color:`#1e293b`},children:[`$`,t/100,`/mo`]})]})]})}function k_({userName:e,onLaunch:t}){let[n,r]=(0,_.useState)(null),[i,a]=(0,_.useState)(null),[o,s]=(0,_.useState)(!1);async function c(){try{let e=localStorage.getItem(`ID_TOKEN`),t=await(await fetch(`https://titleapp-frontdoor.titleapp-core.workers.dev/api?path=/v1/workspaces`,{headers:{Authorization:`Bearer ${e}`}})).json();t.ok?r(t.workspaces):a(t.error||`Failed to load workspaces`)}catch(e){console.error(`Failed to load workspaces:`,e),a(`Failed to load workspaces`)}}(0,_.useEffect)(()=>{c()},[]);function l(e){localStorage.setItem(`VERTICAL`,e.vertical),localStorage.setItem(`WORKSPACE_ID`,e.id),localStorage.setItem(`WORKSPACE_NAME`,e.name),localStorage.setItem(`COMPANY_NAME`,e.name),localStorage.setItem(`TENANT_NAME`,e.name),e.jurisdiction?localStorage.setItem(`JURISDICTION`,e.jurisdiction):localStorage.removeItem(`JURISDICTION`),e.cosConfig&&localStorage.setItem(`COS_CONFIG`,JSON.stringify(e.cosConfig)),t(e)}function u(e){s(!1),c().then(()=>{l(e)})}return o?(0,$.jsx)(w_,{existingWorkspaces:n||[],onCreated:u,onCancel:()=>s(!1)}):(0,$.jsx)(`div`,{style:{minHeight:`100vh`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`#f8fafc`,padding:20},children:(0,$.jsxs)(`div`,{style:{maxWidth:720,width:`100%`},children:[(0,$.jsxs)(`div`,{style:{textAlign:`center`,marginBottom:32},children:[(0,$.jsx)(`div`,{style:{fontSize:20,fontWeight:700,color:`#7c3aed`,marginBottom:8},children:`TitleApp AI`}),(0,$.jsx)(`div`,{style:{fontSize:18,fontWeight:600,color:`#1e293b`},children:e?`Welcome back, ${e}`:`Welcome back`})]}),(0,$.jsxs)(`div`,{style:{marginBottom:24},children:[(0,$.jsx)(`div`,{style:{fontSize:12,fontWeight:600,color:`#94a3b8`,textTransform:`uppercase`,letterSpacing:1,marginBottom:16},children:`Your Workspaces`}),n===null&&!i&&(0,$.jsx)(`div`,{style:{textAlign:`center`,color:`#6b7280`,padding:40},children:`Loading...`}),i&&(0,$.jsx)(`div`,{style:{textAlign:`center`,color:`#dc2626`,padding:40},children:i}),n&&(0,$.jsx)(`div`,{style:{display:`flex`,flexWrap:`wrap`,gap:16},children:n.map(e=>(0,$.jsx)(D_,{workspace:e,onLaunch:l},e.id))})]}),(0,$.jsxs)(`div`,{onClick:()=>s(!0),style:{border:`2px dashed #cbd5e1`,borderRadius:12,padding:`20px 24px`,cursor:`pointer`,textAlign:`center`,transition:`all 0.2s`,marginBottom:8},onMouseEnter:e=>{e.currentTarget.style.borderColor=`#7c3aed`,e.currentTarget.style.background=`#faf5ff`},onMouseLeave:e=>{e.currentTarget.style.borderColor=`#cbd5e1`,e.currentTarget.style.background=`transparent`},children:[(0,$.jsx)(`div`,{style:{fontWeight:600,color:`#1e293b`,fontSize:15},children:`+ Add a Business Workspace`}),(0,$.jsx)(`div`,{style:{color:`#64748b`,fontSize:13,marginTop:4},children:`$9/month per workspace  14-day trial`})]}),n&&n.length>0&&(0,$.jsx)(O_,{workspaces:n})]})})}var A_=[`#7c3aed`,`#06b6d4`,`#10b981`,`#f59e0b`,`#ef4444`],j_={creation:{icon:`C`,color:`#7c3aed`,label:`Created`},maintenance:{icon:`M`,color:`#06b6d4`,label:`Maintenance`},transfer:{icon:`T`,color:`#7c3aed`,label:`Transfer`},inspection:{icon:`I`,color:`#22c55e`,label:`Inspection`},update:{icon:`U`,color:`#f59e0b`,label:`Update`},payment:{icon:`P`,color:`#16a34a`,label:`Payment`},verification:{icon:`V`,color:`#6366f1`,label:`Verification`},note:{icon:`N`,color:`#64748b`,label:`Note`},attestation:{icon:`A`,color:`#7c3aed`,label:`Attestation`}};function M_(e){if(!e)return``;let t=e.toDate?e.toDate():e._seconds?new Date(e._seconds*1e3):new Date(e);return isNaN(t.getTime())?``:t.toLocaleDateString(`en-US`,{month:`short`,day:`numeric`})}function N_(e){let t=e.metadata||{},n=Number(t.estimatedValue)||Number(t.value)||Number(t.marketValue)||Number(t.purchasePrice)||Number(e.estimatedValue)||Number(e.value)||Number(e.price)||0;if(n>0)return n;let r=Number(t.monthlyPayment)||0;return r>0?r*12:0}function P_(e){let t=e.metadata||{};return t.title?t.title:t.make?`${t.year||``} ${t.make} ${t.model||``}`.trim():t.credentialName?t.credentialName:t.documentName?t.documentName:t.address?t.address:t.school?t.school:`Untitled`}function F_(){let e=Os().currentUser,[t,n]=(0,_.useState)([]),[r,i]=(0,_.useState)([]),[a,o]=(0,_.useState)(0),[s,c]=(0,_.useState)(!0);(0,_.useEffect)(()=>{if(!e){c(!1);return}l()},[e]);async function l(){try{n((await Yg({vertical:`consumer`,jurisdiction:`GLOBAL`})).inventory||[]);try{let e=(await qg({vertical:`consumer`,jurisdiction:`GLOBAL`})).entries||[];i(e.slice(0,5)),o(e.length)}catch(e){console.warn(`Logbook query failed:`,e.message)}}catch(e){console.error(`Failed to load consumer dashboard:`,e)}finally{c(!1)}}let u=t.reduce((e,t)=>e+N_(t),0),d=[...t].map(e=>({...e,_value:N_(e),_title:P_(e)})).sort((e,t)=>t._value-e._value).slice(0,5),f=t.length,p=t.length>0,m=d.reduce((e,t)=>e+t._value,0)||1,h=0;return s?(0,$.jsx)(`div`,{className:`card`,style:{padding:`48px`,textAlign:`center`},children:(0,$.jsx)(`div`,{style:{fontSize:`15px`,color:`#64748b`},children:`Loading your Vault...`})}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{className:`card`,style:{marginBottom:`14px`,padding:`28px 24px`,background:`linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%)`,border:`1px solid #e9d5ff`},children:u>0?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,fontWeight:600,color:`#7c3aed`,textTransform:`uppercase`,letterSpacing:`0.06em`,marginBottom:`8px`},children:`Total Vault Value`}),(0,$.jsxs)(`div`,{style:{fontSize:`36px`,fontWeight:900,color:`#1e293b`,lineHeight:1.1},children:[`$`,u.toLocaleString()]}),(0,$.jsxs)(`div`,{style:{fontSize:`13px`,color:`#64748b`,marginTop:`6px`},children:[`Across `,f,` Digital Title Certificate`,f===1?``:`s`]})]}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,fontWeight:600,color:`#7c3aed`,textTransform:`uppercase`,letterSpacing:`0.06em`,marginBottom:`8px`},children:`Your Vault`}),(0,$.jsxs)(`div`,{style:{fontSize:`36px`,fontWeight:900,color:`#1e293b`,lineHeight:1.1},children:[f,` DTC`,f===1?``:`s`]}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`,marginTop:`6px`},children:p?`Add estimated values to your records to see your total vault value`:`Add your first item to start building your Vault`})]})}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`3fr 2fr`,gap:`14px`,marginBottom:`14px`},children:[(0,$.jsxs)(`div`,{className:`card`,style:{padding:`20px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`16px`,color:`#1e293b`,marginBottom:`4px`},children:`Top Valued Assets`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`,marginBottom:`16px`},children:`Your five most valuable items by estimated worth`}),d.length>0&&d.some(e=>e._value>0)?(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`20px`,alignItems:`center`},children:[(0,$.jsxs)(`div`,{style:{position:`relative`,width:`120px`,height:`120px`,flexShrink:0},children:[(0,$.jsx)(`svg`,{viewBox:`0 0 36 36`,style:{width:`120px`,height:`120px`,transform:`rotate(-90deg)`},children:d.filter(e=>e._value>0).map((e,t)=>{let n=e._value/m*100,r=h;return h+=n,(0,$.jsx)(`circle`,{cx:`18`,cy:`18`,r:`14`,fill:`none`,stroke:A_[t%A_.length],strokeWidth:`5`,strokeDasharray:`${n} ${100-n}`,strokeDashoffset:-r,style:{transition:`stroke-dasharray 0.3s`}},t)})}),(0,$.jsxs)(`div`,{style:{position:`absolute`,top:`50%`,left:`50%`,transform:`translate(-50%, -50%)`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:800,color:`#1e293b`},children:d.filter(e=>e._value>0).length}),(0,$.jsx)(`div`,{style:{fontSize:`10px`,color:`#94a3b8`},children:`items`})]})]}),(0,$.jsx)(`div`,{style:{flex:1,display:`flex`,flexDirection:`column`,gap:`6px`},children:d.filter(e=>e._value>0).map((e,t)=>(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{width:`10px`,height:`10px`,borderRadius:`3px`,background:A_[t%A_.length],flexShrink:0}}),(0,$.jsx)(`div`,{style:{flex:1,fontSize:`13px`,color:`#334155`,overflow:`hidden`,textOverflow:`ellipsis`,whiteSpace:`nowrap`},children:e._title}),(0,$.jsxs)(`div`,{style:{fontSize:`13px`,fontWeight:600,color:`#1e293b`,flexShrink:0},children:[`$`,e._value.toLocaleString()]})]},t))})]}):(0,$.jsx)(`div`,{style:{padding:`20px 0`,textAlign:`center`,color:`#94a3b8`,fontSize:`14px`},children:p?`No items have estimated values yet. Add values to your records to see them here.`:`Add items to your Vault to see your top assets.`})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:[(0,$.jsx)(`div`,{className:`card`,style:{padding:`20px`,flex:1},children:(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`},children:[(0,$.jsx)(`div`,{style:{width:`44px`,height:`44px`,borderRadius:`12px`,background:`linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%)`,display:`flex`,alignItems:`center`,justifyContent:`center`,flexShrink:0},children:(0,$.jsx)(`svg`,{width:`22`,height:`22`,viewBox:`0 0 24 24`,fill:`none`,stroke:`#7c3aed`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:(0,$.jsx)(`path`,{d:`M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z`})})}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:`28px`,fontWeight:900,color:`#1e293b`,lineHeight:1},children:f}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`,marginTop:`2px`},children:`Digital Title Certificates`})]})]})}),(0,$.jsx)(`div`,{className:`card`,style:{padding:`20px`,flex:1},children:(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`},children:[(0,$.jsx)(`div`,{style:{width:`44px`,height:`44px`,borderRadius:`12px`,background:`linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%)`,display:`flex`,alignItems:`center`,justifyContent:`center`,flexShrink:0},children:(0,$.jsxs)(`svg`,{width:`22`,height:`22`,viewBox:`0 0 24 24`,fill:`none`,stroke:`#059669`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,$.jsx)(`path`,{d:`M4 19.5A2.5 2.5 0 0 1 6.5 17H20`}),(0,$.jsx)(`path`,{d:`M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z`})]})}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:`28px`,fontWeight:900,color:`#1e293b`,lineHeight:1},children:a}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`,marginTop:`2px`},children:`Total logbook entries`})]})]})})]})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr 1fr`,gap:`14px`},children:[(0,$.jsxs)(`div`,{className:`card`,style:{padding:`20px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`15px`,color:`#1e293b`,marginBottom:`4px`},children:`Wallet Summary`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`,marginBottom:`14px`},children:`Connected wallets and on-chain assets`}),(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`,padding:`10px 12px`,background:`#f8fafc`,borderRadius:`10px`,border:`1px solid #f1f5f9`,marginBottom:`10px`},children:[(0,$.jsx)(`div`,{style:{width:`8px`,height:`8px`,borderRadius:`50%`,background:localStorage.getItem(`VAULT_BLOCKCHAIN_ENABLED`)===`true`?`#16a34a`:`#94a3b8`}}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#334155`},children:localStorage.getItem(`VAULT_BLOCKCHAIN_ENABLED`)===`true`?`TitleApp Wallet -- Connected`:`No wallets connected`})]}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#94a3b8`,marginBottom:`12px`},children:`0 on-chain assets`}),(0,$.jsx)(`button`,{onClick:()=>window.dispatchEvent(new CustomEvent(`ta:navigate`,{detail:{section:`my-wallet`}})),style:{fontSize:`13px`,fontWeight:600,color:`#7c3aed`,background:`none`,border:`none`,cursor:`pointer`,padding:0},children:`Manage Wallets `})]}),(0,$.jsxs)(`div`,{className:`card`,style:{padding:`20px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`15px`,color:`#1e293b`,marginBottom:`4px`},children:`My GPTs`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`,marginBottom:`14px`},children:`Your specialized AI assistants`}),(0,$.jsx)(`div`,{style:{display:`flex`,flexWrap:`wrap`,gap:`6px`,marginBottom:`14px`},children:(0,$.jsx)(`span`,{style:{fontSize:`12px`,fontWeight:600,padding:`4px 10px`,borderRadius:`20px`,background:`#f3e8ff`,color:`#7c3aed`},children:`AI Assistant`})}),(0,$.jsx)(`button`,{onClick:()=>window.dispatchEvent(new CustomEvent(`ta:navigate`,{detail:{section:`ai-chats`}})),style:{fontSize:`13px`,fontWeight:600,color:`#7c3aed`,background:`none`,border:`none`,cursor:`pointer`,padding:0},children:`Go to My GPTs `})]}),(0,$.jsxs)(`div`,{className:`card`,style:{padding:`20px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`15px`,color:`#1e293b`,marginBottom:`4px`},children:`Recent Activity`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`,marginBottom:`14px`},children:`Latest updates across your Vault`}),r.length>0?(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`8px`},children:r.slice(0,4).map(e=>{let t=j_[e.entryType]||j_.note;return(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{width:`24px`,height:`24px`,borderRadius:`6px`,background:`${t.color}15`,border:`1px solid ${t.color}30`,display:`grid`,placeItems:`center`,fontSize:`11px`,fontWeight:700,color:t.color,flexShrink:0},children:t.icon}),(0,$.jsx)(`div`,{style:{flex:1,overflow:`hidden`},children:(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#334155`,overflow:`hidden`,textOverflow:`ellipsis`,whiteSpace:`nowrap`},children:e.dtcTitle||e.data?.description||t.label})}),(0,$.jsx)(`div`,{style:{fontSize:`11px`,color:`#94a3b8`,flexShrink:0},children:M_(e.createdAt)})]},e.id)})}):(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#94a3b8`},children:`No activity yet`}),r.length>0&&(0,$.jsx)(`button`,{onClick:()=>window.dispatchEvent(new CustomEvent(`ta:navigate`,{detail:{section:`my-logbook`}})),style:{fontSize:`13px`,fontWeight:600,color:`#7c3aed`,background:`none`,border:`none`,cursor:`pointer`,padding:0,marginTop:`10px`},children:`View All `})]})]})]})}function I_(){let e=localStorage.getItem(`VERTICAL`)||`auto`,t=e===`consumer`,n=e.toLowerCase()===`analyst`,r=e===`auto`,[i,a]=(0,_.useState)({revenue:{value:`$0`,trend:`+0%`},activeDeals:{value:`0`,trend:`+0`},aiConversations:{value:`0`,trend:`+0`},customers:{value:`0`,trend:`+0`}}),[o,s]=(0,_.useState)([]),[c,l]=(0,_.useState)(!1),[u,d]=(0,_.useState)(``),[f,p]=(0,_.useState)({actions:0,hoursSaved:0,valueSaved:0}),[m,h]=(0,_.useState)([{id:1,type:`hot_lead`,badge:`Hot Lead`,badgeColor:`#dc2626`,title:`Lease Expiring -- Maria Gonzalez`,detail:`2024 Corolla LE lease expires in 60 days. Cash buyer per notes. We have 3 new Corollas and 2 CPO in stock.`,action:`Send personalized upgrade offer`,potentialRevenue:`$2,800`,urgency:`high`,assignedTo:{type:`ai`,name:`Alex (AI)`}},{id:2,type:`service_upsell`,badge:`Service Upsell`,badgeColor:`#2563eb`,title:`High-Mileage Service -- Charles Cox`,detail:`2023 Tacoma TRD Sport, 9 service visits. Due for 60K service ($449). Factory warranty expiring -- candidate for Toyota Extra Care Gold ($2,995).`,action:`Schedule service + pitch extended warranty`,potentialRevenue:`$3,450`,urgency:`medium`,assignedTo:{type:`human`,name:`Jake Rivera`}},{id:3,type:`aging_inventory`,badge:`Aging Stock`,badgeColor:`#d97706`,title:`143 Days on Lot -- 2021 BMW X3 xDrive30i`,detail:`Stock U30000. Listed $34,169, market says $31,500. Losing $500/month in floor plan interest. Recommend markdown to $31,999 + Facebook Marketplace push.`,action:`Reprice + generate listing`,potentialRevenue:`Recover $31K`,urgency:`high`,assignedTo:{type:`ai`,name:`Alex (AI)`}},{id:4,type:`conquest`,badge:`Conquest`,badgeColor:`#16a34a`,title:`Trade-Up Opportunity -- Mark Brown`,detail:`Excellent satisfaction, 7 service visits. Drives 2025 Corolla Cross LE. Cross-sell to RAV4 upgrade -- we have 4 RAV4s aging 60+ days.`,action:`Send trade-in appraisal offer`,potentialRevenue:`$4,200`,urgency:`medium`,assignedTo:{type:`human`,name:`Lisa Chen`}}]),[g]=(0,_.useState)([`AI sent service reminder to Lawrence Foster -- confirmed for Monday 7:00 AM`,`AI generated Facebook listing for 2025 Camry LE (Stock N25000, 70 days)`,`Price alert: 2022 Ford Explorer XLT -- 126 days on lot -- markdown recommended`,`AI identified 4 lease-expiring customers for Q1 outreach`]),[v,y]=(0,_.useState)([{id:1,name:`Parkview Apartments -- 48 Units`,location:`Phoenix, AZ`,type:`Multifamily`,reason:`CMBS loan matures Aug 2026. Matches your multifamily criteria.`,value:`$8.2M`,risk:62,source:`Public Records -- Maturing CMBS`},{id:2,name:`Desert Ridge Office Plaza`,location:`Scottsdale, AZ`,type:`Office`,reason:`Listed by CBRE, below market ask for submarket.`,value:`$12.5M`,risk:38,source:`Broker Listing`},{id:3,name:`Cactus Lane Industrial`,location:`Mesa, AZ`,type:`Industrial`,reason:`Tax lien filed. Potential distressed acquisition.`,value:`$3.1M`,risk:78,source:`Public Records -- Tax Delinquency`},{id:4,name:`Sunrise Senior Living Portfolio`,location:`Tempe, AZ`,type:`Senior Housing`,reason:`Notice of Default filed Jan 2026. Lender may accept discount.`,value:`$15M`,risk:55,source:`Public Records -- Notice of Default`}]),b=localStorage.getItem(`JURISDICTION`)||`IL`;(0,_.useEffect)(()=>{t||x()},[]);async function x(){l(!0);try{try{let t=await m_({vertical:e,jurisdiction:b});if(t.ok&&t.memberships?.length>0){let e=t.memberships[0].tenantId,n=t.tenants?.[e];n?.name&&d(n.name)}}catch(e){console.warn(`Could not load memberships:`,e.message)}let t=[];try{t=(await c_({vertical:e,jurisdiction:b,limit:100})).activity||[]}catch(e){console.warn(`Could not load AI activity:`,e.message)}if(!n){let e=new Date,n=t.filter(t=>{let n=new Date(t.createdAt);return n.getMonth()===e.getMonth()&&n.getFullYear()===e.getFullYear()}).length;p({actions:n,hoursSaved:n*.25,valueSaved:n*.25*35})}if(e===`analyst`){let t=v.reduce((e,t)=>{let n=parseFloat(t.value.replace(/[$M,]/g,``));return e+(isNaN(n)?0:n)},0),n=[];try{n=(await p_({vertical:e,jurisdiction:b})).deals||[]}catch(e){console.warn(`Could not load analyzed deals:`,e.message)}let r=t+n.reduce((e,t)=>{let n=(t.dealInput?.askAmount||``).replace(/[$,]/g,``),r=parseFloat(n);return e+(isNaN(r)?0:r/1e6)},0),i=v.length+n.length,o=n.filter(e=>e.analysis?.riskScore).length,s=o>0?Math.round(n.filter(e=>e.analysis?.riskScore).reduce((e,t)=>e+t.analysis.riskScore,0)/o):0,c=r>0?r:235.3,l=i>0?i:9,u=o>0?o:5,d=s>0?s:79;a({revenue:{value:`$${c.toFixed(1)}M`,trend:``},activeDeals:{value:l.toString(),trend:``},aiConversations:{value:u.toString(),trend:``},customers:{value:d.toString(),trend:``}});let f=v.length,m=f*4+u*3,h=m*250;p({actions:f+u,hoursSaved:m,valueSaved:h})}else if(e===`auto`)a({revenue:{value:`$8.4M`,trend:``},activeDeals:{value:`235`,trend:`85 new + 150 used`},aiConversations:{value:`47`,trend:``},customers:{value:`$187,200`,trend:``}}),p({actions:31,hoursSaved:34.5,valueSaved:8625});else if(e===`property-mgmt`){let t=(await Yg({vertical:e,jurisdiction:b})).inventory||[],n=t.reduce((e,t)=>e+(t.metadata?.unitCount||1),0);a({revenue:{value:t.length.toString(),trend:``},activeDeals:{value:n.toString(),trend:``},aiConversations:{value:`95%`,trend:``},customers:{value:`0`,trend:``}})}else{let n=(await Yg({vertical:e,jurisdiction:b})).inventory||[],r=n.filter(e=>e.status===`available`).reduce((e,t)=>e+(t.price||0),0),i=(await e_({vertical:e,jurisdiction:b})).customers||[];a({revenue:{value:`$${r.toLocaleString()}`,trend:``},activeDeals:{value:n.filter(e=>e.status===`available`).length.toString(),trend:``},aiConversations:{value:t.length.toString(),trend:``},customers:{value:i.length.toString(),trend:``}})}let r=[];try{r=((await Yg({vertical:e,jurisdiction:b})).inventory||[]).slice(0,2)}catch{}let i=[];try{i=((await i_({vertical:e,jurisdiction:b})).appointments||[]).slice(0,2)}catch{}s([...r.map(e=>({id:`inv-${e.id}`,type:`Record Added`,description:`${e.metadata?.make||e.metadata?.address||``} ${e.metadata?.model||``} - ${e.status}`,date:new Date(e.createdAt).toLocaleDateString(),status:e.status})),...t.slice(0,2).map(e=>({id:`ai-${e.id}`,type:`AI Chat`,description:`Workflow ${e.workflowId} - ${e.status}`,date:new Date(e.createdAt).toLocaleDateString(),status:e.status})),...i.map(e=>({id:`appt-${e.id}`,type:`Appointment`,description:`${e.customerName} - ${e.type}`,date:new Date(e.datetime).toLocaleDateString(),status:e.status}))].slice(0,5))}catch(t){console.error(`Failed to load dashboard:`,t),e===`analyst`&&(a({revenue:{value:`$235.3M`,trend:``},activeDeals:{value:`9`,trend:``},aiConversations:{value:`5`,trend:``},customers:{value:`79`,trend:``}}),p({actions:9,hoursSaved:31,valueSaved:7750}))}finally{l(!1)}}function S(){return e===`analyst`?[`Dealflow Value`,`Deals in Pipeline`,`Analyzed This Month`,`Avg Risk Score`]:e===`auto`?[`Total Inventory Value`,`Units in Stock`,`Sold This Month`,`Gross Profit MTD`]:e===`property-mgmt`?[`Properties`,`Total Units`,`Occupancy Rate`,`Open Requests`]:[`Inventory Value`,`Available Units`,`AI Conversations`,`Total Customers`]}let C=S(),w=[{label:C[0],...i.revenue},{label:C[1],...i.activeDeals},{label:C[2],...i.aiConversations},{label:C[3],...i.customers}];return(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`pageHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Dashboard`}),(0,$.jsx)(`p`,{className:`subtle`,children:t?`Your personal Vault`:`Welcome to ${u||`your business`} -- Your overview`})]})}),t&&(0,$.jsx)(F_,{}),!t&&(0,$.jsx)(`div`,{className:`kpiRow`,children:c?(0,$.jsx)(`div`,{className:`card`,style:{padding:`24px`,textAlign:`center`},children:`Loading dashboard...`}):w.map((e,t)=>(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:e.label}),(0,$.jsx)(`div`,{className:`kpiValue`,children:e.value}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,marginTop:`4px`,color:`#64748b`},children:e.trend})]},t))}),!t&&(0,$.jsxs)(`div`,{style:{padding:`20px`,background:`white`,borderRadius:`12px`,border:`2px solid #16a34a`,marginTop:`14px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,marginBottom:`4px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`16px`,fontWeight:700},children:`Value Tracker`}),(0,$.jsx)(`span`,{style:{fontSize:`13px`,color:`#64748b`},children:`AI-powered ROI this month`})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr 1fr 1fr`,gap:`16px`,marginTop:`12px`},children:[(0,$.jsxs)(`div`,{style:{textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`,textTransform:`uppercase`,letterSpacing:`0.06em`},children:n?`Deals Sourced + Analyzed`:r?`Leads Generated`:`Actions`}),(0,$.jsx)(`div`,{style:{fontSize:`28px`,fontWeight:900,marginTop:`4px`},children:r?23:f.actions})]}),(0,$.jsxs)(`div`,{style:{textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`,textTransform:`uppercase`,letterSpacing:`0.06em`},children:r?`Appointments Set`:`Hours Saved`}),(0,$.jsx)(`div`,{style:{fontSize:`28px`,fontWeight:900,marginTop:`4px`},children:r?8:f.hoursSaved})]}),(0,$.jsxs)(`div`,{style:{textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`,textTransform:`uppercase`,letterSpacing:`0.06em`},children:n?`Value at $250/hr`:r?`Hours Saved`:`Value at $35/hr`}),(0,$.jsx)(`div`,{style:{fontSize:`28px`,fontWeight:900,marginTop:`4px`,color:`#16a34a`},children:r?`34.5`:`$${f.valueSaved.toLocaleString()}`})]}),(0,$.jsxs)(`div`,{style:{textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`,textTransform:`uppercase`,letterSpacing:`0.06em`},children:`Your Cost`}),(0,$.jsx)(`div`,{style:{fontSize:`28px`,fontWeight:900,marginTop:`4px`,color:`#7c3aed`},children:`$9`}),(0,$.jsx)(`div`,{style:{fontSize:`11px`,color:`#64748b`},children:`/user/mo`})]})]}),(n||r)&&f.valueSaved>0&&(0,$.jsxs)(`div`,{style:{marginTop:`12px`,padding:`8px 12px`,background:`#f0fdf4`,borderRadius:`6px`,fontSize:`13px`,color:`#16a34a`,textAlign:`center`,fontWeight:500},children:[`Your AI has delivered $`,f.valueSaved.toLocaleString(),` in value this month  a `,Math.round(f.valueSaved/9),`x return on your $9 investment`]})]}),n&&(0,$.jsxs)(`div`,{style:{marginTop:`14px`},children:[(0,$.jsxs)(`div`,{style:{marginBottom:`12px`},children:[(0,$.jsx)(`h2`,{style:{fontSize:`20px`,fontWeight:700,margin:0},children:`While You Were Out...`}),(0,$.jsx)(`p`,{style:{fontSize:`14px`,color:`var(--muted)`,margin:`4px 0 0`},children:v.length>0?`Your AI found ${v.length} opportunit${v.length===1?`y`:`ies`} matching your investment criteria`:``})]}),v.length>0?(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`14px`},children:v.map(e=>{let t=e.risk<40?`Low Risk`:e.risk<=65?`Medium Risk`:`High Risk`,n=e.risk<40?`#dcfce7`:e.risk<=65?`#fef3c7`:`#fee2e2`,r=e.risk<40?`#16a34a`:e.risk<=65?`#d97706`:`#dc2626`;return(0,$.jsxs)(`div`,{className:`card`,style:{padding:`20px`},children:[(0,$.jsxs)(`div`,{style:{marginBottom:`10px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`16px`,fontWeight:700},children:e.name}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--muted)`},children:e.location})]}),(0,$.jsx)(`span`,{style:{display:`inline-block`,fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:`var(--bg2, #f1f5f9)`,color:`var(--fg, #334155)`,marginBottom:`10px`,letterSpacing:`0.02em`,textTransform:`uppercase`},children:e.type}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`var(--fg)`,marginBottom:`12px`,lineHeight:1.4},children:e.reason}),(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`10px`,marginBottom:`8px`},children:[(0,$.jsx)(`span`,{style:{fontSize:`18px`,fontWeight:700},children:e.value}),(0,$.jsxs)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:n,color:r},children:[t,` (`,e.risk,`)`]})]}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`var(--muted)`,marginBottom:`14px`},children:e.source}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`},children:[(0,$.jsx)(`button`,{style:{flex:1,padding:`8px 14px`,fontSize:`13px`,fontWeight:600,border:`none`,borderRadius:`8px`,cursor:`pointer`,color:`#fff`,background:`linear-gradient(135deg, #7c3aed, #6d28d9)`},onClick:()=>window.dispatchEvent(new CustomEvent(`ta:chatPrompt`,{detail:{message:`Analyze the opportunity: `+e.name+` in `+e.location+`. Value: `+e.value+`. Risk score: `+e.risk+`. Source: `+e.source}})),children:`Review Analysis`}),(0,$.jsx)(`button`,{style:{padding:`8px 14px`,fontSize:`13px`,fontWeight:600,border:`1px solid var(--border, #e2e8f0)`,borderRadius:`8px`,cursor:`pointer`,background:`transparent`,color:`var(--muted)`},onClick:()=>y(t=>t.filter(t=>t.id!==e.id)),children:`Dismiss`})]})]},e.id)})}):(0,$.jsx)(`div`,{className:`card`,style:{padding:`24px`,textAlign:`center`,color:`var(--muted)`,fontSize:`14px`},children:`No new opportunities. Your AI is scanning for matches.`})]}),r&&(0,$.jsxs)(`div`,{style:{marginTop:`14px`},children:[(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`14px`,padding:`20px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`16px`,color:`#1e293b`,marginBottom:`4px`},children:`Sales Track`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`,marginBottom:`16px`},children:`Active pipeline and lead activity`}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(4, 1fr)`,gap:`12px`,marginBottom:`16px`},children:[(0,$.jsxs)(`div`,{style:{padding:`12px`,background:`#f8fafc`,borderRadius:`8px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`24px`,fontWeight:800},children:`8`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`Active Deals`})]}),(0,$.jsxs)(`div`,{style:{padding:`12px`,background:`#f8fafc`,borderRadius:`8px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`24px`,fontWeight:800},children:`$291,600`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`Pipeline Value`})]}),(0,$.jsxs)(`div`,{style:{padding:`12px`,background:`#f8fafc`,borderRadius:`8px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`24px`,fontWeight:800},children:`3`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`Appointments Today`})]}),(0,$.jsxs)(`div`,{style:{padding:`12px`,background:`#f8fafc`,borderRadius:`8px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`24px`,fontWeight:800,color:`#dc2626`},children:`2`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`Hot Leads`})]})]}),(0,$.jsx)(`div`,{style:{display:`flex`,gap:`4px`,alignItems:`flex-end`,height:`60px`},children:[{label:`Lead`,count:2,value:`$77.1K`,color:`#64748b`},{label:`Contacted`,count:2,value:`$66.8K`,color:`#2563eb`},{label:`Test Drive`,count:1,value:`$32.8K`,color:`#7c3aed`},{label:`Negotiation`,count:2,value:`$66.0K`,color:`#d97706`},{label:`F&I Desk`,count:1,value:`$48.9K`,color:`#16a34a`},{label:`Sold`,count:2,value:`$61.9K`,color:`#059669`}].map((e,t)=>(0,$.jsxs)(`div`,{style:{flex:1,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`10px`,fontWeight:600,color:e.color,marginBottom:`2px`},children:e.value}),(0,$.jsx)(`div`,{style:{height:`${Math.max(12,e.count*14)}px`,background:e.color,borderRadius:`4px 4px 0 0`,marginBottom:`4px`}}),(0,$.jsx)(`div`,{style:{fontSize:`10px`,color:`#64748b`},children:e.label}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,fontWeight:700,color:e.color},children:e.count})]},t))})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`14px`,marginBottom:`14px`},children:[(0,$.jsxs)(`div`,{className:`card`,style:{padding:`20px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`16px`,color:`#1e293b`,marginBottom:`4px`},children:`Service Track`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`,marginBottom:`16px`},children:`Today's service operations`}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`10px`},children:[(0,$.jsxs)(`div`,{style:{padding:`10px`,background:`#f8fafc`,borderRadius:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:800},children:`8`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`Appointments`})]}),(0,$.jsxs)(`div`,{style:{padding:`10px`,background:`#f8fafc`,borderRadius:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:800},children:`$1,676`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`Revenue Today`})]}),(0,$.jsxs)(`div`,{style:{padding:`10px`,background:`#fff7ed`,borderRadius:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:800,color:`#d97706`},children:`5`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`Upsell Opps ($8,250)`})]}),(0,$.jsxs)(`div`,{style:{padding:`10px`,background:`#f8fafc`,borderRadius:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:800},children:`6/8`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`Confirmed`})]})]}),(0,$.jsx)(`div`,{style:{marginTop:`12px`,padding:`10px`,background:`#f0fdf4`,borderRadius:`8px`,fontSize:`13px`,color:`#16a34a`},children:`3 service customers matched to sales opportunities`})]}),(0,$.jsxs)(`div`,{className:`card`,style:{padding:`20px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`16px`,color:`#1e293b`,marginBottom:`4px`},children:`Inventory Track`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`,marginBottom:`16px`},children:`Lot status and acquisition`}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`10px`},children:[(0,$.jsxs)(`div`,{style:{padding:`10px`,background:`#f8fafc`,borderRadius:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:800},children:`85`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`New (avg 28 days)`})]}),(0,$.jsxs)(`div`,{style:{padding:`10px`,background:`#f8fafc`,borderRadius:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:800},children:`150`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`Used (avg 45 days)`})]}),(0,$.jsxs)(`div`,{style:{padding:`10px`,background:`#fef2f2`,borderRadius:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:800,color:`#dc2626`},children:`12`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#dc2626`},children:`Over 90 days`})]}),(0,$.jsxs)(`div`,{style:{padding:`10px`,background:`#f8fafc`,borderRadius:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:800},children:`6`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`Acquired This Week`})]})]}),(0,$.jsxs)(`div`,{style:{marginTop:`14px`,padding:`12px`,background:`#fffbeb`,borderRadius:`8px`,border:`1px solid #fef3c7`},children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,fontWeight:700,color:`#92400e`,marginBottom:`8px`},children:`Inventory Acquisition`}),(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`4px`,fontSize:`13px`,color:`#78350f`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`},children:[(0,$.jsx)(`span`,{children:`Trade-ins this week: 3`}),(0,$.jsx)(`span`,{style:{fontWeight:600},children:`$47,500`})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`},children:[(0,$.jsx)(`span`,{children:`Auction purchases: 2`}),(0,$.jsx)(`span`,{style:{fontWeight:600},children:`$31,200`})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`},children:[(0,$.jsx)(`span`,{children:`Wholesale buys: 1`}),(0,$.jsx)(`span`,{style:{fontWeight:600},children:`$18,900`})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,marginTop:`4px`,paddingTop:`4px`,borderTop:`1px solid #fde68a`,fontWeight:700},children:[(0,$.jsx)(`span`,{children:`Total acquisition`}),(0,$.jsx)(`span`,{children:`$97,600`})]})]})]})]})]}),(0,$.jsxs)(`div`,{style:{marginBottom:`12px`},children:[(0,$.jsx)(`h2`,{style:{fontSize:`20px`,fontWeight:700,margin:0},children:`While You Were Out...`}),(0,$.jsxs)(`p`,{style:{fontSize:`14px`,color:`var(--muted)`,margin:`4px 0 0`},children:[`Your AI found `,m.length,` revenue opportunities overnight`]})]}),m.length>0?(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`14px`},children:m.map(e=>(0,$.jsxs)(`div`,{className:`card`,style:{padding:`20px`},children:[(0,$.jsxs)(`div`,{style:{marginBottom:`10px`,display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,$.jsx)(`span`,{style:{display:`inline-block`,fontSize:`11px`,fontWeight:600,padding:`2px 10px`,borderRadius:`9999px`,background:`${e.badgeColor}18`,color:e.badgeColor,letterSpacing:`0.02em`},children:e.badge}),e.urgency===`high`&&(0,$.jsx)(`span`,{style:{fontSize:`11px`,fontWeight:600,color:`#dc2626`},children:`URGENT`}),(0,$.jsx)(`span`,{style:{marginLeft:`auto`,fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:e.assignedTo?.type===`ai`?`#f3e8ff`:`#f1f5f9`,color:e.assignedTo?.type===`ai`?`#7c3aed`:`#475569`},children:e.assignedTo?.name||`Unassigned`})]}),(0,$.jsx)(`div`,{style:{fontSize:`16px`,fontWeight:700,marginBottom:`8px`},children:e.title}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`var(--fg, #334155)`,marginBottom:`10px`,lineHeight:1.5},children:e.detail}),(0,$.jsxs)(`div`,{style:{fontSize:`13px`,color:`#64748b`,fontStyle:`italic`,marginBottom:`10px`},children:[`Suggested: `,e.action]}),(0,$.jsx)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`10px`,marginBottom:`14px`},children:(0,$.jsxs)(`span`,{style:{fontSize:`16px`,fontWeight:700,color:`#16a34a`},children:[`Potential: `,e.potentialRevenue]})}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`},children:[(0,$.jsx)(`button`,{style:{flex:1,padding:`8px 14px`,fontSize:`13px`,fontWeight:600,border:`none`,borderRadius:`8px`,cursor:`pointer`,color:`#fff`,background:`linear-gradient(135deg, #7c3aed, #6d28d9)`},onClick:()=>window.dispatchEvent(new CustomEvent(`ta:chatPrompt`,{detail:{message:`Draft and send the outreach for `+e.title.split(` -- `)[1]+`. `+e.detail}})),children:`Let AI Handle It`}),(0,$.jsx)(`button`,{style:{padding:`8px 14px`,fontSize:`13px`,fontWeight:600,border:`1px solid var(--border, #e2e8f0)`,borderRadius:`8px`,cursor:`pointer`,background:`transparent`,color:`var(--fg, #334155)`},onClick:()=>window.dispatchEvent(new CustomEvent(`ta:chatPrompt`,{detail:{message:`Show me the details for this opportunity: `+e.title+`. `+e.detail}})),children:`Review First`}),(0,$.jsx)(`button`,{style:{padding:`8px 14px`,fontSize:`13px`,fontWeight:600,border:`none`,borderRadius:`8px`,cursor:`pointer`,background:`transparent`,color:`#94a3b8`},onClick:()=>h(t=>t.filter(t=>t.id!==e.id)),children:`Dismiss`})]})]},e.id))}):(0,$.jsx)(`div`,{className:`card`,style:{padding:`24px`,textAlign:`center`,color:`var(--muted)`,fontSize:`14px`},children:`No new opportunities. Your AI is monitoring the lot and customer database.`})]}),!t&&!r&&(0,$.jsxs)(`div`,{className:`card`,children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`Recent Activity`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Latest business actions and AI worker activity`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,children:`View All`})]}),(0,$.jsx)(`div`,{className:`tableWrap`,children:(0,$.jsxs)(`table`,{className:`table`,children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{children:`Type`}),(0,$.jsx)(`th`,{children:`Description`}),(0,$.jsx)(`th`,{children:`Date`}),(0,$.jsx)(`th`,{children:`Status`})]})}),(0,$.jsx)(`tbody`,{children:o.map(e=>(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`td`,{className:`tdStrong`,children:e.type}),(0,$.jsx)(`td`,{children:e.description}),(0,$.jsx)(`td`,{className:`tdMuted`,children:e.date}),(0,$.jsx)(`td`,{children:(0,$.jsx)(`span`,{className:`badge badge-${e.status}`,children:e.status})})]},e.id))})]})})]})]})}function L_(){let[e,t]=(0,_.useState)([]),[n,r]=(0,_.useState)(!1),[i,a]=(0,_.useState)(!1),[o,s]=(0,_.useState)(``),[c,l]=(0,_.useState)(!1),[u,d]=(0,_.useState)(null),[f,p]=(0,_.useState)(`all`),[m,h]=(0,_.useState)({companyName:``,industry:``,askAmount:``,dealType:`series_a`,summary:``}),[g,v]=(0,_.useState)(null),[y,b]=(0,_.useState)(!1),[x,S]=(0,_.useState)(null),[C,w]=(0,_.useState)(null),[ee,te]=(0,_.useState)(``),[ne,T]=(0,_.useState)(!1),[re,ie]=(0,_.useState)(`email`),ae=localStorage.getItem(`VERTICAL`)||`analyst`,oe=localStorage.getItem(`JURISDICTION`)||`GLOBAL`,se=`.pdf,.xlsx,.xls,.csv,.docx,.doc,.png,.jpg,.jpeg`,ce=[`application/pdf`,`application/vnd.openxmlformats-officedocument.spreadsheetml.sheet`,`application/vnd.ms-excel`,`text/csv`,`application/vnd.openxmlformats-officedocument.wordprocessingml.document`,`application/msword`,`image/png`,`image/jpeg`];(0,_.useEffect)(()=>{le()},[]);async function le(){r(!0),s(``);try{t((await p_({vertical:ae,jurisdiction:oe})).deals||[])}catch(e){s(e?.message||String(e)),console.error(`Failed to load deals:`,e)}finally{r(!1)}}function E(e){if(e)if(v(e),e.type===`text/csv`||e.name.endsWith(`.csv`)){let t=new FileReader;t.onload=e=>{let t=e.target?.result||``;h(e=>({...e,summary:e.summary||t.slice(0,5e3)}))},t.readAsText(e)}else e.type,h(t=>({...t,summary:t.summary||`[Uploaded: ${e.name}]`}))}function D(e){e.preventDefault(),e.stopPropagation(),b(!0)}function ue(e){e.preventDefault(),e.stopPropagation(),b(!1)}function de(e){e.preventDefault(),e.stopPropagation(),b(!1);let t=e.dataTransfer?.files?.[0];if(t){let e=`.`+t.name.split(`.`).pop().toLowerCase();se.split(`,`).includes(e)||ce.includes(t.type)?E(t):s(`Unsupported file type. Please upload PDF, Excel, CSV, Word, or image files.`)}}async function fe(e){e.preventDefault(),a(!0),s(``);try{let e=await f_({vertical:ae,jurisdiction:oe,deal:m});await le(),d(e.analysis),l(!1),h({companyName:``,industry:``,askAmount:``,dealType:`series_a`,summary:``})}catch(e){s(e?.message||String(e)),console.error(`Failed to analyze deal:`,e)}finally{a(!1)}}let pe=f===`all`?e:e.filter(e=>{let t=e.analysis?.riskScore||0;return f===`high`?t>=70:f===`medium`?t>=40&&t<70:f===`low`?t<40:!0}),me={total:e.length,invest:e.filter(e=>e.analysis?.recommendation===`INVEST`).length,pass:e.filter(e=>e.analysis?.recommendation===`PASS`).length,wait:e.filter(e=>e.analysis?.recommendation===`WAIT`).length};function O(e,t){let n=new Date().toLocaleDateString(`en-US`,{year:`numeric`,month:`long`,day:`numeric`}),r=localStorage.getItem(`COMPANY_NAME`)||localStorage.getItem(`TENANT_NAME`)||``,i=(t.evidence?.positive||[]).map(e=>`<li style="color:#059669">${e}</li>`).join(``),a=(t.evidence?.negative||[]).map(e=>`<li style="color:#dc2626">${e}</li>`).join(``),o=(t.evidence?.neutral||[]).map(e=>`<li style="color:#6b7280">${e}</li>`).join(``),s=(t.nextSteps||[]).map((e,t)=>`<li>${e}</li>`).join(``),c=(t.missingInfo||[]).map(e=>`<li>${e}</li>`).join(``),l=t.keyMetrics?Object.entries(t.keyMetrics).map(([e,t])=>`<tr><td style="padding:6px 12px;border:1px solid #e5e7eb;font-weight:600;text-transform:capitalize">${e.replace(/_/g,` `)}</td><td style="padding:6px 12px;border:1px solid #e5e7eb">${t}</td></tr>`).join(``):``,u=t.multiAngleAnalysis?Object.entries(t.multiAngleAnalysis).map(([e,t])=>`<div style="margin-bottom:12px"><div style="font-size:12px;font-weight:600;color:#7c3aed;text-transform:uppercase;margin-bottom:4px">${e.replace(/([A-Z])/g,` $1`).trim()}</div><p style="margin:0;font-size:14px">${t}</p></div>`).join(``):``,d=t.riskScaledAlternatives?[`lowRisk`,`mediumRisk`,`highRisk`].map(e=>{let n=t.riskScaledAlternatives[e];return n?`<div style="margin-bottom:12px;padding:12px;background:#f8fafc;border-radius:8px"><div style="font-size:12px;font-weight:600;text-transform:uppercase;margin-bottom:6px">${{lowRisk:`Low Risk`,mediumRisk:`Medium Risk`,highRisk:`High Risk`}[e]}</div><div style="font-size:13px"><strong>Structure:</strong> ${n.structure}</div><div style="font-size:13px"><strong>Terms:</strong> ${n.terms}</div><div style="font-size:13px"><strong>Expected Return:</strong> ${n.expectedReturn}</div></div>`:``}).join(``):``;return`<!DOCTYPE html><html><head><title>${e.companyName||`Deal`} - Analysis Report</title>
<style>
body{font-family:-apple-system,BlinkMacSystemFont,sans-serif;max-width:800px;margin:40px auto;padding:0 20px;color:#1e293b;line-height:1.6}
h1{font-size:24px;margin:0}h2{font-size:16px;color:#7c3aed;border-bottom:2px solid #7c3aed;padding-bottom:4px;margin-top:32px}
.header{border-bottom:3px solid #7c3aed;padding-bottom:16px;margin-bottom:24px}
.header-top{display:flex;justify-content:space-between;align-items:flex-start}
.branding{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;font-size:13px;color:#6b7280}
.meta{color:#6b7280;font-size:14px}.score-box{text-align:center;padding:16px 24px;border-radius:12px;border:2px solid}
.score{font-size:36px;font-weight:700}.rec{font-size:14px;font-weight:600;padding:4px 12px;border-radius:4px;display:inline-block;margin-top:4px}
table{border-collapse:collapse;width:100%}ul{padding-left:20px}li{margin:4px 0}
.disclaimer{margin-top:40px;padding:16px;background:#f8fafc;border:1px solid #e5e7eb;border-radius:8px;font-size:13px;color:#6b7280}
.download-btn{display:inline-block;padding:10px 24px;background:#7c3aed;color:white;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;margin-bottom:24px}
.download-btn:hover{background:#6d28d9}
@media print{.download-btn{display:none !important}.no-print{display:none !important}body{margin:20px}}
</style></head><body>
<button class="download-btn no-print" onclick="window.print()">Download PDF</button>
<div class="header">
<div class="branding"><div>${r?`<strong>${r}</strong>`:``}</div><div>Prepared by TitleApp AI</div></div>
<div class="header-top"><div><h1>${e.companyName||`Deal`} - Analysis Report</h1>
<div class="meta">${e.industry||``} ${e.askAmount?`| `+e.askAmount:``} ${e.dealType?`| `+e.dealType.replace(/_/g,` `):``}</div>
<div class="meta">${n}</div></div>
<div class="score-box" style="border-color:${t.riskScore>=70?`#ef4444`:t.riskScore>=40?`#f59e0b`:`#10b981`}">
<div class="score" style="color:${t.riskScore>=70?`#ef4444`:t.riskScore>=40?`#f59e0b`:`#10b981`}">${t.riskScore||0}/100</div>
<div class="rec" style="background:${t.recommendation===`INVEST`?`#f0fdf4;color:#059669`:t.recommendation===`PASS`?`#fef2f2;color:#dc2626`:`#fffbeb;color:#d97706`}">${t.recommendation||`WAIT`}</div>
</div></div></div>
${t.summary?`<h2>Executive Summary</h2><p>${t.summary}</p>`:``}
${i||a||o?`<h2>Evidence Analysis</h2><ul>${i}${a}${o}</ul>`:``}
${l?`<h2>Key Metrics</h2><table>${l}</table>`:``}
${u?`<h2>Multi-Angle Analysis</h2>${u}`:``}
${d?`<h2>Risk-Scaled Deal Structures</h2>${d}`:``}
${s?`<h2>Recommended Next Steps</h2><ol>${s}</ol>`:``}
${c?`<h2>Missing Information</h2><ul>${c}</ul>`:``}
<div class="disclaimer">This analysis is AI-generated and should be verified independently. It does not constitute financial advice. Generated by TitleApp AI on ${n}.</div>
<script>document.title="${(e.companyName||`Deal`).replace(/"/g,``)} - Analysis Report"<\/script></body></html>`}async function he(e,t){T(!0);let n=(t.missingInfo||[]).map((e,t)=>`${t+1}. ${e}`).join(`
`);te(`Dear [Sponsor Name],

Thank you for sharing the ${e.companyName||``} ${e.dealType?e.dealType.replace(/_/g,` `):`deal`} opportunity. We have completed our initial review and are interested in moving forward.

To advance our evaluation, we require the following information:

${n}

Please send these materials at your earliest convenience. We are targeting a decision within [timeframe] and complete documentation will allow us to proceed efficiently.

Best regards,
[Your Name]
[Your Firm]`),T(!1)}function ge(e){return e>=70?`#ef4444`:e>=40?`#f59e0b`:`#10b981`}function _e(e){return e>=70?`High Risk`:e>=40?`Medium Risk`:`Low Risk`}return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Analyst`}),(0,$.jsx)(`p`,{className:`subtle`,children:`AI-powered deal vetting with RAAS validation`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>l(!0),style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`},children:`+ Analyze Deal`})]}),o&&(0,$.jsx)(`div`,{style:{padding:`12px 16px`,background:`#fef2f2`,border:`1px solid #fca5a5`,borderRadius:`12px`,color:`#dc2626`,marginBottom:`16px`},children:o}),x&&(()=>{let e=x.analysis,t=x.dealInfo;return(0,$.jsx)(`div`,{className:`card`,style:{marginBottom:`16px`,border:`2px solid ${ge(e.riskScore||0)}`},children:(0,$.jsxs)(`div`,{style:{padding:`16px`,display:`flex`,flexDirection:`column`,gap:`12px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`flex-start`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`16px`},children:t.companyName||`Deal`}),(0,$.jsxs)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:[t.industry||``,t.askAmount?` | `+t.askAmount:``,` | Discussing with AI`]})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`},children:[(0,$.jsxs)(`div`,{style:{textAlign:`right`},children:[(0,$.jsxs)(`div`,{style:{fontSize:`24px`,fontWeight:700,color:ge(e.riskScore||0)},children:[e.riskScore||0,`/100`]}),(0,$.jsx)(`div`,{className:`badge badge-${e.recommendation===`INVEST`?`completed`:e.recommendation===`PASS`?``:`processing`}`,style:{fontSize:`12px`},children:e.recommendation||`WAIT`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>S(null),style:{fontSize:`14px`,padding:`4px 8px`},children:``})]})]}),e.summary&&(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`,lineHeight:`1.5`},children:e.summary}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`,flexWrap:`wrap`},children:[(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>{d(x),S(null)},style:{fontSize:`12px`},children:`View Full Analysis`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>{let n=O(t,e),r=window.open(``,`_blank`);r.document.write(n),r.document.close()},style:{fontSize:`12px`},children:`Export Report`})]})]})})})(),(0,$.jsxs)(`div`,{className:`kpiRow`,children:[(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Total Analyzed`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:me.total})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Invest`}),(0,$.jsx)(`div`,{className:`kpiValue`,style:{color:`#10b981`},children:me.invest})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Pass`}),(0,$.jsx)(`div`,{className:`kpiValue`,style:{color:`#ef4444`},children:me.pass})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Wait`}),(0,$.jsx)(`div`,{className:`kpiValue`,style:{color:`#f59e0b`},children:me.wait})]})]}),(0,$.jsxs)(`div`,{style:{marginBottom:`16px`,display:`flex`,gap:`8px`},children:[(0,$.jsxs)(`button`,{className:`iconBtn`,onClick:()=>p(`all`),style:{background:f===`all`?`var(--accent)`:`transparent`,color:f===`all`?`white`:`inherit`},children:[`All Deals (`,e.length,`)`]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>p(`high`),style:{background:f===`high`?`#ef4444`:`transparent`,color:f===`high`?`white`:`inherit`},children:`High Risk`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>p(`medium`),style:{background:f===`medium`?`#f59e0b`:`transparent`,color:f===`medium`?`white`:`inherit`},children:`Medium Risk`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>p(`low`),style:{background:f===`low`?`#10b981`:`transparent`,color:f===`low`?`white`:`inherit`},children:`Low Risk`})]}),n?(0,$.jsx)(`div`,{className:`card`,style:{padding:`24px`,textAlign:`center`},children:`Loading analyzed deals...`}):pe.length===0?(0,$.jsxs)(`div`,{className:`card`,style:{padding:`32px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`24px`,fontWeight:600,color:`#64748b`,marginBottom:`16px`},children:`Analyst`}),(0,$.jsx)(`p`,{style:{fontSize:`16px`,fontWeight:600,marginBottom:`8px`},children:`No deals analyzed yet`}),(0,$.jsx)(`p`,{style:{color:`var(--textMuted)`,marginBottom:`16px`},children:`Upload your first deal to see AI-powered analysis with RAAS validation`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>l(!0),style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`},children:`Analyze Your First Deal`})]}):(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{className:`tableWrap`,children:(0,$.jsxs)(`table`,{className:`table`,children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{children:`Company`}),(0,$.jsx)(`th`,{children:`Industry`}),(0,$.jsx)(`th`,{children:`Ask`}),(0,$.jsx)(`th`,{children:`Risk Score`}),(0,$.jsx)(`th`,{children:`Recommendation`}),(0,$.jsx)(`th`,{children:`Analyzed`}),(0,$.jsx)(`th`,{})]})}),(0,$.jsx)(`tbody`,{children:pe.map(e=>(0,$.jsxs)(`tr`,{onClick:()=>d(e),style:{cursor:`pointer`},children:[(0,$.jsx)(`td`,{className:`tdStrong`,children:e.dealInput?.companyName||`Unknown`}),(0,$.jsx)(`td`,{children:e.dealInput?.industry||`-`}),(0,$.jsx)(`td`,{className:`tdMuted`,children:e.dealInput?.askAmount||`-`}),(0,$.jsx)(`td`,{children:(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{width:`8px`,height:`8px`,borderRadius:`50%`,background:ge(e.analysis?.riskScore||0)}}),(0,$.jsxs)(`span`,{style:{fontWeight:600},children:[e.analysis?.riskScore||0,`/100`]}),(0,$.jsxs)(`span`,{className:`tdMuted`,children:[`(`,_e(e.analysis?.riskScore||0),`)`]})]})}),(0,$.jsx)(`td`,{children:(0,$.jsxs)(`span`,{className:`badge badge-${e.analysis?.recommendation===`INVEST`?`completed`:e.analysis?.recommendation===`PASS`?``:`processing`}`,children:[e.analysis?.emoji||``,` `,e.analysis?.recommendation||`WAIT`]})}),(0,$.jsx)(`td`,{className:`tdMuted`,children:(()=>{let t=e.analyzedAt||e.createdAt;if(!t)return`Today`;if(t.seconds)return new Date(t.seconds*1e3).toLocaleDateString();if(t._seconds)return new Date(t._seconds*1e3).toLocaleDateString();let n=new Date(t);return isNaN(n.getTime())?`Today`:n.toLocaleDateString()})()}),(0,$.jsx)(`td`,{children:(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>d(e),style:{fontSize:`12px`},children:`View Analysis`})})]},e.id))})]})})}),c&&(0,$.jsx)(`div`,{style:{position:`fixed`,inset:0,background:`rgba(0,0,0,0.5)`,display:`grid`,placeItems:`center`,zIndex:1e3},onClick:()=>l(!1),children:(0,$.jsxs)(`div`,{className:`card`,style:{maxWidth:`600px`,width:`90%`,maxHeight:`90vh`,overflow:`auto`},onClick:e=>e.stopPropagation(),children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`Analyze New Deal`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>l(!1),children:``})]}),(0,$.jsxs)(`form`,{onSubmit:fe,style:{padding:`16px`,display:`flex`,flexDirection:`column`,gap:`14px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Company Name`}),(0,$.jsx)(`input`,{type:`text`,required:!0,value:m.companyName,onChange:e=>h({...m,companyName:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},placeholder:`Acme Corp`})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Industry`}),(0,$.jsx)(`input`,{type:`text`,required:!0,value:m.industry,onChange:e=>h({...m,industry:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},placeholder:`SaaS, FinTech, Healthcare, etc.`})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Ask Amount`}),(0,$.jsx)(`input`,{type:`text`,inputMode:`numeric`,required:!0,value:m.askAmount,onChange:e=>{let t=e.target.value.replace(/[^0-9]/g,``),n=t?`$`+Number(t).toLocaleString():``;h({...m,askAmount:n})},style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},placeholder:`$5,000,000`})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Deal Type`}),(0,$.jsxs)(`select`,{value:m.dealType,onChange:e=>h({...m,dealType:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},children:[(0,$.jsxs)(`optgroup`,{label:`Venture / PE`,children:[(0,$.jsx)(`option`,{value:`seed`,children:`Seed`}),(0,$.jsx)(`option`,{value:`series_a`,children:`Series A`}),(0,$.jsx)(`option`,{value:`series_b`,children:`Series B`}),(0,$.jsx)(`option`,{value:`series_c`,children:`Series C+`}),(0,$.jsx)(`option`,{value:`pe_buyout`,children:`PE Buyout`})]}),(0,$.jsxs)(`optgroup`,{label:`Real Estate`,children:[(0,$.jsx)(`option`,{value:`acquisition`,children:`Acquisition`}),(0,$.jsx)(`option`,{value:`development`,children:`Development`}),(0,$.jsx)(`option`,{value:`value_add`,children:`Value-Add`}),(0,$.jsx)(`option`,{value:`sale_leaseback`,children:`Sale-Leaseback`}),(0,$.jsx)(`option`,{value:`multifamily`,children:`Multifamily`}),(0,$.jsx)(`option`,{value:`office`,children:`Office`}),(0,$.jsx)(`option`,{value:`retail`,children:`Retail`}),(0,$.jsx)(`option`,{value:`industrial`,children:`Industrial`}),(0,$.jsx)(`option`,{value:`hospitality`,children:`Hospitality`}),(0,$.jsx)(`option`,{value:`mixed_use`,children:`Mixed-Use`}),(0,$.jsx)(`option`,{value:`land`,children:`Land`}),(0,$.jsx)(`option`,{value:`sfr_portfolio`,children:`Single-Family Portfolio`})]}),(0,$.jsxs)(`optgroup`,{label:`Debt / Other`,children:[(0,$.jsx)(`option`,{value:`refinance`,children:`Refinance`}),(0,$.jsx)(`option`,{value:`bridge_loan`,children:`Bridge Loan`}),(0,$.jsx)(`option`,{value:`mezzanine`,children:`Mezzanine`}),(0,$.jsx)(`option`,{value:`joint_venture`,children:`Joint Venture`})]})]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Deal Summary / Pitch`}),(0,$.jsx)(`textarea`,{required:!g,value:m.summary,onChange:e=>h({...m,summary:e.target.value}),rows:8,style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`,fontFamily:`inherit`},placeholder:`Paste pitch deck summary, exec summary, or key details about the deal...`})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Or Upload Document`}),(0,$.jsx)(`div`,{onDragOver:D,onDragLeave:ue,onDrop:de,onClick:()=>document.getElementById(`deal-file-input`)?.click(),style:{width:`100%`,padding:g?`12px`:`28px 12px`,borderRadius:`12px`,border:y?`2px dashed var(--accent)`:`2px dashed var(--line)`,background:y?`rgba(124,58,237,0.04)`:`transparent`,textAlign:`center`,cursor:`pointer`,transition:`border-color 0.2s, background 0.2s`},children:g?(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,justifyContent:`space-between`},children:[(0,$.jsxs)(`span`,{style:{fontSize:`13px`},children:[g.name,` (`,(g.size/1024).toFixed(1),` KB)`]}),(0,$.jsx)(`button`,{type:`button`,onClick:e=>{e.stopPropagation(),v(null)},style:{background:`none`,border:`none`,cursor:`pointer`,fontSize:`16px`,color:`var(--textMuted)`},children:``})]}):(0,$.jsxs)(`div`,{style:{color:`var(--textMuted)`,fontSize:`13px`},children:[(0,$.jsx)(`div`,{style:{marginBottom:`4px`,fontWeight:500},children:`Drag and drop a file here, or click to browse`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`},children:`PDF, Excel, CSV, Word, or images`})]})}),(0,$.jsx)(`input`,{id:`deal-file-input`,type:`file`,accept:se,onChange:e=>E(e.target.files?.[0]),style:{display:`none`}})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`,justifyContent:`flex-end`},children:[(0,$.jsx)(`button`,{type:`button`,className:`iconBtn`,onClick:()=>l(!1),disabled:i,children:`Cancel`}),(0,$.jsx)(`button`,{type:`submit`,className:`iconBtn`,disabled:i,style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`,display:`flex`,alignItems:`center`,gap:`8px`},children:i?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`span`,{style:{display:`inline-block`,width:`16px`,height:`16px`,border:`2px solid rgba(255,255,255,0.3)`,borderTopColor:`white`,borderRadius:`50%`,animation:`spin 0.8s linear infinite`}}),`Analyzing...`]}):`Analyze with AI`})]}),i&&(0,$.jsxs)(`div`,{style:{padding:`16px`,background:`#f8f4ff`,borderRadius:`12px`,border:`1px solid #e9d5ff`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`var(--accent)`,fontWeight:600,marginBottom:`8px`},children:`AI is analyzing this deal`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#6b7280`},children:`Screening against your criteria, checking evidence, evaluating risk...`}),(0,$.jsx)(`div`,{style:{marginTop:`12px`,height:`3px`,background:`#e9d5ff`,borderRadius:`2px`,overflow:`hidden`},children:(0,$.jsx)(`div`,{style:{width:`100%`,height:`100%`,background:`var(--accent)`,borderRadius:`2px`,animation:`analyzeProgress 3s ease-in-out infinite`}})})]}),(0,$.jsx)(`style`,{children:`
                @keyframes spin { to { transform: rotate(360deg); } }
                @keyframes analyzeProgress {
                  0% { transform: translateX(-100%); }
                  50% { transform: translateX(0%); }
                  100% { transform: translateX(100%); }
                }
              `})]})]})}),u&&(()=>{let e=u.analysis||u,t=u.dealInput||u;return(0,$.jsx)(`div`,{style:{position:`fixed`,inset:0,background:`rgba(0,0,0,0.5)`,display:`grid`,placeItems:`center`,zIndex:1e3,padding:`20px`},onClick:()=>d(null),children:(0,$.jsxs)(`div`,{className:`card`,style:{maxWidth:`800px`,width:`100%`,maxHeight:`90vh`,overflow:`auto`},onClick:e=>e.stopPropagation(),children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`cardTitle`,children:[t.companyName||`Deal`,` - Analysis`]}),(0,$.jsxs)(`div`,{className:`cardSub`,children:[t.industry||`-`,`  `,t.askAmount||`-`]})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>d(null),children:``})]}),(0,$.jsxs)(`div`,{style:{padding:`20px`,display:`flex`,flexDirection:`column`,gap:`20px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`,flexWrap:`wrap`},children:[(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>{let n=t.companyName||`this deal`;window.dispatchEvent(new CustomEvent(`ta:chatPrompt`,{detail:{message:`Let's discuss the ${n} analysis. Risk score is ${e.riskScore}/100 (${e.recommendation}). What are the key risks I should focus on?`,dealContext:{companyName:t.companyName,industry:t.industry,askAmount:t.askAmount,riskScore:e.riskScore,recommendation:e.recommendation,summary:e.summary,positiveEvidence:e.evidence?.positive,negativeEvidence:e.evidence?.negative,missingInfo:e.missingInfo,nextSteps:e.nextSteps}}})),S({dealInfo:t,analysis:e}),d(null)},style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`,flex:`1 1 auto`},children:`Discuss with AI`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>{let n=O(t,e),r=window.open(``,`_blank`);r.document.write(n),r.document.close()},style:{flex:`1 1 auto`},children:`Export Report`}),e.missingInfo&&e.missingInfo.length>0&&(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>{w({dealInfo:t,analysis:e}),he(t,e)},style:{flex:`1 1 auto`,color:`#dc2626`,borderColor:`#fca5a5`},children:`Request Missing Info`})]}),(0,$.jsx)(`div`,{style:{padding:`16px`,background:`${ge(e.riskScore||0)}15`,border:`2px solid ${ge(e.riskScore||0)}`,borderRadius:`12px`},children:(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,fontWeight:600,color:`var(--textMuted)`,marginBottom:`4px`},children:`RISK SCORE`}),(0,$.jsxs)(`div`,{style:{fontSize:`32px`,fontWeight:700,color:ge(e.riskScore||0)},children:[e.riskScore||0,`/100`]}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`var(--textMuted)`},children:_e(e.riskScore||0)})]}),(0,$.jsxs)(`div`,{style:{textAlign:`right`},children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,fontWeight:600,color:`var(--textMuted)`,marginBottom:`4px`},children:`RECOMMENDATION`}),(0,$.jsxs)(`div`,{className:`badge badge-${e.recommendation===`INVEST`?`completed`:e.recommendation===`PASS`?``:`processing`}`,style:{fontSize:`18px`,padding:`8px 16px`},children:[e.emoji||``,` `,e.recommendation||`WAIT`]})]})]})}),e.summary&&(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`8px`},children:`AI Summary`}),(0,$.jsx)(`div`,{style:{color:`var(--textMuted)`,lineHeight:`1.6`},children:e.summary})]}),e.evidence&&(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`12px`},children:`Evidence Analysis`}),(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`8px`},children:[e.evidence.positive?.length>0&&e.evidence.positive.map((e,t)=>(0,$.jsxs)(`div`,{style:{padding:`12px`,background:`#f0fdf4`,border:`1px solid #86efac`,borderRadius:`8px`,display:`flex`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600,color:`#10b981`},children:`+`}),(0,$.jsx)(`div`,{style:{flex:1,fontSize:`14px`},children:e})]},`pos-${t}`)),e.evidence.negative?.length>0&&e.evidence.negative.map((e,t)=>(0,$.jsxs)(`div`,{style:{padding:`12px`,background:`#fef2f2`,border:`1px solid #fca5a5`,borderRadius:`8px`,display:`flex`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600,color:`#dc2626`},children:`-`}),(0,$.jsx)(`div`,{style:{flex:1,fontSize:`14px`},children:e})]},`neg-${t}`)),e.evidence.neutral?.length>0&&e.evidence.neutral.map((e,t)=>(0,$.jsxs)(`div`,{style:{padding:`12px`,background:`#f8fafc`,border:`1px solid #e5e7eb`,borderRadius:`8px`,display:`flex`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`16px`},children:``}),(0,$.jsx)(`div`,{style:{flex:1,fontSize:`14px`},children:e})]},`neu-${t}`))]})]}),e.multiAngleAnalysis&&(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`12px`},children:`Multi-Angle Analysis`}),(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`12px`},children:Object.entries(e.multiAngleAnalysis).map(([e,t])=>(0,$.jsxs)(`div`,{style:{padding:`12px`,background:`#f8fafc`,borderRadius:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`12px`,fontWeight:600,color:`var(--accent)`,marginBottom:`4px`,textTransform:`uppercase`},children:e.replace(/([A-Z])/g,` $1`).trim()}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,lineHeight:`1.5`},children:t})]},e))})]}),e.riskScaledAlternatives&&(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`12px`},children:`Risk-Scaled Deal Structures`}),(0,$.jsx)(`div`,{style:{display:`grid`,gap:`12px`},children:[`lowRisk`,`mediumRisk`,`highRisk`].map(t=>{let n=e.riskScaledAlternatives[t];if(!n)return null;let r={lowRisk:{bg:`#f0fdf4`,border:`#86efac`,label:`Low Risk`},mediumRisk:{bg:`#fffbeb`,border:`#fcd34d`,label:`Medium Risk`},highRisk:{bg:`#fef2f2`,border:`#fca5a5`,label:`High Risk`}}[t];return(0,$.jsxs)(`div`,{style:{padding:`12px`,background:r.bg,border:`2px solid ${r.border}`,borderRadius:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`12px`,fontWeight:600,marginBottom:`8px`,textTransform:`uppercase`},children:r.label}),(0,$.jsxs)(`div`,{style:{fontSize:`13px`,marginBottom:`4px`},children:[(0,$.jsx)(`strong`,{children:`Structure:`}),` `,n.structure]}),(0,$.jsxs)(`div`,{style:{fontSize:`13px`,marginBottom:`4px`},children:[(0,$.jsx)(`strong`,{children:`Terms:`}),` `,n.terms]}),(0,$.jsxs)(`div`,{style:{fontSize:`13px`},children:[(0,$.jsx)(`strong`,{children:`Expected Return:`}),` `,n.expectedReturn]})]},t)})})]}),e.keyMetrics&&Object.keys(e.keyMetrics).length>0&&(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`12px`},children:`Key Metrics`}),(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(auto-fit, minmax(150px, 1fr))`,gap:`12px`},children:Object.entries(e.keyMetrics).map(([e,t])=>(0,$.jsxs)(`div`,{style:{padding:`12px`,background:`#f8fafc`,borderRadius:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`11px`,fontWeight:600,color:`var(--textMuted)`,marginBottom:`4px`,textTransform:`uppercase`},children:e.replace(/_/g,` `)}),(0,$.jsx)(`div`,{style:{fontSize:`16px`,fontWeight:600},children:t})]},e))})]}),e.nextSteps&&e.nextSteps.length>0&&(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`12px`},children:`Recommended Next Steps`}),(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`8px`},children:e.nextSteps.map((e,t)=>(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`,alignItems:`start`},children:[(0,$.jsxs)(`div`,{style:{color:`var(--accent)`,fontWeight:600},children:[t+1,`.`]}),(0,$.jsx)(`div`,{style:{flex:1},children:e})]},t))})]}),e.missingInfo&&e.missingInfo.length>0&&(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`12px`,color:`#dc2626`},children:`Missing Critical Information`}),(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`8px`},children:e.missingInfo.map((e,t)=>(0,$.jsxs)(`div`,{style:{padding:`12px`,background:`#fef2f2`,border:`1px solid #fca5a5`,borderRadius:`8px`,display:`flex`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600,color:`#f59e0b`},children:`!`}),(0,$.jsx)(`div`,{style:{flex:1,fontSize:`14px`},children:e})]},t))})]})]})]})})})(),C&&(0,$.jsx)(`div`,{style:{position:`fixed`,inset:0,background:`rgba(0,0,0,0.5)`,display:`grid`,placeItems:`center`,zIndex:1100,padding:`20px`},onClick:()=>w(null),children:(0,$.jsxs)(`div`,{className:`card`,style:{maxWidth:`600px`,width:`100%`,maxHeight:`90vh`,overflow:`auto`},onClick:e=>e.stopPropagation(),children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`Request Missing Information`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>w(null),children:``})]}),(0,$.jsxs)(`div`,{style:{padding:`16px`,display:`flex`,flexDirection:`column`,gap:`12px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`0`,borderRadius:`8px`,overflow:`hidden`,border:`1px solid var(--line)`},children:[(0,$.jsx)(`button`,{type:`button`,onClick:()=>ie(`email`),style:{flex:1,padding:`10px`,border:`none`,background:re===`email`?`var(--accent)`:`transparent`,color:re===`email`?`white`:`inherit`,fontWeight:600,fontSize:`13px`,cursor:`pointer`},children:`Send via Email`}),(0,$.jsx)(`button`,{type:`button`,onClick:()=>ie(`text`),style:{flex:1,padding:`10px`,border:`none`,borderLeft:`1px solid var(--line)`,background:re===`text`?`var(--accent)`:`transparent`,color:re===`text`?`white`:`inherit`,fontWeight:600,fontSize:`13px`,cursor:`pointer`},children:`Send via Text`})]}),ne?(0,$.jsx)(`div`,{style:{textAlign:`center`,padding:`24px`,color:`#6b7280`},children:`Generating outreach message...`}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`textarea`,{value:ee,onChange:e=>te(e.target.value),rows:re===`text`?8:16,style:{width:`100%`,padding:`12px`,borderRadius:`8px`,border:`1px solid var(--line)`,fontFamily:`inherit`,fontSize:`14px`,lineHeight:1.6,resize:`vertical`}}),re===`text`&&(0,$.jsxs)(`div`,{style:{fontSize:`12px`,color:`var(--textMuted)`,textAlign:`right`},children:[ee.length,` characters`]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`,justifyContent:`flex-end`},children:[(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>{navigator.clipboard.writeText(ee);let e=document.activeElement;e.textContent=`Copied`,setTimeout(()=>{e.textContent=`Copy to Clipboard`},1500)},children:`Copy to Clipboard`}),re===`email`?(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>{let e=encodeURIComponent(`Information Request: ${C.dealInfo?.companyName||`Deal`} Analysis`),t=encodeURIComponent(ee);window.open(`mailto:?subject=${e}&body=${t}`)},style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`},children:`Open Email Client`}):(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>{let e=encodeURIComponent(ee);window.open(`sms:?&body=${e}`)},style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`},children:`Open Messages`})]})]})]})]})})]})}function R_({isOpen:e,onClose:t,title:n,children:r,onSubmit:i,submitLabel:a=`Submit`}){if(!e)return null;let o=e=>{e.preventDefault(),i?.(e)};return(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{className:`backdrop`,onClick:t,style:{zIndex:100}}),(0,$.jsx)(`div`,{style:{position:`fixed`,top:`50%`,left:`50%`,transform:`translate(-50%, -50%)`,zIndex:101,width:`90%`,maxWidth:`600px`,maxHeight:`90vh`,overflow:`auto`},children:(0,$.jsxs)(`div`,{className:`card`,children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:n}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:t,"aria-label":`Close modal`,children:``})]}),(0,$.jsxs)(`form`,{onSubmit:o,children:[(0,$.jsx)(`div`,{style:{padding:`16px`},children:r}),(0,$.jsxs)(`div`,{style:{padding:`12px 16px`,borderTop:`1px solid var(--line)`,display:`flex`,gap:`8px`,justifyContent:`flex-end`},children:[(0,$.jsx)(`button`,{type:`button`,className:`iconBtn`,onClick:t,children:`Cancel`}),(0,$.jsx)(`button`,{type:`submit`,className:`iconBtn`,style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`},children:a})]})]})]})})]})}function z_(){let[e,t]=(0,_.useState)([]),[n,r]=(0,_.useState)(!1),[i,a]=(0,_.useState)(null),[o,s]=(0,_.useState)(!1),[c,l]=(0,_.useState)({name:``,description:``,rules:``,enabled:!0}),[u,d]=(0,_.useState)(!1),[f,p]=(0,_.useState)(!1),[m,h]=(0,_.useState)({name:``,description:``,condition:``,action:``}),[g,v]=(0,_.useState)(null),[y,b]=(0,_.useState)(``),[x,S]=(0,_.useState)([]),[C,w]=(0,_.useState)([]),ee=localStorage.getItem(`VERTICAL`)||`auto`,te=localStorage.getItem(`JURISDICTION`)||`IL`,ne={auto:`Auto Dealer`,analyst:`Investment Analyst`,"real-estate":`Real Estate Brokerage`,"property-mgmt":`Property Management`,aviation:`Aviation`,marine:`Marine`};(0,_.useEffect)(()=>{T()},[]);async function T(){r(!0);try{t([])}finally{r(!1)}}function re(e){a(e),l({name:e.name,description:e.description,rules:e.rules.join(`
`),enabled:e.enabled}),s(!0)}function ie(n){n.preventDefault(),t(e.map(e=>e.id===i.id?{...e,name:c.name,description:c.description,rules:c.rules.split(`
`).filter(e=>e.trim()),enabled:c.enabled}:e)),s(!1)}function ae(n){t(e.map(e=>e.id===n?{...e,enabled:!e.enabled}:e))}let oe={total:e.length,enabled:e.filter(e=>e.enabled).length,disabled:e.filter(e=>!e.enabled).length,executions:e.reduce((e,t)=>e+t.executionCount,0)};return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Rules & Resources`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Configure RAAS workflows for your vertical and jurisdiction`})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`},children:[(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>d(!0),style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`},children:`+ Add Rule`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>p(!0),children:`+ Add SOP`})]})]}),(0,$.jsxs)(`div`,{className:`kpiRow`,children:[(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Total Workflows`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:oe.total})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Enabled`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:oe.enabled})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Disabled`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:oe.disabled})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Total Executions`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:oe.executions})]})]}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsx)(`div`,{className:`cardTitle`,children:`Current Configuration`})}),(0,$.jsxs)(`div`,{className:`detail`,children:[(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Vertical`}),(0,$.jsx)(`div`,{className:`v`,children:ne[ee]||ee})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Jurisdiction`}),(0,$.jsx)(`div`,{className:`v`,children:te.toUpperCase()})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`RAAS Version`}),(0,$.jsx)(`div`,{className:`v`,children:`2.1.0`})]}),localStorage.getItem(`RAAS_RULES`)&&(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Custom Rules`}),(0,$.jsx)(`div`,{className:`v`,style:{whiteSpace:`pre-wrap`},children:localStorage.getItem(`RAAS_RULES`)})]})]})]}),x.length>0&&(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{className:`cardTitle`,children:[`Custom Rules (`,x.length,`)`]})}),(0,$.jsx)(`div`,{style:{padding:`16px`,display:`flex`,flexDirection:`column`,gap:`8px`},children:x.map((e,t)=>(0,$.jsxs)(`div`,{style:{padding:`12px`,background:`#f8fafc`,borderRadius:`8px`,display:`flex`,justifyContent:`space-between`,alignItems:`flex-start`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600,fontSize:`14px`},children:e.name}),e.description&&(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`,marginTop:`2px`},children:e.description}),e.condition&&(0,$.jsxs)(`div`,{style:{fontSize:`12px`,color:`#7c3aed`,marginTop:`4px`},children:[`When: `,e.condition]}),e.action&&(0,$.jsxs)(`div`,{style:{fontSize:`12px`,color:`#059669`,marginTop:`2px`},children:[`Then: `,e.action]})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>S(x.filter((e,n)=>n!==t)),style:{fontSize:`12px`,padding:`4px 8px`,color:`var(--danger)`,borderColor:`var(--danger)`},children:`Remove`})]},t))})]}),C.length>0&&(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{className:`cardTitle`,children:[`SOP Documents (`,C.length,`)`]})}),(0,$.jsx)(`div`,{style:{padding:`16px`,display:`flex`,flexDirection:`column`,gap:`8px`},children:C.map((e,t)=>(0,$.jsxs)(`div`,{style:{padding:`12px`,background:`#f8fafc`,borderRadius:`8px`,display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600,fontSize:`14px`},children:e.name}),(0,$.jsxs)(`div`,{style:{fontSize:`12px`,color:`var(--textMuted)`},children:[e.fileName,` (`,(e.fileSize/1024).toFixed(1),` KB)`]})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>w(C.filter((e,n)=>n!==t)),style:{fontSize:`12px`,padding:`4px 8px`,color:`var(--danger)`,borderColor:`var(--danger)`},children:`Remove`})]},t))})]}),n&&(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{className:`empty`,children:`Loading workflows...`})}),!n&&e.length===0&&(0,$.jsx)(`div`,{className:`card`,style:{marginTop:`16px`},children:(0,$.jsxs)(`div`,{className:`empty`,style:{padding:`40px 20px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`16px`,fontWeight:600,marginBottom:`8px`},children:`No workflows configured yet`}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`var(--textMuted)`,marginBottom:`16px`,maxWidth:`400px`,margin:`0 auto 16px`},children:`Workflows define the rules your AI assistant follows. They are configured per vertical and jurisdiction. Create your first workflow or ask the AI assistant to set one up for you.`}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`,justifyContent:`center`},children:[(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>d(!0),style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`},children:`+ Add Rule`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>p(!0),children:`+ Add SOP Document`})]})]})}),!n&&e.length>0&&(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:e.map(e=>(0,$.jsxs)(`div`,{className:`card`,children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:e.name}),(0,$.jsx)(`div`,{className:`cardSub`,children:e.description})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`,alignItems:`center`},children:[(0,$.jsx)(`span`,{className:`badge ${e.enabled?`badge-completed`:``}`,style:{fontSize:`11px`},children:e.enabled?`Enabled`:`Disabled`}),(0,$.jsxs)(`span`,{className:`badge`,style:{fontSize:`11px`},children:[e.executionCount,` runs`]})]})]}),(0,$.jsxs)(`div`,{style:{padding:`16px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`8px`},children:`Rules`}),(0,$.jsx)(`ul`,{style:{margin:0,paddingLeft:`20px`},children:e.rules.map((e,t)=>(0,$.jsx)(`li`,{style:{marginBottom:`4px`,fontSize:`14px`},children:e},t))})]}),(0,$.jsxs)(`div`,{className:`detail`,style:{borderTop:`1px solid var(--line)`},children:[(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Vertical`}),(0,$.jsx)(`div`,{className:`v`,children:e.vertical.toUpperCase()})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Jurisdiction`}),(0,$.jsx)(`div`,{className:`v`,children:e.jurisdiction})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Last Used`}),(0,$.jsx)(`div`,{className:`v`,children:new Date(e.lastUsed).toLocaleString()})]})]}),(0,$.jsx)(`div`,{style:{padding:`16px`,borderTop:`1px solid var(--line)`},children:(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`},children:[(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>re(e),style:{flex:1},children:`Edit Rules`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>ae(e.id),style:{flex:1},children:e.enabled?`Disable`:`Enable`}),(0,$.jsx)(`button`,{className:`iconBtn`,style:{flex:1},children:`Test Workflow`})]})})]},e.id))}),i&&!o&&(0,$.jsxs)(`div`,{className:`card`,style:{marginTop:`16px`},children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:i.name}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Workflow Details`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>a(null),children:`Close`})]}),(0,$.jsxs)(`div`,{style:{padding:`16px`},children:[(0,$.jsxs)(`div`,{style:{marginBottom:`16px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`8px`},children:`Execution History`}),(0,$.jsxs)(`div`,{style:{fontSize:`14px`,color:`var(--textMuted)`},children:[`This workflow has been executed `,i.executionCount,` times.`]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`8px`},children:`Recent Runs`}),(0,$.jsx)(`div`,{style:{padding:`12px`,background:`#f8fafc`,borderRadius:`8px`,fontSize:`13px`,color:`var(--textMuted)`},children:`Execution logs would appear here`})]})]})]}),(0,$.jsx)(R_,{isOpen:o,onClose:()=>s(!1),title:`Edit Workflow Rules`,onSubmit:ie,submitLabel:`Save Changes`,children:(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Workflow Name *`}),(0,$.jsx)(`input`,{type:`text`,value:c.name,onChange:e=>l({...c,name:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Description`}),(0,$.jsx)(`input`,{type:`text`,value:c.description,onChange:e=>l({...c,description:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`}})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Rules (one per line) *`}),(0,$.jsx)(`textarea`,{value:c.rules,onChange:e=>l({...c,rules:e.target.value}),rows:10,style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`,fontFamily:`monospace`,fontSize:`13px`},required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`label`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,$.jsx)(`input`,{type:`checkbox`,checked:c.enabled,onChange:e=>l({...c,enabled:e.target.checked})}),(0,$.jsx)(`span`,{style:{fontWeight:600},children:`Enabled`})]}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`,marginTop:`4px`},children:`Only enabled workflows will execute`})]})]})}),(0,$.jsx)(R_,{isOpen:u,onClose:()=>{d(!1),h({name:``,description:``,condition:``,action:``})},title:`Add Custom Rule`,onSubmit:e=>{e.preventDefault(),m.name.trim()&&(S([...x,{...m}]),h({name:``,description:``,condition:``,action:``}),d(!1))},submitLabel:`Add Rule`,children:(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Rule Name *`}),(0,$.jsx)(`input`,{type:`text`,value:m.name,onChange:e=>h({...m,name:e.target.value}),placeholder:`e.g., Minimum Deal Size Check`,style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Description`}),(0,$.jsx)(`input`,{type:`text`,value:m.description,onChange:e=>h({...m,description:e.target.value}),placeholder:`What does this rule do?`,style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`}})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Condition (when)`}),(0,$.jsx)(`textarea`,{value:m.condition,onChange:e=>h({...m,condition:e.target.value}),placeholder:`e.g., Deal ask amount is below $500,000`,rows:2,style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`,fontFamily:`inherit`}})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Action (then)`}),(0,$.jsx)(`textarea`,{value:m.action,onChange:e=>h({...m,action:e.target.value}),placeholder:`e.g., Auto-pass and notify user`,rows:2,style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`,fontFamily:`inherit`}})]})]})}),(0,$.jsx)(R_,{isOpen:f,onClose:()=>{p(!1),v(null),b(``)},title:`Add SOP Documentation`,onSubmit:e=>{e.preventDefault(),g&&(w([...C,{name:y.trim()||g.name,fileName:g.name,fileSize:g.size}]),v(null),b(``),p(!1))},submitLabel:`Upload SOP`,children:(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Document Name`}),(0,$.jsx)(`input`,{type:`text`,value:y,onChange:e=>b(e.target.value),placeholder:`e.g., Deal Screening SOP`,style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`}})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Upload Document *`}),(0,$.jsx)(`input`,{type:`file`,accept:`.pdf,.docx,.doc,.txt,.xlsx,.xls,.csv`,onChange:e=>{let t=e.target.files?.[0];t&&(v(t),y.trim()||b(t.name.replace(/\.[^.]+$/,``)))},style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0}),g&&(0,$.jsxs)(`div`,{style:{marginTop:`8px`,fontSize:`13px`,color:`var(--textMuted)`},children:[g.name,` (`,(g.size/1024).toFixed(1),` KB)`]})]}),(0,$.jsx)(`div`,{style:{padding:`12px`,background:`#f8f4ff`,borderRadius:`8px`,fontSize:`13px`,color:`#6b7280`},children:`SOP documents feed into your RAAS engine. The AI assistant will reference these when handling your business operations.`})]})})]})}var B_=[{stock:`N25000`,year:2025,make:`Toyota`,model:`Camry LE`,trim:`LE`,color:`Wind Chill Pearl`,mileage:12,price:28400,msrp:28400,daysOnLot:70,status:`available`},{stock:`N25001`,year:2025,make:`Toyota`,model:`Camry SE`,trim:`SE`,color:`Midnight Black`,mileage:8,price:30200,msrp:30200,daysOnLot:45,status:`available`},{stock:`N25002`,year:2025,make:`Toyota`,model:`Camry XSE`,trim:`XSE`,color:`Underground`,mileage:5,price:32800,msrp:32800,daysOnLot:22,status:`available`},{stock:`N25003`,year:2025,make:`Toyota`,model:`Corolla LE`,trim:`LE`,color:`Celestite`,mileage:10,price:23500,msrp:23500,daysOnLot:55,status:`available`},{stock:`N25004`,year:2025,make:`Toyota`,model:`Corolla SE`,trim:`SE`,color:`Blueprint`,mileage:6,price:25200,msrp:25200,daysOnLot:30,status:`available`},{stock:`N25005`,year:2025,make:`Toyota`,model:`RAV4 XLE`,trim:`XLE`,color:`Lunar Rock`,mileage:9,price:34200,msrp:34200,daysOnLot:18,status:`available`},{stock:`N25006`,year:2025,make:`Toyota`,model:`RAV4 XLE Premium`,trim:`XLE Premium`,color:`Ice Cap`,mileage:4,price:37500,msrp:37500,daysOnLot:12,status:`available`},{stock:`N25007`,year:2025,make:`Toyota`,model:`Tacoma TRD Sport`,trim:`TRD Sport`,color:`Magnetic Gray`,mileage:15,price:42300,msrp:42300,daysOnLot:8,status:`available`},{stock:`N25008`,year:2025,make:`Toyota`,model:`Highlander XLE`,trim:`XLE`,color:`Celestial Silver`,mileage:7,price:42900,msrp:42900,daysOnLot:25,status:`available`},{stock:`N25009`,year:2025,make:`Toyota`,model:`Tundra SR5 CrewMax`,trim:`SR5`,color:`Army Green`,mileage:11,price:48900,msrp:48900,daysOnLot:35,status:`available`},{stock:`N25010`,year:2025,make:`Toyota`,model:`4Runner TRD Off-Road`,trim:`TRD Off-Road`,color:`Lunar Rock`,mileage:3,price:46500,msrp:46500,daysOnLot:5,status:`available`},{stock:`N25011`,year:2025,make:`Toyota`,model:`Prius LE`,trim:`LE`,color:`Sea Glass Pearl`,mileage:8,price:29800,msrp:29800,daysOnLot:40,status:`available`},{stock:`N25012`,year:2025,make:`Toyota`,model:`GR86 Premium`,trim:`Premium`,color:`Track bRED`,mileage:2,price:33500,msrp:33500,daysOnLot:14,status:`available`},{stock:`N25013`,year:2025,make:`Toyota`,model:`Crown Platinum`,trim:`Platinum`,color:`Oxygen White`,mileage:6,price:53400,msrp:53400,daysOnLot:50,status:`available`},{stock:`N25014`,year:2025,make:`Toyota`,model:`Grand Highlander Platinum`,trim:`Platinum`,color:`Wind Chill Pearl`,mileage:4,price:55200,msrp:55200,daysOnLot:28,status:`available`}],V_=[{stock:`U30000`,year:2021,make:`BMW`,model:`X3 xDrive30i`,trim:`xDrive30i`,color:`Alpine White`,mileage:42500,price:34169,daysOnLot:143,status:`available`,carfax:`clean`,cpo:!1},{stock:`U30001`,year:2023,make:`Honda`,model:`Accord Sport`,trim:`Sport`,color:`Still Night Pearl`,mileage:18200,price:28900,daysOnLot:35,status:`available`,carfax:`clean`,cpo:!1},{stock:`U30002`,year:2022,make:`Toyota`,model:`Camry SE`,trim:`SE`,color:`Celestial Silver`,mileage:31e3,price:24500,daysOnLot:22,status:`available`,carfax:`clean`,cpo:!0},{stock:`U30003`,year:2023,make:`Ford`,model:`Explorer XLT`,trim:`XLT`,color:`Agate Black`,mileage:28900,price:33200,daysOnLot:86,status:`available`,carfax:`minor`,cpo:!1},{stock:`U30004`,year:2022,make:`Mazda`,model:`CX-5 Carbon Edition`,trim:`Carbon Edition`,color:`Polymetal Gray`,mileage:22100,price:27800,daysOnLot:15,status:`available`,carfax:`clean`,cpo:!1},{stock:`U30005`,year:2023,make:`Subaru`,model:`Outback Limited`,trim:`Limited`,color:`Crystal White Pearl`,mileage:19500,price:31400,daysOnLot:44,status:`available`,carfax:`clean`,cpo:!1},{stock:`U30006`,year:2022,make:`Hyundai`,model:`Tucson SEL`,trim:`SEL`,color:`Amazon Gray`,mileage:35200,price:25900,daysOnLot:28,status:`available`,carfax:`clean`,cpo:!1},{stock:`U30007`,year:2021,make:`Toyota`,model:`RAV4 XLE`,trim:`XLE`,color:`Blueprint`,mileage:45800,price:27200,daysOnLot:19,status:`available`,carfax:`clean`,cpo:!0},{stock:`U30008`,year:2023,make:`Kia`,model:`Sportage X-Line`,trim:`X-Line`,color:`Dawning Red`,mileage:15800,price:29500,daysOnLot:55,status:`available`,carfax:`clean`,cpo:!1},{stock:`U30009`,year:2022,make:`Chevrolet`,model:`Equinox LT`,trim:`LT`,color:`Summit White`,mileage:38100,price:22900,daysOnLot:67,status:`available`,carfax:`clean`,cpo:!1},{stock:`U30010`,year:2022,make:`Ford`,model:`Explorer XLT`,trim:`XLT`,color:`Iconic Silver`,mileage:41200,price:30500,daysOnLot:126,status:`available`,carfax:`minor`,cpo:!1},{stock:`U30011`,year:2023,make:`Nissan`,model:`Rogue SV`,trim:`SV`,color:`Super Black`,mileage:21300,price:28100,daysOnLot:32,status:`available`,carfax:`clean`,cpo:!1},{stock:`U30012`,year:2021,make:`Toyota`,model:`Tacoma SR5`,trim:`SR5`,color:`Cement`,mileage:52300,price:31800,daysOnLot:9,status:`available`,carfax:`clean`,cpo:!0},{stock:`U30013`,year:2022,make:`Lexus`,model:`NX 250`,trim:`250`,color:`Eminent White Pearl`,mileage:28700,price:36900,daysOnLot:41,status:`available`,carfax:`clean`,cpo:!1},{stock:`U30014`,year:2023,make:`Audi`,model:`Q5 Premium`,trim:`Premium`,color:`Mythos Black`,mileage:16400,price:39800,daysOnLot:95,status:`available`,carfax:`clean`,cpo:!1}];function H_(e){return e<30?{bg:`#dcfce7`,color:`#16a34a`,label:``}:e<=90?{bg:`#fef3c7`,color:`#d97706`,label:``}:{bg:`#fee2e2`,color:`#dc2626`,label:`AGING`}}function U_(){let[e,t]=(0,_.useState)(`new`),n=e===`new`?B_:V_,r=n.reduce((e,t)=>e+t.price,0),i=n.filter(e=>e.daysOnLot>90).length;function a(e){window.dispatchEvent(new CustomEvent(`ta:chatPrompt`,{detail:{message:e}}))}return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Inventory`}),(0,$.jsx)(`p`,{className:`subtle`,children:`New and used vehicle inventory management`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>a(`What vehicles are aging past 90 days and what should we do about them?`),style:{background:`linear-gradient(135deg, #7c3aed, #6d28d9)`,color:`white`,border:`none`},children:`Aging Report`})]}),(0,$.jsx)(`div`,{style:{display:`flex`,gap:`0`,marginBottom:`20px`,borderBottom:`2px solid #e2e8f0`},children:[{id:`new`,label:`New (${B_.length})`},{id:`used`,label:`Used (${V_.length})`}].map(n=>(0,$.jsx)(`button`,{onClick:()=>t(n.id),style:{padding:`10px 20px`,fontSize:`14px`,fontWeight:600,border:`none`,borderBottom:e===n.id?`2px solid #7c3aed`:`2px solid transparent`,background:`transparent`,color:e===n.id?`#7c3aed`:`#64748b`,cursor:`pointer`,marginBottom:`-2px`},children:n.label},n.id))}),(0,$.jsxs)(`div`,{className:`kpiRow`,style:{marginBottom:`16px`},children:[(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Tab Value`}),(0,$.jsxs)(`div`,{className:`kpiValue`,children:[`$`,r.toLocaleString()]})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Units`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:n.length})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Avg Price`}),(0,$.jsxs)(`div`,{className:`kpiValue`,children:[`$`,Math.round(r/n.length).toLocaleString()]})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,style:{color:i>0?`#dc2626`:void 0},children:`Aging (>90d)`}),(0,$.jsx)(`div`,{className:`kpiValue`,style:{color:i>0?`#dc2626`:void 0},children:i})]})]}),(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr 1fr`,gap:`14px`},children:n.map(e=>{let t=H_(e.daysOnLot);return(0,$.jsxs)(`div`,{className:`card`,style:{padding:`16px`,cursor:`pointer`},onClick:()=>a(`Tell me about Stock ${e.stock} -- ${e.year} ${e.make} ${e.model} ${e.trim}. Price: $${e.price.toLocaleString()}. ${e.daysOnLot} days on lot.`),children:[(0,$.jsxs)(`div`,{style:{height:`120px`,background:`#f1f5f9`,borderRadius:`8px`,display:`flex`,alignItems:`center`,justifyContent:`center`,marginBottom:`12px`,color:`#94a3b8`,fontSize:`13px`},children:[e.year,` `,e.make,` `,e.model]}),(0,$.jsxs)(`div`,{style:{fontWeight:700,fontSize:`15px`,color:`#1e293b`,marginBottom:`4px`},children:[e.year,` `,e.make,` `,e.model,` `,e.trim===e.model.split(` `).pop()?``:e.trim]}),(0,$.jsxs)(`div`,{style:{fontSize:`12px`,color:`#64748b`,marginBottom:`8px`},children:[`Stock #`,e.stock,`  `,e.color,`  `,e.mileage.toLocaleString(),` mi`]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`6px`,flexWrap:`wrap`,marginBottom:`8px`},children:[(0,$.jsxs)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:t.bg,color:t.color},children:[e.daysOnLot,`d `,t.label]}),e.carfax&&(0,$.jsxs)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:e.carfax===`clean`?`#dcfce7`:`#fef3c7`,color:e.carfax===`clean`?`#16a34a`:`#d97706`},children:[`CARFAX `,e.carfax===`clean`?`Clean`:`Minor Reported`]}),e.cpo&&(0,$.jsx)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:`#fef3c7`,color:`#92400e`},children:`CPO`})]}),(0,$.jsxs)(`div`,{style:{fontSize:`20px`,fontWeight:900,color:`#1e293b`},children:[`$`,e.price.toLocaleString()]})]},e.stock)})})]})}function W_(){let e=localStorage.getItem(`VERTICAL`)||`auto`,t=localStorage.getItem(`JURISDICTION`)||`IL`,n=e===`analyst`,r=e===`auto`,[i,a]=(0,_.useState)([]),[o,s]=(0,_.useState)(!1),[c,l]=(0,_.useState)(``),[u,d]=(0,_.useState)(`all`),[f,p]=(0,_.useState)(`all`),[m,h]=(0,_.useState)(!1),[g,v]=(0,_.useState)(null),[y,b]=(0,_.useState)({type:n?`consulting`:`vehicle`,status:`available`,metadata:{},price:``,cost:``}),[x,S]=(0,_.useState)([]),[C,w]=(0,_.useState)(!1);(0,_.useEffect)(()=>{n?ee():te()},[]);async function ee(){w(!0);try{S((await p_({vertical:e,jurisdiction:t})).deals||[])}catch(e){console.warn(`Could not load deals for fees page:`,e.message)}finally{w(!1)}}async function te(){s(!0),l(``);try{a((await Yg({vertical:e,jurisdiction:t,type:u===`all`?void 0:u})).items||[])}catch(e){l(e?.message||String(e)),a([])}finally{s(!1)}}async function ne(r){r.preventDefault(),l(``);try{g?await Zg({vertical:e,jurisdiction:t,id:g.id,item:{type:y.type,status:y.status,metadata:y.metadata,price:parseFloat(y.price)||0,cost:parseFloat(y.cost)||0}}):await Xg({vertical:e,jurisdiction:t,item:{type:y.type,status:y.status,metadata:y.metadata,price:parseFloat(y.price)||0,cost:parseFloat(y.cost)||0}}),await te(),h(!1),v(null),b({type:n?`consulting`:`vehicle`,status:`available`,metadata:{},price:``,cost:``})}catch(e){l(e?.message||String(e))}}function T(e){v(e),b({type:e.type,status:e.status,metadata:{...e.metadata},price:e.price.toString(),cost:e.cost.toString()}),h(!0)}async function re(n){if(confirm(`Are you sure you want to delete this item?`)){l(``);try{await Qg({vertical:e,jurisdiction:t,id:n}),await te()}catch(e){l(e?.message||String(e))}}}function ie(e,t){b({...y,metadata:{...y.metadata,[e]:t}})}let ae=i.filter(e=>!(u!==`all`&&e.type!==u||f!==`all`&&e.status!==f)),oe={total:i.length,available:i.filter(e=>e.status===`available`).length,sold:i.filter(e=>e.status===`sold`).length,pending:i.filter(e=>e.status===`pending`).length,totalValue:i.filter(e=>e.status===`available`).reduce((e,t)=>e+t.price,0)};if(r)return(0,$.jsx)(U_,{});if(n){let e=x.length>0?x:[{id:`fb1`,dealInput:{companyName:`Las Vegas Foreclosure`,askAmount:`$500,000`},analysis:{riskScore:85,recommendation:`PASS`}},{id:`fb2`,dealInput:{companyName:`Austin Apartments`,askAmount:`$78,500,000`},analysis:{riskScore:45,recommendation:`INVEST`}},{id:`fb3`,dealInput:{companyName:`Chicago Office #2`,askAmount:`$52,000,000`},analysis:{riskScore:52,recommendation:`INVEST`}},{id:`fb4`,dealInput:{companyName:`Chicago Office`,askAmount:`$52,000,000`},analysis:{riskScore:38,recommendation:`INVEST`}},{id:`fb5`,dealInput:{companyName:`Phoenix Industrial`,askAmount:`$52,300,000`},analysis:{riskScore:45,recommendation:`INVEST`}}];function t(e){let t=(e.dealInput?.askAmount||``).replace(/[$,]/g,``);return parseFloat(t)||0}function n(e){return e.dealInput?.companyName||e.dealInput?.summary?.substring(0,40)||`Unknown`}let r=e.reduce((e,n)=>e+t(n),0),i=e.length*2,a=i*250,o=r*.015,s=a+o;return(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{style:{fontSize:`32px`,fontWeight:700},children:`Services & Fees`}),(0,$.jsx)(`p`,{style:{color:`#64748b`,marginBottom:`24px`},children:`Your fee schedule and revenue tracking`}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`24px`,padding:`24px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`18px`,fontWeight:600,marginBottom:`16px`},children:`Fee Schedule`}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr 1fr`,gap:`16px`},children:[(0,$.jsxs)(`div`,{style:{padding:`20px`,background:`#f8fafc`,borderRadius:`8px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`,marginBottom:`4px`},children:`HOURLY RATE`}),(0,$.jsx)(`div`,{style:{fontSize:`28px`,fontWeight:700},children:`$250`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`},children:`Per hour consulting`})]}),(0,$.jsxs)(`div`,{style:{padding:`20px`,background:`#f8fafc`,borderRadius:`8px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`,marginBottom:`4px`},children:`SUCCESS FEE`}),(0,$.jsx)(`div`,{style:{fontSize:`28px`,fontWeight:700},children:`1.5%`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`},children:`Of closed deal value`})]}),(0,$.jsxs)(`div`,{style:{padding:`20px`,background:`#f8fafc`,borderRadius:`8px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`,marginBottom:`4px`},children:`RETAINER`}),(0,$.jsx)(`div`,{style:{fontSize:`28px`,fontWeight:700},children:`$2,500`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`},children:`Monthly retainer option`})]})]})]}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`24px`,padding:`24px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`18px`,fontWeight:600,marginBottom:`16px`},children:`Revenue Tracker`}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr 1fr 1fr`,gap:`12px`,marginBottom:`20px`},children:[(0,$.jsxs)(`div`,{style:{padding:`12px`,background:`#f0fdf4`,borderRadius:`8px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`HOURS BILLED`}),(0,$.jsx)(`div`,{style:{fontSize:`22px`,fontWeight:700},children:i})]}),(0,$.jsxs)(`div`,{style:{padding:`12px`,background:`#f0fdf4`,borderRadius:`8px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`HOURLY REVENUE`}),(0,$.jsxs)(`div`,{style:{fontSize:`22px`,fontWeight:700,color:`#16a34a`},children:[`$`,a.toLocaleString()]})]}),(0,$.jsxs)(`div`,{style:{padding:`12px`,background:`#ede9fe`,borderRadius:`8px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`PENDING SUCCESS FEES`}),(0,$.jsxs)(`div`,{style:{fontSize:`22px`,fontWeight:700,color:`#7c3aed`},children:[`$`,Math.round(o).toLocaleString()]})]}),(0,$.jsxs)(`div`,{style:{padding:`12px`,background:`#fef3c7`,borderRadius:`8px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`TOTAL POTENTIAL REVENUE`}),(0,$.jsxs)(`div`,{style:{fontSize:`22px`,fontWeight:700},children:[`$`,Math.round(s).toLocaleString()]})]})]}),C?(0,$.jsx)(`div`,{style:{padding:`24px`,textAlign:`center`,color:`#64748b`},children:`Loading deals...`}):(0,$.jsx)(`div`,{className:`tableWrap`,children:(0,$.jsxs)(`table`,{className:`table`,style:{width:`100%`},children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{style:{textAlign:`left`},children:`Deal`}),(0,$.jsx)(`th`,{style:{textAlign:`left`},children:`Deal Size`}),(0,$.jsx)(`th`,{style:{textAlign:`left`},children:`Hours`}),(0,$.jsx)(`th`,{style:{textAlign:`left`},children:`Hourly Fee`}),(0,$.jsx)(`th`,{style:{textAlign:`left`},children:`Success Fee (1.5%)`}),(0,$.jsx)(`th`,{style:{textAlign:`left`},children:`Status`})]})}),(0,$.jsxs)(`tbody`,{children:[e.map(e=>{let r=t(e),i=r*.015,a=e.analysis?.recommendation||`PENDING`,o=a===`INVEST`?`#dcfce7`:a===`PASS`?`#fee2e2`:`#fef3c7`,s=a===`INVEST`?`#16a34a`:a===`PASS`?`#dc2626`:`#d97706`;return(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`td`,{className:`tdStrong`,children:n(e)}),(0,$.jsxs)(`td`,{children:[`$`,r.toLocaleString()]}),(0,$.jsx)(`td`,{children:2}),(0,$.jsxs)(`td`,{children:[`$`,500 .toLocaleString()]}),(0,$.jsxs)(`td`,{style:{color:`#7c3aed`},children:[`$`,Math.round(i).toLocaleString()]}),(0,$.jsx)(`td`,{children:(0,$.jsx)(`span`,{style:{padding:`2px 8px`,borderRadius:`4px`,fontSize:`12px`,fontWeight:600,backgroundColor:o,color:s},children:a})})]},e.id)}),(0,$.jsxs)(`tr`,{style:{borderTop:`2px solid #e2e8f0`,fontWeight:700},children:[(0,$.jsx)(`td`,{children:`TOTALS`}),(0,$.jsxs)(`td`,{children:[`$`,r.toLocaleString()]}),(0,$.jsx)(`td`,{children:i}),(0,$.jsxs)(`td`,{children:[`$`,a.toLocaleString()]}),(0,$.jsxs)(`td`,{style:{color:`#7c3aed`},children:[`$`,Math.round(o).toLocaleString()]}),(0,$.jsx)(`td`,{})]})]})]})})]})]})}return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Services & Inventory`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Manage products, services, and pricing`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>{v(null),b({type:n?`consulting`:`vehicle`,status:`available`,metadata:{},price:``,cost:``}),h(!0)},style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`},children:n?`+ Add Service`:`+ Add Item`})]}),(0,$.jsxs)(`div`,{className:`kpiRow`,children:[(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Total Items`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:oe.total})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Available`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:oe.available})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Sold`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:oe.sold})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:n?`Total Fees`:`Inventory Value`}),(0,$.jsxs)(`div`,{className:`kpiValue`,children:[`$`,oe.totalValue.toLocaleString()]})]})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`12px`,marginBottom:`16px`,flexWrap:`wrap`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontSize:`13px`,fontWeight:600},children:`Type`}),(0,$.jsxs)(`select`,{value:u,onChange:e=>d(e.target.value),style:{padding:`8px 12px`,borderRadius:`12px`,border:`1px solid var(--line)`},children:[(0,$.jsx)(`option`,{value:`all`,children:`All Types`}),n?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`option`,{value:`consulting`,children:`Consulting`}),(0,$.jsx)(`option`,{value:`performance_fee`,children:`Performance Fee`}),(0,$.jsx)(`option`,{value:`management_fee`,children:`Management Fee`}),(0,$.jsx)(`option`,{value:`subscription`,children:`Research Subscription`})]}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`option`,{value:`vehicle`,children:`Vehicles`}),(0,$.jsx)(`option`,{value:`service`,children:`Services`})]})]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontSize:`13px`,fontWeight:600},children:`Status`}),(0,$.jsxs)(`select`,{value:f,onChange:e=>p(e.target.value),style:{padding:`8px 12px`,borderRadius:`12px`,border:`1px solid var(--line)`},children:[(0,$.jsx)(`option`,{value:`all`,children:`All Statuses`}),(0,$.jsx)(`option`,{value:`available`,children:`Available`}),(0,$.jsx)(`option`,{value:`pending`,children:`Pending`}),(0,$.jsx)(`option`,{value:`sold`,children:`Sold`})]})]})]}),c&&(0,$.jsx)(`div`,{className:`card`,style:{borderColor:`var(--danger)`},children:(0,$.jsx)(`div`,{className:`empty`,style:{color:`var(--danger)`},children:c})}),o&&(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{className:`empty`,children:`Loading inventory...`})}),!o&&ae.length===0&&(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{className:`empty`,children:(0,$.jsx)(`p`,{children:`No inventory items found.`})})}),!o&&ae.length>0&&(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{className:`tableWrap`,children:(0,$.jsxs)(`table`,{className:`table`,children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{children:`Type`}),(0,$.jsx)(`th`,{children:n?`Service`:`Item`}),(0,$.jsx)(`th`,{children:n?`Rate / Fee`:`Price`}),!n&&(0,$.jsx)(`th`,{children:`Cost`}),!n&&(0,$.jsx)(`th`,{children:`Margin`}),(0,$.jsx)(`th`,{children:`Status`}),(0,$.jsx)(`th`,{children:`Actions`})]})}),(0,$.jsx)(`tbody`,{children:ae.map(e=>{let t=e.price-e.cost,r=e.price?(t/e.price*100).toFixed(1):`0.0`;return(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`td`,{children:{consulting:`Consulting`,performance_fee:`Performance Fee`,management_fee:`Management Fee`,subscription:`Subscription`,vehicle:`Vehicle`,service:`Service`}[e.type]||e.type}),(0,$.jsxs)(`td`,{className:`tdStrong`,children:[e.type===`vehicle`?`${e.metadata.year} ${e.metadata.make} ${e.metadata.model}`:e.metadata.name||e.metadata.serviceName||`-`,e.type===`vehicle`&&(0,$.jsxs)(`div`,{className:`tdMuted`,style:{fontSize:`12px`},children:[`VIN: `,e.metadata.vin]}),e.metadata.billingFrequency&&(0,$.jsx)(`div`,{className:`tdMuted`,style:{fontSize:`12px`},children:e.metadata.billingFrequency})]}),(0,$.jsxs)(`td`,{children:[n&&e.metadata.rateType===`percentage`?`${e.price}%`:`$${e.price.toLocaleString()}`,n&&e.metadata.rateUnit?`/${e.metadata.rateUnit}`:``]}),!n&&(0,$.jsxs)(`td`,{className:`tdMuted`,children:[`$`,e.cost.toLocaleString()]}),!n&&(0,$.jsx)(`td`,{children:(0,$.jsxs)(`span`,{style:{color:t>0?`var(--accent2)`:`var(--danger)`},children:[`$`,t.toLocaleString(),` (`,r,`%)`]})}),(0,$.jsx)(`td`,{children:(0,$.jsx)(`span`,{className:`badge badge-${e.status===`available`?`completed`:e.status===`sold`?`created`:`processing`}`,children:e.status})}),(0,$.jsx)(`td`,{children:(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`6px`},children:[(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>T(e),style:{padding:`6px 10px`,fontSize:`12px`},children:`Edit`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>re(e.id),style:{padding:`6px 10px`,fontSize:`12px`,borderColor:`var(--danger)`,color:`var(--danger)`},children:`Delete`})]})})]},e.id)})})]})})}),(0,$.jsx)(R_,{isOpen:m,onClose:()=>{h(!1),v(null),b({type:n?`consulting`:`vehicle`,status:`available`,metadata:{},price:``,cost:``})},title:g?`Edit Item`:n?`Add Service`:`Add New Item`,onSubmit:ne,submitLabel:g?`Update`:`Add Item`,children:(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Item Type *`}),(0,$.jsx)(`select`,{value:y.type,onChange:e=>b({...y,type:e.target.value,metadata:{}}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0,children:n?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`option`,{value:`consulting`,children:`Consulting Service`}),(0,$.jsx)(`option`,{value:`performance_fee`,children:`Performance Fee`}),(0,$.jsx)(`option`,{value:`management_fee`,children:`Fund Management Fee`}),(0,$.jsx)(`option`,{value:`subscription`,children:`Research Subscription`})]}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`option`,{value:`vehicle`,children:`Vehicle`}),(0,$.jsx)(`option`,{value:`service`,children:`Service`})]})})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Status *`}),(0,$.jsxs)(`select`,{value:y.status,onChange:e=>b({...y,status:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0,children:[(0,$.jsx)(`option`,{value:`available`,children:`Available`}),(0,$.jsx)(`option`,{value:`pending`,children:`Pending`}),(0,$.jsx)(`option`,{value:`sold`,children:`Sold`})]})]}),y.type===`vehicle`&&(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`VIN *`}),(0,$.jsx)(`input`,{type:`text`,placeholder:`17-character VIN`,value:y.metadata.vin||``,onChange:e=>ie(`vin`,e.target.value),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr 1fr`,gap:`10px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Year *`}),(0,$.jsx)(`input`,{type:`number`,placeholder:`2024`,value:y.metadata.year||``,onChange:e=>ie(`year`,e.target.value),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Make *`}),(0,$.jsx)(`input`,{type:`text`,placeholder:`Honda`,value:y.metadata.make||``,onChange:e=>ie(`make`,e.target.value),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Model *`}),(0,$.jsx)(`input`,{type:`text`,placeholder:`Civic`,value:y.metadata.model||``,onChange:e=>ie(`model`,e.target.value),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`10px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Mileage`}),(0,$.jsx)(`input`,{type:`text`,placeholder:`25,000`,value:y.metadata.mileage||``,onChange:e=>ie(`mileage`,e.target.value),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`}})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Color`}),(0,$.jsx)(`input`,{type:`text`,placeholder:`Silver`,value:y.metadata.color||``,onChange:e=>ie(`color`,e.target.value),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`}})]})]})]}),n&&[`consulting`,`performance_fee`,`management_fee`,`subscription`].includes(y.type)&&(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Service Name *`}),(0,$.jsx)(`input`,{type:`text`,placeholder:y.type===`consulting`?`e.g., Deal Screening & Analysis`:y.type===`performance_fee`?`e.g., Carry / Performance Fee`:y.type===`management_fee`?`e.g., Annual Management Fee`:`e.g., Monthly Research Brief`,value:y.metadata.name||``,onChange:e=>ie(`name`,e.target.value),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Description`}),(0,$.jsx)(`textarea`,{placeholder:`Describe the service or fee structure...`,value:y.metadata.description||``,onChange:e=>ie(`description`,e.target.value),rows:3,style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`,fontFamily:`inherit`,resize:`vertical`}})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`10px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Rate Type`}),(0,$.jsxs)(`select`,{value:y.metadata.rateType||`flat`,onChange:e=>ie(`rateType`,e.target.value),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},children:[(0,$.jsx)(`option`,{value:`flat`,children:`Flat Fee`}),(0,$.jsx)(`option`,{value:`hourly`,children:`Hourly Rate`}),(0,$.jsx)(`option`,{value:`percentage`,children:`Percentage`}),(0,$.jsx)(`option`,{value:`monthly`,children:`Monthly Retainer`}),(0,$.jsx)(`option`,{value:`annual`,children:`Annual Fee`})]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Billing Frequency`}),(0,$.jsxs)(`select`,{value:y.metadata.billingFrequency||`one_time`,onChange:e=>ie(`billingFrequency`,e.target.value),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},children:[(0,$.jsx)(`option`,{value:`one_time`,children:`One-time`}),(0,$.jsx)(`option`,{value:`monthly`,children:`Monthly`}),(0,$.jsx)(`option`,{value:`quarterly`,children:`Quarterly`}),(0,$.jsx)(`option`,{value:`annual`,children:`Annual`}),(0,$.jsx)(`option`,{value:`per_deal`,children:`Per Deal`})]})]})]})]}),!n&&y.type===`service`&&(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Service Name *`}),(0,$.jsx)(`input`,{type:`text`,placeholder:`e.g., Premium Oil Change`,value:y.metadata.name||``,onChange:e=>ie(`name`,e.target.value),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Description`}),(0,$.jsx)(`textarea`,{placeholder:`Service description...`,value:y.metadata.description||``,onChange:e=>ie(`description`,e.target.value),rows:3,style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`,fontFamily:`inherit`,resize:`vertical`}})]})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`10px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:[n?`Rate / Fee *`:`Price *`,` `,y.metadata?.rateType===`percentage`?`%`:`$`]}),(0,$.jsx)(`input`,{type:`number`,step:`0.01`,placeholder:`28500.00`,value:y.price,onChange:e=>b({...y,price:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Cost * $`}),(0,$.jsx)(`input`,{type:`number`,step:`0.01`,placeholder:`25000.00`,value:y.cost,onChange:e=>b({...y,cost:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]})]}),y.price&&y.cost&&(0,$.jsxs)(`div`,{style:{padding:`12px`,borderRadius:`12px`,background:`#f8fafc`,border:`1px solid var(--line)`},children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,fontWeight:600,marginBottom:`4px`},children:`Profit Margin`}),(0,$.jsxs)(`div`,{style:{fontSize:`18px`,fontWeight:900},children:[`$`,(parseFloat(y.price)-parseFloat(y.cost)).toFixed(2),` (`,((parseFloat(y.price)-parseFloat(y.cost))/parseFloat(y.price)*100).toFixed(1),`%)`]})]})]})})]})}var G_=[{label:`Active Conversations`,value:`52`},{label:`Sales Conversations`,value:`24`},{label:`Service Conversations`,value:`4`},{label:`Follow-ups Pending`,value:`18`}],K_=[{label:`Messages Sent Today`,value:`87`},{label:`Emails Sent Today`,value:`23`},{label:`Texts Sent Today`,value:`41`},{label:`Phone Calls`,value:`0`,badge:`Coming Soon`}],q_=[{title:`Sales Activity`,accent:`#16a34a`,summary:`24 customers in active sales conversations:`,details:[`8 in active negotiation`,`6 scheduling test drives`,`10 in initial inquiry`],highlight:`Top opportunity: Maria Gonzalez -- lease expiring, $2,800 potential`},{title:`Service Activity`,accent:`#2563eb`,summary:`4 service customers in communication:`,details:[`2 appointment confirmations`,`1 recall notification`,`1 warranty follow-up`],highlight:`Next appointment: Charles Cox, 60K Major Service, Monday 8:00 AM`},{title:`Outbound Queue`,accent:`#d97706`,summary:`18 follow-ups queued:`,details:[`7 post-test-drive follow-ups (24-48hr window)`,`5 lease expiration outreach (60-day window)`,`6 service reminders (upcoming appointments)`],highlight:`Estimated value of queued outreach: $34,200`}],J_=[{time:`6:02 AM`,action:`Sent lease offer`,context:`Maria Gonzalez -- 2024 Corolla LE`,channel:`Text`,status:`Delivered`,detail:`Personalized upgrade offer highlighting 2025 Corolla LE inventory availability. Included monthly payment comparison.`},{time:`5:45 AM`,action:`Confirmed appointment`,context:`Charles Cox -- 60K Service`,channel:`Text`,status:`Delivered`,detail:`Confirmation for Monday 8:00 AM. Included estimated cost ($449) and mention of warranty expiration -- Extra Care Gold pitch prepared.`},{time:`5:30 AM`,action:`Generated trade-in estimate`,context:`Mark Brown -- 2025 Corolla Cross`,channel:`Email`,status:`Delivered`,detail:`KBB-sourced trade estimate of $22,400. Paired with RAV4 XLE Premium offer showing positive equity of $4,200.`},{time:`5:15 AM`,action:`Drafted conquest offer`,context:`Amanda Liu -- 2025 RAV4 XLE`,channel:`Email`,status:`Queued`,detail:`TrueCar lead response with Lunar Rock RAV4 availability, competitive pricing vs Honda CR-V, and Saturday test drive invitation.`},{time:`Yesterday 4:30 PM`,action:`Sent F&I options`,context:`Robert Chen -- 2025 Camry XSE`,channel:`Email`,status:`Opened`,detail:`Menu presentation: Extended warranty options, GAP coverage, paint protection. Financing at 5.49% through Chase Auto.`},{time:`Yesterday 3:15 PM`,action:`Post-test-drive follow-up`,context:`Sandra Lee -- Highlander XLE`,channel:`Text`,status:`Delivered`,detail:`Thank-you message with lease special details. Highlighted family-friendly features discussed during test drive.`},{time:`Yesterday 2:00 PM`,action:`Service upsell pitch`,context:`Patricia Adams -- Oil Change`,channel:`In-person (prep)`,status:`Complete`,detail:`Prepared talking points for advisor: cabin air filter replacement ($45), next service interval reminder, satisfaction survey.`},{time:`Yesterday 11:30 AM`,action:`Price reduction alert`,context:`Internal -- 2021 BMW X3 (143 days)`,channel:`Dashboard`,status:`Flagged`,detail:`Recommended markdown from $34,169 to $31,999. Floor plan interest loss: $500/month. Market comp analysis attached.`},{time:`Yesterday 10:00 AM`,action:`Appointment reminder`,context:`Angela Williams -- Battery Check`,channel:`Text`,status:`Delivered`,detail:`Hybrid battery check + multi-point inspection reminder. Included trade-up suggestion for 2025 Prius Prime.`},{time:`2 days ago 9:00 AM`,action:`Inventory acquisition alert`,context:`Internal -- 3 trade-ins received`,channel:`Dashboard`,status:`Complete`,detail:`3 trade-ins processed: 2021 BMW X3 ($28,500), 2022 Civic ($19,400), 2020 Camry ($16,800). Recon estimates prepared.`},{time:`2 days ago 8:15 AM`,action:`Lease expiration batch`,context:`4 customers -- 60-day window`,channel:`Text`,status:`Delivered`,detail:`Batch outreach to Maria Gonzalez, Sandra Lee, and 2 others with leases expiring within 60 days. Personalized vehicle matches included.`},{time:`3 days ago 4:00 PM`,action:`Facebook listing generated`,context:`2025 Camry LE -- Stock N25000`,channel:`Facebook`,status:`Complete`,detail:`Marketplace listing with 12 photos, feature highlights, and competitive pricing. 70 days on lot trigger.`},{time:`3 days ago 2:30 PM`,action:`Service-to-sales flag`,context:`Angela Williams -- 2021 Prius Prime`,channel:`Dashboard`,status:`Flagged`,detail:`Vehicle 4+ years old, hybrid battery showing wear. Trade-up candidate for 2025 Prius Prime ($34,800). High equity position.`},{time:`4 days ago 9:00 AM`,action:`Post-purchase batch`,context:`12 customers -- 7-day check-in`,channel:`Email`,status:`Delivered`,detail:`Satisfaction survey + F&I product education emails sent to 12 recent buyers. 7 opened within 24 hours.`},{time:`5 days ago 3:00 PM`,action:`Inventory aging report`,context:`Internal -- 12 units over 90 days`,channel:`Dashboard`,status:`Complete`,detail:`Weekly aging report: 12 units over 90 days, estimated carrying cost $6,000/month. Price reduction recommendations for top 5.`}],Y_={Delivered:{bg:`#dcfce7`,color:`#16a34a`},Opened:{bg:`#dbeafe`,color:`#2563eb`},Queued:{bg:`#fef3c7`,color:`#d97706`},Complete:{bg:`#f1f5f9`,color:`#475569`},Flagged:{bg:`#fee2e2`,color:`#dc2626`}};function X_(){let e=localStorage.getItem(`VERTICAL`)||`auto`,t=e===`consumer`,n=e===`auto`,[r,i]=(0,_.useState)(null);function a(e){window.dispatchEvent(new CustomEvent(`ta:chatPrompt`,{detail:{message:e}}))}return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:t?`Your Personal AI Apps`:`AI Activity`}),(0,$.jsx)(`p`,{className:`subtle`,children:t?`Each AI here is a specialist that manages a different part of your Vault`:`AI communications, automated workflows, and conversation activity`})]}),!t&&(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>a(`Show me a summary of all AI activity this week`),style:{background:`linear-gradient(135deg, #7c3aed, #6d28d9)`,color:`white`,border:`none`},children:`AI Activity Report`})]}),t?(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(auto-fill, minmax(300px, 1fr))`,gap:`12px`,marginBottom:`16px`},children:(0,$.jsxs)(`div`,{className:`card`,style:{overflow:`hidden`},children:[(0,$.jsx)(`div`,{style:{height:`80px`,background:`linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%)`,display:`flex`,alignItems:`center`,justifyContent:`center`},children:(0,$.jsx)(`svg`,{width:`36`,height:`36`,viewBox:`0 0 24 24`,fill:`none`,stroke:`#7c3aed`,strokeWidth:`1.5`,strokeLinecap:`round`,strokeLinejoin:`round`,children:(0,$.jsx)(`path`,{d:`M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z`})})}),(0,$.jsxs)(`div`,{style:{padding:`14px 16px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`,marginBottom:`6px`},children:[(0,$.jsx)(`span`,{style:{fontWeight:700,fontSize:`15px`,color:`#1e293b`},children:`AI Assistant`}),(0,$.jsx)(`span`,{style:{fontSize:`10px`,fontWeight:600,padding:`2px 8px`,borderRadius:`20px`,background:`#f0fdf4`,color:`#16a34a`},children:`Active`})]}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`,lineHeight:1.6,marginBottom:`12px`},children:`Your personal assistant that manages vehicles, properties, documents, certifications, and your entire Vault.`}),(0,$.jsx)(`button`,{onClick:()=>{let e=document.querySelector(`textarea[placeholder="Ask me anything..."]`);e&&e.focus()},style:{padding:`8px 16px`,fontSize:`13px`,fontWeight:600,background:`linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%)`,color:`white`,border:`none`,borderRadius:`8px`,cursor:`pointer`},children:`Open Chat`})]})]})}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#94a3b8`,textAlign:`center`,lineHeight:`1.6`},children:`More specialist AIs coming soon. Your conversation history will appear here as you use each tool.`})]}):n?(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`kpiRow`,style:{marginBottom:`12px`},children:G_.map((e,t)=>(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:e.label}),(0,$.jsx)(`div`,{className:`kpiValue`,children:e.value})]},t))}),(0,$.jsx)(`div`,{className:`kpiRow`,style:{marginBottom:`20px`},children:K_.map((e,t)=>(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:e.label}),(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,$.jsx)(`div`,{className:`kpiValue`,children:e.value}),e.badge&&(0,$.jsx)(`span`,{style:{fontSize:`10px`,fontWeight:600,padding:`2px 6px`,borderRadius:`4px`,background:`#f1f5f9`,color:`#94a3b8`},children:e.badge})]})]},t))}),(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr 1fr`,gap:`14px`,marginBottom:`20px`},children:q_.map((e,t)=>(0,$.jsxs)(`div`,{className:`card`,style:{padding:`20px`,borderLeft:`4px solid ${e.accent}`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`15px`,color:`#1e293b`,marginBottom:`10px`},children:e.title}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#475569`,marginBottom:`8px`},children:e.summary}),(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`4px`,marginBottom:`12px`},children:e.details.map((e,t)=>(0,$.jsxs)(`div`,{style:{fontSize:`13px`,color:`#64748b`,paddingLeft:`12px`,position:`relative`},children:[(0,$.jsx)(`span`,{style:{position:`absolute`,left:0},children:`-`}),` `,e]},t))}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,fontWeight:600,color:e.accent,lineHeight:1.4},children:e.highlight})]},t))}),(0,$.jsxs)(`div`,{className:`card`,children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsx)(`div`,{className:`cardTitle`,children:`AI Action Log`})}),(0,$.jsx)(`div`,{className:`tableWrap`,children:(0,$.jsxs)(`table`,{className:`table`,style:{width:`100%`},children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{children:`Time`}),(0,$.jsx)(`th`,{children:`Action`}),(0,$.jsx)(`th`,{children:`Customer / Context`}),(0,$.jsx)(`th`,{children:`Channel`}),(0,$.jsx)(`th`,{children:`Status`})]})}),(0,$.jsx)(`tbody`,{children:J_.map((e,t)=>{let n=Y_[e.status]||Y_.Complete;return(0,$.jsxs)(_.Fragment,{children:[(0,$.jsxs)(`tr`,{style:{cursor:`pointer`},onClick:()=>i(r===t?null:t),children:[(0,$.jsx)(`td`,{style:{whiteSpace:`nowrap`,fontSize:`12px`,color:`#64748b`},children:e.time}),(0,$.jsx)(`td`,{className:`tdStrong`,children:e.action}),(0,$.jsx)(`td`,{style:{fontSize:`13px`},children:e.context}),(0,$.jsx)(`td`,{style:{fontSize:`12px`,color:`#64748b`},children:e.channel}),(0,$.jsx)(`td`,{children:(0,$.jsx)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:n.bg,color:n.color},children:e.status})})]}),r===t&&(0,$.jsx)(`tr`,{children:(0,$.jsx)(`td`,{colSpan:5,style:{padding:`12px 16px`,background:`#f8fafc`,fontSize:`13px`,color:`#475569`,lineHeight:1.6,borderBottom:`2px solid #e2e8f0`},children:e.detail})})]},t)})})]})})]})]}):(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{className:`empty`,children:(0,$.jsx)(`p`,{children:`No AI conversations yet. AI activity will appear here as you use the platform.`})})})]})}var Z_=[{id:`ac-001`,name:`Maria Gonzalez`,vehicle:`2024 Corolla LE`,purchaseDate:`2024-03-15`,purchaseType:`Leased`,lastService:`2025-12-10`,visits:4,satisfaction:`Excellent`,cosInsight:`Lease expiring`,insightColor:`#dc2626`,assignedTo:{type:`ai`,name:`Alex (AI)`}},{id:`ac-002`,name:`Charles Cox`,vehicle:`2023 Tacoma TRD Sport`,purchaseDate:`2023-06-20`,purchaseType:`Financed`,lastService:`2026-01-18`,visits:9,satisfaction:`Excellent`,cosInsight:`Warranty expiring`,insightColor:`#d97706`,assignedTo:{type:`human`,name:`Jake Rivera`}},{id:`ac-003`,name:`Mark Brown`,vehicle:`2025 Corolla Cross LE`,purchaseDate:`2025-01-10`,purchaseType:`Financed`,lastService:`2026-02-05`,visits:7,satisfaction:`Excellent`,cosInsight:`Upgrade candidate`,insightColor:`#16a34a`,assignedTo:{type:`human`,name:`Lisa Chen`}},{id:`ac-004`,name:`Lawrence Foster`,vehicle:`2024 Camry SE`,purchaseDate:`2024-07-22`,purchaseType:`Financed`,lastService:`2026-02-10`,visits:3,satisfaction:`Excellent`,cosInsight:``,insightColor:``,assignedTo:{type:`human`,name:`Jake Rivera`}},{id:`ac-005`,name:`Patricia Adams`,vehicle:`2023 RAV4 XLE`,purchaseDate:`2023-09-05`,purchaseType:`Financed`,lastService:`2026-01-25`,visits:5,satisfaction:`Good`,cosInsight:``,insightColor:``,assignedTo:{type:`human`,name:`Lisa Chen`}},{id:`ac-006`,name:`James Mitchell`,vehicle:`2022 Highlander Limited`,purchaseDate:`2022-11-14`,purchaseType:`Financed`,lastService:`2025-11-30`,visits:8,satisfaction:`Good`,cosInsight:`Service overdue`,insightColor:`#d97706`,assignedTo:{type:`ai`,name:`Alex (AI)`}},{id:`ac-007`,name:`Robert Chen`,vehicle:`2025 Corolla Cross LE`,purchaseDate:`2025-02-01`,purchaseType:`Cash`,lastService:`2026-02-01`,visits:1,satisfaction:`Excellent`,cosInsight:``,insightColor:``,assignedTo:{type:`human`,name:`Jake Rivera`}},{id:`ac-008`,name:`Angela Williams`,vehicle:`2021 Prius Prime`,purchaseDate:`2021-08-18`,purchaseType:`Financed`,lastService:`2025-09-15`,visits:6,satisfaction:`Good`,cosInsight:`Service overdue`,insightColor:`#d97706`,assignedTo:{type:`ai`,name:`Alex (AI)`}},{id:`ac-009`,name:`Thomas Garcia`,vehicle:`2024 Tundra SR5`,purchaseDate:`2024-04-10`,purchaseType:`Financed`,lastService:`2026-01-20`,visits:3,satisfaction:`Excellent`,cosInsight:``,insightColor:``,assignedTo:{type:`human`,name:`Lisa Chen`}},{id:`ac-010`,name:`Diana Brooks`,vehicle:`2022 Venza Limited`,purchaseDate:`2022-12-22`,purchaseType:`Financed`,lastService:`2026-02-08`,visits:7,satisfaction:`Excellent`,cosInsight:`Upgrade candidate`,insightColor:`#16a34a`,assignedTo:{type:`ai`,name:`Alex (AI)`}},{id:`ac-011`,name:`Kevin O'Brien`,vehicle:`2024 4Runner TRD Off-Road`,purchaseDate:`2024-06-15`,purchaseType:`Financed`,lastService:`2026-01-30`,visits:4,satisfaction:`Excellent`,cosInsight:``,insightColor:``,assignedTo:{type:`human`,name:`Jake Rivera`}},{id:`ac-012`,name:`Sandra Lee`,vehicle:`2023 Camry XSE`,purchaseDate:`2023-03-28`,purchaseType:`Leased`,lastService:`2025-12-20`,visits:5,satisfaction:`Good`,cosInsight:`Lease expiring`,insightColor:`#dc2626`,assignedTo:{type:`ai`,name:`Alex (AI)`}},{id:`ac-013`,name:`Michael Wong`,vehicle:`2025 RAV4 Hybrid XLE`,purchaseDate:`2025-01-22`,purchaseType:`Financed`,lastService:`2026-02-12`,visits:2,satisfaction:`Excellent`,cosInsight:``,insightColor:``,assignedTo:{type:`human`,name:`Jake Rivera`}},{id:`ac-014`,name:`Lisa Johnson`,vehicle:`2022 Corolla LE`,purchaseDate:`2022-05-10`,purchaseType:`Financed`,lastService:`2025-08-14`,visits:4,satisfaction:`Satisfactory`,cosInsight:`At risk`,insightColor:`#dc2626`,assignedTo:{type:`ai`,name:`Alex (AI)`}},{id:`ac-015`,name:`Richard Brown`,vehicle:`2023 Tundra Limited`,purchaseDate:`2023-10-02`,purchaseType:`Cash`,lastService:`2026-01-15`,visits:6,satisfaction:`Excellent`,cosInsight:``,insightColor:``,assignedTo:{type:`human`,name:`Lisa Chen`}},{id:`ac-016`,name:`Jennifer Patel`,vehicle:`2024 Crown Platinum`,purchaseDate:`2024-08-20`,purchaseType:`Financed`,lastService:`2026-02-06`,visits:3,satisfaction:`Excellent`,cosInsight:``,insightColor:``,assignedTo:{type:`human`,name:`Jake Rivera`}},{id:`ac-017`,name:`William Davis`,vehicle:`2025 GR86 Premium`,purchaseDate:`2025-02-08`,purchaseType:`Cash`,lastService:null,visits:0,satisfaction:`New`,cosInsight:``,insightColor:``,assignedTo:{type:`human`,name:`Jake Rivera`}},{id:`ac-018`,name:`Carol Thompson`,vehicle:`2022 Highlander XLE`,purchaseDate:`2022-07-30`,purchaseType:`Financed`,lastService:`2025-10-22`,visits:5,satisfaction:`Good`,cosInsight:`Service overdue`,insightColor:`#d97706`,assignedTo:{type:`ai`,name:`Alex (AI)`}},{id:`ac-019`,name:`George Martinez`,vehicle:`2021 Tacoma SR`,purchaseDate:`2021-09-15`,purchaseType:`Financed`,lastService:`2025-11-05`,visits:8,satisfaction:`Good`,cosInsight:`Upgrade candidate`,insightColor:`#16a34a`,assignedTo:{type:`human`,name:`Lisa Chen`}},{id:`ac-020`,name:`Nancy Wilson`,vehicle:`2024 Venza XLE`,purchaseDate:`2024-02-14`,purchaseType:`Financed`,lastService:`2026-02-01`,visits:4,satisfaction:`Excellent`,cosInsight:``,insightColor:``,assignedTo:{type:`human`,name:`Lisa Chen`}}];function Q_(){let[e,t]=(0,_.useState)(``),[n,r]=(0,_.useState)(`all`);function i(e){window.dispatchEvent(new CustomEvent(`ta:chatPrompt`,{detail:{message:e}}))}let a=Z_.filter(t=>{if(e){let n=e.toLowerCase();if(!t.name.toLowerCase().includes(n)&&!t.vehicle.toLowerCase().includes(n))return!1}return!(n===`actionable`&&!t.cosInsight)}),o=Z_.filter(e=>e.cosInsight).length;return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Customers`}),(0,$.jsxs)(`p`,{className:`subtle`,children:[Z_.length,` customers -- `,o,` with AI insights`]})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>i(`Give me a customer outreach priority list. Who should I contact first and why?`),style:{background:`linear-gradient(135deg, #7c3aed, #6d28d9)`,color:`white`,border:`none`},children:`AI Outreach Plan`})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`12px`,marginBottom:`16px`},children:[(0,$.jsx)(`input`,{type:`text`,placeholder:`Search customers or vehicles...`,value:e,onChange:e=>t(e.target.value),style:{flex:1,maxWidth:`400px`,padding:`10px 16px`,borderRadius:`12px`,border:`1px solid var(--line)`,fontSize:`14px`}}),(0,$.jsxs)(`select`,{value:n,onChange:e=>r(e.target.value),style:{padding:`10px 16px`,borderRadius:`12px`,border:`1px solid var(--line)`,fontSize:`14px`},children:[(0,$.jsx)(`option`,{value:`all`,children:`All Customers`}),(0,$.jsx)(`option`,{value:`actionable`,children:`AI Insights Only`})]})]}),(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{className:`tableWrap`,children:(0,$.jsxs)(`table`,{className:`table`,style:{width:`100%`},children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{children:`Name`}),(0,$.jsx)(`th`,{children:`Vehicle`}),(0,$.jsx)(`th`,{children:`Purchase Date`}),(0,$.jsx)(`th`,{children:`Last Service`}),(0,$.jsx)(`th`,{children:`Visits`}),(0,$.jsx)(`th`,{children:`Satisfaction`}),(0,$.jsx)(`th`,{children:`Assigned To`}),(0,$.jsx)(`th`,{children:`AI Insight`})]})}),(0,$.jsx)(`tbody`,{children:a.map(e=>{let t=e.satisfaction===`Excellent`?`#16a34a`:e.satisfaction===`Good`?`#2563eb`:e.satisfaction===`Satisfactory`?`#d97706`:`#64748b`;return(0,$.jsxs)(`tr`,{style:{cursor:`pointer`},onClick:()=>i(`Tell me about ${e.name} and what we should do. They drive a ${e.vehicle}, purchased ${e.purchaseDate}, ${e.visits} service visits, satisfaction: ${e.satisfaction}.${e.cosInsight?` AI insight: `+e.cosInsight+`.`:``}`),children:[(0,$.jsx)(`td`,{className:`tdStrong`,children:e.name}),(0,$.jsx)(`td`,{children:e.vehicle}),(0,$.jsx)(`td`,{className:`tdMuted`,children:new Date(e.purchaseDate).toLocaleDateString(`en-US`,{month:`short`,year:`numeric`})}),(0,$.jsx)(`td`,{className:`tdMuted`,children:e.lastService?new Date(e.lastService).toLocaleDateString(`en-US`,{month:`short`,day:`numeric`}):`--`}),(0,$.jsx)(`td`,{style:{textAlign:`center`},children:e.visits}),(0,$.jsx)(`td`,{children:(0,$.jsx)(`span`,{style:{fontSize:`12px`,fontWeight:600,color:t},children:e.satisfaction})}),(0,$.jsx)(`td`,{children:(0,$.jsx)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:e.assignedTo?.type===`ai`?`#f3e8ff`:`#f1f5f9`,color:e.assignedTo?.type===`ai`?`#7c3aed`:`#475569`},children:e.assignedTo?.name||`--`})}),(0,$.jsx)(`td`,{children:e.cosInsight?(0,$.jsx)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`2px 10px`,borderRadius:`9999px`,background:`${e.insightColor}15`,color:e.insightColor},children:e.cosInsight}):(0,$.jsx)(`span`,{style:{color:`#cbd5e1`},children:`--`})})]},e.id)})})]})})})]})}function $_(){if((localStorage.getItem(`VERTICAL`)||`auto`)===`auto`)return(0,$.jsx)(Q_,{});let[e,t]=(0,_.useState)([]),[n,r]=(0,_.useState)(!1),[i,a]=(0,_.useState)(``),[o,s]=(0,_.useState)(``),[c,l]=(0,_.useState)(!1),[u,d]=(0,_.useState)(null),[f,p]=(0,_.useState)(null),[m,h]=(0,_.useState)({firstName:``,lastName:``,email:``,phone:``,tags:[]}),g=`auto`;(0,_.useEffect)(()=>{v()},[]);async function v(){r(!0),a(``);try{t((await e_({vertical:g,jurisdiction:`il`})).customers||[])}catch(e){a(e?.message||String(e)),t([])}finally{r(!1)}}async function y(e){e.preventDefault(),a(``);try{u?await n_({vertical:g,jurisdiction:`il`,id:u.id,customer:m}):await t_({vertical:g,jurisdiction:`il`,customer:m}),await v(),l(!1),d(null),h({firstName:``,lastName:``,email:``,phone:``,tags:[]})}catch(e){a(e?.message||String(e))}}function b(e){d(e),h({firstName:e.firstName,lastName:e.lastName,email:e.email,phone:e.phone,tags:e.tags||[]}),l(!0)}async function x(e){if(confirm(`Are you sure you want to delete this customer?`)){a(``);try{await r_({vertical:g,jurisdiction:`il`,id:e}),f?.id===e&&p(null),await v()}catch(e){a(e?.message||String(e))}}}let S=e.filter(e=>{if(!o)return!0;let t=o.toLowerCase();return e.firstName.toLowerCase().includes(t)||e.lastName.toLowerCase().includes(t)||e.email.toLowerCase().includes(t)||e.phone.includes(t)});return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Customers`}),(0,$.jsx)(`p`,{className:`subtle`,children:`CRM and customer relationship management`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>{d(null),h({firstName:``,lastName:``,email:``,phone:``,tags:[]}),l(!0)},style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`},children:`+ Add Customer`})]}),(0,$.jsx)(`div`,{style:{marginBottom:`16px`},children:(0,$.jsx)(`input`,{type:`text`,placeholder:`Search customers by name, email, or phone...`,value:o,onChange:e=>s(e.target.value),style:{width:`100%`,maxWidth:`500px`,padding:`12px 16px`,borderRadius:`12px`,border:`1px solid var(--line)`,fontSize:`14px`}})}),i&&(0,$.jsx)(`div`,{className:`card`,style:{borderColor:`var(--danger)`},children:(0,$.jsx)(`div`,{className:`empty`,style:{color:`var(--danger)`},children:i})}),n&&(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{className:`empty`,children:`Loading customers...`})}),!n&&S.length===0&&(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{className:`empty`,children:(0,$.jsx)(`p`,{children:o?`No customers found.`:`No customers yet.`})})}),!n&&S.length>0&&(0,$.jsxs)(`div`,{className:`contentGrid`,children:[(0,$.jsxs)(`div`,{className:`card`,children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`Customer List`}),(0,$.jsxs)(`div`,{className:`cardSub`,children:[S.length,` customers`]})]})}),(0,$.jsx)(`div`,{className:`tableWrap`,children:(0,$.jsxs)(`table`,{className:`table`,children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{children:`Name`}),(0,$.jsx)(`th`,{children:`Contact`}),(0,$.jsx)(`th`,{children:`Tags`}),(0,$.jsx)(`th`,{children:`Deals`}),(0,$.jsx)(`th`,{children:`Actions`})]})}),(0,$.jsx)(`tbody`,{children:S.map(e=>(0,$.jsxs)(`tr`,{className:f?.id===e.id?`rowSelected`:``,onClick:()=>p(e),children:[(0,$.jsxs)(`td`,{className:`tdStrong`,children:[e.firstName,` `,e.lastName]}),(0,$.jsxs)(`td`,{className:`tdMuted`,children:[(0,$.jsx)(`div`,{children:e.email}),(0,$.jsx)(`div`,{style:{fontSize:`12px`},children:e.phone})]}),(0,$.jsx)(`td`,{children:e.tags&&e.tags.length>0?(0,$.jsx)(`div`,{style:{display:`flex`,gap:`4px`,flexWrap:`wrap`},children:e.tags.map((e,t)=>(0,$.jsx)(`span`,{className:`badge badge-created`,style:{fontSize:`10px`,padding:`3px 6px`},children:e},t))}):(0,$.jsx)(`span`,{className:`tdMuted`,children:`-`})}),(0,$.jsx)(`td`,{children:e.deals?.length||0}),(0,$.jsx)(`td`,{children:(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`6px`},children:[(0,$.jsx)(`button`,{className:`iconBtn`,onClick:t=>{t.stopPropagation(),b(e)},style:{padding:`6px 10px`,fontSize:`12px`},children:`Edit`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:t=>{t.stopPropagation(),x(e.id)},style:{padding:`6px 10px`,fontSize:`12px`,borderColor:`var(--danger)`,color:`var(--danger)`},children:`Delete`})]})})]},e.id))})]})})]}),f&&(0,$.jsxs)(`div`,{className:`card`,children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`Customer Details`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>p(null),"aria-label":`Close`,children:``})]}),(0,$.jsxs)(`div`,{className:`detail`,children:[(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Name`}),(0,$.jsxs)(`div`,{className:`v`,children:[f.firstName,` `,f.lastName]})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Email`}),(0,$.jsx)(`div`,{className:`v`,children:f.email})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Phone`}),(0,$.jsx)(`div`,{className:`v`,children:f.phone})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Customer Since`}),(0,$.jsx)(`div`,{className:`v`,children:new Date(f.createdAt).toLocaleDateString()})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Last Contact`}),(0,$.jsx)(`div`,{className:`v`,children:new Date(f.lastContact).toLocaleDateString()})]}),f.tags&&f.tags.length>0&&(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Tags`}),(0,$.jsx)(`div`,{className:`v`,children:f.tags.map((e,t)=>(0,$.jsx)(`span`,{className:`badge badge-created`,style:{marginRight:`4px`},children:e},t))})]}),f.notes&&(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{className:`sectionTitle`,style:{fontSize:`14px`},children:`Notes`}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,marginTop:`8px`,lineHeight:`1.6`},children:f.notes})]}),f.deals&&f.deals.length>0&&(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{className:`sectionTitle`,style:{fontSize:`14px`},children:`Deals`}),f.deals.map(e=>(0,$.jsxs)(`div`,{style:{padding:`10px`,marginTop:`8px`,borderRadius:`10px`,background:`#f8fafc`,border:`1px solid var(--line)`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,marginBottom:`4px`},children:e.item}),(0,$.jsxs)(`div`,{style:{fontSize:`13px`,color:`var(--muted)`},children:[(0,$.jsx)(`span`,{className:`badge badge-${e.status===`sold`?`completed`:e.status===`negotiating`?`processing`:`created`}`,style:{fontSize:`11px`,padding:`3px 8px`,marginRight:`8px`},children:e.status}),`$`,e.value.toLocaleString()]})]},e.id))]})]})]})]}),(0,$.jsx)(R_,{isOpen:c,onClose:()=>{l(!1),d(null),h({firstName:``,lastName:``,email:``,phone:``,tags:[]})},title:u?`Edit Customer`:`Add New Customer`,onSubmit:y,submitLabel:u?`Update`:`Add Customer`,children:(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:[(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`10px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`First Name *`}),(0,$.jsx)(`input`,{type:`text`,placeholder:`John`,value:m.firstName,onChange:e=>h({...m,firstName:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Last Name *`}),(0,$.jsx)(`input`,{type:`text`,placeholder:`Smith`,value:m.lastName,onChange:e=>h({...m,lastName:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Email *`}),(0,$.jsx)(`input`,{type:`email`,placeholder:`john.smith@example.com`,value:m.email,onChange:e=>h({...m,email:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Phone`}),(0,$.jsx)(`input`,{type:`tel`,placeholder:`+1-555-0100`,value:m.phone,onChange:e=>h({...m,phone:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`}})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Tags (comma-separated)`}),(0,$.jsx)(`input`,{type:`text`,placeholder:`hot-lead, repeat-customer`,value:m.tags?.join(`, `)||``,onChange:e=>h({...m,tags:e.target.value.split(`,`).map(e=>e.trim()).filter(Boolean)}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`}})]})]})})]})}function ev(){let[e,t]=(0,_.useState)([]),[n,r]=(0,_.useState)([]),[i,a]=(0,_.useState)(!1),[o,s]=(0,_.useState)(``),[c,l]=(0,_.useState)(!1),[u,d]=(0,_.useState)(null),[f,p]=(0,_.useState)({customerId:``,customerName:``,datetime:``,type:`service`,duration:60,notes:``}),m=`auto`;(0,_.useEffect)(()=>{h()},[]);async function h(){a(!0),s(``);try{let[e,n]=await Promise.all([i_({vertical:m,jurisdiction:`il`}),e_({vertical:m,jurisdiction:`il`})]);t(e.appointments||[]),r(n.customers||[])}catch(e){s(e?.message||String(e)),t([]),r([])}finally{a(!1)}}async function g(e){e.preventDefault(),s(``);let t=n.find(e=>e.id===f.customerId);try{u?await o_({vertical:m,jurisdiction:`il`,id:u.id,appointment:{...f,customerName:t?.firstName+` `+t?.lastName||f.customerName}}):await a_({vertical:m,jurisdiction:`il`,appointment:{...f,customerName:t?.firstName+` `+t?.lastName||f.customerName}}),await h(),l(!1),d(null),p({customerId:``,customerName:``,datetime:``,type:`service`,duration:60,notes:``})}catch(e){s(e?.message||String(e))}}function v(e){d(e),p({customerId:e.customerId,customerName:e.customerName,datetime:e.datetime,type:e.type,duration:e.duration,notes:e.notes||``}),l(!0)}async function y(e){if(confirm(`Are you sure you want to delete this appointment?`)){s(``);try{await s_({vertical:m,jurisdiction:`il`,id:e}),await h()}catch(e){s(e?.message||String(e))}}}async function b(e,t){s(``);try{await o_({vertical:m,jurisdiction:`il`,id:e,appointment:{status:t}}),await h()}catch(e){s(e?.message||String(e))}}let x=e.reduce((e,t)=>{let n=new Date(t.datetime).toDateString();return e[n]||(e[n]=[]),e[n].push(t),e},{}),S=Object.keys(x).sort((e,t)=>new Date(e)-new Date(t)),C={total:e.length,scheduled:e.filter(e=>e.status===`scheduled`).length,completed:e.filter(e=>e.status===`completed`).length,cancelled:e.filter(e=>e.status===`cancelled`).length};return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Appointments`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Schedule and calendar management`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>{d(null),p({customerId:``,customerName:``,datetime:``,type:`service`,duration:60,notes:``}),l(!0)},style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`},children:`+ New Appointment`})]}),(0,$.jsxs)(`div`,{className:`kpiRow`,children:[(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Total`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:C.total})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Scheduled`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:C.scheduled})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Completed`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:C.completed})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Cancelled`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:C.cancelled})]})]}),o&&(0,$.jsx)(`div`,{className:`card`,style:{borderColor:`var(--danger)`},children:(0,$.jsx)(`div`,{className:`empty`,style:{color:`var(--danger)`},children:o})}),i&&(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{className:`empty`,children:`Loading appointments...`})}),!i&&e.length===0&&(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{className:`empty`,children:(0,$.jsx)(`p`,{children:`No appointments scheduled.`})})}),!i&&e.length>0&&(0,$.jsx)(`div`,{children:S.map(e=>{let t=new Date(e),n=t.toDateString()===new Date().toDateString(),r=t<new Date&&!n;return(0,$.jsxs)(`div`,{style:{marginBottom:`24px`},children:[(0,$.jsxs)(`div`,{style:{fontSize:`18px`,fontWeight:900,marginBottom:`12px`,display:`flex`,alignItems:`center`,gap:`10px`},children:[t.toLocaleDateString(`en-US`,{weekday:`long`,month:`long`,day:`numeric`,year:`numeric`}),n&&(0,$.jsx)(`span`,{className:`badge badge-processing`,style:{fontSize:`11px`,padding:`4px 8px`},children:`Today`}),r&&(0,$.jsx)(`span`,{className:`badge`,style:{fontSize:`11px`,padding:`4px 8px`},children:`Past`})]}),(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`10px`},children:x[e].sort((e,t)=>new Date(e.datetime)-new Date(t.datetime)).map(e=>(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{style:{padding:`14px 16px`},children:(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`flex-start`,gap:`14px`},children:[(0,$.jsxs)(`div`,{style:{flex:1},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`10px`,marginBottom:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`16px`,fontWeight:900,color:`var(--accent)`},children:new Date(e.datetime).toLocaleTimeString(`en-US`,{hour:`2-digit`,minute:`2-digit`})}),(0,$.jsx)(`span`,{className:`badge badge-${e.status===`scheduled`?`processing`:e.status===`completed`?`completed`:`failed`}`,style:{fontSize:`11px`,padding:`4px 8px`},children:e.status}),(0,$.jsxs)(`span`,{className:`badge`,style:{fontSize:`11px`,padding:`4px 8px`},children:[e.duration,` min`]})]}),(0,$.jsx)(`div`,{style:{fontWeight:800,marginBottom:`4px`},children:e.customerName}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`var(--muted)`},children:e.type}),e.notes&&(0,$.jsx)(`div`,{style:{marginTop:`8px`,fontSize:`13px`,color:`var(--muted)`},children:e.notes})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`6px`},children:[e.status===`scheduled`&&(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>b(e.id,`completed`),style:{padding:`6px 10px`,fontSize:`12px`,background:`var(--accent2)`,color:`white`,borderColor:`var(--accent2)`},children:`Complete`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>b(e.id,`cancelled`),style:{padding:`6px 10px`,fontSize:`12px`,borderColor:`var(--danger)`,color:`var(--danger)`},children:`Cancel`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>v(e),style:{padding:`6px 10px`,fontSize:`12px`},children:`Edit`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>y(e.id),style:{padding:`6px 10px`,fontSize:`12px`,borderColor:`var(--danger)`,color:`var(--danger)`},children:`Delete`})]})]})})},e.id))})]},e)})}),(0,$.jsx)(R_,{isOpen:c,onClose:()=>{l(!1),d(null),p({customerId:``,customerName:``,datetime:``,type:`service`,duration:60,notes:``})},title:u?`Edit Appointment`:`Schedule New Appointment`,onSubmit:g,submitLabel:u?`Update`:`Schedule`,children:(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Customer *`}),(0,$.jsxs)(`select`,{value:f.customerId,onChange:e=>p({...f,customerId:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0,children:[(0,$.jsx)(`option`,{value:``,children:`Select customer...`}),n.map(e=>(0,$.jsx)(`option`,{value:e.id,children:e.name},e.id))]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Date & Time *`}),(0,$.jsx)(`input`,{type:`datetime-local`,value:f.datetime,onChange:e=>p({...f,datetime:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`10px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Type *`}),(0,$.jsxs)(`select`,{value:f.type,onChange:e=>p({...f,type:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0,children:[(0,$.jsx)(`option`,{value:`service`,children:`Service`}),(0,$.jsx)(`option`,{value:`test-drive`,children:`Test Drive`}),(0,$.jsx)(`option`,{value:`financing`,children:`Financing`}),(0,$.jsx)(`option`,{value:`consultation`,children:`Consultation`})]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Duration (min) *`}),(0,$.jsx)(`input`,{type:`number`,step:`15`,value:f.duration,onChange:e=>p({...f,duration:parseInt(e.target.value)||60}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Notes`}),(0,$.jsx)(`textarea`,{placeholder:`Appointment notes...`,value:f.notes,onChange:e=>p({...f,notes:e.target.value}),rows:3,style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`,fontFamily:`inherit`,resize:`vertical`}})]})]})})]})}function tv(){let[e,t]=(0,_.useState)([]),[n,r]=(0,_.useState)(!1),[i,a]=(0,_.useState)(``),[o,s]=(0,_.useState)(``),[c,l]=(0,_.useState)(!1),[u,d]=(0,_.useState)(null),[f,p]=(0,_.useState)(null),[m,h]=(0,_.useState)({name:``,email:``,role:`sales`,permissions:[]});(0,_.useEffect)(()=>{g()},[]);async function g(){r(!0);try{t([])}finally{r(!1)}}function v(n){n.preventDefault(),t(u?e.map(e=>e.id===u.id?{...e,...m}:e):[{id:`staff-${Date.now()}`,...m,status:`active`,createdAt:new Date().toISOString(),lastLogin:null},...e]),l(!1),d(null),h({name:``,email:``,role:`sales`,permissions:[]})}function y(e){d(e),h({name:e.name,email:e.email,role:e.role,permissions:e.permissions}),l(!0)}function b(n){confirm(`Are you sure you want to remove this staff member?`)&&(t(e.filter(e=>e.id!==n)),f?.id===n&&p(null))}function x(n){t(e.map(e=>e.id===n?{...e,status:e.status===`active`?`inactive`:`active`}:e))}let S=e.filter(e=>{if(!o)return!0;let t=o.toLowerCase();return e.name.toLowerCase().includes(t)||e.email.toLowerCase().includes(t)||e.role.toLowerCase().includes(t)}),C=[{value:`manager`,label:`Manager`},{value:`sales`,label:`Sales Representative`},{value:`service`,label:`Service Technician`},{value:`admin`,label:`Administrator`}],w=[{value:`customers.read`,label:`View Customers`},{value:`customers.write`,label:`Edit Customers`},{value:`inventory.read`,label:`View Inventory`},{value:`inventory.write`,label:`Edit Inventory`},{value:`appointments.read`,label:`View Appointments`},{value:`appointments.write`,label:`Edit Appointments`},{value:`reports.read`,label:`View Reports`},{value:`settings.write`,label:`Edit Settings`}];return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Staff`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Team member management and permissions`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>{d(null),h({name:``,email:``,role:`sales`,permissions:[]}),l(!0)},style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`},children:`+ Add Staff`})]}),(0,$.jsx)(`div`,{style:{marginBottom:`16px`},children:(0,$.jsx)(`input`,{type:`text`,placeholder:`Search staff by name, email, or role...`,value:o,onChange:e=>s(e.target.value),style:{width:`100%`,maxWidth:`500px`,padding:`12px 16px`,borderRadius:`12px`,border:`1px solid var(--line)`,fontSize:`14px`}})}),i&&(0,$.jsx)(`div`,{className:`card`,style:{borderColor:`var(--danger)`},children:(0,$.jsx)(`div`,{className:`empty`,style:{color:`var(--danger)`},children:i})}),n&&(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{className:`empty`,children:`Loading staff members...`})}),(0,$.jsx)(`div`,{className:`card`,style:{marginBottom:`16px`,padding:`16px 20px`},children:(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,justifyContent:`space-between`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`},children:[(0,$.jsx)(`div`,{style:{width:`40px`,height:`40px`,borderRadius:`50%`,background:`#7c3aed`,display:`flex`,alignItems:`center`,justifyContent:`center`,color:`white`,fontWeight:700,fontSize:`14px`},children:`AI`}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600,fontSize:`15px`},children:(()=>{try{return JSON.parse(localStorage.getItem(`COS_CONFIG`)||`{}`).name}catch{return null}})()||`Fred`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`},children:`AI Assistant  AI Team Member`})]})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`,alignItems:`center`},children:[(0,$.jsx)(`span`,{style:{padding:`2px 10px`,background:`#ede9fe`,color:`#7c3aed`,borderRadius:`20px`,fontSize:`12px`,fontWeight:600},children:`AI`}),(0,$.jsx)(`span`,{style:{padding:`2px 10px`,background:`#dcfce7`,color:`#16a34a`,borderRadius:`20px`,fontSize:`12px`,fontWeight:600},children:`Active`})]})]})}),!n&&S.length===0&&!o&&(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsxs)(`div`,{className:`empty`,style:{padding:`40px 20px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`16px`,fontWeight:600,marginBottom:`8px`},children:`No additional team members`}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`var(--textMuted)`,marginBottom:`16px`},children:`Add staff members to manage permissions and track team activity.`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>{d(null),h({name:``,email:``,role:`sales`,permissions:[]}),l(!0)},style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`},children:`+ Add Team Member`})]})}),!n&&S.length===0&&o&&(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{className:`empty`,children:(0,$.jsx)(`p`,{children:`No staff members match your search.`})})}),!n&&S.length>0&&(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`2fr 1fr`,gap:`16px`},children:[(0,$.jsxs)(`div`,{className:`card`,children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{className:`cardTitle`,children:[`Team Members (`,S.length,`)`]})}),(0,$.jsx)(`div`,{className:`tableWrap`,children:(0,$.jsxs)(`table`,{className:`table`,children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{children:`Name`}),(0,$.jsx)(`th`,{children:`Role`}),(0,$.jsx)(`th`,{children:`Status`}),(0,$.jsx)(`th`,{children:`Last Login`}),(0,$.jsx)(`th`,{children:`Actions`})]})}),(0,$.jsx)(`tbody`,{children:S.map(e=>(0,$.jsxs)(`tr`,{style:{cursor:`pointer`,backgroundColor:f?.id===e.id?`#f8fafc`:`transparent`},onClick:()=>p(e),children:[(0,$.jsxs)(`td`,{children:[(0,$.jsx)(`div`,{className:`tdStrong`,children:e.name}),(0,$.jsx)(`div`,{className:`tdMuted`,children:e.email})]}),(0,$.jsx)(`td`,{children:C.find(t=>t.value===e.role)?.label}),(0,$.jsx)(`td`,{children:e.status===`active`?(0,$.jsx)(`span`,{className:`badge badge-completed`,children:`Active`}):(0,$.jsx)(`span`,{className:`badge`,children:`Inactive`})}),(0,$.jsx)(`td`,{className:`tdMuted`,children:e.lastLogin?new Date(e.lastLogin).toLocaleString():`Never`}),(0,$.jsx)(`td`,{children:(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`6px`},children:[(0,$.jsx)(`button`,{className:`iconBtn`,onClick:t=>{t.stopPropagation(),y(e)},children:`Edit`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:t=>{t.stopPropagation(),x(e.id)},children:e.status===`active`?`Deactivate`:`Activate`})]})})]},e.id))})]})})]}),f&&(0,$.jsxs)(`div`,{className:`card`,children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:f.name}),(0,$.jsx)(`div`,{className:`cardSub`,children:f.email})]})}),(0,$.jsxs)(`div`,{className:`detail`,children:[(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Role`}),(0,$.jsx)(`div`,{className:`v`,children:C.find(e=>e.value===f.role)?.label})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Status`}),(0,$.jsx)(`div`,{className:`v`,children:f.status===`active`?(0,$.jsx)(`span`,{className:`badge badge-completed`,children:`Active`}):(0,$.jsx)(`span`,{className:`badge`,children:`Inactive`})})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Member Since`}),(0,$.jsx)(`div`,{className:`v`,children:new Date(f.createdAt).toLocaleDateString()})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Last Login`}),(0,$.jsx)(`div`,{className:`v`,children:f.lastLogin?new Date(f.lastLogin).toLocaleString():`Never`})]})]}),(0,$.jsxs)(`div`,{style:{padding:`16px`,borderTop:`1px solid var(--line)`},children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`12px`},children:`Permissions`}),(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`6px`},children:f.permissions.includes(`all`)?(0,$.jsx)(`span`,{className:`badge badge-completed`,children:`Full Access`}):f.permissions.length>0?f.permissions.map(e=>(0,$.jsx)(`span`,{className:`badge`,children:w.find(t=>t.value===e)?.label||e},e)):(0,$.jsx)(`span`,{className:`tdMuted`,children:`No permissions assigned`})})]}),(0,$.jsx)(`div`,{style:{padding:`16px`,borderTop:`1px solid var(--line)`},children:(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>b(f.id),style:{width:`100%`,color:`var(--danger)`},children:`Remove Staff Member`})})]})]}),(0,$.jsx)(R_,{isOpen:c,onClose:()=>{l(!1),d(null)},title:u?`Edit Staff Member`:`Add Staff Member`,onSubmit:v,submitLabel:u?`Save Changes`:`Add Staff Member`,children:(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Full Name *`}),(0,$.jsx)(`input`,{type:`text`,value:m.name,onChange:e=>h({...m,name:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Email *`}),(0,$.jsx)(`input`,{type:`email`,value:m.email,onChange:e=>h({...m,email:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Role *`}),(0,$.jsx)(`select`,{value:m.role,onChange:e=>h({...m,role:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0,children:C.map(e=>(0,$.jsx)(`option`,{value:e.value,children:e.label},e.value))})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Permissions`}),(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`8px`},children:w.map(e=>(0,$.jsxs)(`label`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,$.jsx)(`input`,{type:`checkbox`,checked:m.permissions.includes(e.value),onChange:t=>{t.target.checked?h({...m,permissions:[...m.permissions,e.value]}):h({...m,permissions:m.permissions.filter(t=>t!==e.value)})}}),(0,$.jsx)(`span`,{children:e.label})]},e.value))})]})]})})]})}var nv=[{week:`Week 1`,sales:287400,units:11},{week:`Week 2`,sales:318600,units:12},{week:`Week 3`,sales:265200,units:10},{week:`Week 4`,sales:376600,units:14}],rv=[{id:1,time:`2h ago`,text:`AI identified lease expiration upsell -- Maria Gonzalez, 2024 Corolla LE. Potential: $2,800`,color:`#7c3aed`},{id:2,time:`5h ago`,text:`Jake Rivera closed deal -- Robert Chen, 2025 Camry XSE, $32,800`,color:`#16a34a`},{id:3,time:`8h ago`,text:`AI sent service reminder -- Charles Cox, 60K Major Service`,color:`#7c3aed`},{id:4,time:`1d ago`,text:`Trade-in appraisal completed -- 2021 BMW X3 xDrive30i, $28,500`,color:`#d97706`},{id:5,time:`1d ago`,text:`AI drafted conquest offer -- Amanda Liu, 2025 RAV4 XLE`,color:`#7c3aed`},{id:6,time:`2d ago`,text:`Lisa Chen moved Mark Brown to Negotiation -- 2025 RAV4 XLE, $37,500`,color:`#2563eb`},{id:7,time:`2d ago`,text:`AI scheduled test drive -- Sandra Lee, 2025 Highlander XLE`,color:`#7c3aed`},{id:8,time:`3d ago`,text:`Service-to-sales flag -- Angela Williams, 2021 Prius Prime, hybrid battery aging`,color:`#dc2626`},{id:9,time:`4d ago`,text:`AI sent post-purchase follow-up -- 12 customers, 7-day check-in`,color:`#7c3aed`},{id:10,time:`5d ago`,text:`Inventory alert -- 2021 BMW X3 hit 143 days on lot, recommend price reduction`,color:`#dc2626`}],iv=[{source:`Walk-In`,sales:12,revenue:318600},{source:`Google Ads`,sales:10,revenue:265500},{source:`Meta (FB/IG)`,sales:8,revenue:212400},{source:`TrueCar`,sales:5,revenue:132700},{source:`AutoTrader`,sales:4,revenue:106200},{source:`Cars.com`,sales:3,revenue:79600},{source:`CarGurus`,sales:2,revenue:53100},{source:`Referral`,sales:2,revenue:53100},{source:`Direct Mail`,sales:1,revenue:26600}];function av(){let[e,t]=(0,_.useState)(`30days`),[n,r]=(0,_.useState)({deals:0,avgRisk:0,sessions:0,reports:0,recentDeals:[]}),[i,a]=(0,_.useState)(!0),o=localStorage.getItem(`VERTICAL`)||`auto`,s=localStorage.getItem(`JURISDICTION`)||`IL`,c=o===`auto`;(0,_.useEffect)(()=>{l()},[e]);async function l(){a(!0);try{if(o===`analyst`){let e=(await p_({vertical:o,jurisdiction:s})).deals||[],t=e.filter(e=>e.analysis?.riskScore),n=t.length>0?Math.round(t.reduce((e,t)=>e+t.analysis.riskScore,0)/t.length):0,i=((await c_({vertical:o,jurisdiction:s,limit:100})).activity||[]).length;r({deals:e.length,avgRisk:n,sessions:i,reports:e.length,recentDeals:e.slice(0,5)})}else{let e=((await c_({vertical:o,jurisdiction:s,limit:100})).activity||[]).length;r(t=>({...t,sessions:e}))}}catch(e){console.error(`Failed to load report data:`,e)}finally{a(!1)}}function u(e){return e>=70?`#ef4444`:e>=40?`#f59e0b`:`#10b981`}function d(){return o===`analyst`?[{label:`Deals Analyzed`,value:n.deals.toString()},{label:`Avg Risk Score`,value:n.avgRisk>0?`${n.avgRisk}/100`:`0`},{label:`AI Sessions`,value:n.sessions.toString()},{label:`Reports Generated`,value:n.reports.toString()}]:c?[{label:`Total Revenue`,value:`$1,247,800`},{label:`Total Sales`,value:`47`},{label:`Active Customers`,value:`152`},{label:`Avg Deal Size`,value:`$26,549`}]:[{label:`Total Revenue`,value:`--`},{label:`Total Sales`,value:`--`},{label:`Active Customers`,value:`--`},{label:`Avg Deal Size`,value:`--`}]}function f(){let t=[[`TitleApp AI -- Monthly Report`],[`Date Range`,e],[``],[`KPI`,`Value`],...d().map(e=>[e.label,e.value]),[``],[`Revenue Trend`],[`Week`,`Revenue`,`Units`],...nv.map(e=>[e.week,`$${e.sales.toLocaleString()}`,e.units]),[``],[`Sales by Source`],[`Source`,`Sales`,`Revenue`],...iv.map(e=>[e.source,e.sales,`$${e.revenue.toLocaleString()}`]),[``],[`Recent Activity`],[`Time`,`Event`],...rv.map(e=>[e.time,e.text])].map(e=>e.map(e=>`"${String(e).replace(/"/g,`""`)}"`).join(`,`)).join(`
`),n=new Blob([t],{type:`text/csv;charset=utf-8;`}),r=URL.createObjectURL(n),i=document.createElement(`a`);i.href=r,i.download=`titleapp-report-${new Date().toISOString().split(`T`)[0]}.csv`,i.click(),URL.revokeObjectURL(r)}function p(){let e=window.open(``,`_blank`),t=d();e.document.write(`<html><head><title>TitleApp AI Report</title><style>
      body{font-family:system-ui,sans-serif;padding:40px;color:#1e293b}
      h1{font-size:24px;margin-bottom:4px}
      h2{font-size:18px;margin-top:24px;margin-bottom:8px;color:#475569}
      .sub{color:#64748b;font-size:14px;margin-bottom:24px}
      table{border-collapse:collapse;width:100%;margin-bottom:16px}
      th,td{text-align:left;padding:8px 12px;border-bottom:1px solid #e2e8f0;font-size:13px}
      th{font-weight:700;background:#f8fafc}
      .kpis{display:flex;gap:16px;margin-bottom:24px}
      .kpi{flex:1;padding:16px;border:1px solid #e2e8f0;border-radius:8px;text-align:center}
      .kpi-label{font-size:12px;color:#64748b;text-transform:uppercase}
      .kpi-value{font-size:24px;font-weight:800;margin-top:4px}
      @media print{body{padding:20px}}
    </style></head><body>`),e.document.write(`<h1>TitleApp AI -- Monthly Report</h1><div class="sub">Generated ${new Date().toLocaleDateString()}</div>`),e.document.write(`<div class="kpis">${t.map(e=>`<div class="kpi"><div class="kpi-label">${e.label}</div><div class="kpi-value">${e.value}</div></div>`).join(``)}</div>`),e.document.write(`<h2>Revenue Trend</h2><table><tr><th>Week</th><th>Revenue</th><th>Units</th></tr>${nv.map(e=>`<tr><td>${e.week}</td><td>$${e.sales.toLocaleString()}</td><td>${e.units}</td></tr>`).join(``)}</table>`),e.document.write(`<h2>Sales by Source</h2><table><tr><th>Source</th><th>Sales</th><th>Revenue</th></tr>${iv.map(e=>`<tr><td>${e.source}</td><td>${e.sales}</td><td>$${e.revenue.toLocaleString()}</td></tr>`).join(``)}</table>`),e.document.write(`<h2>Recent Activity</h2><table><tr><th>Time</th><th>Event</th></tr>${rv.map(e=>`<tr><td>${e.time}</td><td>${e.text}</td></tr>`).join(``)}</table>`),e.document.write(`</body></html>`),e.document.close(),setTimeout(()=>e.print(),300)}function m(){let t=[[`TitleApp AI -- Monthly Report`],[`Date Range`,e],[``],[`KPI`,`Value`],...d().map(e=>[e.label,e.value]),[``],[`Revenue Trend`],[`Week`,`Revenue`,`Units`],...nv.map(e=>[e.week,e.sales,e.units]),[``],[`Sales by Source`],[`Source`,`Sales`,`Revenue`],...iv.map(e=>[e.source,e.sales,e.revenue]),[``],[`Recent Activity`],[`Time`,`Event`],...rv.map(e=>[e.time,e.text])].map(e=>e.map(e=>`"${String(e).replace(/"/g,`""`)}"`).join(`	`)).join(`
`),n=new Blob([t],{type:`application/vnd.ms-excel`}),r=URL.createObjectURL(n),i=document.createElement(`a`);i.href=r,i.download=`titleapp-report-${new Date().toISOString().split(`T`)[0]}.xlsx`,i.click(),URL.revokeObjectURL(r)}let h=d(),g=Math.max(...nv.map(e=>e.sales)),v=Math.max(...iv.map(e=>e.sales));return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Reports`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Business analytics and performance metrics`})]}),(0,$.jsxs)(`select`,{value:e,onChange:e=>t(e.target.value),style:{padding:`10px 16px`,borderRadius:`12px`,border:`1px solid var(--line)`},children:[(0,$.jsx)(`option`,{value:`7days`,children:`Last 7 Days`}),(0,$.jsx)(`option`,{value:`30days`,children:`Last 30 Days`}),(0,$.jsx)(`option`,{value:`90days`,children:`Last 90 Days`}),(0,$.jsx)(`option`,{value:`year`,children:`This Year`})]})]}),(0,$.jsx)(`div`,{className:`kpiRow`,children:h.map((e,t)=>(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:e.label}),(0,$.jsx)(`div`,{className:`kpiValue`,style:{color:e.value===`--`?`var(--textMuted)`:void 0},children:i?`...`:e.value})]},t))}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`2fr 1fr`,gap:`16px`},children:[(0,$.jsxs)(`div`,{className:`card`,children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsx)(`div`,{className:`cardTitle`,children:o===`analyst`?`Analysis Activity`:`Revenue Trend`})}),c?(0,$.jsx)(`div`,{style:{padding:`16px`},children:(0,$.jsx)(`div`,{style:{display:`flex`,gap:`16px`,alignItems:`flex-end`,height:`180px`,padding:`0 8px`},children:nv.map((e,t)=>(0,$.jsxs)(`div`,{style:{flex:1,display:`flex`,flexDirection:`column`,alignItems:`center`,gap:`4px`,height:`100%`,justifyContent:`flex-end`},children:[(0,$.jsxs)(`div`,{style:{fontSize:`11px`,fontWeight:600,color:`#1e293b`},children:[`$`,(e.sales/1e3).toFixed(0),`K`]}),(0,$.jsxs)(`div`,{style:{fontSize:`10px`,color:`#64748b`},children:[e.units,` units`]}),(0,$.jsx)(`div`,{style:{width:`100%`,background:`#7c3aed`,borderRadius:`4px 4px 0 0`,height:`${e.sales/g*130}px`,minHeight:`20px`}}),(0,$.jsx)(`div`,{style:{fontSize:`11px`,color:`#64748b`,marginTop:`4px`},children:e.week})]},t))})}):o===`analyst`&&n.recentDeals.length>0?(0,$.jsx)(`div`,{style:{padding:`16px`},children:(0,$.jsx)(`div`,{className:`tableWrap`,children:(0,$.jsxs)(`table`,{className:`table`,children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{children:`Company`}),(0,$.jsx)(`th`,{children:`Risk Score`}),(0,$.jsx)(`th`,{children:`Recommendation`}),(0,$.jsx)(`th`,{children:`Date`})]})}),(0,$.jsx)(`tbody`,{children:n.recentDeals.map(e=>{let t=e.analysis?.riskScore||0,n=e.analyzedAt||e.createdAt,r=`Today`;if(n){let e=n.seconds?new Date(n.seconds*1e3):n._seconds?new Date(n._seconds*1e3):new Date(n);isNaN(e.getTime())||(r=e.toLocaleDateString())}return(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`td`,{className:`tdStrong`,children:e.dealInput?.companyName||`Unknown`}),(0,$.jsx)(`td`,{children:(0,$.jsxs)(`span`,{style:{fontWeight:600,color:u(t)},children:[t,`/100`]})}),(0,$.jsx)(`td`,{children:(0,$.jsx)(`span`,{className:`badge badge-${e.analysis?.recommendation===`INVEST`?`completed`:e.analysis?.recommendation===`PASS`?``:`processing`}`,children:e.analysis?.recommendation||`WAIT`})}),(0,$.jsx)(`td`,{className:`tdMuted`,children:r})]},e.id)})})]})})}):c?null:(0,$.jsxs)(`div`,{style:{padding:`32px`,display:`flex`,alignItems:`center`,justifyContent:`center`,minHeight:`300px`,color:`var(--textMuted)`,background:`#f8fafc`,borderRadius:`8px`,margin:`16px`,flexDirection:`column`,gap:`12px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`16px`,fontWeight:600},children:`No data yet`}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,textAlign:`center`,maxWidth:`300px`},children:`Reports will populate as you use the platform.`})]})]}),(0,$.jsxs)(`div`,{className:`card`,children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsx)(`div`,{className:`cardTitle`,children:`Recent Activity`})}),c?(0,$.jsx)(`div`,{style:{padding:`12px 16px`,display:`flex`,flexDirection:`column`,gap:`2px`},children:rv.map(e=>(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`flex-start`,gap:`10px`,padding:`8px 0`,borderBottom:`1px solid #f1f5f9`},children:[(0,$.jsx)(`div`,{style:{width:`8px`,height:`8px`,borderRadius:`50%`,background:e.color,flexShrink:0,marginTop:`5px`}}),(0,$.jsxs)(`div`,{style:{flex:1},children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#334155`,lineHeight:1.5},children:e.text}),(0,$.jsx)(`div`,{style:{fontSize:`11px`,color:`#94a3b8`,marginTop:`2px`},children:e.time})]})]},e.id))}):o===`analyst`&&n.recentDeals.length>0?(0,$.jsx)(`div`,{style:{padding:`12px 16px`,display:`flex`,flexDirection:`column`,gap:`10px`},children:n.recentDeals.slice(0,4).map(e=>{let t=e.analysis?.riskScore||0;return(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`10px`,padding:`8px 0`,borderBottom:`1px solid #f1f5f9`},children:[(0,$.jsx)(`div`,{style:{width:`8px`,height:`8px`,borderRadius:`50%`,background:u(t),flexShrink:0}}),(0,$.jsxs)(`div`,{style:{flex:1,overflow:`hidden`},children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,fontWeight:600,color:`#1e293b`,overflow:`hidden`,textOverflow:`ellipsis`,whiteSpace:`nowrap`},children:e.dealInput?.companyName||`Unknown`}),(0,$.jsxs)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:[e.analysis?.recommendation||`WAIT`,` -- `,t,`/100`]})]})]},e.id)})}):(0,$.jsx)(`div`,{style:{padding:`32px 16px`,textAlign:`center`,color:`var(--textMuted)`,fontSize:`14px`},children:`No activity recorded yet.`})]})]}),c&&(0,$.jsxs)(`div`,{className:`card`,style:{marginTop:`16px`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsx)(`div`,{className:`cardTitle`,children:`Sales by Source`})}),(0,$.jsx)(`div`,{style:{padding:`16px`},children:(0,$.jsx)(`div`,{className:`tableWrap`,children:(0,$.jsxs)(`table`,{className:`table`,style:{width:`100%`},children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{children:`Source`}),(0,$.jsx)(`th`,{children:`Sales`}),(0,$.jsx)(`th`,{children:`Revenue`}),(0,$.jsx)(`th`,{style:{width:`40%`}})]})}),(0,$.jsx)(`tbody`,{children:iv.map((e,t)=>(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`td`,{className:`tdStrong`,children:e.source}),(0,$.jsx)(`td`,{children:e.sales}),(0,$.jsxs)(`td`,{style:{fontWeight:600},children:[`$`,e.revenue.toLocaleString()]}),(0,$.jsx)(`td`,{children:(0,$.jsx)(`div`,{style:{width:`${e.sales/v*100}%`,height:`12px`,background:`#7c3aed`,borderRadius:`6px`,minWidth:`8px`}})})]},t))})]})})})]}),(0,$.jsxs)(`div`,{className:`card`,style:{marginTop:`16px`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`Export Reports`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Download data for external analysis`})]})}),(0,$.jsxs)(`div`,{style:{padding:`16px`,display:`flex`,gap:`12px`},children:[(0,$.jsx)(`button`,{className:`iconBtn`,onClick:f,children:`Export as CSV`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:p,children:`Export as PDF`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:m,children:`Export as Excel`})]})]})]})}function ov(){let[e,t]=(0,_.useState)([]),[n,r]=(0,_.useState)(!1),[i,a]=(0,_.useState)(``),[o,s]=(0,_.useState)(!1),[c,l]=(0,_.useState)(null),u=localStorage.getItem(`VERTICAL`)||`auto`,d=localStorage.getItem(`JURISDICTION`)||`IL`,f=[{id:`salesforce`,name:`Salesforce`,type:`CRM`,icon:`SF`},{id:`hubspot`,name:`HubSpot`,type:`CRM`,icon:`HS`},{id:`quickbooks`,name:`QuickBooks`,type:`Accounting`,icon:`QB`},{id:`stripe`,name:`Stripe`,type:`Payments`,icon:`ST`},{id:`square`,name:`Square`,type:`Payments`,icon:`SQ`},{id:`twilio`,name:`Twilio`,type:`SMS`,icon:`TW`},{id:`sendgrid`,name:`SendGrid`,type:`Email`,icon:`SG`},{id:`foreflight`,name:`ForeFlight`,type:`Aviation`,icon:`FF`}];(0,_.useEffect)(()=>{p()},[]);async function p(){r(!0),a(``);try{t((await l_({vertical:u,jurisdiction:d})).integrations||[])}catch(e){a(e?.message||String(e)),console.error(`Failed to load integrations:`,e)}finally{r(!1)}}async function m(e){if(confirm(`Are you sure you want to disconnect this integration?`)){a(``);try{await u_({vertical:u,jurisdiction:d,integrationId:e}),await p()}catch(e){a(e?.message||String(e)),console.error(`Failed to disconnect integration:`,e)}}}async function h(e){a(``);try{await d_({vertical:u,jurisdiction:d,integrationId:e}),await p(),alert(`Sync started successfully!`)}catch(e){a(e?.message||String(e)),console.error(`Failed to sync integration:`,e),alert(`Sync failed: `+(e?.message||String(e)))}}return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Data & APIs`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Third-party integrations and data synchronization`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>s(!0),style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`},children:`+ Add Integration`})]}),e.length>0&&(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{className:`cardTitle`,children:[`Active Integrations (`,e.length,`)`]})}),(0,$.jsx)(`div`,{style:{padding:`16px`,display:`flex`,flexDirection:`column`,gap:`16px`},children:e.map(e=>(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,padding:`16px`,border:`1px solid var(--line)`,borderRadius:`12px`,cursor:`pointer`},onClick:()=>l(e),children:[(0,$.jsxs)(`div`,{style:{flex:1},children:[(0,$.jsx)(`div`,{style:{fontWeight:600,fontSize:`16px`,marginBottom:`4px`},children:e.name}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`,marginBottom:`8px`},children:e.description}),(0,$.jsxs)(`div`,{style:{fontSize:`12px`,color:`var(--textMuted)`},children:[`Last synced: `,new Date(e.lastSync).toLocaleString(),` `,` `,e.recordsSync,` records`]})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`,marginLeft:`16px`},children:[(0,$.jsx)(`button`,{className:`iconBtn`,onClick:t=>{t.stopPropagation(),h(e.id)},children:`Sync Now`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:t=>{t.stopPropagation(),m(e.id)},style:{color:`var(--danger)`},children:`Disconnect`})]})]},e.id))})]}),c&&(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`},children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:c.name}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Integration Details`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>l(null),children:`Close`})]}),(0,$.jsxs)(`div`,{className:`detail`,children:[(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Status`}),(0,$.jsx)(`div`,{className:`v`,children:(0,$.jsx)(`span`,{className:`badge badge-completed`,children:`Connected`})})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Type`}),(0,$.jsx)(`div`,{className:`v`,children:c.type})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Last Sync`}),(0,$.jsx)(`div`,{className:`v`,children:new Date(c.lastSync).toLocaleString()})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Records Synced`}),(0,$.jsx)(`div`,{className:`v`,children:c.recordsSync})]})]}),(0,$.jsxs)(`div`,{style:{padding:`16px`,borderTop:`1px solid var(--line)`},children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`12px`},children:`Sync Settings`}),(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`8px`},children:[(0,$.jsxs)(`label`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,$.jsx)(`input`,{type:`checkbox`,defaultChecked:!0}),(0,$.jsx)(`span`,{children:`Auto-sync every hour`})]}),(0,$.jsxs)(`label`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,$.jsx)(`input`,{type:`checkbox`,defaultChecked:!0}),(0,$.jsx)(`span`,{children:`Sync customer data`})]}),(0,$.jsxs)(`label`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,$.jsx)(`input`,{type:`checkbox`,defaultChecked:!0}),(0,$.jsx)(`span`,{children:`Sync transactions`})]}),(0,$.jsxs)(`label`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,$.jsx)(`input`,{type:`checkbox`}),(0,$.jsx)(`span`,{children:`Sync inventory`})]})]})]})]}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`},children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`Webhooks`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Receive real-time notifications`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,children:`+ Add Webhook`})]}),(0,$.jsx)(`div`,{style:{padding:`16px`},children:(0,$.jsxs)(`div`,{style:{padding:`16px`,border:`1px solid var(--line)`,borderRadius:`12px`,fontFamily:`monospace`,fontSize:`13px`,background:`#f8fafc`},children:[(0,$.jsx)(`div`,{style:{marginBottom:`8px`,fontWeight:600},children:`POST https://your-app.com/webhooks/titleapp`}),(0,$.jsx)(`div`,{style:{color:`var(--textMuted)`},children:`Events: customer.created, deal.updated, payment.received`})]})})]}),(0,$.jsxs)(`div`,{className:`card`,children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`API Keys`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Programmatic access to your data`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,children:`Generate New Key`})]}),(0,$.jsxs)(`div`,{style:{padding:`16px`,display:`flex`,flexDirection:`column`,gap:`12px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,fontWeight:600,marginBottom:`6px`},children:`Production API Key`}),(0,$.jsxs)(`div`,{style:{fontFamily:`monospace`,padding:`12px`,background:`#f8fafc`,borderRadius:`8px`,fontSize:`13px`,display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsx)(`span`,{children:`ta_prod_`}),(0,$.jsx)(`button`,{className:`iconBtn`,children:`Reveal`})]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,fontWeight:600,marginBottom:`6px`},children:`Test API Key`}),(0,$.jsxs)(`div`,{style:{fontFamily:`monospace`,padding:`12px`,background:`#f8fafc`,borderRadius:`8px`,fontSize:`13px`,display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsx)(`span`,{children:`ta_test_`}),(0,$.jsx)(`button`,{className:`iconBtn`,children:`Reveal`})]})]})]})]}),(0,$.jsx)(R_,{isOpen:o,onClose:()=>s(!1),title:`Add Integration`,onSubmit:e=>{e.preventDefault(),s(!1)},submitLabel:`Connect`,children:(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`var(--textMuted)`,marginBottom:`8px`},children:`Select an integration to connect`}),(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(2, 1fr)`,gap:`12px`},children:f.map(e=>(0,$.jsxs)(`button`,{type:`button`,style:{padding:`16px`,border:`1px solid var(--line)`,borderRadius:`12px`,background:`white`,cursor:`pointer`,textAlign:`left`},onClick:()=>{alert(`Connecting to ${e.name}...`),s(!1)},children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`4px`},children:e.name}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:e.type})]},e.id))})]})})]})}function sv(){let e=Os().currentUser,t=(0,_.useRef)(null),[n,r]=(0,_.useState)({name:e?.displayName||localStorage.getItem(`COMPANY_NAME`)||``,email:e?.email||``,phone:``}),[i,a]=(0,_.useState)(()=>localStorage.getItem(`VAULT_AVATAR`)||null),[o,s]=(0,_.useState)(()=>{let e=localStorage.getItem(`COS_CONFIG`);if(e)try{return JSON.parse(e)}catch{}return{name:`Alex`,channel:`email`,autonomy:`remind`}}),[c,l]=(0,_.useState)(null),[u,d]=(0,_.useState)(()=>localStorage.getItem(`VAULT_BLOCKCHAIN_ENABLED`)===`true`),[f,p]=(0,_.useState)({email:!0,sms:!1,renewalReminders:!0,expirationAlerts:!0});function m(e){s(e),localStorage.setItem(`COS_CONFIG`,JSON.stringify(e))}function h(e){let n=e.target.files?.[0];if(console.log(`[Avatar] File selected:`,n?.name,n?.type,n?.size),!n)return;let r=new FileReader;r.onload=e=>{console.log(`[Avatar] FileReader loaded, data length:`,e.target.result?.length);let t=new Image;t.onload=()=>{console.log(`[Avatar] Image loaded:`,t.width,`x`,t.height);try{let e=document.createElement(`canvas`),n=t.width,r=t.height;(n>200||r>200)&&(n>r?(r=Math.round(r*200/n),n=200):(n=Math.round(n*200/r),r=200)),e.width=n,e.height=r,e.getContext(`2d`).drawImage(t,0,0,n,r);let i=e.toDataURL(`image/jpeg`,.85);console.log(`[Avatar] Compressed length:`,i.length),a(i),localStorage.setItem(`VAULT_AVATAR`,i),l(`Photo updated`),setTimeout(()=>l(null),3e3)}catch(t){console.error(`[Avatar] Canvas error:`,t);let n=e.target.result;a(n);try{localStorage.setItem(`VAULT_AVATAR`,n)}catch(e){console.error(`[Avatar] localStorage full, using in-memory only:`,e)}l(`Photo updated`),setTimeout(()=>l(null),3e3)}},t.onerror=e=>{console.error(`[Avatar] Image load error:`,e),l(`Could not load image. Try a different file.`),setTimeout(()=>l(null),4e3)},t.src=e.target.result},r.onerror=e=>{console.error(`[Avatar] FileReader error:`,e),l(`Could not read file. Try again.`),setTimeout(()=>l(null),4e3)},r.readAsDataURL(n),t.current&&(t.current.value=``)}function g(e){d(e),localStorage.setItem(`VAULT_BLOCKCHAIN_ENABLED`,String(e))}return(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`pageHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Settings`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Your personal Vault preferences`})]})}),c&&(0,$.jsx)(`div`,{style:{padding:`10px 16px`,marginBottom:`12px`,borderRadius:`10px`,background:`#f0fdf4`,color:`#16a34a`,fontSize:`14px`,fontWeight:500},children:c}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`Profile`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Your personal information`})]})}),(0,$.jsxs)(`div`,{style:{padding:`16px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`16px`,marginBottom:`20px`},children:[i?(0,$.jsx)(`img`,{src:i,alt:`Avatar`,style:{width:`64px`,height:`64px`,borderRadius:`50%`,objectFit:`cover`,flexShrink:0}}):(0,$.jsx)(`div`,{style:{width:`64px`,height:`64px`,borderRadius:`50%`,background:`linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%)`,display:`flex`,alignItems:`center`,justifyContent:`center`,color:`white`,fontWeight:700,fontSize:`24px`,flexShrink:0},children:n.name?.charAt(0)?.toUpperCase()||`?`}),(0,$.jsxs)(`div`,{style:{flex:1},children:[(0,$.jsx)(`div`,{style:{fontWeight:600,fontSize:`16px`,color:`#1e293b`},children:n.name||`Your Name`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`},children:n.email}),(0,$.jsx)(`input`,{ref:t,type:`file`,accept:`image/*`,onChange:h,style:{display:`none`}}),(0,$.jsx)(`button`,{className:`iconBtn`,style:{marginTop:`8px`,fontSize:`12px`},onClick:()=>t.current?.click(),children:`Upload Photo`})]})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Full Name`}),(0,$.jsx)(`input`,{type:`text`,value:n.name,onChange:e=>r({...n,name:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`}})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Email`}),(0,$.jsx)(`input`,{type:`email`,value:n.email,disabled:!0,style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`,background:`#f8fafc`,color:`#94a3b8`}}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#94a3b8`,marginTop:`4px`},children:`Email is managed through your login credentials`})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Phone`}),(0,$.jsx)(`input`,{type:`tel`,value:n.phone,onChange:e=>r({...n,phone:e.target.value}),placeholder:`Optional -- used for text notifications`,style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`}})]})]})]})]}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`,border:`1px solid #e9d5ff`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`AI Assistant`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Your personal AI assistant configuration`})]})}),(0,$.jsxs)(`div`,{style:{padding:`16px`},children:[(0,$.jsx)(`div`,{style:{padding:`14px 16px`,background:`#faf5ff`,borderRadius:`10px`,fontSize:`14px`,color:`#64748b`,lineHeight:`1.6`,marginBottom:`20px`},children:`Your AI assistant manages follow-ups, tracks deadlines, and communicates on your behalf within the boundaries you set. Name them, choose how they reach you, and decide how much autonomy they get.`}),(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`18px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`AI Name`}),(0,$.jsx)(`input`,{type:`text`,value:o.name,onChange:e=>m({...o,name:e.target.value}),placeholder:`Give your AI a name`,style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`}}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#94a3b8`,marginTop:`4px`},children:`This is how your AI will introduce itself`})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Title`}),(0,$.jsx)(`input`,{type:`text`,value:`AI Assistant`,disabled:!0,style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`,background:`#f8fafc`,color:`#94a3b8`}})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`8px`,fontWeight:600,fontSize:`13px`},children:`Communication Channel`}),(0,$.jsx)(`div`,{style:{display:`flex`,gap:`8px`},children:[{value:`email`,label:`Email`},{value:`text`,label:`Text`},{value:`both`,label:`Both`}].map(e=>(0,$.jsx)(`button`,{onClick:()=>m({...o,channel:e.value}),style:{padding:`8px 18px`,borderRadius:`10px`,border:o.channel===e.value?`2px solid #7c3aed`:`1px solid var(--line)`,background:o.channel===e.value?`rgba(124,58,237,0.08)`:`white`,color:o.channel===e.value?`#7c3aed`:`#64748b`,fontWeight:o.channel===e.value?600:400,cursor:`pointer`,fontSize:`13px`},children:e.label},e.value))})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`8px`,fontWeight:600,fontSize:`13px`},children:`Autonomy Level`}),(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`8px`},children:[{value:`remind`,label:`Just remind me`,desc:`Send me reminders about deadlines and tasks. I'll handle everything myself.`},{value:`schedule`,label:`Schedule and remind me`,desc:`Book appointments, set reminders, and organize my calendar. I approve before anything goes out.`},{value:`handle`,label:`Handle it for me`,desc:`Take action on routine items automatically. I'll review a summary after the fact.`}].map(e=>(0,$.jsxs)(`button`,{onClick:()=>m({...o,autonomy:e.value}),style:{padding:`12px 16px`,borderRadius:`10px`,border:o.autonomy===e.value?`2px solid #7c3aed`:`1px solid var(--line)`,background:o.autonomy===e.value?`rgba(124,58,237,0.08)`:`white`,cursor:`pointer`,textAlign:`left`},children:[(0,$.jsx)(`div`,{style:{fontWeight:600,fontSize:`14px`,color:o.autonomy===e.value?`#7c3aed`:`#1e293b`,marginBottom:`2px`},children:e.label}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:e.desc})]},e.value))})]})]})]})]}),(0,$.jsxs)(`div`,{style:{marginTop:`32px`,padding:`24px`,background:`white`,borderRadius:`12px`,border:`1px solid #e2e8f0`,marginBottom:`16px`},children:[(0,$.jsx)(`h2`,{style:{fontSize:`20px`,fontWeight:`bold`,marginBottom:`4px`},children:`Billing & Subscription`}),(0,$.jsx)(`p`,{style:{color:`#64748b`,fontSize:`14px`,marginBottom:`20px`},children:`Manage your plan and premium services`}),(0,$.jsxs)(`div`,{style:{padding:`16px`,background:`#f0fdf4`,borderRadius:`8px`,marginBottom:`20px`,display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:`18px`,fontWeight:`700`},children:`Personal Vault  Free`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`},children:`Your personal Vault is free forever. No credit card required.`})]}),(0,$.jsx)(`span`,{style:{padding:`4px 12px`,background:`#dcfce7`,color:`#16a34a`,borderRadius:`20px`,fontSize:`13px`,fontWeight:`600`},children:`Active`})]}),(0,$.jsx)(`h3`,{style:{fontSize:`16px`,fontWeight:`600`,marginBottom:`12px`},children:`Optional Premium Services`}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`12px`},children:[(0,$.jsxs)(`div`,{style:{padding:`16px`,border:`1px solid #e2e8f0`,borderRadius:`8px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:`600`,marginBottom:`4px`},children:`Identity Verification`}),(0,$.jsx)(`div`,{style:{fontSize:`24px`,fontWeight:`bold`,color:`#7c3aed`},children:`$2.99`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`},children:`Per verification. Government ID + biometric check for high-value DTCs.`})]}),(0,$.jsxs)(`div`,{style:{padding:`16px`,border:`1px solid #e2e8f0`,borderRadius:`8px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:`600`,marginBottom:`4px`},children:`Blockchain Recording`}),(0,$.jsx)(`div`,{style:{fontSize:`24px`,fontWeight:`bold`,color:`#7c3aed`},children:`$0.99`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`},children:`Per DTC. Permanent record on Polygon blockchain via Venly. Tamper-proof.`})]}),(0,$.jsxs)(`div`,{style:{padding:`16px`,border:`1px solid #e2e8f0`,borderRadius:`8px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:`600`,marginBottom:`4px`},children:`E-Signature Requests`}),(0,$.jsx)(`div`,{style:{fontSize:`24px`,fontWeight:`bold`,color:`#7c3aed`},children:`$1.99`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`},children:`Per request. DocuSign-powered third-party attestation on logbook entries.`})]}),(0,$.jsxs)(`div`,{style:{padding:`16px`,border:`1px solid #e2e8f0`,borderRadius:`8px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:`600`,marginBottom:`4px`},children:`Priority Support`}),(0,$.jsxs)(`div`,{style:{fontSize:`24px`,fontWeight:`bold`,color:`#7c3aed`},children:[`$4.99`,(0,$.jsx)(`span`,{style:{fontSize:`14px`,fontWeight:`400`},children:`/mo`})]}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`},children:`Dedicated support channel. Response within 1 hour.`})]})]}),(0,$.jsxs)(`div`,{style:{marginTop:`20px`,padding:`16px`,background:`#f8fafc`,borderRadius:`8px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:`600`,marginBottom:`8px`},children:`Usage This Month`}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`24px`,fontSize:`14px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`span`,{style:{fontWeight:`600`},children:`0`}),` ID verifications`]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`span`,{style:{fontWeight:`600`},children:`0`}),` blockchain recordings`]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`span`,{style:{fontWeight:`600`},children:`0`}),` e-signature requests`]})]}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`,marginTop:`8px`},children:`Total charges this month: $0.00`})]})]}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`Blockchain Verification`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Permanent, tamper-proof records`})]})}),(0,$.jsxs)(`div`,{style:{padding:`16px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`#64748b`,lineHeight:`1.7`,marginBottom:`20px`},children:`Save your most important records on the blockchain so they can never be lost, altered, or forged. Each verified item gets a permanent digital certificate that exists independently of any company or service.`}),(0,$.jsx)(`div`,{style:{padding:`14px 16px`,background:u?`#f0fdf4`:`#f8fafc`,border:u?`1px solid #86efac`:`1px solid #e5e7eb`,borderRadius:`10px`},children:(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`},children:[(0,$.jsx)(`input`,{type:`checkbox`,checked:u,onChange:e=>g(e.target.checked),style:{width:`20px`,height:`20px`}}),(0,$.jsxs)(`div`,{style:{flex:1},children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`2px`},children:`Enable Blockchain Record Keeping`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#94a3b8`},children:`Additional fee applies. Records are stored on Polygon blockchain via VENLY.`})]})]})})]})]}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`Notifications`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`How you receive alerts and reminders`})]})}),(0,$.jsx)(`div`,{style:{padding:`16px`,display:`flex`,flexDirection:`column`,gap:`12px`},children:[{key:`email`,label:`Email Notifications`,desc:`Receive updates and reminders via email`},{key:`sms`,label:`Text Notifications`,desc:`Receive updates via text message`},{key:`renewalReminders`,label:`Renewal Reminders`,desc:`Get reminded when certifications or licenses are due for renewal`},{key:`expirationAlerts`,label:`Expiration Alerts`,desc:`Get alerted when documents or IDs are about to expire`}].map(e=>(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`},children:[(0,$.jsx)(`input`,{type:`checkbox`,checked:f[e.key],onChange:t=>p({...f,[e.key]:t.target.checked}),style:{width:`18px`,height:`18px`}}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600},children:e.label}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:e.desc})]})]},e.key))})]}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`Connected Accounts`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Link external accounts for faster verification`})]})}),(0,$.jsxs)(`div`,{style:{padding:`16px`,display:`flex`,flexDirection:`column`,gap:`12px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600},children:`Google`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:`Sign in and import contacts`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,children:`Connect`})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600},children:`Apple`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:`Sign in with Apple ID`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,children:`Connect`})]})]})]}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`,borderColor:`#e9d5ff`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`Developer Tools`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Testing and debugging utilities`})]})}),(0,$.jsxs)(`div`,{style:{padding:`16px`,display:`flex`,flexDirection:`column`,gap:`12px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600},children:`Reset Onboarding`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:`Clear onboarding state and restart the setup flow. Your data is preserved.`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,style:{color:`#f59e0b`,borderColor:`#fcd34d`},onClick:()=>{window.confirm(`This will reset your onboarding flow. Your existing data will be preserved. Continue?`)&&(localStorage.removeItem(`TENANT_ID`),localStorage.removeItem(`VERTICAL`),localStorage.removeItem(`JURISDICTION`),window.location.reload())},children:`Reset`})]}),(0,$.jsx)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600},children:`Current Config`}),(0,$.jsxs)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:[`Vertical: `,localStorage.getItem(`VERTICAL`)||`auto`,` | Jurisdiction: `,localStorage.getItem(`JURISDICTION`)||`IL`,` | Tenant: `,localStorage.getItem(`TENANT_ID`)||`none`]})]})})]})]}),(0,$.jsxs)(`div`,{className:`card`,style:{borderColor:`var(--danger)`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,style:{color:`var(--danger)`},children:`Danger Zone`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Irreversible actions`})]})}),(0,$.jsxs)(`div`,{style:{padding:`16px`,display:`flex`,flexDirection:`column`,gap:`12px`},children:[(0,$.jsx)(`button`,{className:`iconBtn`,style:{width:`fit-content`,color:`var(--danger)`},children:`Export All Data`}),(0,$.jsx)(`button`,{className:`iconBtn`,style:{width:`fit-content`,color:`var(--danger)`},children:`Delete Account`})]})]})]})}function cv(){let[e,t]=(0,_.useState)([]),[n,r]=(0,_.useState)(localStorage.getItem(`CURRENT_TENANT_ID`)||null),[i,a]=(0,_.useState)(!1),[o,s]=(0,_.useState)({name:``,type:`business`,vertical:`auto`,jurisdiction:`IL`}),c=localStorage.getItem(`VERTICAL`)||`auto`,l=localStorage.getItem(`JURISDICTION`)||`IL`,u={auto:`Auto Dealer`,analyst:`Investment Analyst`,"real-estate":`Real Estate Brokerage`,"property-mgmt":`Property Management`,aviation:`Aviation`,marine:`Marine`};function d(){let e=[localStorage.getItem(`WORKSPACE_NAME`),localStorage.getItem(`COMPANY_NAME`),localStorage.getItem(`TENANT_NAME`)];for(let t of e)if(t&&!/^ws_\d+_[a-z0-9]+$/i.test(t))return t;return``}let[f,p]=(0,_.useState)({name:d(),type:u[c]||c,vertical:c,jurisdiction:l,address:``,phone:``,email:``,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone||`America/Chicago`,notifications:{email:!0,sms:!1,lowInventoryAlert:!0,appointmentReminders:!0},blockchain:{enabled:!1,provider:`venly`,inventoryOnChain:0,dealsOnChain:0}}),[m,h]=(0,_.useState)(!1),[g,v]=(0,_.useState)(null),[y,b]=(0,_.useState)({});function x(e){v(e),e===`business`?b({name:f.name,type:f.type,address:f.address,phone:f.phone,email:f.email}):e===`notifications`&&b({...f.notifications}),h(!0)}function S(e){e.preventDefault(),g===`business`?p({...f,...y}):g===`notifications`&&p({...f,notifications:y}),h(!1)}(0,_.useEffect)(()=>{C()},[]);async function C(){let e=localStorage.getItem(`WORKSPACE_ID`)||``;t([{id:e,name:d()||`Current Workspace`,type:u[c]||c,role:`admin`}]),n||r(e)}function w(e){localStorage.setItem(`CURRENT_TENANT_ID`,e),r(e),window.location.reload()}return(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`pageHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Settings`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Business configuration and preferences`})]})}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`},children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`My Companies`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Manage multiple businesses with one account`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>a(!0),style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`},children:`+ New Company`})]}),(0,$.jsx)(`div`,{style:{padding:`16px`},children:e.map(e=>(0,$.jsxs)(`div`,{style:{padding:`12px`,marginBottom:`8px`,border:`2px solid ${n===e.id?`var(--accent)`:`var(--line)`}`,borderRadius:`8px`,display:`flex`,justifyContent:`space-between`,alignItems:`center`,background:n===e.id?`rgba(124,58,237,0.05)`:`transparent`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600},children:e.name}),(0,$.jsxs)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:[e.type,` `,e.role?`\u00B7 ${e.role}`:``,n===e.id&&(0,$.jsx)(`span`,{style:{color:`var(--accent)`,marginLeft:`8px`},children:`Active`})]})]}),n!==e.id&&(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>w(e.id),children:`Switch`})]},e.id))})]}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`},children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`Business Information`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Your business details`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>x(`business`),children:`Edit`})]}),(0,$.jsxs)(`div`,{className:`detail`,children:[(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Business Name`}),(0,$.jsx)(`div`,{className:`v`,children:f.name})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Type`}),(0,$.jsx)(`div`,{className:`v`,children:f.type})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Vertical`}),(0,$.jsxs)(`div`,{className:`v`,children:[f.vertical.toUpperCase(),` (`,f.jurisdiction.toUpperCase(),`)`]})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Address`}),(0,$.jsx)(`div`,{className:`v`,children:f.address})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Phone`}),(0,$.jsx)(`div`,{className:`v`,children:f.phone})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Email`}),(0,$.jsx)(`div`,{className:`v`,children:f.email})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Timezone`}),(0,$.jsx)(`div`,{className:`v`,children:f.timezone})]})]})]}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`},children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`Notification Preferences`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`How your business receives alerts`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>x(`notifications`),children:`Edit`})]}),(0,$.jsxs)(`div`,{style:{padding:`16px`,display:`flex`,flexDirection:`column`,gap:`12px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`},children:[(0,$.jsx)(`input`,{type:`checkbox`,checked:f.notifications.email,readOnly:!0}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600},children:`Email Notifications`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:`Receive updates via email`})]})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`},children:[(0,$.jsx)(`input`,{type:`checkbox`,checked:f.notifications.sms,readOnly:!0}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600},children:`SMS Notifications`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:`Receive updates via text message`})]})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`},children:[(0,$.jsx)(`input`,{type:`checkbox`,checked:f.notifications.lowInventoryAlert,readOnly:!0}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600},children:`Low Inventory Alerts`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:`Get notified when inventory is running low`})]})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`},children:[(0,$.jsx)(`input`,{type:`checkbox`,checked:f.notifications.appointmentReminders,readOnly:!0}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600},children:`Appointment Reminders`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:`Remind staff about upcoming appointments`})]})]})]})]}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`Integrations`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Connected third-party services`})]})}),(0,$.jsxs)(`div`,{style:{padding:`16px`,display:`flex`,flexDirection:`column`,gap:`12px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600},children:`Salesforce CRM`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:`Sync customer data with Salesforce`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,children:`Connect`})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600},children:`QuickBooks`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:`Sync financial data and invoices`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,children:`Connect`})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600},children:`Stripe Payments`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:`Accept online payments`})]}),(0,$.jsx)(`span`,{className:`badge badge-completed`,children:`Connected`})]})]})]}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`},children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`API Access`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`API keys for programmatic access`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,children:`Generate New Key`})]}),(0,$.jsxs)(`div`,{style:{padding:`16px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`,marginBottom:`8px`},children:`Production API Key`}),(0,$.jsx)(`div`,{style:{fontFamily:`monospace`,padding:`12px`,background:`#f8fafc`,borderRadius:`8px`,fontSize:`13px`},children:`ta_prod_`})]})]}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`},children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`Blockchain Verification`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`NFT records for inventory and deals via VENLY`})]}),(0,$.jsx)(`span`,{className:`badge ${f.blockchain.enabled?`badge-completed`:``}`,style:{fontSize:`11px`},children:f.blockchain.enabled?`Active`:`Inactive`})]}),(0,$.jsxs)(`div`,{style:{padding:`16px`},children:[(0,$.jsxs)(`div`,{style:{padding:`16px`,background:f.blockchain.enabled?`#f0fdf4`:`#f8fafc`,border:f.blockchain.enabled?`1px solid #86efac`:`1px solid #e5e7eb`,borderRadius:`12px`,marginBottom:`16px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`,marginBottom:`12px`},children:[(0,$.jsx)(`input`,{type:`checkbox`,checked:f.blockchain.enabled,onChange:e=>p({...f,blockchain:{...f.blockchain,enabled:e.target.checked}}),style:{width:`20px`,height:`20px`}}),(0,$.jsxs)(`div`,{style:{flex:1},children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`4px`},children:`Enable Blockchain Records`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:`Create immutable NFT records of inventory and customer deals on Polygon`})]})]}),f.blockchain.enabled&&(0,$.jsxs)(`div`,{style:{paddingTop:`12px`,borderTop:`1px solid #e5e7eb`,display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`12px`,fontSize:`13px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{color:`var(--textMuted)`,marginBottom:`4px`},children:`Inventory on Chain`}),(0,$.jsx)(`div`,{style:{fontWeight:600,fontSize:`18px`},children:f.blockchain.inventoryOnChain})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{color:`var(--textMuted)`,marginBottom:`4px`},children:`Deals on Chain`}),(0,$.jsx)(`div`,{style:{fontWeight:600,fontSize:`18px`},children:f.blockchain.dealsOnChain})]})]})]}),(0,$.jsxs)(`div`,{style:{padding:`12px`,background:`#fff5f5`,border:`1px solid #fecaca`,borderRadius:`8px`,fontSize:`13px`,marginBottom:`12px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`4px`},children:`Cost Notice`}),(0,$.jsx)(`div`,{style:{color:`#dc2626`},children:`VENLY blockchain integration costs $700/month when active. Requires 30+ active clients to justify the expense. Only enable when you have scale.`})]})]})]}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`AI Assistant Rules (RAAS)`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Custom rules and compliance settings for your AI assistant`})]})}),(0,$.jsxs)(`div`,{style:{padding:`16px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`var(--textMuted)`,marginBottom:`8px`},children:`These rules were set during onboarding. You can update them anytime.`}),(0,$.jsx)(`div`,{style:{padding:`12px`,background:`#f8fafc`,borderRadius:`8px`,fontSize:`14px`,lineHeight:1.6,minHeight:`60px`,color:`#374151`},children:localStorage.getItem(`RAAS_RULES`)||`Standard rules (no custom rules set)`})]})]}),c===`analyst`&&(0,$.jsxs)(`div`,{style:{marginBottom:`16px`,padding:`24px`,background:`white`,borderRadius:`12px`,border:`1px solid #e2e8f0`},children:[(0,$.jsx)(`h2`,{style:{fontSize:`20px`,fontWeight:`bold`,marginBottom:`4px`},children:`Billing & Subscription`}),(0,$.jsx)(`p`,{style:{color:`#64748b`,fontSize:`14px`,marginBottom:`20px`},children:`Manage your plan, seats, and billing`}),(0,$.jsxs)(`div`,{style:{padding:`16px`,background:`#f5f3ff`,borderRadius:`8px`,marginBottom:`20px`,display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:`18px`,fontWeight:`700`},children:`TitleApp AI Pro`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`},children:`$9/user/month  Billed monthly`})]}),(0,$.jsx)(`span`,{style:{padding:`4px 12px`,background:`#ede9fe`,color:`#7c3aed`,borderRadius:`20px`,fontSize:`13px`,fontWeight:`600`},children:`Active`})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr 1fr`,gap:`16px`,marginBottom:`20px`},children:[(0,$.jsxs)(`div`,{style:{padding:`16px`,background:`#f8fafc`,borderRadius:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`},children:`NEXT PAYMENT`}),(0,$.jsx)(`div`,{style:{fontSize:`18px`,fontWeight:`bold`},children:`Mar 18, 2026`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`},children:`$9.00`})]}),(0,$.jsxs)(`div`,{style:{padding:`16px`,background:`#f8fafc`,borderRadius:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`},children:`TEAM SEATS`}),(0,$.jsx)(`div`,{style:{fontSize:`18px`,fontWeight:`bold`},children:`1 of 1`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#7c3aed`,cursor:`pointer`},children:`+ Add seat`})]}),(0,$.jsxs)(`div`,{style:{padding:`16px`,background:`#f8fafc`,borderRadius:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`},children:`PLAN STARTED`}),(0,$.jsx)(`div`,{style:{fontSize:`18px`,fontWeight:`bold`},children:`Feb 18, 2026`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`},children:`Monthly billing`})]})]}),(0,$.jsx)(`h3`,{style:{fontSize:`16px`,fontWeight:`600`,marginBottom:`12px`},children:`Usage This Month`}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr 1fr 1fr`,gap:`12px`,marginBottom:`20px`},children:[(0,$.jsxs)(`div`,{style:{padding:`12px`,border:`1px solid #e2e8f0`,borderRadius:`8px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:`bold`},children:`5`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`Deals Analyzed`})]}),(0,$.jsxs)(`div`,{style:{padding:`12px`,border:`1px solid #e2e8f0`,borderRadius:`8px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:`bold`},children:`4`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`Opportunities Found`})]}),(0,$.jsxs)(`div`,{style:{padding:`12px`,border:`1px solid #e2e8f0`,borderRadius:`8px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:`bold`},children:`3`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`Reports Generated`})]}),(0,$.jsxs)(`div`,{style:{padding:`12px`,border:`1px solid #e2e8f0`,borderRadius:`8px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:`bold`},children:`12`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`AI Conversations`})]})]}),(0,$.jsx)(`h3`,{style:{fontSize:`16px`,fontWeight:`600`,marginBottom:`12px`},children:`What's Included`}),(0,$.jsx)(`div`,{style:{padding:`16px`,background:`#f8fafc`,borderRadius:`8px`},children:(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`8px`,fontSize:`14px`},children:[(0,$.jsx)(`div`,{children:` Unlimited deal analysis`}),(0,$.jsx)(`div`,{children:` AI Assistant`}),(0,$.jsx)(`div`,{children:` AI deal sourcing (overnight scans)`}),(0,$.jsx)(`div`,{children:` Risk scoring & RAAS validation`}),(0,$.jsx)(`div`,{children:` IC-ready report generation`}),(0,$.jsx)(`div`,{children:` Email/text outreach from AI`}),(0,$.jsx)(`div`,{children:` Team collaboration (per seat)`}),(0,$.jsx)(`div`,{children:` Services & fee tracking`})]})}),(0,$.jsxs)(`div`,{style:{marginTop:`20px`,display:`flex`,gap:`12px`},children:[(0,$.jsx)(`button`,{style:{padding:`10px 20px`,backgroundColor:`#7c3aed`,color:`white`,border:`none`,borderRadius:`8px`,cursor:`pointer`,fontWeight:`600`},children:`Manage Plan`}),(0,$.jsx)(`button`,{style:{padding:`10px 20px`,backgroundColor:`white`,color:`#64748b`,border:`1px solid #e2e8f0`,borderRadius:`8px`,cursor:`pointer`},children:`Billing History`})]})]}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`,borderColor:`#e9d5ff`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`Developer Tools`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Testing and debugging utilities`})]})}),(0,$.jsxs)(`div`,{style:{padding:`16px`,display:`flex`,flexDirection:`column`,gap:`12px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600},children:`Reset Onboarding`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:`Clear onboarding state and restart the setup flow.`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,style:{color:`#f59e0b`,borderColor:`#fcd34d`},onClick:()=>{window.confirm(`This will reset your onboarding flow. Your existing data will be preserved. Continue?`)&&(localStorage.removeItem(`TENANT_ID`),localStorage.removeItem(`VERTICAL`),localStorage.removeItem(`JURISDICTION`),window.location.reload())},children:`Reset`})]}),(0,$.jsx)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600},children:`Current Config`}),(0,$.jsxs)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:[`Vertical: `,localStorage.getItem(`VERTICAL`)||`auto`,` | Jurisdiction: `,localStorage.getItem(`JURISDICTION`)||`IL`,` | Tenant: `,localStorage.getItem(`TENANT_ID`)||`none`]})]})})]})]}),(0,$.jsxs)(`div`,{className:`card`,style:{borderColor:`var(--danger)`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,style:{color:`var(--danger)`},children:`Danger Zone`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Irreversible actions`})]})}),(0,$.jsxs)(`div`,{style:{padding:`16px`,display:`flex`,flexDirection:`column`,gap:`12px`},children:[(0,$.jsx)(`button`,{className:`iconBtn`,style:{width:`fit-content`,color:`var(--danger)`},children:`Export All Data`}),(0,$.jsx)(`button`,{className:`iconBtn`,style:{width:`fit-content`,color:`var(--danger)`},children:`Delete Business Account`})]})]}),(0,$.jsxs)(R_,{isOpen:m,onClose:()=>h(!1),title:g===`business`?`Edit Business Information`:`Edit Notifications`,onSubmit:S,submitLabel:`Save Changes`,children:[g===`business`&&(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Business Name`}),(0,$.jsx)(`input`,{type:`text`,value:y.name||``,onChange:e=>b({...y,name:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`}})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Type`}),(0,$.jsx)(`input`,{type:`text`,value:y.type||``,onChange:e=>b({...y,type:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`}})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Address`}),(0,$.jsx)(`input`,{type:`text`,value:y.address||``,onChange:e=>b({...y,address:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`}})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Phone`}),(0,$.jsx)(`input`,{type:`tel`,value:y.phone||``,onChange:e=>b({...y,phone:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`}})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Email`}),(0,$.jsx)(`input`,{type:`email`,value:y.email||``,onChange:e=>b({...y,email:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`}})]})]}),g===`notifications`&&(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:[{key:`email`,label:`Email Notifications`,desc:`Receive updates via email`},{key:`sms`,label:`SMS Notifications`,desc:`Receive updates via text message`},{key:`lowInventoryAlert`,label:`Low Inventory Alerts`,desc:`Get notified when inventory is running low`},{key:`appointmentReminders`,label:`Appointment Reminders`,desc:`Remind staff about upcoming appointments`}].map(e=>(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`},children:[(0,$.jsx)(`input`,{type:`checkbox`,checked:y[e.key]||!1,onChange:t=>b({...y,[e.key]:t.target.checked})}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600},children:e.label}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:e.desc})]})]},e.key))})]})]})}function lv(){return(localStorage.getItem(`VERTICAL`)||`auto`)===`consumer`?(0,$.jsx)(sv,{}):(0,$.jsx)(cv,{})}var uv=[{id:`tmcc-standard`,name:`TMCC Standard`,type:`financing`,rateRange:`4.9%  8.9%`,creditMin:650,termRange:`2484 months`,notes:`Toyota Motor Credit Corp. Tier 1 financing for new and CPO vehicles.`,dealerCostRange:`$0`,estimatedProfit:`Reserve markup 12%`},{id:`tmcc-subprime`,name:`TMCC Subprime`,type:`financing`,rateRange:`9.9%  18.9%`,creditMin:520,termRange:`2472 months`,notes:`Toyota Motor Credit subprime program. Higher reserve opportunity.`,dealerCostRange:`$0`,estimatedProfit:`Reserve markup 24%`},{id:`se-toyota`,name:`Southeast Toyota Finance`,type:`financing`,rateRange:`4.49%  7.9%`,creditMin:660,termRange:`2484 months`,notes:`Regional lender for Southeast Toyota distributors. Competitive rates.`,dealerCostRange:`$0`,estimatedProfit:`Reserve markup 12%`},{id:`chase-auto`,name:`Chase Auto Direct`,type:`financing`,rateRange:`5.49%  9.9%`,creditMin:620,termRange:`2484 months`,notes:`National lender. Good for near-prime customers who don't qualify for TMCC.`,dealerCostRange:`$0`,estimatedProfit:`Reserve markup 1.52.5%`},{id:`capital-one`,name:`Capital One Auto`,type:`financing`,rateRange:`6.9%  14.9%`,creditMin:580,termRange:`2472 months`,notes:`Broad credit spectrum. Flexible on trade equity and LTV.`,dealerCostRange:`$0`,estimatedProfit:`Reserve markup 23%`},{id:`tfs-lease-standard`,name:`TFS Lease Standard`,type:`lease`,rateRange:`.00125  .00295 MF`,creditMin:650,termRange:`2448 months`,notes:`Toyota Financial Services standard lease. Money factor varies by model and term.`,dealerCostRange:`$0`,estimatedProfit:`MF markup + acquisition fee`},{id:`tfs-lease-special`,name:`TFS Lease Special`,type:`lease`,rateRange:`.00098  .00195 MF`,creditMin:680,termRange:`2436 months`,notes:`Select models only. Promotional money factors for qualified buyers.`,dealerCostRange:`$0`,estimatedProfit:`MF markup + acquisition fee`}],dv=[{id:`extra-care-platinum`,name:`Toyota Extra Care Platinum`,type:`warranty`,priceRange:`$1,295  $3,895`,coverage:`1,500+ components`,dealerCost:`$650  $1,800`,estimatedProfit:`$645  $2,095`,notes:`Comprehensive bumper-to-bumper. Best for new vehicle buyers financing 60+ months.`},{id:`extra-care-gold`,name:`Toyota Extra Care Gold`,type:`warranty`,priceRange:`$995  $2,995`,coverage:`900+ components`,dealerCost:`$500  $1,400`,estimatedProfit:`$495  $1,595`,notes:`Strong coverage minus some luxury components. Best for CPO and late-model used.`},{id:`gap`,name:`GAP Coverage`,type:`protection`,priceRange:`$595  $895`,coverage:`Covers loan-to-value gap in total loss`,dealerCost:`$195  $295`,estimatedProfit:`$400  $600`,notes:`Essential for customers with low down payment or negative equity trade-ins.`},{id:`toyoguard-platinum`,name:`ToyoGuard Platinum`,type:`protection`,priceRange:`$995  $1,295`,coverage:`Paint protection, interior, key, dent & ding`,dealerCost:`$350  $495`,estimatedProfit:`$645  $800`,notes:`Bundled appearance package. High margin. Easy to present as monthly payment add.`},{id:`tire-wheel`,name:`Tire & Wheel Protection`,type:`protection`,priceRange:`$495  $895`,coverage:`Road hazard tire/wheel replacement`,dealerCost:`$150  $295`,estimatedProfit:`$345  $600`,notes:`Good for Texas roads. Present with pothole/road hazard data.`},{id:`key-replacement`,name:`Key Replacement`,type:`protection`,priceRange:`$395  $495`,coverage:`Lost/stolen/damaged key fob replacement`,dealerCost:`$95  $145`,estimatedProfit:`$300  $350`,notes:`Modern key fobs cost $300$600 to replace. Easy close.`},{id:`windshield`,name:`Windshield Protection`,type:`protection`,priceRange:`$295  $395`,coverage:`Windshield chip repair and replacement`,dealerCost:`$75  $120`,estimatedProfit:`$220  $275`,notes:`Low cost, high margin. Bundle with Tire & Wheel for discount.`}];function fv(){let[e,t]=(0,_.useState)(`financing`);function n(e){window.dispatchEvent(new CustomEvent(`ta:chatPrompt`,{detail:{message:e}}))}return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`F&I Products`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Financing, warranties, and protection products`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>n(`What F&I products should I recommend for a customer with a 680 credit score buying a new Camry?`),style:{background:`linear-gradient(135deg, #7c3aed, #6d28d9)`,color:`white`,border:`none`},children:`Ask AI`})]}),(0,$.jsx)(`div`,{style:{display:`flex`,gap:`0`,marginBottom:`20px`,borderBottom:`2px solid #e2e8f0`},children:[{id:`financing`,label:`Financing (${uv.length})`},{id:`protection`,label:`Protection Products (${dv.length})`}].map(n=>(0,$.jsx)(`button`,{onClick:()=>t(n.id),style:{padding:`10px 20px`,fontSize:`14px`,fontWeight:600,border:`none`,borderBottom:e===n.id?`2px solid #7c3aed`:`2px solid transparent`,background:`transparent`,color:e===n.id?`#7c3aed`:`#64748b`,cursor:`pointer`,marginBottom:`-2px`},children:n.label},n.id))}),e===`financing`&&(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`14px`},children:uv.map(e=>(0,$.jsxs)(`div`,{className:`card`,style:{padding:`20px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`flex-start`,marginBottom:`12px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:`16px`,fontWeight:700,color:`#1e293b`},children:e.name}),(0,$.jsx)(`span`,{style:{display:`inline-block`,fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:e.type===`lease`?`#dbeafe`:`#ede9fe`,color:e.type===`lease`?`#2563eb`:`#7c3aed`,marginTop:`4px`,textTransform:`uppercase`},children:e.type})]}),(0,$.jsxs)(`div`,{style:{textAlign:`right`},children:[(0,$.jsx)(`div`,{style:{fontSize:`18px`,fontWeight:700,color:`#1e293b`},children:e.rateRange}),(0,$.jsxs)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:[`Min credit: `,e.creditMin]})]})]}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`,marginBottom:`10px`},children:e.notes}),(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,fontSize:`12px`,color:`#94a3b8`,borderTop:`1px solid #f1f5f9`,paddingTop:`10px`},children:[(0,$.jsxs)(`span`,{children:[`Terms: `,e.termRange]}),(0,$.jsx)(`span`,{style:{color:`#16a34a`,fontWeight:600},children:e.estimatedProfit})]})]},e.id))}),e===`protection`&&(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`14px`},children:dv.map(e=>(0,$.jsxs)(`div`,{className:`card`,style:{padding:`20px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`flex-start`,marginBottom:`12px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:`16px`,fontWeight:700,color:`#1e293b`},children:e.name}),(0,$.jsx)(`span`,{style:{display:`inline-block`,fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:e.type===`warranty`?`#fef3c7`:`#dbeafe`,color:e.type===`warranty`?`#d97706`:`#2563eb`,marginTop:`4px`,textTransform:`uppercase`},children:e.type})]}),(0,$.jsx)(`div`,{style:{textAlign:`right`},children:(0,$.jsx)(`div`,{style:{fontSize:`18px`,fontWeight:700,color:`#1e293b`},children:e.priceRange})})]}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#334155`,marginBottom:`6px`},children:e.coverage}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`,marginBottom:`10px`},children:e.notes}),(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,fontSize:`12px`,borderTop:`1px solid #f1f5f9`,paddingTop:`10px`},children:[(0,$.jsxs)(`span`,{style:{color:`#94a3b8`},children:[`Dealer cost: `,e.dealerCost]}),(0,$.jsxs)(`span`,{style:{color:`#16a34a`,fontWeight:700},children:[`Profit: `,e.estimatedProfit]})]})]},e.id))})]})}var pv={Monday:[{time:`7:00 AM`,customer:`Lawrence Foster`,vehicle:`2024 Camry SE`,vin:`...N25012`,service:`30K Maintenance`,advisor:`Mike Torres`,bay:3,cost:389,status:`confirmed`,upsell:null,salesOpp:{strength:`possible`,note:`2024 Camry, 30K mi -- nurture`}},{time:`7:30 AM`,customer:`Patricia Adams`,vehicle:`2023 RAV4 XLE`,vin:`...R23045`,service:`Oil Change + Tire Rotation`,advisor:`Mike Torres`,bay:5,cost:129,status:`confirmed`,upsell:`Cabin air filter ($45)`,salesOpp:null},{time:`8:00 AM`,customer:`Charles Cox`,vehicle:`2023 Tacoma TRD Sport`,vin:`...T23088`,service:`60K Major Service`,advisor:`Sarah Kim`,bay:1,cost:449,status:`confirmed`,upsell:`Factory warranty expiring -- pitch Extra Care Gold ($2,995)`,salesOpp:{strength:`strong`,note:`High mileage, 2025 Tacoma available, $42,300`}},{time:`9:00 AM`,customer:`James Mitchell`,vehicle:`2022 Highlander Limited`,vin:`...H22033`,service:`Brake Inspection + Pads`,advisor:`Sarah Kim`,bay:7,cost:285,status:`confirmed`,upsell:null,salesOpp:{strength:`possible`,note:`2022 Highlander, explore trade-up`}},{time:`10:00 AM`,customer:`Robert Chen`,vehicle:`2025 Corolla Cross LE`,vin:`...C25001`,service:`First Oil Change (complimentary)`,advisor:`Mike Torres`,bay:4,cost:0,status:`confirmed`,upsell:`ToyoGuard Platinum presentation ($995)`,salesOpp:null},{time:`11:00 AM`,customer:`Angela Williams`,vehicle:`2021 Prius Prime`,vin:`...P21019`,service:`Hybrid Battery Check + Multi-Point`,advisor:`David Park`,bay:2,cost:95,status:`pending`,upsell:`Vehicle 4+ years old -- trade-up candidate`,salesOpp:{strength:`strong`,note:`2021 Prius aging, 2025 Prius Prime available, $34,800`}},{time:`1:00 PM`,customer:`Thomas Garcia`,vehicle:`2024 Tundra SR5`,vin:`...U24007`,service:`Recall Campaign -- Seat Belt Retractor`,advisor:`David Park`,bay:8,cost:0,status:`confirmed`,upsell:null,salesOpp:{strength:`possible`,note:`2024 Tundra, discuss accessories/protection`}},{time:`2:30 PM`,customer:`Diana Brooks`,vehicle:`2022 Venza Limited`,vin:`...V22015`,service:`Transmission Flush + Coolant`,advisor:`Sarah Kim`,bay:6,cost:329,status:`pending`,upsell:`Approaching 50K -- present extended warranty options`,salesOpp:{strength:`strong`,note:`Crown comparable -- $2K equity advantage`}}],Tuesday:[{time:`7:00 AM`,customer:`Kevin O'Brien`,vehicle:`2024 4Runner TRD Off-Road`,vin:`...4R24003`,service:`Suspension Check + Alignment`,advisor:`Mike Torres`,bay:1,cost:189,status:`confirmed`,upsell:null,salesOpp:null},{time:`8:00 AM`,customer:`Sandra Lee`,vehicle:`2023 Camry XSE`,vin:`...N23044`,service:`Oil Change + Multi-Point`,advisor:`Sarah Kim`,bay:3,cost:89,status:`confirmed`,upsell:`Wiper blades ($35)`,salesOpp:null},{time:`9:30 AM`,customer:`Michael Wong`,vehicle:`2025 RAV4 Hybrid XLE`,vin:`...R25011`,service:`5K First Service`,advisor:`David Park`,bay:5,cost:0,status:`confirmed`,upsell:`Paint protection film ($495)`,salesOpp:null},{time:`10:00 AM`,customer:`Lisa Johnson`,vehicle:`2022 Corolla LE`,vin:`...C22089`,service:`AC Compressor Diagnosis`,advisor:`Mike Torres`,bay:9,cost:149,status:`pending`,upsell:null,salesOpp:{strength:`strong`,note:`Repair cost high -- present Corolla Cross upgrade`}},{time:`11:30 AM`,customer:`Fleet - Demo Motors`,vehicle:`2024 Camry LE (Loaner)`,vin:`...N24L01`,service:`Loaner Return Inspection`,advisor:`David Park`,bay:2,cost:0,status:`confirmed`,upsell:null,salesOpp:null}],Wednesday:[{time:`7:00 AM`,customer:`Richard Brown`,vehicle:`2023 Tundra Limited`,vin:`...U23015`,service:`45K Service`,advisor:`Sarah Kim`,bay:1,cost:359,status:`confirmed`,upsell:`Bed liner application ($595)`,salesOpp:{strength:`possible`,note:`Approaching high mileage, 2025 Tundra available`}},{time:`8:00 AM`,customer:`Jennifer Patel`,vehicle:`2024 Crown Platinum`,vin:`...CR24002`,service:`Oil Change`,advisor:`Mike Torres`,bay:4,cost:89,status:`confirmed`,upsell:null,salesOpp:null},{time:`9:00 AM`,customer:`William Davis`,vehicle:`2025 GR86 Premium`,vin:`...G25001`,service:`Performance Alignment`,advisor:`David Park`,bay:7,cost:179,status:`confirmed`,upsell:null,salesOpp:null},{time:`10:30 AM`,customer:`Carol Thompson`,vehicle:`2022 Highlander XLE`,vin:`...H22078`,service:`Brake Pads + Rotors`,advisor:`Sarah Kim`,bay:3,cost:445,status:`pending`,upsell:`Approaching 60K -- warranty pitch`,salesOpp:{strength:`strong`,note:`Grand Highlander -- $4K positive equity`}},{time:`1:00 PM`,customer:`George Martinez`,vehicle:`2021 Tacoma SR`,vin:`...T21055`,service:`Recall -- Leaf Spring`,advisor:`Mike Torres`,bay:10,cost:0,status:`confirmed`,upsell:`Vehicle 5 years old -- trade-up opportunity`,salesOpp:{strength:`strong`,note:`5 yrs old, strong residual -- 2025 Tacoma SR5`}}],Thursday:[{time:`7:00 AM`,customer:`Nancy Wilson`,vehicle:`2024 Venza XLE`,vin:`...V24008`,service:`15K Service`,advisor:`David Park`,bay:2,cost:219,status:`confirmed`,upsell:null,salesOpp:null},{time:`8:30 AM`,customer:`Paul Rodriguez`,vehicle:`2023 RAV4 TRD Off-Road`,vin:`...R23077`,service:`4WD System Check`,advisor:`Sarah Kim`,bay:6,cost:129,status:`confirmed`,upsell:null,salesOpp:null},{time:`9:00 AM`,customer:`Maria Gonzalez`,vehicle:`2024 Corolla LE`,vin:`...C24033`,service:`Tire Rotation + Inspection`,advisor:`Mike Torres`,bay:3,cost:49,status:`pending`,upsell:`Lease expiring in 60 days -- upgrade discussion`,salesOpp:{strength:`strong`,note:`Lease ends Apr 2026 -- present Corolla Hybrid`}},{time:`11:00 AM`,customer:`Steven Park`,vehicle:`2025 Sequoia Capstone`,vin:`...S25001`,service:`First Oil Change`,advisor:`David Park`,bay:1,cost:0,status:`confirmed`,upsell:`ToyoGuard + Tire & Wheel bundle ($1,295)`,salesOpp:null},{time:`1:30 PM`,customer:`Barbara Kim`,vehicle:`2022 Prius LE`,vin:`...P22041`,service:`Hybrid System Diagnostic`,advisor:`Sarah Kim`,bay:8,cost:149,status:`confirmed`,upsell:null,salesOpp:{strength:`possible`,note:`3+ yrs, monitor for trade-up`}},{time:`3:00 PM`,customer:`Fleet - Houston Metro`,vehicle:`2024 Camry LE (x3)`,vin:`...fleet`,service:`Fleet 10K Service (3 vehicles)`,advisor:`Mike Torres`,bay:`4,5,6`,cost:267,status:`confirmed`,upsell:null,salesOpp:null}],Friday:[{time:`7:00 AM`,customer:`Daniel Green`,vehicle:`2023 Camry TRD`,vin:`...N23TRD`,service:`Performance Brake Service`,advisor:`David Park`,bay:1,cost:389,status:`confirmed`,upsell:null,salesOpp:null},{time:`8:00 AM`,customer:`Susan White`,vehicle:`2024 Grand Highlander Platinum`,vin:`...GH24005`,service:`Oil Change + Multi-Point`,advisor:`Sarah Kim`,bay:3,cost:99,status:`confirmed`,upsell:null,salesOpp:null},{time:`9:30 AM`,customer:`Mark Brown`,vehicle:`2025 Corolla Cross LE`,vin:`...CC25009`,service:`5K First Service`,advisor:`Mike Torres`,bay:5,cost:0,status:`confirmed`,upsell:`Cross-sell RAV4 upgrade opportunity`,salesOpp:{strength:`possible`,note:`RAV4 Hybrid -- natural upgrade path`}},{time:`11:00 AM`,customer:`Recon - Used`,vehicle:`2021 BMW X3 xDrive30i`,vin:`...U30000`,service:`Pre-Sale Reconditioning`,advisor:`Mike Torres`,bay:11,cost:850,status:`in-progress`,upsell:null,salesOpp:null},{time:`1:00 PM`,customer:`Karen Taylor`,vehicle:`2022 4Runner SR5`,vin:`...4R22019`,service:`75K Major Service`,advisor:`David Park`,bay:2,cost:549,status:`pending`,upsell:`Extended warranty -- factory coverage ending`,salesOpp:{strength:`strong`,note:`High mileage -- 2025 4Runner or Grand Highlander`}}]},mv=[`Monday`,`Tuesday`,`Wednesday`,`Thursday`,`Friday`];function hv(){let[e,t]=(0,_.useState)(`Monday`),n=pv[e]||[],r=n.reduce((e,t)=>e+t.cost,0),i=n.filter(e=>e.upsell).length,a=n.filter(e=>e.salesOpp).length,o=n.filter(e=>e.status===`confirmed`).length;function s(e){window.dispatchEvent(new CustomEvent(`ta:chatPrompt`,{detail:{message:e}}))}return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Service Schedule`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Weekly service appointments, upsell opportunities, and bay assignments`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>s(`Show me the service upsell opportunities for this week`),style:{background:`linear-gradient(135deg, #7c3aed, #6d28d9)`,color:`white`,border:`none`},children:`AI Upsell Report`})]}),(0,$.jsxs)(`div`,{className:`kpiRow`,style:{marginBottom:`20px`},children:[(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Appointments Today`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:n.length})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Service Revenue`}),(0,$.jsxs)(`div`,{className:`kpiValue`,children:[`$`,r.toLocaleString()]})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Upsell Opportunities`}),(0,$.jsx)(`div`,{className:`kpiValue`,style:{color:i>0?`#d97706`:void 0},children:i})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Sales Opportunities`}),(0,$.jsx)(`div`,{className:`kpiValue`,style:{color:a>0?`#7c3aed`:void 0},children:a})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Confirmed`}),(0,$.jsxs)(`div`,{className:`kpiValue`,children:[o,` / `,n.length]})]})]}),(0,$.jsx)(`div`,{style:{display:`flex`,gap:`0`,marginBottom:`20px`,borderBottom:`2px solid #e2e8f0`},children:mv.map(n=>(0,$.jsx)(`button`,{onClick:()=>t(n),style:{padding:`10px 20px`,fontSize:`14px`,fontWeight:600,border:`none`,borderBottom:e===n?`2px solid #7c3aed`:`2px solid transparent`,background:`transparent`,color:e===n?`#7c3aed`:`#64748b`,cursor:`pointer`,marginBottom:`-2px`},children:n},n))}),(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{className:`tableWrap`,children:(0,$.jsxs)(`table`,{className:`table`,style:{width:`100%`},children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{children:`Time`}),(0,$.jsx)(`th`,{children:`Customer`}),(0,$.jsx)(`th`,{children:`Vehicle`}),(0,$.jsx)(`th`,{children:`Service`}),(0,$.jsx)(`th`,{children:`Advisor`}),(0,$.jsx)(`th`,{children:`Bay`}),(0,$.jsx)(`th`,{children:`Est. Cost`}),(0,$.jsx)(`th`,{children:`Sales Opp`}),(0,$.jsx)(`th`,{children:`Status`})]})}),(0,$.jsx)(`tbody`,{children:n.map((e,t)=>(0,$.jsxs)(`tr`,{style:{cursor:`pointer`},onClick:()=>s(`Tell me about ${e.customer}'s ${e.service} appointment for their ${e.vehicle}`),children:[(0,$.jsx)(`td`,{style:{fontWeight:600,whiteSpace:`nowrap`},children:e.time}),(0,$.jsx)(`td`,{className:`tdStrong`,children:e.customer}),(0,$.jsxs)(`td`,{children:[(0,$.jsx)(`div`,{children:e.vehicle}),(0,$.jsx)(`div`,{style:{fontSize:`11px`,color:`#94a3b8`},children:e.vin})]}),(0,$.jsx)(`td`,{children:e.service}),(0,$.jsx)(`td`,{className:`tdMuted`,children:e.advisor}),(0,$.jsx)(`td`,{style:{textAlign:`center`},children:e.bay}),(0,$.jsx)(`td`,{style:{fontWeight:600},children:e.cost>0?`$${e.cost}`:`Comp`}),(0,$.jsx)(`td`,{children:e.salesOpp?(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`flex-start`,gap:`8px`,cursor:`pointer`},onClick:t=>{t.stopPropagation(),s(`${e.customer} is in for ${e.service} on their ${e.vehicle}. Sales opportunity: ${e.salesOpp.note}. What's the best approach?`)},children:[(0,$.jsx)(`div`,{style:{width:`10px`,height:`10px`,borderRadius:`50%`,flexShrink:0,marginTop:`3px`,background:e.salesOpp.strength===`strong`?`#16a34a`:`#d97706`}}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#334155`,maxWidth:`180px`,lineHeight:1.4},children:e.salesOpp.note})]}):(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{width:`10px`,height:`10px`,borderRadius:`50%`,background:`#e2e8f0`,flexShrink:0}}),(0,$.jsx)(`span`,{style:{color:`#cbd5e1`,fontSize:`12px`},children:`No match`})]})}),(0,$.jsx)(`td`,{children:(0,$.jsx)(`span`,{style:{display:`inline-block`,fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:e.status===`confirmed`?`#dcfce7`:e.status===`in-progress`?`#dbeafe`:`#fef3c7`,color:e.status===`confirmed`?`#16a34a`:e.status===`in-progress`?`#2563eb`:`#d97706`},children:e.status})})]},t))})]})})}),n.filter(e=>e.upsell).length>0&&(0,$.jsxs)(`div`,{style:{marginTop:`20px`},children:[(0,$.jsxs)(`h2`,{style:{fontSize:`18px`,fontWeight:700,marginBottom:`12px`},children:[`Upsell Opportunities -- `,e]}),(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`14px`},children:n.filter(e=>e.upsell).map((e,t)=>(0,$.jsxs)(`div`,{className:`card`,style:{padding:`16px`,borderLeft:`4px solid #d97706`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`15px`,marginBottom:`4px`},children:e.customer}),(0,$.jsxs)(`div`,{style:{fontSize:`13px`,color:`#64748b`,marginBottom:`8px`},children:[e.vehicle,` -- `,e.service]}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`#d97706`,fontWeight:600,marginBottom:`10px`},children:e.upsell}),(0,$.jsx)(`button`,{onClick:()=>s(`${e.customer} is coming in for ${e.service} on their ${e.vehicle}. The upsell opportunity is: ${e.upsell}. Draft a pitch I can use when they arrive.`),style:{padding:`6px 14px`,fontSize:`13px`,fontWeight:600,border:`none`,borderRadius:`8px`,cursor:`pointer`,color:`#fff`,background:`linear-gradient(135deg, #7c3aed, #6d28d9)`},children:`Draft Pitch`})]},t))})]})]})}var gv=[{id:`lead`,label:`Lead`,color:`#64748b`},{id:`contacted`,label:`Contacted`,color:`#2563eb`},{id:`test-drive`,label:`Test Drive`,color:`#7c3aed`},{id:`negotiation`,label:`Negotiation`,color:`#d97706`},{id:`fi-desk`,label:`F&I Desk`,color:`#16a34a`},{id:`sold`,label:`Sold`,color:`#059669`}],_v=[{id:1,customer:`Maria Gonzalez`,vehicle:`2025 Corolla LE`,value:24500,stage:`contacted`,salesperson:`Jake Rivera`,daysInStage:2,notes:`Lease expiring. Cash buyer. Matched to 3 vehicles.`,source:`AI -- Lease Expiring`,assignedTo:{type:`ai`,name:`Alex (AI)`}},{id:2,customer:`Web Lead -- Amanda Liu`,vehicle:`2025 RAV4 XLE`,value:34200,stage:`lead`,salesperson:`Unassigned`,daysInStage:1,notes:`TrueCar lead. Requested quote on RAV4 XLE in Lunar Rock.`,source:`TrueCar`,assignedTo:{type:`ai`,name:`Alex (AI)`}},{id:3,customer:`Robert Chen`,vehicle:`2025 Camry XSE`,value:32800,stage:`test-drive`,salesperson:`Jake Rivera`,daysInStage:1,notes:`Drove Camry XSE and Crown. Leaning XSE. Coming back Saturday.`,source:`Walk-In`,assignedTo:{type:`human`,name:`Jake Rivera`}},{id:4,customer:`Mark Brown`,vehicle:`2025 RAV4 XLE Premium`,value:37500,stage:`negotiation`,salesperson:`Lisa Chen`,daysInStage:3,notes:`Trade-in 2025 Corolla Cross. Approved TMCC Tier 1. Working numbers.`,source:`AI -- Trade-Up`,assignedTo:{type:`human`,name:`Lisa Chen`}},{id:5,customer:`James Mitchell`,vehicle:`2024 Tundra SR5 CrewMax`,value:48900,stage:`fi-desk`,salesperson:`Jake Rivera`,daysInStage:0,notes:`Approved Chase Auto 5.49%. Presenting warranty menu today.`,source:`Referral`,assignedTo:{type:`human`,name:`Jake Rivera`}},{id:6,customer:`Thomas Garcia`,vehicle:`2025 Tacoma TRD Sport`,value:42300,stage:`contacted`,salesperson:`Lisa Chen`,daysInStage:4,notes:`Phone inquiry. Wants to compare with Colorado. Invited for Saturday.`,source:`Phone`,assignedTo:{type:`human`,name:`Lisa Chen`}},{id:7,customer:`Kevin O'Brien`,vehicle:`2022 Ford Explorer XLT (Used)`,value:28500,stage:`negotiation`,salesperson:`Jake Rivera`,daysInStage:2,notes:`Wants $2K off. Stock U30012, 86 days on lot. Room to negotiate.`,source:`Facebook Marketplace`,assignedTo:{type:`human`,name:`Jake Rivera`}},{id:8,customer:`Sandra Lee`,vehicle:`2025 Highlander XLE`,value:42900,stage:`lead`,salesperson:`Unassigned`,daysInStage:0,notes:`Autotrader lead. Requested info on Highlander lease specials.`,source:`Autotrader`,assignedTo:{type:`ai`,name:`Alex (AI)`}},{id:9,customer:`Patricia Adams`,vehicle:`2025 Camry LE`,value:28400,stage:`sold`,salesperson:`Lisa Chen`,daysInStage:0,notes:`Delivered yesterday. Extra Care Gold + GAP added. Great deal.`,source:`AI -- Service Upsell`,assignedTo:{type:`human`,name:`Lisa Chen`}},{id:10,customer:`Daniel Green`,vehicle:`2025 GR86 Premium`,value:33500,stage:`sold`,salesperson:`Jake Rivera`,daysInStage:0,notes:`Cash deal. ToyoGuard added. Enthusiast buyer.`,source:`Walk-In`,assignedTo:{type:`human`,name:`Jake Rivera`}}];function vv(){let[e,t]=(0,_.useState)(null);function n(e){window.dispatchEvent(new CustomEvent(`ta:chatPrompt`,{detail:{message:e}}))}let r=_v.filter(e=>e.stage!==`sold`).reduce((e,t)=>e+t.value,0),i=_v.filter(e=>e.stage===`sold`),a=i.reduce((e,t)=>e+t.value,0);return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Sales Pipeline`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Active deals by stage`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>n(`Give me a pipeline summary. What deals are stalling and what should I prioritize today?`),style:{background:`linear-gradient(135deg, #7c3aed, #6d28d9)`,color:`white`,border:`none`},children:`AI Pipeline Brief`})]}),(0,$.jsxs)(`div`,{className:`kpiRow`,style:{marginBottom:`20px`},children:[(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Active Deals`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:_v.filter(e=>e.stage!==`sold`).length})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Pipeline Value`}),(0,$.jsxs)(`div`,{className:`kpiValue`,children:[`$`,r.toLocaleString()]})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Sold This Month`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:i.length})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Sold Value`}),(0,$.jsxs)(`div`,{className:`kpiValue`,style:{color:`#16a34a`},children:[`$`,a.toLocaleString()]})]})]}),(0,$.jsx)(`div`,{style:{display:`flex`,gap:`12px`,overflowX:`auto`,paddingBottom:`8px`},children:gv.map(e=>{let r=_v.filter(t=>t.stage===e.id),i=r.reduce((e,t)=>e+t.value,0);return(0,$.jsxs)(`div`,{style:{minWidth:`220px`,flex:1},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,marginBottom:`8px`,padding:`0 4px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`6px`},children:[(0,$.jsx)(`div`,{style:{width:`10px`,height:`10px`,borderRadius:`50%`,background:e.color}}),(0,$.jsx)(`span`,{style:{fontSize:`13px`,fontWeight:700,color:`#1e293b`},children:e.label})]}),(0,$.jsx)(`span`,{style:{fontSize:`12px`,color:`#94a3b8`},children:r.length})]}),(0,$.jsxs)(`div`,{style:{fontSize:`12px`,color:`#64748b`,marginBottom:`8px`,padding:`0 4px`},children:[`$`,i.toLocaleString()]}),(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`8px`},children:[r.map(r=>(0,$.jsxs)(`div`,{className:`card`,style:{padding:`12px`,cursor:`pointer`,borderLeft:`3px solid ${e.color}`},onClick:()=>{t(r),n(`Tell me about the ${r.customer} deal for the ${r.vehicle}. Current stage: ${e.label}. What should we do next?`)},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`13px`,marginBottom:`2px`},children:r.customer}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`,marginBottom:`4px`},children:r.vehicle}),(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsxs)(`span`,{style:{fontSize:`14px`,fontWeight:700,color:`#1e293b`},children:[`$`,r.value.toLocaleString()]}),r.daysInStage>3&&(0,$.jsxs)(`span`,{style:{fontSize:`10px`,fontWeight:600,padding:`1px 6px`,borderRadius:`4px`,background:`#fee2e2`,color:`#dc2626`},children:[r.daysInStage,`d`]})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,justifyContent:`space-between`,marginTop:`4px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`11px`,color:`#94a3b8`},children:r.source}),(0,$.jsx)(`span`,{style:{fontSize:`10px`,fontWeight:600,padding:`1px 6px`,borderRadius:`9999px`,background:r.assignedTo?.type===`ai`?`#f3e8ff`:`#f1f5f9`,color:r.assignedTo?.type===`ai`?`#7c3aed`:`#475569`},children:r.assignedTo?.type===`ai`?`AI`:r.assignedTo?.name?.split(` `).map(e=>e[0]).join(``)||r.salesperson.split(` `).map(e=>e[0]).join(``)})]})]},r.id)),r.length===0&&(0,$.jsx)(`div`,{style:{padding:`20px 12px`,textAlign:`center`,fontSize:`12px`,color:`#cbd5e1`,border:`1px dashed #e2e8f0`,borderRadius:`8px`},children:`No deals`})]})]},e.id)})})]})}var yv=[{level:1,name:`Draft Only`,description:`AI prepares everything for your review. No actions taken without your explicit approval.`},{level:2,name:`Low Autonomy`,description:`AI handles routine tasks automatically (under set thresholds). High-value decisions require your approval.`},{level:3,name:`High Autonomy`,description:`AI manages day-to-day operations. You review weekly summaries and approve major decisions.`},{level:4,name:`Full Autopilot`,description:`AI runs all operations autonomously. You receive daily briefings and can override at any time.`}],bv={globalLevel:1,sales:{respondToLeads:1,sendOutboundOffers:1,negotiatePricing:1,maxDiscount:500,scheduleTestDrives:1,generateBuyersOrders:1,maxAutonomousDealValue:35e3},service:{bookAppointments:1,authorizeWarrantyWork:1,maxWarrantyValue:500,sendServiceReminders:1,recommendUpsells:1,scheduleRecallNotifications:1},communication:{sendEmails:!0,emailLevel:1,sendTexts:!0,textLevel:1,makePhoneCalls:!1,dailyMessageLimit:50,disclaimerText:`This message was sent by an AI assistant on behalf of {dealership name}`,quietHoursStart:`21:00`,quietHoursEnd:`08:00`},marketing:{createCampaigns:1,maxCampaignBudget:250,submitCoopClaims:1,manageBudgetReallocation:1},fi:{recommendProducts:1,modelFinancing:1,generateDisclosures:1,maxBundleValue:5e3}};function xv({value:e,onChange:t,size:n=`normal`}){return(0,$.jsx)(`div`,{style:{display:`flex`,gap:`4px`},children:[1,2,3,4].map(r=>(0,$.jsx)(`button`,{onClick:()=>t(r),style:{width:n===`small`?`28px`:`32px`,height:n===`small`?`28px`:`32px`,borderRadius:`6px`,border:e===r?`2px solid #7c3aed`:`1px solid #e2e8f0`,background:e===r?`#f3e8ff`:`white`,color:e===r?`#7c3aed`:`#64748b`,fontWeight:700,fontSize:n===`small`?`12px`:`13px`,cursor:`pointer`},children:r},r))})}function Sv({label:e,levelValue:t,onLevelChange:n,extraLabel:r,extraValue:i,onExtraChange:a,extraType:o}){return(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`,padding:`10px 0`,borderBottom:`1px solid #f1f5f9`},children:[(0,$.jsx)(`div`,{style:{flex:1,fontSize:`14px`,color:`#334155`},children:e}),(0,$.jsx)(xv,{value:t,onChange:n,size:`small`}),r&&(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`6px`},children:[(0,$.jsx)(`span`,{style:{fontSize:`12px`,color:`#94a3b8`},children:r}),o===`toggle`?(0,$.jsx)(`button`,{onClick:()=>a(!i),style:{width:`40px`,height:`22px`,borderRadius:`11px`,border:`none`,cursor:`pointer`,background:i?`#7c3aed`:`#e2e8f0`,position:`relative`,transition:`background 0.2s`},children:(0,$.jsx)(`div`,{style:{width:`18px`,height:`18px`,borderRadius:`50%`,background:`white`,position:`absolute`,top:`2px`,left:i?`20px`:`2px`,transition:`left 0.2s`}})}):(0,$.jsx)(`input`,{type:o===`number`?`number`:`text`,value:i,onChange:e=>a(o===`number`?Number(e.target.value):e.target.value),style:{width:`80px`,padding:`4px 8px`,borderRadius:`6px`,border:`1px solid #e2e8f0`,fontSize:`13px`,textAlign:`right`}})]})]})}function Cv({label:e,enabled:t,onToggle:n,levelValue:r,onLevelChange:i,badge:a}){return(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`,padding:`10px 0`,borderBottom:`1px solid #f1f5f9`},children:[(0,$.jsxs)(`div`,{style:{flex:1,fontSize:`14px`,color:`#334155`},children:[e,a&&(0,$.jsx)(`span`,{style:{marginLeft:`8px`,fontSize:`10px`,fontWeight:600,padding:`2px 6px`,borderRadius:`4px`,background:`#f1f5f9`,color:`#94a3b8`},children:a})]}),(0,$.jsx)(`button`,{onClick:n,disabled:a===`Coming Soon`,style:{width:`40px`,height:`22px`,borderRadius:`11px`,border:`none`,cursor:a?`not-allowed`:`pointer`,background:t?`#7c3aed`:`#e2e8f0`,opacity:a?.5:1,position:`relative`,transition:`background 0.2s`},children:(0,$.jsx)(`div`,{style:{width:`18px`,height:`18px`,borderRadius:`50%`,background:`white`,position:`absolute`,top:`2px`,left:t?`20px`:`2px`,transition:`left 0.2s`}})}),t&&!a&&(0,$.jsx)(xv,{value:r,onChange:i,size:`small`})]})}function wv({title:e,accent:t,children:n,defaultOpen:r=!1}){let[i,a]=(0,_.useState)(r);return(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`12px`,borderLeft:`4px solid ${t}`},children:[(0,$.jsxs)(`div`,{onClick:()=>a(!i),style:{padding:`16px 20px`,cursor:`pointer`,display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`15px`,color:`#1e293b`},children:e}),(0,$.jsx)(`span`,{style:{fontSize:`18px`,color:`#94a3b8`,transform:i?`rotate(180deg)`:`none`,transition:`transform 0.2s`},children:`v`})]}),i&&(0,$.jsx)(`div`,{style:{padding:`0 20px 20px`},children:n})]})}function Tv(){let e=localStorage.getItem(`VERTICAL`)||`auto`,t=localStorage.getItem(`JURISDICTION`)||`FL`,[n,r]=(0,_.useState)(bv),[i,a]=(0,_.useState)(!1),[o,s]=(0,_.useState)(!1);function c(e,t){r(n=>{let r={...n},i=e.split(`.`);return i.length===1?r[i[0]]=t:r[i[0]]={...r[i[0]],[i[1]]:t},r}),s(!1)}async function l(){a(!0);try{let e=localStorage.getItem(`WORKSPACE_ID`)||localStorage.getItem(`TENANT_ID`),t=localStorage.getItem(`ID_TOKEN`);await fetch(`https://titleapp-frontdoor.titleapp-core.workers.dev/api?path=/v1/workspace:updateRules`,{method:`POST`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${t}`,"x-tenant-id":e},body:JSON.stringify({rules:n})}),s(!0),setTimeout(()=>s(!1),3e3)}catch(e){console.error(`Failed to save rules:`,e)}finally{a(!1)}}return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Rules`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Configure AI autonomy levels and operational permissions`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:l,disabled:i,style:{background:`linear-gradient(135deg, #7c3aed, #6d28d9)`,color:`white`,border:`none`,opacity:i?.6:1},children:i?`Saving...`:o?`Saved`:`Save Rules`})]}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`20px`,padding:`24px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`16px`,color:`#1e293b`,marginBottom:`4px`},children:`Global Autonomy Level`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`,marginBottom:`16px`},children:`Set the default behavior for all AI operations. Area-specific settings below can override this.`}),(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(4, 1fr)`,gap:`12px`},children:yv.map(e=>(0,$.jsxs)(`div`,{onClick:()=>c(`globalLevel`,e.level),style:{padding:`16px`,borderRadius:`12px`,border:n.globalLevel===e.level?`2px solid #7c3aed`:`1px solid #e2e8f0`,background:n.globalLevel===e.level?`#faf5ff`:`white`,cursor:`pointer`,transition:`all 0.15s`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`,marginBottom:`8px`},children:[(0,$.jsx)(`div`,{style:{width:`28px`,height:`28px`,borderRadius:`50%`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:n.globalLevel===e.level?`#7c3aed`:`#f1f5f9`,color:n.globalLevel===e.level?`white`:`#64748b`,fontWeight:700,fontSize:`13px`},children:e.level}),(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`14px`,color:n.globalLevel===e.level?`#7c3aed`:`#1e293b`},children:e.name})]}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`,lineHeight:1.5},children:e.description})]},e.level))})]}),(0,$.jsxs)(wv,{title:`Sales Permissions`,accent:`#16a34a`,defaultOpen:!0,children:[(0,$.jsx)(Sv,{label:`Respond to inbound leads`,levelValue:n.sales.respondToLeads,onLevelChange:e=>c(`sales.respondToLeads`,e)}),(0,$.jsx)(Sv,{label:`Send outbound offers`,levelValue:n.sales.sendOutboundOffers,onLevelChange:e=>c(`sales.sendOutboundOffers`,e)}),(0,$.jsx)(Sv,{label:`Negotiate pricing`,levelValue:n.sales.negotiatePricing,onLevelChange:e=>c(`sales.negotiatePricing`,e),extraLabel:`Max discount: $`,extraValue:n.sales.maxDiscount,onExtraChange:e=>c(`sales.maxDiscount`,e),extraType:`number`}),(0,$.jsx)(Sv,{label:`Schedule test drives`,levelValue:n.sales.scheduleTestDrives,onLevelChange:e=>c(`sales.scheduleTestDrives`,e)}),(0,$.jsx)(Sv,{label:`Generate buyer's orders`,levelValue:n.sales.generateBuyersOrders,onLevelChange:e=>c(`sales.generateBuyersOrders`,e)}),(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`,padding:`10px 0`},children:[(0,$.jsx)(`div`,{style:{flex:1,fontSize:`14px`,color:`#334155`},children:`Max autonomous deal value`}),(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`4px`},children:[(0,$.jsx)(`span`,{style:{fontSize:`14px`,color:`#64748b`},children:`$`}),(0,$.jsx)(`input`,{type:`number`,value:n.sales.maxAutonomousDealValue,onChange:e=>c(`sales.maxAutonomousDealValue`,Number(e.target.value)),style:{width:`100px`,padding:`6px 8px`,borderRadius:`6px`,border:`1px solid #e2e8f0`,fontSize:`14px`,textAlign:`right`}})]})]})]}),(0,$.jsxs)(wv,{title:`Service Permissions`,accent:`#2563eb`,children:[(0,$.jsx)(Sv,{label:`Book service appointments`,levelValue:n.service.bookAppointments,onLevelChange:e=>c(`service.bookAppointments`,e)}),(0,$.jsx)(Sv,{label:`Authorize warranty work`,levelValue:n.service.authorizeWarrantyWork,onLevelChange:e=>c(`service.authorizeWarrantyWork`,e),extraLabel:`Max value: $`,extraValue:n.service.maxWarrantyValue,onExtraChange:e=>c(`service.maxWarrantyValue`,e),extraType:`number`}),(0,$.jsx)(Sv,{label:`Send service reminders`,levelValue:n.service.sendServiceReminders,onLevelChange:e=>c(`service.sendServiceReminders`,e)}),(0,$.jsx)(Sv,{label:`Recommend upsells during service`,levelValue:n.service.recommendUpsells,onLevelChange:e=>c(`service.recommendUpsells`,e)}),(0,$.jsx)(Sv,{label:`Schedule recall notifications`,levelValue:n.service.scheduleRecallNotifications,onLevelChange:e=>c(`service.scheduleRecallNotifications`,e)})]}),(0,$.jsxs)(wv,{title:`Communication Permissions`,accent:`#d97706`,children:[(0,$.jsx)(Cv,{label:`Send emails`,enabled:n.communication.sendEmails,onToggle:()=>c(`communication.sendEmails`,!n.communication.sendEmails),levelValue:n.communication.emailLevel,onLevelChange:e=>c(`communication.emailLevel`,e)}),(0,$.jsx)(Cv,{label:`Send text messages`,enabled:n.communication.sendTexts,onToggle:()=>c(`communication.sendTexts`,!n.communication.sendTexts),levelValue:n.communication.textLevel,onLevelChange:e=>c(`communication.textLevel`,e)}),(0,$.jsx)(Cv,{label:`Make phone calls`,enabled:n.communication.makePhoneCalls,onToggle:()=>{},badge:`Coming Soon`}),(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`,padding:`10px 0`,borderBottom:`1px solid #f1f5f9`},children:[(0,$.jsx)(`div`,{style:{flex:1,fontSize:`14px`,color:`#334155`},children:`Daily outbound message limit`}),(0,$.jsx)(`input`,{type:`number`,value:n.communication.dailyMessageLimit,onChange:e=>c(`communication.dailyMessageLimit`,Number(e.target.value)),style:{width:`80px`,padding:`6px 8px`,borderRadius:`6px`,border:`1px solid #e2e8f0`,fontSize:`14px`,textAlign:`right`}})]}),(0,$.jsxs)(`div`,{style:{padding:`10px 0`,borderBottom:`1px solid #f1f5f9`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`#334155`,marginBottom:`6px`},children:`Required disclaimer text`}),(0,$.jsx)(`textarea`,{value:n.communication.disclaimerText,onChange:e=>c(`communication.disclaimerText`,e.target.value),rows:2,style:{width:`100%`,padding:`8px 10px`,borderRadius:`8px`,border:`1px solid #e2e8f0`,fontSize:`13px`,resize:`vertical`,fontFamily:`inherit`}})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`,padding:`10px 0`},children:[(0,$.jsx)(`div`,{style:{flex:1,fontSize:`14px`,color:`#334155`},children:`Quiet hours (no outbound)`}),(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`6px`},children:[(0,$.jsx)(`input`,{type:`time`,value:n.communication.quietHoursStart,onChange:e=>c(`communication.quietHoursStart`,e.target.value),style:{padding:`4px 6px`,borderRadius:`6px`,border:`1px solid #e2e8f0`,fontSize:`13px`}}),(0,$.jsx)(`span`,{style:{color:`#94a3b8`},children:`to`}),(0,$.jsx)(`input`,{type:`time`,value:n.communication.quietHoursEnd,onChange:e=>c(`communication.quietHoursEnd`,e.target.value),style:{padding:`4px 6px`,borderRadius:`6px`,border:`1px solid #e2e8f0`,fontSize:`13px`}})]})]})]}),(0,$.jsxs)(wv,{title:`Marketing Permissions`,accent:`#ec4899`,children:[(0,$.jsx)(Sv,{label:`Create ad campaigns`,levelValue:n.marketing.createCampaigns,onLevelChange:e=>c(`marketing.createCampaigns`,e)}),(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`,padding:`10px 0`,borderBottom:`1px solid #f1f5f9`},children:[(0,$.jsx)(`div`,{style:{flex:1,fontSize:`14px`,color:`#334155`},children:`Max campaign budget without approval`}),(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`4px`},children:[(0,$.jsx)(`span`,{style:{fontSize:`14px`,color:`#64748b`},children:`$`}),(0,$.jsx)(`input`,{type:`number`,value:n.marketing.maxCampaignBudget,onChange:e=>c(`marketing.maxCampaignBudget`,Number(e.target.value)),style:{width:`80px`,padding:`6px 8px`,borderRadius:`6px`,border:`1px solid #e2e8f0`,fontSize:`14px`,textAlign:`right`}})]})]}),(0,$.jsx)(Sv,{label:`Submit co-op reimbursement claims`,levelValue:n.marketing.submitCoopClaims,onLevelChange:e=>c(`marketing.submitCoopClaims`,e)}),(0,$.jsx)(Sv,{label:`Manage channel budget reallocation`,levelValue:n.marketing.manageBudgetReallocation,onLevelChange:e=>c(`marketing.manageBudgetReallocation`,e)})]}),(0,$.jsxs)(wv,{title:`F&I Permissions`,accent:`#7c3aed`,children:[(0,$.jsx)(Sv,{label:`Recommend F&I products to customers`,levelValue:n.fi.recommendProducts,onLevelChange:e=>c(`fi.recommendProducts`,e)}),(0,$.jsx)(Sv,{label:`Model financing options`,levelValue:n.fi.modelFinancing,onLevelChange:e=>c(`fi.modelFinancing`,e)}),(0,$.jsx)(Sv,{label:`Generate F&I disclosure documents`,levelValue:n.fi.generateDisclosures,onLevelChange:e=>c(`fi.generateDisclosures`,e)}),(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`,padding:`10px 0`},children:[(0,$.jsx)(`div`,{style:{flex:1,fontSize:`14px`,color:`#334155`},children:`Max F&I product bundle value to present`}),(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`4px`},children:[(0,$.jsx)(`span`,{style:{fontSize:`14px`,color:`#64748b`},children:`$`}),(0,$.jsx)(`input`,{type:`number`,value:n.fi.maxBundleValue,onChange:e=>c(`fi.maxBundleValue`,Number(e.target.value)),style:{width:`80px`,padding:`6px 8px`,borderRadius:`6px`,border:`1px solid #e2e8f0`,fontSize:`14px`,textAlign:`right`}})]})]})]}),(0,$.jsxs)(`div`,{className:`card`,style:{padding:`20px`,marginTop:`8px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`15px`,color:`#1e293b`,marginBottom:`12px`},children:`Current Configuration`}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`8px`,fontSize:`13px`},children:[(0,$.jsx)(`div`,{style:{color:`#64748b`},children:`Vertical`}),(0,$.jsx)(`div`,{style:{fontWeight:600},children:e}),(0,$.jsx)(`div`,{style:{color:`#64748b`},children:`Jurisdiction`}),(0,$.jsx)(`div`,{style:{fontWeight:600},children:t}),(0,$.jsx)(`div`,{style:{color:`#64748b`},children:`Active RAAS rule files`}),(0,$.jsxs)(`div`,{style:{fontWeight:600},children:[e,`/`,t,`/README.md, data-model.md, ownership.md`]}),(0,$.jsx)(`div`,{style:{color:`#64748b`},children:`Custom rules`}),(0,$.jsx)(`div`,{style:{fontWeight:600,color:`#94a3b8`},children:`None set`})]})]})]})}function Ev({onVerified:e,onClose:t}){let[n,r]=(0,_.useState)(!1),[i,a]=(0,_.useState)(!1);async function o(){r(!0);try{await new Promise(e=>setTimeout(e,2e3));let t=localStorage.getItem(`ID_TOKEN`);await fetch(`https://titleapp-frontdoor.titleapp-core.workers.dev/api?path=/v1/me:update`,{method:`POST`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${t}`},body:JSON.stringify({idVerified:!0,idVerifiedAt:new Date().toISOString()})}),a(!0),setTimeout(()=>e(),1200)}catch(e){console.error(`ID verification failed:`,e),r(!1)}}return(0,$.jsx)(`div`,{style:{position:`fixed`,inset:0,background:`rgba(15, 23, 42, 0.5)`,display:`flex`,alignItems:`center`,justifyContent:`center`,zIndex:9999,fontFamily:`-apple-system, BlinkMacSystemFont, sans-serif`},onClick:e=>{e.target===e.currentTarget&&t()},children:(0,$.jsx)(`div`,{style:{width:`100%`,maxWidth:`440px`,padding:`32px`,background:`white`,borderRadius:`16px`,border:`1px solid #e5e7eb`,boxShadow:`0 20px 40px rgba(0, 0, 0, 0.15)`,textAlign:`center`},children:i?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{style:{fontSize:`48px`,marginBottom:`16px`},children:``}),(0,$.jsx)(`h3`,{style:{margin:`0 0 8px 0`,fontSize:`20px`,fontWeight:700},children:`Identity Verified`}),(0,$.jsx)(`p`,{style:{margin:0,color:`#6b7280`,fontSize:`14px`},children:`Completing your request...`})]}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`h3`,{style:{margin:`0 0 8px 0`,fontSize:`20px`,fontWeight:700},children:`Identity Verification Required`}),(0,$.jsx)(`p`,{style:{margin:`0 0 24px 0`,color:`#6b7280`,fontSize:`14px`,lineHeight:1.5},children:`Publishing records requires a verified identity. Quick check, $2, takes about a minute. Valid for one year.`}),(0,$.jsxs)(`div`,{style:{display:`grid`,gap:`10px`},children:[(0,$.jsx)(`button`,{onClick:o,disabled:n,style:{padding:`12px`,fontSize:`14px`,fontWeight:600,background:n?`#9ca3af`:`rgb(124, 58, 237)`,color:`white`,border:`none`,borderRadius:`8px`,cursor:n?`not-allowed`:`pointer`},children:n?`Verifying...`:`Verify Now`}),(0,$.jsx)(`button`,{onClick:t,disabled:n,style:{padding:`12px`,fontSize:`14px`,background:`transparent`,border:`1px solid #e5e7eb`,borderRadius:`8px`,cursor:n?`not-allowed`:`pointer`,color:`#6b7280`},children:`Not now`})]})]})})})}function Dv(e,t){return e===`vehicle`?!0:parseFloat(String(t?.estimatedValue||`0`).replace(/[$,]/g,``))>5e3}function Ov(){let[e,t]=(0,_.useState)(!1),[n,r]=(0,_.useState)(null);async function i(){let e=Os(),t=Ch(),n=e.currentUser;if(!n)return!1;try{let e=await gg(vh(t,`users`,n.uid));if(!e.exists())return!1;let r=e.data();if(!r.idVerified)return!1;if(r.idVerifiedAt){let e=new Date(r.idVerifiedAt);if((new Date().getTime()-e.getTime())/(1e3*60*60*24)>365)return!1}return!0}catch{return!1}}async function a(e,n,a){if(!Dv(e,n)){a();return}await i()?a():(r(()=>a),t(!0))}function o(){t(!1),n&&(n(),r(null))}function s(){t(!1),r(null)}return{showModal:e,gateAction:a,onVerified:o,onClose:s,checkIdVerification:i}}var kv=`AL.AK.AZ.AR.CA.CO.CT.DE.DC.FL.GA.HI.ID.IL.IN.IA.KS.KY.LA.ME.MD.MA.MI.MN.MS.MO.MT.NE.NV.NH.NJ.NM.NY.NC.ND.OH.OK.OR.PA.RI.SC.SD.TN.TX.UT.VT.VA.WA.WV.WI.WY.AS.GU.MP.PR.VI`.split(`.`),Av={year:``,make:``,model:``,color:``,vin:``,plate:``,state:``,purchaseDate:``,lender:``,mileage:``,attested:!1},jv={black:`#1e293b`,white:`#e2e8f0`,silver:`#94a3b8`,gray:`#64748b`,grey:`#64748b`,red:`#dc2626`,blue:`#2563eb`,green:`#16a34a`,yellow:`#eab308`,orange:`#ea580c`,brown:`#92400e`,gold:`#d97706`,beige:`#d4c5a9`,purple:`#7c3aed`,pink:`#ec4899`};function Mv(e){if(!e)return``;let t=e.toDate?e.toDate():e._seconds?new Date(e._seconds*1e3):new Date(e);return isNaN(t.getTime())?``:t.toLocaleDateString(`en-US`,{month:`short`,day:`numeric`,year:`numeric`})}function Nv(e){return e?Number(String(e).replace(/,/g,``)).toLocaleString():``}function Pv(){let[e,t]=(0,_.useState)([]),[n,r]=(0,_.useState)(!0),[i,a]=(0,_.useState)(!1),[o,s]=(0,_.useState)(Av),[c,l]=(0,_.useState)(!1),[u,d]=(0,_.useState)(null),{showModal:f,gateAction:p,onVerified:m,onClose:h}=Ov();(0,_.useEffect)(()=>{g()},[]);async function g(){try{t(((await Yg({vertical:`consumer`,jurisdiction:`GLOBAL`})).inventory||[]).filter(e=>(e.metadata?.vin||e.metadata?.make)&&(e.metadata?.title||e.metadata?.make)))}catch(e){console.error(`Failed to load vehicles:`,e)}finally{r(!1)}}function v(e){window.dispatchEvent(new CustomEvent(`ta:chatPrompt`,{detail:{message:`Tell me about my ${e.metadata?.year||``} ${e.metadata?.make||``} ${e.metadata?.model||``}`.trim()}}))}async function y(e){if(window.confirm(`Delete this vehicle record?`))try{await Qg({vertical:`consumer`,jurisdiction:`GLOBAL`,id:e}),d(`Record deleted`),setTimeout(()=>d(null),3e3),t(t=>t.filter(t=>t.id!==e))}catch(e){console.error(`Failed to delete:`,e),d(`Failed to delete  `+(e.message||`try again`)),setTimeout(()=>d(null),4e3)}}function b(e){e.preventDefault(),!(!o.make&&!o.vin)&&p(`vehicle`,{},x)}async function x(){l(!0);try{let e=await Xg({vertical:`consumer`,jurisdiction:`GLOBAL`,item:{type:`vehicle`,status:`active`,metadata:{title:`${o.year} ${o.make} ${o.model}`.trim()||`Vehicle`,year:o.year,make:o.make,model:o.model,color:o.color,vin:o.vin,plate:o.plate,stateRegistered:o.state,purchaseDate:o.purchaseDate,lender:o.lender,mileage:o.mileage},price:0,cost:0}});o.attested&&e.dtcId&&await $g({vertical:`consumer`,jurisdiction:`GLOBAL`,dtcId:e.dtcId}),a(!1),s(Av),d(`Vehicle added`),setTimeout(()=>d(null),3e3),r(!0),await g()}catch(e){console.error(`Failed to create vehicle:`,e),d(`Failed to save  `+(e.message||`try again`)),setTimeout(()=>d(null),4e3)}finally{l(!1)}}let S={width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},C={...S,background:`white`};function w(e){return e&&jv[e.toLowerCase()]||`#7c3aed`}return(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`pageHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`My Vehicles`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Your verified vehicle records`})]})}),u&&(0,$.jsx)(`div`,{style:{padding:`10px 16px`,marginBottom:`12px`,borderRadius:`10px`,background:u.startsWith(`Failed`)?`#fef2f2`:`#f0fdf4`,color:u.startsWith(`Failed`)?`#dc2626`:`#16a34a`,fontSize:`14px`,fontWeight:500},children:u}),n?(0,$.jsx)(`div`,{className:`card`,style:{padding:`24px`,textAlign:`center`},children:`Loading vehicles...`}):e.length===0?(0,$.jsxs)(`div`,{className:`card`,style:{padding:`48px 32px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{width:`64px`,height:`64px`,borderRadius:`16px`,background:`linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%)`,display:`flex`,alignItems:`center`,justifyContent:`center`,margin:`0 auto 20px`},children:(0,$.jsxs)(`svg`,{width:`28`,height:`28`,viewBox:`0 0 24 24`,fill:`none`,stroke:`#3b82f6`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,$.jsx)(`path`,{d:`M5 17h14v-6l-2-5H7L5 11v6z`}),(0,$.jsx)(`circle`,{cx:`7.5`,cy:`17.5`,r:`1.5`}),(0,$.jsx)(`circle`,{cx:`16.5`,cy:`17.5`,r:`1.5`})]})}),(0,$.jsx)(`div`,{style:{fontSize:`18px`,fontWeight:600,color:`#1e293b`,marginBottom:`10px`},children:`Add your first vehicle`}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`#64748b`,maxWidth:`420px`,margin:`0 auto 24px`,lineHeight:`1.6`},children:`Track titles, registration, service history, and insurance all in one place. Your vehicle records are verified and permanent.`}),(0,$.jsx)(`button`,{onClick:()=>a(!0),style:{padding:`12px 28px`,background:`linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%)`,color:`white`,border:`none`,borderRadius:`12px`,fontSize:`14px`,fontWeight:600,cursor:`pointer`},children:`Add Vehicle`})]}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{style:{marginBottom:`12px`},children:(0,$.jsx)(`button`,{onClick:()=>a(!0),style:{padding:`10px 20px`,background:`linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%)`,color:`white`,border:`none`,borderRadius:`10px`,fontSize:`13px`,fontWeight:600,cursor:`pointer`},children:`+ Add Vehicle`})}),(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(auto-fill, minmax(320px, 1fr))`,gap:`12px`},children:e.map(e=>{let t=w(e.metadata?.color),n=[`white`,`beige`,`silver`,`yellow`].includes((e.metadata?.color||``).toLowerCase());return(0,$.jsxs)(`div`,{className:`card`,style:{position:`relative`,overflow:`hidden`},children:[(0,$.jsxs)(`div`,{style:{height:`100px`,background:e.imageUrl?`none`:`linear-gradient(135deg, ${t}18 0%, ${t}08 100%)`,display:`flex`,alignItems:`center`,justifyContent:`center`,position:`relative`,overflow:`hidden`},children:[e.imageUrl?(0,$.jsx)(`img`,{src:e.imageUrl,alt:e.metadata?.title||`Vehicle`,style:{width:`100%`,height:`100%`,objectFit:`cover`}}):(0,$.jsxs)(`svg`,{width:`48`,height:`48`,viewBox:`0 0 24 24`,fill:`none`,stroke:n?`#64748b`:t,strokeWidth:`1.5`,strokeLinecap:`round`,strokeLinejoin:`round`,style:{opacity:.7},children:[(0,$.jsx)(`path`,{d:`M5 17h14v-6l-2-5H7L5 11v6z`}),(0,$.jsx)(`circle`,{cx:`7.5`,cy:`17.5`,r:`1.5`}),(0,$.jsx)(`circle`,{cx:`16.5`,cy:`17.5`,r:`1.5`})]}),(0,$.jsx)(`button`,{onClick:()=>y(e.id),style:{position:`absolute`,top:`8px`,right:`8px`,background:`white`,border:`1px solid #e5e7eb`,borderRadius:`8px`,width:`28px`,height:`28px`,display:`flex`,alignItems:`center`,justifyContent:`center`,cursor:`pointer`,color:`#94a3b8`,fontSize:`14px`},title:`Delete`,children:(0,$.jsxs)(`svg`,{width:`14`,height:`14`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,$.jsx)(`polyline`,{points:`3 6 5 6 21 6`}),(0,$.jsx)(`path`,{d:`M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2`})]})}),(0,$.jsx)(`span`,{style:{position:`absolute`,bottom:`8px`,right:`10px`,fontSize:`11px`,fontWeight:600,padding:`3px 10px`,borderRadius:`20px`,background:`${t}20`,color:n?`#64748b`:t},children:`Vehicle`})]}),(0,$.jsxs)(`div`,{style:{padding:`14px 20px 4px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`16px`,color:`#1e293b`},children:e.metadata?.title||`${e.metadata?.year||``} ${e.metadata?.make||``} ${e.metadata?.model||``}`.trim()||`Vehicle`}),e.metadata?.color&&(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`,marginTop:`2px`},children:e.metadata.color})]}),(0,$.jsxs)(`div`,{style:{padding:`8px 20px 12px`},children:[e.metadata?.vin&&(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,padding:`3px 0`,fontSize:`13px`},children:[(0,$.jsx)(`span`,{style:{color:`#64748b`},children:`VIN`}),(0,$.jsx)(`span`,{style:{fontWeight:500,color:`#1e293b`,fontFamily:`monospace`,fontSize:`12px`},children:e.metadata.vin})]}),e.metadata?.mileage&&(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,padding:`3px 0`,fontSize:`13px`},children:[(0,$.jsx)(`span`,{style:{color:`#64748b`},children:`Mileage`}),(0,$.jsx)(`span`,{style:{fontWeight:500,color:`#1e293b`},children:Nv(e.metadata.mileage)})]}),e.metadata?.plate&&(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,padding:`3px 0`,fontSize:`13px`},children:[(0,$.jsx)(`span`,{style:{color:`#64748b`},children:`Plate`}),(0,$.jsxs)(`span`,{style:{fontWeight:500,color:`#1e293b`},children:[e.metadata.plate,` `,e.metadata.stateRegistered||``]})]}),e.metadata?.lender&&(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,padding:`3px 0`,fontSize:`13px`},children:[(0,$.jsx)(`span`,{style:{color:`#64748b`},children:`Lender`}),(0,$.jsx)(`span`,{style:{fontWeight:500,color:`#1e293b`},children:e.metadata.lender})]}),Mv(e.createdAt)&&(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,padding:`3px 0`,fontSize:`13px`},children:[(0,$.jsx)(`span`,{style:{color:`#64748b`},children:`Added`}),(0,$.jsx)(`span`,{style:{fontWeight:500,color:`#1e293b`},children:Mv(e.createdAt)})]})]}),(0,$.jsxs)(`div`,{style:{padding:`10px 20px 14px`,borderTop:`1px solid #f1f5f9`,display:`flex`,gap:`8px`},children:[(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>v(e),style:{flex:1,fontSize:`13px`},children:`Ask AI`}),(0,$.jsx)(`span`,{className:`badge badge-${e.status||`active`}`,style:{display:`flex`,alignItems:`center`},children:e.status||`Active`})]})]},e.id)})})]}),(0,$.jsx)(R_,{isOpen:i,onClose:()=>a(!1),title:`Add Vehicle`,onSubmit:b,submitLabel:c?`Saving...`:`Save Vehicle`,children:(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:[(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr 1fr`,gap:`10px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Year`}),(0,$.jsx)(`input`,{type:`text`,value:o.year,onChange:e=>s({...o,year:e.target.value}),placeholder:`2024`,style:S})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Make`}),(0,$.jsx)(`input`,{type:`text`,value:o.make,onChange:e=>s({...o,make:e.target.value}),placeholder:`Toyota`,style:S})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Model`}),(0,$.jsx)(`input`,{type:`text`,value:o.model,onChange:e=>s({...o,model:e.target.value}),placeholder:`Camry`,style:S})]})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`10px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Color`}),(0,$.jsx)(`input`,{type:`text`,value:o.color,onChange:e=>s({...o,color:e.target.value}),style:S})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Mileage`}),(0,$.jsx)(`input`,{type:`text`,value:o.mileage?Number(String(o.mileage).replace(/,/g,``)).toLocaleString():``,onChange:e=>s({...o,mileage:e.target.value.replace(/,/g,``)}),placeholder:`e.g., 45,000`,style:S})]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`VIN (optional)`}),(0,$.jsx)(`input`,{type:`text`,value:o.vin,onChange:e=>s({...o,vin:e.target.value}),placeholder:`17 characters`,style:S})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr 1fr`,gap:`10px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`License Plate`}),(0,$.jsx)(`input`,{type:`text`,value:o.plate,onChange:e=>s({...o,plate:e.target.value}),style:S})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`State`}),(0,$.jsxs)(`select`,{value:o.state,onChange:e=>s({...o,state:e.target.value}),style:C,children:[(0,$.jsx)(`option`,{value:``,children:`--`}),kv.map(e=>(0,$.jsx)(`option`,{value:e,children:e},e))]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Purchase Date`}),(0,$.jsx)(`input`,{type:`date`,value:o.purchaseDate,onChange:e=>s({...o,purchaseDate:e.target.value}),style:S})]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Lender / Finance Co. (optional)`}),(0,$.jsx)(`input`,{type:`text`,value:o.lender,onChange:e=>s({...o,lender:e.target.value}),style:S})]}),(0,$.jsx)(`div`,{style:{marginTop:`4px`,padding:`12px`,background:`#f8fafc`,borderRadius:`10px`,border:`1px solid #e2e8f0`},children:(0,$.jsxs)(`label`,{style:{display:`flex`,alignItems:`flex-start`,gap:`10px`,cursor:`pointer`,fontSize:`13px`,color:`#475569`,lineHeight:1.5},children:[(0,$.jsx)(`input`,{type:`checkbox`,checked:o.attested,onChange:e=>s({...o,attested:e.target.checked}),style:{marginTop:`3px`,flexShrink:0}}),`I represent that I am the lawful owner of this vehicle and that the information provided is accurate to the best of my knowledge.`]})})]})}),f&&(0,$.jsx)(Ev,{onVerified:m,onClose:h})]})}var Fv={address:``,address2:``,city:``,state:``,zip:``,ownershipType:`Own`,propertyType:`House`,monthlyPayment:``,company:``,endDate:``,term:``,interestRate:``,attested:!1},Iv=`AL.AK.AZ.AR.CA.CO.CT.DE.DC.FL.GA.HI.ID.IL.IN.IA.KS.KY.LA.ME.MD.MA.MI.MN.MS.MO.MT.NE.NV.NH.NJ.NM.NY.NC.ND.OH.OK.OR.PA.RI.SC.SD.TN.TX.UT.VT.VA.WA.WV.WI.WY`.split(`.`);function Lv(e){if(!e)return``;let t=e.toDate?e.toDate():e._seconds?new Date(e._seconds*1e3):new Date(e);return isNaN(t.getTime())?``:t.toLocaleDateString(`en-US`,{month:`short`,day:`numeric`,year:`numeric`})}function Rv(e){return e?`$`+Number(String(e).replace(/[$,]/g,``)).toLocaleString():``}function zv(){let[e,t]=(0,_.useState)([]),[n,r]=(0,_.useState)(!0),[i,a]=(0,_.useState)(!1),[o,s]=(0,_.useState)(Fv),[c,l]=(0,_.useState)(!1),[u,d]=(0,_.useState)(null);(0,_.useEffect)(()=>{f()},[]);async function f(){try{t(((await Yg({vertical:`consumer`,jurisdiction:`GLOBAL`})).inventory||[]).filter(e=>(e.type===`property`||e.metadata?.address||e.metadata?.propertyType)&&(e.metadata?.title||e.metadata?.address)))}catch(e){console.error(`Failed to load properties:`,e)}finally{r(!1)}}async function p(e){if(window.confirm(`Delete this property record?`))try{await Qg({vertical:`consumer`,jurisdiction:`GLOBAL`,id:e}),d(`Record deleted`),setTimeout(()=>d(null),3e3),t(t=>t.filter(t=>t.id!==e))}catch(e){console.error(`Failed to delete:`,e),d(`Failed to delete  `+(e.message||`try again`)),setTimeout(()=>d(null),4e3)}}async function m(e){if(e.preventDefault(),o.address){l(!0);try{let e=[o.address,o.address2,o.city,o.state,o.zip].filter(Boolean).join(`, `),t=await Xg({vertical:`consumer`,jurisdiction:`GLOBAL`,item:{type:`property`,status:`active`,metadata:{title:e||o.address,address:e||o.address,address2:o.address2,city:o.city,stateCode:o.state,zip:o.zip,ownershipType:o.ownershipType,propertyType:o.propertyType,monthlyPayment:o.monthlyPayment.replace(/[$,]/g,``),company:o.company,endDate:o.endDate,term:o.term,interestRate:o.interestRate},price:0,cost:0}});o.attested&&t.dtcId&&await $g({vertical:`consumer`,jurisdiction:`GLOBAL`,dtcId:t.dtcId}),a(!1),s(Fv),d(`Property added`),setTimeout(()=>d(null),3e3),r(!0),await f()}catch(e){console.error(`Failed to create property:`,e),d(`Failed to save  `+(e.message||`try again`)),setTimeout(()=>d(null),4e3)}finally{l(!1)}}}let h={width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},g={...h,background:`white`};function v(e){return e===`Own`||e===`Mortgage`?`#16a34a`:e===`Rent`||e===`Lease`?`#2563eb`:`#64748b`}return(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`pageHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`My Properties`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Your verified property records`})]})}),u&&(0,$.jsx)(`div`,{style:{padding:`10px 16px`,marginBottom:`12px`,borderRadius:`10px`,background:u.startsWith(`Failed`)?`#fef2f2`:`#f0fdf4`,color:u.startsWith(`Failed`)?`#dc2626`:`#16a34a`,fontSize:`14px`,fontWeight:500},children:u}),n?(0,$.jsx)(`div`,{className:`card`,style:{padding:`24px`,textAlign:`center`},children:`Loading properties...`}):e.length===0?(0,$.jsxs)(`div`,{className:`card`,style:{padding:`48px 32px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{width:`64px`,height:`64px`,borderRadius:`16px`,background:`linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%)`,display:`flex`,alignItems:`center`,justifyContent:`center`,margin:`0 auto 20px`},children:(0,$.jsxs)(`svg`,{width:`28`,height:`28`,viewBox:`0 0 24 24`,fill:`none`,stroke:`#16a34a`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,$.jsx)(`path`,{d:`M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z`}),(0,$.jsx)(`polyline`,{points:`9 22 9 12 15 12 15 22`})]})}),(0,$.jsx)(`div`,{style:{fontSize:`18px`,fontWeight:600,color:`#1e293b`,marginBottom:`10px`},children:`Add your first property`}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`#64748b`,maxWidth:`420px`,margin:`0 auto 24px`,lineHeight:`1.6`},children:`Keep track of deeds, leases, mortgage info, tax records, and insurance for every property -- owned or rented.`}),(0,$.jsx)(`button`,{onClick:()=>a(!0),style:{padding:`12px 28px`,background:`linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%)`,color:`white`,border:`none`,borderRadius:`12px`,fontSize:`14px`,fontWeight:600,cursor:`pointer`},children:`Add Property`})]}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{style:{marginBottom:`12px`},children:(0,$.jsx)(`button`,{onClick:()=>a(!0),style:{padding:`10px 20px`,background:`linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%)`,color:`white`,border:`none`,borderRadius:`10px`,fontSize:`13px`,fontWeight:600,cursor:`pointer`},children:`+ Add Property`})}),(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(auto-fill, minmax(320px, 1fr))`,gap:`12px`},children:e.map(e=>{let t=v(e.metadata?.ownershipType);return(0,$.jsxs)(`div`,{className:`card`,style:{position:`relative`,overflow:`hidden`},children:[(0,$.jsxs)(`div`,{style:{height:`100px`,background:e.imageUrl?`none`:`linear-gradient(135deg, ${t}12 0%, ${t}06 100%)`,display:`flex`,alignItems:`center`,justifyContent:`center`,position:`relative`,overflow:`hidden`},children:[e.imageUrl?(0,$.jsx)(`img`,{src:e.imageUrl,alt:e.metadata?.title||`Property`,style:{width:`100%`,height:`100%`,objectFit:`cover`}}):(0,$.jsxs)(`svg`,{width:`48`,height:`48`,viewBox:`0 0 24 24`,fill:`none`,stroke:t,strokeWidth:`1.5`,strokeLinecap:`round`,strokeLinejoin:`round`,style:{opacity:.6},children:[(0,$.jsx)(`path`,{d:`M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z`}),(0,$.jsx)(`polyline`,{points:`9 22 9 12 15 12 15 22`})]}),(0,$.jsx)(`button`,{onClick:()=>p(e.id),style:{position:`absolute`,top:`8px`,right:`8px`,background:`white`,border:`1px solid #e5e7eb`,borderRadius:`8px`,width:`28px`,height:`28px`,display:`flex`,alignItems:`center`,justifyContent:`center`,cursor:`pointer`,color:`#94a3b8`,fontSize:`14px`},title:`Delete`,children:(0,$.jsxs)(`svg`,{width:`14`,height:`14`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,$.jsx)(`polyline`,{points:`3 6 5 6 21 6`}),(0,$.jsx)(`path`,{d:`M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2`})]})}),(0,$.jsx)(`span`,{style:{position:`absolute`,bottom:`8px`,right:`10px`,fontSize:`11px`,fontWeight:600,padding:`3px 10px`,borderRadius:`20px`,background:`${t}20`,color:t},children:e.metadata?.propertyType||`Property`})]}),(0,$.jsxs)(`div`,{style:{padding:`14px 20px 4px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`16px`,color:`#1e293b`},children:e.metadata?.title||e.metadata?.address||`Property`}),(0,$.jsxs)(`div`,{style:{fontSize:`13px`,color:`#64748b`,marginTop:`2px`},children:[e.metadata?.ownershipType||``,e.metadata?.company?` -- ${e.metadata.company}`:``]})]}),(0,$.jsxs)(`div`,{style:{padding:`8px 20px 12px`},children:[e.metadata?.monthlyPayment&&(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,padding:`3px 0`,fontSize:`13px`},children:[(0,$.jsx)(`span`,{style:{color:`#64748b`},children:`Monthly`}),(0,$.jsx)(`span`,{style:{fontWeight:500,color:`#1e293b`},children:Rv(e.metadata.monthlyPayment)})]}),e.metadata?.endDate&&(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,padding:`3px 0`,fontSize:`13px`},children:[(0,$.jsx)(`span`,{style:{color:`#64748b`},children:`End Date`}),(0,$.jsx)(`span`,{style:{fontWeight:500,color:`#1e293b`},children:e.metadata.endDate})]}),Lv(e.createdAt)&&(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,padding:`3px 0`,fontSize:`13px`},children:[(0,$.jsx)(`span`,{style:{color:`#64748b`},children:`Added`}),(0,$.jsx)(`span`,{style:{fontWeight:500,color:`#1e293b`},children:Lv(e.createdAt)})]})]}),(0,$.jsx)(`div`,{style:{padding:`10px 20px 14px`,borderTop:`1px solid #f1f5f9`,display:`flex`,gap:`8px`},children:(0,$.jsx)(`span`,{className:`badge badge-${e.status||`active`}`,style:{display:`flex`,alignItems:`center`},children:e.status||`Active`})})]},e.id)})})]}),(0,$.jsx)(R_,{isOpen:i,onClose:()=>a(!1),title:`Add Property`,onSubmit:m,submitLabel:c?`Saving...`:`Save Property`,children:(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Street Address`}),(0,$.jsx)(`input`,{type:`text`,value:o.address,onChange:e=>s({...o,address:e.target.value}),placeholder:`123 Main St`,style:h,required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Apt / Unit (optional)`}),(0,$.jsx)(`input`,{type:`text`,value:o.address2,onChange:e=>s({...o,address2:e.target.value}),placeholder:`Apt 4B`,style:h})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`2fr 1fr 1fr`,gap:`10px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`City`}),(0,$.jsx)(`input`,{type:`text`,value:o.city,onChange:e=>s({...o,city:e.target.value}),placeholder:`Chicago`,style:h})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`State`}),(0,$.jsxs)(`select`,{value:o.state,onChange:e=>s({...o,state:e.target.value}),style:g,children:[(0,$.jsx)(`option`,{value:``,children:`--`}),Iv.map(e=>(0,$.jsx)(`option`,{value:e,children:e},e))]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Zip`}),(0,$.jsx)(`input`,{type:`text`,value:o.zip,onChange:e=>s({...o,zip:e.target.value}),placeholder:`60601`,maxLength:10,style:h})]})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`10px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Ownership`}),(0,$.jsxs)(`select`,{value:o.ownershipType,onChange:e=>s({...o,ownershipType:e.target.value}),style:g,children:[(0,$.jsx)(`option`,{value:`Own`,children:`Own`}),(0,$.jsx)(`option`,{value:`Rent`,children:`Rent`}),(0,$.jsx)(`option`,{value:`Lease`,children:`Lease`})]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Property Type`}),(0,$.jsxs)(`select`,{value:o.propertyType,onChange:e=>s({...o,propertyType:e.target.value}),style:g,children:[(0,$.jsx)(`option`,{value:`House`,children:`House`}),(0,$.jsx)(`option`,{value:`Apartment`,children:`Apartment`}),(0,$.jsx)(`option`,{value:`Condo`,children:`Condo`}),(0,$.jsx)(`option`,{value:`Townhouse`,children:`Townhouse`}),(0,$.jsx)(`option`,{value:`Commercial`,children:`Commercial`}),(0,$.jsx)(`option`,{value:`Land`,children:`Land`}),(0,$.jsx)(`option`,{value:`Other`,children:`Other`})]})]})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`10px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Monthly Payment`}),(0,$.jsx)(`input`,{type:`text`,value:o.monthlyPayment?`$`+Number(String(o.monthlyPayment).replace(/[$,]/g,``)).toLocaleString():``,onChange:e=>s({...o,monthlyPayment:e.target.value.replace(/[$,]/g,``)}),placeholder:`$3,500`,style:h})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Lease / Mortgage Term`}),(0,$.jsxs)(`select`,{value:o.term,onChange:e=>s({...o,term:e.target.value}),style:g,children:[(0,$.jsx)(`option`,{value:``,children:`--`}),(0,$.jsx)(`option`,{value:`6 months`,children:`6 Months`}),(0,$.jsx)(`option`,{value:`1 year`,children:`1 Year`}),(0,$.jsx)(`option`,{value:`2 years`,children:`2 Years`}),(0,$.jsx)(`option`,{value:`5 years`,children:`5 Years`}),(0,$.jsx)(`option`,{value:`15 years`,children:`15 Years`}),(0,$.jsx)(`option`,{value:`30 years`,children:`30 Years`}),(0,$.jsx)(`option`,{value:`other`,children:`Other`})]})]})]}),o.ownershipType===`Own`&&(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Interest Rate % (optional)`}),(0,$.jsx)(`input`,{type:`number`,step:`0.01`,value:o.interestRate,onChange:e=>s({...o,interestRate:e.target.value}),placeholder:`6.5`,style:h})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`10px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`End Date`}),(0,$.jsx)(`input`,{type:`date`,value:o.endDate,onChange:e=>s({...o,endDate:e.target.value}),style:h})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Landlord / Mortgage Co.`}),(0,$.jsx)(`input`,{type:`text`,value:o.company,onChange:e=>s({...o,company:e.target.value}),style:h})]})]}),(0,$.jsx)(`div`,{style:{marginTop:`4px`,padding:`12px`,background:`#f8fafc`,borderRadius:`10px`,border:`1px solid #e2e8f0`},children:(0,$.jsxs)(`label`,{style:{display:`flex`,alignItems:`flex-start`,gap:`10px`,cursor:`pointer`,fontSize:`13px`,color:`#475569`,lineHeight:1.5},children:[(0,$.jsx)(`input`,{type:`checkbox`,checked:o.attested,onChange:e=>s({...o,attested:e.target.checked}),style:{marginTop:`3px`,flexShrink:0}}),`I represent that I am the lawful owner or authorized tenant of this property and that the information provided is accurate to the best of my knowledge.`]})})]})})]})}var Bv={name:``,category:`Document`,description:``,estimatedValue:``,attested:!1},Vv={Jewelry:{color:`#d97706`,icon:e=>(0,$.jsx)(`svg`,{width:`48`,height:`48`,viewBox:`0 0 24 24`,fill:`none`,stroke:e,strokeWidth:`1.5`,strokeLinecap:`round`,strokeLinejoin:`round`,style:{opacity:.6},children:(0,$.jsx)(`polygon`,{points:`12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2`})})},Artwork:{color:`#7c3aed`,icon:e=>(0,$.jsxs)(`svg`,{width:`48`,height:`48`,viewBox:`0 0 24 24`,fill:`none`,stroke:e,strokeWidth:`1.5`,strokeLinecap:`round`,strokeLinejoin:`round`,style:{opacity:.6},children:[(0,$.jsx)(`circle`,{cx:`13.5`,cy:`6.5`,r:`2.5`}),(0,$.jsx)(`path`,{d:`M17.5 10c2 0 3.5 1.5 3.5 3.5S19.5 17 17.5 17c-1 0-1.87-.5-2.5-1.21`}),(0,$.jsx)(`path`,{d:`M3 19.78C3 16.56 5.56 14 8.78 14H12v3.78C12 20.98 9.98 23 6.78 23 4.56 23 3 21.22 3 19.78z`}),(0,$.jsx)(`path`,{d:`M12 14v-4`}),(0,$.jsx)(`circle`,{cx:`12`,cy:`8`,r:`2`})]})},Collectible:{color:`#f59e0b`,icon:e=>(0,$.jsx)(`svg`,{width:`48`,height:`48`,viewBox:`0 0 24 24`,fill:`none`,stroke:e,strokeWidth:`1.5`,strokeLinecap:`round`,strokeLinejoin:`round`,style:{opacity:.6},children:(0,$.jsx)(`polygon`,{points:`12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2`})})},"Family Heirloom":{color:`#ec4899`,icon:e=>(0,$.jsx)(`svg`,{width:`48`,height:`48`,viewBox:`0 0 24 24`,fill:`none`,stroke:e,strokeWidth:`1.5`,strokeLinecap:`round`,strokeLinejoin:`round`,style:{opacity:.6},children:(0,$.jsx)(`path`,{d:`M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z`})})},Document:{color:`#6366f1`,icon:e=>(0,$.jsxs)(`svg`,{width:`48`,height:`48`,viewBox:`0 0 24 24`,fill:`none`,stroke:e,strokeWidth:`1.5`,strokeLinecap:`round`,strokeLinejoin:`round`,style:{opacity:.6},children:[(0,$.jsx)(`path`,{d:`M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z`}),(0,$.jsx)(`polyline`,{points:`14 2 14 8 20 8`}),(0,$.jsx)(`line`,{x1:`16`,y1:`13`,x2:`8`,y2:`13`}),(0,$.jsx)(`line`,{x1:`16`,y1:`17`,x2:`8`,y2:`17`})]})},Electronics:{color:`#0ea5e9`,icon:e=>(0,$.jsxs)(`svg`,{width:`48`,height:`48`,viewBox:`0 0 24 24`,fill:`none`,stroke:e,strokeWidth:`1.5`,strokeLinecap:`round`,strokeLinejoin:`round`,style:{opacity:.6},children:[(0,$.jsx)(`rect`,{x:`5`,y:`2`,width:`14`,height:`20`,rx:`2`,ry:`2`}),(0,$.jsx)(`line`,{x1:`12`,y1:`18`,x2:`12.01`,y2:`18`})]})}},Hv={color:`#64748b`,icon:e=>(0,$.jsx)(`svg`,{width:`48`,height:`48`,viewBox:`0 0 24 24`,fill:`none`,stroke:e,strokeWidth:`1.5`,strokeLinecap:`round`,strokeLinejoin:`round`,style:{opacity:.6},children:(0,$.jsx)(`path`,{d:`M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z`})})};function Uv(e){if(!e)return``;let t=e.toDate?e.toDate():e._seconds?new Date(e._seconds*1e3):new Date(e);return isNaN(t.getTime())?``:t.toLocaleDateString(`en-US`,{month:`short`,day:`numeric`,year:`numeric`})}function Wv(){let[e,t]=(0,_.useState)([]),[n,r]=(0,_.useState)(!0),[i,a]=(0,_.useState)(!1),[o,s]=(0,_.useState)(Bv),[c,l]=(0,_.useState)(!1),[u,d]=(0,_.useState)(null),{showModal:f,gateAction:p,onVerified:m,onClose:h}=Ov();(0,_.useEffect)(()=>{g()},[]);async function g(){try{t(((await Yg({vertical:`consumer`,jurisdiction:`GLOBAL`})).inventory||[]).filter(e=>(e.type===`document`||e.type===`general`||e.type===`valuable`)&&(e.metadata?.documentName||e.metadata?.title||e.metadata?.category)))}catch(e){console.error(`Failed to load documents:`,e)}finally{r(!1)}}async function v(e){if(window.confirm(`Delete this record?`))try{await Qg({vertical:`consumer`,jurisdiction:`GLOBAL`,id:e}),d(`Record deleted`),setTimeout(()=>d(null),3e3),t(t=>t.filter(t=>t.id!==e))}catch(e){console.error(`Failed to delete:`,e),d(`Failed to delete  `+(e.message||`try again`)),setTimeout(()=>d(null),4e3)}}function y(e){e.preventDefault(),o.name&&p(o.category===`Document`?`document`:`valuable`,{estimatedValue:o.estimatedValue},b)}async function b(){l(!0);try{let e=await Xg({vertical:`consumer`,jurisdiction:`GLOBAL`,item:{type:o.category===`Document`?`document`:`valuable`,status:`active`,metadata:{documentName:o.name,title:o.name,category:o.category,description:o.description,estimatedValue:o.estimatedValue},price:0,cost:0}});o.attested&&e.dtcId&&await $g({vertical:`consumer`,jurisdiction:`GLOBAL`,dtcId:e.dtcId}),a(!1),s(Bv),d(`Item added`),setTimeout(()=>d(null),3e3),r(!0),await g()}catch(e){console.error(`Failed to create document:`,e),d(`Failed to save  `+(e.message||`try again`)),setTimeout(()=>d(null),4e3)}finally{l(!1)}}let x={width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},S={...x,background:`white`};function C(e){return Vv[e]||Hv}return(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`pageHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`My Important Stuff`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Documents, jewelry, artwork, personal mementos, and anything valuable you want to protect and track`})]})}),u&&(0,$.jsx)(`div`,{style:{padding:`10px 16px`,marginBottom:`12px`,borderRadius:`10px`,background:u.startsWith(`Failed`)?`#fef2f2`:`#f0fdf4`,color:u.startsWith(`Failed`)?`#dc2626`:`#16a34a`,fontSize:`14px`,fontWeight:500},children:u}),n?(0,$.jsx)(`div`,{className:`card`,style:{padding:`24px`,textAlign:`center`},children:`Loading...`}):e.length===0?(0,$.jsxs)(`div`,{className:`card`,style:{padding:`48px 32px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{width:`64px`,height:`64px`,borderRadius:`16px`,background:`linear-gradient(135deg, #e0e7ff 0%, #c7d2fe 100%)`,display:`flex`,alignItems:`center`,justifyContent:`center`,margin:`0 auto 20px`},children:(0,$.jsxs)(`svg`,{width:`28`,height:`28`,viewBox:`0 0 24 24`,fill:`none`,stroke:`#6366f1`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,$.jsx)(`path`,{d:`M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z`}),(0,$.jsx)(`polyline`,{points:`14 2 14 8 20 8`}),(0,$.jsx)(`line`,{x1:`16`,y1:`13`,x2:`8`,y2:`13`}),(0,$.jsx)(`line`,{x1:`16`,y1:`17`,x2:`8`,y2:`17`})]})}),(0,$.jsx)(`div`,{style:{fontSize:`18px`,fontWeight:600,color:`#1e293b`,marginBottom:`10px`},children:`Your important stuff, all in one place`}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`#64748b`,marginBottom:`24px`,maxWidth:`420px`,margin:`0 auto 24px`,lineHeight:`1.6`},children:`Store and manage the things that matter most -- important documents, jewelry, artwork, collectibles, family heirlooms, and anything else you want to keep safe, tracked, and verified.`}),(0,$.jsx)(`button`,{onClick:()=>a(!0),style:{padding:`12px 28px`,background:`linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%)`,color:`white`,border:`none`,borderRadius:`12px`,fontSize:`14px`,fontWeight:600,cursor:`pointer`},children:`Add Item`})]}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{style:{marginBottom:`12px`},children:(0,$.jsx)(`button`,{onClick:()=>a(!0),style:{padding:`10px 20px`,background:`linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%)`,color:`white`,border:`none`,borderRadius:`10px`,fontSize:`13px`,fontWeight:600,cursor:`pointer`},children:`+ Add Item`})}),(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(auto-fill, minmax(320px, 1fr))`,gap:`12px`},children:e.map(e=>{let t=e.metadata?.category||(e.type===`document`?`Document`:`Other`),n=C(t);return(0,$.jsxs)(`div`,{className:`card`,style:{position:`relative`,overflow:`hidden`},children:[(0,$.jsxs)(`div`,{style:{height:`100px`,background:e.imageUrl?`none`:`linear-gradient(135deg, ${n.color}12 0%, ${n.color}06 100%)`,display:`flex`,alignItems:`center`,justifyContent:`center`,position:`relative`,overflow:`hidden`},children:[e.imageUrl?(0,$.jsx)(`img`,{src:e.imageUrl,alt:e.metadata?.title||`Item`,style:{width:`100%`,height:`100%`,objectFit:`cover`}}):n.icon(n.color),(0,$.jsx)(`button`,{onClick:()=>v(e.id),style:{position:`absolute`,top:`8px`,right:`8px`,background:`white`,border:`1px solid #e5e7eb`,borderRadius:`8px`,width:`28px`,height:`28px`,display:`flex`,alignItems:`center`,justifyContent:`center`,cursor:`pointer`,color:`#94a3b8`,fontSize:`14px`},title:`Delete`,children:(0,$.jsxs)(`svg`,{width:`14`,height:`14`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,$.jsx)(`polyline`,{points:`3 6 5 6 21 6`}),(0,$.jsx)(`path`,{d:`M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2`})]})}),(0,$.jsx)(`span`,{style:{position:`absolute`,bottom:`8px`,right:`10px`,fontSize:`11px`,fontWeight:600,padding:`3px 10px`,borderRadius:`20px`,background:`${n.color}20`,color:n.color},children:t})]}),(0,$.jsxs)(`div`,{style:{padding:`14px 20px 4px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`16px`,color:`#1e293b`},children:e.metadata?.documentName||e.metadata?.title||`Item`}),e.metadata?.estimatedValue&&(0,$.jsxs)(`div`,{style:{fontSize:`13px`,color:`#64748b`,marginTop:`2px`},children:[`Estimated value: $`,Number(e.metadata.estimatedValue).toLocaleString()]})]}),(0,$.jsxs)(`div`,{style:{padding:`8px 20px 12px`},children:[e.metadata?.description&&(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#475569`,marginBottom:`6px`,lineHeight:`1.5`},children:e.metadata.description}),Uv(e.createdAt)&&(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,padding:`3px 0`,fontSize:`13px`},children:[(0,$.jsx)(`span`,{style:{color:`#64748b`},children:`Added`}),(0,$.jsx)(`span`,{style:{fontWeight:500,color:`#1e293b`},children:Uv(e.createdAt)})]})]}),(0,$.jsx)(`div`,{style:{padding:`10px 20px 14px`,borderTop:`1px solid #f1f5f9`,display:`flex`,gap:`8px`},children:(0,$.jsx)(`span`,{className:`badge badge-${e.status||`active`}`,style:{display:`flex`,alignItems:`center`},children:e.status||`Active`})})]},e.id)})})]}),(0,$.jsx)(R_,{isOpen:i,onClose:()=>a(!1),title:`Add Item`,onSubmit:y,submitLabel:c?`Saving...`:`Save`,children:(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Item Name`}),(0,$.jsx)(`input`,{type:`text`,value:o.name,onChange:e=>s({...o,name:e.target.value}),placeholder:`e.g., Passport, Grandmother's Ring, Signed Print`,style:x,required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Category`}),(0,$.jsxs)(`select`,{value:o.category,onChange:e=>s({...o,category:e.target.value}),style:S,children:[(0,$.jsx)(`option`,{value:`Document`,children:`Document`}),(0,$.jsx)(`option`,{value:`Jewelry`,children:`Jewelry`}),(0,$.jsx)(`option`,{value:`Artwork`,children:`Artwork`}),(0,$.jsx)(`option`,{value:`Electronics`,children:`Electronics`}),(0,$.jsx)(`option`,{value:`Collectible`,children:`Collectible`}),(0,$.jsx)(`option`,{value:`Family Heirloom`,children:`Family Heirloom`}),(0,$.jsx)(`option`,{value:`Other`,children:`Other`})]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Description (optional)`}),(0,$.jsx)(`textarea`,{value:o.description,onChange:e=>s({...o,description:e.target.value}),rows:3,style:x})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Estimated Value (optional)`}),(0,$.jsx)(`input`,{type:`text`,value:o.estimatedValue?`$`+Number(String(o.estimatedValue).replace(/[$,]/g,``)).toLocaleString():``,onChange:e=>s({...o,estimatedValue:e.target.value.replace(/[$,]/g,``)}),placeholder:`$`,style:x})]}),(0,$.jsx)(`div`,{style:{marginTop:`4px`,padding:`12px`,background:`#f8fafc`,borderRadius:`10px`,border:`1px solid #e2e8f0`},children:(0,$.jsxs)(`label`,{style:{display:`flex`,alignItems:`flex-start`,gap:`10px`,cursor:`pointer`,fontSize:`13px`,color:`#475569`,lineHeight:1.5},children:[(0,$.jsx)(`input`,{type:`checkbox`,checked:o.attested,onChange:e=>s({...o,attested:e.target.checked}),style:{marginTop:`3px`,flexShrink:0}}),`I represent that I am the lawful owner of this item and that the information provided is accurate to the best of my knowledge.`]})})]})}),f&&(0,$.jsx)(Ev,{onVerified:m,onClose:h})]})}var Gv={creation:{icon:`C`,color:`#7c3aed`,label:`Created`},maintenance:{icon:`M`,color:`#06b6d4`,label:`Maintenance`},transfer:{icon:`T`,color:`#7c3aed`,label:`Transfer`},inspection:{icon:`I`,color:`#22c55e`,label:`Inspection`},update:{icon:`U`,color:`#f59e0b`,label:`Update`},payment:{icon:`P`,color:`#16a34a`,label:`Payment`},verification:{icon:`V`,color:`#6366f1`,label:`Verification`},note:{icon:`N`,color:`#64748b`,label:`Note`},attestation:{icon:`A`,color:`#7c3aed`,label:`Attestation`}},Kv=[{value:`update`,label:`Update`},{value:`maintenance`,label:`Maintenance`},{value:`payment`,label:`Payment`},{value:`note`,label:`Note`},{value:`verification`,label:`Verification`},{value:`transfer`,label:`Transfer`}];function qv(e){if(!e)return``;let t=e.toDate?e.toDate():e._seconds?new Date(e._seconds*1e3):new Date(e);return isNaN(t.getTime())?``:t.toLocaleDateString(`en-US`,{month:`short`,day:`numeric`,year:`numeric`,hour:`numeric`,minute:`2-digit`})}function Jv(){let[e,t]=(0,_.useState)([]),[n,r]=(0,_.useState)(!0),[i,a]=(0,_.useState)({}),[o,s]=(0,_.useState)(null),[c,l]=(0,_.useState)({entryType:`update`,description:``}),[u,d]=(0,_.useState)(!1),[f,p]=(0,_.useState)(null),m=_.useRef(null);(0,_.useEffect)(()=>{h()},[]);async function h(){try{let e=await qg({vertical:`consumer`,jurisdiction:`GLOBAL`});t(e.entries||[]);let n={};(e.entries||[]).forEach(e=>{e.dtcId&&(n[e.dtcId]=!0)}),a(n)}catch(e){console.error(`Failed to load logbook:`,e);try{t((await c_({vertical:`consumer`,jurisdiction:`GLOBAL`,limit:50})).activity||[])}catch(e){console.error(`Fallback also failed:`,e)}}finally{r(!1)}}function g(e){a(t=>({...t,[e]:!t[e]}))}async function v(e){if(c.description.trim()){d(!0);try{let t=null;f&&(t=await new Promise((e,t)=>{let n=new FileReader;n.onload=()=>e({name:f.name,type:f.type,data:n.result}),n.onerror=()=>t(Error(`Failed to read file`)),n.readAsDataURL(f)})),await Jg({vertical:`consumer`,jurisdiction:`GLOBAL`,entry:{dtcId:e,entryType:c.entryType,data:{description:c.description}},...t?{file:t}:{}}),s(null),l({entryType:`update`,description:``}),p(null),r(!0),await h()}catch(e){console.error(`Failed to add entry:`,e)}finally{d(!1)}}}let y={};e.forEach(e=>{let t=e.dtcId||e.id||`other`;y[t]||(y[t]={title:e.dtcTitle||e.workflowId||`Activity`,entries:[]}),y[t].entries.push(e)});let b={width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},x={...b,background:`white`};return(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`pageHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`My Logbooks`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Every important item gets its own permanent timeline`})]})}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`,padding:`20px`,background:`#faf5ff`,border:`1px solid #e9d5ff`},children:[(0,$.jsx)(`div`,{style:{fontSize:`15px`,fontWeight:600,color:`#1e293b`,marginBottom:`8px`},children:`How Logbooks Work`}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`#64748b`,lineHeight:`1.7`},children:`Every important item in your Vault gets its own logbook -- a permanent timeline of everything that happens to it. When you add a vehicle, property, or valuable item, TitleApp automatically starts tracking it. Every update, verification, and change is recorded with a timestamp so you always have proof of what happened and when.`})]}),n?(0,$.jsx)(`div`,{className:`card`,style:{padding:`24px`,textAlign:`center`},children:`Loading logbooks...`}):Object.keys(y).length===0?(0,$.jsxs)(`div`,{className:`card`,style:{padding:`48px 32px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{width:`64px`,height:`64px`,borderRadius:`16px`,background:`linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%)`,display:`flex`,alignItems:`center`,justifyContent:`center`,margin:`0 auto 20px`},children:(0,$.jsxs)(`svg`,{width:`28`,height:`28`,viewBox:`0 0 24 24`,fill:`none`,stroke:`#7c3aed`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,$.jsx)(`path`,{d:`M4 19.5A2.5 2.5 0 0 1 6.5 17H20`}),(0,$.jsx)(`path`,{d:`M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z`})]})}),(0,$.jsx)(`div`,{style:{fontSize:`18px`,fontWeight:600,color:`#1e293b`,marginBottom:`10px`},children:`No logbook entries yet`}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`#64748b`,maxWidth:`420px`,margin:`0 auto`,lineHeight:`1.6`},children:`Add a vehicle, property, or important item to get started. Each item gets its own logbook that tracks everything automatically.`})]}):(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`12px`},children:Object.entries(y).map(([e,t])=>(0,$.jsxs)(`div`,{className:`card`,style:{overflow:`hidden`},children:[(0,$.jsxs)(`button`,{onClick:()=>g(e),style:{width:`100%`,textAlign:`left`,padding:`16px 20px`,background:`#faf5ff`,border:`none`,borderBottom:i[e]?`1px solid #e9d5ff`:`none`,cursor:`pointer`,display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{style:{fontWeight:700,fontSize:`15px`,color:`#1e293b`},children:[`Logbook: `,t.title]}),(0,$.jsxs)(`div`,{style:{fontSize:`12px`,color:`#64748b`,marginTop:`2px`},children:[t.entries.length,` `,t.entries.length===1?`entry`:`entries`]})]}),(0,$.jsx)(`span`,{style:{color:`#7c3aed`,fontSize:`18px`},children:i[e]?``:``})]}),i[e]&&(0,$.jsxs)(`div`,{style:{padding:`16px 20px`},children:[o!==e&&(0,$.jsx)(`div`,{style:{marginBottom:`14px`},children:(0,$.jsx)(`button`,{onClick:()=>{s(e),l({entryType:`update`,description:``})},className:`iconBtn`,style:{fontSize:`13px`},children:`+ Add Entry`})}),o===e&&(0,$.jsxs)(`div`,{style:{padding:`14px`,background:`#f8fafc`,borderRadius:`12px`,border:`1px solid var(--line)`,marginBottom:`16px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:600,fontSize:`14px`,color:`#1e293b`,marginBottom:`12px`},children:`New Entry`}),(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`10px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`4px`,fontWeight:600,fontSize:`12px`,color:`#64748b`},children:`Type`}),(0,$.jsx)(`select`,{value:c.entryType,onChange:e=>l({...c,entryType:e.target.value}),style:x,children:Kv.map(e=>(0,$.jsx)(`option`,{value:e.value,children:e.label},e.value))})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`4px`,fontWeight:600,fontSize:`12px`,color:`#64748b`},children:`Description`}),(0,$.jsx)(`textarea`,{value:c.description,onChange:e=>l({...c,description:e.target.value}),rows:2,placeholder:`What happened?`,style:b})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`4px`,fontWeight:600,fontSize:`12px`,color:`#64748b`},children:`Attach File (optional)`}),(0,$.jsx)(`input`,{ref:m,type:`file`,style:{display:`none`},onChange:e=>p(e.target.files?.[0]||null)}),f?(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`,padding:`8px 12px`,background:`white`,borderRadius:`10px`,border:`1px solid var(--line)`,fontSize:`13px`},children:[(0,$.jsx)(`span`,{style:{flex:1,overflow:`hidden`,textOverflow:`ellipsis`,whiteSpace:`nowrap`,color:`#475569`},children:f.name}),(0,$.jsx)(`button`,{type:`button`,onClick:()=>{p(null),m.current&&(m.current.value=``)},style:{background:`none`,border:`none`,cursor:`pointer`,color:`#94a3b8`,fontSize:`14px`},children:`x`})]}):(0,$.jsx)(`button`,{type:`button`,onClick:()=>m.current?.click(),className:`iconBtn`,style:{fontSize:`12px`},children:`Choose File`})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,$.jsx)(`button`,{type:`button`,onClick:()=>alert(`DocuSign / e-signature integration coming soon. This will allow third parties to verify logbook entries.`),style:{padding:`8px 16px`,background:`#7c3aed`,color:`white`,border:`none`,borderRadius:`8px`,cursor:`pointer`,fontSize:`13px`,fontWeight:600},children:`Request Signature`}),(0,$.jsx)(`span`,{style:{fontSize:`11px`,color:`#94a3b8`},children:`DocuSign / e-signature -- coming soon`})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`},children:[(0,$.jsx)(`button`,{onClick:()=>v(e),disabled:u||!c.description.trim(),className:`iconBtn`,style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`,opacity:u?.6:1},children:u?`Saving...`:`Save Entry`}),(0,$.jsx)(`button`,{onClick:()=>{s(null),p(null)},className:`iconBtn`,children:`Cancel`})]})]})]}),t.entries.map((e,n)=>{let r=Gv[e.entryType]||Gv.note;return(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`14px`,padding:`14px 0`,borderBottom:n<t.entries.length-1?`1px solid var(--line)`:`none`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,alignItems:`center`},children:[(0,$.jsx)(`div`,{style:{width:`36px`,height:`36px`,borderRadius:`10px`,background:`${r.color}15`,border:`2px solid ${r.color}35`,display:`grid`,placeItems:`center`,fontSize:`14px`,fontWeight:700,color:r.color},children:r.icon}),n<t.entries.length-1&&(0,$.jsx)(`div`,{style:{flex:1,width:`2px`,background:`var(--line)`,marginTop:`4px`}})]}),(0,$.jsxs)(`div`,{style:{flex:1,paddingTop:`2px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`,marginBottom:`6px`},children:[(0,$.jsx)(`span`,{style:{fontSize:`12px`,fontWeight:600,padding:`2px 8px`,borderRadius:`6px`,background:`${r.color}15`,color:r.color},children:r.label}),(0,$.jsx)(`span`,{style:{fontSize:`12px`,color:`#94a3b8`},children:qv(e.createdAt)})]}),e.data&&typeof e.data==`object`&&Object.entries(e.data).map(([e,t])=>(0,$.jsxs)(`div`,{style:{fontSize:`13px`,marginBottom:`2px`},children:[(0,$.jsxs)(`span`,{style:{fontWeight:600},children:[e.charAt(0).toUpperCase()+e.slice(1).replace(/_/g,` `),`:`]}),` `,(0,$.jsx)(`span`,{style:{color:`#475569`},children:t})]},e)),e.description&&(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#475569`},children:e.description}),e.summary&&(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#475569`},children:e.summary})]})]},e.id||n)})]})]},e))})]})}var Yv={name:``,recordType:`Certificate`,issuer:``,issueDate:``,expiryDate:``,attested:!1};function Xv(e){if(!e)return``;let t=e.toDate?e.toDate():e._seconds?new Date(e._seconds*1e3):new Date(e);return isNaN(t.getTime())?``:t.toLocaleDateString(`en-US`,{month:`short`,day:`numeric`,year:`numeric`})}function Zv(){let[e,t]=(0,_.useState)([]),[n,r]=(0,_.useState)(!0),[i,a]=(0,_.useState)(!1),[o,s]=(0,_.useState)(Yv),[c,l]=(0,_.useState)(!1),[u,d]=(0,_.useState)(null);(0,_.useEffect)(()=>{f()},[]);async function f(){try{t(((await Yg({vertical:`consumer`,jurisdiction:`GLOBAL`})).inventory||[]).filter(e=>(e.metadata?.credentialName||e.metadata?.school||e.metadata?.issuer||e.type===`credential`||e.type===`education`||e.type===`certification`)&&(e.metadata?.credentialName||e.metadata?.title||e.metadata?.school||e.metadata?.issuer)))}catch(e){console.error(`Failed to load certifications:`,e)}finally{r(!1)}}async function p(e){if(window.confirm(`Delete this record?`))try{await Qg({vertical:`consumer`,jurisdiction:`GLOBAL`,id:e}),d(`Record deleted`),setTimeout(()=>d(null),3e3),t(t=>t.filter(t=>t.id!==e))}catch(e){console.error(`Failed to delete:`,e),d(`Failed to delete  `+(e.message||`try again`)),setTimeout(()=>d(null),4e3)}}async function m(e){if(e.preventDefault(),o.name){l(!0);try{let e=await Xg({vertical:`consumer`,jurisdiction:`GLOBAL`,item:{type:`certification`,status:`active`,metadata:{credentialName:o.name,title:o.name,recordType:o.recordType,issuer:o.issuer,issueDate:o.issueDate,expiryDate:o.expiryDate},price:0,cost:0}});o.attested&&e.dtcId&&await $g({vertical:`consumer`,jurisdiction:`GLOBAL`,dtcId:e.dtcId}),a(!1),s(Yv),d(`Record added`),setTimeout(()=>d(null),3e3),r(!0),await f()}catch(e){console.error(`Failed to create certification:`,e),d(`Failed to save  `+(e.message||`try again`)),setTimeout(()=>d(null),4e3)}finally{l(!1)}}}let h={width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},g={...h,background:`white`};function v(e){if(!e)return!1;let t=new Date(e),n=new Date,r=t.getTime()-n.getTime();return r>0&&r<2160*60*60*1e3}function y(e){return e?new Date(e)<new Date:!1}return(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`pageHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Student Records & Certifications`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Academic transcripts, degrees, professional licenses, industry certifications, and credentials`})]})}),u&&(0,$.jsx)(`div`,{style:{padding:`10px 16px`,marginBottom:`12px`,borderRadius:`10px`,background:u.startsWith(`Failed`)?`#fef2f2`:`#f0fdf4`,color:u.startsWith(`Failed`)?`#dc2626`:`#16a34a`,fontSize:`14px`,fontWeight:500},children:u}),n?(0,$.jsx)(`div`,{className:`card`,style:{padding:`24px`,textAlign:`center`},children:`Loading...`}):e.length===0?(0,$.jsxs)(`div`,{className:`card`,style:{padding:`48px 32px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{width:`64px`,height:`64px`,borderRadius:`16px`,background:`linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)`,display:`flex`,alignItems:`center`,justifyContent:`center`,margin:`0 auto 20px`},children:(0,$.jsxs)(`svg`,{width:`28`,height:`28`,viewBox:`0 0 24 24`,fill:`none`,stroke:`#d97706`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,$.jsx)(`circle`,{cx:`12`,cy:`8`,r:`7`}),(0,$.jsx)(`polyline`,{points:`8.21 13.89 7 23 12 20 17 23 15.79 13.88`})]})}),(0,$.jsx)(`div`,{style:{fontSize:`18px`,fontWeight:600,color:`#1e293b`,marginBottom:`10px`},children:`Track your education and credentials`}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`#64748b`,maxWidth:`420px`,margin:`0 auto 24px`,lineHeight:`1.6`},children:`Academic records, degrees, professional licenses, industry certifications -- keep them all current with expiration tracking and renewal reminders.`}),(0,$.jsx)(`button`,{onClick:()=>a(!0),style:{padding:`12px 28px`,background:`linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%)`,color:`white`,border:`none`,borderRadius:`12px`,fontSize:`14px`,fontWeight:600,cursor:`pointer`},children:`Add Record`})]}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{style:{marginBottom:`12px`},children:(0,$.jsx)(`button`,{onClick:()=>a(!0),style:{padding:`10px 20px`,background:`linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%)`,color:`white`,border:`none`,borderRadius:`10px`,fontSize:`13px`,fontWeight:600,cursor:`pointer`},children:`+ Add Record`})}),(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(auto-fill, minmax(320px, 1fr))`,gap:`12px`},children:e.map(e=>{let t=y(e.metadata?.expiryDate),n=v(e.metadata?.expiryDate),r=t?`#dc2626`:n?`#f59e0b`:`#d97706`;return(0,$.jsxs)(`div`,{className:`card`,style:{position:`relative`,overflow:`hidden`},children:[(0,$.jsxs)(`div`,{style:{height:`100px`,background:e.imageUrl?`none`:`linear-gradient(135deg, ${r}12 0%, ${r}06 100%)`,display:`flex`,alignItems:`center`,justifyContent:`center`,position:`relative`,overflow:`hidden`},children:[e.imageUrl?(0,$.jsx)(`img`,{src:e.imageUrl,alt:e.metadata?.title||`Certification`,style:{width:`100%`,height:`100%`,objectFit:`cover`}}):(0,$.jsxs)(`svg`,{width:`48`,height:`48`,viewBox:`0 0 24 24`,fill:`none`,stroke:r,strokeWidth:`1.5`,strokeLinecap:`round`,strokeLinejoin:`round`,style:{opacity:.6},children:[(0,$.jsx)(`circle`,{cx:`12`,cy:`8`,r:`7`}),(0,$.jsx)(`polyline`,{points:`8.21 13.89 7 23 12 20 17 23 15.79 13.88`})]}),(0,$.jsx)(`button`,{onClick:()=>p(e.id),style:{position:`absolute`,top:`8px`,right:`8px`,background:`white`,border:`1px solid #e5e7eb`,borderRadius:`8px`,width:`28px`,height:`28px`,display:`flex`,alignItems:`center`,justifyContent:`center`,cursor:`pointer`,color:`#94a3b8`,fontSize:`14px`},title:`Delete`,children:(0,$.jsxs)(`svg`,{width:`14`,height:`14`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,$.jsx)(`polyline`,{points:`3 6 5 6 21 6`}),(0,$.jsx)(`path`,{d:`M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2`})]})}),(0,$.jsx)(`span`,{style:{position:`absolute`,bottom:`8px`,right:`10px`,fontSize:`11px`,fontWeight:600,padding:`3px 10px`,borderRadius:`20px`,background:`${r}20`,color:r},children:e.metadata?.recordType||`Certification`})]}),(0,$.jsxs)(`div`,{style:{padding:`14px 20px 4px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`16px`,color:`#1e293b`},children:e.metadata?.credentialName||e.metadata?.title||e.metadata?.school||`Record`}),e.metadata?.issuer&&(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`,marginTop:`2px`},children:e.metadata.issuer})]}),(0,$.jsxs)(`div`,{style:{padding:`8px 20px 12px`},children:[e.metadata?.issueDate&&(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,padding:`3px 0`,fontSize:`13px`},children:[(0,$.jsx)(`span`,{style:{color:`#64748b`},children:`Issued`}),(0,$.jsx)(`span`,{style:{fontWeight:500,color:`#1e293b`},children:e.metadata.issueDate})]}),e.metadata?.expiryDate&&(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,padding:`3px 0`,fontSize:`13px`},children:[(0,$.jsx)(`span`,{style:{color:`#64748b`},children:`Expires`}),(0,$.jsxs)(`span`,{style:{fontWeight:500,color:t?`#dc2626`:n?`#f59e0b`:`#1e293b`},children:[e.metadata.expiryDate,t?` (Expired)`:n?` (Expiring soon)`:``]})]}),Xv(e.createdAt)&&(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,padding:`3px 0`,fontSize:`13px`},children:[(0,$.jsx)(`span`,{style:{color:`#64748b`},children:`Added`}),(0,$.jsx)(`span`,{style:{fontWeight:500,color:`#1e293b`},children:Xv(e.createdAt)})]})]}),(0,$.jsx)(`div`,{style:{padding:`10px 20px 14px`,borderTop:`1px solid #f1f5f9`,display:`flex`,gap:`8px`},children:(0,$.jsx)(`span`,{className:`badge badge-${t?`expired`:e.status||`active`}`,style:{display:`flex`,alignItems:`center`},children:t?`Expired`:e.status||`Active`})})]},e.id)})})]}),(0,$.jsx)(R_,{isOpen:i,onClose:()=>a(!1),title:`Add Record`,onSubmit:m,submitLabel:c?`Saving...`:`Save Record`,children:(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Name / Title`}),(0,$.jsx)(`input`,{type:`text`,value:o.name,onChange:e=>s({...o,name:e.target.value}),placeholder:`e.g., MBA - Harvard, CPA License, Pilot Certificate`,style:h,required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Type`}),(0,$.jsxs)(`select`,{value:o.recordType,onChange:e=>s({...o,recordType:e.target.value}),style:g,children:[(0,$.jsx)(`option`,{value:`Degree`,children:`Degree`}),(0,$.jsx)(`option`,{value:`Certificate`,children:`Certificate`}),(0,$.jsx)(`option`,{value:`License`,children:`License`}),(0,$.jsx)(`option`,{value:`Professional Certification`,children:`Professional Certification`}),(0,$.jsx)(`option`,{value:`Other`,children:`Other`})]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Issuing Institution (optional)`}),(0,$.jsx)(`input`,{type:`text`,value:o.issuer,onChange:e=>s({...o,issuer:e.target.value}),placeholder:`e.g., Harvard University, State of Illinois`,style:h})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`10px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Issue Date`}),(0,$.jsx)(`input`,{type:`date`,value:o.issueDate,onChange:e=>s({...o,issueDate:e.target.value}),style:h})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Expiry Date`}),(0,$.jsx)(`input`,{type:`date`,value:o.expiryDate,onChange:e=>s({...o,expiryDate:e.target.value}),style:h})]})]}),(0,$.jsx)(`div`,{style:{marginTop:`4px`,padding:`12px`,background:`#f8fafc`,borderRadius:`10px`,border:`1px solid #e2e8f0`},children:(0,$.jsxs)(`label`,{style:{display:`flex`,alignItems:`flex-start`,gap:`10px`,cursor:`pointer`,fontSize:`13px`,color:`#475569`,lineHeight:1.5},children:[(0,$.jsx)(`input`,{type:`checkbox`,checked:o.attested,onChange:e=>s({...o,attested:e.target.checked}),style:{marginTop:`3px`,flexShrink:0}}),`I represent that I hold this credential and that the information provided is accurate to the best of my knowledge.`]})})]})})]})}var Qv=[{id:`titleapp`,name:`TitleApp Wallet`,desc:`Built-in wallet powered by Venly. Your records are stored on Polygon blockchain.`,color:`#7c3aed`,connected:!0},{id:`phantom`,name:`Phantom`,desc:`Connect your Phantom wallet for Solana-based tokens and NFTs.`,color:`#ab9ff2`,connected:!1},{id:`metamask`,name:`MetaMask`,desc:`Connect MetaMask for Ethereum and Polygon assets.`,color:`#f6851b`,connected:!1},{id:`coinbase`,name:`Coinbase Wallet`,desc:`Connect Coinbase Wallet for multi-chain support.`,color:`#0052ff`,connected:!1}];function $v(){let[e,t]=(0,_.useState)(null),[n,r]=(0,_.useState)([]),[i,a]=(0,_.useState)([]),[o,s]=(0,_.useState)(!1),[c,l]=(0,_.useState)(`wallets`),[u,d]=(0,_.useState)(!1),[f,p]=(0,_.useState)(!1),[m,h]=(0,_.useState)({name:``,symbol:``,supply:``,network:`polygon`}),[g,v]=(0,_.useState)({companyName:``,totalShares:``,shareholders:[{name:``,shares:``,percentage:``}]}),y=`consumer`,b=`GLOBAL`;(0,_.useEffect)(()=>{x()},[c]);async function x(){if(c!==`wallets`){s(!0);try{c===`tokens`?r((await g_({vertical:y,jurisdiction:b})).tokens||[]):c===`captables`?a((await v_({vertical:y,jurisdiction:b})).capTables||[]):c===`balance`&&t((await h_({vertical:y,jurisdiction:b})).assets||[])}catch(e){console.error(`Failed to load wallet data:`,e)}finally{s(!1)}}}async function S(e){e.preventDefault();try{await __({vertical:y,jurisdiction:b,token:m}),d(!1),h({name:``,symbol:``,supply:``,network:`polygon`}),l(`tokens`),await x()}catch(e){console.error(`Failed to create token:`,e)}}async function C(e){e.preventDefault();try{await y_({vertical:y,jurisdiction:b,capTable:{companyName:g.companyName,totalShares:parseInt(g.totalShares),shareholders:g.shareholders.map(e=>({name:e.name,shares:parseInt(e.shares),percentage:parseFloat(e.percentage)}))}}),p(!1),v({companyName:``,totalShares:``,shareholders:[{name:``,shares:``,percentage:``}]}),l(`captables`),await x()}catch(e){console.error(`Failed to create cap table:`,e)}}function w(e,t,n){let r=[...g.shareholders];r[e][t]=n,t===`shares`&&g.totalShares&&(r[e].percentage=(parseFloat(n)/parseFloat(g.totalShares)*100).toFixed(2)),v({...g,shareholders:r})}let ee={width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},te={...ee,background:`white`};return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`My Wallet`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Connect and manage your on-chain assets and wallets`})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`},children:[(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>d(!0),style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`},children:`+ Create Token`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>p(!0),children:`+ Cap Table`})]})]}),(0,$.jsx)(`div`,{style:{display:`flex`,gap:`8px`,marginBottom:`16px`},children:[{id:`wallets`,label:`Wallets`},{id:`balance`,label:`Balance`},{id:`tokens`,label:`Tokens`},{id:`captables`,label:`Cap Tables`}].map(e=>(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>l(e.id),style:{background:c===e.id?`rgba(124,58,237,0.16)`:`#fff`,borderColor:c===e.id?`rgba(124,58,237,0.35)`:`var(--line)`,fontWeight:c===e.id?600:400},children:e.label},e.id))}),c===`wallets`&&(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(auto-fill, minmax(300px, 1fr))`,gap:`12px`},children:Qv.map(e=>(0,$.jsxs)(`div`,{className:`card`,style:{padding:`20px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`flex-start`,marginBottom:`12px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`},children:[(0,$.jsx)(`div`,{style:{width:`40px`,height:`40px`,borderRadius:`12px`,background:`${e.color}15`,border:`1px solid ${e.color}35`,display:`grid`,placeItems:`center`,fontWeight:700,fontSize:`16px`,color:e.color},children:e.name.charAt(0)}),(0,$.jsx)(`div`,{children:(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`15px`,color:`#1e293b`},children:e.name})})]}),e.connected&&(0,$.jsx)(`span`,{className:`badge badge-completed`,style:{fontSize:`11px`},children:`Connected`})]}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`,lineHeight:`1.6`,marginBottom:`14px`},children:e.desc}),(0,$.jsx)(`button`,{className:`iconBtn`,style:e.connected?{opacity:.5,cursor:`default`}:{},children:e.connected?`Connected`:`Connect`})]},e.id))}),c===`balance`&&(o?(0,$.jsx)(`div`,{className:`card`,style:{padding:`24px`,textAlign:`center`},children:`Loading balance...`}):e&&e.length>0?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{className:`card`,style:{marginBottom:`16px`},children:(0,$.jsxs)(`div`,{style:{padding:`24px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`,marginBottom:`8px`},children:`Total Net Worth`}),(0,$.jsxs)(`div`,{style:{fontSize:`48px`,fontWeight:700,color:`var(--accent)`},children:[`$`,e.reduce((e,t)=>e+(t.value||0),0).toLocaleString()]})]})}),(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(auto-fill, minmax(200px, 1fr))`,gap:`12px`},children:e.map(e=>(0,$.jsxs)(`div`,{className:`card`,style:{padding:`20px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`,marginBottom:`6px`},children:e.type}),(0,$.jsxs)(`div`,{style:{fontSize:`24px`,fontWeight:700},children:[`$`,(e.value||0).toLocaleString()]}),(0,$.jsxs)(`div`,{style:{fontSize:`12px`,color:`#94a3b8`,marginTop:`4px`},children:[e.count||0,` asset`,(e.count||0)===1?``:`s`]})]},e.type))})]}):(0,$.jsx)(`div`,{className:`card`,style:{padding:`32px`,textAlign:`center`,color:`#64748b`},children:`No assets found. Add items to your Vault to see their value here.`})),c===`tokens`&&(o?(0,$.jsx)(`div`,{className:`card`,style:{padding:`24px`,textAlign:`center`},children:`Loading tokens...`}):n.length===0?(0,$.jsxs)(`div`,{className:`card`,style:{padding:`48px 32px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`18px`,fontWeight:600,color:`#1e293b`,marginBottom:`10px`},children:`No tokens yet`}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`#64748b`,marginBottom:`20px`},children:`Create your first memecoin or utility token.`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>d(!0),style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`},children:`Create Token`})]}):(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`12px`},children:n.map(e=>(0,$.jsxs)(`div`,{className:`card`,children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`cardTitle`,children:[e.name,` (`,e.symbol,`)`]}),(0,$.jsxs)(`div`,{className:`cardSub`,children:[e.network,` network`]})]}),(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`18px`},children:e.currentValue||`--`})]}),(0,$.jsxs)(`div`,{className:`detail`,children:[(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Total Supply`}),(0,$.jsx)(`div`,{className:`v`,children:parseInt(e.supply).toLocaleString()})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Holders`}),(0,$.jsx)(`div`,{className:`v`,children:e.holders||0})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Created`}),(0,$.jsx)(`div`,{className:`v`,children:new Date(e.createdAt).toLocaleDateString()})]})]})]},e.id))})),c===`captables`&&(o?(0,$.jsx)(`div`,{className:`card`,style:{padding:`24px`,textAlign:`center`},children:`Loading cap tables...`}):i.length===0?(0,$.jsxs)(`div`,{className:`card`,style:{padding:`48px 32px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`18px`,fontWeight:600,color:`#1e293b`,marginBottom:`10px`},children:`No cap tables yet`}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`#64748b`,marginBottom:`20px`},children:`Create a cap table to track ownership and equity.`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>p(!0),style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`},children:`Create Cap Table`})]}):(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`12px`},children:i.map(e=>(0,$.jsxs)(`div`,{className:`card`,children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:e.companyName}),(0,$.jsxs)(`div`,{className:`cardSub`,children:[(e.totalShares||0).toLocaleString(),` total shares`]})]})}),e.shareholders&&e.shareholders.length>0&&(0,$.jsx)(`div`,{className:`tableWrap`,children:(0,$.jsxs)(`table`,{className:`table`,children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{children:`Shareholder`}),(0,$.jsx)(`th`,{children:`Shares`}),(0,$.jsx)(`th`,{children:`%`})]})}),(0,$.jsx)(`tbody`,{children:e.shareholders.map((e,t)=>(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`td`,{className:`tdStrong`,children:e.name}),(0,$.jsx)(`td`,{children:(e.shares||0).toLocaleString()}),(0,$.jsxs)(`td`,{children:[e.percentage,`%`]})]},t))})]})})]},e.id))})),(0,$.jsx)(R_,{isOpen:u,onClose:()=>d(!1),title:`Create Token`,onSubmit:S,submitLabel:`Create Token`,children:(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Token Name`}),(0,$.jsx)(`input`,{type:`text`,value:m.name,onChange:e=>h({...m,name:e.target.value}),placeholder:`e.g., MyFamily Coin`,style:ee,required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Symbol`}),(0,$.jsx)(`input`,{type:`text`,value:m.symbol,onChange:e=>h({...m,symbol:e.target.value.toUpperCase()}),placeholder:`e.g., MFAM`,maxLength:5,style:ee,required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Total Supply`}),(0,$.jsx)(`input`,{type:`number`,value:m.supply,onChange:e=>h({...m,supply:e.target.value}),placeholder:`e.g., 1000000`,style:ee,required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Network`}),(0,$.jsxs)(`select`,{value:m.network,onChange:e=>h({...m,network:e.target.value}),style:te,children:[(0,$.jsx)(`option`,{value:`polygon`,children:`Polygon`}),(0,$.jsx)(`option`,{value:`ethereum`,children:`Ethereum`}),(0,$.jsx)(`option`,{value:`base`,children:`Base`}),(0,$.jsx)(`option`,{value:`solana`,children:`Solana`})]})]})]})}),(0,$.jsx)(R_,{isOpen:f,onClose:()=>p(!1),title:`Create Cap Table`,onSubmit:C,submitLabel:`Create Cap Table`,children:(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Company Name`}),(0,$.jsx)(`input`,{type:`text`,value:g.companyName,onChange:e=>v({...g,companyName:e.target.value}),placeholder:`e.g., Smith Family LLC`,style:ee,required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Total Shares`}),(0,$.jsx)(`input`,{type:`number`,value:g.totalShares,onChange:e=>v({...g,totalShares:e.target.value}),placeholder:`e.g., 10000`,style:ee,required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`8px`,fontSize:`13px`},children:`Shareholders`}),g.shareholders.map((e,t)=>(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`,marginBottom:`8px`},children:[(0,$.jsx)(`input`,{type:`text`,placeholder:`Name`,value:e.name,onChange:e=>w(t,`name`,e.target.value),style:{...ee,flex:2},required:!0}),(0,$.jsx)(`input`,{type:`number`,placeholder:`Shares`,value:e.shares,onChange:e=>w(t,`shares`,e.target.value),style:{...ee,flex:1},required:!0}),(0,$.jsx)(`input`,{type:`text`,placeholder:`%`,value:e.percentage,readOnly:!0,style:{...ee,width:`60px`,background:`#f8fafc`}}),g.shareholders.length>1&&(0,$.jsx)(`button`,{type:`button`,className:`iconBtn`,onClick:()=>v({...g,shareholders:g.shareholders.filter((e,n)=>n!==t)}),style:{color:`var(--danger)`},children:`x`})]},t)),(0,$.jsx)(`button`,{type:`button`,className:`iconBtn`,onClick:()=>v({...g,shareholders:[...g.shareholders,{name:``,shares:``,percentage:``}]}),style:{marginTop:`4px`},children:`+ Add Shareholder`})]})]})})]})}function ey({onBackToHub:e}){let[t,n]=(0,_.useState)(`dashboard`),[r,i]=(0,_.useState)(!1);(0,_.useEffect)(()=>{localStorage.getItem(`hasSeenOnboardingTour`)||setTimeout(()=>i(!0),500)},[]);function a(){switch(t){case`dashboard`:return(0,$.jsx)(I_,{});case`analyst`:return(0,$.jsx)(L_,{});case`rules-resources`:return(0,$.jsx)(z_,{});case`inventory`:return(0,$.jsx)(W_,{});case`ai-chats`:return(0,$.jsx)(X_,{});case`customers`:return(0,$.jsx)($_,{});case`appointments`:return(0,$.jsx)(ev,{});case`staff`:return(0,$.jsx)(tv,{});case`reports`:return(0,$.jsx)(av,{});case`data-apis`:return(0,$.jsx)(ov,{});case`fi-products`:return(0,$.jsx)(fv,{});case`auto-service`:return(0,$.jsx)(hv,{});case`sales-pipeline`:return(0,$.jsx)(vv,{});case`rules`:return(0,$.jsx)(Tv,{});case`settings`:return(0,$.jsx)(lv,{});case`my-vehicles`:return(0,$.jsx)(Pv,{});case`my-properties`:return(0,$.jsx)(zv,{});case`my-documents`:return(0,$.jsx)(Wv,{});case`my-logbook`:return(0,$.jsx)(Jv,{});case`my-certifications`:return(0,$.jsx)(Zv,{});case`my-wallet`:return(0,$.jsx)($v,{});default:return(0,$.jsx)(I_,{})}}let o=localStorage.getItem(`VERTICAL`)||`auto`;return(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(b_,{currentSection:t,onNavigate:n,onBackToHub:e,children:a()}),r&&(0,$.jsx)(Ig,{vertical:o,onComplete:()=>i(!1)})]})}function ty(){let[e,t]=(0,_.useState)(()=>typeof window<`u`?localStorage.getItem(`ID_TOKEN`):null),[n,r]=(0,_.useState)(`loading`),[i,a]=(0,_.useState)(()=>!!new URLSearchParams(window.location.search).get(`token`)),[o,s]=(0,_.useState)(null),[c,l]=(0,_.useState)(``);(0,_.useEffect)(()=>{let e=new URLSearchParams(window.location.search),n=e.get(`token`),r=e.get(`sid`),i=e.get(`tid`);r&&sessionStorage.setItem(`ta_platform_sid`,r),i&&sessionStorage.setItem(`ta_preselected_tid`,i),n&&la(bg,n).then(async e=>{let n=await e.user.getIdToken(!0);localStorage.setItem(`ID_TOKEN`,n),t(n),window.history.replaceState({},``,window.location.pathname),a(!1)}).catch(e=>{console.error(`Custom token sign-in failed:`,e),a(!1)}),n||t(localStorage.getItem(`ID_TOKEN`));let o=e=>{e.key===`ID_TOKEN`&&t(e.newValue)};window.addEventListener(`storage`,o);let s=bg.onAuthStateChanged(async e=>{if(e)try{let n=await e.getIdToken(!0);localStorage.setItem(`ID_TOKEN`,n),t(n),l(e.displayName||e.email?.split(`@`)[0]||``)}catch(e){console.error(`Failed to refresh token:`,e)}else localStorage.removeItem(`ID_TOKEN`),t(null)});return()=>{window.removeEventListener(`storage`,o),s()}},[]),(0,_.useEffect)(()=>{if(!e||i){i||r(`login`);return}async function n(){try{let n=`https://titleapp-frontdoor.titleapp-core.workers.dev`,i=sessionStorage.getItem(`ta_preselected_tid`);if(i){sessionStorage.removeItem(`ta_preselected_tid`);let a=await fetch(`${n}/api?path=/v1/me:memberships`,{headers:{Authorization:`Bearer ${e}`}});if(a.status===401){localStorage.removeItem(`ID_TOKEN`),t(null);return}let o=await a.json();if(o.ok&&o.memberships){let e=o.memberships.find(e=>e.tenantId===i);if(e){let t=o.tenants?.[e.tenantId]||{};localStorage.setItem(`TENANT_ID`,e.tenantId),t.vertical&&t.vertical!==`GLOBAL`&&localStorage.setItem(`VERTICAL`,t.vertical.toLowerCase()),t.jurisdiction&&t.jurisdiction!==`GLOBAL`&&localStorage.setItem(`JURISDICTION`,t.jurisdiction),(t.companyName||t.name)&&(localStorage.setItem(`COMPANY_NAME`,t.companyName||t.name),localStorage.setItem(`WORKSPACE_NAME`,t.companyName||t.name)),r(`app`);return}}}let a=await fetch(`${n}/api?path=/v1/me:memberships`,{headers:{Authorization:`Bearer ${e}`}});if(a.status===401){localStorage.removeItem(`ID_TOKEN`),t(null);return}let o=await a.json();o.ok&&o.memberships&&o.memberships.length===0?r(`onboarding`):r(`hub`)}catch(e){console.error(`Failed to resolve view:`,e),r(`hub`)}}n()},[e,i]);function u(e){e.id!==`vault`&&localStorage.setItem(`TENANT_ID`,e.id),r(`app`),(window.location.pathname===`/login`||window.location.pathname===`/`)&&window.history.replaceState({},``,`/dashboard`)}function d(){r(`hub`),window.location.pathname!==`/`&&window.history.replaceState({},``,`/`)}return i||n===`loading`?(0,$.jsx)(`div`,{style:{minHeight:`100vh`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`#f8fafc`},children:(0,$.jsxs)(`div`,{style:{textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:600,color:`#7c3aed`,marginBottom:`16px`},children:`TitleApp`}),(0,$.jsx)(`div`,{style:{fontSize:`16px`,color:`#6b7280`},children:`Loading...`})]})}):!e||n===`login`?(0,$.jsx)(Cg,{}):n===`onboarding`?(0,$.jsx)(`div`,{className:`appShell`,style:{minHeight:`100vh`},children:(0,$.jsxs)(`div`,{className:`dualPanel`,style:{minHeight:`100vh`},children:[(0,$.jsx)(`div`,{style:{flex:1,minWidth:0,overflowY:`auto`,height:`100vh`},children:(0,$.jsx)(Fg,{onComplete:()=>r(`hub`),onStepChange:s})}),(0,$.jsx)(`aside`,{className:`chatSidebar`,children:(0,$.jsx)(Hg,{currentSection:`onboarding`,onboardingStep:o})})]})}):n===`hub`?(0,$.jsx)(k_,{userName:c,onLaunch:u}):(0,$.jsx)(ey,{onBackToHub:d})}(0,g.createRoot)(document.getElementById(`root`)).render((0,$.jsx)(_.StrictMode,{children:(0,$.jsx)(ty,{})}));