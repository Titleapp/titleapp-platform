var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,o=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),s=(e,i,o,s)=>{if(i&&typeof i==`object`||typeof i==`function`)for(var c=r(i),l=0,u=c.length,d;l<u;l++)d=c[l],!a.call(e,d)&&d!==o&&t(e,d,{get:(e=>i[e]).bind(null,d),enumerable:!(s=n(i,d))||s.enumerable});return e},c=(n,r,a)=>(a=n==null?{}:e(i(n)),s(r||!n||!n.__esModule?t(a,`default`,{value:n,enumerable:!0}):a,n));(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var l=o((e=>{var t=Symbol.for(`react.transitional.element`),n=Symbol.for(`react.portal`),r=Symbol.for(`react.fragment`),i=Symbol.for(`react.strict_mode`),a=Symbol.for(`react.profiler`),o=Symbol.for(`react.consumer`),s=Symbol.for(`react.context`),c=Symbol.for(`react.forward_ref`),l=Symbol.for(`react.suspense`),u=Symbol.for(`react.memo`),d=Symbol.for(`react.lazy`),f=Symbol.for(`react.activity`),p=Symbol.iterator;function m(e){return typeof e!=`object`||!e?null:(e=p&&e[p]||e[`@@iterator`],typeof e==`function`?e:null)}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,_={};function v(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||h}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if(typeof e!=`object`&&typeof e!=`function`&&e!=null)throw Error(`takes an object of state variables to update or a function which returns an object of state variables.`);this.updater.enqueueSetState(this,e,t,`setState`)},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,`forceUpdate`)};function y(){}y.prototype=v.prototype;function b(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||h}var x=b.prototype=new y;x.constructor=b,g(x,v.prototype),x.isPureReactComponent=!0;var S=Array.isArray;function C(){}var w={H:null,A:null,T:null,S:null},T=Object.prototype.hasOwnProperty;function E(e,n,r){var i=r.ref;return{$$typeof:t,type:e,key:n,ref:i===void 0?null:i,props:r}}function D(e,t){return E(e.type,t,e.props)}function O(e){return typeof e==`object`&&!!e&&e.$$typeof===t}function ee(e){var t={"=":`=0`,":":`=2`};return`$`+e.replace(/[=:]/g,function(e){return t[e]})}var k=/\/+/g;function te(e,t){return typeof e==`object`&&e&&e.key!=null?ee(``+e.key):t.toString(36)}function ne(e){switch(e.status){case`fulfilled`:return e.value;case`rejected`:throw e.reason;default:switch(typeof e.status==`string`?e.then(C,C):(e.status=`pending`,e.then(function(t){e.status===`pending`&&(e.status=`fulfilled`,e.value=t)},function(t){e.status===`pending`&&(e.status=`rejected`,e.reason=t)})),e.status){case`fulfilled`:return e.value;case`rejected`:throw e.reason}}throw e}function re(e,r,i,a,o){var s=typeof e;(s===`undefined`||s===`boolean`)&&(e=null);var c=!1;if(e===null)c=!0;else switch(s){case`bigint`:case`string`:case`number`:c=!0;break;case`object`:switch(e.$$typeof){case t:case n:c=!0;break;case d:return c=e._init,re(c(e._payload),r,i,a,o)}}if(c)return o=o(e),c=a===``?`.`+te(e,0):a,S(o)?(i=``,c!=null&&(i=c.replace(k,`$&/`)+`/`),re(o,r,i,``,function(e){return e})):o!=null&&(O(o)&&(o=D(o,i+(o.key==null||e&&e.key===o.key?``:(``+o.key).replace(k,`$&/`)+`/`)+c)),r.push(o)),1;c=0;var l=a===``?`.`:a+`:`;if(S(e))for(var u=0;u<e.length;u++)a=e[u],s=l+te(a,u),c+=re(a,r,i,s,o);else if(u=m(e),typeof u==`function`)for(e=u.call(e),u=0;!(a=e.next()).done;)a=a.value,s=l+te(a,u++),c+=re(a,r,i,s,o);else if(s===`object`){if(typeof e.then==`function`)return re(ne(e),r,i,a,o);throw r=String(e),Error(`Objects are not valid as a React child (found: `+(r===`[object Object]`?`object with keys {`+Object.keys(e).join(`, `)+`}`:r)+`). If you meant to render a collection of children, use an array instead.`)}return c}function ie(e,t,n){if(e==null)return e;var r=[],i=0;return re(e,r,``,``,function(e){return t.call(n,e,i++)}),r}function ae(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(t){(e._status===0||e._status===-1)&&(e._status=1,e._result=t)},function(t){(e._status===0||e._status===-1)&&(e._status=2,e._result=t)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var A=typeof reportError==`function`?reportError:function(e){if(typeof window==`object`&&typeof window.ErrorEvent==`function`){var t=new window.ErrorEvent(`error`,{bubbles:!0,cancelable:!0,message:typeof e==`object`&&e&&typeof e.message==`string`?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process==`object`&&typeof process.emit==`function`){process.emit(`uncaughtException`,e);return}console.error(e)},j={map:ie,forEach:function(e,t,n){ie(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ie(e,function(){t++}),t},toArray:function(e){return ie(e,function(e){return e})||[]},only:function(e){if(!O(e))throw Error(`React.Children.only expected to receive a single React element child.`);return e}};e.Activity=f,e.Children=j,e.Component=v,e.Fragment=r,e.Profiler=a,e.PureComponent=b,e.StrictMode=i,e.Suspense=l,e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,e.__COMPILER_RUNTIME={__proto__:null,c:function(e){return w.H.useMemoCache(e)}},e.cache=function(e){return function(){return e.apply(null,arguments)}},e.cacheSignal=function(){return null},e.cloneElement=function(e,t,n){if(e==null)throw Error(`The argument must be a React element, but you passed `+e+`.`);var r=g({},e.props),i=e.key;if(t!=null)for(a in t.key!==void 0&&(i=``+t.key),t)!T.call(t,a)||a===`key`||a===`__self`||a===`__source`||a===`ref`&&t.ref===void 0||(r[a]=t[a]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var o=Array(a),s=0;s<a;s++)o[s]=arguments[s+2];r.children=o}return E(e.type,i,r)},e.createContext=function(e){return e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:o,_context:e},e},e.createElement=function(e,t,n){var r,i={},a=null;if(t!=null)for(r in t.key!==void 0&&(a=``+t.key),t)T.call(t,r)&&r!==`key`&&r!==`__self`&&r!==`__source`&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var s=Array(o),c=0;c<o;c++)s[c]=arguments[c+2];i.children=s}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return E(e,a,i)},e.createRef=function(){return{current:null}},e.forwardRef=function(e){return{$$typeof:c,render:e}},e.isValidElement=O,e.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:ae}},e.memo=function(e,t){return{$$typeof:u,type:e,compare:t===void 0?null:t}},e.startTransition=function(e){var t=w.T,n={};w.T=n;try{var r=e(),i=w.S;i!==null&&i(n,r),typeof r==`object`&&r&&typeof r.then==`function`&&r.then(C,A)}catch(e){A(e)}finally{t!==null&&n.types!==null&&(t.types=n.types),w.T=t}},e.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},e.use=function(e){return w.H.use(e)},e.useActionState=function(e,t,n){return w.H.useActionState(e,t,n)},e.useCallback=function(e,t){return w.H.useCallback(e,t)},e.useContext=function(e){return w.H.useContext(e)},e.useDebugValue=function(){},e.useDeferredValue=function(e,t){return w.H.useDeferredValue(e,t)},e.useEffect=function(e,t){return w.H.useEffect(e,t)},e.useEffectEvent=function(e){return w.H.useEffectEvent(e)},e.useId=function(){return w.H.useId()},e.useImperativeHandle=function(e,t,n){return w.H.useImperativeHandle(e,t,n)},e.useInsertionEffect=function(e,t){return w.H.useInsertionEffect(e,t)},e.useLayoutEffect=function(e,t){return w.H.useLayoutEffect(e,t)},e.useMemo=function(e,t){return w.H.useMemo(e,t)},e.useOptimistic=function(e,t){return w.H.useOptimistic(e,t)},e.useReducer=function(e,t,n){return w.H.useReducer(e,t,n)},e.useRef=function(e){return w.H.useRef(e)},e.useState=function(e){return w.H.useState(e)},e.useSyncExternalStore=function(e,t,n){return w.H.useSyncExternalStore(e,t,n)},e.useTransition=function(){return w.H.useTransition()},e.version=`19.2.4`})),u=o(((e,t)=>{t.exports=l()})),d=o((e=>{function t(e,t){var n=e.length;e.push(t);a:for(;0<n;){var r=n-1>>>1,a=e[r];if(0<i(a,t))e[r]=t,e[n]=a,n=r;else break a}}function n(e){return e.length===0?null:e[0]}function r(e){if(e.length===0)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;a:for(var r=0,a=e.length,o=a>>>1;r<o;){var s=2*(r+1)-1,c=e[s],l=s+1,u=e[l];if(0>i(c,n))l<a&&0>i(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[s]=n,r=s);else if(l<a&&0>i(u,n))e[r]=u,e[l]=n,r=l;else break a}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return n===0?e.id-t.id:n}if(e.unstable_now=void 0,typeof performance==`object`&&typeof performance.now==`function`){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var c=[],l=[],u=1,d=null,f=3,p=!1,m=!1,h=!1,g=!1,_=typeof setTimeout==`function`?setTimeout:null,v=typeof clearTimeout==`function`?clearTimeout:null,y=typeof setImmediate<`u`?setImmediate:null;function b(e){for(var i=n(l);i!==null;){if(i.callback===null)r(l);else if(i.startTime<=e)r(l),i.sortIndex=i.expirationTime,t(c,i);else break;i=n(l)}}function x(e){if(h=!1,b(e),!m)if(n(c)!==null)m=!0,S||(S=!0,O());else{var t=n(l);t!==null&&te(x,t.startTime-e)}}var S=!1,C=-1,w=5,T=-1;function E(){return g?!0:!(e.unstable_now()-T<w)}function D(){if(g=!1,S){var t=e.unstable_now();T=t;var i=!0;try{a:{m=!1,h&&(h=!1,v(C),C=-1),p=!0;var a=f;try{b:{for(b(t),d=n(c);d!==null&&!(d.expirationTime>t&&E());){var o=d.callback;if(typeof o==`function`){d.callback=null,f=d.priorityLevel;var s=o(d.expirationTime<=t);if(t=e.unstable_now(),typeof s==`function`){d.callback=s,b(t),i=!0;break b}d===n(c)&&r(c),b(t)}else r(c);d=n(c)}if(d!==null)i=!0;else{var u=n(l);u!==null&&te(x,u.startTime-t),i=!1}}break a}finally{d=null,f=a,p=!1}i=void 0}}finally{i?O():S=!1}}}var O;if(typeof y==`function`)O=function(){y(D)};else if(typeof MessageChannel<`u`){var ee=new MessageChannel,k=ee.port2;ee.port1.onmessage=D,O=function(){k.postMessage(null)}}else O=function(){_(D,0)};function te(t,n){C=_(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error(`forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported`):w=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_requestPaint=function(){g=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_scheduleCallback=function(r,i,a){var o=e.unstable_now();switch(typeof a==`object`&&a?(a=a.delay,a=typeof a==`number`&&0<a?o+a:o):a=o,r){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return s=a+s,r={id:u++,callback:i,priorityLevel:r,startTime:a,expirationTime:s,sortIndex:-1},a>o?(r.sortIndex=a,t(l,r),n(c)===null&&r===n(l)&&(h?(v(C),C=-1):h=!0,te(x,a-o))):(r.sortIndex=s,t(c,r),m||p||(m=!0,S||(S=!0,O()))),r},e.unstable_shouldYield=E,e.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}})),f=o(((e,t)=>{t.exports=d()})),p=o((e=>{var t=u();function n(e){var t=`https://react.dev/errors/`+e;if(1<arguments.length){t+=`?args[]=`+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+=`&args[]=`+encodeURIComponent(arguments[n])}return`Minified React error #`+e+`; visit `+t+` for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`}function r(){}var i={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for(`react.portal`);function o(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:r==null?null:``+r,children:e,containerInfo:t,implementation:n}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){if(e===`font`)return``;if(typeof t==`string`)return t===`use-credentials`?t:``}e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,e.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(n(299));return o(e,t,null,r)},e.flushSync=function(e){var t=s.T,n=i.p;try{if(s.T=null,i.p=2,e)return e()}finally{s.T=t,i.p=n,i.d.f()}},e.preconnect=function(e,t){typeof e==`string`&&(t?(t=t.crossOrigin,t=typeof t==`string`?t===`use-credentials`?t:``:void 0):t=null,i.d.C(e,t))},e.prefetchDNS=function(e){typeof e==`string`&&i.d.D(e)},e.preinit=function(e,t){if(typeof e==`string`&&t&&typeof t.as==`string`){var n=t.as,r=c(n,t.crossOrigin),a=typeof t.integrity==`string`?t.integrity:void 0,o=typeof t.fetchPriority==`string`?t.fetchPriority:void 0;n===`style`?i.d.S(e,typeof t.precedence==`string`?t.precedence:void 0,{crossOrigin:r,integrity:a,fetchPriority:o}):n===`script`&&i.d.X(e,{crossOrigin:r,integrity:a,fetchPriority:o,nonce:typeof t.nonce==`string`?t.nonce:void 0})}},e.preinitModule=function(e,t){if(typeof e==`string`)if(typeof t==`object`&&t){if(t.as==null||t.as===`script`){var n=c(t.as,t.crossOrigin);i.d.M(e,{crossOrigin:n,integrity:typeof t.integrity==`string`?t.integrity:void 0,nonce:typeof t.nonce==`string`?t.nonce:void 0})}}else t??i.d.M(e)},e.preload=function(e,t){if(typeof e==`string`&&typeof t==`object`&&t&&typeof t.as==`string`){var n=t.as,r=c(n,t.crossOrigin);i.d.L(e,n,{crossOrigin:r,integrity:typeof t.integrity==`string`?t.integrity:void 0,nonce:typeof t.nonce==`string`?t.nonce:void 0,type:typeof t.type==`string`?t.type:void 0,fetchPriority:typeof t.fetchPriority==`string`?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy==`string`?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet==`string`?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes==`string`?t.imageSizes:void 0,media:typeof t.media==`string`?t.media:void 0})}},e.preloadModule=function(e,t){if(typeof e==`string`)if(t){var n=c(t.as,t.crossOrigin);i.d.m(e,{as:typeof t.as==`string`&&t.as!==`script`?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity==`string`?t.integrity:void 0})}else i.d.m(e)},e.requestFormReset=function(e){i.d.r(e)},e.unstable_batchedUpdates=function(e,t){return e(t)},e.useFormState=function(e,t,n){return s.H.useFormState(e,t,n)},e.useFormStatus=function(){return s.H.useHostTransitionStatus()},e.version=`19.2.4`})),m=o(((e,t)=>{function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>`u`||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=`function`))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}n(),t.exports=p()})),h=o((e=>{var t=f(),n=u(),r=m();function i(e){var t=`https://react.dev/errors/`+e;if(1<arguments.length){t+=`?args[]=`+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+=`&args[]=`+encodeURIComponent(arguments[n])}return`Minified React error #`+e+`; visit `+t+` for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`}function a(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function o(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function s(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function c(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function l(e){if(o(e)!==e)throw Error(i(188))}function d(e){var t=e.alternate;if(!t){if(t=o(e),t===null)throw Error(i(188));return t===e?e:null}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var s=a.alternate;if(s===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===n)return l(a),e;if(s===r)return l(a),t;s=s.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=s;else{for(var c=!1,u=a.child;u;){if(u===n){c=!0,n=a,r=s;break}if(u===r){c=!0,r=a,n=s;break}u=u.sibling}if(!c){for(u=s.child;u;){if(u===n){c=!0,n=s,r=a;break}if(u===r){c=!0,r=s,n=a;break}u=u.sibling}if(!c)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(n.tag!==3)throw Error(i(188));return n.stateNode.current===n?e:t}function p(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=p(e),t!==null)return t;e=e.sibling}return null}var h=Object.assign,g=Symbol.for(`react.element`),_=Symbol.for(`react.transitional.element`),v=Symbol.for(`react.portal`),y=Symbol.for(`react.fragment`),b=Symbol.for(`react.strict_mode`),x=Symbol.for(`react.profiler`),S=Symbol.for(`react.consumer`),C=Symbol.for(`react.context`),w=Symbol.for(`react.forward_ref`),T=Symbol.for(`react.suspense`),E=Symbol.for(`react.suspense_list`),D=Symbol.for(`react.memo`),O=Symbol.for(`react.lazy`),ee=Symbol.for(`react.activity`),k=Symbol.for(`react.memo_cache_sentinel`),te=Symbol.iterator;function ne(e){return typeof e!=`object`||!e?null:(e=te&&e[te]||e[`@@iterator`],typeof e==`function`?e:null)}var re=Symbol.for(`react.client.reference`);function ie(e){if(e==null)return null;if(typeof e==`function`)return e.$$typeof===re?null:e.displayName||e.name||null;if(typeof e==`string`)return e;switch(e){case y:return`Fragment`;case x:return`Profiler`;case b:return`StrictMode`;case T:return`Suspense`;case E:return`SuspenseList`;case ee:return`Activity`}if(typeof e==`object`)switch(e.$$typeof){case v:return`Portal`;case C:return e.displayName||`Context`;case S:return(e._context.displayName||`Context`)+`.Consumer`;case w:var t=e.render;return e=e.displayName,e||=(e=t.displayName||t.name||``,e===``?`ForwardRef`:`ForwardRef(`+e+`)`),e;case D:return t=e.displayName||null,t===null?ie(e.type)||`Memo`:t;case O:t=e._payload,e=e._init;try{return ie(e(t))}catch{}}return null}var ae=Array.isArray,A=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe={pending:!1,data:null,method:null,action:null},se=[],ce=-1;function le(e){return{current:e}}function ue(e){0>ce||(e.current=se[ce],se[ce]=null,ce--)}function de(e,t){ce++,se[ce]=e.current,e.current=t}var fe=le(null),pe=le(null),me=le(null),he=le(null);function ge(e,t){switch(de(me,t),de(pe,e),de(fe,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Hd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Hd(t),e=Ud(t,e);else switch(e){case`svg`:e=1;break;case`math`:e=2;break;default:e=0}}ue(fe),de(fe,e)}function _e(){ue(fe),ue(pe),ue(me)}function ve(e){e.memoizedState!==null&&de(he,e);var t=fe.current,n=Ud(t,e.type);t!==n&&(de(pe,e),de(fe,n))}function ye(e){pe.current===e&&(ue(fe),ue(pe)),he.current===e&&(ue(he),$f._currentValue=oe)}var be,xe;function Se(e){if(be===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);be=t&&t[1]||``,xe=-1<e.stack.indexOf(`
    at`)?` (<anonymous>)`:-1<e.stack.indexOf(`@`)?`@unknown:0:0`:``}return`
`+be+e+xe}var Ce=!1;function we(e,t){if(!e||Ce)return``;Ce=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,`props`,{set:function(){throw Error()}}),typeof Reflect==`object`&&Reflect.construct){try{Reflect.construct(n,[])}catch(e){var r=e}Reflect.construct(e,[],n)}else{try{n.call()}catch(e){r=e}e.call(n.prototype)}}else{try{throw Error()}catch(e){r=e}(n=e())&&typeof n.catch==`function`&&n.catch(function(){})}}catch(e){if(e&&r&&typeof e.stack==`string`)return[e.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName=`DetermineComponentFrameRoot`;var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,`name`);i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,`name`,{value:`DetermineComponentFrameRoot`});var a=r.DetermineComponentFrameRoot(),o=a[0],s=a[1];if(o&&s){var c=o.split(`
`),l=s.split(`
`);for(i=r=0;r<c.length&&!c[r].includes(`DetermineComponentFrameRoot`);)r++;for(;i<l.length&&!l[i].includes(`DetermineComponentFrameRoot`);)i++;if(r===c.length||i===l.length)for(r=c.length-1,i=l.length-1;1<=r&&0<=i&&c[r]!==l[i];)i--;for(;1<=r&&0<=i;r--,i--)if(c[r]!==l[i]){if(r!==1||i!==1)do if(r--,i--,0>i||c[r]!==l[i]){var u=`
`+c[r].replace(` at new `,` at `);return e.displayName&&u.includes(`<anonymous>`)&&(u=u.replace(`<anonymous>`,e.displayName)),u}while(1<=r&&0<=i);break}}}finally{Ce=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:``)?Se(n):``}function Te(e,t){switch(e.tag){case 26:case 27:case 5:return Se(e.type);case 16:return Se(`Lazy`);case 13:return e.child!==t&&t!==null?Se(`Suspense Fallback`):Se(`Suspense`);case 19:return Se(`SuspenseList`);case 0:case 15:return we(e.type,!1);case 11:return we(e.type.render,!1);case 1:return we(e.type,!0);case 31:return Se(`Activity`);default:return``}}function Ee(e){try{var t=``,n=null;do t+=Te(e,n),n=e,e=e.return;while(e);return t}catch(e){return`
Error generating stack: `+e.message+`
`+e.stack}}var De=Object.prototype.hasOwnProperty,Oe=t.unstable_scheduleCallback,ke=t.unstable_cancelCallback,Ae=t.unstable_shouldYield,je=t.unstable_requestPaint,Me=t.unstable_now,Ne=t.unstable_getCurrentPriorityLevel,Pe=t.unstable_ImmediatePriority,Fe=t.unstable_UserBlockingPriority,Ie=t.unstable_NormalPriority,Le=t.unstable_LowPriority,Re=t.unstable_IdlePriority,ze=t.log,Be=t.unstable_setDisableYieldValue,Ve=null,He=null;function Ue(e){if(typeof ze==`function`&&Be(e),He&&typeof He.setStrictMode==`function`)try{He.setStrictMode(Ve,e)}catch{}}var We=Math.clz32?Math.clz32:Ke,M=Math.log,Ge=Math.LN2;function Ke(e){return e>>>=0,e===0?32:31-(M(e)/Ge|0)|0}var qe=256,Je=262144,Ye=4194304;function Xe(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ze(e,t,n){var r=e.pendingLanes;if(r===0)return 0;var i=0,a=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var s=r&134217727;return s===0?(s=r&~a,s===0?o===0?n||(n=r&~e,n!==0&&(i=Xe(n))):i=Xe(o):i=Xe(s)):(r=s&~a,r===0?(o&=s,o===0?n||(n=s&~e,n!==0&&(i=Xe(n))):i=Xe(o)):i=Xe(r)),i===0?0:t!==0&&t!==i&&(t&a)===0&&(a=i&-i,n=t&-t,a>=n||a===32&&n&4194048)?t:i}function Qe(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function $e(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function et(){var e=Ye;return Ye<<=1,!(Ye&62914560)&&(Ye=4194304),e}function tt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function nt(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function rt(e,t,n,r,i,a){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,c=e.expirationTimes,l=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-We(n),d=1<<u;s[u]=0,c[u]=-1;var f=l[u];if(f!==null)for(l[u]=null,u=0;u<f.length;u++){var p=f[u];p!==null&&(p.lane&=-536870913)}n&=~d}r!==0&&it(e,r,0),a!==0&&i===0&&e.tag!==0&&(e.suspendedLanes|=a&~(o&~t))}function it(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-We(t);e.entangledLanes|=t,e.entanglements[r]=e.entanglements[r]|1073741824|n&261930}function at(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-We(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function ot(e,t){var n=t&-t;return n=n&42?1:st(n),(n&(e.suspendedLanes|t))===0?n:0}function st(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ct(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function lt(){var e=j.p;return e===0?(e=window.event,e===void 0?32:hp(e.type)):e}function ut(e,t){var n=j.p;try{return j.p=e,t()}finally{j.p=n}}var dt=Math.random().toString(36).slice(2),ft=`__reactFiber$`+dt,pt=`__reactProps$`+dt,mt=`__reactContainer$`+dt,ht=`__reactEvents$`+dt,gt=`__reactListeners$`+dt,_t=`__reactHandles$`+dt,vt=`__reactResources$`+dt,yt=`__reactMarker$`+dt;function bt(e){delete e[ft],delete e[pt],delete e[ht],delete e[gt],delete e[_t]}function xt(e){var t=e[ft];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mt]||n[ft]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=ff(e);e!==null;){if(n=e[ft])return n;e=ff(e)}return t}e=n,n=e.parentNode}return null}function St(e){if(e=e[ft]||e[mt]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Ct(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(i(33))}function wt(e){var t=e[vt];return t||=e[vt]={hoistableStyles:new Map,hoistableScripts:new Map},t}function Tt(e){e[yt]=!0}var Et=new Set,Dt={};function Ot(e,t){kt(e,t),kt(e+`Capture`,t)}function kt(e,t){for(Dt[e]=t,e=0;e<t.length;e++)Et.add(t[e])}var At=RegExp(`^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$`),jt={},Mt={};function Nt(e){return De.call(Mt,e)?!0:De.call(jt,e)?!1:At.test(e)?Mt[e]=!0:(jt[e]=!0,!1)}function Pt(e,t,n){if(Nt(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case`undefined`:case`function`:case`symbol`:e.removeAttribute(t);return;case`boolean`:var r=t.toLowerCase().slice(0,5);if(r!==`data-`&&r!==`aria-`){e.removeAttribute(t);return}}e.setAttribute(t,``+n)}}function Ft(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case`undefined`:case`function`:case`symbol`:case`boolean`:e.removeAttribute(t);return}e.setAttribute(t,``+n)}}function It(e,t,n,r){if(r===null)e.removeAttribute(n);else{switch(typeof r){case`undefined`:case`function`:case`symbol`:case`boolean`:e.removeAttribute(n);return}e.setAttributeNS(t,n,``+r)}}function N(e){switch(typeof e){case`bigint`:case`boolean`:case`number`:case`string`:case`undefined`:return e;case`object`:return e;default:return``}}function Lt(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()===`input`&&(t===`checkbox`||t===`radio`)}function Rt(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&r!==void 0&&typeof r.get==`function`&&typeof r.set==`function`){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=``+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=``+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function zt(e){if(!e._valueTracker){var t=Lt(e)?`checked`:`value`;e._valueTracker=Rt(e,t,``+e[t])}}function Bt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r=``;return e&&(r=Lt(e)?e.checked?`true`:`false`:e.value),e=r,e===n?!1:(t.setValue(e),!0)}function Vt(e){if(e||=typeof document<`u`?document:void 0,e===void 0)return null;try{return e.activeElement||e.body}catch{return e.body}}var Ht=/[\n"\\]/g;function Ut(e){return e.replace(Ht,function(e){return`\\`+e.charCodeAt(0).toString(16)+` `})}function Wt(e,t,n,r,i,a,o,s){e.name=``,o!=null&&typeof o!=`function`&&typeof o!=`symbol`&&typeof o!=`boolean`?e.type=o:e.removeAttribute(`type`),t==null?o!==`submit`&&o!==`reset`||e.removeAttribute(`value`):o===`number`?(t===0&&e.value===``||e.value!=t)&&(e.value=``+N(t)):e.value!==``+N(t)&&(e.value=``+N(t)),t==null?n==null?r!=null&&e.removeAttribute(`value`):Kt(e,o,N(n)):Kt(e,o,N(t)),i==null&&a!=null&&(e.defaultChecked=!!a),i!=null&&(e.checked=i&&typeof i!=`function`&&typeof i!=`symbol`),s!=null&&typeof s!=`function`&&typeof s!=`symbol`&&typeof s!=`boolean`?e.name=``+N(s):e.removeAttribute(`name`)}function Gt(e,t,n,r,i,a,o,s){if(a!=null&&typeof a!=`function`&&typeof a!=`symbol`&&typeof a!=`boolean`&&(e.type=a),t!=null||n!=null){if(!(a!==`submit`&&a!==`reset`||t!=null)){zt(e);return}n=n==null?``:``+N(n),t=t==null?n:``+N(t),s||t===e.value||(e.value=t),e.defaultValue=t}r??=i,r=typeof r!=`function`&&typeof r!=`symbol`&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,o!=null&&typeof o!=`function`&&typeof o!=`symbol`&&typeof o!=`boolean`&&(e.name=o),zt(e)}function Kt(e,t,n){t===`number`&&Vt(e.ownerDocument)===e||e.defaultValue===``+n||(e.defaultValue=``+n)}function qt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t[`$`+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty(`$`+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=``+N(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Jt(e,t,n){if(t!=null&&(t=``+N(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n==null?``:``+N(n)}function Yt(e,t,n,r){if(t==null){if(r!=null){if(n!=null)throw Error(i(92));if(ae(r)){if(1<r.length)throw Error(i(93));r=r[0]}n=r}n??=``,t=n}n=N(t),e.defaultValue=n,r=e.textContent,r===n&&r!==``&&r!==null&&(e.value=r),zt(e)}function Xt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Zt=new Set(`animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp`.split(` `));function Qt(e,t,n){var r=t.indexOf(`--`)===0;n==null||typeof n==`boolean`||n===``?r?e.setProperty(t,``):t===`float`?e.cssFloat=``:e[t]=``:r?e.setProperty(t,n):typeof n!=`number`||n===0||Zt.has(t)?t===`float`?e.cssFloat=n:e[t]=(``+n).trim():e[t]=n+`px`}function $t(e,t,n){if(t!=null&&typeof t!=`object`)throw Error(i(62));if(e=e.style,n!=null){for(var r in n)!n.hasOwnProperty(r)||t!=null&&t.hasOwnProperty(r)||(r.indexOf(`--`)===0?e.setProperty(r,``):r===`float`?e.cssFloat=``:e[r]=``);for(var a in t)r=t[a],t.hasOwnProperty(a)&&n[a]!==r&&Qt(e,a,r)}else for(var o in t)t.hasOwnProperty(o)&&Qt(e,o,t[o])}function en(e){if(e.indexOf(`-`)===-1)return!1;switch(e){case`annotation-xml`:case`color-profile`:case`font-face`:case`font-face-src`:case`font-face-uri`:case`font-face-format`:case`font-face-name`:case`missing-glyph`:return!1;default:return!0}}var tn=new Map([[`acceptCharset`,`accept-charset`],[`htmlFor`,`for`],[`httpEquiv`,`http-equiv`],[`crossOrigin`,`crossorigin`],[`accentHeight`,`accent-height`],[`alignmentBaseline`,`alignment-baseline`],[`arabicForm`,`arabic-form`],[`baselineShift`,`baseline-shift`],[`capHeight`,`cap-height`],[`clipPath`,`clip-path`],[`clipRule`,`clip-rule`],[`colorInterpolation`,`color-interpolation`],[`colorInterpolationFilters`,`color-interpolation-filters`],[`colorProfile`,`color-profile`],[`colorRendering`,`color-rendering`],[`dominantBaseline`,`dominant-baseline`],[`enableBackground`,`enable-background`],[`fillOpacity`,`fill-opacity`],[`fillRule`,`fill-rule`],[`floodColor`,`flood-color`],[`floodOpacity`,`flood-opacity`],[`fontFamily`,`font-family`],[`fontSize`,`font-size`],[`fontSizeAdjust`,`font-size-adjust`],[`fontStretch`,`font-stretch`],[`fontStyle`,`font-style`],[`fontVariant`,`font-variant`],[`fontWeight`,`font-weight`],[`glyphName`,`glyph-name`],[`glyphOrientationHorizontal`,`glyph-orientation-horizontal`],[`glyphOrientationVertical`,`glyph-orientation-vertical`],[`horizAdvX`,`horiz-adv-x`],[`horizOriginX`,`horiz-origin-x`],[`imageRendering`,`image-rendering`],[`letterSpacing`,`letter-spacing`],[`lightingColor`,`lighting-color`],[`markerEnd`,`marker-end`],[`markerMid`,`marker-mid`],[`markerStart`,`marker-start`],[`overlinePosition`,`overline-position`],[`overlineThickness`,`overline-thickness`],[`paintOrder`,`paint-order`],[`panose-1`,`panose-1`],[`pointerEvents`,`pointer-events`],[`renderingIntent`,`rendering-intent`],[`shapeRendering`,`shape-rendering`],[`stopColor`,`stop-color`],[`stopOpacity`,`stop-opacity`],[`strikethroughPosition`,`strikethrough-position`],[`strikethroughThickness`,`strikethrough-thickness`],[`strokeDasharray`,`stroke-dasharray`],[`strokeDashoffset`,`stroke-dashoffset`],[`strokeLinecap`,`stroke-linecap`],[`strokeLinejoin`,`stroke-linejoin`],[`strokeMiterlimit`,`stroke-miterlimit`],[`strokeOpacity`,`stroke-opacity`],[`strokeWidth`,`stroke-width`],[`textAnchor`,`text-anchor`],[`textDecoration`,`text-decoration`],[`textRendering`,`text-rendering`],[`transformOrigin`,`transform-origin`],[`underlinePosition`,`underline-position`],[`underlineThickness`,`underline-thickness`],[`unicodeBidi`,`unicode-bidi`],[`unicodeRange`,`unicode-range`],[`unitsPerEm`,`units-per-em`],[`vAlphabetic`,`v-alphabetic`],[`vHanging`,`v-hanging`],[`vIdeographic`,`v-ideographic`],[`vMathematical`,`v-mathematical`],[`vectorEffect`,`vector-effect`],[`vertAdvY`,`vert-adv-y`],[`vertOriginX`,`vert-origin-x`],[`vertOriginY`,`vert-origin-y`],[`wordSpacing`,`word-spacing`],[`writingMode`,`writing-mode`],[`xmlnsXlink`,`xmlns:xlink`],[`xHeight`,`x-height`]]),nn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function rn(e){return nn.test(``+e)?`javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')`:e}function an(){}var on=null;function sn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var cn=null,ln=null;function un(e){var t=St(e);if(t&&(e=t.stateNode)){var n=e[pt]||null;a:switch(e=t.stateNode,t.type){case`input`:if(Wt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type===`radio`&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll(`input[name="`+Ut(``+t)+`"][type="radio"]`),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=r[pt]||null;if(!a)throw Error(i(90));Wt(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<n.length;t++)r=n[t],r.form===e.form&&Bt(r)}break a;case`textarea`:Jt(e,n.value,n.defaultValue);break a;case`select`:t=n.value,t!=null&&qt(e,!!n.multiple,t,!1)}}}var dn=!1;function fn(e,t,n){if(dn)return e(t,n);dn=!0;try{return e(t)}finally{if(dn=!1,(cn!==null||ln!==null)&&(xu(),cn&&(t=cn,e=ln,ln=cn=null,un(t),e)))for(t=0;t<e.length;t++)un(e[t])}}function pn(e,t){var n=e.stateNode;if(n===null)return null;var r=n[pt]||null;if(r===null)return null;n=r[t];a:switch(t){case`onClick`:case`onClickCapture`:case`onDoubleClick`:case`onDoubleClickCapture`:case`onMouseDown`:case`onMouseDownCapture`:case`onMouseMove`:case`onMouseMoveCapture`:case`onMouseUp`:case`onMouseUpCapture`:case`onMouseEnter`:(r=!r.disabled)||(e=e.type,r=!(e===`button`||e===`input`||e===`select`||e===`textarea`)),e=!r;break a;default:e=!1}if(e)return null;if(n&&typeof n!=`function`)throw Error(i(231,t,typeof n));return n}var mn=!(typeof window>`u`||window.document===void 0||window.document.createElement===void 0),hn=!1;if(mn)try{var gn={};Object.defineProperty(gn,`passive`,{get:function(){hn=!0}}),window.addEventListener(`test`,gn,gn),window.removeEventListener(`test`,gn,gn)}catch{hn=!1}var _n=null,vn=null,yn=null;function bn(){if(yn)return yn;var e,t=vn,n=t.length,r,i=`value`in _n?_n.value:_n.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[a-r];r++);return yn=i.slice(e,1<r?1-r:void 0)}function xn(e){var t=e.keyCode;return`charCode`in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Sn(){return!0}function Cn(){return!1}function wn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented==null?!1===i.returnValue:i.defaultPrevented)?Sn:Cn,this.isPropagationStopped=Cn,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!=`unknown`&&(e.returnValue=!1),this.isDefaultPrevented=Sn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!=`unknown`&&(e.cancelBubble=!0),this.isPropagationStopped=Sn)},persist:function(){},isPersistent:Sn}),t}var Tn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},En=wn(Tn),Dn=h({},Tn,{view:0,detail:0}),On=wn(Dn),kn,An,jn,Mn=h({},Dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hn,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return`movementX`in e?e.movementX:(e!==jn&&(jn&&e.type===`mousemove`?(kn=e.screenX-jn.screenX,An=e.screenY-jn.screenY):An=kn=0,jn=e),kn)},movementY:function(e){return`movementY`in e?e.movementY:An}}),Nn=wn(Mn),Pn=wn(h({},Mn,{dataTransfer:0})),Fn=wn(h({},Dn,{relatedTarget:0})),In=wn(h({},Tn,{animationName:0,elapsedTime:0,pseudoElement:0})),Ln=wn(h({},Tn,{clipboardData:function(e){return`clipboardData`in e?e.clipboardData:window.clipboardData}})),Rn=wn(h({},Tn,{data:0})),zn={Esc:`Escape`,Spacebar:` `,Left:`ArrowLeft`,Up:`ArrowUp`,Right:`ArrowRight`,Down:`ArrowDown`,Del:`Delete`,Win:`OS`,Menu:`ContextMenu`,Apps:`ContextMenu`,Scroll:`ScrollLock`,MozPrintableKey:`Unidentified`},Bn={8:`Backspace`,9:`Tab`,12:`Clear`,13:`Enter`,16:`Shift`,17:`Control`,18:`Alt`,19:`Pause`,20:`CapsLock`,27:`Escape`,32:` `,33:`PageUp`,34:`PageDown`,35:`End`,36:`Home`,37:`ArrowLeft`,38:`ArrowUp`,39:`ArrowRight`,40:`ArrowDown`,45:`Insert`,46:`Delete`,112:`F1`,113:`F2`,114:`F3`,115:`F4`,116:`F5`,117:`F6`,118:`F7`,119:`F8`,120:`F9`,121:`F10`,122:`F11`,123:`F12`,144:`NumLock`,145:`ScrollLock`,224:`Meta`},Vn={Alt:`altKey`,Control:`ctrlKey`,Meta:`metaKey`,Shift:`shiftKey`};function P(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Vn[e])?!!t[e]:!1}function Hn(){return P}var Un=wn(h({},Dn,{key:function(e){if(e.key){var t=zn[e.key]||e.key;if(t!==`Unidentified`)return t}return e.type===`keypress`?(e=xn(e),e===13?`Enter`:String.fromCharCode(e)):e.type===`keydown`||e.type===`keyup`?Bn[e.keyCode]||`Unidentified`:``},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hn,charCode:function(e){return e.type===`keypress`?xn(e):0},keyCode:function(e){return e.type===`keydown`||e.type===`keyup`?e.keyCode:0},which:function(e){return e.type===`keypress`?xn(e):e.type===`keydown`||e.type===`keyup`?e.keyCode:0}})),Wn=wn(h({},Mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Gn=wn(h({},Dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hn})),Kn=wn(h({},Tn,{propertyName:0,elapsedTime:0,pseudoElement:0})),qn=wn(h({},Mn,{deltaX:function(e){return`deltaX`in e?e.deltaX:`wheelDeltaX`in e?-e.wheelDeltaX:0},deltaY:function(e){return`deltaY`in e?e.deltaY:`wheelDeltaY`in e?-e.wheelDeltaY:`wheelDelta`in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Jn=wn(h({},Tn,{newState:0,oldState:0})),Yn=[9,13,27,32],Xn=mn&&`CompositionEvent`in window,Zn=null;mn&&`documentMode`in document&&(Zn=document.documentMode);var Qn=mn&&`TextEvent`in window&&!Zn,$n=mn&&(!Xn||Zn&&8<Zn&&11>=Zn),er=` `,tr=!1;function nr(e,t){switch(e){case`keyup`:return Yn.indexOf(t.keyCode)!==-1;case`keydown`:return t.keyCode!==229;case`keypress`:case`mousedown`:case`focusout`:return!0;default:return!1}}function rr(e){return e=e.detail,typeof e==`object`&&`data`in e?e.data:null}var ir=!1;function ar(e,t){switch(e){case`compositionend`:return rr(t);case`keypress`:return t.which===32?(tr=!0,er):null;case`textInput`:return e=t.data,e===er&&tr?null:e;default:return null}}function or(e,t){if(ir)return e===`compositionend`||!Xn&&nr(e,t)?(e=bn(),yn=vn=_n=null,ir=!1,e):null;switch(e){case`paste`:return null;case`keypress`:if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case`compositionend`:return $n&&t.locale!==`ko`?null:t.data;default:return null}}var sr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t===`input`?!!sr[e.type]:t===`textarea`}function lr(e,t,n,r){cn?ln?ln.push(r):ln=[r]:cn=r,t=Dd(t,`onChange`),0<t.length&&(n=new En(`onChange`,`change`,null,n,r),e.push({event:n,listeners:t}))}var ur=null,dr=null;function fr(e){bd(e,0)}function pr(e){if(Bt(Ct(e)))return e}function mr(e,t){if(e===`change`)return t}var hr=!1;if(mn){var gr;if(mn){var _r=`oninput`in document;if(!_r){var vr=document.createElement(`div`);vr.setAttribute(`oninput`,`return;`),_r=typeof vr.oninput==`function`}gr=_r}else gr=!1;hr=gr&&(!document.documentMode||9<document.documentMode)}function yr(){ur&&(ur.detachEvent(`onpropertychange`,br),dr=ur=null)}function br(e){if(e.propertyName===`value`&&pr(dr)){var t=[];lr(t,dr,e,sn(e)),fn(fr,t)}}function xr(e,t,n){e===`focusin`?(yr(),ur=t,dr=n,ur.attachEvent(`onpropertychange`,br)):e===`focusout`&&yr()}function Sr(e){if(e===`selectionchange`||e===`keyup`||e===`keydown`)return pr(dr)}function Cr(e,t){if(e===`click`)return pr(t)}function wr(e,t){if(e===`input`||e===`change`)return pr(t)}function Tr(e,t){return e===t&&(e!==0||1/e==1/t)||e!==e&&t!==t}var Er=typeof Object.is==`function`?Object.is:Tr;function Dr(e,t){if(Er(e,t))return!0;if(typeof e!=`object`||!e||typeof t!=`object`||!t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!De.call(t,i)||!Er(e[i],t[i]))return!1}return!0}function Or(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function kr(e,t){var n=Or(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}a:{for(;n;){if(n.nextSibling){n=n.nextSibling;break a}n=n.parentNode}n=void 0}n=Or(n)}}function Ar(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ar(e,t.parentNode):`contains`in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function jr(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Vt(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href==`string`}catch{n=!1}if(n)e=t.contentWindow;else break;t=Vt(e.document)}return t}function Mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t===`input`&&(e.type===`text`||e.type===`search`||e.type===`tel`||e.type===`url`||e.type===`password`)||t===`textarea`||e.contentEditable===`true`)}var Nr=mn&&`documentMode`in document&&11>=document.documentMode,Pr=null,Fr=null,Ir=null,Lr=!1;function Rr(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Lr||Pr==null||Pr!==Vt(r)||(r=Pr,`selectionStart`in r&&Mr(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ir&&Dr(Ir,r)||(Ir=r,r=Dd(Fr,`onSelect`),0<r.length&&(t=new En(`onSelect`,`select`,null,t,n),e.push({event:t,listeners:r}),t.target=Pr)))}function zr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n[`Webkit`+e]=`webkit`+t,n[`Moz`+e]=`moz`+t,n}var Br={animationend:zr(`Animation`,`AnimationEnd`),animationiteration:zr(`Animation`,`AnimationIteration`),animationstart:zr(`Animation`,`AnimationStart`),transitionrun:zr(`Transition`,`TransitionRun`),transitionstart:zr(`Transition`,`TransitionStart`),transitioncancel:zr(`Transition`,`TransitionCancel`),transitionend:zr(`Transition`,`TransitionEnd`)},Vr={},Hr={};mn&&(Hr=document.createElement(`div`).style,`AnimationEvent`in window||(delete Br.animationend.animation,delete Br.animationiteration.animation,delete Br.animationstart.animation),`TransitionEvent`in window||delete Br.transitionend.transition);function Ur(e){if(Vr[e])return Vr[e];if(!Br[e])return e;var t=Br[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Hr)return Vr[e]=t[n];return e}var Wr=Ur(`animationend`),Gr=Ur(`animationiteration`),Kr=Ur(`animationstart`),qr=Ur(`transitionrun`),Jr=Ur(`transitionstart`),Yr=Ur(`transitioncancel`),Xr=Ur(`transitionend`),Zr=new Map,Qr=`abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel`.split(` `);Qr.push(`scrollEnd`);function $r(e,t){Zr.set(e,t),Ot(t,[e])}var ei=typeof reportError==`function`?reportError:function(e){if(typeof window==`object`&&typeof window.ErrorEvent==`function`){var t=new window.ErrorEvent(`error`,{bubbles:!0,cancelable:!0,message:typeof e==`object`&&e&&typeof e.message==`string`?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process==`object`&&typeof process.emit==`function`){process.emit(`uncaughtException`,e);return}console.error(e)},ti=[],ni=0,ri=0;function ii(){for(var e=ni,t=ri=ni=0;t<e;){var n=ti[t];ti[t++]=null;var r=ti[t];ti[t++]=null;var i=ti[t];ti[t++]=null;var a=ti[t];if(ti[t++]=null,r!==null&&i!==null){var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}a!==0&&ci(n,i,a)}}function ai(e,t,n,r){ti[ni++]=e,ti[ni++]=t,ti[ni++]=n,ti[ni++]=r,ri|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function oi(e,t,n,r){return ai(e,t,n,r),li(e)}function si(e,t){return ai(e,null,null,t),li(e)}function ci(e,t,n){e.lanes|=n;var r=e.alternate;r!==null&&(r.lanes|=n);for(var i=!1,a=e.return;a!==null;)a.childLanes|=n,r=a.alternate,r!==null&&(r.childLanes|=n),a.tag===22&&(e=a.stateNode,e===null||e._visibility&1||(i=!0)),e=a,a=a.return;return e.tag===3?(a=e.stateNode,i&&t!==null&&(i=31-We(n),e=a.hiddenUpdates,r=e[i],r===null?e[i]=[t]:r.push(t),t.lane=n|536870912),a):null}function li(e){if(50<fu)throw fu=0,pu=null,Error(i(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ui={};function di(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fi(e,t,n,r){return new di(e,t,n,r)}function pi(e){return e=e.prototype,!(!e||!e.isReactComponent)}function mi(e,t){var n=e.alternate;return n===null?(n=fi(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function hi(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function gi(e,t,n,r,a,o){var s=0;if(r=e,typeof e==`function`)pi(e)&&(s=1);else if(typeof e==`string`)s=Wf(e,n,fe.current)?26:e===`html`||e===`head`||e===`body`?27:5;else a:switch(e){case ee:return e=fi(31,n,t,a),e.elementType=ee,e.lanes=o,e;case y:return _i(n.children,a,o,t);case b:s=8,a|=24;break;case x:return e=fi(12,n,t,a|2),e.elementType=x,e.lanes=o,e;case T:return e=fi(13,n,t,a),e.elementType=T,e.lanes=o,e;case E:return e=fi(19,n,t,a),e.elementType=E,e.lanes=o,e;default:if(typeof e==`object`&&e)switch(e.$$typeof){case C:s=10;break a;case S:s=9;break a;case w:s=11;break a;case D:s=14;break a;case O:s=16,r=null;break a}s=29,n=Error(i(130,e===null?`null`:typeof e,``)),r=null}return t=fi(s,n,t,a),t.elementType=e,t.type=r,t.lanes=o,t}function _i(e,t,n,r){return e=fi(7,e,r,t),e.lanes=n,e}function vi(e,t,n){return e=fi(6,e,null,t),e.lanes=n,e}function yi(e){var t=fi(18,null,null,0);return t.stateNode=e,t}function bi(e,t,n){return t=fi(4,e.children===null?[]:e.children,e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var xi=new WeakMap;function Si(e,t){if(typeof e==`object`&&e){var n=xi.get(e);return n===void 0?(t={value:e,source:t,stack:Ee(t)},xi.set(e,t),t):n}return{value:e,source:t,stack:Ee(t)}}var Ci=[],wi=0,Ti=null,Ei=0,Di=[],Oi=0,ki=null,Ai=1,ji=``;function Mi(e,t){Ci[wi++]=Ei,Ci[wi++]=Ti,Ti=e,Ei=t}function Ni(e,t,n){Di[Oi++]=Ai,Di[Oi++]=ji,Di[Oi++]=ki,ki=e;var r=Ai;e=ji;var i=32-We(r)-1;r&=~(1<<i),n+=1;var a=32-We(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ai=1<<32-We(t)+i|n<<i|r,ji=a+e}else Ai=1<<a|n<<i|r,ji=e}function Pi(e){e.return!==null&&(Mi(e,1),Ni(e,1,0))}function Fi(e){for(;e===Ti;)Ti=Ci[--wi],Ci[wi]=null,Ei=Ci[--wi],Ci[wi]=null;for(;e===ki;)ki=Di[--Oi],Di[Oi]=null,ji=Di[--Oi],Di[Oi]=null,Ai=Di[--Oi],Di[Oi]=null}function Ii(e,t){Di[Oi++]=Ai,Di[Oi++]=ji,Di[Oi++]=ki,Ai=t.id,ji=t.overflow,ki=e}var Li=null,Ri=null,F=!1,zi=null,Bi=!1,Vi=Error(i(519));function Hi(e){throw Ji(Si(Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?`text`:`HTML`,``)),e)),Vi}function Ui(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[ft]=e,t[pt]=r,n){case`dialog`:Z(`cancel`,t),Z(`close`,t);break;case`iframe`:case`object`:case`embed`:Z(`load`,t);break;case`video`:case`audio`:for(n=0;n<vd.length;n++)Z(vd[n],t);break;case`source`:Z(`error`,t);break;case`img`:case`image`:case`link`:Z(`error`,t),Z(`load`,t);break;case`details`:Z(`toggle`,t);break;case`input`:Z(`invalid`,t),Gt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case`select`:Z(`invalid`,t);break;case`textarea`:Z(`invalid`,t),Yt(t,r.value,r.defaultValue,r.children)}n=r.children,typeof n!=`string`&&typeof n!=`number`&&typeof n!=`bigint`||t.textContent===``+n||!0===r.suppressHydrationWarning||Md(t.textContent,n)?(r.popover!=null&&(Z(`beforetoggle`,t),Z(`toggle`,t)),r.onScroll!=null&&Z(`scroll`,t),r.onScrollEnd!=null&&Z(`scrollend`,t),r.onClick!=null&&(t.onclick=an),t=!0):t=!1,t||Hi(e,!0)}function Wi(e){for(Li=e.return;Li;)switch(Li.tag){case 5:case 31:case 13:Bi=!1;return;case 27:case 3:Bi=!0;return;default:Li=Li.return}}function Gi(e){if(e!==Li)return!1;if(!F)return Wi(e),F=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!==`form`&&n!==`button`)||Wd(e.type,e.memoizedProps)),n=!n),n&&Ri&&Hi(e),Wi(e),t===13){if(e=e.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(i(317));Ri=df(e)}else if(t===31){if(e=e.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(i(317));Ri=df(e)}else t===27?(t=Ri,Qd(e.type)?(e=uf,uf=null,Ri=e):Ri=t):Ri=Li?lf(e.stateNode.nextSibling):null;return!0}function Ki(){Ri=Li=null,F=!1}function qi(){var e=zi;return e!==null&&(Ql===null?Ql=e:Ql.push.apply(Ql,e),zi=null),e}function Ji(e){zi===null?zi=[e]:zi.push(e)}var Yi=le(null),Xi=null,Zi=null;function Qi(e,t,n){de(Yi,t._currentValue),t._currentValue=n}function $i(e){e._currentValue=Yi.current,ue(Yi)}function ea(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)===t?r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t):(e.childLanes|=t,r!==null&&(r.childLanes|=t)),e===n)break;e=e.return}}function ta(e,t,n,r){var a=e.child;for(a!==null&&(a.return=e);a!==null;){var o=a.dependencies;if(o!==null){var s=a.child;o=o.firstContext;a:for(;o!==null;){var c=o;o=a;for(var l=0;l<t.length;l++)if(c.context===t[l]){o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),ea(o.return,n,e),r||(s=null);break a}o=c.next}}else if(a.tag===18){if(s=a.return,s===null)throw Error(i(341));s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),ea(s,n,e),s=null}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===e){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}}function na(e,t,n,r){e=null;for(var a=t,o=!1;a!==null;){if(!o){if(a.flags&524288)o=!0;else if(a.flags&262144)break}if(a.tag===10){var s=a.alternate;if(s===null)throw Error(i(387));if(s=s.memoizedProps,s!==null){var c=a.type;Er(a.pendingProps.value,s.value)||(e===null?e=[c]:e.push(c))}}else if(a===he.current){if(s=a.alternate,s===null)throw Error(i(387));s.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(e===null?e=[$f]:e.push($f))}a=a.return}e!==null&&ta(t,e,n,r),t.flags|=262144}function ra(e){for(e=e.firstContext;e!==null;){if(!Er(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ia(e){Xi=e,Zi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function aa(e){return sa(Xi,e)}function oa(e,t){return Xi===null&&ia(e),sa(e,t)}function sa(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Zi===null){if(e===null)throw Error(i(308));Zi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Zi=Zi.next=t;return n}var ca=typeof AbortController<`u`?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},la=t.unstable_scheduleCallback,ua=t.unstable_NormalPriority,da={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function fa(){return{controller:new ca,data:new Map,refCount:0}}function pa(e){e.refCount--,e.refCount===0&&la(ua,function(){e.controller.abort()})}var ma=null,ha=0,ga=0,_a=null;function va(e,t){if(ma===null){var n=ma=[];ha=0,ga=fd(),_a={status:`pending`,value:void 0,then:function(e){n.push(e)}}}return ha++,t.then(ya,ya),t}function ya(){if(--ha===0&&ma!==null){_a!==null&&(_a.status=`fulfilled`);var e=ma;ma=null,ga=0,_a=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function ba(e,t){var n=[],r={status:`pending`,value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status=`fulfilled`,r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status=`rejected`,r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}var xa=A.S;A.S=function(e,t){tu=Me(),typeof t==`object`&&t&&typeof t.then==`function`&&va(e,t),xa!==null&&xa(e,t)};var Sa=le(null);function Ca(){var e=Sa.current;return e===null?Rl.pooledCache:e}function wa(e,t){t===null?de(Sa,Sa.current):de(Sa,t.pool)}function Ta(){var e=Ca();return e===null?null:{parent:da._currentValue,pool:e}}var Ea=Error(i(460)),Da=Error(i(474)),Oa=Error(i(542)),ka={then:function(){}};function Aa(e){return e=e.status,e===`fulfilled`||e===`rejected`}function ja(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(an,an),t=n),t.status){case`fulfilled`:return t.value;case`rejected`:throw e=t.reason,Fa(e),e;default:if(typeof t.status==`string`)t.then(an,an);else{if(e=Rl,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=t,e.status=`pending`,e.then(function(e){if(t.status===`pending`){var n=t;n.status=`fulfilled`,n.value=e}},function(e){if(t.status===`pending`){var n=t;n.status=`rejected`,n.reason=e}})}switch(t.status){case`fulfilled`:return t.value;case`rejected`:throw e=t.reason,Fa(e),e}throw Na=t,Ea}}function Ma(e){try{var t=e._init;return t(e._payload)}catch(e){throw typeof e==`object`&&e&&typeof e.then==`function`?(Na=e,Ea):e}}var Na=null;function Pa(){if(Na===null)throw Error(i(459));var e=Na;return Na=null,e}function Fa(e){if(e===Ea||e===Oa)throw Error(i(483))}var Ia=null,La=0;function Ra(e){var t=La;return La+=1,Ia===null&&(Ia=[]),ja(Ia,e,t)}function za(e,t){t=t.props.ref,e.ref=t===void 0?null:t}function Ba(e,t){throw t.$$typeof===g?Error(i(525)):(e=Object.prototype.toString.call(t),Error(i(31,e===`[object Object]`?`object with keys {`+Object.keys(t).join(`, `)+`}`:e)))}function Va(e){function t(t,n){if(e){var r=t.deletions;r===null?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;r!==null;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;e!==null;)e.key===null?t.set(e.index,e):t.set(e.key,e),e=e.sibling;return t}function a(e,t){return e=mi(e,t),e.index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?(r=t.alternate,r===null?(t.flags|=67108866,n):(r=r.index,r<n?(t.flags|=67108866,n):r)):(t.flags|=1048576,n)}function s(t){return e&&t.alternate===null&&(t.flags|=67108866),t}function c(e,t,n,r){return t===null||t.tag!==6?(t=vi(n,e.mode,r),t.return=e,t):(t=a(t,n),t.return=e,t)}function l(e,t,n,r){var i=n.type;return i===y?d(e,t,n.props.children,r,n.key):t!==null&&(t.elementType===i||typeof i==`object`&&i&&i.$$typeof===O&&Ma(i)===t.type)?(t=a(t,n.props),za(t,n),t.return=e,t):(t=gi(n.type,n.key,n.props,null,e.mode,r),za(t,n),t.return=e,t)}function u(e,t,n,r){return t===null||t.tag!==4||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=bi(n,e.mode,r),t.return=e,t):(t=a(t,n.children||[]),t.return=e,t)}function d(e,t,n,r,i){return t===null||t.tag!==7?(t=_i(n,e.mode,r,i),t.return=e,t):(t=a(t,n),t.return=e,t)}function f(e,t,n){if(typeof t==`string`&&t!==``||typeof t==`number`||typeof t==`bigint`)return t=vi(``+t,e.mode,n),t.return=e,t;if(typeof t==`object`&&t){switch(t.$$typeof){case _:return n=gi(t.type,t.key,t.props,null,e.mode,n),za(n,t),n.return=e,n;case v:return t=bi(t,e.mode,n),t.return=e,t;case O:return t=Ma(t),f(e,t,n)}if(ae(t)||ne(t))return t=_i(t,e.mode,n,null),t.return=e,t;if(typeof t.then==`function`)return f(e,Ra(t),n);if(t.$$typeof===C)return f(e,oa(e,t),n);Ba(e,t)}return null}function p(e,t,n,r){var i=t===null?null:t.key;if(typeof n==`string`&&n!==``||typeof n==`number`||typeof n==`bigint`)return i===null?c(e,t,``+n,r):null;if(typeof n==`object`&&n){switch(n.$$typeof){case _:return n.key===i?l(e,t,n,r):null;case v:return n.key===i?u(e,t,n,r):null;case O:return n=Ma(n),p(e,t,n,r)}if(ae(n)||ne(n))return i===null?d(e,t,n,r,null):null;if(typeof n.then==`function`)return p(e,t,Ra(n),r);if(n.$$typeof===C)return p(e,t,oa(e,n),r);Ba(e,n)}return null}function m(e,t,n,r,i){if(typeof r==`string`&&r!==``||typeof r==`number`||typeof r==`bigint`)return e=e.get(n)||null,c(t,e,``+r,i);if(typeof r==`object`&&r){switch(r.$$typeof){case _:return e=e.get(r.key===null?n:r.key)||null,l(t,e,r,i);case v:return e=e.get(r.key===null?n:r.key)||null,u(t,e,r,i);case O:return r=Ma(r),m(e,t,n,r,i)}if(ae(r)||ne(r))return e=e.get(n)||null,d(t,e,r,i,null);if(typeof r.then==`function`)return m(e,t,n,Ra(r),i);if(r.$$typeof===C)return m(e,t,n,oa(t,r),i);Ba(t,r)}return null}function h(i,a,s,c){for(var l=null,u=null,d=a,h=a=0,g=null;d!==null&&h<s.length;h++){d.index>h?(g=d,d=null):g=d.sibling;var _=p(i,d,s[h],c);if(_===null){d===null&&(d=g);break}e&&d&&_.alternate===null&&t(i,d),a=o(_,a,h),u===null?l=_:u.sibling=_,u=_,d=g}if(h===s.length)return n(i,d),F&&Mi(i,h),l;if(d===null){for(;h<s.length;h++)d=f(i,s[h],c),d!==null&&(a=o(d,a,h),u===null?l=d:u.sibling=d,u=d);return F&&Mi(i,h),l}for(d=r(d);h<s.length;h++)g=m(d,i,h,s[h],c),g!==null&&(e&&g.alternate!==null&&d.delete(g.key===null?h:g.key),a=o(g,a,h),u===null?l=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(i,e)}),F&&Mi(i,h),l}function g(a,s,c,l){if(c==null)throw Error(i(151));for(var u=null,d=null,h=s,g=s=0,_=null,v=c.next();h!==null&&!v.done;g++,v=c.next()){h.index>g?(_=h,h=null):_=h.sibling;var y=p(a,h,v.value,l);if(y===null){h===null&&(h=_);break}e&&h&&y.alternate===null&&t(a,h),s=o(y,s,g),d===null?u=y:d.sibling=y,d=y,h=_}if(v.done)return n(a,h),F&&Mi(a,g),u;if(h===null){for(;!v.done;g++,v=c.next())v=f(a,v.value,l),v!==null&&(s=o(v,s,g),d===null?u=v:d.sibling=v,d=v);return F&&Mi(a,g),u}for(h=r(h);!v.done;g++,v=c.next())v=m(h,a,g,v.value,l),v!==null&&(e&&v.alternate!==null&&h.delete(v.key===null?g:v.key),s=o(v,s,g),d===null?u=v:d.sibling=v,d=v);return e&&h.forEach(function(e){return t(a,e)}),F&&Mi(a,g),u}function b(e,r,o,c){if(typeof o==`object`&&o&&o.type===y&&o.key===null&&(o=o.props.children),typeof o==`object`&&o){switch(o.$$typeof){case _:a:{for(var l=o.key;r!==null;){if(r.key===l){if(l=o.type,l===y){if(r.tag===7){n(e,r.sibling),c=a(r,o.props.children),c.return=e,e=c;break a}}else if(r.elementType===l||typeof l==`object`&&l&&l.$$typeof===O&&Ma(l)===r.type){n(e,r.sibling),c=a(r,o.props),za(c,o),c.return=e,e=c;break a}n(e,r);break}else t(e,r);r=r.sibling}o.type===y?(c=_i(o.props.children,e.mode,c,o.key),c.return=e,e=c):(c=gi(o.type,o.key,o.props,null,e.mode,c),za(c,o),c.return=e,e=c)}return s(e);case v:a:{for(l=o.key;r!==null;){if(r.key===l)if(r.tag===4&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),c=a(r,o.children||[]),c.return=e,e=c;break a}else{n(e,r);break}else t(e,r);r=r.sibling}c=bi(o,e.mode,c),c.return=e,e=c}return s(e);case O:return o=Ma(o),b(e,r,o,c)}if(ae(o))return h(e,r,o,c);if(ne(o)){if(l=ne(o),typeof l!=`function`)throw Error(i(150));return o=l.call(o),g(e,r,o,c)}if(typeof o.then==`function`)return b(e,r,Ra(o),c);if(o.$$typeof===C)return b(e,r,oa(e,o),c);Ba(e,o)}return typeof o==`string`&&o!==``||typeof o==`number`||typeof o==`bigint`?(o=``+o,r!==null&&r.tag===6?(n(e,r.sibling),c=a(r,o),c.return=e,e=c):(n(e,r),c=vi(o,e.mode,c),c.return=e,e=c),s(e)):n(e,r)}return function(e,t,n,r){try{La=0;var i=b(e,t,n,r);return Ia=null,i}catch(t){if(t===Ea||t===Oa)throw t;var a=fi(29,t,null,e.mode);return a.lanes=r,a.return=e,a}}}var Ha=Va(!0),Ua=Va(!1),Wa=!1;function Ga(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ka(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function qa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ja(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ll&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=li(e),ci(e,null,n),t}return ai(e,r,t,n),li(e)}function Ya(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,n&4194048)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,at(e,n)}}function Xa(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Za=!1;function Qa(){if(Za){var e=_a;if(e!==null)throw e}}function $a(e,t,n,r){Za=!1;var i=e.updateQueue;Wa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var c=s,l=c.next;c.next=null,o===null?a=l:o.next=l,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,s=u.lastBaseUpdate,s!==o&&(s===null?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=c))}if(a!==null){var d=i.baseState;o=0,u=l=c=null,s=a;do{var f=s.lane&-536870913,p=f!==s.lane;if(p?(Y&f)===f:(r&f)===f){f!==0&&f===ga&&(Za=!0),u!==null&&(u=u.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});a:{var m=e,g=s;f=t;var _=n;switch(g.tag){case 1:if(m=g.payload,typeof m==`function`){d=m.call(_,d,f);break a}d=m;break a;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m==`function`?m.call(_,d,f):m,f==null)break a;d=h({},d,f);break a;case 2:Wa=!0}}f=s.callback,f!==null&&(e.flags|=64,p&&(e.flags|=8192),p=i.callbacks,p===null?i.callbacks=[f]:p.push(f))}else p={lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(l=u=p,c=d):u=u.next=p,o|=f;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;p=s,s=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);u===null&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,a===null&&(i.shared.lanes=0),Kl|=o,e.lanes=o,e.memoizedState=d}}function eo(e,t){if(typeof e!=`function`)throw Error(i(191,e));e.call(t)}function to(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)eo(n[e],t)}var no=le(null),ro=le(0);function io(e,t){e=Wl,de(ro,e),de(no,t),Wl=e|t.baseLanes}function ao(){de(ro,Wl),de(no,no.current)}function oo(){Wl=ro.current,ue(no),ue(ro)}var so=le(null),co=null;function lo(e){var t=e.alternate;de(ho,ho.current&1),de(so,e),co===null&&(t===null||no.current!==null||t.memoizedState!==null)&&(co=e)}function uo(e){de(ho,ho.current),de(so,e),co===null&&(co=e)}function fo(e){e.tag===22?(de(ho,ho.current),de(so,e),co===null&&(co=e)):po(e)}function po(){de(ho,ho.current),de(so,so.current)}function mo(e){ue(so),co===e&&(co=null),ue(ho)}var ho=le(0);function go(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||of(n)||sf(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder===`forwards`||t.memoizedProps.revealOrder===`backwards`||t.memoizedProps.revealOrder===`unstable_legacy-backwards`||t.memoizedProps.revealOrder===`together`)){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var _o=0,I=null,vo=null,yo=null,bo=!1,xo=!1,So=!1,Co=0,wo=0,To=null,Eo=0;function Do(){throw Error(i(321))}function Oo(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Er(e[n],t[n]))return!1;return!0}function ko(e,t,n,r,i,a){return _o=a,I=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,A.H=e===null||e.memoizedState===null?L:Ks,So=!1,a=n(r,i),So=!1,xo&&(a=jo(t,n,r,i)),Ao(e),a}function Ao(e){A.H=Gs;var t=vo!==null&&vo.next!==null;if(_o=0,yo=vo=I=null,bo=!1,wo=0,To=null,t)throw Error(i(300));e===null||ac||(e=e.dependencies,e!==null&&ra(e)&&(ac=!0))}function jo(e,t,n,r){I=e;var a=0;do{if(xo&&(To=null),wo=0,xo=!1,25<=a)throw Error(i(301));if(a+=1,yo=vo=null,e.updateQueue!=null){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}A.H=qs,o=t(n,r)}while(xo);return o}function Mo(){var e=A.H,t=e.useState()[0];return t=typeof t.then==`function`?zo(t):t,e=e.useState()[0],(vo===null?null:vo.memoizedState)!==e&&(I.flags|=1024),t}function No(){var e=Co!==0;return Co=0,e}function Po(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Fo(e){if(bo){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}bo=!1}_o=0,yo=vo=I=null,xo=!1,wo=Co=0,To=null}function Io(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yo===null?I.memoizedState=yo=e:yo=yo.next=e,yo}function Lo(){if(vo===null){var e=I.alternate;e=e===null?null:e.memoizedState}else e=vo.next;var t=yo===null?I.memoizedState:yo.next;if(t!==null)yo=t,vo=e;else{if(e===null)throw I.alternate===null?Error(i(467)):Error(i(310));vo=e,e={memoizedState:vo.memoizedState,baseState:vo.baseState,baseQueue:vo.baseQueue,queue:vo.queue,next:null},yo===null?I.memoizedState=yo=e:yo=yo.next=e}return yo}function Ro(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function zo(e){var t=wo;return wo+=1,To===null&&(To=[]),e=ja(To,e,t),t=I,(yo===null?t.memoizedState:yo.next)===null&&(t=t.alternate,A.H=t===null||t.memoizedState===null?L:Ks),e}function Bo(e){if(typeof e==`object`&&e){if(typeof e.then==`function`)return zo(e);if(e.$$typeof===C)return aa(e)}throw Error(i(438,String(e)))}function Vo(e){var t=null,n=I.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var r=I.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(t??={data:[],index:0},n===null&&(n=Ro(),I.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=k;return t.index++,n}function Ho(e,t){return typeof t==`function`?t(e):t}function Uo(e){return Wo(Lo(),vo,e)}function Wo(e,t,n){var r=e.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=n;var a=e.baseQueue,o=r.pending;if(o!==null){if(a!==null){var s=a.next;a.next=o.next,o.next=s}t.baseQueue=a=o,r.pending=null}if(o=e.baseState,a===null)e.memoizedState=o;else{t=a.next;var c=s=null,l=null,u=t,d=!1;do{var f=u.lane&-536870913;if(f===u.lane?(_o&f)===f:(Y&f)===f){var p=u.revertLane;if(p===0)l!==null&&(l=l.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),f===ga&&(d=!0);else if((_o&p)===p){u=u.next,p===ga&&(d=!0);continue}else f={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(c=l=f,s=o):l=l.next=f,I.lanes|=p,Kl|=p;f=u.action,So&&n(o,f),o=u.hasEagerState?u.eagerState:n(o,f)}else p={lane:f,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(c=l=p,s=o):l=l.next=p,I.lanes|=f,Kl|=f;u=u.next}while(u!==null&&u!==t);if(l===null?s=o:l.next=c,!Er(o,e.memoizedState)&&(ac=!0,d&&(n=_a,n!==null)))throw n;e.memoizedState=o,e.baseState=s,e.baseQueue=l,r.lastRenderedState=o}return a===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Go(e){var t=Lo(),n=t.queue;if(n===null)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(a!==null){n.pending=null;var s=a=a.next;do o=e(o,s.action),s=s.next;while(s!==a);Er(o,t.memoizedState)||(ac=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ko(e,t,n){var r=I,a=Lo(),o=F;if(o){if(n===void 0)throw Error(i(407));n=n()}else n=t();var s=!Er((vo||a).memoizedState,n);if(s&&(a.memoizedState=n,ac=!0),a=a.queue,_s(Yo.bind(null,r,a,e),[e]),a.getSnapshot!==t||s||yo!==null&&yo.memoizedState.tag&1){if(r.flags|=2048,fs(9,{destroy:void 0},Jo.bind(null,r,a,n,t),null),Rl===null)throw Error(i(349));o||_o&127||qo(r,t,n)}return n}function qo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=I.updateQueue,t===null?(t=Ro(),I.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Jo(e,t,n,r){t.value=n,t.getSnapshot=r,Xo(t)&&Zo(e)}function Yo(e,t,n){return n(function(){Xo(t)&&Zo(e)})}function Xo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Er(e,n)}catch{return!0}}function Zo(e){var t=si(e,2);t!==null&&gu(t,e,2)}function Qo(e){var t=Io();if(typeof e==`function`){var n=e;if(e=n(),So){Ue(!0);try{n()}finally{Ue(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ho,lastRenderedState:e},t}function $o(e,t,n,r){return e.baseState=n,Wo(e,vo,typeof r==`function`?r:Ho)}function es(e,t,n,r,a){if(Hs(e))throw Error(i(485));if(e=t.action,e!==null){var o={payload:a,action:e,next:null,isTransition:!0,status:`pending`,value:null,reason:null,listeners:[],then:function(e){o.listeners.push(e)}};A.T===null?o.isTransition=!1:n(!0),r(o),n=t.pending,n===null?(o.next=t.pending=o,ts(t,o)):(o.next=n.next,t.pending=n.next=o)}}function ts(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var a=A.T,o={};A.T=o;try{var s=n(i,r),c=A.S;c!==null&&c(o,s),ns(e,t,s)}catch(n){is(e,t,n)}finally{a!==null&&o.types!==null&&(a.types=o.types),A.T=a}}else try{a=n(i,r),ns(e,t,a)}catch(n){is(e,t,n)}}function ns(e,t,n){typeof n==`object`&&n&&typeof n.then==`function`?n.then(function(n){rs(e,t,n)},function(n){return is(e,t,n)}):rs(e,t,n)}function rs(e,t,n){t.status=`fulfilled`,t.value=n,as(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,ts(e,n)))}function is(e,t,n){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do t.status=`rejected`,t.reason=n,as(t),t=t.next;while(t!==r)}e.action=null}function as(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function os(e,t){return t}function ss(e,t){if(F){var n=Rl.formState;if(n!==null){a:{var r=I;if(F){if(Ri){b:{for(var i=Ri,a=Bi;i.nodeType!==8;){if(!a){i=null;break b}if(i=lf(i.nextSibling),i===null){i=null;break b}}a=i.data,i=a===`F!`||a===`F`?i:null}if(i){Ri=lf(i.nextSibling),r=i.data===`F!`;break a}}Hi(r)}r=!1}r&&(t=n[0])}}return n=Io(),n.memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:os,lastRenderedState:t},n.queue=r,n=zs.bind(null,I,r),r.dispatch=n,r=Qo(!1),a=Vs.bind(null,I,!1,r.queue),r=Io(),i={state:t,dispatch:null,action:e,pending:null},r.queue=i,n=es.bind(null,I,i,a,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function cs(e){return ls(Lo(),vo,e)}function ls(e,t,n){if(t=Wo(e,t,os)[0],e=Uo(Ho)[0],typeof t==`object`&&t&&typeof t.then==`function`)try{var r=zo(t)}catch(e){throw e===Ea?Oa:e}else r=t;t=Lo();var i=t.queue,a=i.dispatch;return n!==t.memoizedState&&(I.flags|=2048,fs(9,{destroy:void 0},us.bind(null,i,n),null)),[r,a,e]}function us(e,t){e.action=t}function ds(e){var t=Lo(),n=vo;if(n!==null)return ls(t,n,e);Lo(),t=t.memoizedState,n=Lo();var r=n.queue.dispatch;return n.memoizedState=e,[t,r,!1]}function fs(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},t=I.updateQueue,t===null&&(t=Ro(),I.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ps(){return Lo().memoizedState}function ms(e,t,n,r){var i=Io();I.flags|=e,i.memoizedState=fs(1|t,{destroy:void 0},n,r===void 0?null:r)}function hs(e,t,n,r){var i=Lo();r=r===void 0?null:r;var a=i.memoizedState.inst;vo!==null&&r!==null&&Oo(r,vo.memoizedState.deps)?i.memoizedState=fs(t,a,n,r):(I.flags|=e,i.memoizedState=fs(1|t,a,n,r))}function gs(e,t){ms(8390656,8,e,t)}function _s(e,t){hs(2048,8,e,t)}function vs(e){I.flags|=4;var t=I.updateQueue;if(t===null)t=Ro(),I.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function ys(e){var t=Lo().memoizedState;return vs({ref:t,nextImpl:e}),function(){if(Ll&2)throw Error(i(440));return t.impl.apply(void 0,arguments)}}function bs(e,t){return hs(4,2,e,t)}function xs(e,t){return hs(4,4,e,t)}function Ss(e,t){if(typeof t==`function`){e=e();var n=t(e);return function(){typeof n==`function`?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Cs(e,t,n){n=n==null?null:n.concat([e]),hs(4,4,Ss.bind(null,t,e),n)}function ws(){}function Ts(e,t){var n=Lo();t=t===void 0?null:t;var r=n.memoizedState;return t!==null&&Oo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Es(e,t){var n=Lo();t=t===void 0?null:t;var r=n.memoizedState;if(t!==null&&Oo(t,r[1]))return r[0];if(r=e(),So){Ue(!0);try{e()}finally{Ue(!1)}}return n.memoizedState=[r,t],r}function Ds(e,t,n){return n===void 0||_o&1073741824&&!(Y&261930)?e.memoizedState=t:(e.memoizedState=n,e=hu(),I.lanes|=e,Kl|=e,n)}function Os(e,t,n,r){return Er(n,t)?n:no.current===null?!(_o&42)||_o&1073741824&&!(Y&261930)?(ac=!0,e.memoizedState=n):(e=hu(),I.lanes|=e,Kl|=e,t):(e=Ds(e,n,r),Er(e,t)||(ac=!0),e)}function ks(e,t,n,r,i){var a=j.p;j.p=a!==0&&8>a?a:8;var o=A.T,s={};A.T=s,Vs(e,!1,t,n);try{var c=i(),l=A.S;l!==null&&l(s,c),typeof c==`object`&&c&&typeof c.then==`function`?Bs(e,t,ba(c,r),mu(e)):Bs(e,t,r,mu(e))}catch(n){Bs(e,t,{then:function(){},status:`rejected`,reason:n},mu())}finally{j.p=a,o!==null&&s.types!==null&&(o.types=s.types),A.T=o}}function As(){}function js(e,t,n,r){if(e.tag!==5)throw Error(i(476));var a=Ms(e).queue;ks(e,a,t,oe,n===null?As:function(){return Ns(e),n(r)})}function Ms(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:oe,baseState:oe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ho,lastRenderedState:oe},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ho,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Ns(e){var t=Ms(e);t.next===null&&(t=e.alternate.memoizedState),Bs(e,t.next.queue,{},mu())}function Ps(){return aa($f)}function Fs(){return Lo().memoizedState}function Is(){return Lo().memoizedState}function Ls(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=mu();e=qa(n);var r=Ja(t,e,n);r!==null&&(gu(r,t,n),Ya(r,t,n)),t={cache:fa()},e.payload=t;return}t=t.return}}function Rs(e,t,n){var r=mu();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Hs(e)?Us(t,n):(n=oi(e,t,n,r),n!==null&&(gu(n,e,r),Ws(n,t,r)))}function zs(e,t,n){Bs(e,t,n,mu())}function Bs(e,t,n,r){var i={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Hs(e))Us(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,Er(s,o))return ai(e,t,i,0),Rl===null&&ii(),!1}catch{}if(n=oi(e,t,i,r),n!==null)return gu(n,e,r),Ws(n,t,r),!0}return!1}function Vs(e,t,n,r){if(r={lane:2,revertLane:fd(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Hs(e)){if(t)throw Error(i(479))}else t=oi(e,n,r,2),t!==null&&gu(t,e,2)}function Hs(e){var t=e.alternate;return e===I||t!==null&&t===I}function Us(e,t){xo=bo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ws(e,t,n){if(n&4194048){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,at(e,n)}}var Gs={readContext:aa,use:Bo,useCallback:Do,useContext:Do,useEffect:Do,useImperativeHandle:Do,useLayoutEffect:Do,useInsertionEffect:Do,useMemo:Do,useReducer:Do,useRef:Do,useState:Do,useDebugValue:Do,useDeferredValue:Do,useTransition:Do,useSyncExternalStore:Do,useId:Do,useHostTransitionStatus:Do,useFormState:Do,useActionState:Do,useOptimistic:Do,useMemoCache:Do,useCacheRefresh:Do};Gs.useEffectEvent=Do;var L={readContext:aa,use:Bo,useCallback:function(e,t){return Io().memoizedState=[e,t===void 0?null:t],e},useContext:aa,useEffect:gs,useImperativeHandle:function(e,t,n){n=n==null?null:n.concat([e]),ms(4194308,4,Ss.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ms(4194308,4,e,t)},useInsertionEffect:function(e,t){ms(4,2,e,t)},useMemo:function(e,t){var n=Io();t=t===void 0?null:t;var r=e();if(So){Ue(!0);try{e()}finally{Ue(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Io();if(n!==void 0){var i=n(t);if(So){Ue(!0);try{n(t)}finally{Ue(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=Rs.bind(null,I,e),[r.memoizedState,e]},useRef:function(e){var t=Io();return e={current:e},t.memoizedState=e},useState:function(e){e=Qo(e);var t=e.queue,n=zs.bind(null,I,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:ws,useDeferredValue:function(e,t){return Ds(Io(),e,t)},useTransition:function(){var e=Qo(!1);return e=ks.bind(null,I,e.queue,!0,!1),Io().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=I,a=Io();if(F){if(n===void 0)throw Error(i(407));n=n()}else{if(n=t(),Rl===null)throw Error(i(349));Y&127||qo(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,gs(Yo.bind(null,r,o,e),[e]),r.flags|=2048,fs(9,{destroy:void 0},Jo.bind(null,r,o,n,t),null),n},useId:function(){var e=Io(),t=Rl.identifierPrefix;if(F){var n=ji,r=Ai;n=(r&~(1<<32-We(r)-1)).toString(32)+n,t=`_`+t+`R_`+n,n=Co++,0<n&&(t+=`H`+n.toString(32)),t+=`_`}else n=Eo++,t=`_`+t+`r_`+n.toString(32)+`_`;return e.memoizedState=t},useHostTransitionStatus:Ps,useFormState:ss,useActionState:ss,useOptimistic:function(e){var t=Io();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Vs.bind(null,I,!0,n),n.dispatch=t,[e,t]},useMemoCache:Vo,useCacheRefresh:function(){return Io().memoizedState=Ls.bind(null,I)},useEffectEvent:function(e){var t=Io(),n={impl:e};return t.memoizedState=n,function(){if(Ll&2)throw Error(i(440));return n.impl.apply(void 0,arguments)}}},Ks={readContext:aa,use:Bo,useCallback:Ts,useContext:aa,useEffect:_s,useImperativeHandle:Cs,useInsertionEffect:bs,useLayoutEffect:xs,useMemo:Es,useReducer:Uo,useRef:ps,useState:function(){return Uo(Ho)},useDebugValue:ws,useDeferredValue:function(e,t){return Os(Lo(),vo.memoizedState,e,t)},useTransition:function(){var e=Uo(Ho)[0],t=Lo().memoizedState;return[typeof e==`boolean`?e:zo(e),t]},useSyncExternalStore:Ko,useId:Fs,useHostTransitionStatus:Ps,useFormState:cs,useActionState:cs,useOptimistic:function(e,t){return $o(Lo(),vo,e,t)},useMemoCache:Vo,useCacheRefresh:Is};Ks.useEffectEvent=ys;var qs={readContext:aa,use:Bo,useCallback:Ts,useContext:aa,useEffect:_s,useImperativeHandle:Cs,useInsertionEffect:bs,useLayoutEffect:xs,useMemo:Es,useReducer:Go,useRef:ps,useState:function(){return Go(Ho)},useDebugValue:ws,useDeferredValue:function(e,t){var n=Lo();return vo===null?Ds(n,e,t):Os(n,vo.memoizedState,e,t)},useTransition:function(){var e=Go(Ho)[0],t=Lo().memoizedState;return[typeof e==`boolean`?e:zo(e),t]},useSyncExternalStore:Ko,useId:Fs,useHostTransitionStatus:Ps,useFormState:ds,useActionState:ds,useOptimistic:function(e,t){var n=Lo();return vo===null?(n.baseState=e,[e,n.queue.dispatch]):$o(n,vo,e,t)},useMemoCache:Vo,useCacheRefresh:Is};qs.useEffectEvent=ys;function Js(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:h({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var R={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=mu(),i=qa(r);i.payload=t,n!=null&&(i.callback=n),t=Ja(e,i,r),t!==null&&(gu(t,e,r),Ya(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=mu(),i=qa(r);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Ja(e,i,r),t!==null&&(gu(t,e,r),Ya(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=mu(),r=qa(n);r.tag=2,t!=null&&(r.callback=t),t=Ja(e,r,n),t!==null&&(gu(t,e,n),Ya(t,e,n))}};function Ys(e,t,n,r,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate==`function`?e.shouldComponentUpdate(r,a,o):t.prototype&&t.prototype.isPureReactComponent?!Dr(n,r)||!Dr(i,a):!0}function Xs(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps==`function`&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps==`function`&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&R.enqueueReplaceState(t,t.state,null)}function z(e,t){var n=t;if(`ref`in t)for(var r in n={},t)r!==`ref`&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=h({},n)),e)n[i]===void 0&&(n[i]=e[i]);return n}function B(e){ei(e)}function V(e){console.error(e)}function Zs(e){ei(e)}function Qs(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(e){setTimeout(function(){throw e})}}function $s(e,t,n){try{var r=e.onCaughtError;r(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(e){setTimeout(function(){throw e})}}function ec(e,t,n){return n=qa(n),n.tag=3,n.payload={element:null},n.callback=function(){Qs(e,t)},n}function tc(e){return e=qa(e),e.tag=3,e}function nc(e,t,n,r){var i=n.type.getDerivedStateFromError;if(typeof i==`function`){var a=r.value;e.payload=function(){return i(a)},e.callback=function(){$s(t,n,r)}}var o=n.stateNode;o!==null&&typeof o.componentDidCatch==`function`&&(e.callback=function(){$s(t,n,r),typeof i!=`function`&&(iu===null?iu=new Set([this]):iu.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:e===null?``:e})})}function rc(e,t,n,r,a){if(n.flags|=32768,typeof r==`object`&&r&&typeof r.then==`function`){if(t=n.alternate,t!==null&&na(t,n,a,!0),n=so.current,n!==null){switch(n.tag){case 31:case 13:return co===null?Ou():n.alternate===null&&Gl===0&&(Gl=3),n.flags&=-257,n.flags|=65536,n.lanes=a,r===ka?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([r]):t.add(r),qu(e,r,a)),!1;case 22:return n.flags|=65536,r===ka?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([r]):n.add(r)),qu(e,r,a)),!1}throw Error(i(435,n.tag))}return qu(e,r,a),Ou(),!1}if(F)return t=so.current,t===null?(r!==Vi&&(t=Error(i(423),{cause:r}),Ji(Si(t,n))),e=e.current.alternate,e.flags|=65536,a&=-a,e.lanes|=a,r=Si(r,n),a=ec(e.stateNode,r,a),Xa(e,a),Gl!==4&&(Gl=2)):(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=a,r!==Vi&&(e=Error(i(422),{cause:r}),Ji(Si(e,n)))),!1;var o=Error(i(520),{cause:r});if(o=Si(o,n),Zl===null?Zl=[o]:Zl.push(o),Gl!==4&&(Gl=2),t===null)return!0;r=Si(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,e=ec(n.stateNode,r,e),Xa(n,e),!1;case 1:if(t=n.type,o=n.stateNode,!(n.flags&128)&&(typeof t.getDerivedStateFromError==`function`||o!==null&&typeof o.componentDidCatch==`function`&&(iu===null||!iu.has(o))))return n.flags|=65536,a&=-a,n.lanes|=a,a=tc(a),nc(a,e,n,r),Xa(n,a),!1}n=n.return}while(n!==null);return!1}var ic=Error(i(461)),ac=!1;function oc(e,t,n,r){t.child=e===null?Ua(t,null,n,r):Ha(t,e.child,n,r)}function sc(e,t,n,r,i){n=n.render;var a=t.ref;if(`ref`in r){var o={};for(var s in r)s!==`ref`&&(o[s]=r[s])}else o=r;return ia(t),r=ko(e,t,n,o,a,i),s=No(),e!==null&&!ac?(Po(e,t,i),kc(e,t,i)):(F&&s&&Pi(t),t.flags|=1,oc(e,t,r,i),t.child)}function H(e,t,n,r,i){if(e===null){var a=n.type;return typeof a==`function`&&!pi(a)&&a.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=a,cc(e,t,a,r,i)):(e=gi(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!Ac(e,i)){var o=a.memoizedProps;if(n=n.compare,n=n===null?Dr:n,n(o,r)&&e.ref===t.ref)return kc(e,t,i)}return t.flags|=1,e=mi(a,r),e.ref=t.ref,e.return=t,t.child=e}function cc(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(Dr(a,r)&&e.ref===t.ref)if(ac=!1,t.pendingProps=r=a,Ac(e,i))e.flags&131072&&(ac=!0);else return t.lanes=e.lanes,kc(e,t,i)}return gc(e,t,n,r,i)}function lc(e,t,n,r){var i=r.children,a=e===null?null:e.memoizedState;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode===`hidden`){if(t.flags&128){if(a=a===null?n:a.baseLanes|n,e!==null){for(r=t.child=e.child,i=0;r!==null;)i=i|r.lanes|r.childLanes,r=r.sibling;r=i&~a}else r=0,t.child=null;return dc(e,t,a,n,r)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&wa(t,a===null?null:a.cachePool),a===null?ao():io(t,a),fo(t);else return r=t.lanes=536870912,dc(e,t,a===null?n:a.baseLanes|n,n,r)}else a===null?(e!==null&&wa(t,null),ao(),po(t)):(wa(t,a.cachePool),io(t,a),po(t),t.memoizedState=null);return oc(e,t,i,n),t.child}function uc(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function dc(e,t,n,r,i){var a=Ca();return a=a===null?null:{parent:da._currentValue,pool:a},t.memoizedState={baseLanes:n,cachePool:a},e!==null&&wa(t,null),ao(),fo(t),e!==null&&na(e,t,r,!0),t.childLanes=i,null}function fc(e,t){return t=wc({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function pc(e,t,n){return Ha(t,e.child,null,n),e=fc(t,t.pendingProps),e.flags|=2,mo(t),t.memoizedState=null,e}function mc(e,t,n){var r=t.pendingProps,a=(t.flags&128)!=0;if(t.flags&=-129,e===null){if(F){if(r.mode===`hidden`)return e=fc(t,r),t.lanes=536870912,uc(null,e);if(uo(t),(e=Ri)?(e=af(e,Bi),e=e!==null&&e.data===`&`?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ki===null?null:{id:Ai,overflow:ji},retryLane:536870912,hydrationErrors:null},n=yi(e),n.return=t,t.child=n,Li=t,Ri=null)):e=null,e===null)throw Hi(t);return t.lanes=536870912,null}return fc(t,r)}var o=e.memoizedState;if(o!==null){var s=o.dehydrated;if(uo(t),a)if(t.flags&256)t.flags&=-257,t=pc(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(i(558));else if(ac||na(e,t,n,!1),a=(n&e.childLanes)!==0,ac||a){if(r=Rl,r!==null&&(s=ot(r,n),s!==0&&s!==o.retryLane))throw o.retryLane=s,si(e,s),gu(r,e,s),ic;Ou(),t=pc(e,t,n)}else e=o.treeContext,Ri=lf(s.nextSibling),Li=t,F=!0,zi=null,Bi=!1,e!==null&&Ii(t,e),t=fc(t,r),t.flags|=4096;return t}return e=mi(e.child,{mode:r.mode,children:r.children}),e.ref=t.ref,t.child=e,e.return=t,e}function hc(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!=`function`&&typeof n!=`object`)throw Error(i(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function gc(e,t,n,r,i){return ia(t),n=ko(e,t,n,r,void 0,i),r=No(),e!==null&&!ac?(Po(e,t,i),kc(e,t,i)):(F&&r&&Pi(t),t.flags|=1,oc(e,t,n,i),t.child)}function _c(e,t,n,r,i,a){return ia(t),t.updateQueue=null,n=jo(t,r,n,i),Ao(e),r=No(),e!==null&&!ac?(Po(e,t,a),kc(e,t,a)):(F&&r&&Pi(t),t.flags|=1,oc(e,t,n,a),t.child)}function U(e,t,n,r,i){if(ia(t),t.stateNode===null){var a=ui,o=n.contextType;typeof o==`object`&&o&&(a=aa(o)),a=new n(r,a),t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=R,t.stateNode=a,a._reactInternals=t,a=t.stateNode,a.props=r,a.state=t.memoizedState,a.refs={},Ga(t),o=n.contextType,a.context=typeof o==`object`&&o?aa(o):ui,a.state=t.memoizedState,o=n.getDerivedStateFromProps,typeof o==`function`&&(Js(t,n,o,r),a.state=t.memoizedState),typeof n.getDerivedStateFromProps==`function`||typeof a.getSnapshotBeforeUpdate==`function`||typeof a.UNSAFE_componentWillMount!=`function`&&typeof a.componentWillMount!=`function`||(o=a.state,typeof a.componentWillMount==`function`&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount==`function`&&a.UNSAFE_componentWillMount(),o!==a.state&&R.enqueueReplaceState(a,a.state,null),$a(t,r,a,i),Qa(),a.state=t.memoizedState),typeof a.componentDidMount==`function`&&(t.flags|=4194308),r=!0}else if(e===null){a=t.stateNode;var s=t.memoizedProps,c=z(n,s);a.props=c;var l=a.context,u=n.contextType;o=ui,typeof u==`object`&&u&&(o=aa(u));var d=n.getDerivedStateFromProps;u=typeof d==`function`||typeof a.getSnapshotBeforeUpdate==`function`,s=t.pendingProps!==s,u||typeof a.UNSAFE_componentWillReceiveProps!=`function`&&typeof a.componentWillReceiveProps!=`function`||(s||l!==o)&&Xs(t,a,r,o),Wa=!1;var f=t.memoizedState;a.state=f,$a(t,r,a,i),Qa(),l=t.memoizedState,s||f!==l||Wa?(typeof d==`function`&&(Js(t,n,d,r),l=t.memoizedState),(c=Wa||Ys(t,n,c,r,f,l,o))?(u||typeof a.UNSAFE_componentWillMount!=`function`&&typeof a.componentWillMount!=`function`||(typeof a.componentWillMount==`function`&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount==`function`&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount==`function`&&(t.flags|=4194308)):(typeof a.componentDidMount==`function`&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=o,r=c):(typeof a.componentDidMount==`function`&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Ka(e,t),o=t.memoizedProps,u=z(n,o),a.props=u,d=t.pendingProps,f=a.context,l=n.contextType,c=ui,typeof l==`object`&&l&&(c=aa(l)),s=n.getDerivedStateFromProps,(l=typeof s==`function`||typeof a.getSnapshotBeforeUpdate==`function`)||typeof a.UNSAFE_componentWillReceiveProps!=`function`&&typeof a.componentWillReceiveProps!=`function`||(o!==d||f!==c)&&Xs(t,a,r,c),Wa=!1,f=t.memoizedState,a.state=f,$a(t,r,a,i),Qa();var p=t.memoizedState;o!==d||f!==p||Wa||e!==null&&e.dependencies!==null&&ra(e.dependencies)?(typeof s==`function`&&(Js(t,n,s,r),p=t.memoizedState),(u=Wa||Ys(t,n,u,r,f,p,c)||e!==null&&e.dependencies!==null&&ra(e.dependencies))?(l||typeof a.UNSAFE_componentWillUpdate!=`function`&&typeof a.componentWillUpdate!=`function`||(typeof a.componentWillUpdate==`function`&&a.componentWillUpdate(r,p,c),typeof a.UNSAFE_componentWillUpdate==`function`&&a.UNSAFE_componentWillUpdate(r,p,c)),typeof a.componentDidUpdate==`function`&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate==`function`&&(t.flags|=1024)):(typeof a.componentDidUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=c,r=u):(typeof a.componentDidUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return a=r,hc(e,t),r=(t.flags&128)!=0,a||r?(a=t.stateNode,n=r&&typeof n.getDerivedStateFromError!=`function`?null:a.render(),t.flags|=1,e!==null&&r?(t.child=Ha(t,e.child,null,i),t.child=Ha(t,null,n,i)):oc(e,t,n,i),t.memoizedState=a.state,e=t.child):e=kc(e,t,i),e}function vc(e,t,n,r){return Ki(),t.flags|=256,oc(e,t,n,r),t.child}var yc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bc(e){return{baseLanes:e,cachePool:Ta()}}function xc(e,t,n){return e=e===null?0:e.childLanes&~n,t&&(e|=Yl),e}function Sc(e,t,n){var r=t.pendingProps,a=!1,o=(t.flags&128)!=0,s;if((s=o)||(s=e!==null&&e.memoizedState===null?!1:(ho.current&2)!=0),s&&(a=!0,t.flags&=-129),s=(t.flags&32)!=0,t.flags&=-33,e===null){if(F){if(a?lo(t):po(t),(e=Ri)?(e=af(e,Bi),e=e!==null&&e.data!==`&`?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ki===null?null:{id:Ai,overflow:ji},retryLane:536870912,hydrationErrors:null},n=yi(e),n.return=t,t.child=n,Li=t,Ri=null)):e=null,e===null)throw Hi(t);return sf(e)?t.lanes=32:t.lanes=536870912,null}var c=r.children;return r=r.fallback,a?(po(t),a=t.mode,c=wc({mode:`hidden`,children:c},a),r=_i(r,a,n,null),c.return=t,r.return=t,c.sibling=r,t.child=c,r=t.child,r.memoizedState=bc(n),r.childLanes=xc(e,s,n),t.memoizedState=yc,uc(null,r)):(lo(t),Cc(t,c))}var l=e.memoizedState;if(l!==null&&(c=l.dehydrated,c!==null)){if(o)t.flags&256?(lo(t),t.flags&=-257,t=Tc(e,t,n)):t.memoizedState===null?(po(t),c=r.fallback,a=t.mode,r=wc({mode:`visible`,children:r.children},a),c=_i(c,a,n,null),c.flags|=2,r.return=t,c.return=t,r.sibling=c,t.child=r,Ha(t,e.child,null,n),r=t.child,r.memoizedState=bc(n),r.childLanes=xc(e,s,n),t.memoizedState=yc,t=uc(null,r)):(po(t),t.child=e.child,t.flags|=128,t=null);else if(lo(t),sf(c)){if(s=c.nextSibling&&c.nextSibling.dataset,s)var u=s.dgst;s=u,r=Error(i(419)),r.stack=``,r.digest=s,Ji({value:r,source:null,stack:null}),t=Tc(e,t,n)}else if(ac||na(e,t,n,!1),s=(n&e.childLanes)!==0,ac||s){if(s=Rl,s!==null&&(r=ot(s,n),r!==0&&r!==l.retryLane))throw l.retryLane=r,si(e,r),gu(s,e,r),ic;of(c)||Ou(),t=Tc(e,t,n)}else of(c)?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,Ri=lf(c.nextSibling),Li=t,F=!0,zi=null,Bi=!1,e!==null&&Ii(t,e),t=Cc(t,r.children),t.flags|=4096);return t}return a?(po(t),c=r.fallback,a=t.mode,l=e.child,u=l.sibling,r=mi(l,{mode:`hidden`,children:r.children}),r.subtreeFlags=l.subtreeFlags&65011712,u===null?(c=_i(c,a,n,null),c.flags|=2):c=mi(u,c),c.return=t,r.return=t,r.sibling=c,t.child=r,uc(null,r),r=t.child,c=e.child.memoizedState,c===null?c=bc(n):(a=c.cachePool,a===null?a=Ta():(l=da._currentValue,a=a.parent===l?a:{parent:l,pool:l}),c={baseLanes:c.baseLanes|n,cachePool:a}),r.memoizedState=c,r.childLanes=xc(e,s,n),t.memoizedState=yc,uc(e.child,r)):(lo(t),n=e.child,e=n.sibling,n=mi(n,{mode:`visible`,children:r.children}),n.return=t,n.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n)}function Cc(e,t){return t=wc({mode:`visible`,children:t},e.mode),t.return=e,e.child=t}function wc(e,t){return e=fi(22,e,null,t),e.lanes=0,e}function Tc(e,t,n){return Ha(t,e.child,null,n),e=Cc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ec(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),ea(e.return,t,n)}function Dc(e,t,n,r,i,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,treeForkCount:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.treeForkCount=a)}function Oc(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;r=r.children;var o=ho.current,s=(o&2)!=0;if(s?(o=o&1|2,t.flags|=128):o&=1,de(ho,o),oc(e,t,r,n),r=F?Ei:0,!s&&e!==null&&e.flags&128)a:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ec(e,n,t);else if(e.tag===19)Ec(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break a;for(;e.sibling===null;){if(e.return===null||e.return===t)break a;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case`forwards`:for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&go(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Dc(t,!1,i,n,a,r);break;case`backwards`:case`unstable_legacy-backwards`:for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&go(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Dc(t,!0,n,null,a,r);break;case`together`:Dc(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function kc(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Kl|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(na(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,n=mi(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=mi(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Ac(e,t){return(e.lanes&t)===0?(e=e.dependencies,!!(e!==null&&ra(e))):!0}function W(e,t,n){switch(t.tag){case 3:ge(t,t.stateNode.containerInfo),Qi(t,da,e.memoizedState.cache),Ki();break;case 27:case 5:ve(t);break;case 4:ge(t,t.stateNode.containerInfo);break;case 10:Qi(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,uo(t),null;break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated===null?(n&t.child.childLanes)===0?(lo(t),e=kc(e,t,n),e===null?null:e.sibling):Sc(e,t,n):(lo(t),t.flags|=128,null);lo(t);break;case 19:var i=(e.flags&128)!=0;if(r=(n&t.childLanes)!==0,r||=(na(e,t,n,!1),(n&t.childLanes)!==0),i){if(r)return Oc(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),de(ho,ho.current),r)break;return null;case 22:return t.lanes=0,lc(e,t,n,t.pendingProps);case 24:Qi(t,da,e.memoizedState.cache)}return kc(e,t,n)}function jc(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)ac=!0;else{if(!Ac(e,n)&&!(t.flags&128))return ac=!1,W(e,t,n);ac=!!(e.flags&131072)}else ac=!1,F&&t.flags&1048576&&Ni(t,Ei,t.index);switch(t.lanes=0,t.tag){case 16:a:{var r=t.pendingProps;if(e=Ma(t.elementType),t.type=e,typeof e==`function`)pi(e)?(r=z(e,r),t.tag=1,t=U(null,t,e,r,n)):(t.tag=0,t=gc(null,t,e,r,n));else{if(e!=null){var a=e.$$typeof;if(a===w){t.tag=11,t=sc(null,t,e,r,n);break a}else if(a===D){t.tag=14,t=H(null,t,e,r,n);break a}}throw t=ie(e)||e,Error(i(306,t,``))}}return t;case 0:return gc(e,t,t.type,t.pendingProps,n);case 1:return r=t.type,a=z(r,t.pendingProps),U(e,t,r,a,n);case 3:a:{if(ge(t,t.stateNode.containerInfo),e===null)throw Error(i(387));r=t.pendingProps;var o=t.memoizedState;a=o.element,Ka(e,t),$a(t,r,null,n);var s=t.memoizedState;if(r=s.cache,Qi(t,da,r),r!==o.cache&&ta(t,[da],n,!0),Qa(),r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){t=vc(e,t,r,n);break a}else if(r!==a){a=Si(Error(i(424)),t),Ji(a),t=vc(e,t,r,n);break a}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName===`HTML`?e.ownerDocument.body:e}for(Ri=lf(e.firstChild),Li=t,F=!0,zi=null,Bi=!0,n=Ua(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Ki(),r===a){t=kc(e,t,n);break a}oc(e,t,r,n)}t=t.child}return t;case 26:return hc(e,t),e===null?(n=Af(t.type,null,t.pendingProps,null))?t.memoizedState=n:F||(n=t.type,e=t.pendingProps,r=Vd(me.current).createElement(n),r[ft]=t,r[pt]=e,Fd(r,n,e),Tt(r),t.stateNode=r):t.memoizedState=Af(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return ve(t),e===null&&F&&(r=t.stateNode=pf(t.type,t.pendingProps,me.current),Li=t,Bi=!0,a=Ri,Qd(t.type)?(uf=a,Ri=lf(r.firstChild)):Ri=a),oc(e,t,t.pendingProps.children,n),hc(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&F&&((a=r=Ri)&&(r=nf(r,t.type,t.pendingProps,Bi),r===null?a=!1:(t.stateNode=r,Li=t,Ri=lf(r.firstChild),Bi=!1,a=!0)),a||Hi(t)),ve(t),a=t.type,o=t.pendingProps,s=e===null?null:e.memoizedProps,r=o.children,Wd(a,o)?r=null:s!==null&&Wd(a,s)&&(t.flags|=32),t.memoizedState!==null&&(a=ko(e,t,Mo,null,null,n),$f._currentValue=a),hc(e,t),oc(e,t,r,n),t.child;case 6:return e===null&&F&&((e=n=Ri)&&(n=rf(n,t.pendingProps,Bi),n===null?e=!1:(t.stateNode=n,Li=t,Ri=null,e=!0)),e||Hi(t)),null;case 13:return Sc(e,t,n);case 4:return ge(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ha(t,null,r,n):oc(e,t,r,n),t.child;case 11:return sc(e,t,t.type,t.pendingProps,n);case 7:return oc(e,t,t.pendingProps,n),t.child;case 8:return oc(e,t,t.pendingProps.children,n),t.child;case 12:return oc(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,Qi(t,t.type,r.value),oc(e,t,r.children,n),t.child;case 9:return a=t.type._context,r=t.pendingProps.children,ia(t),a=aa(a),r=r(a),t.flags|=1,oc(e,t,r,n),t.child;case 14:return H(e,t,t.type,t.pendingProps,n);case 15:return cc(e,t,t.type,t.pendingProps,n);case 19:return Oc(e,t,n);case 31:return mc(e,t,n);case 22:return lc(e,t,n,t.pendingProps);case 24:return ia(t),r=aa(da),e===null?(a=Ca(),a===null&&(a=Rl,o=fa(),a.pooledCache=o,o.refCount++,o!==null&&(a.pooledCacheLanes|=n),a=o),t.memoizedState={parent:r,cache:a},Ga(t),Qi(t,da,a)):((e.lanes&n)!==0&&(Ka(e,t),$a(t,null,null,n),Qa()),a=e.memoizedState,o=t.memoizedState,a.parent===r?(r=o.cache,Qi(t,da,r),r!==a.cache&&ta(t,[da],n,!0)):(a={parent:r,cache:r},t.memoizedState=a,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=a),Qi(t,da,r))),oc(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function Mc(e){e.flags|=4}function Nc(e,t,n,r,i){if((t=(e.mode&32)!=0)&&(t=!1),t){if(e.flags|=16777216,(i&335544128)===i)if(e.stateNode.complete)e.flags|=8192;else if(Tu())e.flags|=8192;else throw Na=ka,Da}else e.flags&=-16777217}function Pc(e,t){if(t.type!==`stylesheet`||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!Gf(t))if(Tu())e.flags|=8192;else throw Na=ka,Da}function Fc(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag===22?536870912:et(),e.lanes|=t,Xl|=t)}function Ic(e,t){if(!F)switch(e.tailMode){case`hidden`:t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case`collapsed`:n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Lc(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&65011712,r|=i.flags&65011712,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Rc(e,t,n){var r=t.pendingProps;switch(Fi(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lc(t),null;case 1:return Lc(t),null;case 3:return n=t.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),$i(da),_e(),n.pendingContext&&=(n.context=n.pendingContext,null),(e===null||e.child===null)&&(Gi(t)?Mc(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,qi())),Lc(t),null;case 26:var a=t.type,o=t.memoizedState;return e===null?(Mc(t),o===null?(Lc(t),Nc(t,a,null,r,n)):(Lc(t),Pc(t,o))):o?o===e.memoizedState?(Lc(t),t.flags&=-16777217):(Mc(t),Lc(t),Pc(t,o)):(e=e.memoizedProps,e!==r&&Mc(t),Lc(t),Nc(t,a,e,r,n)),null;case 27:if(ye(t),n=me.current,a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Mc(t);else{if(!r){if(t.stateNode===null)throw Error(i(166));return Lc(t),null}e=fe.current,Gi(t)?Ui(t,e):(e=pf(a,r,n),t.stateNode=e,Mc(t))}return Lc(t),null;case 5:if(ye(t),a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Mc(t);else{if(!r){if(t.stateNode===null)throw Error(i(166));return Lc(t),null}if(o=fe.current,Gi(t))Ui(t,o);else{var s=Vd(me.current);switch(o){case 1:o=s.createElementNS(`http://www.w3.org/2000/svg`,a);break;case 2:o=s.createElementNS(`http://www.w3.org/1998/Math/MathML`,a);break;default:switch(a){case`svg`:o=s.createElementNS(`http://www.w3.org/2000/svg`,a);break;case`math`:o=s.createElementNS(`http://www.w3.org/1998/Math/MathML`,a);break;case`script`:o=s.createElement(`div`),o.innerHTML=`<script><\/script>`,o=o.removeChild(o.firstChild);break;case`select`:o=typeof r.is==`string`?s.createElement(`select`,{is:r.is}):s.createElement(`select`),r.multiple?o.multiple=!0:r.size&&(o.size=r.size);break;default:o=typeof r.is==`string`?s.createElement(a,{is:r.is}):s.createElement(a)}}o[ft]=t,o[pt]=r;a:for(s=t.child;s!==null;){if(s.tag===5||s.tag===6)o.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break a;for(;s.sibling===null;){if(s.return===null||s.return===t)break a;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=o;a:switch(Fd(o,a,r),a){case`button`:case`input`:case`select`:case`textarea`:r=!!r.autoFocus;break a;case`img`:r=!0;break a;default:r=!1}r&&Mc(t)}}return Lc(t),Nc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==r&&Mc(t);else{if(typeof r!=`string`&&t.stateNode===null)throw Error(i(166));if(e=me.current,Gi(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,a=Li,a!==null)switch(a.tag){case 27:case 5:r=a.memoizedProps}e[ft]=t,e=!!(e.nodeValue===n||r!==null&&!0===r.suppressHydrationWarning||Md(e.nodeValue,n)),e||Hi(t,!0)}else e=Vd(e).createTextNode(r),e[ft]=t,t.stateNode=e}return Lc(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(r=Gi(t),n!==null){if(e===null){if(!r)throw Error(i(318));if(e=t.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(i(557));e[ft]=t}else Ki(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Lc(t),e=!1}else n=qi(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(mo(t),t):(mo(t),null);if(t.flags&128)throw Error(i(558))}return Lc(t),null;case 13:if(r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(a=Gi(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(i(318));if(a=t.memoizedState,a=a===null?null:a.dehydrated,!a)throw Error(i(317));a[ft]=t}else Ki(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Lc(t),a=!1}else a=qi(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return t.flags&256?(mo(t),t):(mo(t),null)}return mo(t),t.flags&128?(t.lanes=n,t):(n=r!==null,e=e!==null&&e.memoizedState!==null,n&&(r=t.child,a=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(a=r.alternate.memoizedState.cachePool.pool),o=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),o!==a&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Fc(t,t.updateQueue),Lc(t),null);case 4:return _e(),e===null&&Cd(t.stateNode.containerInfo),Lc(t),null;case 10:return $i(t.type),Lc(t),null;case 19:if(ue(ho),r=t.memoizedState,r===null)return Lc(t),null;if(a=(t.flags&128)!=0,o=r.rendering,o===null)if(a)Ic(r,!1);else{if(Gl!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=go(e),o!==null){for(t.flags|=128,Ic(r,!1),e=o.updateQueue,t.updateQueue=e,Fc(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)hi(n,e),n=n.sibling;return de(ho,ho.current&1|2),F&&Mi(t,r.treeForkCount),t.child}e=e.sibling}r.tail!==null&&Me()>nu&&(t.flags|=128,a=!0,Ic(r,!1),t.lanes=4194304)}else{if(!a)if(e=go(o),e!==null){if(t.flags|=128,a=!0,e=e.updateQueue,t.updateQueue=e,Fc(t,e),Ic(r,!0),r.tail===null&&r.tailMode===`hidden`&&!o.alternate&&!F)return Lc(t),null}else 2*Me()-r.renderingStartTime>nu&&n!==536870912&&(t.flags|=128,a=!0,Ic(r,!1),t.lanes=4194304);r.isBackwards?(o.sibling=t.child,t.child=o):(e=r.last,e===null?t.child=o:e.sibling=o,r.last=o)}return r.tail===null?(Lc(t),null):(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=Me(),e.sibling=null,n=ho.current,de(ho,a?n&1|2:n&1),F&&Mi(t,r.treeForkCount),e);case 22:case 23:return mo(t),oo(),r=t.memoizedState!==null,e===null?r&&(t.flags|=8192):e.memoizedState!==null!==r&&(t.flags|=8192),r?n&536870912&&!(t.flags&128)&&(Lc(t),t.subtreeFlags&6&&(t.flags|=8192)):Lc(t),n=t.updateQueue,n!==null&&Fc(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),r=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),e!==null&&ue(Sa),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),$i(da),Lc(t),null;case 25:return null;case 30:return null}throw Error(i(156,t.tag))}function zc(e,t){switch(Fi(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return $i(da),_e(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return ye(t),null;case 31:if(t.memoizedState!==null){if(mo(t),t.alternate===null)throw Error(i(340));Ki()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(mo(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));Ki()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ue(ho),null;case 4:return _e(),null;case 10:return $i(t.type),null;case 22:case 23:return mo(t),oo(),e!==null&&ue(Sa),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return $i(da),null;case 25:return null;default:return null}}function G(e,t){switch(Fi(t),t.tag){case 3:$i(da),_e();break;case 26:case 27:case 5:ye(t);break;case 4:_e();break;case 31:t.memoizedState!==null&&mo(t);break;case 13:mo(t);break;case 19:ue(ho);break;case 10:$i(t.type);break;case 22:case 23:mo(t),oo(),e!==null&&ue(Sa);break;case 24:$i(da)}}function Bc(e,t){try{var n=t.updateQueue,r=n===null?null:n.lastEffect;if(r!==null){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var a=n.create,o=n.inst;r=a(),o.destroy=r}n=n.next}while(n!==i)}}catch(e){Ku(t,t.return,e)}}function Vc(e,t,n){try{var r=t.updateQueue,i=r===null?null:r.lastEffect;if(i!==null){var a=i.next;r=a;do{if((r.tag&e)===e){var o=r.inst,s=o.destroy;if(s!==void 0){o.destroy=void 0,i=t;var c=n,l=s;try{l()}catch(e){Ku(i,c,e)}}}r=r.next}while(r!==a)}}catch(e){Ku(t,t.return,e)}}function Hc(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{to(t,n)}catch(t){Ku(e,e.return,t)}}}function Uc(e,t,n){n.props=z(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(n){Ku(e,t,n)}}function Wc(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof n==`function`?e.refCleanup=n(r):n.current=r}}catch(n){Ku(e,t,n)}}function Gc(e,t){var n=e.ref,r=e.refCleanup;if(n!==null)if(typeof r==`function`)try{r()}catch(n){Ku(e,t,n)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n==`function`)try{n(null)}catch(n){Ku(e,t,n)}else n.current=null}function Kc(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{a:switch(t){case`button`:case`input`:case`select`:case`textarea`:n.autoFocus&&r.focus();break a;case`img`:n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(t){Ku(e,e.return,t)}}function qc(e,t,n){try{var r=e.stateNode;Id(r,e.type,n,t),r[pt]=t}catch(t){Ku(e,e.return,t)}}function Jc(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Qd(e.type)||e.tag===4}function Yc(e){a:for(;;){for(;e.sibling===null;){if(e.return===null||Jc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Qd(e.type)||e.flags&2||e.child===null||e.tag===4)continue a;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Xc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName===`HTML`?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName===`HTML`?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=an));else if(r!==4&&(r===27&&Qd(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Xc(e,t,n),e=e.sibling;e!==null;)Xc(e,t,n),e=e.sibling}function Zc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(r===27&&Qd(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Zc(e,t,n),e=e.sibling;e!==null;)Zc(e,t,n),e=e.sibling}function Qc(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Fd(t,r,n),t[ft]=e,t[pt]=n}catch(t){Ku(e,e.return,t)}}var $c=!1,K=!1,el=!1,tl=typeof WeakSet==`function`?WeakSet:Set,nl=null;function rl(e,t){if(e=e.containerInfo,zd=cp,e=jr(e),Mr(e)){if(`selectionStart`in e)var n={start:e.selectionStart,end:e.selectionEnd};else a:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break a}var s=0,c=-1,l=-1,u=0,d=0,f=e,p=null;b:for(;;){for(var m;f!==n||a!==0&&f.nodeType!==3||(c=s+a),f!==o||r!==0&&f.nodeType!==3||(l=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===e)break b;if(p===n&&++u===a&&(c=s),p===o&&++d===r&&(l=s),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}n=c===-1||l===-1?null:{start:c,end:l}}else n=null}n||={start:0,end:0}}else n=null;for(Bd={focusedElem:e,selectionRange:n},cp=!1,nl=t;nl!==null;)if(t=nl,e=t.child,t.subtreeFlags&1028&&e!==null)e.return=t,nl=e;else for(;nl!==null;){switch(t=nl,o=t.alternate,e=t.flags,t.tag){case 0:if(e&4&&(e=t.updateQueue,e=e===null?null:e.events,e!==null))for(n=0;n<e.length;n++)a=e[n],a.ref.impl=a.nextImpl;break;case 11:case 15:break;case 1:if(e&1024&&o!==null){e=void 0,n=t,a=o.memoizedProps,o=o.memoizedState,r=n.stateNode;try{var h=z(n.type,a);e=r.getSnapshotBeforeUpdate(h,o),r.__reactInternalSnapshotBeforeUpdate=e}catch(e){Ku(n,n.return,e)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)tf(e);else if(n===1)switch(e.nodeName){case`HEAD`:case`HTML`:case`BODY`:tf(e);break;default:e.textContent=``}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(i(163))}if(e=t.sibling,e!==null){e.return=t.return,nl=e;break}nl=t.return}}function il(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:vl(e,n),r&4&&Bc(5,n);break;case 1:if(vl(e,n),r&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(e){Ku(n,n.return,e)}else{var i=z(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(e){Ku(n,n.return,e)}}r&64&&Hc(n),r&512&&Wc(n,n.return);break;case 3:if(vl(e,n),r&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{to(e,t)}catch(e){Ku(n,n.return,e)}}break;case 27:t===null&&r&4&&Qc(n);case 26:case 5:vl(e,n),t===null&&r&4&&Kc(n),r&512&&Wc(n,n.return);break;case 12:vl(e,n);break;case 31:vl(e,n),r&4&&ll(e,n);break;case 13:vl(e,n),r&4&&ul(e,n),r&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Yu.bind(null,n),cf(e,n))));break;case 22:if(r=n.memoizedState!==null||$c,!r){t=t!==null&&t.memoizedState!==null||K,i=$c;var a=K;$c=r,(K=t)&&!a?bl(e,n,(n.subtreeFlags&8772)!=0):vl(e,n),$c=i,K=a}break;case 30:break;default:vl(e,n)}}function al(e){var t=e.alternate;t!==null&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&bt(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var q=null,ol=!1;function sl(e,t,n){for(n=n.child;n!==null;)cl(e,t,n),n=n.sibling}function cl(e,t,n){if(He&&typeof He.onCommitFiberUnmount==`function`)try{He.onCommitFiberUnmount(Ve,n)}catch{}switch(n.tag){case 26:K||Gc(n,t),sl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:K||Gc(n,t);var r=q,i=ol;Qd(n.type)&&(q=n.stateNode,ol=!1),sl(e,t,n),mf(n.stateNode),q=r,ol=i;break;case 5:K||Gc(n,t);case 6:if(r=q,i=ol,q=null,sl(e,t,n),q=r,ol=i,q!==null)if(ol)try{(q.nodeType===9?q.body:q.nodeName===`HTML`?q.ownerDocument.body:q).removeChild(n.stateNode)}catch(e){Ku(n,t,e)}else try{q.removeChild(n.stateNode)}catch(e){Ku(n,t,e)}break;case 18:q!==null&&(ol?(e=q,$d(e.nodeType===9?e.body:e.nodeName===`HTML`?e.ownerDocument.body:e,n.stateNode),Pp(e)):$d(q,n.stateNode));break;case 4:r=q,i=ol,q=n.stateNode.containerInfo,ol=!0,sl(e,t,n),q=r,ol=i;break;case 0:case 11:case 14:case 15:Vc(2,n,t),K||Vc(4,n,t),sl(e,t,n);break;case 1:K||(Gc(n,t),r=n.stateNode,typeof r.componentWillUnmount==`function`&&Uc(n,t,r)),sl(e,t,n);break;case 21:sl(e,t,n);break;case 22:K=(r=K)||n.memoizedState!==null,sl(e,t,n),K=r;break;default:sl(e,t,n)}}function ll(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Pp(e)}catch(e){Ku(t,t.return,e)}}}function ul(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Pp(e)}catch(e){Ku(t,t.return,e)}}function dl(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new tl),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new tl),t;default:throw Error(i(435,e.tag))}}function fl(e,t){var n=dl(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=Xu.bind(null,e,t);t.then(r,r)}})}function pl(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r],o=e,s=t,c=s;a:for(;c!==null;){switch(c.tag){case 27:if(Qd(c.type)){q=c.stateNode,ol=!1;break a}break;case 5:q=c.stateNode,ol=!1;break a;case 3:case 4:q=c.stateNode.containerInfo,ol=!0;break a}c=c.return}if(q===null)throw Error(i(160));cl(o,s,a),q=null,ol=!1,o=a.alternate,o!==null&&(o.return=null),a.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)hl(t,e),t=t.sibling}var ml=null;function hl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:pl(t,e),gl(e),r&4&&(Vc(3,e,e.return),Bc(3,e),Vc(5,e,e.return));break;case 1:pl(t,e),gl(e),r&512&&(K||n===null||Gc(n,n.return)),r&64&&$c&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?r:n.concat(r))));break;case 26:var a=ml;if(pl(t,e),gl(e),r&512&&(K||n===null||Gc(n,n.return)),r&4){var o=n===null?null:n.memoizedState;if(r=e.memoizedState,n===null)if(r===null)if(e.stateNode===null){a:{r=e.type,n=e.memoizedProps,a=a.ownerDocument||a;b:switch(r){case`title`:o=a.getElementsByTagName(`title`)[0],(!o||o[yt]||o[ft]||o.namespaceURI===`http://www.w3.org/2000/svg`||o.hasAttribute(`itemprop`))&&(o=a.createElement(r),a.head.insertBefore(o,a.querySelector(`head > title`))),Fd(o,r,n),o[ft]=e,Tt(o),r=o;break a;case`link`:var s=Hf(`link`,`href`,a).get(r+(n.href||``));if(s){for(var c=0;c<s.length;c++)if(o=s[c],o.getAttribute(`href`)===(n.href==null||n.href===``?null:n.href)&&o.getAttribute(`rel`)===(n.rel==null?null:n.rel)&&o.getAttribute(`title`)===(n.title==null?null:n.title)&&o.getAttribute(`crossorigin`)===(n.crossOrigin==null?null:n.crossOrigin)){s.splice(c,1);break b}}o=a.createElement(r),Fd(o,r,n),a.head.appendChild(o);break;case`meta`:if(s=Hf(`meta`,`content`,a).get(r+(n.content||``))){for(c=0;c<s.length;c++)if(o=s[c],o.getAttribute(`content`)===(n.content==null?null:``+n.content)&&o.getAttribute(`name`)===(n.name==null?null:n.name)&&o.getAttribute(`property`)===(n.property==null?null:n.property)&&o.getAttribute(`http-equiv`)===(n.httpEquiv==null?null:n.httpEquiv)&&o.getAttribute(`charset`)===(n.charSet==null?null:n.charSet)){s.splice(c,1);break b}}o=a.createElement(r),Fd(o,r,n),a.head.appendChild(o);break;default:throw Error(i(468,r))}o[ft]=e,Tt(o),r=o}e.stateNode=r}else Uf(a,e.type,e.stateNode);else e.stateNode=Lf(a,r,e.memoizedProps);else o===r?r===null&&e.stateNode!==null&&qc(e,e.memoizedProps,n.memoizedProps):(o===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):o.count--,r===null?Uf(a,e.type,e.stateNode):Lf(a,r,e.memoizedProps))}break;case 27:pl(t,e),gl(e),r&512&&(K||n===null||Gc(n,n.return)),n!==null&&r&4&&qc(e,e.memoizedProps,n.memoizedProps);break;case 5:if(pl(t,e),gl(e),r&512&&(K||n===null||Gc(n,n.return)),e.flags&32){a=e.stateNode;try{Xt(a,``)}catch(t){Ku(e,e.return,t)}}r&4&&e.stateNode!=null&&(a=e.memoizedProps,qc(e,a,n===null?a:n.memoizedProps)),r&1024&&(el=!0);break;case 6:if(pl(t,e),gl(e),r&4){if(e.stateNode===null)throw Error(i(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(t){Ku(e,e.return,t)}}break;case 3:if(Vf=null,a=ml,ml=_f(t.containerInfo),pl(t,e),ml=a,gl(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Pp(t.containerInfo)}catch(t){Ku(e,e.return,t)}el&&(el=!1,_l(e));break;case 4:r=ml,ml=_f(e.stateNode.containerInfo),pl(t,e),gl(e),ml=r;break;case 12:pl(t,e),gl(e);break;case 31:pl(t,e),gl(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,fl(e,r)));break;case 13:pl(t,e),gl(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(eu=Me()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,fl(e,r)));break;case 22:a=e.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,u=$c,d=K;if($c=u||a,K=d||l,pl(t,e),K=d,$c=u,gl(e),r&8192)a:for(t=e.stateNode,t._visibility=a?t._visibility&-2:t._visibility|1,a&&(n===null||l||$c||K||yl(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){l=n=t;try{if(o=l.stateNode,a)s=o.style,typeof s.setProperty==`function`?s.setProperty(`display`,`none`,`important`):s.display=`none`;else{c=l.stateNode;var f=l.memoizedProps.style,p=f!=null&&f.hasOwnProperty(`display`)?f.display:null;c.style.display=p==null||typeof p==`boolean`?``:(``+p).trim()}}catch(e){Ku(l,l.return,e)}}}else if(t.tag===6){if(n===null){l=t;try{l.stateNode.nodeValue=a?``:l.memoizedProps}catch(e){Ku(l,l.return,e)}}}else if(t.tag===18){if(n===null){l=t;try{var m=l.stateNode;a?ef(m,!0):ef(l.stateNode,!1)}catch(e){Ku(l,l.return,e)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break a;for(;t.sibling===null;){if(t.return===null||t.return===e)break a;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}r&4&&(r=e.updateQueue,r!==null&&(n=r.retryQueue,n!==null&&(r.retryQueue=null,fl(e,n))));break;case 19:pl(t,e),gl(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,fl(e,r)));break;case 30:break;case 21:break;default:pl(t,e),gl(e)}}function gl(e){var t=e.flags;if(t&2){try{for(var n,r=e.return;r!==null;){if(Jc(r)){n=r;break}r=r.return}if(n==null)throw Error(i(160));switch(n.tag){case 27:var a=n.stateNode;Zc(e,Yc(e),a);break;case 5:var o=n.stateNode;n.flags&32&&(Xt(o,``),n.flags&=-33),Zc(e,Yc(e),o);break;case 3:case 4:var s=n.stateNode.containerInfo;Xc(e,Yc(e),s);break;default:throw Error(i(161))}}catch(t){Ku(e,e.return,t)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function _l(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;_l(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function vl(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)il(e,t.alternate,t),t=t.sibling}function yl(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Vc(4,t,t.return),yl(t);break;case 1:Gc(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount==`function`&&Uc(t,t.return,n),yl(t);break;case 27:mf(t.stateNode);case 26:case 5:Gc(t,t.return),yl(t);break;case 22:t.memoizedState===null&&yl(t);break;case 30:yl(t);break;default:yl(t)}e=e.sibling}}function bl(e,t,n){for(n&&=(t.subtreeFlags&8772)!=0,t=t.child;t!==null;){var r=t.alternate,i=e,a=t,o=a.flags;switch(a.tag){case 0:case 11:case 15:bl(i,a,n),Bc(4,a);break;case 1:if(bl(i,a,n),r=a,i=r.stateNode,typeof i.componentDidMount==`function`)try{i.componentDidMount()}catch(e){Ku(r,r.return,e)}if(r=a,i=r.updateQueue,i!==null){var s=r.stateNode;try{var c=i.shared.hiddenCallbacks;if(c!==null)for(i.shared.hiddenCallbacks=null,i=0;i<c.length;i++)eo(c[i],s)}catch(e){Ku(r,r.return,e)}}n&&o&64&&Hc(a),Wc(a,a.return);break;case 27:Qc(a);case 26:case 5:bl(i,a,n),n&&r===null&&o&4&&Kc(a),Wc(a,a.return);break;case 12:bl(i,a,n);break;case 31:bl(i,a,n),n&&o&4&&ll(i,a);break;case 13:bl(i,a,n),n&&o&4&&ul(i,a);break;case 22:a.memoizedState===null&&bl(i,a,n),Wc(a,a.return);break;case 30:break;default:bl(i,a,n)}t=t.sibling}}function xl(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&pa(n))}function Sl(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&pa(e))}function Cl(e,t,n,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)wl(e,t,n,r),t=t.sibling}function wl(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Cl(e,t,n,r),i&2048&&Bc(9,t);break;case 1:Cl(e,t,n,r);break;case 3:Cl(e,t,n,r),i&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&pa(e)));break;case 12:if(i&2048){Cl(e,t,n,r),e=t.stateNode;try{var a=t.memoizedProps,o=a.id,s=a.onPostCommit;typeof s==`function`&&s(o,t.alternate===null?`mount`:`update`,e.passiveEffectDuration,-0)}catch(e){Ku(t,t.return,e)}}else Cl(e,t,n,r);break;case 31:Cl(e,t,n,r);break;case 13:Cl(e,t,n,r);break;case 23:break;case 22:a=t.stateNode,o=t.alternate,t.memoizedState===null?a._visibility&2?Cl(e,t,n,r):(a._visibility|=2,Tl(e,t,n,r,(t.subtreeFlags&10256)!=0||!1)):a._visibility&2?Cl(e,t,n,r):El(e,t),i&2048&&xl(o,t);break;case 24:Cl(e,t,n,r),i&2048&&Sl(t.alternate,t);break;default:Cl(e,t,n,r)}}function Tl(e,t,n,r,i){for(i&&=(t.subtreeFlags&10256)!=0||!1,t=t.child;t!==null;){var a=e,o=t,s=n,c=r,l=o.flags;switch(o.tag){case 0:case 11:case 15:Tl(a,o,s,c,i),Bc(8,o);break;case 23:break;case 22:var u=o.stateNode;o.memoizedState===null?(u._visibility|=2,Tl(a,o,s,c,i)):u._visibility&2?Tl(a,o,s,c,i):El(a,o),i&&l&2048&&xl(o.alternate,o);break;case 24:Tl(a,o,s,c,i),i&&l&2048&&Sl(o.alternate,o);break;default:Tl(a,o,s,c,i)}t=t.sibling}}function El(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:El(n,r),i&2048&&xl(r.alternate,r);break;case 24:El(n,r),i&2048&&Sl(r.alternate,r);break;default:El(n,r)}t=t.sibling}}var Dl=8192;function Ol(e,t,n){if(e.subtreeFlags&Dl)for(e=e.child;e!==null;)kl(e,t,n),e=e.sibling}function kl(e,t,n){switch(e.tag){case 26:Ol(e,t,n),e.flags&Dl&&e.memoizedState!==null&&Kf(n,ml,e.memoizedState,e.memoizedProps);break;case 5:Ol(e,t,n);break;case 3:case 4:var r=ml;ml=_f(e.stateNode.containerInfo),Ol(e,t,n),ml=r;break;case 22:e.memoizedState===null&&(r=e.alternate,r!==null&&r.memoizedState!==null?(r=Dl,Dl=16777216,Ol(e,t,n),Dl=r):Ol(e,t,n));break;default:Ol(e,t,n)}}function Al(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function jl(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];nl=r,Pl(r,e)}Al(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Ml(e),e=e.sibling}function Ml(e){switch(e.tag){case 0:case 11:case 15:jl(e),e.flags&2048&&Vc(9,e,e.return);break;case 3:jl(e);break;case 12:jl(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Nl(e)):jl(e);break;default:jl(e)}}function Nl(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];nl=r,Pl(r,e)}Al(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Vc(8,t,t.return),Nl(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Nl(t));break;default:Nl(t)}e=e.sibling}}function Pl(e,t){for(;nl!==null;){var n=nl;switch(n.tag){case 0:case 11:case 15:Vc(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var r=n.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:pa(n.memoizedState.cache)}if(r=n.child,r!==null)r.return=n,nl=r;else a:for(n=e;nl!==null;){r=nl;var i=r.sibling,a=r.return;if(al(r),r===n){nl=null;break a}if(i!==null){i.return=a,nl=i;break a}nl=a}}}var Fl={getCacheForType:function(e){var t=aa(da),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return aa(da).controller.signal}},Il=typeof WeakMap==`function`?WeakMap:Map,Ll=0,Rl=null,J=null,Y=0,zl=0,Bl=null,Vl=!1,Hl=!1,Ul=!1,Wl=0,Gl=0,Kl=0,ql=0,Jl=0,Yl=0,Xl=0,Zl=null,Ql=null,$l=!1,eu=0,tu=0,nu=1/0,ru=null,iu=null,au=0,ou=null,su=null,cu=0,lu=0,uu=null,du=null,fu=0,pu=null;function mu(){return Ll&2&&Y!==0?Y&-Y:A.T===null?lt():fd()}function hu(){if(Yl===0)if(!(Y&536870912)||F){var e=Je;Je<<=1,!(Je&3932160)&&(Je=262144),Yl=e}else Yl=536870912;return e=so.current,e!==null&&(e.flags|=32),Yl}function gu(e,t,n){(e===Rl&&(zl===2||zl===9)||e.cancelPendingCommit!==null)&&(Cu(e,0),bu(e,Y,Yl,!1)),nt(e,n),(!(Ll&2)||e!==Rl)&&(e===Rl&&(!(Ll&2)&&(ql|=n),Gl===4&&bu(e,Y,Yl,!1)),id(e))}function _u(e,t,n){if(Ll&6)throw Error(i(327));var r=!n&&(t&127)==0&&(t&e.expiredLanes)===0||Qe(e,t),a=r?ju(e,t):ku(e,t,!0),o=r;do{if(a===0){Hl&&!r&&bu(e,t,0,!1);break}else{if(n=e.current.alternate,o&&!yu(n)){a=ku(e,t,!1),o=!1;continue}if(a===2){if(o=t,e.errorRecoveryDisabledLanes&o)var s=0;else s=e.pendingLanes&-536870913,s=s===0?s&536870912?536870912:0:s;if(s!==0){t=s;a:{var c=e;a=Zl;var l=c.current.memoizedState.isDehydrated;if(l&&(Cu(c,s).flags|=256),s=ku(c,s,!1),s!==2){if(Ul&&!l){c.errorRecoveryDisabledLanes|=o,ql|=o,a=4;break a}o=Ql,Ql=a,o!==null&&(Ql===null?Ql=o:Ql.push.apply(Ql,o))}a=s}if(o=!1,a!==2)continue}}if(a===1){Cu(e,0),bu(e,t,0,!0);break}a:{switch(r=e,o=a,o){case 0:case 1:throw Error(i(345));case 4:if((t&4194048)!==t)break;case 6:bu(r,t,Yl,!Vl);break a;case 2:Ql=null;break;case 3:case 5:break;default:throw Error(i(329))}if((t&62914560)===t&&(a=eu+300-Me(),10<a)){if(bu(r,t,Yl,!Vl),Ze(r,0,!0)!==0)break a;cu=t,r.timeoutHandle=qd(vu.bind(null,r,n,Ql,ru,$l,t,Yl,ql,Xl,Vl,o,`Throttled`,-0,0),a);break a}vu(r,n,Ql,ru,$l,t,Yl,ql,Xl,Vl,o,null,-0,0)}}break}while(1);id(e)}function vu(e,t,n,r,i,a,o,s,c,l,u,d,f,p){if(e.timeoutHandle=-1,d=t.subtreeFlags,d&8192||(d&16785408)==16785408){d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:an},kl(t,a,d);var m=(a&62914560)===a?eu-Me():(a&4194048)===a?tu-Me():0;if(m=Jf(d,m),m!==null){cu=a,e.cancelPendingCommit=m(Ru.bind(null,e,t,a,n,r,i,o,s,c,u,d,null,f,p)),bu(e,a,o,!l);return}}Ru(e,t,a,n,r,i,o,s,c)}function yu(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Er(a(),i))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function bu(e,t,n,r){t&=~Jl,t&=~ql,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var a=31-We(i),o=1<<a;r[a]=-1,i&=~o}n!==0&&it(e,n,t)}function xu(){return Ll&6?!0:(ad(0,!1),!1)}function Su(){if(J!==null){if(zl===0)var e=J.return;else e=J,Zi=Xi=null,Fo(e),Ia=null,La=0,e=J;for(;e!==null;)G(e.alternate,e),e=e.return;J=null}}function Cu(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Jd(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),cu=0,Su(),Rl=e,J=n=mi(e.current,null),Y=t,zl=0,Bl=null,Vl=!1,Hl=Qe(e,t),Ul=!1,Xl=Yl=Jl=ql=Kl=Gl=0,Ql=Zl=null,$l=!1,t&8&&(t|=t&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=t;0<r;){var i=31-We(r),a=1<<i;t|=e[i],r&=~a}return Wl=t,ii(),n}function wu(e,t){I=null,A.H=Gs,t===Ea||t===Oa?(t=Pa(),zl=3):t===Da?(t=Pa(),zl=4):zl=t===ic?8:typeof t==`object`&&t&&typeof t.then==`function`?6:1,Bl=t,J===null&&(Gl=1,Qs(e,Si(t,e.current)))}function Tu(){var e=so.current;return e===null?!0:(Y&4194048)===Y?co===null:(Y&62914560)===Y||Y&536870912?e===co:!1}function Eu(){var e=A.H;return A.H=Gs,e===null?Gs:e}function Du(){var e=A.A;return A.A=Fl,e}function Ou(){Gl=4,Vl||(Y&4194048)!==Y&&so.current!==null||(Hl=!0),!(Kl&134217727)&&!(ql&134217727)||Rl===null||bu(Rl,Y,Yl,!1)}function ku(e,t,n){var r=Ll;Ll|=2;var i=Eu(),a=Du();(Rl!==e||Y!==t)&&(ru=null,Cu(e,t)),t=!1;var o=Gl;a:do try{if(zl!==0&&J!==null){var s=J,c=Bl;switch(zl){case 8:Su(),o=6;break a;case 3:case 2:case 9:case 6:so.current===null&&(t=!0);var l=zl;if(zl=0,Bl=null,Fu(e,s,c,l),n&&Hl){o=0;break a}break;default:l=zl,zl=0,Bl=null,Fu(e,s,c,l)}}Au(),o=Gl;break}catch(t){wu(e,t)}while(1);return t&&e.shellSuspendCounter++,Zi=Xi=null,Ll=r,A.H=i,A.A=a,J===null&&(Rl=null,Y=0,ii()),o}function Au(){for(;J!==null;)Nu(J)}function ju(e,t){var n=Ll;Ll|=2;var r=Eu(),a=Du();Rl!==e||Y!==t?(ru=null,nu=Me()+500,Cu(e,t)):Hl=Qe(e,t);a:do try{if(zl!==0&&J!==null){t=J;var o=Bl;b:switch(zl){case 1:zl=0,Bl=null,Fu(e,t,o,1);break;case 2:case 9:if(Aa(o)){zl=0,Bl=null,Pu(t);break}t=function(){zl!==2&&zl!==9||Rl!==e||(zl=7),id(e)},o.then(t,t);break a;case 3:zl=7;break a;case 4:zl=5;break a;case 7:Aa(o)?(zl=0,Bl=null,Pu(t)):(zl=0,Bl=null,Fu(e,t,o,7));break;case 5:var s=null;switch(J.tag){case 26:s=J.memoizedState;case 5:case 27:var c=J;if(s?Gf(s):c.stateNode.complete){zl=0,Bl=null;var l=c.sibling;if(l!==null)J=l;else{var u=c.return;u===null?J=null:(J=u,Iu(u))}break b}}zl=0,Bl=null,Fu(e,t,o,5);break;case 6:zl=0,Bl=null,Fu(e,t,o,6);break;case 8:Su(),Gl=6;break a;default:throw Error(i(462))}}Mu();break}catch(t){wu(e,t)}while(1);return Zi=Xi=null,A.H=r,A.A=a,Ll=n,J===null?(Rl=null,Y=0,ii(),Gl):0}function Mu(){for(;J!==null&&!Ae();)Nu(J)}function Nu(e){var t=jc(e.alternate,e,Wl);e.memoizedProps=e.pendingProps,t===null?Iu(e):J=t}function Pu(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=_c(n,t,t.pendingProps,t.type,void 0,Y);break;case 11:t=_c(n,t,t.pendingProps,t.type.render,t.ref,Y);break;case 5:Fo(t);default:G(n,t),t=J=hi(t,Wl),t=jc(n,t,Wl)}e.memoizedProps=e.pendingProps,t===null?Iu(e):J=t}function Fu(e,t,n,r){Zi=Xi=null,Fo(t),Ia=null,La=0;var i=t.return;try{if(rc(e,i,t,n,Y)){Gl=1,Qs(e,Si(n,e.current)),J=null;return}}catch(t){if(i!==null)throw J=i,t;Gl=1,Qs(e,Si(n,e.current)),J=null;return}t.flags&32768?(F||r===1?e=!0:Hl||Y&536870912?e=!1:(Vl=e=!0,(r===2||r===9||r===3||r===6)&&(r=so.current,r!==null&&r.tag===13&&(r.flags|=16384))),Lu(t,e)):Iu(t)}function Iu(e){var t=e;do{if(t.flags&32768){Lu(t,Vl);return}e=t.return;var n=Rc(t.alternate,t,Wl);if(n!==null){J=n;return}if(t=t.sibling,t!==null){J=t;return}J=t=e}while(t!==null);Gl===0&&(Gl=5)}function Lu(e,t){do{var n=zc(e.alternate,e);if(n!==null){n.flags&=32767,J=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){J=e;return}J=e=n}while(e!==null);Gl=6,J=null}function Ru(e,t,n,r,a,o,s,c,l){e.cancelPendingCommit=null;do Uu();while(au!==0);if(Ll&6)throw Error(i(327));if(t!==null){if(t===e.current)throw Error(i(177));if(o=t.lanes|t.childLanes,o|=ri,rt(e,n,o,s,c,l),e===Rl&&(J=Rl=null,Y=0),su=t,ou=e,cu=n,lu=o,uu=a,du=r,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,Zu(Ie,function(){return Wu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(t.flags&13878)!=0,t.subtreeFlags&13878||r){r=A.T,A.T=null,a=j.p,j.p=2,s=Ll,Ll|=4;try{rl(e,t,n)}finally{Ll=s,j.p=a,A.T=r}}au=1,zu(),Bu(),Vu()}}function zu(){if(au===1){au=0;var e=ou,t=su,n=(t.flags&13878)!=0;if(t.subtreeFlags&13878||n){n=A.T,A.T=null;var r=j.p;j.p=2;var i=Ll;Ll|=4;try{hl(t,e);var a=Bd,o=jr(e.containerInfo),s=a.focusedElem,c=a.selectionRange;if(o!==s&&s&&s.ownerDocument&&Ar(s.ownerDocument.documentElement,s)){if(c!==null&&Mr(s)){var l=c.start,u=c.end;if(u===void 0&&(u=l),`selectionStart`in s)s.selectionStart=l,s.selectionEnd=Math.min(u,s.value.length);else{var d=s.ownerDocument||document,f=d&&d.defaultView||window;if(f.getSelection){var p=f.getSelection(),m=s.textContent.length,h=Math.min(c.start,m),g=c.end===void 0?h:Math.min(c.end,m);!p.extend&&h>g&&(o=g,g=h,h=o);var _=kr(s,h),v=kr(s,g);if(_&&v&&(p.rangeCount!==1||p.anchorNode!==_.node||p.anchorOffset!==_.offset||p.focusNode!==v.node||p.focusOffset!==v.offset)){var y=d.createRange();y.setStart(_.node,_.offset),p.removeAllRanges(),h>g?(p.addRange(y),p.extend(v.node,v.offset)):(y.setEnd(v.node,v.offset),p.addRange(y))}}}}for(d=[],p=s;p=p.parentNode;)p.nodeType===1&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof s.focus==`function`&&s.focus(),s=0;s<d.length;s++){var b=d[s];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}cp=!!zd,Bd=zd=null}finally{Ll=i,j.p=r,A.T=n}}e.current=t,au=2}}function Bu(){if(au===2){au=0;var e=ou,t=su,n=(t.flags&8772)!=0;if(t.subtreeFlags&8772||n){n=A.T,A.T=null;var r=j.p;j.p=2;var i=Ll;Ll|=4;try{il(e,t.alternate,t)}finally{Ll=i,j.p=r,A.T=n}}au=3}}function Vu(){if(au===4||au===3){au=0,je();var e=ou,t=su,n=cu,r=du;t.subtreeFlags&10256||t.flags&10256?au=5:(au=0,su=ou=null,Hu(e,e.pendingLanes));var i=e.pendingLanes;if(i===0&&(iu=null),ct(n),t=t.stateNode,He&&typeof He.onCommitFiberRoot==`function`)try{He.onCommitFiberRoot(Ve,t,void 0,(t.current.flags&128)==128)}catch{}if(r!==null){t=A.T,i=j.p,j.p=2,A.T=null;try{for(var a=e.onRecoverableError,o=0;o<r.length;o++){var s=r[o];a(s.value,{componentStack:s.stack})}}finally{A.T=t,j.p=i}}cu&3&&Uu(),id(e),i=e.pendingLanes,n&261930&&i&42?e===pu?fu++:(fu=0,pu=e):fu=0,ad(0,!1)}}function Hu(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,pa(t)))}function Uu(){return zu(),Bu(),Vu(),Wu()}function Wu(){if(au!==5)return!1;var e=ou,t=lu;lu=0;var n=ct(cu),r=A.T,a=j.p;try{j.p=32>n?32:n,A.T=null,n=uu,uu=null;var o=ou,s=cu;if(au=0,su=ou=null,cu=0,Ll&6)throw Error(i(331));var c=Ll;if(Ll|=4,Ml(o.current),wl(o,o.current,s,n),Ll=c,ad(0,!1),He&&typeof He.onPostCommitFiberRoot==`function`)try{He.onPostCommitFiberRoot(Ve,o)}catch{}return!0}finally{j.p=a,A.T=r,Hu(e,t)}}function Gu(e,t,n){t=Si(n,t),t=ec(e.stateNode,t,2),e=Ja(e,t,2),e!==null&&(nt(e,2),id(e))}function Ku(e,t,n){if(e.tag===3)Gu(e,e,n);else for(;t!==null;){if(t.tag===3){Gu(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError==`function`||typeof r.componentDidCatch==`function`&&(iu===null||!iu.has(r))){e=Si(n,e),n=tc(2),r=Ja(t,n,2),r!==null&&(nc(n,r,t,e),nt(r,2),id(r));break}}t=t.return}}function qu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Il;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(Ul=!0,i.add(n),e=X.bind(null,e,t,n),t.then(e,e))}function X(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Rl===e&&(Y&n)===n&&(Gl===4||Gl===3&&(Y&62914560)===Y&&300>Me()-eu?!(Ll&2)&&Cu(e,0):Jl|=n,Xl===Y&&(Xl=0)),id(e)}function Ju(e,t){t===0&&(t=et()),e=si(e,t),e!==null&&(nt(e,t),id(e))}function Yu(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Ju(e,n)}function Xu(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(i(314))}r!==null&&r.delete(t),Ju(e,n)}function Zu(e,t){return Oe(e,t)}var Qu=null,$u=null,ed=!1,td=!1,nd=!1,rd=0;function id(e){e!==$u&&e.next===null&&($u===null?Qu=$u=e:$u=$u.next=e),td=!0,ed||(ed=!0,dd())}function ad(e,t){if(!nd&&td){nd=!0;do for(var n=!1,r=Qu;r!==null;){if(!t)if(e!==0){var i=r.pendingLanes;if(i===0)var a=0;else{var o=r.suspendedLanes,s=r.pingedLanes;a=(1<<31-We(42|e)+1)-1,a&=i&~(o&~s),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(n=!0,ud(r,a))}else a=Y,a=Ze(r,r===Rl?a:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),!(a&3)||Qe(r,a)||(n=!0,ud(r,a));r=r.next}while(n);nd=!1}}function od(){sd()}function sd(){td=ed=!1;var e=0;rd!==0&&Kd()&&(e=rd);for(var t=Me(),n=null,r=Qu;r!==null;){var i=r.next,a=cd(r,t);a===0?(r.next=null,n===null?Qu=i:n.next=i,i===null&&($u=n)):(n=r,(e!==0||a&3)&&(td=!0)),r=i}au!==0&&au!==5||ad(e,!1),rd!==0&&(rd=0)}function cd(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes&-62914561;0<a;){var o=31-We(a),s=1<<o,c=i[o];c===-1?((s&n)===0||(s&r)!==0)&&(i[o]=$e(s,t)):c<=t&&(e.expiredLanes|=s),a&=~s}if(t=Rl,n=Y,n=Ze(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,n===0||e===t&&(zl===2||zl===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&ke(r),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||Qe(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(r!==null&&ke(r),ct(n)){case 2:case 8:n=Fe;break;case 32:n=Ie;break;case 268435456:n=Re;break;default:n=Ie}return r=ld.bind(null,e),n=Oe(n,r),e.callbackPriority=t,e.callbackNode=n,t}return r!==null&&r!==null&&ke(r),e.callbackPriority=2,e.callbackNode=null,2}function ld(e,t){if(au!==0&&au!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Uu()&&e.callbackNode!==n)return null;var r=Y;return r=Ze(e,e===Rl?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(_u(e,r,t),cd(e,Me()),e.callbackNode!=null&&e.callbackNode===n?ld.bind(null,e):null)}function ud(e,t){if(Uu())return null;_u(e,t,!0)}function dd(){Xd(function(){Ll&6?Oe(Pe,od):sd()})}function fd(){if(rd===0){var e=ga;e===0&&(e=qe,qe<<=1,!(qe&261888)&&(qe=256)),rd=e}return rd}function pd(e){return e==null||typeof e==`symbol`||typeof e==`boolean`?null:typeof e==`function`?e:rn(``+e)}function md(e,t){var n=t.ownerDocument.createElement(`input`);return n.name=t.name,n.value=t.value,e.id&&n.setAttribute(`form`,e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function hd(e,t,n,r,i){if(t===`submit`&&n&&n.stateNode===i){var a=pd((i[pt]||null).action),o=r.submitter;o&&(t=(t=o[pt]||null)?pd(t.formAction):o.getAttribute(`formAction`),t!==null&&(a=t,o=null));var s=new En(`action`,`action`,null,r,i);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(rd!==0){var e=o?md(i,o):new FormData(i);js(n,{pending:!0,data:e,method:i.method,action:a},null,e)}}else typeof a==`function`&&(s.preventDefault(),e=o?md(i,o):new FormData(i),js(n,{pending:!0,data:e,method:i.method,action:a},a,e))},currentTarget:i}]})}}for(var gd=0;gd<Qr.length;gd++){var _d=Qr[gd];$r(_d.toLowerCase(),`on`+(_d[0].toUpperCase()+_d.slice(1)))}$r(Wr,`onAnimationEnd`),$r(Gr,`onAnimationIteration`),$r(Kr,`onAnimationStart`),$r(`dblclick`,`onDoubleClick`),$r(`focusin`,`onFocus`),$r(`focusout`,`onBlur`),$r(qr,`onTransitionRun`),$r(Jr,`onTransitionStart`),$r(Yr,`onTransitionCancel`),$r(Xr,`onTransitionEnd`),kt(`onMouseEnter`,[`mouseout`,`mouseover`]),kt(`onMouseLeave`,[`mouseout`,`mouseover`]),kt(`onPointerEnter`,[`pointerout`,`pointerover`]),kt(`onPointerLeave`,[`pointerout`,`pointerover`]),Ot(`onChange`,`change click focusin focusout input keydown keyup selectionchange`.split(` `)),Ot(`onSelect`,`focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange`.split(` `)),Ot(`onBeforeInput`,[`compositionend`,`keypress`,`textInput`,`paste`]),Ot(`onCompositionEnd`,`compositionend focusout keydown keypress keyup mousedown`.split(` `)),Ot(`onCompositionStart`,`compositionstart focusout keydown keypress keyup mousedown`.split(` `)),Ot(`onCompositionUpdate`,`compositionupdate focusout keydown keypress keyup mousedown`.split(` `));var vd=`abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting`.split(` `),yd=new Set(`beforetoggle cancel close invalid load scroll scrollend toggle`.split(` `).concat(vd));function bd(e,t){t=(t&4)!=0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;a:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==a&&i.isPropagationStopped())break a;a=s,i.currentTarget=l;try{a(i)}catch(e){ei(e)}i.currentTarget=null,a=c}else for(o=0;o<r.length;o++){if(s=r[o],c=s.instance,l=s.currentTarget,s=s.listener,c!==a&&i.isPropagationStopped())break a;a=s,i.currentTarget=l;try{a(i)}catch(e){ei(e)}i.currentTarget=null,a=c}}}}function Z(e,t){var n=t[ht];n===void 0&&(n=t[ht]=new Set);var r=e+`__bubble`;n.has(r)||(wd(t,e,2,!1),n.add(r))}function xd(e,t,n){var r=0;t&&(r|=4),wd(n,e,r,t)}var Sd=`_reactListening`+Math.random().toString(36).slice(2);function Cd(e){if(!e[Sd]){e[Sd]=!0,Et.forEach(function(t){t!==`selectionchange`&&(yd.has(t)||xd(t,!1,e),xd(t,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Sd]||(t[Sd]=!0,xd(`selectionchange`,!1,t))}}function wd(e,t,n,r){switch(hp(t)){case 2:var i=lp;break;case 8:i=up;break;default:i=dp}n=i.bind(null,t,n,e),i=void 0,!hn||t!==`touchstart`&&t!==`touchmove`&&t!==`wheel`||(i=!0),r?i===void 0?e.addEventListener(t,n,!0):e.addEventListener(t,n,{capture:!0,passive:i}):i===void 0?e.addEventListener(t,n,!1):e.addEventListener(t,n,{passive:i})}function Td(e,t,n,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)a:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var c=r.stateNode.containerInfo;if(c===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&s.stateNode.containerInfo===i)return;s=s.return}for(;c!==null;){if(s=xt(c),s===null)return;if(l=s.tag,l===5||l===6||l===26||l===27){r=a=s;continue a}c=c.parentNode}}r=r.return}fn(function(){var r=a,i=sn(n),s=[];a:{var c=Zr.get(e);if(c!==void 0){var l=En,u=e;switch(e){case`keypress`:if(xn(n)===0)break a;case`keydown`:case`keyup`:l=Un;break;case`focusin`:u=`focus`,l=Fn;break;case`focusout`:u=`blur`,l=Fn;break;case`beforeblur`:case`afterblur`:l=Fn;break;case`click`:if(n.button===2)break a;case`auxclick`:case`dblclick`:case`mousedown`:case`mousemove`:case`mouseup`:case`mouseout`:case`mouseover`:case`contextmenu`:l=Nn;break;case`drag`:case`dragend`:case`dragenter`:case`dragexit`:case`dragleave`:case`dragover`:case`dragstart`:case`drop`:l=Pn;break;case`touchcancel`:case`touchend`:case`touchmove`:case`touchstart`:l=Gn;break;case Wr:case Gr:case Kr:l=In;break;case Xr:l=Kn;break;case`scroll`:case`scrollend`:l=On;break;case`wheel`:l=qn;break;case`copy`:case`cut`:case`paste`:l=Ln;break;case`gotpointercapture`:case`lostpointercapture`:case`pointercancel`:case`pointerdown`:case`pointermove`:case`pointerout`:case`pointerover`:case`pointerup`:l=Wn;break;case`toggle`:case`beforetoggle`:l=Jn}var d=(t&4)!=0,f=!d&&(e===`scroll`||e===`scrollend`),p=d?c===null?null:c+`Capture`:c;d=[];for(var m=r,h;m!==null;){var g=m;if(h=g.stateNode,g=g.tag,g!==5&&g!==26&&g!==27||h===null||p===null||(g=pn(m,p),g!=null&&d.push(Ed(m,g,h))),f)break;m=m.return}0<d.length&&(c=new l(c,u,null,n,i),s.push({event:c,listeners:d}))}}if(!(t&7)){a:{if(c=e===`mouseover`||e===`pointerover`,l=e===`mouseout`||e===`pointerout`,c&&n!==on&&(u=n.relatedTarget||n.fromElement)&&(xt(u)||u[mt]))break a;if((l||c)&&(c=i.window===i?i:(c=i.ownerDocument)?c.defaultView||c.parentWindow:window,l?(u=n.relatedTarget||n.toElement,l=r,u=u?xt(u):null,u!==null&&(f=o(u),d=u.tag,u!==f||d!==5&&d!==27&&d!==6)&&(u=null)):(l=null,u=r),l!==u)){if(d=Nn,g=`onMouseLeave`,p=`onMouseEnter`,m=`mouse`,(e===`pointerout`||e===`pointerover`)&&(d=Wn,g=`onPointerLeave`,p=`onPointerEnter`,m=`pointer`),f=l==null?c:Ct(l),h=u==null?c:Ct(u),c=new d(g,m+`leave`,l,n,i),c.target=f,c.relatedTarget=h,g=null,xt(i)===r&&(d=new d(p,m+`enter`,u,n,i),d.target=h,d.relatedTarget=f,g=d),f=g,l&&u)b:{for(d=Od,p=l,m=u,h=0,g=p;g;g=d(g))h++;g=0;for(var _=m;_;_=d(_))g++;for(;0<h-g;)p=d(p),h--;for(;0<g-h;)m=d(m),g--;for(;h--;){if(p===m||m!==null&&p===m.alternate){d=p;break b}p=d(p),m=d(m)}d=null}else d=null;l!==null&&kd(s,c,l,d,!1),u!==null&&f!==null&&kd(s,f,u,d,!0)}}a:{if(c=r?Ct(r):window,l=c.nodeName&&c.nodeName.toLowerCase(),l===`select`||l===`input`&&c.type===`file`)var v=mr;else if(cr(c))if(hr)v=wr;else{v=Sr;var y=xr}else l=c.nodeName,!l||l.toLowerCase()!==`input`||c.type!==`checkbox`&&c.type!==`radio`?r&&en(r.elementType)&&(v=mr):v=Cr;if(v&&=v(e,r)){lr(s,v,n,i);break a}y&&y(e,c,r),e===`focusout`&&r&&c.type===`number`&&r.memoizedProps.value!=null&&Kt(c,`number`,c.value)}switch(y=r?Ct(r):window,e){case`focusin`:(cr(y)||y.contentEditable===`true`)&&(Pr=y,Fr=r,Ir=null);break;case`focusout`:Ir=Fr=Pr=null;break;case`mousedown`:Lr=!0;break;case`contextmenu`:case`mouseup`:case`dragend`:Lr=!1,Rr(s,n,i);break;case`selectionchange`:if(Nr)break;case`keydown`:case`keyup`:Rr(s,n,i)}var b;if(Xn)b:{switch(e){case`compositionstart`:var x=`onCompositionStart`;break b;case`compositionend`:x=`onCompositionEnd`;break b;case`compositionupdate`:x=`onCompositionUpdate`;break b}x=void 0}else ir?nr(e,n)&&(x=`onCompositionEnd`):e===`keydown`&&n.keyCode===229&&(x=`onCompositionStart`);x&&($n&&n.locale!==`ko`&&(ir||x!==`onCompositionStart`?x===`onCompositionEnd`&&ir&&(b=bn()):(_n=i,vn=`value`in _n?_n.value:_n.textContent,ir=!0)),y=Dd(r,x),0<y.length&&(x=new Rn(x,e,null,n,i),s.push({event:x,listeners:y}),b?x.data=b:(b=rr(n),b!==null&&(x.data=b)))),(b=Qn?ar(e,n):or(e,n))&&(x=Dd(r,`onBeforeInput`),0<x.length&&(y=new Rn(`onBeforeInput`,`beforeinput`,null,n,i),s.push({event:y,listeners:x}),y.data=b)),hd(s,e,r,n,i)}bd(s,t)})}function Ed(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Dd(e,t){for(var n=t+`Capture`,r=[];e!==null;){var i=e,a=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||a===null||(i=pn(e,n),i!=null&&r.unshift(Ed(e,i,a)),i=pn(e,t),i!=null&&r.push(Ed(e,i,a))),e.tag===3)return r;e=e.return}return[]}function Od(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function kd(e,t,n,r,i){for(var a=t._reactName,o=[];n!==null&&n!==r;){var s=n,c=s.alternate,l=s.stateNode;if(s=s.tag,c!==null&&c===r)break;s!==5&&s!==26&&s!==27||l===null||(c=l,i?(l=pn(n,a),l!=null&&o.unshift(Ed(n,l,c))):i||(l=pn(n,a),l!=null&&o.push(Ed(n,l,c)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Ad=/\r\n?/g,jd=/\u0000|\uFFFD/g;function Q(e){return(typeof e==`string`?e:``+e).replace(Ad,`
`).replace(jd,``)}function Md(e,t){return t=Q(t),Q(e)===t}function Nd(e,t,n,r,a,o){switch(n){case`children`:typeof r==`string`?t===`body`||t===`textarea`&&r===``||Xt(e,r):(typeof r==`number`||typeof r==`bigint`)&&t!==`body`&&Xt(e,``+r);break;case`className`:Ft(e,`class`,r);break;case`tabIndex`:Ft(e,`tabindex`,r);break;case`dir`:case`role`:case`viewBox`:case`width`:case`height`:Ft(e,n,r);break;case`style`:$t(e,r,o);break;case`data`:if(t!==`object`){Ft(e,`data`,r);break}case`src`:case`href`:if(r===``&&(t!==`a`||n!==`href`)){e.removeAttribute(n);break}if(r==null||typeof r==`function`||typeof r==`symbol`||typeof r==`boolean`){e.removeAttribute(n);break}r=rn(``+r),e.setAttribute(n,r);break;case`action`:case`formAction`:if(typeof r==`function`){e.setAttribute(n,`javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')`);break}else typeof o==`function`&&(n===`formAction`?(t!==`input`&&Nd(e,t,`name`,a.name,a,null),Nd(e,t,`formEncType`,a.formEncType,a,null),Nd(e,t,`formMethod`,a.formMethod,a,null),Nd(e,t,`formTarget`,a.formTarget,a,null)):(Nd(e,t,`encType`,a.encType,a,null),Nd(e,t,`method`,a.method,a,null),Nd(e,t,`target`,a.target,a,null)));if(r==null||typeof r==`symbol`||typeof r==`boolean`){e.removeAttribute(n);break}r=rn(``+r),e.setAttribute(n,r);break;case`onClick`:r!=null&&(e.onclick=an);break;case`onScroll`:r!=null&&Z(`scroll`,e);break;case`onScrollEnd`:r!=null&&Z(`scrollend`,e);break;case`dangerouslySetInnerHTML`:if(r!=null){if(typeof r!=`object`||!(`__html`in r))throw Error(i(61));if(n=r.__html,n!=null){if(a.children!=null)throw Error(i(60));e.innerHTML=n}}break;case`multiple`:e.multiple=r&&typeof r!=`function`&&typeof r!=`symbol`;break;case`muted`:e.muted=r&&typeof r!=`function`&&typeof r!=`symbol`;break;case`suppressContentEditableWarning`:case`suppressHydrationWarning`:case`defaultValue`:case`defaultChecked`:case`innerHTML`:case`ref`:break;case`autoFocus`:break;case`xlinkHref`:if(r==null||typeof r==`function`||typeof r==`boolean`||typeof r==`symbol`){e.removeAttribute(`xlink:href`);break}n=rn(``+r),e.setAttributeNS(`http://www.w3.org/1999/xlink`,`xlink:href`,n);break;case`contentEditable`:case`spellCheck`:case`draggable`:case`value`:case`autoReverse`:case`externalResourcesRequired`:case`focusable`:case`preserveAlpha`:r!=null&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,``+r):e.removeAttribute(n);break;case`inert`:case`allowFullScreen`:case`async`:case`autoPlay`:case`controls`:case`default`:case`defer`:case`disabled`:case`disablePictureInPicture`:case`disableRemotePlayback`:case`formNoValidate`:case`hidden`:case`loop`:case`noModule`:case`noValidate`:case`open`:case`playsInline`:case`readOnly`:case`required`:case`reversed`:case`scoped`:case`seamless`:case`itemScope`:r&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,``):e.removeAttribute(n);break;case`capture`:case`download`:!0===r?e.setAttribute(n,``):!1!==r&&r!=null&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,r):e.removeAttribute(n);break;case`cols`:case`rows`:case`size`:case`span`:r!=null&&typeof r!=`function`&&typeof r!=`symbol`&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case`rowSpan`:case`start`:r==null||typeof r==`function`||typeof r==`symbol`||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case`popover`:Z(`beforetoggle`,e),Z(`toggle`,e),Pt(e,`popover`,r);break;case`xlinkActuate`:It(e,`http://www.w3.org/1999/xlink`,`xlink:actuate`,r);break;case`xlinkArcrole`:It(e,`http://www.w3.org/1999/xlink`,`xlink:arcrole`,r);break;case`xlinkRole`:It(e,`http://www.w3.org/1999/xlink`,`xlink:role`,r);break;case`xlinkShow`:It(e,`http://www.w3.org/1999/xlink`,`xlink:show`,r);break;case`xlinkTitle`:It(e,`http://www.w3.org/1999/xlink`,`xlink:title`,r);break;case`xlinkType`:It(e,`http://www.w3.org/1999/xlink`,`xlink:type`,r);break;case`xmlBase`:It(e,`http://www.w3.org/XML/1998/namespace`,`xml:base`,r);break;case`xmlLang`:It(e,`http://www.w3.org/XML/1998/namespace`,`xml:lang`,r);break;case`xmlSpace`:It(e,`http://www.w3.org/XML/1998/namespace`,`xml:space`,r);break;case`is`:Pt(e,`is`,r);break;case`innerText`:case`textContent`:break;default:(!(2<n.length)||n[0]!==`o`&&n[0]!==`O`||n[1]!==`n`&&n[1]!==`N`)&&(n=tn.get(n)||n,Pt(e,n,r))}}function Pd(e,t,n,r,a,o){switch(n){case`style`:$t(e,r,o);break;case`dangerouslySetInnerHTML`:if(r!=null){if(typeof r!=`object`||!(`__html`in r))throw Error(i(61));if(n=r.__html,n!=null){if(a.children!=null)throw Error(i(60));e.innerHTML=n}}break;case`children`:typeof r==`string`?Xt(e,r):(typeof r==`number`||typeof r==`bigint`)&&Xt(e,``+r);break;case`onScroll`:r!=null&&Z(`scroll`,e);break;case`onScrollEnd`:r!=null&&Z(`scrollend`,e);break;case`onClick`:r!=null&&(e.onclick=an);break;case`suppressContentEditableWarning`:case`suppressHydrationWarning`:case`innerHTML`:case`ref`:break;case`innerText`:case`textContent`:break;default:if(!Dt.hasOwnProperty(n))a:{if(n[0]===`o`&&n[1]===`n`&&(a=n.endsWith(`Capture`),t=n.slice(2,a?n.length-7:void 0),o=e[pt]||null,o=o==null?null:o[n],typeof o==`function`&&e.removeEventListener(t,o,a),typeof r==`function`)){typeof o!=`function`&&o!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,a);break a}n in e?e[n]=r:!0===r?e.setAttribute(n,``):Pt(e,n,r)}}}function Fd(e,t,n){switch(t){case`div`:case`span`:case`svg`:case`path`:case`a`:case`g`:case`p`:case`li`:break;case`img`:Z(`error`,e),Z(`load`,e);var r=!1,a=!1,o;for(o in n)if(n.hasOwnProperty(o)){var s=n[o];if(s!=null)switch(o){case`src`:r=!0;break;case`srcSet`:a=!0;break;case`children`:case`dangerouslySetInnerHTML`:throw Error(i(137,t));default:Nd(e,t,o,s,n,null)}}a&&Nd(e,t,`srcSet`,n.srcSet,n,null),r&&Nd(e,t,`src`,n.src,n,null);return;case`input`:Z(`invalid`,e);var c=o=s=a=null,l=null,u=null;for(r in n)if(n.hasOwnProperty(r)){var d=n[r];if(d!=null)switch(r){case`name`:a=d;break;case`type`:s=d;break;case`checked`:l=d;break;case`defaultChecked`:u=d;break;case`value`:o=d;break;case`defaultValue`:c=d;break;case`children`:case`dangerouslySetInnerHTML`:if(d!=null)throw Error(i(137,t));break;default:Nd(e,t,r,d,n,null)}}Gt(e,o,c,l,u,s,a,!1);return;case`select`:for(a in Z(`invalid`,e),r=s=o=null,n)if(n.hasOwnProperty(a)&&(c=n[a],c!=null))switch(a){case`value`:o=c;break;case`defaultValue`:s=c;break;case`multiple`:r=c;default:Nd(e,t,a,c,n,null)}t=o,n=s,e.multiple=!!r,t==null?n!=null&&qt(e,!!r,n,!0):qt(e,!!r,t,!1);return;case`textarea`:for(s in Z(`invalid`,e),o=a=r=null,n)if(n.hasOwnProperty(s)&&(c=n[s],c!=null))switch(s){case`value`:r=c;break;case`defaultValue`:a=c;break;case`children`:o=c;break;case`dangerouslySetInnerHTML`:if(c!=null)throw Error(i(91));break;default:Nd(e,t,s,c,n,null)}Yt(e,r,a,o);return;case`option`:for(l in n)if(n.hasOwnProperty(l)&&(r=n[l],r!=null))switch(l){case`selected`:e.selected=r&&typeof r!=`function`&&typeof r!=`symbol`;break;default:Nd(e,t,l,r,n,null)}return;case`dialog`:Z(`beforetoggle`,e),Z(`toggle`,e),Z(`cancel`,e),Z(`close`,e);break;case`iframe`:case`object`:Z(`load`,e);break;case`video`:case`audio`:for(r=0;r<vd.length;r++)Z(vd[r],e);break;case`image`:Z(`error`,e),Z(`load`,e);break;case`details`:Z(`toggle`,e);break;case`embed`:case`source`:case`link`:Z(`error`,e),Z(`load`,e);case`area`:case`base`:case`br`:case`col`:case`hr`:case`keygen`:case`meta`:case`param`:case`track`:case`wbr`:case`menuitem`:for(u in n)if(n.hasOwnProperty(u)&&(r=n[u],r!=null))switch(u){case`children`:case`dangerouslySetInnerHTML`:throw Error(i(137,t));default:Nd(e,t,u,r,n,null)}return;default:if(en(t)){for(d in n)n.hasOwnProperty(d)&&(r=n[d],r!==void 0&&Pd(e,t,d,r,n,void 0));return}}for(c in n)n.hasOwnProperty(c)&&(r=n[c],r!=null&&Nd(e,t,c,r,n,null))}function Id(e,t,n,r){switch(t){case`div`:case`span`:case`svg`:case`path`:case`a`:case`g`:case`p`:case`li`:break;case`input`:var a=null,o=null,s=null,c=null,l=null,u=null,d=null;for(m in n){var f=n[m];if(n.hasOwnProperty(m)&&f!=null)switch(m){case`checked`:break;case`value`:break;case`defaultValue`:l=f;default:r.hasOwnProperty(m)||Nd(e,t,m,null,r,f)}}for(var p in r){var m=r[p];if(f=n[p],r.hasOwnProperty(p)&&(m!=null||f!=null))switch(p){case`type`:o=m;break;case`name`:a=m;break;case`checked`:u=m;break;case`defaultChecked`:d=m;break;case`value`:s=m;break;case`defaultValue`:c=m;break;case`children`:case`dangerouslySetInnerHTML`:if(m!=null)throw Error(i(137,t));break;default:m!==f&&Nd(e,t,p,m,r,f)}}Wt(e,s,c,l,u,d,o,a);return;case`select`:for(o in m=s=c=p=null,n)if(l=n[o],n.hasOwnProperty(o)&&l!=null)switch(o){case`value`:break;case`multiple`:m=l;default:r.hasOwnProperty(o)||Nd(e,t,o,null,r,l)}for(a in r)if(o=r[a],l=n[a],r.hasOwnProperty(a)&&(o!=null||l!=null))switch(a){case`value`:p=o;break;case`defaultValue`:c=o;break;case`multiple`:s=o;default:o!==l&&Nd(e,t,a,o,r,l)}t=c,n=s,r=m,p==null?!!r!=!!n&&(t==null?qt(e,!!n,n?[]:``,!1):qt(e,!!n,t,!0)):qt(e,!!n,p,!1);return;case`textarea`:for(c in m=p=null,n)if(a=n[c],n.hasOwnProperty(c)&&a!=null&&!r.hasOwnProperty(c))switch(c){case`value`:break;case`children`:break;default:Nd(e,t,c,null,r,a)}for(s in r)if(a=r[s],o=n[s],r.hasOwnProperty(s)&&(a!=null||o!=null))switch(s){case`value`:p=a;break;case`defaultValue`:m=a;break;case`children`:break;case`dangerouslySetInnerHTML`:if(a!=null)throw Error(i(91));break;default:a!==o&&Nd(e,t,s,a,r,o)}Jt(e,p,m);return;case`option`:for(var h in n)if(p=n[h],n.hasOwnProperty(h)&&p!=null&&!r.hasOwnProperty(h))switch(h){case`selected`:e.selected=!1;break;default:Nd(e,t,h,null,r,p)}for(l in r)if(p=r[l],m=n[l],r.hasOwnProperty(l)&&p!==m&&(p!=null||m!=null))switch(l){case`selected`:e.selected=p&&typeof p!=`function`&&typeof p!=`symbol`;break;default:Nd(e,t,l,p,r,m)}return;case`img`:case`link`:case`area`:case`base`:case`br`:case`col`:case`embed`:case`hr`:case`keygen`:case`meta`:case`param`:case`source`:case`track`:case`wbr`:case`menuitem`:for(var g in n)p=n[g],n.hasOwnProperty(g)&&p!=null&&!r.hasOwnProperty(g)&&Nd(e,t,g,null,r,p);for(u in r)if(p=r[u],m=n[u],r.hasOwnProperty(u)&&p!==m&&(p!=null||m!=null))switch(u){case`children`:case`dangerouslySetInnerHTML`:if(p!=null)throw Error(i(137,t));break;default:Nd(e,t,u,p,r,m)}return;default:if(en(t)){for(var _ in n)p=n[_],n.hasOwnProperty(_)&&p!==void 0&&!r.hasOwnProperty(_)&&Pd(e,t,_,void 0,r,p);for(d in r)p=r[d],m=n[d],!r.hasOwnProperty(d)||p===m||p===void 0&&m===void 0||Pd(e,t,d,p,r,m);return}}for(var v in n)p=n[v],n.hasOwnProperty(v)&&p!=null&&!r.hasOwnProperty(v)&&Nd(e,t,v,null,r,p);for(f in r)p=r[f],m=n[f],!r.hasOwnProperty(f)||p===m||p==null&&m==null||Nd(e,t,f,p,r,m)}function Ld(e){switch(e){case`css`:case`script`:case`font`:case`img`:case`image`:case`input`:case`link`:return!0;default:return!1}}function Rd(){if(typeof performance.getEntriesByType==`function`){for(var e=0,t=0,n=performance.getEntriesByType(`resource`),r=0;r<n.length;r++){var i=n[r],a=i.transferSize,o=i.initiatorType,s=i.duration;if(a&&s&&Ld(o)){for(o=0,s=i.responseEnd,r+=1;r<n.length;r++){var c=n[r],l=c.startTime;if(l>s)break;var u=c.transferSize,d=c.initiatorType;u&&Ld(d)&&(c=c.responseEnd,o+=u*(c<s?1:(s-l)/(c-l)))}if(--r,t+=8*(a+o)/(i.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e==`number`)?e:5}var zd=null,Bd=null;function Vd(e){return e.nodeType===9?e:e.ownerDocument}function Hd(e){switch(e){case`http://www.w3.org/2000/svg`:return 1;case`http://www.w3.org/1998/Math/MathML`:return 2;default:return 0}}function Ud(e,t){if(e===0)switch(t){case`svg`:return 1;case`math`:return 2;default:return 0}return e===1&&t===`foreignObject`?0:e}function Wd(e,t){return e===`textarea`||e===`noscript`||typeof t.children==`string`||typeof t.children==`number`||typeof t.children==`bigint`||typeof t.dangerouslySetInnerHTML==`object`&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Gd=null;function Kd(){var e=window.event;return e&&e.type===`popstate`?e===Gd?!1:(Gd=e,!0):(Gd=null,!1)}var qd=typeof setTimeout==`function`?setTimeout:void 0,Jd=typeof clearTimeout==`function`?clearTimeout:void 0,Yd=typeof Promise==`function`?Promise:void 0,Xd=typeof queueMicrotask==`function`?queueMicrotask:Yd===void 0?qd:function(e){return Yd.resolve(null).then(e).catch(Zd)};function Zd(e){setTimeout(function(){throw e})}function Qd(e){return e===`head`}function $d(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n===`/$`||n===`/&`){if(r===0){e.removeChild(i),Pp(t);return}r--}else if(n===`$`||n===`$?`||n===`$~`||n===`$!`||n===`&`)r++;else if(n===`html`)mf(e.ownerDocument.documentElement);else if(n===`head`){n=e.ownerDocument.head,mf(n);for(var a=n.firstChild;a;){var o=a.nextSibling,s=a.nodeName;a[yt]||s===`SCRIPT`||s===`STYLE`||s===`LINK`&&a.rel.toLowerCase()===`stylesheet`||n.removeChild(a),a=o}}else n===`body`&&mf(e.ownerDocument.body);n=i}while(n);Pp(t)}function ef(e,t){var n=e;e=0;do{var r=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display=`none`):(n.style.display=n._stashedDisplay||``,n.getAttribute(`style`)===``&&n.removeAttribute(`style`)):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=``):n.nodeValue=n._stashedText||``),r&&r.nodeType===8)if(n=r.data,n===`/$`){if(e===0)break;e--}else n!==`$`&&n!==`$?`&&n!==`$~`&&n!==`$!`||e++;n=r}while(n)}function tf(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case`HTML`:case`HEAD`:case`BODY`:tf(n),bt(n);continue;case`SCRIPT`:case`STYLE`:continue;case`LINK`:if(n.rel.toLowerCase()===`stylesheet`)continue}e.removeChild(n)}}function nf(e,t,n,r){for(;e.nodeType===1;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&(e.nodeName!==`INPUT`||e.type!==`hidden`))break}else if(r){if(!e[yt])switch(t){case`meta`:if(!e.hasAttribute(`itemprop`))break;return e;case`link`:if(a=e.getAttribute(`rel`),a===`stylesheet`&&e.hasAttribute(`data-precedence`)||a!==i.rel||e.getAttribute(`href`)!==(i.href==null||i.href===``?null:i.href)||e.getAttribute(`crossorigin`)!==(i.crossOrigin==null?null:i.crossOrigin)||e.getAttribute(`title`)!==(i.title==null?null:i.title))break;return e;case`style`:if(e.hasAttribute(`data-precedence`))break;return e;case`script`:if(a=e.getAttribute(`src`),(a!==(i.src==null?null:i.src)||e.getAttribute(`type`)!==(i.type==null?null:i.type)||e.getAttribute(`crossorigin`)!==(i.crossOrigin==null?null:i.crossOrigin))&&a&&e.hasAttribute(`async`)&&!e.hasAttribute(`itemprop`))break;return e;default:return e}}else if(t===`input`&&e.type===`hidden`){var a=i.name==null?null:``+i.name;if(i.type===`hidden`&&e.getAttribute(`name`)===a)return e}else return e;if(e=lf(e.nextSibling),e===null)break}return null}function rf(e,t,n){if(t===``)return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!==`INPUT`||e.type!==`hidden`)&&!n||(e=lf(e.nextSibling),e===null))return null;return e}function af(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!==`INPUT`||e.type!==`hidden`)&&!t||(e=lf(e.nextSibling),e===null))return null;return e}function of(e){return e.data===`$?`||e.data===`$~`}function sf(e){return e.data===`$!`||e.data===`$?`&&e.ownerDocument.readyState!==`loading`}function cf(e,t){var n=e.ownerDocument;if(e.data===`$~`)e._reactRetry=t;else if(e.data!==`$?`||n.readyState!==`loading`)t();else{var r=function(){t(),n.removeEventListener(`DOMContentLoaded`,r)};n.addEventListener(`DOMContentLoaded`,r),e._reactRetry=r}}function lf(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t===`$`||t===`$!`||t===`$?`||t===`$~`||t===`&`||t===`F!`||t===`F`)break;if(t===`/$`||t===`/&`)return null}}return e}var uf=null;function df(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n===`/$`||n===`/&`){if(t===0)return lf(e.nextSibling);t--}else n!==`$`&&n!==`$!`&&n!==`$?`&&n!==`$~`&&n!==`&`||t++}e=e.nextSibling}return null}function ff(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n===`$`||n===`$!`||n===`$?`||n===`$~`||n===`&`){if(t===0)return e;t--}else n!==`/$`&&n!==`/&`||t++}e=e.previousSibling}return null}function pf(e,t,n){switch(t=Vd(n),e){case`html`:if(e=t.documentElement,!e)throw Error(i(452));return e;case`head`:if(e=t.head,!e)throw Error(i(453));return e;case`body`:if(e=t.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function mf(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);bt(e)}var hf=new Map,gf=new Set;function _f(e){return typeof e.getRootNode==`function`?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var vf=j.d;j.d={f:yf,r:bf,D:Cf,C:wf,L:Tf,m:Ef,X:Of,S:Df,M:kf};function yf(){var e=vf.f(),t=xu();return e||t}function bf(e){var t=St(e);t!==null&&t.tag===5&&t.type===`form`?Ns(t):vf.r(e)}var xf=typeof document>`u`?null:document;function Sf(e,t,n){var r=xf;if(r&&typeof t==`string`&&t){var i=Ut(t);i=`link[rel="`+e+`"][href="`+i+`"]`,typeof n==`string`&&(i+=`[crossorigin="`+n+`"]`),gf.has(i)||(gf.add(i),e={rel:e,crossOrigin:n,href:t},r.querySelector(i)===null&&(t=r.createElement(`link`),Fd(t,`link`,e),Tt(t),r.head.appendChild(t)))}}function Cf(e){vf.D(e),Sf(`dns-prefetch`,e,null)}function wf(e,t){vf.C(e,t),Sf(`preconnect`,e,t)}function Tf(e,t,n){vf.L(e,t,n);var r=xf;if(r&&e&&t){var i=`link[rel="preload"][as="`+Ut(t)+`"]`;t===`image`&&n&&n.imageSrcSet?(i+=`[imagesrcset="`+Ut(n.imageSrcSet)+`"]`,typeof n.imageSizes==`string`&&(i+=`[imagesizes="`+Ut(n.imageSizes)+`"]`)):i+=`[href="`+Ut(e)+`"]`;var a=i;switch(t){case`style`:a=jf(e);break;case`script`:a=Ff(e)}hf.has(a)||(e=h({rel:`preload`,href:t===`image`&&n&&n.imageSrcSet?void 0:e,as:t},n),hf.set(a,e),r.querySelector(i)!==null||t===`style`&&r.querySelector(Mf(a))||t===`script`&&r.querySelector(If(a))||(t=r.createElement(`link`),Fd(t,`link`,e),Tt(t),r.head.appendChild(t)))}}function Ef(e,t){vf.m(e,t);var n=xf;if(n&&e){var r=t&&typeof t.as==`string`?t.as:`script`,i=`link[rel="modulepreload"][as="`+Ut(r)+`"][href="`+Ut(e)+`"]`,a=i;switch(r){case`audioworklet`:case`paintworklet`:case`serviceworker`:case`sharedworker`:case`worker`:case`script`:a=Ff(e)}if(!hf.has(a)&&(e=h({rel:`modulepreload`,href:e},t),hf.set(a,e),n.querySelector(i)===null)){switch(r){case`audioworklet`:case`paintworklet`:case`serviceworker`:case`sharedworker`:case`worker`:case`script`:if(n.querySelector(If(a)))return}r=n.createElement(`link`),Fd(r,`link`,e),Tt(r),n.head.appendChild(r)}}}function Df(e,t,n){vf.S(e,t,n);var r=xf;if(r&&e){var i=wt(r).hoistableStyles,a=jf(e);t||=`default`;var o=i.get(a);if(!o){var s={loading:0,preload:null};if(o=r.querySelector(Mf(a)))s.loading=5;else{e=h({rel:`stylesheet`,href:e,"data-precedence":t},n),(n=hf.get(a))&&zf(e,n);var c=o=r.createElement(`link`);Tt(c),Fd(c,`link`,e),c._p=new Promise(function(e,t){c.onload=e,c.onerror=t}),c.addEventListener(`load`,function(){s.loading|=1}),c.addEventListener(`error`,function(){s.loading|=2}),s.loading|=4,Rf(o,t,r)}o={type:`stylesheet`,instance:o,count:1,state:s},i.set(a,o)}}}function Of(e,t){vf.X(e,t);var n=xf;if(n&&e){var r=wt(n).hoistableScripts,i=Ff(e),a=r.get(i);a||(a=n.querySelector(If(i)),a||(e=h({src:e,async:!0},t),(t=hf.get(i))&&Bf(e,t),a=n.createElement(`script`),Tt(a),Fd(a,`link`,e),n.head.appendChild(a)),a={type:`script`,instance:a,count:1,state:null},r.set(i,a))}}function kf(e,t){vf.M(e,t);var n=xf;if(n&&e){var r=wt(n).hoistableScripts,i=Ff(e),a=r.get(i);a||(a=n.querySelector(If(i)),a||(e=h({src:e,async:!0,type:`module`},t),(t=hf.get(i))&&Bf(e,t),a=n.createElement(`script`),Tt(a),Fd(a,`link`,e),n.head.appendChild(a)),a={type:`script`,instance:a,count:1,state:null},r.set(i,a))}}function Af(e,t,n,r){var a=(a=me.current)?_f(a):null;if(!a)throw Error(i(446));switch(e){case`meta`:case`title`:return null;case`style`:return typeof n.precedence==`string`&&typeof n.href==`string`?(t=jf(n.href),n=wt(a).hoistableStyles,r=n.get(t),r||(r={type:`style`,instance:null,count:0,state:null},n.set(t,r)),r):{type:`void`,instance:null,count:0,state:null};case`link`:if(n.rel===`stylesheet`&&typeof n.href==`string`&&typeof n.precedence==`string`){e=jf(n.href);var o=wt(a).hoistableStyles,s=o.get(e);if(s||(a=a.ownerDocument||a,s={type:`stylesheet`,instance:null,count:0,state:{loading:0,preload:null}},o.set(e,s),(o=a.querySelector(Mf(e)))&&!o._p&&(s.instance=o,s.state.loading=5),hf.has(e)||(n={rel:`preload`,as:`style`,href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},hf.set(e,n),o||Pf(a,e,n,s.state))),t&&r===null)throw Error(i(528,``));return s}if(t&&r!==null)throw Error(i(529,``));return null;case`script`:return t=n.async,n=n.src,typeof n==`string`&&t&&typeof t!=`function`&&typeof t!=`symbol`?(t=Ff(n),n=wt(a).hoistableScripts,r=n.get(t),r||(r={type:`script`,instance:null,count:0,state:null},n.set(t,r)),r):{type:`void`,instance:null,count:0,state:null};default:throw Error(i(444,e))}}function jf(e){return`href="`+Ut(e)+`"`}function Mf(e){return`link[rel="stylesheet"][`+e+`]`}function Nf(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Pf(e,t,n,r){e.querySelector(`link[rel="preload"][as="style"][`+t+`]`)?r.loading=1:(t=e.createElement(`link`),r.preload=t,t.addEventListener(`load`,function(){return r.loading|=1}),t.addEventListener(`error`,function(){return r.loading|=2}),Fd(t,`link`,n),Tt(t),e.head.appendChild(t))}function Ff(e){return`[src="`+Ut(e)+`"]`}function If(e){return`script[async]`+e}function Lf(e,t,n){if(t.count++,t.instance===null)switch(t.type){case`style`:var r=e.querySelector(`style[data-href~="`+Ut(n.href)+`"]`);if(r)return t.instance=r,Tt(r),r;var a=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement(`style`),Tt(r),Fd(r,`style`,a),Rf(r,n.precedence,e),t.instance=r;case`stylesheet`:a=jf(n.href);var o=e.querySelector(Mf(a));if(o)return t.state.loading|=4,t.instance=o,Tt(o),o;r=Nf(n),(a=hf.get(a))&&zf(r,a),o=(e.ownerDocument||e).createElement(`link`),Tt(o);var s=o;return s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),Fd(o,`link`,r),t.state.loading|=4,Rf(o,n.precedence,e),t.instance=o;case`script`:return o=Ff(n.src),(a=e.querySelector(If(o)))?(t.instance=a,Tt(a),a):(r=n,(a=hf.get(o))&&(r=h({},n),Bf(r,a)),e=e.ownerDocument||e,a=e.createElement(`script`),Tt(a),Fd(a,`link`,r),e.head.appendChild(a),t.instance=a);case`void`:return null;default:throw Error(i(443,t.type))}else t.type===`stylesheet`&&!(t.state.loading&4)&&(r=t.instance,t.state.loading|=4,Rf(r,n.precedence,e));return t.instance}function Rf(e,t,n){for(var r=n.querySelectorAll(`link[rel="stylesheet"][data-precedence],style[data-precedence]`),i=r.length?r[r.length-1]:null,a=i,o=0;o<r.length;o++){var s=r[o];if(s.dataset.precedence===t)a=s;else if(a!==i)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function zf(e,t){e.crossOrigin??=t.crossOrigin,e.referrerPolicy??=t.referrerPolicy,e.title??=t.title}function Bf(e,t){e.crossOrigin??=t.crossOrigin,e.referrerPolicy??=t.referrerPolicy,e.integrity??=t.integrity}var Vf=null;function Hf(e,t,n){if(Vf===null){var r=new Map,i=Vf=new Map;i.set(n,r)}else i=Vf,r=i.get(n),r||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var a=n[i];if(!(a[yt]||a[ft]||e===`link`&&a.getAttribute(`rel`)===`stylesheet`)&&a.namespaceURI!==`http://www.w3.org/2000/svg`){var o=a.getAttribute(t)||``;o=e+o;var s=r.get(o);s?s.push(a):r.set(o,[a])}}return r}function Uf(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t===`title`?e.querySelector(`head > title`):null)}function Wf(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case`meta`:case`title`:return!0;case`style`:if(typeof t.precedence!=`string`||typeof t.href!=`string`||t.href===``)break;return!0;case`link`:if(typeof t.rel!=`string`||typeof t.href!=`string`||t.href===``||t.onLoad||t.onError)break;switch(t.rel){case`stylesheet`:return e=t.disabled,typeof t.precedence==`string`&&e==null;default:return!0}case`script`:if(t.async&&typeof t.async!=`function`&&typeof t.async!=`symbol`&&!t.onLoad&&!t.onError&&t.src&&typeof t.src==`string`)return!0}return!1}function Gf(e){return!(e.type===`stylesheet`&&!(e.state.loading&3))}function Kf(e,t,n,r){if(n.type===`stylesheet`&&(typeof r.media!=`string`||!1!==matchMedia(r.media).matches)&&!(n.state.loading&4)){if(n.instance===null){var i=jf(r.href),a=t.querySelector(Mf(i));if(a){t=a._p,typeof t==`object`&&t&&typeof t.then==`function`&&(e.count++,e=Yf.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=a,Tt(a);return}a=t.ownerDocument||t,r=Nf(r),(i=hf.get(i))&&zf(r,i),a=a.createElement(`link`),Tt(a);var o=a;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),Fd(a,`link`,r),n.instance=a}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(n.state.loading&3)&&(e.count++,n=Yf.bind(e),t.addEventListener(`load`,n),t.addEventListener(`error`,n))}}var qf=0;function Jf(e,t){return e.stylesheets&&e.count===0&&Zf(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&Zf(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&qf===0&&(qf=62500*Rd());var i=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Zf(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>qf?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(i)}}:null}function Yf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Zf(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Xf=null;function Zf(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Xf=new Map,t.forEach(Qf,e),Xf=null,Yf.call(e))}function Qf(e,t){if(!(t.state.loading&4)){var n=Xf.get(e);if(n)var r=n.get(null);else{n=new Map,Xf.set(e,n);for(var i=e.querySelectorAll(`link[data-precedence],style[data-precedence]`),a=0;a<i.length;a++){var o=i[a];(o.nodeName===`LINK`||o.getAttribute(`media`)!==`not all`)&&(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}i=t.instance,o=i.getAttribute(`data-precedence`),a=n.get(o)||r,a===r&&n.set(null,i),n.set(o,i),this.count++,r=Yf.bind(this),i.addEventListener(`load`,r),i.addEventListener(`error`,r),a?a.parentNode.insertBefore(i,a.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(i,e.firstChild)),t.state.loading|=4}}var $f={$$typeof:C,Provider:null,Consumer:null,_currentValue:oe,_currentValue2:oe,_threadCount:0};function ep(e,t,n,r,i,a,o,s,c){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=tt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tt(0),this.hiddenUpdates=tt(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=a,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function tp(e,t,n,r,i,a,o,s,c,l,u,d){return e=new ep(e,t,n,o,c,l,u,d,s),t=1,!0===a&&(t|=24),a=fi(3,null,null,t),e.current=a,a.stateNode=e,t=fa(),t.refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:r,isDehydrated:n,cache:t},Ga(a),e}function np(e){return e?(e=ui,e):ui}function rp(e,t,n,r,i,a){i=np(i),r.context===null?r.context=i:r.pendingContext=i,r=qa(t),r.payload={element:n},a=a===void 0?null:a,a!==null&&(r.callback=a),n=Ja(e,r,t),n!==null&&(gu(n,e,t),Ya(n,e,t))}function ip(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ap(e,t){ip(e,t),(e=e.alternate)&&ip(e,t)}function op(e){if(e.tag===13||e.tag===31){var t=si(e,67108864);t!==null&&gu(t,e,67108864),ap(e,67108864)}}function sp(e){if(e.tag===13||e.tag===31){var t=mu();t=st(t);var n=si(e,t);n!==null&&gu(n,e,t),ap(e,t)}}var cp=!0;function lp(e,t,n,r){var i=A.T;A.T=null;var a=j.p;try{j.p=2,dp(e,t,n,r)}finally{j.p=a,A.T=i}}function up(e,t,n,r){var i=A.T;A.T=null;var a=j.p;try{j.p=8,dp(e,t,n,r)}finally{j.p=a,A.T=i}}function dp(e,t,n,r){if(cp){var i=fp(r);if(i===null)Td(e,t,r,pp,n),wp(e,r);else if(Ep(i,e,t,n,r))r.stopPropagation();else if(wp(e,r),t&4&&-1<Cp.indexOf(e)){for(;i!==null;){var a=St(i);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var o=Xe(a.pendingLanes);if(o!==0){var s=a;for(s.pendingLanes|=2,s.entangledLanes|=2;o;){var c=1<<31-We(o);s.entanglements[1]|=c,o&=~c}id(a),!(Ll&6)&&(nu=Me()+500,ad(0,!1))}}break;case 31:case 13:s=si(a,2),s!==null&&gu(s,a,2),xu(),ap(a,2)}if(a=fp(r),a===null&&Td(e,t,r,pp,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else Td(e,t,r,null,n)}}function fp(e){return e=sn(e),mp(e)}var pp=null;function mp(e){if(pp=null,e=xt(e),e!==null){var t=o(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=s(t),e!==null)return e;e=null}else if(n===31){if(e=c(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return pp=e,null}function hp(e){switch(e){case`beforetoggle`:case`cancel`:case`click`:case`close`:case`contextmenu`:case`copy`:case`cut`:case`auxclick`:case`dblclick`:case`dragend`:case`dragstart`:case`drop`:case`focusin`:case`focusout`:case`input`:case`invalid`:case`keydown`:case`keypress`:case`keyup`:case`mousedown`:case`mouseup`:case`paste`:case`pause`:case`play`:case`pointercancel`:case`pointerdown`:case`pointerup`:case`ratechange`:case`reset`:case`resize`:case`seeked`:case`submit`:case`toggle`:case`touchcancel`:case`touchend`:case`touchstart`:case`volumechange`:case`change`:case`selectionchange`:case`textInput`:case`compositionstart`:case`compositionend`:case`compositionupdate`:case`beforeblur`:case`afterblur`:case`beforeinput`:case`blur`:case`fullscreenchange`:case`focus`:case`hashchange`:case`popstate`:case`select`:case`selectstart`:return 2;case`drag`:case`dragenter`:case`dragexit`:case`dragleave`:case`dragover`:case`mousemove`:case`mouseout`:case`mouseover`:case`pointermove`:case`pointerout`:case`pointerover`:case`scroll`:case`touchmove`:case`wheel`:case`mouseenter`:case`mouseleave`:case`pointerenter`:case`pointerleave`:return 8;case`message`:switch(Ne()){case Pe:return 2;case Fe:return 8;case Ie:case Le:return 32;case Re:return 268435456;default:return 32}default:return 32}}var gp=!1,_p=null,vp=null,yp=null,bp=new Map,xp=new Map,Sp=[],Cp=`mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset`.split(` `);function wp(e,t){switch(e){case`focusin`:case`focusout`:_p=null;break;case`dragenter`:case`dragleave`:vp=null;break;case`mouseover`:case`mouseout`:yp=null;break;case`pointerover`:case`pointerout`:bp.delete(t.pointerId);break;case`gotpointercapture`:case`lostpointercapture`:xp.delete(t.pointerId)}}function Tp(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=St(t),t!==null&&op(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Ep(e,t,n,r,i){switch(t){case`focusin`:return _p=Tp(_p,e,t,n,r,i),!0;case`dragenter`:return vp=Tp(vp,e,t,n,r,i),!0;case`mouseover`:return yp=Tp(yp,e,t,n,r,i),!0;case`pointerover`:var a=i.pointerId;return bp.set(a,Tp(bp.get(a)||null,e,t,n,r,i)),!0;case`gotpointercapture`:return a=i.pointerId,xp.set(a,Tp(xp.get(a)||null,e,t,n,r,i)),!0}return!1}function Dp(e){var t=xt(e.target);if(t!==null){var n=o(t);if(n!==null){if(t=n.tag,t===13){if(t=s(n),t!==null){e.blockedOn=t,ut(e.priority,function(){sp(n)});return}}else if(t===31){if(t=c(n),t!==null){e.blockedOn=t,ut(e.priority,function(){sp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Op(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=fp(e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);on=r,n.target.dispatchEvent(r),on=null}else return t=St(n),t!==null&&op(t),e.blockedOn=n,!1;t.shift()}return!0}function kp(e,t,n){Op(e)&&n.delete(t)}function Ap(){gp=!1,_p!==null&&Op(_p)&&(_p=null),vp!==null&&Op(vp)&&(vp=null),yp!==null&&Op(yp)&&(yp=null),bp.forEach(kp),xp.forEach(kp)}function jp(e,n){e.blockedOn===n&&(e.blockedOn=null,gp||(gp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Ap)))}var Mp=null;function Np(e){Mp!==e&&(Mp=e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Mp===e&&(Mp=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if(typeof r!=`function`){if(mp(r||n)===null)continue;break}var a=St(n);a!==null&&(e.splice(t,3),t-=3,js(a,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Pp(e){function t(t){return jp(t,e)}_p!==null&&jp(_p,e),vp!==null&&jp(vp,e),yp!==null&&jp(yp,e),bp.forEach(t),xp.forEach(t);for(var n=0;n<Sp.length;n++){var r=Sp[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Sp.length&&(n=Sp[0],n.blockedOn===null);)Dp(n),n.blockedOn===null&&Sp.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(r=0;r<n.length;r+=3){var i=n[r],a=n[r+1],o=i[pt]||null;if(typeof a==`function`)o||Np(n);else if(o){var s=null;if(a&&a.hasAttribute(`formAction`)){if(i=a,o=a[pt]||null)s=o.formAction;else if(mp(i)!==null)continue}else s=o.action;typeof s==`function`?n[r+1]=s:(n.splice(r,3),r-=3),Np(n)}}}function Fp(){function e(e){e.canIntercept&&e.info===`react-transition`&&e.intercept({handler:function(){return new Promise(function(e){return i=e})},focusReset:`manual`,scroll:`manual`})}function t(){i!==null&&(i(),i=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&e.url!=null&&navigation.navigate(e.url,{state:e.getState(),info:`react-transition`,history:`replace`})}}if(typeof navigation==`object`){var r=!1,i=null;return navigation.addEventListener(`navigate`,e),navigation.addEventListener(`navigatesuccess`,t),navigation.addEventListener(`navigateerror`,t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener(`navigate`,e),navigation.removeEventListener(`navigatesuccess`,t),navigation.removeEventListener(`navigateerror`,t),i!==null&&(i(),i=null)}}}function Ip(e){this._internalRoot=e}Lp.prototype.render=Ip.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));var n=t.current;rp(n,mu(),e,t,null,null)},Lp.prototype.unmount=Ip.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;rp(e.current,2,null,e,null,null),xu(),t[mt]=null}};function Lp(e){this._internalRoot=e}Lp.prototype.unstable_scheduleHydration=function(e){if(e){var t=lt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Sp.length&&t!==0&&t<Sp[n].priority;n++);Sp.splice(n,0,e),n===0&&Dp(e)}};var Rp=n.version;if(Rp!==`19.2.4`)throw Error(i(527,Rp,`19.2.4`));j.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render==`function`?Error(i(188)):(e=Object.keys(e).join(`,`),Error(i(268,e)));return e=d(t),e=e===null?null:p(e),e=e===null?null:e.stateNode,e};var zp={bundleType:0,version:`19.2.4`,rendererPackageName:`react-dom`,currentDispatcherRef:A,reconcilerVersion:`19.2.4`};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<`u`){var Bp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bp.isDisabled&&Bp.supportsFiber)try{Ve=Bp.inject(zp),He=Bp}catch{}}e.createRoot=function(e,t){if(!a(e))throw Error(i(299));var n=!1,r=``,o=B,s=V,c=Zs;return t!=null&&(!0===t.unstable_strictMode&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=tp(e,1,!1,null,null,n,r,null,o,s,c,Fp),e[mt]=t.current,Cd(e),new Ip(t)}})),g=o(((e,t)=>{function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>`u`||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=`function`))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}n(),t.exports=h()}))(),_=c(u(),1),v=()=>void 0,y=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)==55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)==56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},b=function(e){let t=[],n=0,r=0;for(;n<e.length;){let i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){let a=e[n++];t[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){let a=e[n++],o=e[n++],s=e[n++],c=((i&7)<<18|(a&63)<<12|(o&63)<<6|s&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{let a=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return t.join(``)},x={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789`,get ENCODED_VALS(){return this.ENCODED_VALS_BASE+`+/=`},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+`-_.`},HAS_NATIVE_SUPPORT:typeof atob==`function`,encodeByteArray(e,t){if(!Array.isArray(e))throw Error(`encodeByteArray takes an array as a parameter`);this.init_();let n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){let i=e[t],a=t+1<e.length,o=a?e[t+1]:0,s=t+2<e.length,c=s?e[t+2]:0,l=i>>2,u=(i&3)<<4|o>>4,d=(o&15)<<2|c>>6,f=c&63;s||(f=64,a||(d=64)),r.push(n[l],n[u],n[d],n[f])}return r.join(``)},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(y(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):b(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){let i=n[e.charAt(t++)],a=t<e.length?n[e.charAt(t)]:0;++t;let o=t<e.length?n[e.charAt(t)]:64;++t;let s=t<e.length?n[e.charAt(t)]:64;if(++t,i==null||a==null||o==null||s==null)throw new S;let c=i<<2|a>>4;if(r.push(c),o!==64){let e=a<<4&240|o>>2;if(r.push(e),s!==64){let e=o<<6&192|s;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},S=class extends Error{constructor(){super(...arguments),this.name=`DecodeBase64StringError`}},C=function(e){let t=y(e);return x.encodeByteArray(t,!0)},w=function(e){return C(e).replace(/\./g,``)},T=function(e){try{return x.decodeString(e,!0)}catch(e){console.error(`base64Decode failed: `,e)}return null};function E(){if(typeof self<`u`)return self;if(typeof window<`u`)return window;if(typeof global<`u`)return global;throw Error(`Unable to locate global object.`)}var D=()=>E().__FIREBASE_DEFAULTS__,O=()=>{if(typeof process>`u`)return;let e={}.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},ee=()=>{if(typeof document>`u`)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=e&&T(e[1]);return t&&JSON.parse(t)},k=()=>{try{return v()||D()||O()||ee()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},te=e=>k()?.emulatorHosts?.[e],ne=e=>{let t=te(e);if(!t)return;let n=t.lastIndexOf(`:`);if(n<=0||n+1===t.length)throw Error(`Invalid host ${t} with no separate hostname and port!`);let r=parseInt(t.substring(n+1),10);return t[0]===`[`?[t.substring(1,n-1),r]:[t.substring(0,n),r]},re=()=>k()?.config,ie=e=>k()?.[`_${e}`],ae=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e==`function`&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}};function A(e){try{return(e.startsWith(`http://`)||e.startsWith(`https://`)?new URL(e).hostname:e).endsWith(`.cloudworkstations.dev`)}catch{return!1}}async function j(e){return(await fetch(e,{credentials:`include`})).ok}function oe(e,t){if(e.uid)throw Error(`The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.`);let n={alg:`none`,type:`JWT`},r=t||`demo-project`,i=e.iat||0,a=e.sub||e.user_id;if(!a)throw Error(`mockUserToken must contain 'sub' or 'user_id' field!`);let o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:`custom`,identities:{}},...e};return[w(JSON.stringify(n)),w(JSON.stringify(o)),``].join(`.`)}var se={};function ce(){let e={prod:[],emulator:[]};for(let t of Object.keys(se))se[t]?e.emulator.push(t):e.prod.push(t);return e}function le(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement(`div`),t.setAttribute(`id`,e),n=!0),{created:n,element:t}}var ue=!1;function de(e,t){if(typeof window>`u`||typeof document>`u`||!A(window.location.host)||se[e]===t||se[e]||ue)return;se[e]=t;function n(e){return`__firebase__banner__${e}`}let r=`__firebase__banner`,i=ce().prod.length>0;function a(){let e=document.getElementById(r);e&&e.remove()}function o(e){e.style.display=`flex`,e.style.background=`#7faaf0`,e.style.position=`fixed`,e.style.bottom=`5px`,e.style.left=`5px`,e.style.padding=`.5em`,e.style.borderRadius=`5px`,e.style.alignItems=`center`}function s(e,t){e.setAttribute(`width`,`24`),e.setAttribute(`id`,t),e.setAttribute(`height`,`24`),e.setAttribute(`viewBox`,`0 0 24 24`),e.setAttribute(`fill`,`none`),e.style.marginLeft=`-6px`}function c(){let e=document.createElement(`span`);return e.style.cursor=`pointer`,e.style.marginLeft=`16px`,e.style.fontSize=`24px`,e.innerHTML=` &times;`,e.onclick=()=>{ue=!0,a()},e}function l(e,t){e.setAttribute(`id`,t),e.innerText=`Learn more`,e.href=`https://firebase.google.com/docs/studio/preview-apps#preview-backend`,e.setAttribute(`target`,`__blank`),e.style.paddingLeft=`5px`,e.style.textDecoration=`underline`}function u(){let e=le(r),t=n(`text`),a=document.getElementById(t)||document.createElement(`span`),u=n(`learnmore`),d=document.getElementById(u)||document.createElement(`a`),f=n(`preprendIcon`),p=document.getElementById(f)||document.createElementNS(`http://www.w3.org/2000/svg`,`svg`);if(e.created){let t=e.element;o(t),l(d,u);let n=c();s(p,f),t.append(p,a,d,n),document.body.appendChild(t)}i?(a.innerText=`Preview backend disconnected.`,p.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(p.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,a.innerText=`Preview backend running in this workspace.`),a.setAttribute(`id`,t)}document.readyState===`loading`?window.addEventListener(`DOMContentLoaded`,u):u()}function fe(){return typeof navigator<`u`&&typeof navigator.userAgent==`string`?navigator.userAgent:``}function pe(){return typeof window<`u`&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fe())}function me(){let e=k()?.forceEnvironment;if(e===`node`)return!0;if(e===`browser`)return!1;try{return Object.prototype.toString.call(global.process)===`[object process]`}catch{return!1}}function he(){return typeof navigator<`u`&&navigator.userAgent===`Cloudflare-Workers`}function ge(){let e=typeof chrome==`object`?chrome.runtime:typeof browser==`object`?browser.runtime:void 0;return typeof e==`object`&&e.id!==void 0}function _e(){return typeof navigator==`object`&&navigator.product===`ReactNative`}function ve(){let e=fe();return e.indexOf(`MSIE `)>=0||e.indexOf(`Trident/`)>=0}function ye(){return!me()&&!!navigator.userAgent&&navigator.userAgent.includes(`Safari`)&&!navigator.userAgent.includes(`Chrome`)}function be(){try{return typeof indexedDB==`object`}catch{return!1}}function xe(){return new Promise((e,t)=>{try{let n=!0,r=`validate-browser-context-for-indexeddb-analytics-module`,i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{t(i.error?.message||``)}}catch(e){t(e)}})}var Se=`FirebaseError`,Ce=class e extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=Se,Object.setPrototypeOf(this,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,we.prototype.create)}},we=class{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){let n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],a=i?Te(i,n):`Error`;return new Ce(r,`${this.serviceName}: ${a} (${r}).`,n)}};function Te(e,t){return e.replace(Ee,(e,n)=>{let r=t[n];return r==null?`<${n}?>`:String(r)})}var Ee=/\{\$([^}]+)}/g;function De(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Oe(e,t){if(e===t)return!0;let n=Object.keys(e),r=Object.keys(t);for(let i of n){if(!r.includes(i))return!1;let n=e[i],a=t[i];if(ke(n)&&ke(a)){if(!Oe(n,a))return!1}else if(n!==a)return!1}for(let e of r)if(!n.includes(e))return!1;return!0}function ke(e){return typeof e==`object`&&!!e}function Ae(e){let t=[];for(let[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+`=`+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+`=`+encodeURIComponent(r));return t.length?`&`+t.join(`&`):``}function je(e){let t={};return e.replace(/^\?/,``).split(`&`).forEach(e=>{if(e){let[n,r]=e.split(`=`);t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function Me(e){let t=e.indexOf(`?`);if(!t)return``;let n=e.indexOf(`#`,t);return e.substring(t,n>0?n:void 0)}function Ne(e,t){let n=new Pe(e,t);return n.subscribe.bind(n)}var Pe=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(e===void 0&&t===void 0&&n===void 0)throw Error(`Missing Observer.`);r=Fe(e,[`next`,`error`,`complete`])?e:{next:e,error:t,complete:n},r.next===void 0&&(r.next=Ie),r.error===void 0&&(r.error=Ie),r.complete===void 0&&(r.complete=Ie);let i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],--this.observerCount,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(e){typeof console<`u`&&console.error&&console.error(e)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Fe(e,t){if(typeof e!=`object`||!e)return!1;for(let n of t)if(n in e&&typeof e[n]==`function`)return!0;return!1}function Ie(){}function Le(e){return e&&e._delegate?e._delegate:e}var Re=class{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode=`LAZY`,this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}},ze=`[DEFAULT]`,Be=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let e=new ae;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{let n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(e){if(n)return null;throw e}else if(n)return null;else throw Error(`Service ${this.name} is not available`)}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(He(e))try{this.getOrInitializeService({instanceIdentifier:ze})}catch{}for(let[e,t]of this.instancesDeferred.entries()){let n=this.normalizeInstanceIdentifier(e);try{let e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch{}}}}clearInstance(e=ze){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>`INTERNAL`in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>`_delete`in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ze){return this.instances.has(e)}getOptions(e=ze){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(let[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(r);return r}onInit(e,t){let n=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(n)??new Set;r.add(e),this.onInitCallbacks.set(n,r);let i=this.instances.get(n);return i&&e(i,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){let n=this.onInitCallbacks.get(t);if(n)for(let r of n)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Ve(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=ze){return this.component?this.component.multipleInstances?e:ze:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!==`EXPLICIT`}};function Ve(e){return e===ze?void 0:e}function He(e){return e.instantiationMode===`EAGER`}var Ue=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Be(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}},We=[],M;(function(e){e[e.DEBUG=0]=`DEBUG`,e[e.VERBOSE=1]=`VERBOSE`,e[e.INFO=2]=`INFO`,e[e.WARN=3]=`WARN`,e[e.ERROR=4]=`ERROR`,e[e.SILENT=5]=`SILENT`})(M||={});var Ge={debug:M.DEBUG,verbose:M.VERBOSE,info:M.INFO,warn:M.WARN,error:M.ERROR,silent:M.SILENT},Ke=M.INFO,qe={[M.DEBUG]:`log`,[M.VERBOSE]:`log`,[M.INFO]:`info`,[M.WARN]:`warn`,[M.ERROR]:`error`},Je=(e,t,...n)=>{if(t<e.logLevel)return;let r=new Date().toISOString(),i=qe[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)},Ye=class{constructor(e){this.name=e,this._logLevel=Ke,this._logHandler=Je,this._userLogHandler=null,We.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in M))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e==`string`?Ge[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!=`function`)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,M.DEBUG,...e),this._logHandler(this,M.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,M.VERBOSE,...e),this._logHandler(this,M.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,M.INFO,...e),this._logHandler(this,M.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,M.WARN,...e),this._logHandler(this,M.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,M.ERROR,...e),this._logHandler(this,M.ERROR,...e)}},Xe=(e,t)=>t.some(t=>e instanceof t),Ze,Qe;function $e(){return Ze||=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]}function et(){return Qe||=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey]}var tt=new WeakMap,nt=new WeakMap,rt=new WeakMap,it=new WeakMap,at=new WeakMap;function ot(e){let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener(`success`,i),e.removeEventListener(`error`,a)},i=()=>{t(ft(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener(`success`,i),e.addEventListener(`error`,a)});return t.then(t=>{t instanceof IDBCursor&&tt.set(t,e)}).catch(()=>{}),at.set(t,e),t}function st(e){if(nt.has(e))return;let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener(`complete`,i),e.removeEventListener(`error`,a),e.removeEventListener(`abort`,a)},i=()=>{t(),r()},a=()=>{n(e.error||new DOMException(`AbortError`,`AbortError`)),r()};e.addEventListener(`complete`,i),e.addEventListener(`error`,a),e.addEventListener(`abort`,a)});nt.set(e,t)}var ct={get(e,t,n){if(e instanceof IDBTransaction){if(t===`done`)return nt.get(e);if(t===`objectStoreNames`)return e.objectStoreNames||rt.get(e);if(t===`store`)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ft(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t===`done`||t===`store`)?!0:t in e}};function lt(e){ct=e(ct)}function ut(e){return e===IDBDatabase.prototype.transaction&&!(`objectStoreNames`in IDBTransaction.prototype)?function(t,...n){let r=e.call(pt(this),t,...n);return rt.set(r,t.sort?t.sort():[t]),ft(r)}:et().includes(e)?function(...t){return e.apply(pt(this),t),ft(tt.get(this))}:function(...t){return ft(e.apply(pt(this),t))}}function dt(e){return typeof e==`function`?ut(e):(e instanceof IDBTransaction&&st(e),Xe(e,$e())?new Proxy(e,ct):e)}function ft(e){if(e instanceof IDBRequest)return ot(e);if(it.has(e))return it.get(e);let t=dt(e);return t!==e&&(it.set(e,t),at.set(t,e)),t}var pt=e=>at.get(e);function mt(e,t,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){let o=indexedDB.open(e,t),s=ft(o);return r&&o.addEventListener(`upgradeneeded`,e=>{r(ft(o.result),e.oldVersion,e.newVersion,ft(o.transaction),e)}),n&&o.addEventListener(`blocked`,e=>n(e.oldVersion,e.newVersion,e)),s.then(e=>{a&&e.addEventListener(`close`,()=>a()),i&&e.addEventListener(`versionchange`,e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}var ht=[`get`,`getKey`,`getAll`,`getAllKeys`,`count`],gt=[`put`,`add`,`delete`,`clear`],_t=new Map;function vt(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t==`string`))return;if(_t.get(t))return _t.get(t);let n=t.replace(/FromIndex$/,``),r=t!==n,i=gt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||ht.includes(n)))return;let a=async function(e,...t){let a=this.transaction(e,i?`readwrite`:`readonly`),o=a.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&a.done]))[0]};return _t.set(t,a),a}lt(e=>({...e,get:(t,n,r)=>vt(t,n)||e.get(t,n,r),has:(t,n)=>!!vt(t,n)||e.has(t,n)}));var yt=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(bt(e)){let t=e.getImmediate();return`${t.library}/${t.version}`}else return null}).filter(e=>e).join(` `)}};function bt(e){return e.getComponent()?.type===`VERSION`}var xt=`@firebase/app`,St=`0.14.8`,Ct=new Ye(`@firebase/app`),wt=`@firebase/app-compat`,Tt=`@firebase/analytics-compat`,Et=`@firebase/analytics`,Dt=`@firebase/app-check-compat`,Ot=`@firebase/app-check`,kt=`@firebase/auth`,At=`@firebase/auth-compat`,jt=`@firebase/database`,Mt=`@firebase/data-connect`,Nt=`@firebase/database-compat`,Pt=`@firebase/functions`,Ft=`@firebase/functions-compat`,It=`@firebase/installations`,N=`@firebase/installations-compat`,Lt=`@firebase/messaging`,Rt=`@firebase/messaging-compat`,zt=`@firebase/performance`,Bt=`@firebase/performance-compat`,Vt=`@firebase/remote-config`,Ht=`@firebase/remote-config-compat`,Ut=`@firebase/storage`,Wt=`@firebase/storage-compat`,Gt=`@firebase/firestore`,Kt=`@firebase/ai`,qt=`@firebase/firestore-compat`,Jt=`firebase`,Yt=`12.9.0`,Xt=`[DEFAULT]`,Zt={[xt]:`fire-core`,[wt]:`fire-core-compat`,[Et]:`fire-analytics`,[Tt]:`fire-analytics-compat`,[Ot]:`fire-app-check`,[Dt]:`fire-app-check-compat`,[kt]:`fire-auth`,[At]:`fire-auth-compat`,[jt]:`fire-rtdb`,[Mt]:`fire-data-connect`,[Nt]:`fire-rtdb-compat`,[Pt]:`fire-fn`,[Ft]:`fire-fn-compat`,[It]:`fire-iid`,[N]:`fire-iid-compat`,[Lt]:`fire-fcm`,[Rt]:`fire-fcm-compat`,[zt]:`fire-perf`,[Bt]:`fire-perf-compat`,[Vt]:`fire-rc`,[Ht]:`fire-rc-compat`,[Ut]:`fire-gcs`,[Wt]:`fire-gcs-compat`,[Gt]:`fire-fst`,[qt]:`fire-fst-compat`,[Kt]:`fire-vertex`,"fire-js":`fire-js`,[Jt]:`fire-js-all`},Qt=new Map,$t=new Map,en=new Map;function tn(e,t){try{e.container.addComponent(t)}catch(n){Ct.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function nn(e){let t=e.name;if(en.has(t))return Ct.debug(`There were multiple attempts to register component ${t}.`),!1;en.set(t,e);for(let t of Qt.values())tn(t,e);for(let t of $t.values())tn(t,e);return!0}function rn(e,t){let n=e.container.getProvider(`heartbeat`).getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function an(e){return e==null?!1:e.settings!==void 0}var on=new we(`app`,`Firebase`,{"no-app":`No Firebase App '{$appName}' has been created - call initializeApp() first`,"bad-app-name":`Illegal App name: '{$appName}'`,"duplicate-app":`Firebase App named '{$appName}' already exists with different options or config`,"app-deleted":`Firebase App named '{$appName}' already deleted`,"server-app-deleted":`Firebase Server App has been deleted`,"no-options":`Need to provide options, when not being deployed to hosting via source.`,"invalid-app-argument":`firebase.{$appName}() takes either no argument or a Firebase App instance.`,"invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":`Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.`,"idb-get":`Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.`,"idb-set":`Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.`,"idb-delete":`Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.`,"finalization-registry-not-supported":`FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.`,"invalid-server-app-environment":`FirebaseServerApp is not for use in browser environments.`}),sn=class{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Re(`app`,()=>this,`PUBLIC`))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw on.create(`app-deleted`,{appName:this._name})}},cn=Yt;function ln(e,t={}){let n=e;typeof t!=`object`&&(t={name:t});let r={name:Xt,automaticDataCollectionEnabled:!0,...t},i=r.name;if(typeof i!=`string`||!i)throw on.create(`bad-app-name`,{appName:String(i)});if(n||=re(),!n)throw on.create(`no-options`);let a=Qt.get(i);if(a){if(Oe(n,a.options)&&Oe(r,a.config))return a;throw on.create(`duplicate-app`,{appName:i})}let o=new Ue(i);for(let e of en.values())o.addComponent(e);let s=new sn(n,r,o);return Qt.set(i,s),s}function un(e=Xt){let t=Qt.get(e);if(!t&&e===`[DEFAULT]`&&re())return ln();if(!t)throw on.create(`no-app`,{appName:e});return t}function dn(){return Array.from(Qt.values())}function fn(e,t,n){let r=Zt[e]??e;n&&(r+=`-${n}`);let i=r.match(/\s|\//),a=t.match(/\s|\//);if(i||a){let e=[`Unable to register library "${r}" with version "${t}":`];i&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&e.push(`and`),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ct.warn(e.join(` `));return}nn(new Re(`${r}-version`,()=>({library:r,version:t}),`VERSION`))}var pn=`firebase-heartbeat-database`,mn=1,hn=`firebase-heartbeat-store`,gn=null;function _n(){return gn||=mt(pn,mn,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(hn)}catch(e){console.warn(e)}}}}).catch(e=>{throw on.create(`idb-open`,{originalErrorMessage:e.message})}),gn}async function vn(e){try{let t=(await _n()).transaction(hn),n=await t.objectStore(hn).get(bn(e));return await t.done,n}catch(e){if(e instanceof Ce)Ct.warn(e.message);else{let t=on.create(`idb-get`,{originalErrorMessage:e?.message});Ct.warn(t.message)}}}async function yn(e,t){try{let n=(await _n()).transaction(hn,`readwrite`);await n.objectStore(hn).put(t,bn(e)),await n.done}catch(e){if(e instanceof Ce)Ct.warn(e.message);else{let t=on.create(`idb-set`,{originalErrorMessage:e?.message});Ct.warn(t.message)}}}function bn(e){return`${e.name}!${e.options.appId}`}var xn=1024,Sn=30,Cn=class{constructor(e){this.container=e,this._heartbeatsCache=null,this._storage=new En(this.container.getProvider(`app`).getImmediate()),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{let e=this.container.getProvider(`platform-logger`).getImmediate().getPlatformInfoString(),t=wn();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===t||this._heartbeatsCache.heartbeats.some(e=>e.date===t))return;if(this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats.length>Sn){let e=On(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ct.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return``;let e=wn(),{heartbeatsToSend:t,unsentEntries:n}=Tn(this._heartbeatsCache.heartbeats),r=w(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return Ct.warn(e),``}}};function wn(){return new Date().toISOString().substring(0,10)}function Tn(e,t=xn){let n=[],r=e.slice();for(let i of e){let e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),Dn(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Dn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var En=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return be()?xe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let e=await vn(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return yn(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return yn(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}else return}};function Dn(e){return w(JSON.stringify({version:2,heartbeats:e})).length}function On(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}function kn(e){nn(new Re(`platform-logger`,e=>new yt(e),`PRIVATE`)),nn(new Re(`heartbeat`,e=>new Cn(e),`PRIVATE`)),fn(xt,St,e),fn(xt,St,`esm2020`),fn(`fire-js`,``)}kn(``);function An(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var jn=An,Mn=new we(`auth`,`Firebase`,An()),Nn=new Ye(`@firebase/auth`);function Pn(e,...t){Nn.logLevel<=M.WARN&&Nn.warn(`Auth (${cn}): ${e}`,...t)}function Fn(e,...t){Nn.logLevel<=M.ERROR&&Nn.error(`Auth (${cn}): ${e}`,...t)}function In(e,...t){throw Vn(e,...t)}function Ln(e,...t){return Vn(e,...t)}function Rn(e,t,n){return new we(`auth`,`Firebase`,{...jn(),[t]:n}).create(t,{appName:e.name})}function zn(e){return Rn(e,`operation-not-supported-in-this-environment`,`Operations that alter the current user are not supported in conjunction with FirebaseServerApp`)}function Bn(e,t,n){let r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&In(e,`argument-error`),Rn(e,`argument-error`,`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Vn(e,...t){if(typeof e!=`string`){let n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return Mn.create(e,...t)}function P(e,t,...n){if(!e)throw Vn(t,...n)}function Hn(e){let t=`INTERNAL ASSERTION FAILED: `+e;throw Fn(t),Error(t)}function Un(e,t){e||Hn(t)}function Wn(){return typeof self<`u`&&self.location?.href||``}function Gn(){return Kn()===`http:`||Kn()===`https:`}function Kn(){return typeof self<`u`&&self.location?.protocol||null}function qn(){return typeof navigator<`u`&&navigator&&`onLine`in navigator&&typeof navigator.onLine==`boolean`&&(Gn()||ge()||`connection`in navigator)?navigator.onLine:!0}function Jn(){if(typeof navigator>`u`)return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}var Yn=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Un(t>e,`Short delay should be less than long delay!`),this.isMobile=pe()||_e()}get(){return qn()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Xn(e,t){Un(e.emulator,`Emulator should always be set here`);let{url:n}=e.emulator;return t?`${n}${t.startsWith(`/`)?t.slice(1):t}`:n}var Zn=class{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<`u`&&`fetch`in self)return self.fetch;if(typeof globalThis<`u`&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<`u`)return fetch;Hn(`Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<`u`&&`Headers`in self)return self.Headers;if(typeof globalThis<`u`&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<`u`)return Headers;Hn(`Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<`u`&&`Response`in self)return self.Response;if(typeof globalThis<`u`&&globalThis.Response)return globalThis.Response;if(typeof Response<`u`)return Response;Hn(`Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}},Qn={CREDENTIAL_MISMATCH:`custom-token-mismatch`,MISSING_CUSTOM_TOKEN:`internal-error`,INVALID_IDENTIFIER:`invalid-email`,MISSING_CONTINUE_URI:`internal-error`,INVALID_PASSWORD:`wrong-password`,MISSING_PASSWORD:`missing-password`,INVALID_LOGIN_CREDENTIALS:`invalid-credential`,EMAIL_EXISTS:`email-already-in-use`,PASSWORD_LOGIN_DISABLED:`operation-not-allowed`,INVALID_IDP_RESPONSE:`invalid-credential`,INVALID_PENDING_TOKEN:`invalid-credential`,FEDERATED_USER_ID_ALREADY_LINKED:`credential-already-in-use`,MISSING_REQ_TYPE:`internal-error`,EMAIL_NOT_FOUND:`user-not-found`,RESET_PASSWORD_EXCEED_LIMIT:`too-many-requests`,EXPIRED_OOB_CODE:`expired-action-code`,INVALID_OOB_CODE:`invalid-action-code`,MISSING_OOB_CODE:`internal-error`,CREDENTIAL_TOO_OLD_LOGIN_AGAIN:`requires-recent-login`,INVALID_ID_TOKEN:`invalid-user-token`,TOKEN_EXPIRED:`user-token-expired`,USER_NOT_FOUND:`user-token-expired`,TOO_MANY_ATTEMPTS_TRY_LATER:`too-many-requests`,PASSWORD_DOES_NOT_MEET_REQUIREMENTS:`password-does-not-meet-requirements`,INVALID_CODE:`invalid-verification-code`,INVALID_SESSION_INFO:`invalid-verification-id`,INVALID_TEMPORARY_PROOF:`invalid-credential`,MISSING_SESSION_INFO:`missing-verification-id`,SESSION_EXPIRED:`code-expired`,MISSING_ANDROID_PACKAGE_NAME:`missing-android-pkg-name`,UNAUTHORIZED_DOMAIN:`unauthorized-continue-uri`,INVALID_OAUTH_CLIENT_ID:`invalid-oauth-client-id`,ADMIN_ONLY_OPERATION:`admin-restricted-operation`,INVALID_MFA_PENDING_CREDENTIAL:`invalid-multi-factor-session`,MFA_ENROLLMENT_NOT_FOUND:`multi-factor-info-not-found`,MISSING_MFA_ENROLLMENT_ID:`missing-multi-factor-info`,MISSING_MFA_PENDING_CREDENTIAL:`missing-multi-factor-session`,SECOND_FACTOR_EXISTS:`second-factor-already-in-use`,SECOND_FACTOR_LIMIT_EXCEEDED:`maximum-second-factor-count-exceeded`,BLOCKING_FUNCTION_ERROR_RESPONSE:`internal-error`,RECAPTCHA_NOT_ENABLED:`recaptcha-not-enabled`,MISSING_RECAPTCHA_TOKEN:`missing-recaptcha-token`,INVALID_RECAPTCHA_TOKEN:`invalid-recaptcha-token`,INVALID_RECAPTCHA_ACTION:`invalid-recaptcha-action`,MISSING_CLIENT_TYPE:`missing-client-type`,MISSING_RECAPTCHA_VERSION:`missing-recaptcha-version`,INVALID_RECAPTCHA_VERSION:`invalid-recaptcha-version`,INVALID_REQ_TYPE:`invalid-req-type`},$n=[`/v1/accounts:signInWithCustomToken`,`/v1/accounts:signInWithEmailLink`,`/v1/accounts:signInWithIdp`,`/v1/accounts:signInWithPassword`,`/v1/accounts:signInWithPhoneNumber`,`/v1/token`],er=new Yn(3e4,6e4);function tr(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function nr(e,t,n,r,i={}){return rr(e,i,async()=>{let i={},a={};r&&(t===`GET`?a=r:i={body:JSON.stringify(r)});let o=Ae({key:e.config.apiKey,...a}).slice(1),s=await e._getAdditionalHeaders();s[`Content-Type`]=`application/json`,e.languageCode&&(s[`X-Firebase-Locale`]=e.languageCode);let c={method:t,headers:s,...i};return he()||(c.referrerPolicy=`no-referrer`),e.emulatorConfig&&A(e.emulatorConfig.host)&&(c.credentials=`include`),Zn.fetch()(await ar(e,e.config.apiHost,n,o),c)})}async function rr(e,t,n){e._canInitEmulator=!1;let r={...Qn,...t};try{let t=new sr(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();let a=await i.json();if(`needConfirmation`in a)throw cr(e,`account-exists-with-different-credential`,a);if(i.ok&&!(`errorMessage`in a))return a;{let[t,n]=(i.ok?a.errorMessage:a.error.message).split(` : `);if(t===`FEDERATED_USER_ID_ALREADY_LINKED`)throw cr(e,`credential-already-in-use`,a);if(t===`EMAIL_EXISTS`)throw cr(e,`email-already-in-use`,a);if(t===`USER_DISABLED`)throw cr(e,`user-disabled`,a);let o=r[t]||t.toLowerCase().replace(/[_\s]+/g,`-`);if(n)throw Rn(e,o,n);In(e,o)}}catch(t){if(t instanceof Ce)throw t;In(e,`network-request-failed`,{message:String(t)})}}async function ir(e,t,n,r,i={}){let a=await nr(e,t,n,r,i);return`mfaPendingCredential`in a&&In(e,`multi-factor-auth-required`,{_serverResponse:a}),a}async function ar(e,t,n,r){let i=`${t}${n}?${r}`,a=e,o=a.config.emulator?Xn(e.config,i):`${e.config.apiScheme}://${i}`;return $n.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()===`COOKIE`)?a._getPersistence()._getFinalTarget(o).toString():o}function or(e){switch(e){case`ENFORCE`:return`ENFORCE`;case`AUDIT`:return`AUDIT`;case`OFF`:return`OFF`;default:return`ENFORCEMENT_STATE_UNSPECIFIED`}}var sr=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Ln(this.auth,`network-request-failed`)),er.get())})}};function cr(e,t,n){let r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Ln(e,t,r);return i.customData._tokenResponse=n,i}function lr(e){return e!==void 0&&e.enterprise!==void 0}var ur=class{constructor(e){if(this.siteKey=``,this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw Error(`recaptchaKey undefined`);this.siteKey=e.recaptchaKey.split(`/`)[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return or(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)===`ENFORCE`||this.getProviderEnforcementState(e)===`AUDIT`}isAnyProviderEnabled(){return this.isProviderEnabled(`EMAIL_PASSWORD_PROVIDER`)||this.isProviderEnabled(`PHONE_PROVIDER`)}};async function dr(e,t){return nr(e,`GET`,`/v2/recaptchaConfig`,tr(e,t))}async function fr(e,t){return nr(e,`POST`,`/v1/accounts:delete`,t)}async function pr(e,t){return nr(e,`POST`,`/v1/accounts:lookup`,t)}function mr(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function hr(e,t=!1){let n=Le(e),r=await n.getIdToken(t),i=_r(r);P(i&&i.exp&&i.auth_time&&i.iat,n.auth,`internal-error`);let a=typeof i.firebase==`object`?i.firebase:void 0,o=a?.sign_in_provider;return{claims:i,token:r,authTime:mr(gr(i.auth_time)),issuedAtTime:mr(gr(i.iat)),expirationTime:mr(gr(i.exp)),signInProvider:o||null,signInSecondFactor:a?.sign_in_second_factor||null}}function gr(e){return Number(e)*1e3}function _r(e){let[t,n,r]=e.split(`.`);if(t===void 0||n===void 0||r===void 0)return Fn(`JWT malformed, contained fewer than 3 sections`),null;try{let e=T(n);return e?JSON.parse(e):(Fn(`Failed to decode base64 JWT payload`),null)}catch(e){return Fn(`Caught error parsing JWT payload as JSON`,e?.toString()),null}}function vr(e){let t=_r(e);return P(t,`internal-error`),P(t.exp!==void 0,`internal-error`),P(t.iat!==void 0,`internal-error`),Number(t.exp)-Number(t.iat)}async function yr(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof Ce&&br(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}function br({code:e}){return e===`auth/user-disabled`||e===`auth/user-token-expired`}var xr=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;let e=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code===`auth/network-request-failed`&&this.schedule(!0);return}this.schedule()}},Sr=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=mr(this.lastLoginAt),this.creationTime=mr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Cr(e){let t=e.auth,n=await yr(e,pr(t,{idToken:await e.getIdToken()}));P(n?.users.length,t,`internal-error`);let r=n.users[0];e._notifyReloadListener(r);let i=r.providerUserInfo?.length?Er(r.providerUserInfo):[],a=Tr(e.providerData,i),o=e.isAnonymous,s=!(e.email&&r.passwordHash)&&!a?.length,c=o?s:!1,l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Sr(r.createdAt,r.lastLoginAt),isAnonymous:c};Object.assign(e,l)}async function wr(e){let t=Le(e);await Cr(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Tr(e,t){return[...e.filter(e=>!t.some(t=>t.providerId===e.providerId)),...t]}function Er(e){return e.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||``,displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function Dr(e,t){let n=await rr(e,{},async()=>{let n=Ae({grant_type:`refresh_token`,refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,a=await ar(e,r,`/v1/token`,`key=${i}`),o=await e._getAdditionalHeaders();o[`Content-Type`]=`application/x-www-form-urlencoded`;let s={method:`POST`,headers:o,body:n};return e.emulatorConfig&&A(e.emulatorConfig.host)&&(s.credentials=`include`),Zn.fetch()(a,s)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Or(e,t){return nr(e,`POST`,`/v2/accounts:revokeToken`,tr(e,t))}var kr=class e{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){P(e.idToken,`internal-error`),P(e.idToken!==void 0,`internal-error`),P(e.refreshToken!==void 0,`internal-error`);let t=`expiresIn`in e&&e.expiresIn!==void 0?Number(e.expiresIn):vr(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){P(e.length!==0,`internal-error`);let t=vr(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(P(this.refreshToken,e,`user-token-expired`),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:n,refreshToken:r,expiresIn:i}=await Dr(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,n){let{refreshToken:r,accessToken:i,expirationTime:a}=n,o=new e;return r&&(P(typeof r==`string`,`internal-error`,{appName:t}),o.refreshToken=r),i&&(P(typeof i==`string`,`internal-error`,{appName:t}),o.accessToken=i),a&&(P(typeof a==`number`,`internal-error`,{appName:t}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new e,this.toJSON())}_performRefresh(){return Hn(`not implemented`)}};function Ar(e,t){P(typeof e==`string`||e===void 0,`internal-error`,{appName:t})}var jr=class e{constructor({uid:e,auth:t,stsTokenManager:n,...r}){this.providerId=`firebase`,this.proactiveRefresh=new xr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Sr(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){let t=await yr(this,this.stsTokenManager.getToken(this.auth,e));return P(t,this.auth,`internal-error`),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return hr(this,e)}reload(){return wr(this)}_assign(e){this!==e&&(P(this.uid===e.uid,this.auth,`internal-error`),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>({...e})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(t){let n=new e({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){P(!this.reloadListener,this.auth,`internal-error`),this.reloadListener=e,this.reloadUserInfo&&=(this._notifyReloadListener(this.reloadUserInfo),null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Cr(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(an(this.auth.app))return Promise.reject(zn(this.auth));let e=await this.getIdToken();return await yr(this,fr(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||``}static _fromJSON(t,n){let r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,o=n.photoURL??void 0,s=n.tenantId??void 0,c=n._redirectEventId??void 0,l=n.createdAt??void 0,u=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:p,providerData:m,stsTokenManager:h}=n;P(d&&h,t,`internal-error`);let g=kr.fromJSON(this.name,h);P(typeof d==`string`,t,`internal-error`),Ar(r,t.name),Ar(i,t.name),P(typeof f==`boolean`,t,`internal-error`),P(typeof p==`boolean`,t,`internal-error`),Ar(a,t.name),Ar(o,t.name),Ar(s,t.name),Ar(c,t.name),Ar(l,t.name),Ar(u,t.name);let _=new e({uid:d,auth:t,email:i,emailVerified:f,displayName:r,isAnonymous:p,photoURL:o,phoneNumber:a,tenantId:s,stsTokenManager:g,createdAt:l,lastLoginAt:u});return m&&Array.isArray(m)&&(_.providerData=m.map(e=>({...e}))),c&&(_._redirectEventId=c),_}static async _fromIdTokenResponse(t,n,r=!1){let i=new kr;i.updateFromServerResponse(n);let a=new e({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await Cr(a),a}static async _fromGetAccountInfoResponse(t,n,r){let i=n.users[0];P(i.localId!==void 0,`internal-error`);let a=i.providerUserInfo===void 0?[]:Er(i.providerUserInfo),o=!(i.email&&i.passwordHash)&&!a?.length,s=new kr;s.updateFromIdToken(r);let c=new e({uid:i.localId,auth:t,stsTokenManager:s,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Sr(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(c,l),c}},Mr=new Map;function Nr(e){Un(e instanceof Function,`Expected a class definition`);let t=Mr.get(e);return t?(Un(t instanceof e,`Instance stored in cache mismatched with class`),t):(t=new e,Mr.set(e,t),t)}var Pr=class{constructor(){this.type=`NONE`,this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){let t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}};Pr.type=`NONE`;var Fr=Pr;function Ir(e,t,n){return`firebase:${e}:${t}:${n}`}var Lr=class e{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;let{config:r,name:i}=this.auth;this.fullUserKey=Ir(this.userKey,r.apiKey,i),this.fullPersistenceKey=Ir(`persistence`,r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e==`string`){let t=await pr(this.auth,{idToken:e}).catch(()=>void 0);return t?jr._fromGetAccountInfoResponse(this.auth,t,e):null}return jr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r=`authUser`){if(!n.length)return new e(Nr(Fr),t,r);let i=(await Promise.all(n.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e),a=i[0]||Nr(Fr),o=Ir(r,t.config.apiKey,t.name),s=null;for(let e of n)try{let n=await e._get(o);if(n){let r;if(typeof n==`string`){let e=await pr(t,{idToken:n}).catch(()=>void 0);if(!e)break;r=await jr._fromGetAccountInfoResponse(t,e,n)}else r=jr._fromJSON(t,n);e!==a&&(s=r),a=e;break}}catch{}let c=i.filter(e=>e._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new e(a,t,r):(a=c[0],s&&await a._set(o,s.toJSON()),await Promise.all(n.map(async e=>{if(e!==a)try{await e._remove(o)}catch{}})),new e(a,t,r))}};function Rr(e){let t=e.toLowerCase();if(t.includes(`opera/`)||t.includes(`opr/`)||t.includes(`opios/`))return`Opera`;if(Hr(t))return`IEMobile`;if(t.includes(`msie`)||t.includes(`trident/`))return`IE`;if(t.includes(`edge/`))return`Edge`;if(zr(t))return`Firefox`;if(t.includes(`silk/`))return`Silk`;if(Wr(t))return`Blackberry`;if(Gr(t))return`Webos`;if(Br(t))return`Safari`;if((t.includes(`chrome/`)||Vr(t))&&!t.includes(`edge/`))return`Chrome`;if(Ur(t))return`Android`;{let t=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(t?.length===2)return t[1]}return`Other`}function zr(e=fe()){return/firefox\//i.test(e)}function Br(e=fe()){let t=e.toLowerCase();return t.includes(`safari/`)&&!t.includes(`chrome/`)&&!t.includes(`crios/`)&&!t.includes(`android`)}function Vr(e=fe()){return/crios\//i.test(e)}function Hr(e=fe()){return/iemobile/i.test(e)}function Ur(e=fe()){return/android/i.test(e)}function Wr(e=fe()){return/blackberry/i.test(e)}function Gr(e=fe()){return/webos/i.test(e)}function Kr(e=fe()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function qr(e=fe()){return Kr(e)&&!!window.navigator?.standalone}function Jr(){return ve()&&document.documentMode===10}function Yr(e=fe()){return Kr(e)||Ur(e)||Gr(e)||Wr(e)||/windows phone/i.test(e)||Hr(e)}function Xr(e,t=[]){let n;switch(e){case`Browser`:n=Rr(fe());break;case`Worker`:n=`${Rr(fe())}-${e}`;break;default:n=e}let r=t.length?t.join(`,`):`FirebaseCore-web`;return`${n}/JsCore/${cn}/${r}`}var Zr=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let n=t=>new Promise((n,r)=>{try{n(e(t))}catch(e){r(e)}});n.onAbort=t,this.queue.push(n);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(e){t.reverse();for(let e of t)try{e()}catch{}throw this.auth._errorFactory.create(`login-blocked`,{originalMessage:e?.message})}}};async function Qr(e,t={}){return nr(e,`GET`,`/v2/passwordPolicy`,tr(e,t))}var $r=6,ei=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??$r,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState===`ENFORCEMENT_STATE_UNSPECIFIED`&&(this.enforcementState=`OFF`),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join(``)??``,this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&=t.meetsMinPasswordLength??!0,t.isValid&&=t.meetsMaxPasswordLength??!0,t.isValid&&=t.containsLowercaseLetter??!0,t.isValid&&=t.containsUppercaseLetter??!0,t.isValid&&=t.containsNumericCharacter??!0,t.isValid&&=t.containsNonAlphanumericCharacter??!0,t}validatePasswordLengthOptions(e,t){let n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>=`a`&&n<=`z`,n>=`A`&&n<=`Z`,n>=`0`&&n<=`9`,this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||=t),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||=n),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||=r),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||=i)}},ti=class{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ri(this),this.idTokenSubscription=new ri(this),this.beforeStateQueue=new Zr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Mn,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Nr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Lr.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await pr(this,{idToken:e}),n=await jr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(e){console.warn(`FirebaseServerApp could not login user with provided authIdToken: `,e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(an(this.app)){let e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),n=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let t=this.redirectUser?._redirectEventId,i=n?._redirectEventId,a=await this.tryRedirectSignIn(e);(!t||t===i)&&a?.user&&(n=a.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(e){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(e))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return P(this._popupRedirectResolver,this,`argument-error`),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Cr(e)}catch(e){if(e?.code!==`auth/network-request-failed`)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Jn()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(an(this.app))return Promise.reject(zn(this));let t=e?Le(e):null;return t&&P(t.auth.config.apiKey===this.config.apiKey,this,`invalid-user-token`),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&P(this.tenantId===e.tenantId,this,`tenant-id-mismatch`),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return an(this.app)?Promise.reject(zn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return an(this.app)?Promise.reject(zn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Nr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion===this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?t.validatePassword(e):Promise.reject(this._errorFactory.create(`unsupported-password-policy-schema-version`,{}))}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=new ei(await Qr(this));this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new we(`auth`,`Firebase`,e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t={providerId:`apple.com`,tokenType:`ACCESS_TOKEN`,token:e,idToken:await this.currentUser.getIdToken()};this.tenantId!=null&&(t.tenantId=this.tenantId),await Or(this,t)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&Nr(e)||this._popupRedirectResolver;P(t,this,`argument-error`),this.redirectPersistenceManager=await Lr.create(this,[Nr(t._redirectPersistence)],`redirectUser`),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};let i=typeof t==`function`?t:t.next.bind(t),a=!1,o=this._isInitialized?Promise.resolve():this._initializationPromise;if(P(o,this,`internal-error`),o.then(()=>{a||i(this.currentUser)}),typeof t==`function`){let i=e.addObserver(t,n,r);return()=>{a=!0,i()}}else{let n=e.addObserver(t);return()=>{a=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return P(this.persistenceManager,this,`internal-error`),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Xr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e[`X-Firebase-gmpid`]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e[`X-Firebase-Client`]=t);let n=await this._getAppCheckToken();return n&&(e[`X-Firebase-AppCheck`]=n),e}async _getAppCheckToken(){if(an(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Pn(`Error while retrieving App Check token: ${e.error}`),e?.token}};function ni(e){return Le(e)}var ri=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ne(e=>this.observer=e)}get next(){return P(this.observer,this.auth,`internal-error`),this.observer.next.bind(this.observer)}},ii={async loadJS(){throw Error(`Unable to load external scripts`)},recaptchaV2Script:``,recaptchaEnterpriseScript:``,gapiScript:``};function ai(e){ii=e}function oi(e){return ii.loadJS(e)}function si(){return ii.recaptchaEnterpriseScript}function ci(){return ii.gapiScript}function li(e){return`__${e}${Math.floor(Math.random()*1e6)}`}var ui=class{constructor(){this.enterprise=new di}ready(e){e()}execute(e,t){return Promise.resolve(`token`)}render(e,t){return``}},di=class{ready(e){e()}execute(e,t){return Promise.resolve(`token`)}render(e,t){return``}},fi=`recaptcha-enterprise`,pi=`NO_RECAPTCHA`,mi=class{constructor(e){this.type=fi,this.auth=ni(e)}async verify(e=`verify`,t=!1){async function n(e){if(!t){if(e.tenantId==null&&e._agentRecaptchaConfig!=null)return e._agentRecaptchaConfig.siteKey;if(e.tenantId!=null&&e._tenantRecaptchaConfigs[e.tenantId]!==void 0)return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{dr(e,{clientType:`CLIENT_TYPE_WEB`,version:`RECAPTCHA_ENTERPRISE`}).then(r=>{if(r.recaptchaKey===void 0)n(Error(`recaptcha Enterprise site key undefined`));else{let n=new ur(r);return e.tenantId==null?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}}).catch(e=>{n(e)})})}function r(t,n,r){let i=window.grecaptcha;lr(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(pi)})}):r(Error(`No reCAPTCHA enterprise script loaded.`))}return this.auth.settings.appVerificationDisabledForTesting?new ui().execute(`siteKey`,{action:`verify`}):new Promise((e,i)=>{n(this.auth).then(n=>{if(!t&&lr(window.grecaptcha))r(n,e,i);else{if(typeof window>`u`){i(Error(`RecaptchaVerifier is only supported in browser`));return}let t=si();t.length!==0&&(t+=n),oi(t).then(()=>{r(n,e,i)}).catch(e=>{i(e)})}}).catch(e=>{i(e)})})}};async function hi(e,t,n,r=!1,i=!1){let a=new mi(e),o;if(i)o=pi;else try{o=await a.verify(n)}catch{o=await a.verify(n,!0)}let s={...t};if(n===`mfaSmsEnrollment`||n===`mfaSmsSignIn`){if(`phoneEnrollmentInfo`in s){let e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.recaptchaToken;Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:`CLIENT_TYPE_WEB`,recaptchaVersion:`RECAPTCHA_ENTERPRISE`}})}else if(`phoneSignInInfo`in s){let e=s.phoneSignInInfo.recaptchaToken;Object.assign(s,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:`CLIENT_TYPE_WEB`,recaptchaVersion:`RECAPTCHA_ENTERPRISE`}})}return s}return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:`CLIENT_TYPE_WEB`}),Object.assign(s,{recaptchaVersion:`RECAPTCHA_ENTERPRISE`}),s}async function gi(e,t,n,r,i){return i===`EMAIL_PASSWORD_PROVIDER`?e._getRecaptchaConfig()?.isProviderEnabled(`EMAIL_PASSWORD_PROVIDER`)?r(e,await hi(e,t,n,n===`getOobCode`)):r(e,t).catch(async i=>i.code===`auth/missing-recaptcha-token`?(console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`),r(e,await hi(e,t,n,n===`getOobCode`))):Promise.reject(i)):i===`PHONE_PROVIDER`?e._getRecaptchaConfig()?.isProviderEnabled(`PHONE_PROVIDER`)?r(e,await hi(e,t,n)).catch(async i=>e._getRecaptchaConfig()?.getProviderEnforcementState(`PHONE_PROVIDER`)===`AUDIT`&&(i.code===`auth/missing-recaptcha-token`||i.code===`auth/invalid-app-credential`)?(console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`),r(e,await hi(e,t,n,!1,!0))):Promise.reject(i)):r(e,await hi(e,t,n,!1,!0)):Promise.reject(i+` provider is not supported.`)}async function _i(e){let t=ni(e),n=new ur(await dr(t,{clientType:`CLIENT_TYPE_WEB`,version:`RECAPTCHA_ENTERPRISE`}));t.tenantId==null?t._agentRecaptchaConfig=n:t._tenantRecaptchaConfigs[t.tenantId]=n,n.isAnyProviderEnabled()&&new mi(t).verify()}function vi(e,t){let n=rn(e,`auth`);if(n.isInitialized()){let e=n.getImmediate();if(Oe(n.getOptions(),t??{}))return e;In(e,`already-initialized`)}return n.initialize({options:t})}function yi(e,t){let n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Nr);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}function bi(e,t,n){let r=ni(e);P(/^https?:\/\//.test(t),r,`invalid-emulator-scheme`);let i=!!n?.disableWarnings,a=xi(t),{host:o,port:s}=Si(t),c=s===null?``:`:${s}`,l={url:`${a}//${o}${c}/`},u=Object.freeze({host:o,port:s,protocol:a.replace(`:`,``),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){P(r.config.emulator&&r.emulatorConfig,r,`emulator-config-failed`),P(Oe(l,r.config.emulator)&&Oe(u,r.emulatorConfig),r,`emulator-config-failed`);return}r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,A(o)?(j(`${a}//${o}${c}`),de(`Auth`,!0)):i||wi()}function xi(e){let t=e.indexOf(`:`);return t<0?``:e.substr(0,t+1)}function Si(e){let t=xi(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:``,port:null};let r=n[2].split(`@`).pop()||``,i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let e=i[1];return{host:e,port:Ci(r.substr(e.length+1))}}else{let[e,t]=r.split(`:`);return{host:e,port:Ci(t)}}}function Ci(e){if(!e)return null;let t=Number(e);return isNaN(t)?null:t}function wi(){function e(){let e=document.createElement(`p`),t=e.style;e.innerText=`Running in emulator mode. Do not use with production credentials.`,t.position=`fixed`,t.width=`100%`,t.backgroundColor=`#ffffff`,t.border=`.1em solid #000000`,t.color=`#b50000`,t.bottom=`0px`,t.left=`0px`,t.margin=`0px`,t.zIndex=`10000`,t.textAlign=`center`,e.classList.add(`firebase-emulator-warning`),document.body.appendChild(e)}typeof console<`u`&&typeof console.info==`function`&&console.info(`WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.`),typeof window<`u`&&typeof document<`u`&&(document.readyState===`loading`?window.addEventListener(`DOMContentLoaded`,e):e())}var Ti=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Hn(`not implemented`)}_getIdTokenResponse(e){return Hn(`not implemented`)}_linkToIdToken(e,t){return Hn(`not implemented`)}_getReauthenticationResolver(e){return Hn(`not implemented`)}};async function Ei(e,t){return nr(e,`POST`,`/v1/accounts:signUp`,t)}async function Di(e,t){return ir(e,`POST`,`/v1/accounts:signInWithPassword`,tr(e,t))}async function Oi(e,t){return nr(e,`POST`,`/v1/accounts:sendOobCode`,tr(e,t))}async function ki(e,t){return Oi(e,t)}async function Ai(e,t){return ir(e,`POST`,`/v1/accounts:signInWithEmailLink`,tr(e,t))}async function ji(e,t){return ir(e,`POST`,`/v1/accounts:signInWithEmailLink`,tr(e,t))}var Mi=class e extends Ti{constructor(e,t,n,r=null){super(`password`,n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(t,n){return new e(t,n,`password`)}static _fromEmailAndCode(t,n,r=null){return new e(t,n,`emailLink`,r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e==`string`?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod===`password`)return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod===`emailLink`)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case`password`:return gi(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:`CLIENT_TYPE_WEB`},`signInWithPassword`,Di,`EMAIL_PASSWORD_PROVIDER`);case`emailLink`:return Ai(e,{email:this._email,oobCode:this._password});default:In(e,`internal-error`)}}async _linkToIdToken(e,t){switch(this.signInMethod){case`password`:return gi(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:`CLIENT_TYPE_WEB`},`signUpPassword`,Ei,`EMAIL_PASSWORD_PROVIDER`);case`emailLink`:return ji(e,{idToken:t,email:this._email,oobCode:this._password});default:In(e,`internal-error`)}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};async function Ni(e,t){return ir(e,`POST`,`/v1/accounts:signInWithIdp`,tr(e,t))}var Pi=`http://localhost`,Fi=class e extends Ti{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){let n=new e(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):In(`argument-error`),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){let{providerId:n,signInMethod:r,...i}=typeof t==`string`?JSON.parse(t):t;if(!n||!r)return null;let a=new e(n,r);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){return Ni(e,this.buildRequest())}_linkToIdToken(e,t){let n=this.buildRequest();return n.idToken=t,Ni(e,n)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,Ni(e,t)}buildRequest(){let e={requestUri:Pi,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ae(t)}return e}};async function Ii(e,t){return nr(e,`POST`,`/v1/accounts:sendVerificationCode`,tr(e,t))}async function Li(e,t){return ir(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,tr(e,t))}async function Ri(e,t){let n=await ir(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,tr(e,t));if(n.temporaryProof)throw cr(e,`account-exists-with-different-credential`,n);return n}var F={USER_NOT_FOUND:`user-not-found`};async function zi(e,t){return ir(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,tr(e,{...t,operation:`REAUTH`}),F)}var Bi=class e extends Ti{constructor(e){super(`phone`,`phone`),this.params=e}static _fromVerification(t,n){return new e({verificationId:t,verificationCode:n})}static _fromTokenResponse(t,n){return new e({phoneNumber:t,temporaryProof:n})}_getIdTokenResponse(e){return Li(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return Ri(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return zi(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(t){typeof t==`string`&&(t=JSON.parse(t));let{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:a}=t;return!r&&!n&&!i&&!a?null:new e({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:a})}};function Vi(e){switch(e){case`recoverEmail`:return`RECOVER_EMAIL`;case`resetPassword`:return`PASSWORD_RESET`;case`signIn`:return`EMAIL_SIGNIN`;case`verifyEmail`:return`VERIFY_EMAIL`;case`verifyAndChangeEmail`:return`VERIFY_AND_CHANGE_EMAIL`;case`revertSecondFactorAddition`:return`REVERT_SECOND_FACTOR_ADDITION`;default:return null}}function Hi(e){let t=je(Me(e)).link,n=t?je(Me(t)).deep_link_id:null,r=je(Me(e)).deep_link_id;return(r?je(Me(r)).link:null)||r||n||t||e}var Ui=class e{constructor(e){let t=je(Me(e)),n=t.apiKey??null,r=t.oobCode??null,i=Vi(t.mode??null);P(n&&r&&i,`argument-error`),this.apiKey=n,this.operation=i,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(t){let n=Hi(t);try{return new e(n)}catch{return null}}},Wi=class e{constructor(){this.providerId=e.PROVIDER_ID}static credential(e,t){return Mi._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){let n=Ui.parseLink(t);return P(n,`argument-error`),Mi._fromEmailAndCode(e,n.code,n.tenantId)}};Wi.PROVIDER_ID=`password`,Wi.EMAIL_PASSWORD_SIGN_IN_METHOD=`password`,Wi.EMAIL_LINK_SIGN_IN_METHOD=`emailLink`;var Gi=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}},Ki=class extends Gi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}},qi=class e extends Ki{constructor(){super(`facebook.com`)}static credential(t){return Fi._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!(`oauthAccessToken`in t)||!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch{return null}}};qi.FACEBOOK_SIGN_IN_METHOD=`facebook.com`,qi.PROVIDER_ID=`facebook.com`;var Ji=class e extends Ki{constructor(){super(`google.com`),this.addScope(`profile`)}static credential(t,n){return Fi._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return e.credential(n,r)}catch{return null}}};Ji.GOOGLE_SIGN_IN_METHOD=`google.com`,Ji.PROVIDER_ID=`google.com`;var Yi=class e extends Ki{constructor(){super(`github.com`)}static credential(t){return Fi._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!(`oauthAccessToken`in t)||!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch{return null}}};Yi.GITHUB_SIGN_IN_METHOD=`github.com`,Yi.PROVIDER_ID=`github.com`;var Xi=class e extends Ki{constructor(){super(`twitter.com`)}static credential(t,n){return Fi._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return e.credential(n,r)}catch{return null}}};Xi.TWITTER_SIGN_IN_METHOD=`twitter.com`,Xi.PROVIDER_ID=`twitter.com`;var Zi=class e{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){return new e({user:await jr._fromIdTokenResponse(t,r,i),providerId:Qi(r),_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){return await t._updateTokensIfNecessary(r,!0),new e({user:t,providerId:Qi(r),_tokenResponse:r,operationType:n})}};function Qi(e){return e.providerId?e.providerId:`phoneNumber`in e?`phone`:null}var $i=class e extends Ce{constructor(t,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,e.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new e(t,n,r,i)}};function ea(e,t,n,r){return(t===`reauthenticate`?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{throw n.code===`auth/multi-factor-auth-required`?$i._fromErrorAndOperation(e,n,t,r):n})}async function ta(e,t,n=!1){let r=await yr(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Zi._forOperation(e,`link`,r)}async function na(e,t,n=!1){let{auth:r}=e;if(an(r.app))return Promise.reject(zn(r));let i=`reauthenticate`;try{let a=await yr(e,ea(r,i,t,e),n);P(a.idToken,r,`internal-error`);let o=_r(a.idToken);P(o,r,`internal-error`);let{sub:s}=o;return P(e.uid===s,r,`user-mismatch`),Zi._forOperation(e,i,a)}catch(e){throw e?.code===`auth/user-not-found`&&In(r,`user-mismatch`),e}}async function ra(e,t,n=!1){if(an(e.app))return Promise.reject(zn(e));let r=`signIn`,i=await ea(e,r,t),a=await Zi._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(a.user),a}async function ia(e,t){return ra(ni(e),t)}async function aa(e,t){return ir(e,`POST`,`/v1/accounts:signInWithCustomToken`,tr(e,t))}async function oa(e,t){if(an(e.app))return Promise.reject(zn(e));let n=ni(e),r=await aa(n,{token:t,returnSecureToken:!0}),i=await Zi._fromIdTokenResponse(n,`signIn`,r);return await n._updateCurrentUser(i.user),i}function sa(e,t,n){P(n.url?.length>0,e,`invalid-continue-uri`),P(n.dynamicLinkDomain===void 0||n.dynamicLinkDomain.length>0,e,`invalid-dynamic-link-domain`),P(n.linkDomain===void 0||n.linkDomain.length>0,e,`invalid-hosting-link-domain`),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.linkDomain=n.linkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(P(n.iOS.bundleId.length>0,e,`missing-ios-bundle-id`),t.iOSBundleId=n.iOS.bundleId),n.android&&(P(n.android.packageName.length>0,e,`missing-android-pkg-name`),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function ca(e){let t=ni(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function la(e,t,n){return an(e.app)?Promise.reject(zn(e)):ia(Le(e),Wi.credential(t,n)).catch(async t=>{throw t.code===`auth/password-does-not-meet-requirements`&&ca(e),t})}async function ua(e,t,n){let r=ni(e),i={requestType:`EMAIL_SIGNIN`,email:t,clientType:`CLIENT_TYPE_WEB`};function a(e,t){P(t.handleCodeInApp,r,`argument-error`),t&&sa(r,e,t)}a(i,n),await gi(r,i,`getOobCode`,ki,`EMAIL_PASSWORD_PROVIDER`)}function da(e,t){return Ui.parseLink(t)?.operation===`EMAIL_SIGNIN`}async function fa(e,t,n){if(an(e.app))return Promise.reject(zn(e));let r=Le(e),i=Wi.credentialWithLink(t,n||Wn());return P(i._tenantId===(r.tenantId||null),r,`tenant-id-mismatch`),ia(r,i)}function pa(e,t,n,r){return Le(e).onIdTokenChanged(t,n,r)}function ma(e,t,n){return Le(e).beforeAuthStateChanged(t,n)}function ha(e){return Le(e).signOut()}function ga(e,t){return nr(e,`POST`,`/v2/accounts/mfaEnrollment:start`,tr(e,t))}function _a(e,t){return nr(e,`POST`,`/v2/accounts/mfaEnrollment:finalize`,tr(e,t))}function va(e,t){return nr(e,`POST`,`/v2/accounts/mfaEnrollment:start`,tr(e,t))}function ya(e,t){return nr(e,`POST`,`/v2/accounts/mfaEnrollment:finalize`,tr(e,t))}var ba=`__sak`,xa=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ba,`1`),this.storage.removeItem(ba),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}},Sa=1e3,Ca=10,wa=class extends xa{constructor(){super(()=>window.localStorage,`LOCAL`),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Yr(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let t of Object.keys(this.listeners)){let n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});return}let n=e.key;t?this.detachListener():this.stopPolling();let r=()=>{let e=this.storage.getItem(n);!t&&this.localCache[n]===e||this.notifyListeners(n,e)},i=this.storage.getItem(n);Jr()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,Ca):r()}notifyListeners(e,t){this.localCache[e]=t;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent(`storage`,{key:e,oldValue:t,newValue:n}),!0)})},Sa)}stopPolling(){this.pollTimer&&=(clearInterval(this.pollTimer),null)}attachListener(){window.addEventListener(`storage`,this.boundEventHandler)}detachListener(){window.removeEventListener(`storage`,this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){let t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}};wa.type=`LOCAL`;var Ta=wa,Ea=1e3;function Da(e){let t=e.replace(/[\\^$.*+?()[\]{}|]/g,`\\$&`),n=RegExp(`${t}=([^;]+)`);return document.cookie.match(n)?.[1]??null}function Oa(e){return`${window.location.protocol===`http:`?`__dev_`:`__HOST-`}FIREBASE_${e.split(`:`)[3]}`}var ka=class{constructor(){this.type=`COOKIE`,this.listenerUnsubscribes=new Map}_getFinalTarget(e){let t=new URL(`${window.location.origin}/__cookies__`);return t.searchParams.set(`finalTarget`,e),t}async _isAvailable(){return typeof isSecureContext==`boolean`&&!isSecureContext||typeof navigator>`u`||typeof document>`u`?!1:navigator.cookieEnabled??!0}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;let t=Oa(e);return window.cookieStore?(await window.cookieStore.get(t))?.value:Da(t)}async _remove(e){if(!this._isAvailable()||!await this._get(e))return;let t=Oa(e);document.cookie=`${t}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch(`/__cookies__`,{method:`DELETE`}).catch(()=>void 0)}_addListener(e,t){if(!this._isAvailable())return;let n=Oa(e);if(window.cookieStore){let e=(e=>{let r=e.changed.find(e=>e.name===n);r&&t(r.value),e.deleted.find(e=>e.name===n)&&t(null)});return this.listenerUnsubscribes.set(t,()=>window.cookieStore.removeEventListener(`change`,e)),window.cookieStore.addEventListener(`change`,e)}let r=Da(n),i=setInterval(()=>{let e=Da(n);e!==r&&(t(e),r=e)},Ea);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){let n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}};ka.type=`COOKIE`;var Aa=class extends xa{constructor(){super(()=>window.sessionStorage,`SESSION`)}_addListener(e,t){}_removeListener(e,t){}};Aa.type=`SESSION`;var ja=Aa;function Ma(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}}))}var Na=class e{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let n=this.receivers.find(e=>e.isListeningto(t));if(n)return n;let r=new e(t);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let t=e,{eventId:n,eventType:r,data:i}=t.data,a=this.handlersMap[r];if(!a?.size)return;t.ports[0].postMessage({status:`ack`,eventId:n,eventType:r});let o=await Ma(Array.from(a).map(async e=>e(t.origin,i)));t.ports[0].postMessage({status:`done`,eventId:n,eventType:r,response:o})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener(`message`,this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener(`message`,this.boundEventHandler)}};Na.receivers=[];function Pa(e=``,t=10){let n=``;for(let e=0;e<t;e++)n+=Math.floor(Math.random()*10);return e+n}var Fa=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener(`message`,e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){let r=typeof MessageChannel<`u`?new MessageChannel:null;if(!r)throw Error(`connection_unavailable`);let i,a;return new Promise((o,s)=>{let c=Pa(``,20);r.port1.start();let l=setTimeout(()=>{s(Error(`unsupported_event`))},n);a={messageChannel:r,onMessage(e){let t=e;if(t.data.eventId===c)switch(t.data.status){case`ack`:clearTimeout(l),i=setTimeout(()=>{s(Error(`timeout`))},3e3);break;case`done`:clearTimeout(i),o(t.data.response);break;default:clearTimeout(l),clearTimeout(i),s(Error(`invalid_response`));break}}},this.handlers.add(a),r.port1.addEventListener(`message`,a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}};function Ia(){return window}function La(e){Ia().location.href=e}function Ra(){return Ia().WorkerGlobalScope!==void 0&&typeof Ia().importScripts==`function`}async function za(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Ba(){return navigator?.serviceWorker?.controller||null}function Va(){return Ra()?self:null}var Ha=`firebaseLocalStorageDb`,Ua=1,Wa=`firebaseLocalStorage`,Ga=`fbase_key`,Ka=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener(`success`,()=>{e(this.request.result)}),this.request.addEventListener(`error`,()=>{t(this.request.error)})})}};function qa(e,t){return e.transaction([Wa],t?`readwrite`:`readonly`).objectStore(Wa)}function Ja(){return new Ka(indexedDB.deleteDatabase(Ha)).toPromise()}function Ya(){let e=indexedDB.open(Ha,Ua);return new Promise((t,n)=>{e.addEventListener(`error`,()=>{n(e.error)}),e.addEventListener(`upgradeneeded`,()=>{let t=e.result;try{t.createObjectStore(Wa,{keyPath:Ga})}catch(e){n(e)}}),e.addEventListener(`success`,async()=>{let n=e.result;n.objectStoreNames.contains(Wa)?t(n):(n.close(),await Ja(),t(await Ya()))})})}async function Xa(e,t,n){return new Ka(qa(e,!0).put({[Ga]:t,value:n})).toPromise()}async function Za(e,t){let n=await new Ka(qa(e,!1).get(t)).toPromise();return n===void 0?null:n.value}function Qa(e,t){return new Ka(qa(e,!0).delete(t)).toPromise()}var $a=800,eo=3,to=class{constructor(){this.type=`LOCAL`,this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||=await Ya(),this.db}async _withRetries(e){let t=0;for(;;)try{return await e(await this._openDb())}catch(e){if(t++>eo)throw e;this.db&&=(this.db.close(),void 0)}}async initializeServiceWorkerMessaging(){return Ra()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Na._getInstance(Va()),this.receiver._subscribe(`keyChanged`,async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe(`ping`,async(e,t)=>[`keyChanged`])}async initializeSender(){if(this.activeServiceWorker=await za(),!this.activeServiceWorker)return;this.sender=new Fa(this.activeServiceWorker);let e=await this.sender._send(`ping`,{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes(`keyChanged`)&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Ba()!==this.activeServiceWorker))try{await this.sender._send(`keyChanged`,{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await Ya();return await Xa(e,ba,`1`),await Qa(e,ba),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Xa(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){let t=await this._withRetries(t=>Za(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Qa(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(e=>new Ka(qa(e,!1).getAll()).toPromise());if(!e||this.pendingWrites!==0)return[];let t=[],n=new Set;if(e.length!==0)for(let{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(let e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$a)}stopPolling(){this.pollTimer&&=(clearInterval(this.pollTimer),null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}};to.type=`LOCAL`;var no=to;function ro(e,t){return nr(e,`POST`,`/v2/accounts/mfaSignIn:start`,tr(e,t))}function io(e,t){return nr(e,`POST`,`/v2/accounts/mfaSignIn:finalize`,tr(e,t))}function ao(e,t){return nr(e,`POST`,`/v2/accounts/mfaSignIn:finalize`,tr(e,t))}li(`rcb`),new Yn(3e4,6e4);var oo=`recaptcha`;async function so(e,t,n){if(!e._getRecaptchaConfig())try{await _i(e)}catch{console.log(`Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.`)}try{let r;if(r=typeof t==`string`?{phoneNumber:t}:t,`session`in r){let t=r.session;if(`phoneNumber`in r)return P(t.type===`enroll`,e,`internal-error`),(await gi(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:`CLIENT_TYPE_WEB`}},`mfaSmsEnrollment`,async(e,t)=>t.phoneEnrollmentInfo.captchaResponse===pi?(P(n?.type===oo,e,`argument-error`),ga(e,await co(e,t,n))):ga(e,t),`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo;{P(t.type===`signin`,e,`internal-error`);let i=r.multiFactorHint?.uid||r.multiFactorUid;return P(i,e,`missing-multi-factor-info`),(await gi(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:i,phoneSignInInfo:{clientType:`CLIENT_TYPE_WEB`}},`mfaSmsSignIn`,async(e,t)=>t.phoneSignInInfo.captchaResponse===pi?(P(n?.type===oo,e,`argument-error`),ro(e,await co(e,t,n))):ro(e,t),`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}else return(await gi(e,{phoneNumber:r.phoneNumber,clientType:`CLIENT_TYPE_WEB`},`sendVerificationCode`,async(e,t)=>t.captchaResponse===pi?(P(n?.type===oo,e,`argument-error`),Ii(e,await co(e,t,n))):Ii(e,t),`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).sessionInfo}finally{n?._reset()}}async function co(e,t,n){P(n.type===oo,e,`argument-error`);let r=await n.verify();P(typeof r==`string`,e,`argument-error`);let i={...t};if(`phoneEnrollmentInfo`in i){let e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,a=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:a}}),i}else if(`phoneSignInInfo`in i){let e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}else return Object.assign(i,{recaptchaToken:r}),i}var lo=class e{constructor(t){this.providerId=e.PROVIDER_ID,this.auth=ni(t)}verifyPhoneNumber(e,t){return so(this.auth,e,Le(t))}static credential(e,t){return Bi._fromVerification(e,t)}static credentialFromResult(t){let n=t;return e.credentialFromTaggedObject(n)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{phoneNumber:t,temporaryProof:n}=e;return t&&n?Bi._fromTokenResponse(t,n):null}};lo.PROVIDER_ID=`phone`,lo.PHONE_SIGN_IN_METHOD=`phone`;function uo(e,t){return t?Nr(t):(P(e._popupRedirectResolver,e,`argument-error`),e._popupRedirectResolver)}var fo=class extends Ti{constructor(e){super(`custom`,`custom`),this.params=e}_getIdTokenResponse(e){return Ni(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ni(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ni(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function po(e){return ra(e.auth,new fo(e),e.bypassAuthState)}function mo(e){let{auth:t,user:n}=e;return P(n,t,`internal-error`),na(n,new fo(e),e.bypassAuthState)}async function ho(e){let{auth:t,user:n}=e;return P(n,t,`internal-error`),ta(n,new fo(e),e.bypassAuthState)}var go=class{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}let s={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(s))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case`signInViaPopup`:case`signInViaRedirect`:return po;case`linkViaPopup`:case`linkViaRedirect`:return ho;case`reauthViaPopup`:case`reauthViaRedirect`:return mo;default:In(this.auth,`internal-error`)}}resolve(e){Un(this.pendingPromise,`Pending promise was never set`),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Un(this.pendingPromise,`Pending promise was never set`),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}},_o=new Yn(2e3,1e4);async function I(e,t,n){if(an(e.app))return Promise.reject(Ln(e,`operation-not-supported-in-this-environment`));let r=ni(e);return Bn(e,t,Gi),new vo(r,`signInViaPopup`,t,uo(r,n)).executeNotNull()}var vo=class e extends go{constructor(t,n,r,i,a){super(t,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,e.currentPopupAction&&e.currentPopupAction.cancel(),e.currentPopupAction=this}async executeNotNull(){let e=await this.execute();return P(e,this.auth,`internal-error`),e}async onExecution(){Un(this.filter.length===1,`Popup operations only handle one event`);let e=Pa();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Ln(this.auth,`web-storage-unsupported`))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ln(this.auth,`cancelled-popup-request`))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,e.currentPopupAction=null}pollUserCancellation(){let e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ln(this.auth,`popup-closed-by-user`))},8e3);return}this.pollId=window.setTimeout(e,_o.get())};e()}};vo.currentPopupAction=null;var yo=`pendingRedirect`,bo=new Map,xo=class extends go{constructor(e,t,n=!1){super(e,[`signInViaRedirect`,`linkViaRedirect`,`reauthViaRedirect`,`unknown`],t,void 0,n),this.eventId=null}async execute(){let e=bo.get(this.auth._key());if(!e){try{let t=await So(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}bo.set(this.auth._key(),e)}return this.bypassAuthState||bo.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type===`signInViaRedirect`)return super.onAuthEvent(e);if(e.type===`unknown`){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function So(e,t){let n=To(t),r=wo(e);if(!await r._isAvailable())return!1;let i=await r._get(n)===`true`;return await r._remove(n),i}function Co(e,t){bo.set(e._key(),t)}function wo(e){return Nr(e._redirectPersistence)}function To(e){return Ir(yo,e.config.apiKey,e.name)}async function Eo(e,t,n=!1){if(an(e.app))return Promise.reject(zn(e));let r=ni(e),i=await new xo(r,uo(r,t),n).execute();return i&&!n&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,t)),i}var Do=600*1e3,Oo=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!jo(e)?t:(this.hasHandledPotentialRedirect=!0,t||=(this.queuedRedirectEvent=e,!0),t)}sendToConsumer(e,t){if(e.error&&!Ao(e)){let n=e.error.code?.split(`auth/`)[1]||`internal-error`;t.onError(Ln(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Do&&this.cachedEventUids.clear(),this.cachedEventUids.has(ko(e))}saveEventToCache(e){this.cachedEventUids.add(ko(e)),this.lastProcessedEventTime=Date.now()}};function ko(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join(`-`)}function Ao({type:e,error:t}){return e===`unknown`&&t?.code===`auth/no-auth-event`}function jo(e){switch(e.type){case`signInViaRedirect`:case`linkViaRedirect`:case`reauthViaRedirect`:return!0;case`unknown`:return Ao(e);default:return!1}}async function Mo(e,t={}){return nr(e,`GET`,`/v1/projects`,t)}var No=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Po=/^https?/;async function Fo(e){if(e.config.emulator)return;let{authorizedDomains:t}=await Mo(e);for(let e of t)try{if(Io(e))return}catch{}In(e,`unauthorized-domain`)}function Io(e){let t=Wn(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith(`chrome-extension://`)){let i=new URL(e);return i.hostname===``&&r===``?n===`chrome-extension:`&&e.replace(`chrome-extension://`,``)===t.replace(`chrome-extension://`,``):n===`chrome-extension:`&&i.hostname===r}if(!Po.test(n))return!1;if(No.test(e))return r===e;let i=e.replace(/\./g,`\\.`);return RegExp(`^(.+\\.`+i+`|`+i+`)$`,`i`).test(r)}var Lo=new Yn(3e4,6e4);function Ro(){let e=Ia().___jsl;if(e?.H){for(let t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}}function zo(e){return new Promise((t,n)=>{function r(){Ro(),gapi.load(`gapi.iframes`,{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Ro(),n(Ln(e,`network-request-failed`))},timeout:Lo.get()})}if(Ia().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(Ia().gapi?.load)r();else{let t=li(`iframefcb`);return Ia()[t]=()=>{gapi.load?r():n(Ln(e,`network-request-failed`))},oi(`${ci()}?onload=${t}`).catch(e=>n(e))}}).catch(e=>{throw Bo=null,e})}var Bo=null;function Vo(e){return Bo||=zo(e),Bo}var Ho=new Yn(5e3,15e3),Uo=`__/auth/iframe`,Wo=`emulator/auth/iframe`,Go={style:{position:`absolute`,top:`-100px`,width:`1px`,height:`1px`},"aria-hidden":`true`,tabindex:`-1`},Ko=new Map([[`identitytoolkit.googleapis.com`,`p`],[`staging-identitytoolkit.sandbox.googleapis.com`,`s`],[`test-identitytoolkit.sandbox.googleapis.com`,`t`]]);function qo(e){let t=e.config;P(t.authDomain,e,`auth-domain-config-required`);let n=t.emulator?Xn(t,Wo):`https://${e.config.authDomain}/${Uo}`,r={apiKey:t.apiKey,appName:e.name,v:cn},i=Ko.get(e.config.apiHost);i&&(r.eid=i);let a=e._getFrameworks();return a.length&&(r.fw=a.join(`,`)),`${n}?${Ae(r).slice(1)}`}async function Jo(e){let t=await Vo(e),n=Ia().gapi;return P(n,e,`internal-error`),t.open({where:document.body,url:qo(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Go,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});let i=Ln(e,`network-request-failed`),a=Ia().setTimeout(()=>{r(i)},Ho.get());function o(){Ia().clearTimeout(a),n(t)}t.ping(o).then(o,()=>{r(i)})}))}var Yo={location:`yes`,resizable:`yes`,statusbar:`yes`,toolbar:`no`},Xo=500,Zo=600,Qo=`_blank`,$o=`http://localhost`,es=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function ts(e,t,n,r=Xo,i=Zo){let a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s=``,c={...Yo,width:r.toString(),height:i.toString(),top:a,left:o},l=fe().toLowerCase();n&&(s=Vr(l)?Qo:n),zr(l)&&(t||=$o,c.scrollbars=`yes`);let u=Object.entries(c).reduce((e,[t,n])=>`${e}${t}=${n},`,``);if(qr(l)&&s!==`_self`)return ns(t||``,s),new es(null);let d=window.open(t||``,s,u);P(d,e,`popup-blocked`);try{d.focus()}catch{}return new es(d)}function ns(e,t){let n=document.createElement(`a`);n.href=e,n.target=t;let r=document.createEvent(`MouseEvent`);r.initMouseEvent(`click`,!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var rs=`__/auth/handler`,is=`emulator/auth/handler`,as=`fac`;async function os(e,t,n,r,i,a){P(e.config.authDomain,e,`auth-domain-config-required`),P(e.config.apiKey,e,`invalid-api-key`);let o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:cn,eventId:i};if(t instanceof Gi){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||``,De(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(let[e,t]of Object.entries(a||{}))o[e]=t}if(t instanceof Ki){let e=t.getScopes().filter(e=>e!==``);e.length>0&&(o.scopes=e.join(`,`))}e.tenantId&&(o.tid=e.tenantId);let s=o;for(let e of Object.keys(s))s[e]===void 0&&delete s[e];let c=await e._getAppCheckToken(),l=c?`#${as}=${encodeURIComponent(c)}`:``;return`${ss(e)}?${Ae(s).slice(1)}${l}`}function ss({config:e}){return e.emulator?Xn(e,is):`https://${e.authDomain}/${rs}`}var cs=`webStorageSupport`,ls=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ja,this._completeRedirectFn=Eo,this._overrideRedirectResult=Co}async _openPopup(e,t,n,r){return Un(this.eventManagers[e._key()]?.manager,`_initialize() not called before _openPopup()`),ts(e,await os(e,t,n,Wn(),r),Pa())}async _openRedirect(e,t,n,r){return await this._originValidation(e),La(await os(e,t,n,Wn(),r)),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Un(n,`If manager is not set, promise should be`),n)}let n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){let t=await Jo(e),n=new Oo(e);return t.register(`authEvent`,t=>(P(t?.authEvent,e,`invalid-auth-event`),{status:n.onEvent(t.authEvent)?`ACK`:`ERROR`}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(cs,{type:cs},n=>{let r=n?.[0]?.[cs];r!==void 0&&t(!!r),In(e,`internal-error`)},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Fo(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Yr()||Br()||Kr()}},us=class{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case`enroll`:return this._finalizeEnroll(e,t.credential,n);case`signin`:return this._finalizeSignIn(e,t.credential);default:return Hn(`unexpected MultiFactorSessionType`)}}},ds=class e extends us{constructor(e){super(`phone`),this.credential=e}static _fromCredential(t){return new e(t)}_finalizeEnroll(e,t,n){return _a(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return io(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},fs=class{constructor(){}static assertion(e){return ds._fromCredential(e)}};fs.FACTOR_ID=`phone`;var ps=class{static assertionForEnrollment(e,t){return ms._fromSecret(e,t)}static assertionForSignIn(e,t){return ms._fromEnrollmentId(e,t)}static async generateSecret(e){let t=e;P(t.user?.auth!==void 0,`internal-error`);let n=await va(t.user.auth,{idToken:t.credential,totpEnrollmentInfo:{}});return hs._fromStartTotpMfaEnrollmentResponse(n,t.user.auth)}};ps.FACTOR_ID=`totp`;var ms=class e extends us{constructor(e,t,n){super(`totp`),this.otp=e,this.enrollmentId=t,this.secret=n}static _fromSecret(t,n){return new e(n,void 0,t)}static _fromEnrollmentId(t,n){return new e(n,t)}async _finalizeEnroll(e,t,n){return P(this.secret!==void 0,e,`argument-error`),ya(e,{idToken:t,displayName:n,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,t){P(this.enrollmentId!==void 0&&this.otp!==void 0,e,`argument-error`);let n={verificationCode:this.otp};return ao(e,{mfaPendingCredential:t,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:n})}},hs=class e{constructor(e,t,n,r,i,a,o){this.sessionInfo=a,this.auth=o,this.secretKey=e,this.hashingAlgorithm=t,this.codeLength=n,this.codeIntervalSeconds=r,this.enrollmentCompletionDeadline=i}static _fromStartTotpMfaEnrollmentResponse(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,t){let n=!1;return(gs(e)||gs(t))&&(n=!0),n&&(gs(e)&&(e=this.auth.currentUser?.email||`unknownuser`),gs(t)&&(t=this.auth.name)),`otpauth://totp/${t}:${e}?secret=${this.secretKey}&issuer=${t}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}};function gs(e){return e===void 0||e?.length===0}var _s=`@firebase/auth`,vs=`1.12.0`,ys=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(t=>{e(t?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){P(this.auth._initializationPromise,`dependent-sdk-initialized-before-auth`)}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function bs(e){switch(e){case`Node`:return`node`;case`ReactNative`:return`rn`;case`Worker`:return`webworker`;case`Cordova`:return`cordova`;case`WebExtension`:return`web-extension`;default:return}}function xs(e){nn(new Re(`auth`,(t,{options:n})=>{let r=t.getProvider(`app`).getImmediate(),i=t.getProvider(`heartbeat`),a=t.getProvider(`app-check-internal`),{apiKey:o,authDomain:s}=r.options;P(o&&!o.includes(`:`),`invalid-api-key`,{appName:r.name});let c=new ti(r,i,a,{apiKey:o,authDomain:s,clientPlatform:e,apiHost:`identitytoolkit.googleapis.com`,tokenApiHost:`securetoken.googleapis.com`,apiScheme:`https`,sdkClientVersion:Xr(e)});return yi(c,n),c},`PUBLIC`).setInstantiationMode(`EXPLICIT`).setInstanceCreatedCallback((e,t,n)=>{e.getProvider(`auth-internal`).initialize()})),nn(new Re(`auth-internal`,e=>(e=>new ys(e))(ni(e.getProvider(`auth`).getImmediate())),`PRIVATE`).setInstantiationMode(`EXPLICIT`)),fn(_s,vs,bs(e)),fn(_s,vs,`esm2020`)}var Ss=ie(`authIdTokenMaxAge`)||300,Cs=null,ws=e=>async t=>{let n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Ss)return;let i=n?.token;Cs!==i&&(Cs=i,await fetch(e,{method:i?`POST`:`DELETE`,headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Ts(e=un()){let t=rn(e,`auth`);if(t.isInitialized())return t.getImmediate();let n=vi(e,{popupRedirectResolver:ls,persistence:[no,Ta,ja]}),r=ie(`authTokenSyncURL`);if(r&&typeof isSecureContext==`boolean`&&isSecureContext){let e=new URL(r,location.origin);if(location.origin===e.origin){let t=ws(e.toString());ma(n,t,()=>t(n.currentUser)),pa(n,e=>t(e))}}let i=te(`auth`);return i&&bi(n,`http://${i}`),n}function Es(){return document.getElementsByTagName(`head`)?.[0]??document}ai({loadJS(e){return new Promise((t,n)=>{let r=document.createElement(`script`);r.setAttribute(`src`,e),r.onload=t,r.onerror=e=>{let t=Ln(`internal-error`);t.customData=e,n(t)},r.type=`text/javascript`,r.charset=`UTF-8`,Es().appendChild(r)})},gapiScript:`https://apis.google.com/js/api.js`,recaptchaV2Script:`https://www.google.com/recaptcha/api.js`,recaptchaEnterpriseScript:`https://www.google.com/recaptcha/enterprise.js?render=`}),xs(`Browser`),fn(`firebase`,`12.9.0`,`app`);var Ds=typeof globalThis<`u`?globalThis:typeof window<`u`?window:typeof global<`u`?global:typeof self<`u`?self:{},Os={},ks,As;(function(){var e;function t(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=[,,,,],this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(e,t,n){n||=0;let r=Array(16);if(typeof t==`string`)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let a=e.g[3],o;o=t+(a^n&(i^a))+r[0]+3614090360&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[1]+3905402710&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[2]+606105819&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[4]+4118548399&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[5]+1200080426&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[6]+2821735955&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[8]+1770035416&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[9]+2336552879&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[10]+4294925233&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[12]+1804603682&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[13]+4254626195&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[14]+2792965006&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(i^a&(n^i))+r[1]+4129170786&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[6]+3225465664&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[11]+643717713&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[5]+3593408605&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[10]+38016083&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[15]+3634488961&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[9]+568446438&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[14]+3275163606&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[3]+4107603335&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[13]+2850285829&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[2]+4243563512&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[7]+1735328473&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(n^i^a)+r[5]+4294588738&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[8]+2272392833&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[11]+1839030562&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[1]+2763975236&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[4]+1272893353&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[7]+4139469664&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[13]+681279174&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[0]+3936430074&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[3]+3572445317&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[9]+3654602809&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[12]+3873151461&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[15]+530742520&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(i^(n|~a))+r[0]+4096336452&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[7]+1126891415&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[14]+2878612391&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[12]+1700485571&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[3]+2399980690&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[10]+4293915773&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[8]+1873313359&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[15]+4264355552&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[6]+2734768916&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[4]+4149444226&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[11]+3174756917&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[2]+718787259&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}r.prototype.v=function(e,t){t===void 0&&(t=e.length);let n=t-this.blockSize,r=this.C,a=this.h,o=0;for(;o<t;){if(a==0)for(;o<=n;)i(this,e,o),o+=this.blockSize;if(typeof e==`string`){for(;o<t;)if(r[a++]=e.charCodeAt(o++),a==this.blockSize){i(this,r),a=0;break}}else for(;o<t;)if(r[a++]=e[o++],a==this.blockSize){i(this,r),a=0;break}}this.h=a,this.o+=t},r.prototype.A=function(){var e=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=this.o*8;for(var n=e.length-8;n<e.length;++n)e[n]=t&255,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};function a(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}function o(e,t){this.h=t;let n=[],r=!0;for(let i=e.length-1;i>=0;i--){let a=e[i]|0;r&&a==t||(n[i]=a,r=!1)}this.g=n}var s={};function c(e){return-128<=e&&e<128?a(e,function(e){return new o([e|0],e<0?-1:0)}):new o([e|0],e<0?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return d;if(e<0)return g(l(-e));let t=[],n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new o(t,0)}function u(e,t){if(e.length==0)throw Error(`number format error: empty string`);if(t||=10,t<2||36<t)throw Error(`radix out of range: `+t);if(e.charAt(0)==`-`)return g(u(e.substring(1),t));if(e.indexOf(`-`)>=0)throw Error(`number format error: interior "-" character`);let n=l(t**8),r=d;for(let a=0;a<e.length;a+=8){var i=Math.min(8,e.length-a);let o=parseInt(e.substring(a,a+i),t);i<8?(i=l(t**+i),r=r.j(i).add(l(o))):(r=r.j(n),r=r.add(l(o)))}return r}var d=c(0),f=c(1),p=c(16777216);e=o.prototype,e.m=function(){if(h(this))return-g(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){let r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(e||=10,e<2||36<e)throw Error(`radix out of range: `+e);if(m(this))return`0`;if(h(this))return`-`+g(this).toString(e);let t=l(e**6);var n=this;let r=``;for(;;){let i=b(n,t).g;n=_(n,i.j(t));let a=((n.g.length>0?n.g[0]:n.h)>>>0).toString(e);if(n=i,m(n))return a+r;for(;a.length<6;)a=`0`+a;r=a+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h};function m(e){if(e.h!=0)return!1;for(let t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function h(e){return e.h==-1}e.l=function(e){return e=_(this,e),h(e)?-1:m(e)?0:1};function g(e){let t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new o(n,~e.h).add(f)}e.abs=function(){return h(this)?g(this):this},e.add=function(e){let t=Math.max(this.g.length,e.g.length),n=[],r=0;for(let i=0;i<=t;i++){let t=r+(this.i(i)&65535)+(e.i(i)&65535),a=(t>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);r=a>>>16,t&=65535,a&=65535,n[i]=a<<16|t}return new o(n,n[n.length-1]&-2147483648?-1:0)};function _(e,t){return e.add(g(t))}e.j=function(e){if(m(this)||m(e))return d;if(h(this))return h(e)?g(this).j(g(e)):g(g(this).j(e));if(h(e))return g(this.j(g(e)));if(this.l(p)<0&&e.l(p)<0)return l(this.m()*e.m());let t=this.g.length+e.g.length,n=[];for(var r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(let t=0;t<e.g.length;t++){let i=this.i(r)>>>16,a=this.i(r)&65535,o=e.i(t)>>>16,s=e.i(t)&65535;n[2*r+2*t]+=a*s,v(n,2*r+2*t),n[2*r+2*t+1]+=i*s,v(n,2*r+2*t+1),n[2*r+2*t+1]+=a*o,v(n,2*r+2*t+1),n[2*r+2*t+2]+=i*o,v(n,2*r+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new o(n,0)};function v(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function y(e,t){this.g=e,this.h=t}function b(e,t){if(m(t))throw Error(`division by zero`);if(m(e))return new y(d,d);if(h(e))return t=b(g(e),t),new y(g(t.g),g(t.h));if(h(t))return t=b(e,g(t)),new y(g(t.g),t.h);if(e.g.length>30){if(h(e)||h(t))throw Error(`slowDivide_ only works with positive integers.`);for(var n=f,r=t;r.l(e)<=0;)n=x(n),r=x(r);var i=S(n,1),a=S(r,1);for(r=S(r,2),n=S(n,2);!m(r);){var o=a.add(r);o.l(e)<=0&&(i=i.add(n),a=o),r=S(r,1),n=S(n,1)}return t=_(e,i.j(t)),new y(i,t)}for(i=d;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=Math.ceil(Math.log(n)/Math.LN2),r=r<=48?1:2**(r-48),a=l(n),o=a.j(t);h(o)||o.l(e)>0;)n-=r,a=l(n),o=a.j(t);m(a)&&(a=f),i=i.add(a),e=_(e,o)}return new y(i,e)}e.B=function(e){return b(this,e).h},e.and=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new o(n,this.h&e.h)},e.or=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new o(n,this.h|e.h)},e.xor=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new o(n,this.h^e.h)};function x(e){let t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new o(n,e.h)}function S(e,t){let n=t>>5;t%=32;let r=e.g.length-n,i=[];for(let a=0;a<r;a++)i[a]=t>0?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new o(i,e.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,As=Os.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=u,ks=Os.Integer=o}).apply(Ds===void 0?typeof self<`u`?self:typeof window<`u`?window:{}:Ds);var js=typeof globalThis<`u`?globalThis:typeof window<`u`?window:typeof global<`u`?global:typeof self<`u`?self:{},Ms={},Ns,Ps,Fs,Is,Ls,Rs,zs,Bs;(function(){var e,t=Object.defineProperty;function n(e){e=[typeof globalThis==`object`&&globalThis,e,typeof window==`object`&&window,typeof self==`object`&&self,typeof js==`object`&&js];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error(`Cannot find global object`)}var r=n(this);function i(e,n){if(n)a:{var i=r;e=e.split(`.`);for(var a=0;a<e.length-1;a++){var o=e[a];if(!(o in i))break a;i=i[o]}e=e[e.length-1],a=i[e],n=n(a),n!=a&&n!=null&&t(i,e,{configurable:!0,writable:!0,value:n})}}i(`Symbol.dispose`,function(e){return e||Symbol(`Symbol.dispose`)}),i(`Array.prototype.values`,function(e){return e||function(){return this[Symbol.iterator]()}}),i(`Object.entries`,function(e){return e||function(e){var t=[],n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push([n,e[n]]);return t}});var a=a||{},o=this||self;function s(e){var t=typeof e;return t==`object`&&e!=null||t==`function`}function c(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return l=c,l.apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}var f=typeof AsyncContext<`u`&&typeof AsyncContext.Snapshot==`function`?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function p(e){let t=e.length;if(t>0){let n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function m(e,t){for(let t=1;t<arguments.length;t++){let r=arguments[t];var n=typeof r;if(n=n==`object`?r?Array.isArray(r)?`array`:n:`null`:n,n==`array`||n==`object`&&typeof r.length==`number`){n=e.length||0;let t=r.length||0;e.length=n+t;for(let i=0;i<t;i++)e[n+i]=r[i]}else e.push(r)}}class h{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function g(e){o.setTimeout(()=>{throw e},0)}function _(){var e=C;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class v{constructor(){this.h=this.g=null}add(e,t){let n=y.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}var y=new h(()=>new b,e=>e.reset());class b{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let x,S=!1,C=new v,w=()=>{let e=Promise.resolve(void 0);x=()=>{e.then(T)}};function T(){for(var e;e=_();){try{e.h.call(e.g)}catch(e){g(e)}var t=y;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}S=!1}function E(){this.u=this.u,this.C=this.C}E.prototype.u=!1,E.prototype.dispose=function(){this.u||(this.u=!0,this.N())},E.prototype[Symbol.dispose]=function(){this.dispose()},E.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},`passive`,{get:function(){e=!0}});try{let e=()=>{};o.addEventListener(`test`,e,t),o.removeEventListener(`test`,e,t)}catch{}return e}();function ee(e){return/^[\s\xa0]*$/.test(e)}function k(e,t){D.call(this,e?e.type:``),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key=``,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType=``,this.i=null,e&&this.init(e,t)}d(k,D),k.prototype.init=function(e,t){let n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget,t||(n==`mouseover`?t=e.fromElement:n==`mouseout`&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=r.clientX===void 0?r.pageX:r.clientX,this.clientY=r.clientY===void 0?r.pageY:r.clientY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX===void 0?e.pageX:e.clientX,this.clientY=e.clientY===void 0?e.pageY:e.clientY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||``,this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&k.Z.h.call(this)},k.prototype.h=function(){k.Z.h.call(this);let e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var te=`closure_listenable_`+(Math.random()*1e6|0),ne=0;function re(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++ne,this.da=this.fa=!1}function ie(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function ae(e,t,n){for(let r in e)t.call(n,e[r],r,e)}function A(e,t){for(let n in e)t.call(void 0,e[n],n,e)}function j(e){let t={};for(let n in e)t[n]=e[n];return t}let oe=`constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf`.split(` `);function se(e,t){let n,r;for(let t=1;t<arguments.length;t++){for(n in r=arguments[t],r)e[n]=r[n];for(let t=0;t<oe.length;t++)n=oe[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function ce(e){this.src=e,this.g={},this.h=0}ce.prototype.add=function(e,t,n,r,i){let a=e.toString();e=this.g[a],e||(e=this.g[a]=[],this.h++);let o=ue(e,t,r,i);return o>-1?(t=e[o],n||(t.fa=!1)):(t=new re(t,this.src,a,!!r,i),t.fa=n,e.push(t)),t};function le(e,t){let n=t.type;if(n in e.g){var r=e.g[n],i=Array.prototype.indexOf.call(r,t,void 0),a;(a=i>=0)&&Array.prototype.splice.call(r,i,1),a&&(ie(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function ue(e,t,n,r){for(let i=0;i<e.length;++i){let a=e[i];if(!a.da&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}var de=`closure_lm_`+(Math.random()*1e6|0),fe={};function pe(e,t,n,r,i){if(r&&r.once)return ge(e,t,n,r,i);if(Array.isArray(t)){for(let a=0;a<t.length;a++)pe(e,t[a],n,r,i);return null}return n=Ce(n),e&&e[te]?e.J(t,n,s(r)?!!r.capture:!!r,i):me(e,t,n,!1,r,i)}function me(e,t,n,r,i,a){if(!t)throw Error(`Invalid event type`);let o=s(i)?!!i.capture:!!i,c=xe(e);if(c||(e[de]=c=new ce(e)),n=c.add(t,n,r,o,a),n.proxy)return n;if(r=he(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)O||(i=o),i===void 0&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ye(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error(`addEventListener and attachEvent are unavailable.`);return n}function he(){function e(n){return t.call(e.src,e.listener,n)}let t=be;return e}function ge(e,t,n,r,i){if(Array.isArray(t)){for(let a=0;a<t.length;a++)ge(e,t[a],n,r,i);return null}return n=Ce(n),e&&e[te]?e.K(t,n,s(r)?!!r.capture:!!r,i):me(e,t,n,!0,r,i)}function _e(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)_e(e,t[a],n,r,i);else r=s(r)?!!r.capture:!!r,n=Ce(n),e&&e[te]?(e=e.i,a=String(t).toString(),a in e.g&&(t=e.g[a],n=ue(t,n,r,i),n>-1&&(ie(t[n]),Array.prototype.splice.call(t,n,1),t.length==0&&(delete e.g[a],e.h--)))):(e&&=xe(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ue(t,n,r,i)),(n=e>-1?t[e]:null)&&ve(n))}function ve(e){if(typeof e!=`number`&&e&&!e.da){var t=e.src;if(t&&t[te])le(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ye(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=xe(t))?(le(n,e),n.h==0&&(n.src=null,t[de]=null)):ie(e)}}}function ye(e){return e in fe?fe[e]:fe[e]=`on`+e}function be(e,t){if(e.da)e=!0;else{t=new k(t,this);let n=e.listener,r=e.ha||e.src;e.fa&&ve(e),e=n.call(r,t)}return e}function xe(e){return e=e[de],e instanceof ce?e:null}var Se=`__closure_events_fn_`+(Math.random()*1e9>>>0);function Ce(e){return typeof e==`function`?e:(e[Se]||(e[Se]=function(t){return e.handleEvent(t)}),e[Se])}function we(){E.call(this),this.i=new ce(this),this.M=this,this.G=null}d(we,E),we.prototype[te]=!0,we.prototype.removeEventListener=function(e,t,n,r){_e(this,e,t,n,r)};function Te(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,typeof t==`string`)t=new D(t,e);else if(t instanceof D)t.target=t.target||e;else{var i=t;t=new D(r,e),se(t,i)}i=!0;let a,o;if(n)for(o=n.length-1;o>=0;o--)a=t.g=n[o],i=Ee(a,r,!0,t)&&i;if(a=t.g=e,i=Ee(a,r,!0,t)&&i,i=Ee(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)a=t.g=n[o],i=Ee(a,r,!1,t)&&i}we.prototype.N=function(){if(we.Z.N.call(this),this.i){var e=this.i;for(let t in e.g){let n=e.g[t];for(let e=0;e<n.length;e++)ie(n[e]);delete e.g[t],e.h--}}this.G=null},we.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},we.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function Ee(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();let i=!0;for(let a=0;a<t.length;++a){let o=t[a];if(o&&!o.da&&o.capture==n){let t=o.listener,n=o.ha||o.src;o.fa&&le(e.i,o),i=t.call(n,r)!==!1&&i}}return i&&!r.defaultPrevented}function De(e,t){if(typeof e!=`function`)if(e&&typeof e.handleEvent==`function`)e=l(e.handleEvent,e);else throw Error(`Invalid listener argument`);return Number(t)>2147483647?-1:o.setTimeout(e,t||0)}function Oe(e){e.g=De(()=>{e.g=null,e.i&&(e.i=!1,Oe(e))},e.l);let t=e.h;e.h=null,e.m.apply(null,t)}class ke extends E{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:Oe(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ae(e){E.call(this),this.h=e,this.g={}}d(Ae,E);var je=[];function Me(e){ae(e.g,function(e,t){this.g.hasOwnProperty(t)&&ve(e)},e),e.g={}}Ae.prototype.N=function(){Ae.Z.N.call(this),Me(this)},Ae.prototype.handleEvent=function(){throw Error(`EventHandler.handleEvent not implemented`)};var Ne=o.JSON.stringify,Pe=o.JSON.parse,Fe=class{stringify(e){return o.JSON.stringify(e,void 0)}parse(e){return o.JSON.parse(e,void 0)}};function Ie(){}function Le(){}var Re={OPEN:`a`,hb:`b`,ERROR:`c`,tb:`d`};function ze(){D.call(this,`d`)}d(ze,D);function Be(){D.call(this,`c`)}d(Be,D);var Ve={},He=null;function Ue(){return He||=new we}Ve.Ia=`serverreachability`;function We(e){D.call(this,Ve.Ia,e)}d(We,D);function M(e){let t=Ue();Te(t,new We(t))}Ve.STAT_EVENT=`statevent`;function Ge(e,t){D.call(this,Ve.STAT_EVENT,e),this.stat=t}d(Ge,D);function Ke(e){let t=Ue();Te(t,new Ge(t,e))}Ve.Ja=`timingevent`;function qe(e,t){D.call(this,Ve.Ja,e),this.size=t}d(qe,D);function Je(e,t){if(typeof e!=`function`)throw Error(`Fn must not be null and must be a function`);return o.setTimeout(function(){e()},t)}function Ye(){this.g=!0}Ye.prototype.ua=function(){this.g=!1};function Xe(e,t,n,r,i,a){e.info(function(){if(e.g)if(a){var o=``,s=a.split(`&`);for(let e=0;e<s.length;e++){var c=s[e].split(`=`);if(c.length>1){let e=c[0];c=c[1];let t=e.split(`_`);o=t.length>=2&&t[1]==`type`?o+(e+`=`+c+`&`):o+(e+`=redacted&`)}}}else o=null;else o=a;return`XMLHTTP REQ (`+r+`) [attempt `+i+`]: `+t+`
`+n+`
`+o})}function Ze(e,t,n,r,i,a,o){e.info(function(){return`XMLHTTP RESP (`+r+`) [ attempt `+i+`]: `+t+`
`+n+`
`+a+` `+o})}function Qe(e,t,n,r){e.info(function(){return`XMLHTTP TEXT (`+t+`): `+et(e,n)+(r?` `+r:``)})}function $e(e,t){e.info(function(){return`TIMEOUT: `+t})}Ye.prototype.info=function(){};function et(e,t){if(!e.g)return t;if(!t)return null;try{let a=JSON.parse(t);if(a){for(e=0;e<a.length;e++)if(Array.isArray(a[e])){var n=a[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if(i!=`noop`&&i!=`stop`&&i!=`close`)for(let e=1;e<r.length;e++)r[e]=``}}}}return Ne(a)}catch{return t}}var tt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},nt={ib:`complete`,Fb:`success`,ERROR:`error`,Ga:`abort`,xb:`ready`,yb:`readystatechange`,TIMEOUT:`timeout`,sb:`incrementaldata`,wb:`progress`,lb:`downloadprogress`,Nb:`uploadprogress`},rt;function it(){}d(it,Ie),it.prototype.g=function(){return new XMLHttpRequest},rt=new it;function at(e){return encodeURIComponent(String(e))}function ot(e){var t=1;e=e.split(`:`);let n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(`:`)),n}function st(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new Ae(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ct}function ct(){this.i=null,this.g=``,this.h=!1}var lt={},ut={};function dt(e,t,n){e.M=1,e.A=Lt(Nt(t)),e.u=n,e.R=!0,ft(e,null)}function ft(e,t){e.F=Date.now(),gt(e),e.B=Nt(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),Zt(n.i,`t`,r),e.C=0,n=e.j.L,e.h=new ct,e.g=Hn(e.j,n?t:null,!e.u),e.P>0&&(e.O=new ke(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i=`readystatechange`;Array.isArray(i)||(i&&(je[0]=i.toString()),i=je);for(let e=0;e<i.length;e++){let a=pe(n,i[e],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.J?j(e.J):{},e.u?(e.v||=`POST`,t[`Content-Type`]=`application/x-www-form-urlencoded`,e.g.ea(e.B,e.v,e.u,t)):(e.v=`GET`,e.g.ea(e.B,e.v,null,t)),M(),Xe(e.i,e.v,e.B,e.l,e.S,e.u)}st.prototype.ba=function(e){e=e.target;let t=this.O;t&&bn(e)==3?t.j():this.Y(e)},st.prototype.Y=function(e){try{if(e==this.g)a:{let s=bn(this.g),c=this.g.ya(),l=this.g.ca();if(!(s<3)&&(s!=3||this.g&&(this.h.h||this.g.la()||xn(this.g)))){this.K||s!=4||c==7||M(c==8||l<=0?3:2),vt(this);var t=this.g.ca();this.X=t;var n=pt(this);if(this.o=t==200,Ze(this.i,this.v,this.B,this.l,this.S,s,t),this.o){if(this.U&&!this.L){b:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader(`X-HTTP-Initial-Response`):null)&&!ee(r)){var a=r;break b}}a=null}if(e=a)Qe(this.i,this.l,e,`Initial handshake response via X-HTTP-Initial-Response`),this.L=!0,xt(this,e);else{this.o=!1,this.m=3,Ke(12),bt(this),yt(this);break a}}if(this.R){e=!0;let t;for(;!this.K&&this.C<n.length;)if(t=ht(this,n),t==ut){s==4&&(this.m=4,Ke(14),e=!1),Qe(this.i,this.l,null,`[Incomplete Response]`);break}else if(t==lt){this.m=4,Ke(15),Qe(this.i,this.l,n,`[Invalid Chunk]`),e=!1;break}else Qe(this.i,this.l,t,null),xt(this,t);if(mt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),s!=4||n.length!=0||this.h.h||(this.m=1,Ke(16),e=!1),this.o=this.o&&e,!e)Qe(this.i,this.l,n,`[Invalid Chunked Response]`),bt(this),yt(this);else if(n.length>0&&!this.W){this.W=!0;var o=this.j;o.g==this&&o.aa&&!o.P&&(o.j.info(`Great, no buffering proxy detected. Bytes received: `+n.length),Fn(o),o.P=!0,Ke(11))}}else Qe(this.i,this.l,n,null),xt(this,n);s==4&&bt(this),this.o&&!this.K&&(s==4?Rn(this.j,this):(this.o=!1,gt(this)))}else Sn(this.g),t==400&&n.indexOf(`Unknown SID`)>0?(this.m=3,Ke(12)):(this.m=0,Ke(13)),bt(this),yt(this)}}}catch{}};function pt(e){if(!mt(e))return e.g.la();let t=xn(e.g);if(t===``)return``;let n=``,r=t.length,i=bn(e.g)==4;if(!e.h.i){if(typeof TextDecoder>`u`)return bt(e),yt(e),``;e.h.i=new o.TextDecoder}for(let a=0;a<r;a++)e.h.h=!0,n+=e.h.i.decode(t[a],{stream:!(i&&a==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}function mt(e){return e.g?e.v==`GET`&&e.M!=2&&e.j.Aa:!1}function ht(e,t){var n=e.C,r=t.indexOf(`
`,n);return r==-1?ut:(n=Number(t.substring(n,r)),isNaN(n)?lt:(r+=1,r+n>t.length?ut:(t=t.slice(r,r+n),e.C=r+n,t)))}st.prototype.cancel=function(){this.K=!0,bt(this)};function gt(e){e.T=Date.now()+e.H,_t(e,e.H)}function _t(e,t){if(e.D!=null)throw Error(`WatchDog timer not null`);e.D=Je(l(e.aa,e),t)}function vt(e){e.D&&=(o.clearTimeout(e.D),null)}st.prototype.aa=function(){this.D=null;let e=Date.now();e-this.T>=0?($e(this.i,this.B),this.M!=2&&(M(),Ke(17)),bt(this),this.m=2,yt(this)):_t(this,this.T-e)};function yt(e){e.j.I==0||e.K||Rn(e.j,e)}function bt(e){vt(e);var t=e.O;t&&typeof t.dispose==`function`&&t.dispose(),e.O=null,Me(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function xt(e,t){try{var n=e.j;if(n.I!=0&&(n.g==e||Et(n.h,e))){if(!e.L&&Et(n.h,e)&&n.I==3){try{var r=n.Ba.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){a:if(!n.v){if(n.g)if(n.g.F+3e3<e.F)Ln(n),En(n);else break a;Pn(n),Ke(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&n.A==0&&!n.C&&(n.C=Je(l(n.Va,n),6e3));Tt(n.h)<=1&&n.ta&&(n.ta=void 0)}else Bn(n,11)}else if((e.L||n.g==e)&&Ln(n),!ee(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t],u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],n.I==2)if(l[0]==`c`){n.M=l[1],n.ba=l[2];let t=l[3];t!=null&&(n.ka=t,n.j.info(`VER=`+n.ka));let i=l[4];i!=null&&(n.za=i,n.j.info(`SVER=`+n.za));let u=l[5];u!=null&&typeof u==`number`&&u>0&&(r=1.5*u,n.O=r,n.j.info(`backChannelRequestTimeoutMs_=`+r)),r=n;let d=e.g;if(d){let e=d.g?d.g.getResponseHeader(`X-Client-Wire-Protocol`):null;if(e){var a=r.h;a.g||e.indexOf(`spdy`)==-1&&e.indexOf(`quic`)==-1&&e.indexOf(`h2`)==-1||(a.j=a.l,a.g=new Set,a.h&&=(Dt(a,a.h),null))}if(r.G){let e=d.g?d.g.getResponseHeader(`X-HTTP-Session-Id`):null;e&&(r.wa=e,N(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info(`Handshake RTT: `+n.T+`ms`)),r=n;var o=e;if(r.na=P(r,r.L?r.ba:null,r.W),o.L){Ot(r.h,o);var s=o,c=r.O;c&&(s.H=c),s.D&&(vt(s),gt(s)),r.g=o}else Nn(r);n.i.length>0&&On(n)}else l[0]!=`stop`&&l[0]!=`close`||Bn(n,7);else n.I==3&&(l[0]==`stop`||l[0]==`close`?l[0]==`stop`?Bn(n,7):Tn(n):l[0]!=`noop`&&n.l&&n.l.qa(l),n.A=0)}}M(4)}catch{}}var St=class{constructor(e,t){this.g=e,this.map=t}};function Ct(e){this.l=e||10,o.PerformanceNavigationTiming?(e=o.performance.getEntriesByType(`navigation`),e=e.length>0&&(e[0].nextHopProtocol==`hq`||e[0].nextHopProtocol==`h2`)):e=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function wt(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function Tt(e){return e.h?1:e.g?e.g.size:0}function Et(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function Dt(e,t){e.g?e.g.add(t):e.h=t}function Ot(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}Ct.prototype.cancel=function(){if(this.i=kt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let e of this.g.values())e.cancel();this.g.clear()}};function kt(e){if(e.h!=null)return e.i.concat(e.h.G);if(e.g!=null&&e.g.size!==0){let t=e.i;for(let n of e.g.values())t=t.concat(n.G);return t}return p(e.i)}var At=RegExp(`^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$`);function jt(e,t){if(e){e=e.split(`&`);for(let n=0;n<e.length;n++){let r=e[n].indexOf(`=`),i,a=null;r>=0?(i=e[n].substring(0,r),a=e[n].substring(r+1)):i=e[n],t(i,a?decodeURIComponent(a.replace(/\+/g,` `)):``)}}}function Mt(e){this.g=this.o=this.j=``,this.u=null,this.m=this.h=``,this.l=!1;let t;e instanceof Mt?(this.l=e.l,Pt(this,e.j),this.o=e.o,this.g=e.g,Ft(this,e.u),this.h=e.h,It(this,Qt(e.i)),this.m=e.m):e&&(t=String(e).match(At))?(this.l=!1,Pt(this,t[1]||``,!0),this.o=Rt(t[2]||``),this.g=Rt(t[3]||``,!0),Ft(this,t[4]),this.h=Rt(t[5]||``,!0),It(this,t[6]||``,!0),this.m=Rt(t[7]||``)):(this.l=!1,this.i=new Kt(null,this.l))}Mt.prototype.toString=function(){let e=[];var t=this.j;t&&e.push(zt(t,Vt,!0),`:`);var n=this.g;return(n||t==`file`)&&(e.push(`//`),(t=this.o)&&e.push(zt(t,Vt,!0),`@`),e.push(at(n).replace(/%25([0-9a-fA-F]{2})/g,`%$1`)),n=this.u,n!=null&&e.push(`:`,String(n))),(n=this.h)&&(this.g&&n.charAt(0)!=`/`&&e.push(`/`),e.push(zt(n,n.charAt(0)==`/`?Ut:Ht,!0))),(n=this.i.toString())&&e.push(`?`,n),(n=this.m)&&e.push(`#`,zt(n,Gt)),e.join(``)},Mt.prototype.resolve=function(e){let t=Nt(this),n=!!e.j;n?Pt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=e.u!=null;var r=e.h;if(n)Ft(t,e.u);else if(n=!!e.h){if(r.charAt(0)!=`/`)if(this.g&&!this.h)r=`/`+r;else{var i=t.h.lastIndexOf(`/`);i!=-1&&(r=t.h.slice(0,i+1)+r)}if(i=r,i==`..`||i==`.`)r=``;else if(i.indexOf(`./`)!=-1||i.indexOf(`/.`)!=-1){r=i.lastIndexOf(`/`,0)==0,i=i.split(`/`);let e=[];for(let t=0;t<i.length;){let n=i[t++];n==`.`?r&&t==i.length&&e.push(``):n==`..`?((e.length>1||e.length==1&&e[0]!=``)&&e.pop(),r&&t==i.length&&e.push(``)):(e.push(n),r=!0)}r=e.join(`/`)}else r=i}return n?t.h=r:n=e.i.toString()!==``,n?It(t,Qt(e.i)):n=!!e.m,n&&(t.m=e.m),t};function Nt(e){return new Mt(e)}function Pt(e,t,n){e.j=n?Rt(t,!0):t,e.j&&=e.j.replace(/:$/,``)}function Ft(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error(`Bad port number `+t);e.u=t}else e.u=null}function It(e,t,n){t instanceof Kt?(e.i=t,en(e.i,e.l)):(n||(t=zt(t,Wt)),e.i=new Kt(t,e.l))}function N(e,t,n){e.i.set(t,n)}function Lt(e){return N(e,`zx`,Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),e}function Rt(e,t){return e?t?decodeURI(e.replace(/%25/g,`%2525`)):decodeURIComponent(e):``}function zt(e,t,n){return typeof e==`string`?(e=encodeURI(e).replace(t,Bt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,`%$1`)),e):null}function Bt(e){return e=e.charCodeAt(0),`%`+(e>>4&15).toString(16)+(e&15).toString(16)}var Vt=/[#\/\?@]/g,Ht=/[#\?:]/g,Ut=/[#\?]/g,Wt=/[#\?@]/g,Gt=/#/g;function Kt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function qt(e){e.g||(e.g=new Map,e.h=0,e.i&&jt(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g,` `)),n)}))}e=Kt.prototype,e.add=function(e,t){qt(this),this.i=null,e=$t(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function Jt(e,t){qt(e),t=$t(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Yt(e,t){return qt(e),t=$t(e,t),e.g.has(t)}e.forEach=function(e,t){qt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)};function Xt(e,t){qt(e);let n=[];if(typeof t==`string`)Yt(e,t)&&(n=n.concat(e.g.get($t(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}e.set=function(e,t){return qt(this),this.i=null,e=$t(this,e),Yt(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e?(e=Xt(this,e),e.length>0?String(e[0]):t):t};function Zt(e,t,n){Jt(e,t),n.length>0&&(e.i=null,e.g.set($t(e,t),p(n)),e.h+=n.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return``;let e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];let i=at(n);n=Xt(this,n);for(let t=0;t<n.length;t++){let r=i;n[t]!==``&&(r+=`=`+at(n[t])),e.push(r)}}return this.i=e.join(`&`)};function Qt(e){let t=new Kt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function $t(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function en(e,t){t&&!e.j&&(qt(e),e.i=null,e.g.forEach(function(e,t){let n=t.toLowerCase();t!=n&&(Jt(this,t),Zt(this,n,e))},e)),e.j=t}function tn(e,t){let n=new Ye;if(o.Image){let r=new Image;r.onload=u(rn,n,`TestLoadImage: loaded`,!0,t,r),r.onerror=u(rn,n,`TestLoadImage: error`,!1,t,r),r.onabort=u(rn,n,`TestLoadImage: abort`,!1,t,r),r.ontimeout=u(rn,n,`TestLoadImage: timeout`,!1,t,r),o.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function nn(e,t){let n=new Ye,r=new AbortController,i=setTimeout(()=>{r.abort(),rn(n,`TestPingServer: timeout`,!1,t)},1e4);fetch(e,{signal:r.signal}).then(e=>{clearTimeout(i),e.ok?rn(n,`TestPingServer: ok`,!0,t):rn(n,`TestPingServer: server error`,!1,t)}).catch(()=>{clearTimeout(i),rn(n,`TestPingServer: error`,!1,t)})}function rn(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch{}}function an(){this.g=new Fe}function on(e){this.i=e.Sb||null,this.h=e.ab||!1}d(on,Ie),on.prototype.g=function(){return new sn(this.i,this.h)};function sn(e,t){we.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText=``,this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F=`GET`,this.D=``,this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(sn,we),e=sn.prototype,e.open=function(e,t){if(this.readyState!=0)throw this.abort(),Error(`Error reopening a connection`);this.F=e,this.D=t,this.readyState=1,un(this)},e.send=function(e){if(this.readyState!=1)throw this.abort(),Error(`need to call open() first. `);if(this.v.signal.aborted)throw this.abort(),Error(`Request was aborted.`);this.g=!0;let t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||o).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText=``,this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel(`Request was aborted.`).catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ln(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,un(this)),this.g&&(this.readyState=3,un(this),this.g)))if(this.responseType===`arraybuffer`)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(o.ReadableStream!==void 0&&`body`in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error(`responseType must be empty for "streamBinaryChunks" mode responses.`);this.response=[]}else this.response=this.responseText=``,this.B=new TextDecoder;cn(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))};function cn(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array;(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ln(this):un(this),this.readyState==3&&cn(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,ln(this))},e.Na=function(e){this.g&&(this.response=e,ln(this))},e.ga=function(){this.g&&ln(this)};function ln(e){e.readyState=4,e.l=null,e.j=null,e.B=null,un(e)}e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||``},e.getAllResponseHeaders=function(){if(!this.h)return``;let e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+`: `+n[1]),n=t.next();return e.join(`\r
`)};function un(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(sn.prototype,`withCredentials`,{get:function(){return this.m===`include`},set:function(e){this.m=e?`include`:`same-origin`}});function dn(e){let t=``;return ae(e,function(e,n){t+=n,t+=`:`,t+=e,t+=`\r
`}),t}function fn(e,t,n){a:{for(r in n){var r=!1;break a}r=!0}r||(n=dn(n),typeof e==`string`||N(e,t,n))}function pn(e){we.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D=``,this.o=0,this.l=``,this.j=this.B=this.v=this.A=!1,this.m=null,this.F=``,this.H=!1}d(pn,we);var mn=/^https?$/i,hn=[`POST`,`PUT`];e=pn.prototype,e.Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error(`[goog.net.XhrIo] Object is active with another request=`+this.D+`; newUri=`+e);t=t?t.toUpperCase():`GET`,this.D=e,this.l=``,this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():rt.g(),this.g.onreadystatechange=f(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(e){gn(this,e);return}if(e=n||``,n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys==`function`&&typeof r.get==`function`)for(let e of r.keys())n.set(e,r.get(e));else throw Error(`Unknown input type for opt_headers: `+String(r));r=Array.from(n.keys()).find(e=>e.toLowerCase()==`content-type`),i=o.FormData&&e instanceof o.FormData,!(Array.prototype.indexOf.call(hn,t,void 0)>=0)||r||i||n.set(`Content-Type`,`application/x-www-form-urlencoded;charset=utf-8`);for(let[e,t]of n)this.g.setRequestHeader(e,t);this.F&&(this.g.responseType=this.F),`withCredentials`in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&=(clearTimeout(this.m),null),this.v=!0,this.g.send(e),this.v=!1}catch(e){gn(this,e)}};function gn(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,_n(e),yn(e)}function _n(e){e.A||(e.A=!0,Te(e,`complete`),Te(e,`error`))}e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,Te(this,`complete`),Te(this,`abort`),yn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yn(this,!0)),pn.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?vn(this):this.Xa())},e.Xa=function(){vn(this)};function vn(e){if(e.h&&a!==void 0){if(e.v&&bn(e)==4)setTimeout(e.Ca.bind(e),0);else if(Te(e,`readystatechange`),bn(e)==4){e.h=!1;try{let a=e.ca();a:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break a;default:t=!1}var n;if(!(n=t)){var r;if(r=a===0){let t=String(e.D).match(At)[1]||null;!t&&o.self&&o.self.location&&(t=o.self.location.protocol.slice(0,-1)),r=!mn.test(t?t.toLowerCase():``)}n=r}if(n)Te(e,`complete`),Te(e,`success`);else{e.o=6;try{var i=bn(e)>2?e.g.statusText:``}catch{i=``}e.l=i+` [`+e.ca()+`]`,_n(e)}}finally{yn(e)}}}}function yn(e,t){if(e.g){e.m&&=(clearTimeout(e.m),null);let n=e.g;e.g=null,t||Te(e,`ready`);try{n.onreadystatechange=null}catch{}}}e.isActive=function(){return!!this.g};function bn(e){return e.g?e.g.readyState:0}e.ca=function(){try{return bn(this)>2?this.g.status:-1}catch{return-1}},e.la=function(){try{return this.g?this.g.responseText:``}catch{return``}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),Pe(t)}};function xn(e){try{if(!e.g)return null;if(`response`in e.g)return e.g.response;switch(e.F){case``:case`text`:return e.g.responseText;case`arraybuffer`:if(`mozResponseArrayBuffer`in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function Sn(e){let t={};e=(e.g&&bn(e)>=2&&e.g.getAllResponseHeaders()||``).split(`\r
`);for(let r=0;r<e.length;r++){if(ee(e[r]))continue;var n=ot(e[r]);let i=n[0];if(n=n[1],typeof n!=`string`)continue;n=n.trim();let a=t[i]||[];t[i]=a,a.push(n)}A(t,function(e){return e.join(`, `)})}e.ya=function(){return this.o},e.Ha=function(){return typeof this.l==`string`?this.l:String(this.l)};function Cn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function wn(e){this.za=0,this.i=[],this.j=new Ye,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Cn(`failFast`,!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Cn(`baseRetryDelayMs`,5e3,e),this.Za=Cn(`retryDelaySeedMs`,1e4,e),this.Ta=Cn(`forwardChannelMaxRetries`,2,e),this.va=Cn(`forwardChannelRequestTimeoutMs`,2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M=``,this.h=new Ct(e&&e.concurrentRequestLimit),this.Ba=new an,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}e=wn.prototype,e.ka=8,e.I=1,e.connect=function(e,t,n,r){Ke(0),this.W=e,this.H=t||{},n&&r!==void 0&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=P(this,null,this.W),On(this)};function Tn(e){if(Dn(e),e.I==3){var t=e.V++,n=Nt(e.J);if(N(n,`SID`,e.M),N(n,`RID`,t),N(n,`TYPE`,`terminate`),jn(e,n),t=new st(e,e.j,t),t.M=2,t.A=Lt(Nt(n)),n=!1,o.navigator&&o.navigator.sendBeacon)try{n=o.navigator.sendBeacon(t.A.toString(),``)}catch{}!n&&o.Image&&(new Image().src=t.A,n=!0),n||(t.g=Hn(t.j,null),t.g.ea(t.A)),t.F=Date.now(),gt(t)}Vn(e)}function En(e){e.g&&=(Fn(e),e.g.cancel(),null)}function Dn(e){En(e),e.v&&=(o.clearTimeout(e.v),null),Ln(e),e.h.cancel(),e.m&&=(typeof e.m==`number`&&o.clearTimeout(e.m),null)}function On(e){if(!wt(e.h)&&!e.m){e.m=!0;var t=e.Ea;x||w(),S||=(x(),!0),C.add(t,e),e.D=0}}function kn(e,t){return Tt(e.h)>=e.h.j-(e.m?1:0)?!1:e.m?(e.i=t.G.concat(e.i),!0):e.I==1||e.I==2||e.D>=(e.Sa?0:e.Ta)?!1:(e.m=Je(l(e.Ea,e,t),zn(e,e.D)),e.D++,!0)}e.Ea=function(e){if(this.m)if(this.m=null,this.I==1){if(!e){this.V=Math.floor(Math.random()*1e5),e=this.V++;let i=new st(this,this.j,e),a=this.o;if(this.U&&(a?(a=j(a),se(a,this.U)):a=this.U),this.u!==null||this.R||(i.J=a,a=null),this.S)a:{for(var t=0,n=0;n<this.i.length;n++){b:{var r=this.i[n];if(`__data__`in r.map&&(r=r.map.__data__,typeof r==`string`)){r=r.length;break b}r=void 0}if(r===void 0)break;if(t+=r,t>4096){t=n;break a}if(t===4096||n===this.i.length-1){t=n+1;break a}}t=1e3}else t=1e3;t=Mn(this,i,t),n=Nt(this.J),N(n,`RID`,e),N(n,`CVER`,22),this.G&&N(n,`X-HTTP-Session-Id`,this.G),jn(this,n),a&&(this.R?t=`headers=`+at(dn(a))+`&`+t:this.u&&fn(n,this.u,a)),Dt(this.h,i),this.Ra&&N(n,`TYPE`,`init`),this.S?(N(n,`$req`,t),N(n,`SID`,`null`),i.U=!0,dt(i,n,null)):dt(i,n,t),this.I=2}}else this.I==3&&(e?An(this,e):this.i.length==0||wt(this.h)||An(this))};function An(e,t){var n=t?t.l:e.V++;let r=Nt(e.J);N(r,`SID`,e.M),N(r,`RID`,n),N(r,`AID`,e.K),jn(e,r),e.u&&e.o&&fn(r,e.u,e.o),n=new st(e,e.j,n,e.D+1),e.u===null&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=Mn(e,n,1e3),n.H=Math.round(e.va*.5)+Math.round(e.va*.5*Math.random()),Dt(e.h,n),dt(n,r,t)}function jn(e,t){e.H&&ae(e.H,function(e,n){N(t,n,e)}),e.l&&ae({},function(e,n){N(t,n,e)})}function Mn(e,t,n){n=Math.min(e.i.length,n);let r=e.l?l(e.l.Ka,e.l,e):null;a:{var i=e.i;let t=-1;for(;;){let e=[`count=`+n];t==-1?n>0?(t=i[0].g,e.push(`ofs=`+t)):t=0:e.push(`ofs=`+t);let c=!0;for(let l=0;l<n;l++){var a=i[l].g;let n=i[l].map;if(a-=t,a<0)t=Math.max(0,i[l].g-100),c=!1;else try{a=`req`+a+`_`||``;try{var o=n instanceof Map?n:Object.entries(n);for(let[t,n]of o){let r=n;s(n)&&(r=Ne(n)),e.push(a+t+`=`+encodeURIComponent(r))}}catch(t){throw e.push(a+`type=_badmap`),t}}catch{r&&r(n)}}if(c){o=e.join(`&`);break a}}o=void 0}return e=e.i.splice(0,n),t.G=e,o}function Nn(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;x||w(),S||=(x(),!0),C.add(t,e),e.A=0}}function Pn(e){return e.g||e.v||e.A>=3?!1:(e.Y++,e.v=Je(l(e.Da,e),zn(e,e.A)),e.A++,!0)}e.Da=function(){if(this.v=null,In(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var e=4*this.T;this.j.info(`BP detection timer enabled: `+e),this.B=Je(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info(`BP detection timeout reached.`),this.j.info(`Buffering proxy detected and switch to long-polling!`),this.F=!1,this.P=!0,Ke(10),En(this),In(this))};function Fn(e){e.B!=null&&(o.clearTimeout(e.B),e.B=null)}function In(e){e.g=new st(e,e.j,`rpc`,e.Y),e.u===null&&(e.g.J=e.o),e.g.P=0;var t=Nt(e.na);N(t,`RID`,`rpc`),N(t,`SID`,e.M),N(t,`AID`,e.K),N(t,`CI`,e.F?`0`:`1`),!e.F&&e.ia&&N(t,`TO`,e.ia),N(t,`TYPE`,`xmlhttp`),jn(e,t),e.u&&e.o&&fn(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=Lt(Nt(t)),n.u=null,n.R=!0,ft(n,e)}e.Va=function(){this.C!=null&&(this.C=null,En(this),Pn(this),Ke(19))};function Ln(e){e.C!=null&&(o.clearTimeout(e.C),e.C=null)}function Rn(e,t){var n=null;if(e.g==t){Ln(e),Fn(e),e.g=null;var r=2}else if(Et(e.h,t))n=t.G,Ot(e.h,t),r=1;else return;if(e.I!=0){if(t.o)if(r==1){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;r=Ue(),Te(r,new qe(r,n)),On(e)}else Nn(e);else if(i=t.m,i==3||i==0&&t.X>0||!(r==1&&kn(e,t)||r==2&&Pn(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:Bn(e,5);break;case 4:Bn(e,10);break;case 3:Bn(e,6);break;default:Bn(e,2)}}}function zn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function Bn(e,t){if(e.j.info(`Error code `+t),t==2){var n=l(e.bb,e),r=e.Ua;let t=!r;r=new Mt(r||`//www.google.com/images/cleardot.gif`),o.location&&o.location.protocol==`http`||Pt(r,`https`),Lt(r),t?tn(r.toString(),n):nn(r.toString(),n)}else Ke(2);e.I=0,e.l&&e.l.pa(t),Vn(e),Dn(e)}e.bb=function(e){e?(this.j.info(`Successfully pinged google.com`),Ke(2)):(this.j.info(`Failed to ping google.com`),Ke(1))};function Vn(e){if(e.I=0,e.ja=[],e.l){let t=kt(e.h);(t.length!=0||e.i.length!=0)&&(m(e.ja,t),m(e.ja,e.i),e.h.i.length=0,p(e.i),e.i.length=0),e.l.oa()}}function P(e,t,n){var r=n instanceof Mt?Nt(n):new Mt(n);if(r.g!=``)t&&(r.g=t+`.`+r.g),Ft(r,r.u);else{var i=o.location;r=i.protocol,t=t?t+`.`+i.hostname:i.hostname,i=+i.port;let e=new Mt(null);r&&Pt(e,r),t&&(e.g=t),i&&Ft(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&N(r,n,t),N(r,`VER`,e.ka),jn(e,r),r}function Hn(e,t,n){if(t&&!e.L)throw Error(`Can't create secondary domain capable XhrIo object.`);return t=e.Aa&&!e.ma?new pn(new on({ab:n})):new pn(e.ma),t.Fa(e.L),t}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Un(){}e=Un.prototype,e.ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){};function Wn(){}Wn.prototype.g=function(e,t){return new Gn(e,t)};function Gn(e,t){we.call(this),this.g=new wn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e[`X-Client-Protocol`]=`webchannel`:e={"X-Client-Protocol":`webchannel`}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e[`X-WebChannel-Content-Type`]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e[`X-WebChannel-Client-Profile`]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!ee(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t&&=t.httpSessionIdParam)&&!ee(t)&&(this.g.G=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new Jn(this)}d(Gn,we),Gn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Gn.prototype.close=function(){Tn(this.g)},Gn.prototype.o=function(e){var t=this.g;if(typeof e==`string`){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=Ne(e),e=n);t.i.push(new St(t.Ya++,e)),t.I==3&&On(t)},Gn.prototype.N=function(){this.g.l=null,delete this.j,Tn(this.g),delete this.g,Gn.Z.N.call(this)};function Kn(e){ze.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){a:{for(let n in t){e=n;break a}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}d(Kn,ze);function qn(){Be.call(this),this.status=1}d(qn,Be);function Jn(e){this.g=e}d(Jn,Un),Jn.prototype.ra=function(){Te(this.g,`a`)},Jn.prototype.qa=function(e){Te(this.g,new Kn(e))},Jn.prototype.pa=function(e){Te(this.g,new qn)},Jn.prototype.oa=function(){Te(this.g,`b`)},Wn.prototype.createWebChannel=Wn.prototype.g,Gn.prototype.send=Gn.prototype.o,Gn.prototype.open=Gn.prototype.m,Gn.prototype.close=Gn.prototype.close,Bs=Ms.createWebChannelTransport=function(){return new Wn},zs=Ms.getStatEventTarget=function(){return Ue()},Rs=Ms.Event=Ve,Ls=Ms.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},tt.NO_ERROR=0,tt.TIMEOUT=8,tt.HTTP_ERROR=6,Is=Ms.ErrorCode=tt,nt.COMPLETE=`complete`,Fs=Ms.EventType=nt,Le.EventType=Re,Re.OPEN=`a`,Re.CLOSE=`b`,Re.ERROR=`c`,Re.MESSAGE=`d`,we.prototype.listen=we.prototype.J,Ps=Ms.WebChannel=Le,Ms.FetchXmlHttpFactory=on,pn.prototype.listenOnce=pn.prototype.K,pn.prototype.getLastError=pn.prototype.Ha,pn.prototype.getLastErrorCode=pn.prototype.ya,pn.prototype.getStatus=pn.prototype.ca,pn.prototype.getResponseJson=pn.prototype.La,pn.prototype.getResponseText=pn.prototype.la,pn.prototype.send=pn.prototype.ea,pn.prototype.setWithCredentials=pn.prototype.Fa,Ns=Ms.XhrIo=pn}).apply(js===void 0?typeof self<`u`?self:typeof window<`u`?window:{}:js);var Vs=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?`uid:`+this.uid:`anonymous-user`}isEqual(e){return e.uid===this.uid}};Vs.UNAUTHENTICATED=new Vs(null),Vs.GOOGLE_CREDENTIALS=new Vs(`google-credentials-uid`),Vs.FIRST_PARTY=new Vs(`first-party-uid`),Vs.MOCK_USER=new Vs(`mock-user`);var Hs=`12.9.0`;function Us(e){Hs=e}var Ws=new Ye(`@firebase/firestore`);function Gs(){return Ws.logLevel}function L(e,...t){if(Ws.logLevel<=M.DEBUG){let n=t.map(Js);Ws.debug(`Firestore (${Hs}): ${e}`,...n)}}function Ks(e,...t){if(Ws.logLevel<=M.ERROR){let n=t.map(Js);Ws.error(`Firestore (${Hs}): ${e}`,...n)}}function qs(e,...t){if(Ws.logLevel<=M.WARN){let n=t.map(Js);Ws.warn(`Firestore (${Hs}): ${e}`,...n)}}function Js(e){if(typeof e==`string`)return e;try{return function(e){return JSON.stringify(e)}(e)}catch{return e}}function R(e,t,n){let r=`Unexpected state`;typeof t==`string`?r=t:n=t,Ys(e,r,n)}function Ys(e,t,n){let r=`FIRESTORE (${Hs}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=` CONTEXT: `+JSON.stringify(n)}catch{r+=` CONTEXT: `+n}throw Ks(r),Error(r)}function Xs(e,t,n,r){let i=`Unexpected state`;typeof n==`string`?i=n:r=n,e||Ys(t,i,r)}function z(e,t){return e}var B={OK:`ok`,CANCELLED:`cancelled`,UNKNOWN:`unknown`,INVALID_ARGUMENT:`invalid-argument`,DEADLINE_EXCEEDED:`deadline-exceeded`,NOT_FOUND:`not-found`,ALREADY_EXISTS:`already-exists`,PERMISSION_DENIED:`permission-denied`,UNAUTHENTICATED:`unauthenticated`,RESOURCE_EXHAUSTED:`resource-exhausted`,FAILED_PRECONDITION:`failed-precondition`,ABORTED:`aborted`,OUT_OF_RANGE:`out-of-range`,UNIMPLEMENTED:`unimplemented`,INTERNAL:`internal`,UNAVAILABLE:`unavailable`,DATA_LOSS:`data-loss`},V=class extends Ce{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}},Zs=class{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}},Qs=class{constructor(e,t){this.user=t,this.type=`OAuth`,this.headers=new Map,this.headers.set(`Authorization`,`Bearer ${e}`)}},$s=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Vs.UNAUTHENTICATED)))}shutdown(){}},ec=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}},tc=class{constructor(e){this.t=e,this.currentUser=Vs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Xs(this.o===void 0,42304);let n=this.i,r=e=>this.i===n?Promise.resolve():(n=this.i,t(e)),i=new Zs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Zs,e.enqueueRetryable((()=>r(this.currentUser)))};let a=()=>{let t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{L(`FirebaseAuthCredentialsProvider`,`Auth detected`),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){let e=this.t.getImmediate({optional:!0});e?o(e):(L(`FirebaseAuthCredentialsProvider`,`Auth not yet detected`),i.resolve(),i=new Zs)}}),0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i===e?t?(Xs(typeof t.accessToken==`string`,31837,{l:t}),new Qs(t.accessToken,this.currentUser)):null:(L(`FirebaseAuthCredentialsProvider`,`getToken aborted due to token change.`),this.getToken()))):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Xs(e===null||typeof e==`string`,2055,{h:e}),new Vs(e)}},nc=class{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type=`FirstParty`,this.user=Vs.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set(`X-Goog-AuthUser`,this.P);let e=this.A();return e&&this.R.set(`Authorization`,e),this.T&&this.R.set(`X-Goog-Iam-Authorization-Token`,this.T),this.R}},rc=class{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new nc(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Vs.FIRST_PARTY)))}shutdown(){}invalidateToken(){}},ic=class{constructor(e){this.value=e,this.type=`AppCheck`,this.headers=new Map,e&&e.length>0&&this.headers.set(`x-firebase-appcheck`,this.value)}},ac=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,an(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Xs(this.o===void 0,3512);let n=e=>{e.error!=null&&L(`FirebaseAppCheckTokenProvider`,`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);let n=e.token!==this.m;return this.m=e.token,L(`FirebaseAppCheckTokenProvider`,`Received ${n?`new`:`existing`} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};let r=e=>{L(`FirebaseAppCheckTokenProvider`,`AppCheck detected`),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){let e=this.V.getImmediate({optional:!0});e?r(e):L(`FirebaseAppCheckTokenProvider`,`AppCheck not yet detected`)}}),0)}getToken(){if(this.p)return Promise.resolve(new ic(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Xs(typeof e.token==`string`,44558,{tokenResult:e}),this.m=e.token,new ic(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function oc(e){let t=typeof self<`u`&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues==`function`)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}var sc=class{static newId(){let e=``;for(;e.length<20;){let t=oc(40);for(let n=0;n<t.length;++n)e.length<20&&t[n]<248&&(e+=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789`.charAt(t[n]%62))}return e}};function H(e,t){return e<t?-1:e>t?1:0}function cc(e,t){let n=Math.min(e.length,t.length);for(let r=0;r<n;r++){let n=e.charAt(r),i=t.charAt(r);if(n!==i)return dc(n)===dc(i)?H(n,i):dc(n)?1:-1}return H(e.length,t.length)}var lc=55296,uc=57343;function dc(e){let t=e.charCodeAt(0);return t>=lc&&t<=uc}function fc(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}var pc=`__name__`,mc=class e{constructor(e,t,n){t===void 0?t=0:t>e.length&&R(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&R(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(t){return e.comparator(this,t)===0}child(t){let n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((e=>{n.push(e)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){let r=Math.min(t.length,n.length);for(let i=0;i<r;i++){let r=e.compareSegments(t.get(i),n.get(i));if(r!==0)return r}return H(t.length,n.length)}static compareSegments(t,n){let r=e.isNumericId(t),i=e.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?e.extractNumericId(t).compare(e.extractNumericId(n)):cc(t,n)}static isNumericId(e){return e.startsWith(`__id`)&&e.endsWith(`__`)}static extractNumericId(e){return ks.fromString(e.substring(4,e.length-2))}},hc=class e extends mc{construct(t,n,r){return new e(t,n,r)}canonicalString(){return this.toArray().join(`/`)}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join(`/`)}static fromString(...t){let n=[];for(let e of t){if(e.indexOf(`//`)>=0)throw new V(B.INVALID_ARGUMENT,`Invalid segment (${e}). Paths must not contain // in them.`);n.push(...e.split(`/`).filter((e=>e.length>0)))}return new e(n)}static emptyPath(){return new e([])}},gc=/^[_a-zA-Z][_a-zA-Z0-9]*$/,_c=class e extends mc{construct(t,n,r){return new e(t,n,r)}static isValidIdentifier(e){return gc.test(e)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,`\\\\`).replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(`.`)}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===`__name__`}static keyField(){return new e([pc])}static fromServerFormat(t){let n=[],r=``,i=0,a=()=>{if(r.length===0)throw new V(B.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=``},o=!1;for(;i<t.length;){let e=t[i];if(e===`\\`){if(i+1===t.length)throw new V(B.INVALID_ARGUMENT,`Path has trailing escape character: `+t);let e=t[i+1];if(e!==`\\`&&e!==`.`&&e!=="`")throw new V(B.INVALID_ARGUMENT,`Path has invalid escape sequence: `+t);r+=e,i+=2}else e==="`"?(o=!o,i++):e!==`.`||o?(r+=e,i++):(a(),i++)}if(a(),o)throw new V(B.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)}static emptyPath(){return new e([])}},U=class e{constructor(e){this.path=e}static fromPath(t){return new e(hc.fromString(t))}static fromName(t){return new e(hc.fromString(t).popFirst(5))}static empty(){return new e(hc.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&hc.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return hc.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(t){return new e(new hc(t.slice()))}};function vc(e,t,n){if(!n)throw new V(B.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function yc(e,t,n,r){if(!0===t&&!0===r)throw new V(B.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function bc(e){if(!U.isDocumentKey(e))throw new V(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function xc(e){if(U.isDocumentKey(e))throw new V(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Sc(e){return typeof e==`object`&&!!e&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function Cc(e){if(e===void 0)return`undefined`;if(e===null)return`null`;if(typeof e==`string`)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e==`number`||typeof e==`boolean`)return``+e;if(typeof e==`object`){if(e instanceof Array)return`an array`;{let t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:`an object`}}return typeof e==`function`?`a function`:R(12329,{type:typeof e})}function wc(e,t){if(`_delegate`in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new V(B.INVALID_ARGUMENT,`Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?`);{let n=Cc(e);throw new V(B.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function Tc(e,t){if(t<=0)throw new V(B.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}function Ec(e,t){let n={typeString:e};return t&&(n.value=t),n}function Dc(e,t){if(!Sc(e))throw new V(B.INVALID_ARGUMENT,`JSON must be an object`);let n;for(let r in t)if(t[r]){let i=t[r].typeString,a=`value`in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}let o=e[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&o!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new V(B.INVALID_ARGUMENT,n);return!0}var Oc=-62135596800,kc=1e6,Ac=class e{static now(){return e.fromMillis(Date.now())}static fromDate(t){return e.fromMillis(t.getTime())}static fromMillis(t){let n=Math.floor(t/1e3);return new e(n,Math.floor((t-1e3*n)*kc))}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0||t>=1e9)throw new V(B.INVALID_ARGUMENT,`Timestamp nanoseconds out of range: `+t);if(e<Oc||e>=253402300800)throw new V(B.INVALID_ARGUMENT,`Timestamp seconds out of range: `+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/kc}_compareTo(e){return this.seconds===e.seconds?H(this.nanoseconds,e.nanoseconds):H(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return`Timestamp(seconds=`+this.seconds+`, nanoseconds=`+this.nanoseconds+`)`}toJSON(){return{type:e._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Dc(t,e._jsonSchema))return new e(t.seconds,t.nanoseconds)}valueOf(){let e=this.seconds-Oc;return String(e).padStart(12,`0`)+`.`+String(this.nanoseconds).padStart(9,`0`)}};Ac._jsonSchemaVersion=`firestore/timestamp/1.0`,Ac._jsonSchema={type:Ec(`string`,Ac._jsonSchemaVersion),seconds:Ec(`number`),nanoseconds:Ec(`number`)};var W=class e{static fromTimestamp(t){return new e(t)}static min(){return new e(new Ac(0,0))}static max(){return new e(new Ac(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return`SnapshotVersion(`+this.timestamp.toString()+`)`}toTimestamp(){return this.timestamp}},jc=-1,Mc=class{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}};Mc.UNKNOWN_ID=-1;function Nc(e,t){let n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1;return new Fc(W.fromTimestamp(r===1e9?new Ac(n+1,0):new Ac(n,r)),U.empty(),t)}function Pc(e){return new Fc(e.readTime,e.key,jc)}var Fc=class e{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new e(W.min(),U.empty(),jc)}static max(){return new e(W.max(),U.empty(),jc)}};function Ic(e,t){let n=e.readTime.compareTo(t.readTime);return n===0?(n=U.comparator(e.documentKey,t.documentKey),n===0?H(e.largestBatchId,t.largestBatchId):n):n}var Lc=`The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.`,Rc=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}};async function zc(e){if(e.code!==B.FAILED_PRECONDITION||e.message!==Lc)throw e;L(`LocalStore`,`Unexpectedly lost primary lease`)}var G=class e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(t,n){return this.callbackAttached&&R(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(((e,r)=>{this.nextCallback=n=>{this.wrapSuccess(t,n).next(e,r)},this.catchCallback=t=>{this.wrapFailure(n,t).next(e,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(t){try{let n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):e.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):e.reject(n)}static resolve(t){return new e(((e,n)=>{e(t)}))}static reject(t){return new e(((e,n)=>{n(t)}))}static waitFor(t){return new e(((e,n)=>{let r=0,i=0,a=!1;t.forEach((t=>{++r,t.next((()=>{++i,a&&i===r&&e()}),(e=>n(e)))})),a=!0,i===r&&e()}))}static or(t){let n=e.resolve(!1);for(let r of t)n=n.next((t=>t?e.resolve(t):r()));return n}static forEach(e,t){let n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(t,n){return new e(((e,r)=>{let i=t.length,a=Array(i),o=0;for(let s=0;s<i;s++){let c=s;n(t[c]).next((t=>{a[c]=t,++o,o===i&&e(a)}),(e=>r(e)))}}))}static doWhile(t,n){return new e(((e,r)=>{let i=()=>{!0===t()?n().next((()=>{i()}),r):e()};i()}))}};function Bc(e){let t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(`.`).slice(0,2).join(`.`):`-1`;return Number(n)}function Vc(e){return e.name===`IndexedDbTransactionError`}var Hc=class{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.ue&&this.ue(e),e}};Hc.ce=-1;var Uc=-1;function Wc(e){return e==null}function Gc(e){return e===0&&1/e==-1/0}function Kc(e){return typeof e==`number`&&Number.isInteger(e)&&!Gc(e)&&e<=2**53-1&&e>=-(2**53-1)}var qc=``;function Jc(e){let t=``;for(let n=0;n<e.length;n++)t.length>0&&(t=Xc(t)),t=Yc(e.get(n),t);return Xc(t)}function Yc(e,t){let n=t,r=e.length;for(let t=0;t<r;t++){let r=e.charAt(t);switch(r){case`\0`:n+=``;break;case qc:n+=``;break;default:n+=r}}return n}function Xc(e){return e+qc+``}function Zc(e){let t=0;for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Qc(e,t){for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function $c(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var K=class e{constructor(e,t){this.comparator=e,this.root=t||tl.EMPTY}insert(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,tl.BLACK,null,null))}remove(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,tl.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){let e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(`, `)}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new el(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new el(this.root,e,this.comparator,!1)}getReverseIterator(){return new el(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new el(this.root,e,this.comparator,!0)}},el=class{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},tl=class e{constructor(t,n,r,i,a){this.key=t,this.value=n,this.color=r??e.RED,this.left=i??e.EMPTY,this.right=a??e.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,a){return new e(t??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this,i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):i===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return e.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){return 2**this.check()<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw R(43730,{key:this.key,value:this.value});if(this.right.isRed())throw R(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw R(27949);return e+(this.isRed()?0:1)}};tl.EMPTY=null,tl.RED=!0,tl.BLACK=!1,tl.EMPTY=new class{constructor(){this.size=0}get key(){throw R(57766)}get value(){throw R(16141)}get color(){throw R(16727)}get left(){throw R(29726)}get right(){throw R(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new tl(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var nl=class e{constructor(e){this.comparator=e,this.data=new K(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){let n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){let r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=t===void 0?this.data.getIterator():this.data.getIteratorFrom(t);n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new rl(this.data.getIterator())}getIteratorFrom(e){return new rl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){let e=n.getNext().key,t=r.getNext().key;if(this.comparator(e,t)!==0)return!1}return!0}toArray(){let e=[];return this.forEach((t=>{e.push(t)})),e}toString(){let e=[];return this.forEach((t=>e.push(t))),`SortedSet(`+e.toString()+`)`}copy(t){let n=new e(this.comparator);return n.data=t,n}},rl=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}},il=class e{constructor(e){this.fields=e,e.sort(_c.comparator)}static empty(){return new e([])}unionWith(t){let n=new nl(_c.comparator);for(let e of this.fields)n=n.add(e);for(let e of t)n=n.add(e);return new e(n.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return fc(this.fields,e.fields,((e,t)=>e.isEqual(t)))}},al=class extends Error{constructor(){super(...arguments),this.name=`Base64DecodeError`}},q=class e{constructor(e){this.binaryString=e}static fromBase64String(t){return new e(function(e){try{return atob(e)}catch(e){throw typeof DOMException<`u`&&e instanceof DOMException?new al(`Invalid base64 string: `+e):e}}(t))}static fromUint8Array(t){return new e(function(e){let t=``;for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t))}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){let t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return H(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};q.EMPTY_BYTE_STRING=new q(``);var ol=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sl(e){if(Xs(!!e,39018),typeof e==`string`){let t=0,n=ol.exec(e);if(Xs(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+`000000000`).substr(0,9),t=Number(e)}let r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:cl(e.seconds),nanos:cl(e.nanos)}}function cl(e){return typeof e==`number`?e:typeof e==`string`?Number(e):0}function ll(e){return typeof e==`string`?q.fromBase64String(e):q.fromUint8Array(e)}var ul=`server_timestamp`,dl=`__type__`,fl=`__previous_value__`,pl=`__local_write_time__`;function ml(e){return(e?.mapValue?.fields||{})[dl]?.stringValue===ul}function hl(e){let t=e.mapValue.fields[fl];return ml(t)?hl(t):t}function gl(e){let t=sl(e.mapValue.fields[pl].timestampValue);return new Ac(t.seconds,t.nanos)}var _l=class{constructor(e,t,n,r,i,a,o,s,c,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=s,this.useFetchStreams=c,this.isUsingEmulator=l,this.apiKey=u}},vl=`(default)`,yl=class e{constructor(e,t){this.projectId=e,this.database=t||vl}static empty(){return new e(``,``)}get isDefaultDatabase(){return this.database===vl}isEqual(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}};function bl(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,[`projectId`]))throw new V(B.INVALID_ARGUMENT,`"projectId" not provided in firebase.initializeApp.`);return new yl(e.options.projectId,t)}var xl=`__type__`,Sl=`__max__`,Cl={mapValue:{fields:{__type__:{stringValue:Sl}}}},wl=`__vector__`,Tl=`value`;function El(e){return`nullValue`in e?0:`booleanValue`in e?1:`integerValue`in e||`doubleValue`in e?2:`timestampValue`in e?3:`stringValue`in e?5:`bytesValue`in e?6:`referenceValue`in e?7:`geoPointValue`in e?8:`arrayValue`in e?9:`mapValue`in e?ml(e)?4:Vl(e)?9007199254740991:zl(e)?10:11:R(28295,{value:e})}function Dl(e,t){if(e===t)return!0;let n=El(e);if(n!==El(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return gl(e).isEqual(gl(t));case 3:return function(e,t){if(typeof e.timestampValue==`string`&&typeof t.timestampValue==`string`&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;let n=sl(e.timestampValue),r=sl(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return ll(e.bytesValue).isEqual(ll(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return cl(e.geoPointValue.latitude)===cl(t.geoPointValue.latitude)&&cl(e.geoPointValue.longitude)===cl(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if(`integerValue`in e&&`integerValue`in t)return cl(e.integerValue)===cl(t.integerValue);if(`doubleValue`in e&&`doubleValue`in t){let n=cl(e.doubleValue),r=cl(t.doubleValue);return n===r?Gc(n)===Gc(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return fc(e.arrayValue.values||[],t.arrayValue.values||[],Dl);case 10:case 11:return function(e,t){let n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Zc(n)!==Zc(r))return!1;for(let e in n)if(n.hasOwnProperty(e)&&(r[e]===void 0||!Dl(n[e],r[e])))return!1;return!0}(e,t);default:return R(52216,{left:e})}}function Ol(e,t){return(e.values||[]).find((e=>Dl(e,t)))!==void 0}function kl(e,t){if(e===t)return 0;let n=El(e),r=El(t);if(n!==r)return H(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return H(e.booleanValue,t.booleanValue);case 2:return function(e,t){let n=cl(e.integerValue||e.doubleValue),r=cl(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Al(e.timestampValue,t.timestampValue);case 4:return Al(gl(e),gl(t));case 5:return cc(e.stringValue,t.stringValue);case 6:return function(e,t){let n=ll(e),r=ll(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){let n=e.split(`/`),r=t.split(`/`);for(let e=0;e<n.length&&e<r.length;e++){let t=H(n[e],r[e]);if(t!==0)return t}return H(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){let n=H(cl(e.latitude),cl(t.latitude));return n===0?H(cl(e.longitude),cl(t.longitude)):n}(e.geoPointValue,t.geoPointValue);case 9:return jl(e.arrayValue,t.arrayValue);case 10:return function(e,t){let n=e.fields||{},r=t.fields||{},i=n[Tl]?.arrayValue,a=r[Tl]?.arrayValue,o=H(i?.values?.length||0,a?.values?.length||0);return o===0?jl(i,a):o}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Cl.mapValue&&t===Cl.mapValue)return 0;if(e===Cl.mapValue)return 1;if(t===Cl.mapValue)return-1;let n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(let e=0;e<r.length&&e<a.length;++e){let t=cc(r[e],a[e]);if(t!==0)return t;let o=kl(n[r[e]],i[a[e]]);if(o!==0)return o}return H(r.length,a.length)}(e.mapValue,t.mapValue);default:throw R(23264,{he:n})}}function Al(e,t){if(typeof e==`string`&&typeof t==`string`&&e.length===t.length)return H(e,t);let n=sl(e),r=sl(t),i=H(n.seconds,r.seconds);return i===0?H(n.nanos,r.nanos):i}function jl(e,t){let n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){let t=kl(n[e],r[e]);if(t)return t}return H(n.length,r.length)}function Ml(e){return Nl(e)}function Nl(e){return`nullValue`in e?`null`:`booleanValue`in e?``+e.booleanValue:`integerValue`in e?``+e.integerValue:`doubleValue`in e?``+e.doubleValue:`timestampValue`in e?function(e){let t=sl(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):`stringValue`in e?e.stringValue:`bytesValue`in e?function(e){return ll(e).toBase64()}(e.bytesValue):`referenceValue`in e?function(e){return U.fromName(e).toString()}(e.referenceValue):`geoPointValue`in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):`arrayValue`in e?function(e){let t=`[`,n=!0;for(let r of e.values||[])n?n=!1:t+=`,`,t+=Nl(r);return t+`]`}(e.arrayValue):`mapValue`in e?function(e){let t=Object.keys(e.fields||{}).sort(),n=`{`,r=!0;for(let i of t)r?r=!1:n+=`,`,n+=`${i}:${Nl(e.fields[i])}`;return n+`}`}(e.mapValue):R(61005,{value:e})}function Pl(e){switch(El(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let t=hl(e);return t?16+Pl(t):16;case 5:return 2*e.stringValue.length;case 6:return ll(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+Pl(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Qc(e.fields,((e,n)=>{t+=e.length+Pl(n)})),t}(e.mapValue);default:throw R(13486,{value:e})}}function Fl(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Il(e){return!!e&&`integerValue`in e}function Ll(e){return!!e&&`arrayValue`in e}function Rl(e){return!!e&&`nullValue`in e}function J(e){return!!e&&`doubleValue`in e&&isNaN(Number(e.doubleValue))}function Y(e){return!!e&&`mapValue`in e}function zl(e){return(e?.mapValue?.fields||{})[xl]?.stringValue===wl}function Bl(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue==`object`)return{timestampValue:{...e.timestampValue}};if(e.mapValue){let t={mapValue:{fields:{}}};return Qc(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Bl(n))),t}if(e.arrayValue){let t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Bl(e.arrayValue.values[n]);return t}return{...e}}function Vl(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Sl}var Hl=class e{constructor(e){this.value=e}static empty(){return new e({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Y(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bl(t)}setAll(e){let t=_c.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){let e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Bl(e):r.push(i.lastSegment())}));let i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){let t=this.field(e.popLast());Y(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Dl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Y(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Qc(t,((t,n)=>e[t]=n));for(let t of n)delete e[t]}clone(){return new e(Bl(this.value))}};function Ul(e){let t=[];return Qc(e.fields,((e,n)=>{let r=new _c([e]);if(Y(n)){let e=Ul(n.mapValue).fields;if(e.length===0)t.push(r);else for(let n of e)t.push(r.child(n))}else t.push(r)})),new il(t)}var Wl=class e{constructor(e,t,n,r,i,a,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(t){return new e(t,0,W.min(),W.min(),W.min(),Hl.empty(),0)}static newFoundDocument(t,n,r,i){return new e(t,1,n,W.min(),r,i,0)}static newNoDocument(t,n){return new e(t,2,n,W.min(),W.min(),Hl.empty(),0)}static newUnknownDocument(t,n){return new e(t,3,n,W.min(),W.min(),Hl.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(W.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hl.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=W.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}},Gl=class{constructor(e,t){this.position=e,this.inclusive=t}};function Kl(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){let a=t[i],o=e.position[i];if(r=a.field.isKeyField()?U.comparator(U.fromName(o.referenceValue),n.key):kl(o,n.data.field(a.field)),a.dir===`desc`&&(r*=-1),r!==0)break}return r}function ql(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Dl(e.position[n],t.position[n]))return!1;return!0}var Jl=class{constructor(e,t=`asc`){this.field=e,this.dir=t}};function Yl(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Xl=class{},Zl=class e extends Xl{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(t,n,r){return t.isKeyField()?n===`in`||n===`not-in`?this.createKeyFieldInFilter(t,n,r):new au(t,n,r):n===`array-contains`?new lu(t,r):n===`in`?new uu(t,r):n===`not-in`?new du(t,r):n===`array-contains-any`?new fu(t,r):new e(t,n,r)}static createKeyFieldInFilter(e,t,n){return t===`in`?new ou(e,n):new su(e,n)}matches(e){let t=e.data.field(this.field);return this.op===`!=`?t!==null&&t.nullValue===void 0&&this.matchesComparison(kl(t,this.value)):t!==null&&El(this.value)===El(t)&&this.matchesComparison(kl(t,this.value))}matchesComparison(e){switch(this.op){case`<`:return e<0;case`<=`:return e<=0;case`==`:return e===0;case`!=`:return e!==0;case`>`:return e>0;case`>=`:return e>=0;default:return R(47266,{operator:this.op})}}isInequality(){return[`<`,`<=`,`>`,`>=`,`!=`,`not-in`].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ql=class e extends Xl{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(t,n){return new e(t,n)}matches(e){return $l(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function $l(e){return e.op===`and`}function eu(e){return tu(e)&&$l(e)}function tu(e){for(let t of e.filters)if(t instanceof Ql)return!1;return!0}function nu(e){if(e instanceof Zl)return e.field.canonicalString()+e.op.toString()+Ml(e.value);if(eu(e))return e.filters.map((e=>nu(e))).join(`,`);{let t=e.filters.map((e=>nu(e))).join(`,`);return`${e.op}(${t})`}}function ru(e,t){return e instanceof Zl?function(e,t){return t instanceof Zl&&e.op===t.op&&e.field.isEqual(t.field)&&Dl(e.value,t.value)}(e,t):e instanceof Ql?function(e,t){return t instanceof Ql&&e.op===t.op&&e.filters.length===t.filters.length?e.filters.reduce(((e,n,r)=>e&&ru(n,t.filters[r])),!0):!1}(e,t):void R(19439)}function iu(e){return e instanceof Zl?function(e){return`${e.field.canonicalString()} ${e.op} ${Ml(e.value)}`}(e):e instanceof Ql?function(e){return e.op.toString()+` {`+e.getFilters().map(iu).join(` ,`)+`}`}(e):`Filter`}var au=class extends Zl{constructor(e,t,n){super(e,t,n),this.key=U.fromName(n.referenceValue)}matches(e){let t=U.comparator(e.key,this.key);return this.matchesComparison(t)}},ou=class extends Zl{constructor(e,t){super(e,`in`,t),this.keys=cu(`in`,t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}},su=class extends Zl{constructor(e,t){super(e,`not-in`,t),this.keys=cu(`not-in`,t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}};function cu(e,t){return(t.arrayValue?.values||[]).map((e=>U.fromName(e.referenceValue)))}var lu=class extends Zl{constructor(e,t){super(e,`array-contains`,t)}matches(e){let t=e.data.field(this.field);return Ll(t)&&Ol(t.arrayValue,this.value)}},uu=class extends Zl{constructor(e,t){super(e,`in`,t)}matches(e){let t=e.data.field(this.field);return t!==null&&Ol(this.value.arrayValue,t)}},du=class extends Zl{constructor(e,t){super(e,`not-in`,t)}matches(e){if(Ol(this.value.arrayValue,{nullValue:`NULL_VALUE`}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ol(this.value.arrayValue,t)}},fu=class extends Zl{constructor(e,t){super(e,`array-contains-any`,t)}matches(e){let t=e.data.field(this.field);return!(!Ll(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Ol(this.value.arrayValue,e)))}},pu=class{constructor(e,t=null,n=[],r=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=a,this.endAt=o,this.Te=null}};function mu(e,t=null,n=[],r=[],i=null,a=null,o=null){return new pu(e,t,n,r,i,a,o)}function hu(e){let t=z(e);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+=`|cg:`+t.collectionGroup),e+=`|f:`,e+=t.filters.map((e=>nu(e))).join(`,`),e+=`|ob:`,e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(`,`),Wc(t.limit)||(e+=`|l:`,e+=t.limit),t.startAt&&(e+=`|lb:`,e+=t.startAt.inclusive?`b:`:`a:`,e+=t.startAt.position.map((e=>Ml(e))).join(`,`)),t.endAt&&(e+=`|ub:`,e+=t.endAt.inclusive?`a:`:`b:`,e+=t.endAt.position.map((e=>Ml(e))).join(`,`)),t.Te=e}return t.Te}function gu(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Yl(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!ru(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ql(e.startAt,t.startAt)&&ql(e.endAt,t.endAt)}function _u(e){return U.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}var vu=class{constructor(e,t=null,n=[],r=[],i=null,a=`F`,o=null,s=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=s,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}};function yu(e,t,n,r,i,a,o,s){return new vu(e,t,n,r,i,a,o,s)}function bu(e){return new vu(e)}function xu(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Su(e){return U.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}function Cu(e){return e.collectionGroup!==null}function wu(e){let t=z(e);if(t.Ie===null){t.Ie=[];let e=new Set;for(let n of t.explicitOrderBy)t.Ie.push(n),e.add(n.field.canonicalString());let n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:`asc`;(function(e){let t=new nl(_c.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t})(t).forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new Jl(r,n))})),e.has(_c.keyField().canonicalString())||t.Ie.push(new Jl(_c.keyField(),n))}return t.Ie}function Tu(e){let t=z(e);return t.Ee||=Eu(t,wu(e)),t.Ee}function Eu(e,t){if(e.limitType===`F`)return mu(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{let t=e.dir===`desc`?`asc`:`desc`;return new Jl(e.field,t)}));let n=e.endAt?new Gl(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Gl(e.startAt.position,e.startAt.inclusive):null;return mu(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Du(e,t){let n=e.filters.concat([t]);return new vu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Ou(e,t){let n=e.explicitOrderBy.concat([t]);return new vu(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}function ku(e,t,n){return new vu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Au(e,t){return gu(Tu(e),Tu(t))&&e.limitType===t.limitType}function ju(e){return`${hu(Tu(e))}|lt:${e.limitType}`}function Mu(e){return`Query(target=${function(e){let t=e.path.canonicalString();return e.collectionGroup!==null&&(t+=` collectionGroup=`+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>iu(e))).join(`, `)}]`),Wc(e.limit)||(t+=`, limit: `+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(`, `)}]`),e.startAt&&(t+=`, startAt: `,t+=e.startAt.inclusive?`b:`:`a:`,t+=e.startAt.position.map((e=>Ml(e))).join(`,`)),e.endAt&&(t+=`, endAt: `,t+=e.endAt.inclusive?`a:`:`b:`,t+=e.endAt.position.map((e=>Ml(e))).join(`,`)),`Target(${t})`}(Tu(e))}; limitType=${e.limitType})`}function Nu(e,t){return t.isFoundDocument()&&function(e,t){let n=t.key.path;return e.collectionGroup===null?U.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n):t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n)}(e,t)&&function(e,t){for(let n of wu(e))if(!n.field.isKeyField()&&t.data.field(n.field)===null)return!1;return!0}(e,t)&&function(e,t){for(let n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){let r=Kl(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,wu(e),t)||e.endAt&&!function(e,t,n){let r=Kl(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,wu(e),t))}(e,t)}function Pu(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Fu(e){return(t,n)=>{let r=!1;for(let i of wu(e)){let e=Iu(i,t,n);if(e!==0)return e;r||=i.field.isKeyField()}return 0}}function Iu(e,t,n){let r=e.field.isKeyField()?U.comparator(t.key,n.key):function(e,t,n){let r=t.data.field(e),i=n.data.field(e);return r!==null&&i!==null?kl(r,i):R(42886)}(e.field,t,n);switch(e.dir){case`asc`:return r;case`desc`:return-1*r;default:return R(19790,{direction:e.dir})}}var Lu=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(let[t,r]of n)if(this.equalsFn(t,e))return r}}has(e){return this.get(e)!==void 0}set(e,t){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return n.length===1?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Qc(this.inner,((t,n)=>{for(let[t,r]of n)e(t,r)}))}isEmpty(){return $c(this.inner)}size(){return this.innerSize}},Ru=new K(U.comparator);function zu(){return Ru}var Bu=new K(U.comparator);function Vu(...e){let t=Bu;for(let n of e)t=t.insert(n.key,n);return t}function Hu(e){let t=Bu;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Uu(){return Gu()}function Wu(){return Gu()}function Gu(){return new Lu((e=>e.toString()),((e,t)=>e.isEqual(t)))}var Ku=new K(U.comparator),qu=new nl(U.comparator);function X(...e){let t=qu;for(let n of e)t=t.add(n);return t}var Ju=new nl(H);function Yu(){return Ju}function Xu(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:`NaN`};if(t===1/0)return{doubleValue:`Infinity`};if(t===-1/0)return{doubleValue:`-Infinity`}}return{doubleValue:Gc(t)?`-0`:t}}function Zu(e){return{integerValue:``+e}}function Qu(e,t){return Kc(t)?Zu(t):Xu(e,t)}var $u=class{constructor(){this._=void 0}};function ed(e,t,n){return e instanceof rd?function(e,t){let n={fields:{[dl]:{stringValue:ul},[pl]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&ml(t)&&(t=hl(t)),t&&(n.fields[fl]=t),{mapValue:n}}(n,t):e instanceof id?ad(e,t):e instanceof od?sd(e,t):function(e,t){let n=nd(e,t),r=ld(n)+ld(e.Ae);return Il(n)&&Il(e.Ae)?Zu(r):Xu(e.serializer,r)}(e,t)}function td(e,t,n){return e instanceof id?ad(e,t):e instanceof od?sd(e,t):n}function nd(e,t){return e instanceof cd?function(e){return Il(e)||function(e){return!!e&&`doubleValue`in e}(e)}(t)?t:{integerValue:0}:null}var rd=class extends $u{},id=class extends $u{constructor(e){super(),this.elements=e}};function ad(e,t){let n=ud(t);for(let t of e.elements)n.some((e=>Dl(e,t)))||n.push(t);return{arrayValue:{values:n}}}var od=class extends $u{constructor(e){super(),this.elements=e}};function sd(e,t){let n=ud(t);for(let t of e.elements)n=n.filter((e=>!Dl(e,t)));return{arrayValue:{values:n}}}var cd=class extends $u{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function ld(e){return cl(e.integerValue||e.doubleValue)}function ud(e){return Ll(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function dd(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof id&&t instanceof id||e instanceof od&&t instanceof od?fc(e.elements,t.elements,Dl):e instanceof cd&&t instanceof cd?Dl(e.Ae,t.Ae):e instanceof rd&&t instanceof rd}(e.transform,t.transform)}var fd=class{constructor(e,t){this.version=e,this.transformResults=t}},pd=class e{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new e}static exists(t){return new e(void 0,t)}static updateTime(t){return new e(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function md(e,t){return e.updateTime===void 0?e.exists===void 0||e.exists===t.isFoundDocument():t.isFoundDocument()&&t.version.isEqual(e.updateTime)}var hd=class{};function gd(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Td(e.key,pd.none()):new Z(e.key,e.data,pd.none());{let n=e.data,r=Hl.empty(),i=new nl(_c.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);t===null&&e.length>1&&(e=e.popLast(),t=n.field(e)),t===null?r.delete(e):r.set(e,t),i=i.add(e)}return new xd(e.key,r,new il(i.toArray()),pd.none())}}function _d(e,t,n){e instanceof Z?function(e,t,n){let r=e.value.clone(),i=Cd(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof xd?function(e,t,n){if(!md(e.precondition,t))return void t.convertToUnknownDocument(n.version);let r=Cd(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Sd(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function vd(e,t,n,r){return e instanceof Z?function(e,t,n,r){if(!md(e.precondition,t))return n;let i=e.value.clone(),a=wd(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof xd?function(e,t,n,r){if(!md(e.precondition,t))return n;let i=wd(e.fieldTransforms,r,t),a=t.data;return a.setAll(Sd(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),n===null?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return md(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function yd(e,t){let n=null;for(let r of e.fieldTransforms){let e=t.data.field(r.field),i=nd(r.transform,e||null);i!=null&&(n===null&&(n=Hl.empty()),n.set(r.field,i))}return n||null}function bd(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return e===void 0&&t===void 0||!(!e||!t)&&fc(e,t,((e,t)=>dd(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Z=class extends hd{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},xd=class extends hd{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}};function Sd(e){let t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){let r=e.data.field(n);t.set(n,r)}})),t}function Cd(e,t,n){let r=new Map;Xs(e.length===n.length,32656,{Ve:n.length,de:e.length});for(let i=0;i<n.length;i++){let a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,td(o,s,n[i]))}return r}function wd(e,t,n){let r=new Map;for(let i of e){let e=i.transform,a=n.data.field(i.field);r.set(i.field,ed(e,a,t))}return r}var Td=class extends hd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Ed=class extends hd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}},Dd=class{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){let n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){let r=this.mutations[t];r.key.isEqual(e.key)&&_d(r,e,n[t])}}applyToLocalView(e,t){for(let n of this.baseMutations)n.key.isEqual(e.key)&&(t=vd(n,e,t,this.localWriteTime));for(let n of this.mutations)n.key.isEqual(e.key)&&(t=vd(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let n=Wu();return this.mutations.forEach((r=>{let i=e.get(r.key),a=i.overlayedDocument,o=this.applyToLocalView(a,i.mutatedFields);o=t.has(r.key)?null:o;let s=gd(a,o);s!==null&&n.set(r.key,s),a.isValidDocument()||a.convertToNoDocument(W.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),X())}isEqual(e){return this.batchId===e.batchId&&fc(this.mutations,e.mutations,((e,t)=>bd(e,t)))&&fc(this.baseMutations,e.baseMutations,((e,t)=>bd(e,t)))}},Od=class e{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(t,n,r){Xs(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let i=function(){return Ku}(),a=t.mutations;for(let e=0;e<a.length;e++)i=i.insert(a[e].key,r[e].version);return new e(t,n,r,i)}},kd=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}},Ad=class{constructor(e,t){this.count=e,this.unchangedNames=t}},jd,Q;function Md(e){switch(e){case B.OK:return R(64938);case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0;default:return R(15467,{code:e})}}function Nd(e){if(e===void 0)return Ks(`GRPC error has no .code`),B.UNKNOWN;switch(e){case jd.OK:return B.OK;case jd.CANCELLED:return B.CANCELLED;case jd.UNKNOWN:return B.UNKNOWN;case jd.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case jd.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case jd.INTERNAL:return B.INTERNAL;case jd.UNAVAILABLE:return B.UNAVAILABLE;case jd.UNAUTHENTICATED:return B.UNAUTHENTICATED;case jd.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case jd.NOT_FOUND:return B.NOT_FOUND;case jd.ALREADY_EXISTS:return B.ALREADY_EXISTS;case jd.PERMISSION_DENIED:return B.PERMISSION_DENIED;case jd.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case jd.ABORTED:return B.ABORTED;case jd.OUT_OF_RANGE:return B.OUT_OF_RANGE;case jd.UNIMPLEMENTED:return B.UNIMPLEMENTED;case jd.DATA_LOSS:return B.DATA_LOSS;default:return R(39323,{code:e})}}(Q=jd||={})[Q.OK=0]=`OK`,Q[Q.CANCELLED=1]=`CANCELLED`,Q[Q.UNKNOWN=2]=`UNKNOWN`,Q[Q.INVALID_ARGUMENT=3]=`INVALID_ARGUMENT`,Q[Q.DEADLINE_EXCEEDED=4]=`DEADLINE_EXCEEDED`,Q[Q.NOT_FOUND=5]=`NOT_FOUND`,Q[Q.ALREADY_EXISTS=6]=`ALREADY_EXISTS`,Q[Q.PERMISSION_DENIED=7]=`PERMISSION_DENIED`,Q[Q.UNAUTHENTICATED=16]=`UNAUTHENTICATED`,Q[Q.RESOURCE_EXHAUSTED=8]=`RESOURCE_EXHAUSTED`,Q[Q.FAILED_PRECONDITION=9]=`FAILED_PRECONDITION`,Q[Q.ABORTED=10]=`ABORTED`,Q[Q.OUT_OF_RANGE=11]=`OUT_OF_RANGE`,Q[Q.UNIMPLEMENTED=12]=`UNIMPLEMENTED`,Q[Q.INTERNAL=13]=`INTERNAL`,Q[Q.UNAVAILABLE=14]=`UNAVAILABLE`,Q[Q.DATA_LOSS=15]=`DATA_LOSS`;var Pd=null;function Fd(){return new TextEncoder}var Id=new ks([4294967295,4294967295],0);function Ld(e){let t=Fd().encode(e),n=new As;return n.update(t),new Uint8Array(n.digest())}function Rd(e){let t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new ks([n,r],0),new ks([i,a],0)]}var zd=class e{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Bd(`Invalid padding: ${t}`);if(n<0||e.length>0&&this.hashCount===0)throw new Bd(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new Bd(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ks.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(ks.fromNumber(n)));return r.compare(Id)===1&&(r=new ks([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let[t,n]=Rd(Ld(e));for(let e=0;e<this.hashCount;e++){let r=this.ye(t,n,e);if(!this.we(r))return!1}return!0}static create(t,n,r){let i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((e=>a.insert(e))),a}insert(e){if(this.ge===0)return;let[t,n]=Rd(Ld(e));for(let e=0;e<this.hashCount;e++){let r=this.ye(t,n,e);this.be(r)}}be(e){let t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}},Bd=class extends Error{constructor(){super(...arguments),this.name=`BloomFilterError`}},Vd=class e{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){let i=new Map;return i.set(t,Hd.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(W.min(),i,new K(H),zu(),X())}},Hd=class e{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new e(r,n,X(),X(),X())}},Ud=class{constructor(e,t,n,r){this.Se=e,this.removedTargetIds=t,this.key=n,this.De=r}},Wd=class{constructor(e,t){this.targetId=e,this.Ce=t}},Gd=class{constructor(e,t,n=q.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}},Kd=class{constructor(){this.ve=0,this.Fe=Yd(),this.Me=q.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=X(),t=X(),n=X();return this.Fe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:R(38017,{changeType:i})}})),new Hd(this.Me,this.xe,e,t,n)}Ke(){this.Oe=!1,this.Fe=Yd()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){--this.ve,Xs(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}},qd=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=zu(),this.He=Jd(),this.Je=Jd(),this.Ze=new K(H)}Xe(e){for(let t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{let n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.We(),n.Ne||n.Ke(),n.Le(e.resumeToken);break;case 2:n.We(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.Qe(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:R(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((e,n)=>{this.rt(n)&&t(n)}))}st(e){let t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){let i=r.target;if(_u(i))if(n===0){let e=new U(i.path);this.et(t,e,Wl.newNoDocument(e,W.min()))}else Xs(n===1,20013,{expectedCount:n});else{let r=this._t(t);if(r!==n){let n=this.ut(e),i=n?this.ct(n,e,r):1;if(i!==0){this.it(t);let e=i===2?`TargetPurposeExistenceFilterMismatchBloom`:`TargetPurposeExistenceFilterMismatch`;this.Ze=this.Ze.insert(t,e)}Pd?.lt(function(e,t,n,r,i){let a={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},o=t.unchangedNames;return o&&(a.bloomFilter={applied:i===0,hashCount:o?.hashCount??0,bitmapLength:o?.bits?.bitmap?.length??0,padding:o?.bits?.padding??0,mightContain:e=>r?.mightContain(e)??!1}),a}(r,e.Ce,this.Ge.ht(),n,i))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:n=``,padding:r=0},hashCount:i=0}=t,a,o;try{a=ll(n).toUint8Array()}catch(e){if(e instanceof al)return qs(`Decoding the base64 bloom filter in existence filter failed (`+e.message+`); ignoring the bloom filter and falling back to full re-query.`),null;throw e}try{o=new zd(a,r,i)}catch(e){return qs(e instanceof Bd?`BloomFilter error: `:`Applying bloom filter failed: `,e),null}return o.ge===0?null:o}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){let n=this.Ge.getRemoteKeysForTarget(t),r=0;return n.forEach((n=>{let i=this.Ge.ht(),a=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(a)||(this.et(t,n,null),r++)})),r}Tt(e){let t=new Map;this.ze.forEach(((n,r)=>{let i=this.ot(r);if(i){if(n.current&&_u(i.target)){let t=new U(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,Wl.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.Ke())}}));let n=X();this.Je.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{let t=this.ot(e);return!t||t.purpose===`TargetPurposeLimboResolution`||(r=!1,!1)})),r&&(n=n.add(e))})),this.je.forEach(((t,n)=>n.setReadTime(e)));let r=new Vd(e,t,this.Ze,this.je,n);return this.je=zu(),this.He=Jd(),this.Je=Jd(),this.Ze=new K(H),r}Ye(e,t){if(!this.rt(e))return;let n=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,n),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;let r=this.nt(e);this.Et(e,t)?r.qe(t,1):r.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new Kd,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new nl(H),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new nl(H),this.He=this.He.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||L(`WatchChangeAggregator`,`Detected inactive target`,e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Kd),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function Jd(){return new K(U.comparator)}function Yd(){return new K(U.comparator)}var Xd=(()=>({asc:`ASCENDING`,desc:`DESCENDING`}))(),Zd=(()=>({"<":`LESS_THAN`,"<=":`LESS_THAN_OR_EQUAL`,">":`GREATER_THAN`,">=":`GREATER_THAN_OR_EQUAL`,"==":`EQUAL`,"!=":`NOT_EQUAL`,"array-contains":`ARRAY_CONTAINS`,in:`IN`,"not-in":`NOT_IN`,"array-contains-any":`ARRAY_CONTAINS_ANY`}))(),Qd=(()=>({and:`AND`,or:`OR`}))(),$d=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function ef(e,t){return e.useProto3Json||Wc(t)?t:{value:t}}function tf(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,``).replace(`Z`,``)}.${(`000000000`+t.nanoseconds).slice(-9)}Z`:{seconds:``+t.seconds,nanos:t.nanoseconds}}function nf(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function rf(e,t){return tf(e,t.toTimestamp())}function af(e){return Xs(!!e,49232),W.fromTimestamp(function(e){let t=sl(e);return new Ac(t.seconds,t.nanos)}(e))}function of(e,t){return sf(e,t).canonicalString()}function sf(e,t){let n=function(e){return new hc([`projects`,e.projectId,`databases`,e.database])}(e).child(`documents`);return t===void 0?n:n.child(t)}function cf(e){let t=hc.fromString(e);return Xs(jf(t),10190,{key:t.toString()}),t}function lf(e,t){return of(e.databaseId,t.path)}function uf(e,t){let n=cf(t);if(n.get(1)!==e.databaseId.projectId)throw new V(B.INVALID_ARGUMENT,`Tried to deserialize key from different project: `+n.get(1)+` vs `+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new V(B.INVALID_ARGUMENT,`Tried to deserialize key from different database: `+n.get(3)+` vs `+e.databaseId.database);return new U(mf(n))}function df(e,t){return of(e.databaseId,t)}function ff(e){let t=cf(e);return t.length===4?hc.emptyPath():mf(t)}function pf(e){return new hc([`projects`,e.databaseId.projectId,`databases`,e.databaseId.database]).canonicalString()}function mf(e){return Xs(e.length>4&&e.get(4)===`documents`,29091,{key:e.toString()}),e.popFirst(5)}function hf(e,t,n){return{name:lf(e,t),fields:n.value.mapValue.fields}}function gf(e,t){let n;if(`targetChange`in t){t.targetChange;let r=function(e){return e===`NO_CHANGE`?0:e===`ADD`?1:e===`REMOVE`?2:e===`CURRENT`?3:e===`RESET`?4:R(39313,{state:e})}(t.targetChange.targetChangeType||`NO_CHANGE`),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(Xs(t===void 0||typeof t==`string`,58123),q.fromBase64String(t||``)):(Xs(t===void 0||t instanceof Buffer||t instanceof Uint8Array,16193),q.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause;n=new Gd(r,i,a,o&&function(e){return new V(e.code===void 0?B.UNKNOWN:Nd(e.code),e.message||``)}(o)||null)}else if(`documentChange`in t){t.documentChange;let r=t.documentChange;r.document,r.document.name,r.document.updateTime;let i=uf(e,r.document.name),a=af(r.document.updateTime),o=r.document.createTime?af(r.document.createTime):W.min(),s=new Hl({mapValue:{fields:r.document.fields}}),c=Wl.newFoundDocument(i,a,o,s);n=new Ud(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if(`documentDelete`in t){t.documentDelete;let r=t.documentDelete;r.document;let i=uf(e,r.document),a=r.readTime?af(r.readTime):W.min(),o=Wl.newNoDocument(i,a);n=new Ud([],r.removedTargetIds||[],o.key,o)}else if(`documentRemove`in t){t.documentRemove;let r=t.documentRemove;r.document;let i=uf(e,r.document);n=new Ud([],r.removedTargetIds||[],i,null)}else{if(!(`filter`in t))return R(11601,{Vt:t});{t.filter;let e=t.filter;e.targetId;let{count:r=0,unchangedNames:i}=e,a=new Ad(r,i),o=e.targetId;n=new Wd(o,a)}}return n}function _f(e,t){let n;if(t instanceof Z)n={update:hf(e,t.key,t.value)};else if(t instanceof Td)n={delete:lf(e,t.key)};else if(t instanceof xd)n={update:hf(e,t.key,t.data),updateMask:Af(t.fieldMask)};else{if(!(t instanceof Ed))return R(16599,{dt:t.type});n={verify:lf(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){let n=t.transform;if(n instanceof rd)return{fieldPath:t.field.canonicalString(),setToServerValue:`REQUEST_TIME`};if(n instanceof id)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof od)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof cd)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw R(20930,{transform:t.transform})}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return t.updateTime===void 0?t.exists===void 0?R(27497):{exists:t.exists}:{updateTime:rf(e,t.updateTime)}}(e,t.precondition)),n}function vf(e,t){return e&&e.length>0?(Xs(t!==void 0,14353),e.map((e=>function(e,t){let n=e.updateTime?af(e.updateTime):af(t);return n.isEqual(W.min())&&(n=af(t)),new fd(n,e.transformResults||[])}(e,t)))):[]}function yf(e,t){return{documents:[df(e,t.path)]}}function bf(e,t){let n={structuredQuery:{}},r=t.path,i;t.collectionGroup===null?(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]):(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]),n.parent=df(e,i);let a=function(e){if(e.length!==0)return kf(Ql.create(e,`and`))}(t.filters);a&&(n.structuredQuery.where=a);let o=function(e){if(e.length!==0)return e.map((e=>function(e){return{field:Df(e.field),direction:wf(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);let s=ef(e,t.limit);return s!==null&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function xf(e){let t=ff(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Xs(r===1,65062);let e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let a=[];n.where&&(a=function(e){let t=Cf(e);return t instanceof Ql&&eu(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new Jl(Of(e.field),function(e){switch(e){case`ASCENDING`:return`asc`;case`DESCENDING`:return`desc`;default:return}}(e.direction))}(e)))}(n.orderBy));let s=null;n.limit&&(s=function(e){let t;return t=typeof e==`object`?e.value:e,Wc(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){let t=!!e.before;return new Gl(e.values||[],t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){let t=!e.before;return new Gl(e.values||[],t)}(n.endAt)),yu(t,i,o,a,s,`F`,c,l)}function Sf(e,t){let n=function(e){switch(e){case`TargetPurposeListen`:return null;case`TargetPurposeExistenceFilterMismatch`:return`existence-filter-mismatch`;case`TargetPurposeExistenceFilterMismatchBloom`:return`existence-filter-mismatch-bloom`;case`TargetPurposeLimboResolution`:return`limbo-document`;default:return R(28987,{purpose:e})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Cf(e){return e.unaryFilter===void 0?e.fieldFilter===void 0?e.compositeFilter===void 0?R(30097,{filter:e}):function(e){return Ql.create(e.compositeFilter.filters.map((e=>Cf(e))),function(e){switch(e){case`AND`:return`and`;case`OR`:return`or`;default:return R(1026)}}(e.compositeFilter.op))}(e):function(e){return Zl.create(Of(e.fieldFilter.field),function(e){switch(e){case`EQUAL`:return`==`;case`NOT_EQUAL`:return`!=`;case`GREATER_THAN`:return`>`;case`GREATER_THAN_OR_EQUAL`:return`>=`;case`LESS_THAN`:return`<`;case`LESS_THAN_OR_EQUAL`:return`<=`;case`ARRAY_CONTAINS`:return`array-contains`;case`IN`:return`in`;case`NOT_IN`:return`not-in`;case`ARRAY_CONTAINS_ANY`:return`array-contains-any`;case`OPERATOR_UNSPECIFIED`:return R(58110);default:return R(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):function(e){switch(e.unaryFilter.op){case`IS_NAN`:let t=Of(e.unaryFilter.field);return Zl.create(t,`==`,{doubleValue:NaN});case`IS_NULL`:let n=Of(e.unaryFilter.field);return Zl.create(n,`==`,{nullValue:`NULL_VALUE`});case`IS_NOT_NAN`:let r=Of(e.unaryFilter.field);return Zl.create(r,`!=`,{doubleValue:NaN});case`IS_NOT_NULL`:let i=Of(e.unaryFilter.field);return Zl.create(i,`!=`,{nullValue:`NULL_VALUE`});case`OPERATOR_UNSPECIFIED`:return R(61313);default:return R(60726)}}(e)}function wf(e){return Xd[e]}function Tf(e){return Zd[e]}function Ef(e){return Qd[e]}function Df(e){return{fieldPath:e.canonicalString()}}function Of(e){return _c.fromServerFormat(e.fieldPath)}function kf(e){return e instanceof Zl?function(e){if(e.op===`==`){if(J(e.value))return{unaryFilter:{field:Df(e.field),op:`IS_NAN`}};if(Rl(e.value))return{unaryFilter:{field:Df(e.field),op:`IS_NULL`}}}else if(e.op===`!=`){if(J(e.value))return{unaryFilter:{field:Df(e.field),op:`IS_NOT_NAN`}};if(Rl(e.value))return{unaryFilter:{field:Df(e.field),op:`IS_NOT_NULL`}}}return{fieldFilter:{field:Df(e.field),op:Tf(e.op),value:e.value}}}(e):e instanceof Ql?function(e){let t=e.getFilters().map((e=>kf(e)));return t.length===1?t[0]:{compositeFilter:{op:Ef(e.op),filters:t}}}(e):R(54877,{filter:e})}function Af(e){let t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function jf(e){return e.length>=4&&e.get(0)===`projects`&&e.get(2)===`databases`}function Mf(e){return!!e&&typeof e._toProto==`function`&&e._protoValueType===`ProtoValue`}var Nf=class e{constructor(e,t,n,r,i=W.min(),a=W.min(),o=q.EMPTY_BYTE_STRING,s=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=s}withSequenceNumber(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}},Pf=class{constructor(e){this.yt=e}};function Ff(e){let t=xf({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType===`LAST`?ku(t,t.limit,`L`):t}var If=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if(`nullValue`in e)this.Ft(t,5);else if(`booleanValue`in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if(`integerValue`in e)this.Ft(t,15),t.Mt(cl(e.integerValue));else if(`doubleValue`in e){let n=cl(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),Gc(n)?t.Mt(0):t.Mt(n))}else if(`timestampValue`in e){let n=e.timestampValue;this.Ft(t,20),typeof n==`string`&&(n=sl(n)),t.xt(`${n.seconds||``}`),t.Mt(n.nanos||0)}else if(`stringValue`in e)this.Ot(e.stringValue,t),this.Nt(t);else if(`bytesValue`in e)this.Ft(t,30),t.Bt(ll(e.bytesValue)),this.Nt(t);else if(`referenceValue`in e)this.Lt(e.referenceValue,t);else if(`geoPointValue`in e){let n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else `mapValue`in e?Vl(e)?this.Ft(t,2**53-1):zl(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):`arrayValue`in e?(this.qt(e.arrayValue,t),this.Nt(t)):R(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){let n=e.fields||{};this.Ft(t,55);for(let e of Object.keys(n))this.Ot(e,t),this.Ct(n[e],t)}kt(e,t){let n=e.fields||{};this.Ft(t,53);let r=Tl,i=n[r].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(cl(i)),this.Ot(r,t),this.Ct(n[r],t)}qt(e,t){let n=e.values||[];this.Ft(t,50);for(let e of n)this.Ct(e,t)}Lt(e,t){this.Ft(t,37),U.fromName(e).path.forEach((e=>{this.Ft(t,60),this.$t(e,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};If.Wt=new If;var Lf=class{constructor(){this.Sn=new Rf}addToCollectionParentIndex(e,t){return this.Sn.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(Fc.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(Fc.min())}updateCollectionGroup(e,t,n){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}},Rf=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new nl(hc.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){let t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new nl(hc.comparator)).toArray()}};new Uint8Array;var zf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Bf=41943040,Vf=class e{static withCacheSize(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}};Vf.DEFAULT_COLLECTION_PERCENTILE=10,Vf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vf.DEFAULT=new Vf(Bf,Vf.DEFAULT_COLLECTION_PERCENTILE,Vf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vf.DISABLED=new Vf(-1,0,0);var Hf=class e{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new e(0)}static ar(){return new e(-1)}},Uf=`LruGarbageCollector`,Wf=1048576;function Gf([e,t],[n,r]){let i=H(e,n);return i===0?H(t,r):i}var Kf=class{constructor(e){this.Pr=e,this.buffer=new nl(Gf),this.Tr=0}Ir(){return++this.Tr}Er(e){let t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{let e=this.buffer.last();Gf(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}},qf=class{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&=(this.Rr.cancel(),null)}get started(){return this.Rr!==null}Ar(e){L(Uf,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay(`lru_garbage_collection`,e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Vc(e)?L(Uf,`Ignoring IndexedDB error during garbage collection: `,e):await zc(e)}await this.Ar(3e5)}))}},Jf=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(t===0)return G.resolve(Hc.ce);let n=new Kf(t);return this.Vr.forEachTarget(e,(e=>n.Er(e.sequenceNumber))).next((()=>this.Vr.mr(e,(e=>n.Er(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.Vr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(L(`LruGarbageCollector`,`Garbage collection skipped; disabled`),G.resolve(zf)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(L(`LruGarbageCollector`,`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zf):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let n,r,i,a,o,s,c,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(L(`LruGarbageCollector`,`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,s=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),Gs()<=M.DEBUG&&L(`LruGarbageCollector`,`LRU Garbage Collection\n\tCounted targets in ${a-l}ms\n\tDetermined least recently used ${r} in `+(o-a)+`ms
\tRemoved ${i} targets in `+(s-o)+`ms
\tRemoved ${e} documents in `+(c-s)+`ms
Total Duration: ${c-l}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}};function Yf(e,t){return new Jf(e,t)}var Xf=class{constructor(){this.changes=new Lu((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Wl.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let n=this.changes.get(t);return n===void 0?this.getFromCache(e,t):G.resolve(n)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}},Zf=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}},Qf=class{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(n!==null&&vd(n.mutation,e,il.empty(),Ac.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,X()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=X()){let r=Uu();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Vu();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){let n=Uu();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,X())))}populateOverlays(e,t,n){let r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=zu(),a=Gu(),o=function(){return Gu()}();return t.forEach(((e,t)=>{let o=n.get(t.key);r.has(t.key)&&(o===void 0||o.mutation instanceof xd)?i=i.insert(t.key,t):o===void 0?a.set(t.key,il.empty()):(a.set(t.key,o.mutation.getFieldMask()),vd(o.mutation,t,o.mutation.getFieldMask(),Ac.now()))})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>a.set(e,t))),t.forEach(((e,t)=>o.set(e,new Zf(t,a.get(e)??null)))),o)))}recalculateAndSaveOverlays(e,t){let n=Gu(),r=new K(((e,t)=>e-t)),i=X();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(let i of e)i.keys().forEach((e=>{let a=t.get(e);if(a===null)return;let o=n.get(e)||il.empty();o=i.applyToLocalView(a,o),n.set(e,o);let s=(r.get(i.batchId)||X()).add(e);r=r.insert(i.batchId,s)}))})).next((()=>{let a=[],o=r.getReverseIterator();for(;o.hasNext();){let r=o.getNext(),s=r.key,c=r.value,l=Wu();c.forEach((e=>{if(!i.has(e)){let r=gd(t.get(e),n.get(e));r!==null&&l.set(e,r),i=i.add(e)}})),a.push(this.documentOverlayCache.saveOverlays(e,s,l))}return G.waitFor(a)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return Su(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Cu(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{let a=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):G.resolve(Uu()),o=jc,s=i;return a.next((t=>G.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?G.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{s=s.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,s,t,X()))).next((e=>({batchId:o,changes:Hu(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new U(t)).next((e=>{let t=Vu();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){let i=t.collectionGroup,a=Vu();return this.indexManager.getCollectionParents(e,i).next((o=>G.forEach(o,(o=>{let s=function(e,t){return new vu(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,s,n,r).next((e=>{e.forEach(((e,t)=>{a=a.insert(e,t)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{let r=n.getKey();e.get(r)===null&&(e=e.insert(r,Wl.newInvalidDocument(r)))}));let n=Vu();return e.forEach(((e,r)=>{let a=i.get(e);a!==void 0&&vd(a.mutation,r,il.empty(),Ac.now()),Nu(t,r)&&(n=n.insert(e,r))})),n}))}},$f=class{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return G.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:af(e.createTime)}}(t)),G.resolve()}getNamedQuery(e,t){return G.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,function(e){return{name:e.name,query:Ff(e.bundledQuery),readTime:af(e.readTime)}}(t)),G.resolve()}},ep=class{constructor(){this.overlays=new K(U.comparator),this.Lr=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){let n=Uu();return G.forEach(t,(t=>this.getOverlay(e,t).next((e=>{e!==null&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.bt(e,t,r)})),G.resolve()}removeOverlaysForBatchId(e,t,n){let r=this.Lr.get(n);return r!==void 0&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Lr.delete(n)),G.resolve()}getOverlaysForCollection(e,t,n){let r=Uu(),i=t.length+1,a=new U(t.child(``)),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){let e=o.getNext().value,a=e.getKey();if(!t.isPrefixOf(a.path))break;a.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return G.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new K(((e,t)=>e-t)),a=this.overlays.getIterator();for(;a.hasNext();){let e=a.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);t===null&&(t=Uu(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}let o=Uu(),s=i.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return G.resolve(o)}bt(e,t,n){let r=this.overlays.get(n.key);if(r!==null){let e=this.Lr.get(r.largestBatchId).delete(n.key);this.Lr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new kd(t,n));let i=this.Lr.get(t);i===void 0&&(i=X(),this.Lr.set(t,i)),this.Lr.set(t,i.add(n.key))}},tp=class{constructor(){this.sessionToken=q.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}},np=class{constructor(){this.kr=new nl(rp.Kr),this.qr=new nl(rp.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){let n=new rp(e,t);this.kr=this.kr.add(n),this.qr=this.qr.add(n)}$r(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Wr(new rp(e,t))}Qr(e,t){e.forEach((e=>this.removeReference(e,t)))}Gr(e){let t=new U(new hc([])),n=new rp(t,e),r=new rp(t,e+1),i=[];return this.qr.forEachInRange([n,r],(e=>{this.Wr(e),i.push(e.key)})),i}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){let t=new U(new hc([])),n=new rp(t,e),r=new rp(t,e+1),i=X();return this.qr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){let t=new rp(e,0),n=this.kr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}},rp=class{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return U.comparator(e.key,t.key)||H(e.Hr,t.Hr)}static Ur(e,t){return H(e.Hr,t.Hr)||U.comparator(e.key,t.key)}},ip=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new nl(rp.Kr)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,r){let i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new Dd(i,t,n,r);this.mutationQueue.push(a);for(let t of r)this.Jr=this.Jr.add(new rp(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return G.resolve(a)}lookupMutationBatch(e,t){return G.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let n=t+1,r=this.Xr(n),i=r<0?0:r;return G.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?Uc:this.Yn-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let n=new rp(t,0),r=new rp(t,1/0),i=[];return this.Jr.forEachInRange([n,r],(e=>{let t=this.Zr(e.Hr);i.push(t)})),G.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new nl(H);return t.forEach((e=>{let t=new rp(e,0),r=new rp(e,1/0);this.Jr.forEachInRange([t,r],(e=>{n=n.add(e.Hr)}))})),G.resolve(this.Yr(n))}getAllMutationBatchesAffectingQuery(e,t){let n=t.path,r=n.length+1,i=n;U.isDocumentKey(i)||(i=i.child(``));let a=new rp(new U(i),0),o=new nl(H);return this.Jr.forEachWhile((e=>{let t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Hr)),!0)}),a),G.resolve(this.Yr(o))}Yr(e){let t=[];return e.forEach((e=>{let n=this.Zr(e);n!==null&&t.push(n)})),t}removeMutationBatch(e,t){Xs(this.ei(t.batchId,`removed`)===0,55003),this.mutationQueue.shift();let n=this.Jr;return G.forEach(t.mutations,(r=>{let i=new rp(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Jr=n}))}nr(e){}containsKey(e,t){let n=new rp(t,0),r=this.Jr.firstAfterOrEqual(n);return G.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}},ap=class{constructor(e){this.ti=e,this.docs=function(){return new K(U.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ti(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let n=this.docs.get(t);return G.resolve(n?n.document.mutableCopy():Wl.newInvalidDocument(t))}getEntries(e,t){let n=zu();return t.forEach((e=>{let t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Wl.newInvalidDocument(e))})),G.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=zu(),a=t.path,o=new U(a.child(`__id-9223372036854775808__`)),s=this.docs.getIteratorFrom(o);for(;s.hasNext();){let{key:e,value:{document:o}}=s.getNext();if(!a.isPrefixOf(e.path))break;e.path.length>a.length+1||Ic(Pc(o),n)<=0||(r.has(o.key)||Nu(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return G.resolve(i)}getAllFromCollectionGroup(e,t,n,r){R(9500)}ni(e,t){return G.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new op(this)}getSize(e){return G.resolve(this.size)}},op=class extends Xf{constructor(e){super(),this.Mr=e}applyChanges(e){let t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Mr.addEntry(e,r)):this.Mr.removeEntry(n)})),G.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}},sp=class{constructor(e){this.persistence=e,this.ri=new Lu((e=>hu(e)),gu),this.lastRemoteSnapshotVersion=W.min(),this.highestTargetId=0,this.ii=0,this.si=new np,this.targetCount=0,this.oi=Hf._r()}forEachTarget(e,t){return this.ri.forEach(((e,n)=>t(n))),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ii&&(this.ii=t),G.resolve()}lr(e){this.ri.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.oi=new Hf(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.lr(t),G.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),--this.targetCount,G.resolve()}removeTargets(e,t,n){let r=0,i=[];return this.ri.forEach(((a,o)=>{o.sequenceNumber<=t&&n.get(o.targetId)===null&&(this.ri.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),G.waitFor(i).next((()=>r))}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){let n=this.ri.get(t)||null;return G.resolve(n)}addMatchingKeys(e,t,n){return this.si.$r(t,n),G.resolve()}removeMatchingKeys(e,t,n){this.si.Qr(t,n);let r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),G.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),G.resolve()}getMatchingKeysForTargetId(e,t){let n=this.si.jr(t);return G.resolve(n)}containsKey(e,t){return G.resolve(this.si.containsKey(t))}},cp=class{constructor(e,t){this._i={},this.overlays={},this.ai=new Hc(0),this.ui=!1,this.ui=!0,this.ci=new tp,this.referenceDelegate=e(this),this.li=new sp(this),this.indexManager=new Lf,this.remoteDocumentCache=function(e){return new ap(e)}((e=>this.referenceDelegate.hi(e))),this.serializer=new Pf(t),this.Pi=new $f(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ep,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this._i[e.toKey()];return n||(n=new ip(t,this.referenceDelegate),this._i[e.toKey()]=n),n}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,n){L(`MemoryPersistence`,`Starting transaction:`,e);let r=new lp(this.ai.next());return this.referenceDelegate.Ti(),n(r).next((e=>this.referenceDelegate.Ii(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Ei(e,t){return G.or(Object.values(this._i).map((n=>()=>n.containsKey(e,t))))}},lp=class extends Rc{constructor(e){super(),this.currentSequenceNumber=e}},up=class e{constructor(e){this.persistence=e,this.Ri=new np,this.Ai=null}static Vi(t){return new e(t)}get di(){if(this.Ai)return this.Ai;throw R(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.di.delete(n.toString()),G.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.di.add(n.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),G.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((e=>this.di.add(e.toString())));let n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.di.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.di,(n=>{let r=U.fromPath(n);return this.mi(e,r).next((e=>{e||t.removeEntry(r,W.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((e=>{e?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return G.or([()=>G.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},dp=class e{constructor(e,t){this.persistence=e,this.fi=new Lu((e=>Jc(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=Yf(this,t)}static Vi(t,n){return new e(t,n)}Ti(){}Ii(e){return G.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){let t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}pr(e){let t=0;return this.mr(e,(e=>{t++})).next((()=>t))}mr(e,t){return G.forEach(this.fi,((n,r)=>this.wr(e,n,r).next((e=>e?G.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0,r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ni(e,(r=>this.wr(e,r,t).next((e=>{e||(n++,i.removeEntry(r,W.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),G.resolve()}removeTarget(e,t){let n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.fi.set(n,e.currentSequenceNumber),G.resolve()}removeReference(e,t,n){return this.fi.set(n,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),G.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Pl(e.data.value)),t}wr(e,t,n){return G.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let e=this.fi.get(t);return G.resolve(e!==void 0&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}},fp=class e{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Ts=n,this.Is=r}static Es(t,n){let r=X(),i=X();for(let e of n.docChanges)switch(e.type){case 0:r=r.add(e.doc.key);break;case 1:i=i.add(e.doc.key)}return new e(t,n.fromCache,r,i)}},pp=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}},mp=class{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return ye()?8:Bc(fe())>0?6:4}()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){let i={result:null};return this.gs(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ps(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;let n=new pp;return this.ys(e,t,n).next((r=>{if(i.result=r,this.As)return this.ws(e,t,n,r.size)}))})).next((()=>i.result))}ws(e,t,n,r){return n.documentReadCount<this.Vs?(Gs()<=M.DEBUG&&L(`QueryEngine`,`SDK will not create cache indexes for query:`,Mu(t),`since it only creates cache indexes for collection contains`,`more than or equal to`,this.Vs,`documents`),G.resolve()):(Gs()<=M.DEBUG&&L(`QueryEngine`,`Query:`,Mu(t),`scans`,n.documentReadCount,`local documents and returns`,r,`documents as results.`),n.documentReadCount>this.ds*r?(Gs()<=M.DEBUG&&L(`QueryEngine`,`The SDK decides to create cache indexes for query:`,Mu(t),`as using cache indexes may help improve performance.`),this.indexManager.createTargetIndexes(e,Tu(t))):G.resolve())}gs(e,t){if(xu(t))return G.resolve(null);let n=Tu(t);return this.indexManager.getIndexType(e,n).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=ku(t,null,`F`),n=Tu(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{let i=X(...r);return this.fs.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{let a=this.bs(t,r);return this.Ss(t,a,i,n.readTime)?this.gs(e,ku(t,null,`F`)):this.Ds(e,a,t,n)}))))})))))}ps(e,t,n,r){return xu(t)||r.isEqual(W.min())?G.resolve(null):this.fs.getDocuments(e,n).next((i=>{let a=this.bs(t,i);return this.Ss(t,a,n,r)?G.resolve(null):(Gs()<=M.DEBUG&&L(`QueryEngine`,`Re-using previous result from %s to execute query: %s`,r.toString(),Mu(t)),this.Ds(e,a,t,Nc(r,jc)).next((e=>e)))}))}bs(e,t){let n=new nl(Fu(e));return t.forEach(((t,r)=>{Nu(e,r)&&(n=n.add(r))})),n}Ss(e,t,n,r){if(e.limit===null)return!1;if(n.size!==t.size)return!0;let i=e.limitType===`F`?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}ys(e,t,n){return Gs()<=M.DEBUG&&L(`QueryEngine`,`Using full collection scan to execute query:`,Mu(t)),this.fs.getDocumentsMatchingQuery(e,t,Fc.min(),n)}Ds(e,t,n,r){return this.fs.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}},hp=`LocalStore`,gp=3e8,_p=class{constructor(e,t,n,r){this.persistence=e,this.Cs=t,this.serializer=r,this.vs=new K(H),this.Fs=new Lu((e=>hu(e)),gu),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(n)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Qf(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction(`Collect garbage`,`readwrite-primary`,(t=>e.collect(t,this.vs)))}};function vp(e,t,n,r){return new _p(e,t,n,r)}async function yp(e,t){let n=z(e);return await n.persistence.runTransaction(`Handle user change`,`readonly`,(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.Os(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{let i=[],a=[],o=X();for(let e of r){i.push(e.batchId);for(let t of e.mutations)o=o.add(t.key)}for(let e of t){a.push(e.batchId);for(let t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({Ns:e,removedBatchIds:i,addedBatchIds:a})))}))}))}function bp(e,t){let n=z(e);return n.persistence.runTransaction(`Acknowledge batch`,`readwrite-primary`,(e=>{let r=t.batch.keys(),i=n.xs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){let i=n.batch,a=i.keys(),o=G.resolve();return a.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{let a=n.docVersions.get(e);Xs(a!==null,48541),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=X();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}function xp(e){let t=z(e);return t.persistence.runTransaction(`Get last remote snapshot version`,`readonly`,(e=>t.li.getLastRemoteSnapshotVersion(e)))}function Sp(e,t){let n=z(e),r=t.snapshotVersion,i=n.vs;return n.persistence.runTransaction(`Apply remote event`,`readwrite-primary`,(e=>{let a=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;let o=[];t.targetChanges.forEach(((a,s)=>{let c=i.get(s);if(!c)return;o.push(n.li.removeMatchingKeys(e,a.removedDocuments,s).next((()=>n.li.addMatchingKeys(e,a.addedDocuments,s))));let l=c.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.get(s)===null?a.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(a.resumeToken,r)):l=l.withResumeToken(q.EMPTY_BYTE_STRING,W.min()).withLastLimboFreeSnapshotVersion(W.min()),i=i.insert(s,l),function(e,t,n){return e.resumeToken.approximateByteSize()===0||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=gp?!0:n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,a)&&o.push(n.li.updateTargetData(e,l))}));let s=zu(),c=X();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Cp(e,a,t.documentUpdates).next((e=>{s=e.Bs,c=e.Ls}))),!r.isEqual(W.min())){let t=n.li.getLastRemoteSnapshotVersion(e).next((t=>n.li.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return G.waitFor(o).next((()=>a.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,s,c))).next((()=>s))})).then((e=>(n.vs=i,e)))}function Cp(e,t,n){let r=X(),i=X();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=zu();return n.forEach(((n,a)=>{let o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(W.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||a.version.compareTo(o.version)===0&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):L(hp,`Ignoring outdated watch update for `,n,`. Current version:`,o.version,` Watch version:`,a.version)})),{Bs:r,Ls:i}}))}function wp(e,t){let n=z(e);return n.persistence.runTransaction(`Get next mutation batch`,`readonly`,(e=>(t===void 0&&(t=Uc),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Tp(e,t){let n=z(e);return n.persistence.runTransaction(`Allocate target`,`readwrite`,(e=>{let r;return n.li.getTargetData(e,t).next((i=>i?(r=i,G.resolve(r)):n.li.allocateTargetId(e).next((i=>(r=new Nf(t,i,`TargetPurposeListen`,e.currentSequenceNumber),n.li.addTargetData(e,r).next((()=>r)))))))})).then((e=>{let r=n.vs.get(e.targetId);return(r===null||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.vs=n.vs.insert(e.targetId,e),n.Fs.set(t,e.targetId)),e}))}async function Ep(e,t,n){let r=z(e),i=r.vs.get(t),a=n?`readwrite`:`readwrite-primary`;try{n||await r.persistence.runTransaction(`Release target`,a,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Vc(e))throw e;L(hp,`Failed to update sequence numbers for target ${t}: ${e}`)}r.vs=r.vs.remove(t),r.Fs.delete(i.target)}function Dp(e,t,n){let r=z(e),i=W.min(),a=X();return r.persistence.runTransaction(`Execute query`,`readwrite`,(e=>function(e,t,n){let r=z(e),i=r.Fs.get(n);return i===void 0?r.li.getTargetData(t,n):G.resolve(r.vs.get(i))}(r,e,Tu(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(e,t.targetId).next((e=>{a=e}))})).next((()=>r.Cs.getDocumentsMatchingQuery(e,t,n?i:W.min(),n?a:X()))).next((e=>(Op(r,Pu(t),e),{documents:e,ks:a})))))}function Op(e,t,n){let r=e.Ms.get(t)||W.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ms.set(t,r)}var kp=class{constructor(){this.activeTargetIds=Yu()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Ap=class{constructor(){this.vo=new kp,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||`not-current`}updateQueryState(e,t,n){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new kp,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}},jp=class{Mo(e){}shutdown(){}},Mp=`ConnectivityMonitor`,Np=class{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener(`online`,this.xo),window.removeEventListener(`offline`,this.No)}ko(){window.addEventListener(`online`,this.xo),window.addEventListener(`offline`,this.No)}Oo(){L(Mp,`Network connectivity changed: AVAILABLE`);for(let e of this.Lo)e(0)}Bo(){L(Mp,`Network connectivity changed: UNAVAILABLE`);for(let e of this.Lo)e(1)}static v(){return typeof window<`u`&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}},Pp=null;function Fp(){return Pp===null?Pp=function(){return 268435456+Math.round(2147483648*Math.random())}():Pp++,`0x`+Pp.toString(16)}var Ip=`RestConnection`,Lp={BatchGetDocuments:`batchGet`,Commit:`commit`,RunQuery:`runQuery`,RunAggregationQuery:`runAggregationQuery`,ExecutePipeline:`executePipeline`},Rp=class{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?`https`:`http`,n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.qo=t+`://`+e.host,this.Uo=`projects/${n}/databases/${r}`,this.$o=this.databaseId.database===vl?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Wo(e,t,n,r,i){let a=Fp(),o=this.Qo(e,t.toUriEncodedString());L(Ip,`Sending RPC '${e}' ${a}:`,o,n);let s={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(s,r,i);let{host:c}=new URL(o),l=A(c);return this.zo(e,o,s,n,l).then((t=>(L(Ip,`Received RPC '${e}' ${a}: `,t),t)),(t=>{throw qs(Ip,`RPC '${e}' ${a} failed with error: `,t,`url: `,o,`request:`,n),t}))}jo(e,t,n,r,i,a){return this.Wo(e,t,n,r,i)}Go(e,t,n){e[`X-Goog-Api-Client`]=function(){return`gl-js/ fire/`+Hs}(),e[`Content-Type`]=`text/plain`,this.databaseInfo.appId&&(e[`X-Firebase-GMPID`]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}Qo(e,t){let n=Lp[e],r=`${this.qo}/v1/${t}:${n}`;return this.databaseInfo.apiKey&&(r=`${r}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),r}terminate(){}},zp=class{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}},Bp=`WebChannelConnection`,Vp=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))},Hp=class e extends Rp{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){e.c_||=(Vp(zs(),Rs.STAT_EVENT,(e=>{e.stat===Ls.PROXY?L(Bp,`STAT_EVENT: detected buffering proxy`):e.stat===Ls.NOPROXY&&L(Bp,`STAT_EVENT: detected no buffering proxy`)})),!0)}zo(e,t,n,r,i){let a=Fp();return new Promise(((i,o)=>{let s=new Ns;s.setWithCredentials(!0),s.listenOnce(Fs.COMPLETE,(()=>{try{switch(s.getLastErrorCode()){case Is.NO_ERROR:let t=s.getResponseJson();L(Bp,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(t)),i(t);break;case Is.TIMEOUT:L(Bp,`RPC '${e}' ${a} timed out`),o(new V(B.DEADLINE_EXCEEDED,`Request time out`));break;case Is.HTTP_ERROR:let n=s.getStatus();if(L(Bp,`RPC '${e}' ${a} failed with status:`,n,`response text:`,s.getResponseText()),n>0){let e=s.getResponseJson();Array.isArray(e)&&(e=e[0]);let t=e?.error;t&&t.status&&t.message?o(new V(function(e){let t=e.toLowerCase().replace(/_/g,`-`);return Object.values(B).indexOf(t)>=0?t:B.UNKNOWN}(t.status),t.message)):o(new V(B.UNKNOWN,`Server responded with status `+s.getStatus()))}else o(new V(B.UNAVAILABLE,`Connection failed.`));break;default:R(9055,{l_:e,streamId:a,h_:s.getLastErrorCode(),P_:s.getLastError()})}}finally{L(Bp,`RPC '${e}' ${a} completed.`)}}));let c=JSON.stringify(r);L(Bp,`RPC '${e}' ${a} sending request:`,r),s.send(t,`POST`,c,n,15)}))}T_(t,n,r){let i=Fp(),a=[this.qo,`/`,`google.firestore.v1.Firestore`,`/`,t,`/channel`],o=this.createWebChannelTransport(),s={httpSessionIdParam:`gsessionid`,initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(s.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(s.useFetchStreams=!0),this.Go(s.initMessageHeaders,n,r),s.encodeInitMessageHeaders=!0;let l=a.join(``);L(Bp,`Creating RPC '${t}' stream ${i}: ${l}`,s);let u=o.createWebChannel(l,s);this.I_(u);let d=!1,f=!1,p=new zp({Ho:e=>{f?L(Bp,`Not sending because RPC '${t}' stream ${i} is closed:`,e):(d||=(L(Bp,`Opening RPC '${t}' stream ${i} transport.`),u.open(),!0),L(Bp,`RPC '${t}' stream ${i} sending:`,e),u.send(e))},Jo:()=>u.close()});return Vp(u,Ps.EventType.OPEN,(()=>{f||(L(Bp,`RPC '${t}' stream ${i} transport opened.`),p.i_())})),Vp(u,Ps.EventType.CLOSE,(()=>{f||(f=!0,L(Bp,`RPC '${t}' stream ${i} transport closed`),p.o_(),this.E_(u))})),Vp(u,Ps.EventType.ERROR,(e=>{f||(f=!0,qs(Bp,`RPC '${t}' stream ${i} transport errored. Name:`,e.name,`Message:`,e.message),p.o_(new V(B.UNAVAILABLE,`The operation could not be completed`)))})),Vp(u,Ps.EventType.MESSAGE,(e=>{if(!f){let n=e.data[0];Xs(!!n,16349);let r=n,a=r?.error||r[0]?.error;if(a){L(Bp,`RPC '${t}' stream ${i} received error:`,a);let e=a.status,n=function(e){let t=jd[e];if(t!==void 0)return Nd(t)}(e),r=a.message;e===`NOT_FOUND`&&r.includes(`database`)&&r.includes(`does not exist`)&&r.includes(this.databaseId.database)&&qs(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),n===void 0&&(n=B.INTERNAL,r=`Unknown error status: `+e+` with message `+a.message),f=!0,p.o_(new V(n,r)),u.close()}else L(Bp,`RPC '${t}' stream ${i} received:`,n),p.__(n)}})),e.u_(),setTimeout((()=>{p.s_()}),0),p}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,n){super.Go(e,t,n),this.databaseInfo.apiKey&&(e[`x-goog-api-key`]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Bs()}};function Up(e){return new Hp(e)}function Wp(){return typeof document<`u`?document:null}function Gp(e){return new $d(e,!0)}Hp.c_=!1;var Kp=class{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Ci=e,this.timerId=t,this.R_=n,this.A_=r,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();let t=Math.floor(this.d_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&L(`ExponentialBackoff`,`Backing off for ${r} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}},qp=`PersistentStream`,Jp=class{constructor(e,t,n,r,i,a,o,s){this.Ci=e,this.b_=n,this.S_=r,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=s,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Kp(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state===4?this.N_():this.auth()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&=(this.C_.cancel(),null)}U_(){this.v_&&=(this.v_.cancel(),null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e===4?t&&t.code===B.RESOURCE_EXHAUSTED?(Ks(t.toString()),Ks(`Using maximum backoff delay to prevent overloading the backend.`),this.M_.g_()):t&&t.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()):this.M_.reset(),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;let e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.D_===t&&this.G_(e,n)}),(t=>{e((()=>{let e=new V(B.UNKNOWN,`Fetching auth token failed: `+t.message);return this.z_(e)}))}))}G_(e,t){let n=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{n((()=>this.listener.Zo()))})),this.stream.Yo((()=>{n((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((e=>{n((()=>this.z_(e)))})),this.stream.onMessage((e=>{n((()=>++this.F_==1?this.H_(e):this.onNext(e)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return L(qp,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(L(qp,`stream callback skipped by getCloseGuardedDispatcher.`),Promise.resolve())))}}},Yp=class extends Jp{constructor(e,t,n,r,i,a){super(e,`listen_stream_connection_backoff`,`listen_stream_idle`,`health_check_timeout`,t,n,r,a),this.serializer=i}j_(e,t){return this.connection.T_(`Listen`,e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=gf(this.serializer,e),n=function(e){if(!(`targetChange`in e))return W.min();let t=e.targetChange;return t.targetIds&&t.targetIds.length?W.min():t.readTime?af(t.readTime):W.min()}(e);return this.listener.J_(t,n)}Z_(e){let t={};t.database=pf(this.serializer),t.addTarget=function(e,t){let n,r=t.target;if(n=_u(r)?{documents:yf(e,r)}:{query:bf(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=nf(e,t.resumeToken);let r=ef(e,t.expectedCount);r!==null&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(W.min())>0){n.readTime=tf(e,t.snapshotVersion.toTimestamp());let r=ef(e,t.expectedCount);r!==null&&(n.expectedCount=r)}return n}(this.serializer,e);let n=Sf(this.serializer,e);n&&(t.labels=n),this.K_(t)}X_(e){let t={};t.database=pf(this.serializer),t.removeTarget=e,this.K_(t)}},Xp=class extends Jp{constructor(e,t,n,r,i,a){super(e,`write_stream_connection_backoff`,`write_stream_idle`,`health_check_timeout`,t,n,r,a),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_(`Write`,e,t)}H_(e){return Xs(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Xs(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Xs(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=vf(e.writeResults,e.commitTime),n=af(e.commitTime);return this.listener.na(n,t)}ra(){let e={};e.database=pf(this.serializer),this.K_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map((e=>_f(this.serializer,e)))};this.K_(t)}},Zp=class{},Qp=class extends Zp{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new V(B.FAILED_PRECONDITION,`The client has already been terminated.`)}Wo(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,a])=>this.connection.Wo(e,sf(t,n),r,i,a))).catch((e=>{throw e.name===`FirebaseError`?(e.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new V(B.UNKNOWN,e.toString())}))}jo(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.jo(e,sf(t,n),r,a,o,i))).catch((e=>{throw e.name===`FirebaseError`?(e.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new V(B.UNKNOWN,e.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}};function $p(e,t,n,r){return new Qp(e,t,n,r)}var em=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=`Unknown`,this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca(`Unknown`),this._a=this.asyncQueue.enqueueAfterDelay(`online_state_timeout`,1e4,(()=>(this._a=null,this.la(`Backend didn't respond within 10 seconds.`),this.ca(`Offline`),Promise.resolve()))))}ha(e){this.state===`Online`?this.ca(`Unknown`):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca(`Offline`)))}set(e){this.Pa(),this.oa=0,e===`Online`&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ks(t),this.aa=!1):L(`OnlineStateTracker`,t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}},tm=`RemoteStore`,nm=class{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo((e=>{n.enqueueAndForget((async()=>{dm(this)&&(L(tm,`Restarting streams for network reachability change.`),await async function(e){let t=z(e);t.Ea.add(4),await im(t),t.Va.set(`Unknown`),t.Ea.delete(4),await rm(t)}(this))}))})),this.Va=new em(n,r)}};async function rm(e){if(dm(e))for(let t of e.Ra)await t(!0)}async function im(e){for(let t of e.Ra)await t(!1)}function am(e,t){let n=z(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),um(n)?lm(n):Am(n).O_()&&sm(n,t))}function om(e,t){let n=z(e),r=Am(n);n.Ia.delete(t),r.O_()&&cm(n,t),n.Ia.size===0&&(r.O_()?r.L_():dm(n)&&n.Va.set(`Unknown`))}function sm(e,t){if(e.da.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(W.min())>0){let n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Am(e).Z_(t)}function cm(e,t){e.da.$e(t),Am(e).X_(t)}function lm(e){e.da=new qd({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Am(e).start(),e.Va.ua()}function um(e){return dm(e)&&!Am(e).x_()&&e.Ia.size>0}function dm(e){return z(e).Ea.size===0}function fm(e){e.da=void 0}async function pm(e){e.Va.set(`Online`)}async function mm(e){e.Ia.forEach(((t,n)=>{sm(e,t)}))}async function hm(e,t){fm(e),um(e)?(e.Va.ha(t),lm(e)):e.Va.set(`Unknown`)}async function gm(e,t,n){if(e.Va.set(`Online`),t instanceof Gd&&t.state===2&&t.cause)try{await async function(e,t){let n=t.cause;for(let r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.da.removeTarget(r))}(e,t)}catch(n){L(tm,`Failed to remove targets %s: %s `,t.targetIds.join(`,`),n),await _m(e,n)}else if(t instanceof Ud?e.da.Xe(t):t instanceof Wd?e.da.st(t):e.da.tt(t),!n.isEqual(W.min()))try{let t=await xp(e.localStore);n.compareTo(t)>=0&&await function(e,t){let n=e.da.Tt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){let i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{let r=e.Ia.get(t);r&&(e.Ia.set(t,r.withResumeToken(q.EMPTY_BYTE_STRING,r.snapshotVersion)),cm(e,t),sm(e,new Nf(r.target,t,n,r.sequenceNumber)))})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){L(tm,`Failed to raise snapshot:`,t),await _m(e,t)}}async function _m(e,t,n){if(!Vc(t))throw t;e.Ea.add(1),await im(e),e.Va.set(`Offline`),n||=()=>xp(e.localStore),e.asyncQueue.enqueueRetryable((async()=>{L(tm,`Retrying IndexedDB access`),await n(),e.Ea.delete(1),await rm(e)}))}function vm(e,t){return t().catch((n=>_m(e,n,t)))}async function ym(e){let t=z(e),n=jm(t),r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Uc;for(;bm(t);)try{let e=await wp(t.localStore,r);if(e===null){t.Ta.length===0&&n.L_();break}r=e.batchId,xm(t,e)}catch(e){await _m(t,e)}Sm(t)&&Cm(t)}function bm(e){return dm(e)&&e.Ta.length<10}function xm(e,t){e.Ta.push(t);let n=jm(e);n.O_()&&n.Y_&&n.ea(t.mutations)}function Sm(e){return dm(e)&&!jm(e).x_()&&e.Ta.length>0}function Cm(e){jm(e).start()}async function wm(e){jm(e).ra()}async function Tm(e){let t=jm(e);for(let n of e.Ta)t.ea(n.mutations)}async function Em(e,t,n){let r=e.Ta.shift(),i=Od.from(r,t,n);await vm(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await ym(e)}async function Dm(e,t){t&&jm(e).Y_&&await async function(e,t){if(function(e){return Md(e)&&e!==B.ABORTED}(t.code)){let n=e.Ta.shift();jm(e).B_(),await vm(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await ym(e)}}(e,t),Sm(e)&&Cm(e)}async function Om(e,t){let n=z(e);n.asyncQueue.verifyOperationInProgress(),L(tm,`RemoteStore received new credentials`);let r=dm(n);n.Ea.add(3),await im(n),r&&n.Va.set(`Unknown`),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await rm(n)}async function km(e,t){let n=z(e);t?(n.Ea.delete(2),await rm(n)):t||(n.Ea.add(2),await im(n),n.Va.set(`Unknown`))}function Am(e){return e.ma||(e.ma=function(e,t,n){let r=z(e);return r.sa(),new Yp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:pm.bind(null,e),Yo:mm.bind(null,e),t_:hm.bind(null,e),J_:gm.bind(null,e)}),e.Ra.push((async t=>{t?(e.ma.B_(),um(e)?lm(e):e.Va.set(`Unknown`)):(await e.ma.stop(),fm(e))}))),e.ma}function jm(e){return e.fa||(e.fa=function(e,t,n){let r=z(e);return r.sa(),new Xp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:()=>Promise.resolve(),Yo:wm.bind(null,e),t_:Dm.bind(null,e),ta:Tm.bind(null,e),na:Em.bind(null,e)}),e.Ra.push((async t=>{t?(e.fa.B_(),await ym(e)):(await e.fa.stop(),e.Ta.length>0&&(L(tm,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))}))),e.fa}var Mm=class e{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Zs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,a){let o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new V(B.CANCELLED,`Operation cancelled`+(e?`: `+e:``))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle===null?Promise.resolve():(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e))))))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Nm(e,t){if(Ks(`AsyncQueue`,`${t}: ${e}`),Vc(e))return new V(B.UNAVAILABLE,`${t}: ${e}`);throw e}var Pm=class e{static emptySet(t){return new e(t.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||U.comparator(t.key,n.key):(e,t)=>U.comparator(e.key,t.key),this.keyedMap=Vu(),this.sortedSet=new K(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){let e=n.getNext().key,t=r.getNext().key;if(!e.isEqual(t))return!1}return!0}toString(){let e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?`DocumentSet ()`:`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(t,n){let r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}},Fm=class{constructor(){this.ga=new K(U.comparator)}track(e){let t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):R(63341,{Vt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}},Im=class e{constructor(e,t,n,r,i,a,o,s,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=s,this.hasCachedResults=c}static fromInitialDocuments(t,n,r,i,a){let o=[];return n.forEach((e=>{o.push({type:0,doc:e})})),new e(t,n,Pm.emptySet(n),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Au(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}},Lm=class{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}},Rm=class{constructor(){this.queries=zm(),this.onlineState=`Unknown`,this.Ca=new Set}terminate(){(function(e,t){let n=z(e),r=n.queries;n.queries=zm(),r.forEach(((e,n)=>{for(let e of n.ba)e.onError(t)}))})(this,new V(B.ABORTED,`Firestore shutting down`))}};function zm(){return new Lu((e=>ju(e)),Au)}async function Bm(e,t){let n=z(e),r=3,i=t.query,a=n.queries.get(i);a?!a.Sa()&&t.Da()&&(r=2):(a=new Lm,r=t.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){let n=Nm(e,`Initialization of query '${Mu(t.query)}' failed`);t.onError(n);return}n.queries.set(i,a),a.ba.push(t),t.va(n.onlineState),a.wa&&t.Fa(a.wa)&&Wm(n)}async function Vm(e,t){let n=z(e),r=t.query,i=3,a=n.queries.get(r);if(a){let e=a.ba.indexOf(t);e>=0&&(a.ba.splice(e,1),a.ba.length===0?i=t.Da()?0:1:!a.Sa()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Hm(e,t){let n=z(e),r=!1;for(let e of t){let t=e.query,i=n.queries.get(t);if(i){for(let t of i.ba)t.Fa(e)&&(r=!0);i.wa=e}}r&&Wm(n)}function Um(e,t,n){let r=z(e),i=r.queries.get(t);if(i)for(let e of i.ba)e.onError(n);r.queries.delete(t)}function Wm(e){e.Ca.forEach((e=>{e.next()}))}var Gm,Km;(Km=Gm||={}).Ma=`default`,Km.Cache=`cache`;var qm=class{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState=`Unknown`,this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){let t=[];for(let n of e.docChanges)n.type!==3&&t.push(n);e=new Im(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let n=t!==`Offline`;return(!this.options.Ka||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t===`Offline`)}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=Im.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Gm.Cache}},Jm=class{constructor(e){this.key=e}},Ym=class{constructor(e){this.key=e}},Xm=class{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=X(),this.mutatedKeys=X(),this.eu=Fu(e),this.tu=new Pm(this.eu)}get nu(){return this.Za}ru(e,t){let n=t?t.iu:new Fm,r=t?t.tu:this.tu,i=t?t.mutatedKeys:this.mutatedKeys,a=r,o=!1,s=this.query.limitType===`F`&&r.size===this.query.limit?r.last():null,c=this.query.limitType===`L`&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{let l=r.get(e),u=Nu(this.query,t)?t:null,d=!!l&&this.mutatedKeys.has(l.key),f=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations),p=!1;l&&u?l.data.isEqual(u.data)?d!==f&&(n.track({type:3,doc:u}),p=!0):this.su(l,u)||(n.track({type:2,doc:u}),p=!0,(s&&this.eu(u,s)>0||c&&this.eu(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),p=!0):l&&!u&&(n.track({type:1,doc:l}),p=!0,(s||c)&&(o=!0)),p&&(u?(a=a.add(u),i=f?i.add(e):i.delete(e)):(a=a.delete(e),i=i.delete(e)))})),this.query.limit!==null)for(;a.size>this.query.limit;){let e=this.query.limitType===`F`?a.last():a.first();a=a.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:a,iu:n,Ss:o,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){let i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let a=e.iu.ya();a.sort(((e,t)=>function(e,t){let n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return R(20277,{Vt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc))),this.ou(n),r??=!1;let o=t&&!r?this._u():[],s=this.Ya.size===0&&this.current&&!r?1:0,c=s!==this.Xa;return this.Xa=s,a.length!==0||c?{snapshot:new Im(this.query,e.tu,i,a,e.mutatedKeys,s===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e===`Offline`?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Fm,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((e=>this.Za=this.Za.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Za=this.Za.delete(e))),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Ya;this.Ya=X(),this.tu.forEach((e=>{this.uu(e.key)&&(this.Ya=this.Ya.add(e.key))}));let t=[];return e.forEach((e=>{this.Ya.has(e)||t.push(new Ym(e))})),this.Ya.forEach((n=>{e.has(n)||t.push(new Jm(n))})),t}cu(e){this.Za=e.ks,this.Ya=X();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Im.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}},Zm=`SyncEngine`,Qm=class{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}},$m=class{constructor(e){this.key=e,this.hu=!1}},eh=class{constructor(e,t,n,r,i,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Lu((e=>ju(e)),Au),this.Iu=new Map,this.Eu=new Set,this.Ru=new K(U.comparator),this.Au=new Map,this.Vu=new np,this.du={},this.mu=new Map,this.fu=Hf.ar(),this.onlineState=`Unknown`,this.gu=void 0}get isPrimaryClient(){return!0===this.gu}};async function th(e,t,n=!0){let r=Ch(e),i,a=r.Tu.get(t);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await rh(r,t,n,!0),i}async function nh(e,t){await rh(Ch(e),t,!0,!1)}async function rh(e,t,n,r){let i=await Tp(e.localStore,Tu(t)),a=i.targetId,o=e.sharedClientState.addLocalQueryTarget(a,n),s;return r&&(s=await ih(e,t,a,o===`current`,i.resumeToken)),e.isPrimaryClient&&n&&am(e.remoteStore,i),s}async function ih(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Ss&&(i=await Dp(e.localStore,t.query,!1).then((({documents:e})=>t.view.ru(e,i))));let a=r&&r.targetChanges.get(t.targetId),o=r&&r.targetMismatches.get(t.targetId)!=null,s=t.view.applyChanges(i,e.isPrimaryClient,a,o);return _h(e,t.targetId,s.au),s.snapshot}(e,t,n,r);let a=await Dp(e.localStore,t,!0),o=new Xm(t,a.ks),s=o.ru(a.documents),c=Hd.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!==`Offline`,i),l=o.applyChanges(s,e.isPrimaryClient,c);_h(e,n,l.au);let u=new Qm(t,n,o);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),l.snapshot}async function ah(e,t,n){let r=z(e),i=r.Tu.get(t),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((e=>!Au(e,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ep(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&om(r.remoteStore,i.targetId),hh(r,i.targetId)})).catch(zc)):(hh(r,i.targetId),await Ep(r.localStore,i.targetId,!0))}async function oh(e,t){let n=z(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),om(n.remoteStore,r.targetId))}async function sh(e,t,n){let r=wh(e);try{let e=await function(e,t){let n=z(e),r=Ac.now(),i=t.reduce(((e,t)=>e.add(t.key)),X()),a,o;return n.persistence.runTransaction(`Locally write mutations`,`readwrite`,(e=>{let s=zu(),c=X();return n.xs.getEntries(e,i).next((e=>{s=e,s.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,s))).next((i=>{a=i;let o=[];for(let e of t){let t=yd(e,a.get(e.key).overlayedDocument);t!=null&&o.push(new xd(e.key,t,Ul(t.value.mapValue),pd.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;let r=t.applyToLocalDocumentSet(a,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:Hu(a)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.du[e.currentUser.toKey()];r||=new K(H),r=r.insert(t,n),e.du[e.currentUser.toKey()]=r}(r,e.batchId,n),await bh(r,e.changes),await ym(r.remoteStore)}catch(e){let t=Nm(e,`Failed to persist write`);n.reject(t)}}async function ch(e,t){let n=z(e);try{let e=await Sp(n.localStore,t);t.targetChanges.forEach(((e,t)=>{let r=n.Au.get(t);r&&(Xs(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?Xs(r.hu,14607):e.removedDocuments.size>0&&(Xs(r.hu,42227),r.hu=!1))})),await bh(n,e,t)}catch(e){await zc(e)}}function lh(e,t,n){let r=z(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let e=[];r.Tu.forEach(((n,r)=>{let i=r.view.va(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){let n=z(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(let e of n.ba)e.va(t)&&(r=!0)})),r&&Wm(n)}(r.eventManager,t),e.length&&r.Pu.J_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function uh(e,t,n){let r=z(e);r.sharedClientState.updateQueryState(t,`rejected`,n);let i=r.Au.get(t),a=i&&i.key;if(a){let e=new K(U.comparator);e=e.insert(a,Wl.newNoDocument(a,W.min()));let n=X().add(a);await ch(r,new Vd(W.min(),new Map,new K(H),e,n)),r.Ru=r.Ru.remove(a),r.Au.delete(t),yh(r)}else await Ep(r.localStore,t,!1).then((()=>hh(r,t,n))).catch(zc)}async function dh(e,t){let n=z(e),r=t.batch.batchId;try{let e=await bp(n.localStore,t);mh(n,r,null),ph(n,r),n.sharedClientState.updateMutationState(r,`acknowledged`),await bh(n,e)}catch(e){await zc(e)}}async function fh(e,t,n){let r=z(e);try{let e=await function(e,t){let n=z(e);return n.persistence.runTransaction(`Reject batch`,`readwrite-primary`,(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Xs(t!==null,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);mh(r,t,n),ph(r,t),r.sharedClientState.updateMutationState(t,`rejected`,n),await bh(r,e)}catch(e){await zc(e)}}function ph(e,t){(e.mu.get(t)||[]).forEach((e=>{e.resolve()})),e.mu.delete(t)}function mh(e,t,n){let r=z(e),i=r.du[r.currentUser.toKey()];if(i){let e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.du[r.currentUser.toKey()]=i}}function hh(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(let r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Vu.Gr(t).forEach((t=>{e.Vu.containsKey(t)||gh(e,t)}))}function gh(e,t){e.Eu.delete(t.path.canonicalString());let n=e.Ru.get(t);n!==null&&(om(e.remoteStore,n),e.Ru=e.Ru.remove(t),e.Au.delete(n),yh(e))}function _h(e,t,n){for(let r of n)r instanceof Jm?(e.Vu.addReference(r.key,t),vh(e,r)):r instanceof Ym?(L(Zm,`Document no longer in limbo: `+r.key),e.Vu.removeReference(r.key,t),e.Vu.containsKey(r.key)||gh(e,r.key)):R(19791,{wu:r})}function vh(e,t){let n=t.key,r=n.path.canonicalString();e.Ru.get(n)||e.Eu.has(r)||(L(Zm,`New document in limbo: `+n),e.Eu.add(r),yh(e))}function yh(e){for(;e.Eu.size>0&&e.Ru.size<e.maxConcurrentLimboResolutions;){let t=e.Eu.values().next().value;e.Eu.delete(t);let n=new U(hc.fromString(t)),r=e.fu.next();e.Au.set(r,new $m(n)),e.Ru=e.Ru.insert(n,r),am(e.remoteStore,new Nf(Tu(bu(n.path)),r,`TargetPurposeLimboResolution`,Hc.ce))}}async function bh(e,t,n){let r=z(e),i=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((e,s)=>{o.push(r.pu(s,t,n).then((e=>{if((e||n)&&r.isPrimaryClient){let t=e?!e.fromCache:n?.targetChanges.get(s.targetId)?.current;r.sharedClientState.updateQueryState(s.targetId,t?`current`:`not-current`)}if(e){i.push(e);let t=fp.Es(s.targetId,e);a.push(t)}})))})),await Promise.all(o),r.Pu.J_(i),await async function(e,t){let n=z(e);try{await n.persistence.runTransaction(`notifyLocalViewChanges`,`readwrite`,(e=>G.forEach(t,(t=>G.forEach(t.Ts,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>G.forEach(t.Is,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Vc(e))throw e;L(hp,`Failed to update sequence numbers: `+e)}for(let e of t){let t=e.targetId;if(!e.fromCache){let e=n.vs.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.vs=n.vs.insert(t,i)}}}(r.localStore,a))}async function xh(e,t){let n=z(e);if(!n.currentUser.isEqual(t)){L(Zm,`User change. New user:`,t.toKey());let e=await yp(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach((e=>{e.forEach((e=>{e.reject(new V(B.CANCELLED,t))}))})),e.mu.clear()}(n,`'waitForPendingWrites' promise is rejected due to a user change.`),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await bh(n,e.Ns)}}function Sh(e,t){let n=z(e),r=n.Au.get(t);if(r&&r.hu)return X().add(r.key);{let e=X(),r=n.Iu.get(t);if(!r)return e;for(let t of r){let r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function Ch(e){let t=z(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=ch.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Sh.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=uh.bind(null,t),t.Pu.J_=Hm.bind(null,t.eventManager),t.Pu.yu=Um.bind(null,t.eventManager),t}function wh(e){let t=z(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=dh.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=fh.bind(null,t),t}var Th=class{constructor(){this.kind=`memory`,this.synchronizeTabs=!1}async initialize(e){this.serializer=Gp(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return vp(this.persistence,new mp,e.initialUser,this.serializer)}Cu(e){return new cp(up.Vi,this.serializer)}Du(e){return new Ap}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}};Th.provider={build:()=>new Th};var Eh=class extends Th{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Xs(this.persistence.referenceDelegate instanceof dp,46915);let n=this.persistence.referenceDelegate.garbageCollector;return new qf(n,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes===void 0?Vf.DEFAULT:Vf.withCacheSize(this.cacheSizeBytes);return new cp((e=>dp.Vi(e,t)),this.serializer)}},Dh=class{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>lh(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=xh.bind(null,this.syncEngine),await km(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Rm}()}createDatastore(e){let t=Gp(e.databaseInfo.databaseId),n=Up(e.databaseInfo);return $p(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new nm(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>lh(this.syncEngine,e,0)),function(){return Np.v()?new Np:new jp}())}createSyncEngine(e,t){return function(e,t,n,r,i,a,o){let s=new eh(e,t,n,r,i,a);return o&&(s.gu=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function(e){let t=z(e);L(tm,`RemoteStore shutting down.`),t.Ea.add(5),await im(t),t.Aa.shutdown(),t.Va.set(`Unknown`)}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}};Dh.provider={build:()=>new Dh};var Oh=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ks(`Uncaught Error in snapshot listener:`,e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}},kh=`FirestoreClient`,Ah=class{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this._databaseInfo=r,this.user=Vs.UNAUTHENTICATED,this.clientId=sc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{L(kh,`Received user=`,e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(L(kh,`Received new app check token=`,e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Zs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let n=Nm(t,`Failed to shutdown persistence`);e.reject(n)}})),e.promise}};async function jh(e,t){e.asyncQueue.verifyOperationInProgress(),L(kh,`Initializing OfflineComponentProvider`);let n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await yp(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Mh(e,t){e.asyncQueue.verifyOperationInProgress();let n=await Nh(e);L(kh,`Initializing OnlineComponentProvider`),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Om(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Om(t.remoteStore,n))),e._onlineComponents=t}async function Nh(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){L(kh,`Using user provided OfflineComponentProvider`);try{await jh(e,e._uninitializedComponentsProvider._offline)}catch(t){let n=t;if(!function(e){return e.name===`FirebaseError`?e.code===B.FAILED_PRECONDITION||e.code===B.UNIMPLEMENTED:!(typeof DOMException<`u`&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}(n))throw n;qs(`Error using user provided cache. Falling back to memory cache: `+n),await jh(e,new Th)}}else L(kh,`Using default OfflineComponentProvider`),await jh(e,new Eh(void 0));return e._offlineComponents}async function Ph(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(L(kh,`Using user provided OnlineComponentProvider`),await Mh(e,e._uninitializedComponentsProvider._online)):(L(kh,`Using default OnlineComponentProvider`),await Mh(e,new Dh))),e._onlineComponents}function Fh(e){return Ph(e).then((e=>e.syncEngine))}async function Ih(e){let t=await Ph(e),n=t.eventManager;return n.onListen=th.bind(null,t.syncEngine),n.onUnlisten=ah.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=nh.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=oh.bind(null,t.syncEngine),n}function Lh(e,t,n={}){let r=new Zs;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){let a=new Oh({next:s=>{a.Nu(),t.enqueueAndForget((()=>Vm(e,o)));let c=s.docs.has(n);!c&&s.fromCache?i.reject(new V(B.UNAVAILABLE,`Failed to get document because the client is offline.`)):c&&s.fromCache&&r&&r.source===`server`?i.reject(new V(B.UNAVAILABLE,`Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)`)):i.resolve(s)},error:e=>i.reject(e)}),o=new qm(bu(n.path),a,{includeMetadataChanges:!0,Ka:!0});return Bm(e,o)}(await Ih(e),e.asyncQueue,t,n,r))),r.promise}function Rh(e,t,n={}){let r=new Zs;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){let a=new Oh({next:n=>{a.Nu(),t.enqueueAndForget((()=>Vm(e,o))),n.fromCache&&r.source===`server`?i.reject(new V(B.UNAVAILABLE,`Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)`)):i.resolve(n)},error:e=>i.reject(e)}),o=new qm(n,a,{includeMetadataChanges:!0,Ka:!0});return Bm(e,o)}(await Ih(e),e.asyncQueue,t,n,r))),r.promise}function zh(e,t){let n=new Zs;return e.asyncQueue.enqueueAndForget((async()=>sh(await Fh(e),t,n))),n.promise}function Bh(e){let t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}var Vh=`ComponentProvider`,Hh=new Map;function Uh(e,t,n,r,i){return new _l(e,t,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,Bh(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}var Wh=`firestore.googleapis.com`,Gh=!0,Kh=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new V(B.INVALID_ARGUMENT,`Can't provide ssl option if host option is not set`);this.host=Wh,this.ssl=Gh}else this.host=e.host,this.ssl=e.ssl??Gh;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Bf;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Wf)throw new V(B.INVALID_ARGUMENT,`cacheSizeBytes must be at least 1048576`);this.cacheSizeBytes=e.cacheSizeBytes}yc(`experimentalForceLongPolling`,e.experimentalForceLongPolling,`experimentalAutoDetectLongPolling`,e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Bh(e.experimentalLongPollingOptions??{}),function(e){if(e.timeoutSeconds!==void 0){if(isNaN(e.timeoutSeconds))throw new V(B.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new V(B.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new V(B.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},qh=class{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type=`firestore-lite`,this._persistenceKey=`(lite)`,this._settings=new Kh({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask=`notTerminated`}get app(){if(!this._app)throw new V(B.FAILED_PRECONDITION,`Firestore was not initialized using the Firebase SDK. 'app' is not available`);return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==`notTerminated`}_setSettings(e){if(this._settingsFrozen)throw new V(B.FAILED_PRECONDITION,`Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.`);this._settings=new Kh(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(e){if(!e)return new $s;switch(e.type){case`firstParty`:return new rc(e.sessionIndex||`0`,e.iamToken||null,e.authTokenFactory||null);case`provider`:return e.client;default:throw new V(B.INVALID_ARGUMENT,`makeAuthCredentialsProvider failed due to invalid credential type`)}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask===`notTerminated`&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask===`notTerminated`?await this._terminate():this._terminateTask=`notTerminated`}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let t=Hh.get(e);t&&(L(Vh,`Removing Datastore`),Hh.delete(e),t.terminate())}(this),Promise.resolve()}};function Jh(e,t,n,r={}){e=wc(e,qh);let i=A(t),a=e._getSettings(),o={...a,emulatorOptions:e._getEmulatorOptions()},s=`${t}:${n}`;i&&(j(`https://${s}`),de(`Firestore`,!0)),a.host!==Wh&&a.host!==s&&qs(`Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.`);let c={...a,host:s,ssl:i,emulatorOptions:r};if(!Oe(c,o)&&(e._setSettings(c),r.mockUserToken)){let t,n;if(typeof r.mockUserToken==`string`)t=r.mockUserToken,n=Vs.MOCK_USER;else{t=oe(r.mockUserToken,e._app?.options.projectId);let i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new V(B.INVALID_ARGUMENT,`mockUserToken must contain 'sub' or 'user_id' field!`);n=new Vs(i)}e._authCredentials=new ec(new Qs(t,n))}}var Yh=class e{constructor(e,t,n){this.converter=t,this._query=n,this.type=`query`,this.firestore=e}withConverter(t){return new e(this.firestore,t,this._query)}},Xh=class e{constructor(e,t,n){this.converter=t,this._key=n,this.type=`document`,this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zh(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new e(this.firestore,t,this._key)}toJSON(){return{type:e._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,r){if(Dc(n,e._jsonSchema))return new e(t,r||null,new U(hc.fromString(n.referencePath)))}};Xh._jsonSchemaVersion=`firestore/documentReference/1.0`,Xh._jsonSchema={type:Ec(`string`,Xh._jsonSchemaVersion),referencePath:Ec(`string`)};var Zh=class e extends Yh{constructor(e,t,n){super(e,t,bu(n)),this._path=n,this.type=`collection`}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Xh(this.firestore,null,new U(e))}withConverter(t){return new e(this.firestore,t,this._path)}};function Qh(e,t,...n){if(e=Le(e),vc(`collection`,`path`,t),e instanceof qh){let r=hc.fromString(t,...n);return xc(r),new Zh(e,null,r)}{if(!(e instanceof Xh||e instanceof Zh))throw new V(B.INVALID_ARGUMENT,`Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore`);let r=e._path.child(hc.fromString(t,...n));return xc(r),new Zh(e.firestore,null,r)}}function $h(e,t,...n){if(e=Le(e),arguments.length===1&&(t=sc.newId()),vc(`doc`,`path`,t),e instanceof qh){let r=hc.fromString(t,...n);return bc(r),new Xh(e,null,new U(r))}{if(!(e instanceof Xh||e instanceof Zh))throw new V(B.INVALID_ARGUMENT,`Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore`);let r=e._path.child(hc.fromString(t,...n));return bc(r),new Xh(e.firestore,e instanceof Zh?e.converter:null,new U(r))}}var eg=`AsyncQueue`,tg=class{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Kp(this,`async_queue_retry`),this._c=()=>{let e=Wp();e&&L(eg,`Visibility state changed to `+e.visibilityState),this.M_.w_()},this.ac=e;let t=Wp();t&&typeof t.addEventListener==`function`&&t.addEventListener(`visibilitychange`,this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=Wp();t&&typeof t.removeEventListener==`function`&&t.removeEventListener(`visibilitychange`,this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));let t=new Zs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Vc(e))throw e;L(eg,`Operation failed with retryable error: `+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){let t=this.ac.then((()=>(this.rc=!0,e().catch((e=>{throw this.nc=e,this.rc=!1,Ks(`INTERNAL UNHANDLED ERROR: `,ng(e)),e})).then((e=>(this.rc=!1,e))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let r=Mm.createAndSchedule(this,e,t,n,(e=>this.hc(e)));return this.tc.push(r),r}uc(){this.nc&&R(47125,{Pc:ng(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(let t of this.tc)if(t.skipDelay(),e!==`all`&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function ng(e){let t=e.message||``;return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}var rg=class extends qh{constructor(e,t,n,r){super(e,t,n,r),this.type=`firestore`,this._queue=new tg,this._persistenceKey=r?.name||`[DEFAULT]`}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new tg(e),this._firestoreClient=void 0,await e}}};function ig(e,t){let n=typeof e==`object`?e:un(),r=typeof e==`string`?e:t||vl,i=rn(n,`firestore`).getImmediate({identifier:r});if(!i._initialized){let e=ne(`firestore`);e&&Jh(i,...e)}return i}function ag(e){if(e._terminated)throw new V(B.FAILED_PRECONDITION,`The client has already been terminated.`);return e._firestoreClient||og(e),e._firestoreClient}function og(e){let t=e._freezeSettings(),n=Uh(e._databaseId,e._app?.options.appId||``,e._persistenceKey,e._app?.options.apiKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new Ah(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(e){let t=e?._online.build();return{_offline:e?._offline.build(t),_online:t}}(e._componentsProvider))}var sg=class e{constructor(e){this._byteString=e}static fromBase64String(t){try{return new e(q.fromBase64String(t))}catch(e){throw new V(B.INVALID_ARGUMENT,`Failed to construct data from Base64 string: `+e)}}static fromUint8Array(t){return new e(q.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return`Bytes(base64: `+this.toBase64()+`)`}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:e._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Dc(t,e._jsonSchema))return e.fromBase64String(t.bytes)}};sg._jsonSchemaVersion=`firestore/bytes/1.0`,sg._jsonSchema={type:Ec(`string`,sg._jsonSchemaVersion),bytes:Ec(`string`)};var cg=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new V(B.INVALID_ARGUMENT,`Invalid field name at argument $(i + 1). Field names must not be empty.`);this._internalPath=new _c(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}},lg=class{constructor(e){this._methodName=e}},ug=class e{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new V(B.INVALID_ARGUMENT,`Latitude must be a number between -90 and 90, but was: `+e);if(!isFinite(t)||t<-180||t>180)throw new V(B.INVALID_ARGUMENT,`Longitude must be a number between -180 and 180, but was: `+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return H(this._lat,e._lat)||H(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:e._jsonSchemaVersion}}static fromJSON(t){if(Dc(t,e._jsonSchema))return new e(t.latitude,t.longitude)}};ug._jsonSchemaVersion=`firestore/geoPoint/1.0`,ug._jsonSchema={type:Ec(`string`,ug._jsonSchemaVersion),latitude:Ec(`number`),longitude:Ec(`number`)};var dg=class e{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:e._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Dc(t,e._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e==`number`)))return new e(t.vectorValues);throw new V(B.INVALID_ARGUMENT,`Expected 'vectorValues' field to be a number array`)}}};dg._jsonSchemaVersion=`firestore/vectorValue/1.0`,dg._jsonSchema={type:Ec(`string`,dg._jsonSchemaVersion),vectorValues:Ec(`object`)};var fg=/^__.*__$/,pg=class{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new xd(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function mg(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw R(40011,{dataSource:e})}}var hg=class e{constructor(e,t,n,r,i,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,i===void 0&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(t){return new e({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){let t=this.path?.child(e),n=this.contextWith({path:t,arrayElement:!1});return n.validatePathSegment(e),n}childContextForFieldPath(e){let t=this.path?.child(e),n=this.contextWith({path:t,arrayElement:!1});return n.validatePath(),n}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return kg(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError(`Document fields must not be empty`);if(mg(this.dataSource)&&fg.test(e))throw this.createError(`Document fields cannot begin and end with "__"`)}},gg=class{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Gp(e)}createContext(e,t,n,r=!1){return new hg({dataSource:e,methodName:t,targetDoc:n,path:_c.emptyPath(),arrayElement:!1,hasConverter:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function _g(e){let t=e._freezeSettings(),n=Gp(e._databaseId);return new gg(e._databaseId,!!t.ignoreUndefinedProperties,n)}var vg=class e extends lg{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(t){return t instanceof e}};function yg(e,t,n,r){let i=e.createContext(1,t,n);Tg(`Data must be an object, but it was:`,i,r);let a=[],o=Hl.empty();return Qc(r,((e,r)=>{let s=Og(t,e,n);r=Le(r);let c=i.childContextForFieldPath(s);if(r instanceof vg)a.push(s);else{let e=Sg(r,c);e!=null&&(a.push(s),o.set(s,e))}})),new pg(o,new il(a),i.fieldTransforms)}function bg(e,t,n,r,i,a){let o=e.createContext(1,t,n),s=[Eg(t,r,n)],c=[i];if(a.length%2!=0)throw new V(B.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<a.length;e+=2)s.push(Eg(t,a[e])),c.push(a[e+1]);let l=[],u=Hl.empty();for(let e=s.length-1;e>=0;--e)if(!Ag(l,s[e])){let t=s[e],n=c[e];n=Le(n);let r=o.childContextForFieldPath(t);if(n instanceof vg)l.push(t);else{let e=Sg(n,r);e!=null&&(l.push(t),u.set(t,e))}}return new pg(u,new il(l),o.fieldTransforms)}function xg(e,t,n,r=!1){return Sg(n,e.createContext(r?4:3,t))}function Sg(e,t){if(wg(e=Le(e)))return Tg(`Unsupported field value:`,t,e),Cg(e,t);if(e instanceof lg)return function(e,t){if(!mg(t.dataSource))throw t.createError(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.createError(`${e._methodName}() is not currently supported inside arrays`);let n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.arrayElement&&t.dataSource!==4)throw t.createError(`Nested arrays are not supported`);return function(e,t){let n=[],r=0;for(let i of e){let e=Sg(i,t.childContextForArray(r));e??={nullValue:`NULL_VALUE`},n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if((e=Le(e))===null)return{nullValue:`NULL_VALUE`};if(typeof e==`number`)return Qu(t.serializer,e);if(typeof e==`boolean`)return{booleanValue:e};if(typeof e==`string`)return{stringValue:e};if(e instanceof Date){let n=Ac.fromDate(e);return{timestampValue:tf(t.serializer,n)}}if(e instanceof Ac){let n=new Ac(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:tf(t.serializer,n)}}if(e instanceof ug)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof sg)return{bytesValue:nf(t.serializer,e._byteString)};if(e instanceof Xh){let n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.createError(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:of(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof dg)return function(e,t){let n=e instanceof dg?e.toArray():e;return{mapValue:{fields:{[xl]:{stringValue:wl},[Tl]:{arrayValue:{values:n.map((e=>{if(typeof e!=`number`)throw t.createError(`VectorValues must only contain numeric values.`);return Xu(t.serializer,e)}))}}}}}}(e,t);if(Mf(e))return e._toProto(t.serializer);throw t.createError(`Unsupported field value: ${Cc(e)}`)}(e,t)}function Cg(e,t){let n={};return $c(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Qc(e,((e,r)=>{let i=Sg(r,t.childContextForField(e));i!=null&&(n[e]=i)})),{mapValue:{fields:n}}}function wg(e){return!(typeof e!=`object`||!e||e instanceof Array||e instanceof Date||e instanceof Ac||e instanceof ug||e instanceof sg||e instanceof Xh||e instanceof lg||e instanceof dg||Mf(e))}function Tg(e,t,n){if(!wg(n)||!Sc(n)){let r=Cc(n);throw r===`an object`?t.createError(e+` a custom object`):t.createError(e+` `+r)}}function Eg(e,t,n){if((t=Le(t))instanceof cg)return t._internalPath;if(typeof t==`string`)return Og(e,t);throw kg(`Field path arguments must be of type string or `,e,!1,void 0,n)}var Dg=RegExp(`[~\\*/\\[\\]]`);function Og(e,t,n){if(t.search(Dg)>=0)throw kg(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new cg(...t.split(`.`))._internalPath}catch{throw kg(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function kg(e,t,n,r,i){let a=r&&!r.isEmpty(),o=i!==void 0,s=`Function ${t}() called with invalid data`;n&&(s+=" (via `toFirestore()`)"),s+=`. `;let c=``;return(a||o)&&(c+=` (found`,a&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=`)`),new V(B.INVALID_ARGUMENT,s+e+c)}function Ag(e,t){return e.some((e=>e.isEqual(t)))}var jg=class{convertValue(e,t=`none`){switch(El(e)){case 0:return null;case 1:return e.booleanValue;case 2:return cl(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ll(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw R(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t=`none`){let n={};return Qc(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){let t=e.fields?.[Tl].arrayValue?.values?.map((e=>cl(e.doubleValue)));return new dg(t)}convertGeoPoint(e){return new ug(cl(e.latitude),cl(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case`previous`:let n=hl(e);return n==null?null:this.convertValue(n,t);case`estimate`:return this.convertTimestamp(gl(e));default:return null}}convertTimestamp(e){let t=sl(e);return new Ac(t.seconds,t.nanos)}convertDocumentKey(e,t){let n=hc.fromString(e);Xs(jf(n),9688,{name:e});let r=new yl(n.get(1),n.get(3)),i=new U(n.popFirst(5));return r.isEqual(t)||Ks(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}},Mg=class extends jg{constructor(e){super(),this.firestore=e}convertBytes(e){return new sg(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Xh(this.firestore,null,t)}},Ng=`@firebase/firestore`,Pg=`4.11.0`,Fg=class{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Xh(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Ig(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){let t=this._document.data.field(Eg(`DocumentSnapshot.get`,e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Ig=class extends Fg{data(){return super.data()}};function Lg(e){if(e.limitType===`L`&&e.explicitOrderBy.length===0)throw new V(B.UNIMPLEMENTED,`limitToLast() queries require specifying at least one orderBy() clause`)}var Rg=class{},zg=class extends Rg{};function Bg(e,t,...n){let r=[];t instanceof Rg&&r.push(t),r=r.concat(n),function(e){let t=e.filter((e=>e instanceof Ug)).length,n=e.filter((e=>e instanceof Vg)).length;if(t>1||t>0&&n>0)throw new V(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let t of r)e=t._apply(e);return e}var Vg=class e extends zg{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type=`where`}static _create(t,n,r){return new e(t,n,r)}_apply(e){let t=this._parse(e);return Xg(e._query,t),new Yh(e.firestore,e.converter,Du(e._query,t))}_parse(e){let t=_g(e.firestore);return function(e,t,n,r,i,a,o){let s;if(i.isKeyField()){if(a===`array-contains`||a===`array-contains-any`)throw new V(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${a}' queries on documentId().`);if(a===`in`||a===`not-in`){Yg(o,a);let t=[];for(let n of o)t.push(Jg(r,e,n));s={arrayValue:{values:t}}}else s=Jg(r,e,o)}else a!==`in`&&a!==`not-in`&&a!==`array-contains-any`||Yg(o,a),s=xg(n,t,o,a===`in`||a===`not-in`);return Zl.create(i,a,s)}(e._query,`where`,t,e.firestore._databaseId,this._field,this._op,this._value)}};function Hg(e,t,n){let r=t,i=Eg(`where`,e);return Vg._create(i,r,n)}var Ug=class e extends Rg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(t,n){return new e(t,n)}_parse(e){let t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return t.length===1?t[0]:Ql.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(e,t){let n=e,r=t.getFlattenedFilters();for(let e of r)Xg(n,e),n=Du(n,e)}(e._query,t),new Yh(e.firestore,e.converter,Du(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type===`and`?`and`:`or`}},Wg=class e extends zg{constructor(e,t){super(),this._field=e,this._direction=t,this.type=`orderBy`}static _create(t,n){return new e(t,n)}_apply(e){let t=function(e,t,n){if(e.startAt!==null)throw new V(B.INVALID_ARGUMENT,`Invalid query. You must not call startAt() or startAfter() before calling orderBy().`);if(e.endAt!==null)throw new V(B.INVALID_ARGUMENT,`Invalid query. You must not call endAt() or endBefore() before calling orderBy().`);return new Jl(t,n)}(e._query,this._field,this._direction);return new Yh(e.firestore,e.converter,Ou(e._query,t))}};function Gg(e,t=`asc`){let n=t,r=Eg(`orderBy`,e);return Wg._create(r,n)}var Kg=class e extends zg{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(t,n,r){return new e(t,n,r)}_apply(e){return new Yh(e.firestore,e.converter,ku(e._query,this._limit,this._limitType))}};function qg(e){return Tc(`limit`,e),Kg._create(`limit`,e,`F`)}function Jg(e,t,n){if(typeof(n=Le(n))==`string`){if(n===``)throw new V(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.`);if(!Cu(t)&&n.indexOf(`/`)!==-1)throw new V(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=t.path.child(hc.fromString(n));if(!U.isDocumentKey(r))throw new V(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Fl(e,new U(r))}if(n instanceof Xh)return Fl(e,n._key);throw new V(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cc(n)}.`)}function Yg(e,t){if(!Array.isArray(e)||e.length===0)throw new V(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Xg(e,t){let n=function(e,t){for(let n of e)for(let e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case`!=`:return[`!=`,`not-in`];case`array-contains-any`:case`in`:return[`not-in`];case`not-in`:return[`array-contains-any`,`in`,`not-in`,`!=`];default:return[]}}(t.op));if(n!==null)throw n===t.op?new V(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new V(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}var Zg=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Qg=class e extends Fg{constructor(e,t,n,r,i,a){super(e,t,n,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new $g(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let n=this._document.data.field(Eg(`DocumentSnapshot.get`,e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new V(B.FAILED_PRECONDITION,`DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().`);let t=this._document,n={};return n.type=e._jsonSchemaVersion,n.bundle=``,n.bundleSource=`DocumentSnapshot`,n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,`previous`),n.bundle=(this._firestore,this.ref.path,`NOT SUPPORTED`),n)}};Qg._jsonSchemaVersion=`firestore/documentSnapshot/1.0`,Qg._jsonSchema={type:Ec(`string`,Qg._jsonSchemaVersion),bundleSource:Ec(`string`,`DocumentSnapshot`),bundleName:Ec(`string`),bundle:Ec(`string`)};var $g=class extends Qg{data(e={}){return super.data(e)}},e_=class e{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Zg(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){let e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new $g(this._firestore,this._userDataWriter,n.key,n,new Zg(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new V(B.INVALID_ARGUMENT,`To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().`);return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{let r=new $g(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Zg(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:`added`,doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||e.type!==3)).map((t=>{let r=new $g(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Zg(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return t.type!==0&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),t.type!==1&&(n=n.add(t.doc),a=n.indexOf(t.doc.key)),{type:t_(t.type),doc:r,oldIndex:i,newIndex:a}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new V(B.FAILED_PRECONDITION,`QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().`);let t={};t.type=e._jsonSchemaVersion,t.bundleSource=`QuerySnapshot`,t.bundleName=sc.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach((e=>{e._document!==null&&(n.push(e._document),r.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,`previous`)),i.push(e.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,`NOT SUPPORTED`),t}};function t_(e){switch(e){case 0:return`added`;case 2:case 3:return`modified`;case 1:return`removed`;default:return R(61501,{type:e})}}e_._jsonSchemaVersion=`firestore/querySnapshot/1.0`,e_._jsonSchema={type:Ec(`string`,e_._jsonSchemaVersion),bundleSource:Ec(`string`,`QuerySnapshot`),bundleName:Ec(`string`),bundle:Ec(`string`)};function n_(e){e=wc(e,Xh);let t=wc(e.firestore,rg);return Lh(ag(t),e._key).then((n=>o_(t,e,n)))}function r_(e){e=wc(e,Yh);let t=wc(e.firestore,rg),n=ag(t),r=new Mg(t);return Lg(e._query),Rh(n,e._query).then((n=>new e_(t,r,e,n)))}function i_(e,t,n,...r){e=wc(e,Xh);let i=wc(e.firestore,rg),a=_g(i),o;return o=typeof(t=Le(t))==`string`||t instanceof cg?bg(a,`updateDoc`,e._key,t,n,r):yg(a,`updateDoc`,e._key,t),a_(i,[o.toMutation(e._key,pd.exists(!0))])}function a_(e,t){return zh(ag(e),t)}function o_(e,t,n){let r=n.docs.get(t._key);return new Qg(e,new Mg(e),t._key,r,new Zg(n.hasPendingWrites,n.fromCache),t.converter)}(function(e,t=!0){Us(cn),nn(new Re(`firestore`,((e,{instanceIdentifier:n,options:r})=>{let i=e.getProvider(`app`).getImmediate(),a=new rg(new tc(e.getProvider(`auth-internal`)),new ac(i,e.getProvider(`app-check-internal`)),bl(i,n),i);return r={useFetchStreams:t,...r},a._setSettings(r),a}),`PUBLIC`).setMultipleInstances(!0)),fn(Ng,Pg,e),fn(Ng,Pg,`esm2020`)})();const s_=dn().length?dn()[0]:ln({apiKey:`AIzaSyBY6fvHTTR4jVVEAlXua4Mwb1bwsksVeUY`,authDomain:`title-app-alpha.firebaseapp.com`,projectId:`title-app-alpha`,storageBucket:`title-app-alpha.firebasestorage.app`,messagingSenderId:`496560182504`,appId:`1:496560182504:web:d3c393bd7d4898a891e55d`,measurementId:`G-REDNYLES89`}),c_=Ts(s_),l_=ig(s_);var u_=o((e=>{var t=Symbol.for(`react.transitional.element`),n=Symbol.for(`react.fragment`);function r(e,n,r){var i=null;if(r!==void 0&&(i=``+r),n.key!==void 0&&(i=``+n.key),`key`in n)for(var a in r={},n)a!==`key`&&(r[a]=n[a]);else r=n;return n=r.ref,{$$typeof:t,type:e,key:i,ref:n===void 0?null:n,props:r}}e.Fragment=n,e.jsx=r,e.jsxs=r})),$=o(((e,t)=>{t.exports=u_()}))(),d_=[{id:`personal`,headline:`Your stuff really matters.
Now it's really protected.`,subtitle:`Vehicles, property, documents, deadlines -- tracked and organized by AI.`,bubbles:[`Track my car's value`,`When does my passport expire?`,`Organize my documents`,`I just need something simple`]},{id:`entrepreneur`,headline:`You have the expertise.
Now build your AI business.`,subtitle:`Turn what you know into a service people pay for. No code. 30 minutes.`,bubbles:[`I help people relocate abroad`,`I want to build an AI service`,`Turn my consulting into a product`,`What can I build?`]},{id:`compliance`,headline:`Compliance shouldn't keep
you up at night.`,subtitle:`Rules change constantly. TitleApp keeps up so you don't have to.`,bubbles:[`Set up compliance monitoring`,`Audit my current records`,`Industry regulation updates`,`Document retention policies`]},{id:`sales`,headline:`While you were living your life,
your AI was closing deals.`,subtitle:`Every lead remembered. Every follow-up sent. Every deal tracked.`,bubbles:[`Show me my stale inventory`,`Who's my hottest lead?`,`Draft a follow-up`,`How much could I save?`]}],f_={expat:`entrepreneur`,builder:`entrepreneur`,realestate:`sales`,auto:`sales`,aviation:`compliance`},p_={linkedin:`compliance`,tiktok:`entrepreneur`};function m_(){let e=new URLSearchParams(window.location.search),t=e.get(`ref`),n=e.get(`utm_source`),r=null;if(t&&f_[t]?r=f_[t]:n&&p_[n]&&(r=p_[n]),r){let e=d_.findIndex(e=>e.id===r);if(e>=0)return e}return null}function h_({size:e=40}){return(0,$.jsxs)(`svg`,{width:e,height:e,viewBox:`0 0 200 200`,fill:`none`,children:[(0,$.jsx)(`circle`,{cx:`100`,cy:`100`,r:`95`,fill:`#7c3aed`}),(0,$.jsx)(`circle`,{cx:`100`,cy:`100`,r:`80`,fill:`#7c3aed`,stroke:`white`,strokeWidth:`2`}),(0,$.jsx)(`circle`,{cx:`100`,cy:`100`,r:`70`,fill:`none`,stroke:`white`,strokeWidth:`1`,strokeDasharray:`3,5`}),(0,$.jsx)(`line`,{x1:`100`,y1:`5`,x2:`100`,y2:`30`,stroke:`white`,strokeWidth:`2`}),(0,$.jsx)(`line`,{x1:`100`,y1:`170`,x2:`100`,y2:`195`,stroke:`white`,strokeWidth:`2`}),(0,$.jsx)(`line`,{x1:`5`,y1:`100`,x2:`30`,y2:`100`,stroke:`white`,strokeWidth:`2`}),(0,$.jsx)(`line`,{x1:`170`,y1:`100`,x2:`195`,y2:`100`,stroke:`white`,strokeWidth:`2`}),(0,$.jsx)(`circle`,{cx:`100`,cy:`80`,r:`18`,fill:`white`}),(0,$.jsx)(`circle`,{cx:`100`,cy:`80`,r:`8`,fill:`#7c3aed`}),(0,$.jsx)(`rect`,{x:`94`,y:`90`,width:`12`,height:`35`,fill:`white`}),(0,$.jsx)(`rect`,{x:`94`,y:`115`,width:`8`,height:`4`,fill:`white`}),(0,$.jsx)(`rect`,{x:`94`,y:`122`,width:`5`,height:`3`,fill:`white`})]})}function g_({isOpen:e,onClose:t,defaultMode:n}){let[r,i]=(0,_.useState)(n||`magic`),[a,o]=(0,_.useState)(``),[s,c]=(0,_.useState)(``),[l,u]=(0,_.useState)(``),[d,f]=(0,_.useState)(!1);(0,_.useEffect)(()=>{e&&i(n||`magic`)},[e,n]),(0,_.useEffect)(()=>{da(c_,window.location.href)&&p()},[]);async function p(){let e=window.localStorage.getItem(`emailForSignIn`);if(e||=window.prompt(`Please provide your email for confirmation`),e)try{u(`Completing sign in...`);let t=await(await fa(c_,e,window.location.href)).user.getIdToken(!0);localStorage.setItem(`ID_TOKEN`,t),window.localStorage.removeItem(`emailForSignIn`),window.history.replaceState({},``,window.location.pathname)}catch(e){console.error(e),u(`Failed to complete sign in: `+(e?.message||String(e)))}}async function m(e){e.preventDefault(),u(`Sending magic link...`);let t={url:window.location.origin+`/`,handleCodeInApp:!0};try{let e=a.trim().toLowerCase();await ua(c_,e,t),window.localStorage.setItem(`emailForSignIn`,e),f(!0),u(``)}catch(e){console.error(e),u(`Failed to send link: `+(e?.message||String(e)))}}async function h(e){e.preventDefault(),u(`Signing in...`);try{let e=await(await la(c_,a,s)).user.getIdToken(!0);localStorage.setItem(`ID_TOKEN`,e),u(`Signed in successfully`)}catch(e){console.error(e);let t=e?.code||``;u(t===`auth/wrong-password`||t===`auth/user-not-found`||t===`auth/invalid-credential`||t===`auth/invalid-login-credentials`?`No password set for this account. Please use Magic Link or Google to sign in.`:`Login failed: `+(e?.message||String(e)))}}async function g(){u(`Signing in with Google...`);try{let e=await(await I(c_,new Ji)).user.getIdToken(!0);localStorage.setItem(`ID_TOKEN`,e),u(`Signed in successfully`)}catch(e){console.error(e),e?.code===`auth/popup-closed-by-user`?u(``):u(`Google sign-in failed: `+(e?.message||String(e)))}}if(!e)return null;let v=l.includes(`Failed`)||l.includes(`failed`)||l.includes(`No password`);return(0,$.jsx)(`div`,{onClick:t,style:{position:`fixed`,top:0,left:0,right:0,bottom:0,zIndex:500,background:`rgba(0,0,0,0.5)`,display:`flex`,alignItems:`center`,justifyContent:`center`,animation:`fadeIn 0.2s ease-out`},children:(0,$.jsxs)(`div`,{onClick:e=>e.stopPropagation(),style:{width:`100%`,maxWidth:`420px`,padding:`32px`,background:`white`,borderRadius:`16px`,border:`1px solid #e5e7eb`,position:`relative`,animation:`slideUp 0.3s ease-out`},children:[(0,$.jsx)(`button`,{onClick:t,style:{position:`absolute`,top:`16px`,right:`16px`,background:`none`,border:`none`,fontSize:`20px`,color:`#94a3b8`,cursor:`pointer`},children:`x`}),(0,$.jsxs)(`div`,{style:{textAlign:`center`,marginBottom:`24px`},children:[(0,$.jsx)(`div`,{style:{display:`flex`,justifyContent:`center`,marginBottom:`12px`},children:(0,$.jsx)(h_,{size:48})}),(0,$.jsx)(`h2`,{style:{margin:0,fontSize:`20px`,fontWeight:700},children:n===`signup`?`Create your free account`:`Sign in to TitleApp AI`})]}),d?(0,$.jsxs)(`div`,{style:{padding:`20px`,background:`#f0fdf4`,border:`1px solid #86efac`,borderRadius:`12px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`16px`,fontWeight:600,marginBottom:`8px`},children:`Check your email`}),(0,$.jsxs)(`div`,{style:{fontSize:`14px`,color:`#6b7280`},children:[`We sent a magic link to `,(0,$.jsx)(`strong`,{children:a})]}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#6b7280`,marginTop:`12px`},children:`Click the link in your email to sign in`}),(0,$.jsx)(`button`,{onClick:()=>{f(!1),o(``)},style:{marginTop:`16px`,padding:`10px 20px`,background:`white`,border:`1px solid #e5e7eb`,borderRadius:`8px`,cursor:`pointer`,fontSize:`14px`},children:`Use different email`})]}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{style:{display:`flex`,gap:`8px`,marginBottom:`20px`},children:[`magic`,`password`].map(e=>(0,$.jsx)(`button`,{onClick:()=>i(e),style:{flex:1,padding:`10px`,borderRadius:`8px`,cursor:`pointer`,fontSize:`14px`,background:r===e?`rgba(124,58,237,0.1)`:`white`,border:r===e?`1px solid rgba(124,58,237,0.3)`:`1px solid #e5e7eb`,fontWeight:r===e?600:400},children:e===`magic`?`Magic Link`:`Password`},e))}),r===`magic`&&(0,$.jsxs)(`form`,{onSubmit:m,style:{display:`grid`,gap:`14px`},children:[(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`6px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`Email`}),(0,$.jsx)(`input`,{type:`email`,value:a,onChange:e=>o(e.target.value),placeholder:`you@example.com`,autoComplete:`email`,required:!0,style:{padding:`12px`,fontSize:`14px`,border:`1px solid #e5e7eb`,borderRadius:`8px`}})]}),(0,$.jsx)(`button`,{type:`submit`,style:{padding:`12px`,fontSize:`14px`,fontWeight:600,background:`#7c3aed`,color:`white`,border:`none`,borderRadius:`8px`,cursor:`pointer`},children:`Send Magic Link`})]}),r===`password`&&(0,$.jsxs)(`form`,{onSubmit:h,style:{display:`grid`,gap:`14px`},children:[(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`6px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`Email`}),(0,$.jsx)(`input`,{type:`email`,value:a,onChange:e=>o(e.target.value),placeholder:`you@example.com`,autoComplete:`email`,required:!0,style:{padding:`12px`,fontSize:`14px`,border:`1px solid #e5e7eb`,borderRadius:`8px`}})]}),(0,$.jsxs)(`label`,{style:{display:`grid`,gap:`6px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600},children:`Password`}),(0,$.jsx)(`input`,{type:`password`,value:s,onChange:e=>c(e.target.value),placeholder:`--------`,autoComplete:`current-password`,required:!0,style:{padding:`12px`,fontSize:`14px`,border:`1px solid #e5e7eb`,borderRadius:`8px`}})]}),(0,$.jsx)(`button`,{type:`submit`,style:{padding:`12px`,fontSize:`14px`,fontWeight:600,background:`#7c3aed`,color:`white`,border:`none`,borderRadius:`8px`,cursor:`pointer`},children:`Sign In`})]}),l&&(0,$.jsx)(`div`,{style:{marginTop:`14px`,padding:`12px`,background:v?`#fff5f5`:`#f0fdf4`,border:v?`1px solid #fecaca`:`1px solid #86efac`,borderRadius:`8px`,fontSize:`13px`,color:v?`#dc2626`:`#16a34a`},children:l}),(0,$.jsxs)(`div`,{style:{marginTop:`20px`,paddingTop:`20px`,borderTop:`1px solid #e5e7eb`},children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#6b7280`,textAlign:`center`,marginBottom:`10px`},children:`Or continue with`}),(0,$.jsx)(`button`,{onClick:g,style:{width:`100%`,padding:`12px`,fontSize:`14px`,background:`white`,border:`1px solid #e5e7eb`,borderRadius:`8px`,cursor:`pointer`},children:`Google`})]})]})]})})}function __(){let[e,t]=(0,_.useState)(0),[n,r]=(0,_.useState)(!1),[i,a]=(0,_.useState)(`magic`),[o,s]=(0,_.useState)(!1),[c,l]=(0,_.useState)(``),[u,d]=(0,_.useState)([]),[f,p]=(0,_.useState)(!1),[m,h]=(0,_.useState)(null),g=(0,_.useRef)(null),v=(0,_.useRef)(null),y=(0,_.useRef)(null),b=(0,_.useRef)(m_()),x=(0,_.useRef)(null),S=(0,_.useRef)(!1);(0,_.useEffect)(()=>{if(b.current!==null){t(b.current);return}function e(){S.current||t(e=>(e+1)%d_.length)}return x.current=setInterval(e,5e3),()=>clearInterval(x.current)},[]),(0,_.useEffect)(()=>{v.current&&v.current.scrollIntoView({behavior:`smooth`})},[u,f]),(0,_.useEffect)(()=>{da(c_,window.location.href)&&r(!0)},[]),(0,_.useEffect)(()=>{let e=c_.onAuthStateChanged(e=>{if(e&&u.length>0){let e=m||{},t=u.filter(e=>e.role===`user`).map(e=>e.content).join(` | `),n={...e,chatSummary:t,messageCount:u.length,timestamp:new Date().toISOString()};localStorage.setItem(`LANDING_CONTEXT`,JSON.stringify(n))}});return()=>e()},[u,m]);function C(e){t(e),x.current&&clearInterval(x.current),b.current===null&&(x.current=setInterval(()=>{S.current||t(e=>(e+1)%d_.length)},5e3))}function w(e){l(e),T(e)}function T(e){s(!0),x.current&&clearInterval(x.current);let t={role:`assistant`,content:`Hey! Welcome to TitleApp. What brings you here today?`},n=e||c.trim();n?(d([t,{role:`user`,content:n}]),l(``),E(n)):d([t])}async function E(e){p(!0);try{let t=sessionStorage.getItem(`ta_sid`)||`sess_`+Date.now().toString(36)+`_`+Math.random().toString(36).substr(2,8);sessionStorage.setItem(`ta_sid`,t);let n=await(await fetch(`https://titleapp-frontdoor.titleapp-core.workers.dev/api?path=/v1/chat:message`,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify({sessionId:t,surface:`landing`,userInput:e})})).json();if(p(!1),n.ok&&n.message){let e=n.message,t=n.suggestSignup||n.showSignup||!1;/\[SHOW[_\s]?SIGNUP\]/i.test(e)&&(e=e.replace(/\s*\[SHOW[_\s]?SIGNUP\]\s*/gi,``).trim(),t=!0),d(n=>[...n,{role:`assistant`,content:e,showSetupButton:t}])}else d(e=>[...e,{role:`assistant`,content:`Tell me more about what you're looking for.`}]);n.discoveredContext&&(h(n.discoveredContext),sessionStorage.setItem(`ta_discovered_context`,JSON.stringify(n.discoveredContext)))}catch(e){console.error(`Chat error:`,e),p(!1),d(e=>[...e,{role:`assistant`,content:`I'm having trouble connecting. Let me try that again.`}])}}function D(e){e?.preventDefault();let t=c.trim();t&&(o?(d(e=>[...e,{role:`user`,content:t}]),l(``),E(t)):T(t))}function O(){s(!1),d([]),l(``),b.current===null&&(x.current=setInterval(()=>{S.current||t(e=>(e+1)%d_.length)},5e3))}return d_[e],(0,$.jsxs)(`div`,{style:{minHeight:`100vh`,background:`linear-gradient(135deg, #f5f7fa 0%, #e8ecf1 100%)`,fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif`,color:`#2c3e50`,display:`flex`,flexDirection:`column`},children:[(0,$.jsxs)(`header`,{style:{position:`fixed`,top:0,left:0,right:0,zIndex:200,display:`flex`,justifyContent:`space-between`,alignItems:`center`,padding:`1.5rem 3rem`,background:`rgba(255,255,255,0.95)`,boxShadow:`0 2px 10px rgba(0,0,0,0.05)`},children:[(0,$.jsxs)(`div`,{onClick:o?O:void 0,style:{display:`flex`,alignItems:`center`,gap:`0.5rem`,fontSize:`1.5rem`,fontWeight:700,color:`#7c3aed`,cursor:o?`pointer`:`default`},children:[(0,$.jsx)(h_,{size:40}),(0,$.jsx)(`span`,{children:`TitleApp AI`})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`1rem`},children:[(0,$.jsx)(`button`,{onClick:()=>{a(`magic`),r(!0)},style:{padding:`0.75rem 1.5rem`,borderRadius:`8px`,fontWeight:600,cursor:`pointer`,border:`2px solid transparent`,background:`transparent`,color:`#7c3aed`,fontSize:`1rem`,transition:`all 0.3s`},onMouseEnter:e=>{e.currentTarget.style.borderColor=`#7c3aed`},onMouseLeave:e=>{e.currentTarget.style.borderColor=`transparent`},children:`Sign In`}),(0,$.jsx)(`button`,{onClick:()=>{a(`signup`),r(!0)},style:{padding:`0.75rem 1.5rem`,borderRadius:`8px`,fontWeight:600,cursor:`pointer`,border:`none`,background:`#7c3aed`,color:`white`,fontSize:`1rem`,transition:`all 0.3s`},onMouseEnter:e=>{e.currentTarget.style.background=`#6d28d9`,e.currentTarget.style.transform=`translateY(-2px)`,e.currentTarget.style.boxShadow=`0 4px 12px rgba(124,58,237,0.3)`},onMouseLeave:e=>{e.currentTarget.style.background=`#7c3aed`,e.currentTarget.style.transform=`none`,e.currentTarget.style.boxShadow=`none`},children:`Start Free`})]})]}),(0,$.jsxs)(`div`,{style:{flex:1,overflowY:`auto`,overflowX:`hidden`,paddingTop:`90px`},children:[!o&&(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(`div`,{style:{maxWidth:`800px`,margin:`0 auto`,padding:`2rem 2rem 1rem`,textAlign:`center`},onMouseEnter:()=>{S.current=!0},onMouseLeave:()=>{S.current=!1},children:[(0,$.jsx)(`div`,{style:{display:`grid`,minHeight:`200px`},children:d_.map((t,n)=>(0,$.jsxs)(`div`,{style:{gridArea:`1 / 1`,opacity:n===e?1:0,transition:`opacity 0.6s ease`,pointerEvents:n===e?`auto`:`none`},children:[(0,$.jsx)(`h1`,{style:{fontSize:`3.5rem`,fontWeight:800,lineHeight:1.2,marginBottom:`1.5rem`,color:`#1a202c`,whiteSpace:`pre-line`},children:t.headline}),(0,$.jsx)(`p`,{style:{fontSize:`1.25rem`,color:`#64748b`,marginBottom:`2rem`,lineHeight:1.6},children:t.subtitle})]},t.id))}),(0,$.jsx)(`div`,{style:{display:`flex`,justifyContent:`center`,gap:`8px`,marginTop:`1rem`},children:d_.map((t,n)=>(0,$.jsx)(`button`,{onClick:()=>C(n),style:{width:`8px`,height:`8px`,borderRadius:`50%`,border:`none`,padding:0,background:n===e?`#7c3aed`:`#cbd5e1`,cursor:`pointer`,transition:`background 0.3s`}},n))})]}),(0,$.jsxs)(`div`,{style:{maxWidth:`600px`,width:`100%`,margin:`2rem auto 1rem`,padding:`0 2rem`,display:`flex`,gap:`0.75rem`},children:[(0,$.jsx)(`input`,{ref:y,type:`text`,value:c,onChange:e=>l(e.target.value),onKeyDown:e=>{e.key===`Enter`&&D(e)},placeholder:`Ask me anything about TitleApp AI...`,style:{flex:1,height:`48px`,padding:`0 1.5rem`,border:`2px solid #e2e8f0`,borderRadius:`12px`,fontSize:`1.1rem`,outline:`none`,transition:`all 0.3s`},onFocus:e=>{e.target.style.borderColor=`#7c3aed`,e.target.style.boxShadow=`0 0 0 3px rgba(124,58,237,0.1)`},onBlur:e=>{e.target.style.borderColor=`#e2e8f0`,e.target.style.boxShadow=`none`}}),(0,$.jsx)(`button`,{onClick:D,style:{width:`50px`,height:`50px`,background:`#7c3aed`,border:`none`,borderRadius:`12px`,color:`white`,cursor:`pointer`,display:`flex`,alignItems:`center`,justifyContent:`center`,transition:`all 0.3s`},onMouseEnter:e=>{e.currentTarget.style.background=`#6d28d9`,e.currentTarget.style.transform=`scale(1.05)`},onMouseLeave:e=>{e.currentTarget.style.background=`#7c3aed`,e.currentTarget.style.transform=`none`},children:(0,$.jsx)(`svg`,{width:`24`,height:`24`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:(0,$.jsx)(`path`,{d:`M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z`})})})]}),(0,$.jsx)(`div`,{style:{maxWidth:`800px`,margin:`0 auto`,padding:`0 2rem`},children:(0,$.jsx)(`div`,{style:{display:`grid`},children:d_.map((t,n)=>(0,$.jsx)(`div`,{style:{gridArea:`1 / 1`,opacity:n===e?1:0,transition:`opacity 0.6s ease`,pointerEvents:n===e?`auto`:`none`,display:`flex`,flexWrap:`wrap`,gap:`0.75rem`,justifyContent:`center`,padding:`0.5rem 0`},children:t.bubbles.map(e=>(0,$.jsx)(`button`,{onClick:()=>w(e),style:{padding:`0.75rem 1.25rem`,background:`#f1f5f9`,border:`2px solid #e2e8f0`,borderRadius:`20px`,color:`#475569`,cursor:`pointer`,fontSize:`0.95rem`,transition:`all 0.3s`},onMouseEnter:e=>{e.currentTarget.style.borderColor=`#7c3aed`,e.currentTarget.style.background=`#f3e8ff`,e.currentTarget.style.color=`#7c3aed`},onMouseLeave:e=>{e.currentTarget.style.borderColor=`#e2e8f0`,e.currentTarget.style.background=`#f1f5f9`,e.currentTarget.style.color=`#475569`},children:e},e))},t.id))})})]}),o&&(0,$.jsx)(`div`,{style:{maxWidth:`800px`,margin:`0 auto`,padding:`1rem 2rem`,paddingBottom:`100px`},children:(0,$.jsxs)(`div`,{ref:g,style:{display:`flex`,flexDirection:`column`},children:[u.map((e,t)=>(0,$.jsxs)(`div`,{style:{marginBottom:`1rem`},children:[(0,$.jsx)(`div`,{style:{padding:`1rem`,borderRadius:`12px`,animation:`slideIn 0.3s ease`,...e.role===`user`?{background:`#7c3aed`,color:`white`,marginLeft:`20%`}:{background:`#f1f5f9`,color:`#1a202c`,marginRight:`20%`},whiteSpace:`pre-line`},children:e.content}),e.showSetupButton&&(0,$.jsx)(`div`,{style:{marginRight:`20%`,marginTop:`8px`},children:(0,$.jsx)(`button`,{onClick:()=>{a(`signup`),r(!0)},style:{padding:`10px 20px`,fontSize:`14px`,fontWeight:600,background:`#7c3aed`,color:`white`,border:`none`,borderRadius:`8px`,cursor:`pointer`,transition:`all 0.3s`},onMouseEnter:e=>{e.currentTarget.style.background=`#6d28d9`},onMouseLeave:e=>{e.currentTarget.style.background=`#7c3aed`},children:`Set up my workspace`})})]},t)),f&&(0,$.jsx)(`div`,{style:{marginBottom:`1rem`,padding:`1rem`,borderRadius:`12px`,background:`#f1f5f9`,marginRight:`20%`,display:`flex`,alignItems:`center`,gap:`10px`},children:(0,$.jsxs)(`svg`,{width:`28`,height:`28`,viewBox:`0 0 200 200`,fill:`none`,style:{animation:`spinKey 1.5s ease-in-out infinite`,flexShrink:0},children:[(0,$.jsx)(`circle`,{cx:`100`,cy:`100`,r:`95`,fill:`#7c3aed`}),(0,$.jsx)(`circle`,{cx:`100`,cy:`100`,r:`80`,fill:`#7c3aed`,stroke:`white`,strokeWidth:`2`}),(0,$.jsx)(`circle`,{cx:`100`,cy:`100`,r:`70`,fill:`none`,stroke:`white`,strokeWidth:`1`,strokeDasharray:`3,5`}),(0,$.jsx)(`circle`,{cx:`100`,cy:`80`,r:`18`,fill:`white`}),(0,$.jsx)(`circle`,{cx:`100`,cy:`80`,r:`8`,fill:`#7c3aed`}),(0,$.jsx)(`rect`,{x:`94`,y:`90`,width:`12`,height:`35`,fill:`white`}),(0,$.jsx)(`rect`,{x:`94`,y:`115`,width:`8`,height:`4`,fill:`white`}),(0,$.jsx)(`rect`,{x:`94`,y:`122`,width:`5`,height:`3`,fill:`white`})]})}),(0,$.jsx)(`div`,{ref:v})]})})]}),o&&(0,$.jsxs)(`div`,{style:{position:`fixed`,bottom:0,left:0,right:0,maxWidth:`800px`,margin:`0 auto`,padding:`0.75rem 2rem`,background:`white`,boxShadow:`0 -2px 12px rgba(0,0,0,0.05)`,zIndex:100,display:`flex`,gap:`0.75rem`},children:[(0,$.jsx)(`input`,{type:`text`,value:c,onChange:e=>l(e.target.value),onKeyDown:e=>{e.key===`Enter`&&D(e)},placeholder:`Type a message...`,autoFocus:!0,style:{flex:1,height:`48px`,padding:`0 1.5rem`,border:`2px solid #e2e8f0`,borderRadius:`12px`,fontSize:`1.1rem`,outline:`none`},onFocus:e=>{e.target.style.borderColor=`#7c3aed`,e.target.style.boxShadow=`0 0 0 3px rgba(124,58,237,0.1)`},onBlur:e=>{e.target.style.borderColor=`#e2e8f0`,e.target.style.boxShadow=`none`}}),(0,$.jsx)(`button`,{onClick:D,style:{width:`50px`,height:`50px`,background:`#7c3aed`,border:`none`,borderRadius:`12px`,color:`white`,cursor:`pointer`,display:`flex`,alignItems:`center`,justifyContent:`center`},children:(0,$.jsx)(`svg`,{width:`24`,height:`24`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:(0,$.jsx)(`path`,{d:`M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z`})})})]}),(0,$.jsx)(g_,{isOpen:n,onClose:()=>r(!1),defaultMode:i}),(0,$.jsx)(`style`,{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes slideUp {
          from { opacity: 0; transform: translateY(20px); }
          to { opacity: 1; transform: translateY(0); }
        }
        @keyframes slideIn {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }
        @keyframes spinKey {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `})]})}var v_=[{value:`AL`,label:`Alabama`},{value:`AK`,label:`Alaska`},{value:`AZ`,label:`Arizona`},{value:`AR`,label:`Arkansas`},{value:`CA`,label:`California`},{value:`CO`,label:`Colorado`},{value:`CT`,label:`Connecticut`},{value:`DE`,label:`Delaware`},{value:`FL`,label:`Florida`},{value:`GA`,label:`Georgia`},{value:`HI`,label:`Hawaii`},{value:`ID`,label:`Idaho`},{value:`IL`,label:`Illinois`},{value:`IN`,label:`Indiana`},{value:`IA`,label:`Iowa`},{value:`KS`,label:`Kansas`},{value:`KY`,label:`Kentucky`},{value:`LA`,label:`Louisiana`},{value:`ME`,label:`Maine`},{value:`MD`,label:`Maryland`},{value:`MA`,label:`Massachusetts`},{value:`MI`,label:`Michigan`},{value:`MN`,label:`Minnesota`},{value:`MS`,label:`Mississippi`},{value:`MO`,label:`Missouri`},{value:`MT`,label:`Montana`},{value:`NE`,label:`Nebraska`},{value:`NV`,label:`Nevada`},{value:`NH`,label:`New Hampshire`},{value:`NJ`,label:`New Jersey`},{value:`NM`,label:`New Mexico`},{value:`NY`,label:`New York`},{value:`NC`,label:`North Carolina`},{value:`ND`,label:`North Dakota`},{value:`OH`,label:`Ohio`},{value:`OK`,label:`Oklahoma`},{value:`OR`,label:`Oregon`},{value:`PA`,label:`Pennsylvania`},{value:`RI`,label:`Rhode Island`},{value:`SC`,label:`South Carolina`},{value:`SD`,label:`South Dakota`},{value:`TN`,label:`Tennessee`},{value:`TX`,label:`Texas`},{value:`UT`,label:`Utah`},{value:`VT`,label:`Vermont`},{value:`VA`,label:`Virginia`},{value:`WA`,label:`Washington`},{value:`WV`,label:`West Virginia`},{value:`WI`,label:`Wisconsin`},{value:`WY`,label:`Wyoming`},{value:`GLOBAL`,label:`Other / Multi-State`}],y_={auto:{name:`Demo Motors`,tagline:`Your trusted dealer since 1998`},"real-estate":{name:`Summit Realty Group`,tagline:`Full-service brokerage and property management`},analyst:{name:`Meridian Capital Partners`,tagline:`Data-driven investment decisions`}},b_={auto:[{id:`cdk`,name:`CDK Global`,abbr:`CDK`,category:`DMS`,comingSoon:!0},{id:`reynolds`,name:`Reynolds & Reynolds`,abbr:`R&R`,category:`DMS`,comingSoon:!0},{id:`dealertrack`,name:`Dealertrack`,abbr:`DT`,category:`DMS`,comingSoon:!0},{id:`vauto`,name:`vAuto`,abbr:`vA`,category:`Pricing`,comingSoon:!0},{id:`autotrader`,name:`AutoTrader`,abbr:`AT`,category:`Marketplace`,comingSoon:!0},{id:`cargurus`,name:`CarGurus`,abbr:`CG`,category:`Marketplace`,comingSoon:!0},{id:`carfax`,name:`CARFAX`,abbr:`CF`,category:`History`,comingSoon:!0},{id:`kbb`,name:`Kelley Blue Book`,abbr:`KBB`,category:`Valuation`,comingSoon:!0},{id:`quickbooks`,name:`QuickBooks`,abbr:`QB`,category:`Accounting`,comingSoon:!0},{id:`salesforce`,name:`Salesforce`,abbr:`SF`,category:`CRM`,comingSoon:!0}],"real-estate":[{id:`mls`,name:`MLS / IDX Feed`,abbr:`MLS`,category:`Listings`,comingSoon:!0},{id:`zillow`,name:`Zillow Premier`,abbr:`Z`,category:`Marketplace`,comingSoon:!0},{id:`dotloop`,name:`Dotloop`,abbr:`DL`,category:`Transactions`,comingSoon:!0},{id:`skyslope`,name:`SkySlope`,abbr:`SS`,category:`Transactions`,comingSoon:!0},{id:`appfolio`,name:`AppFolio`,abbr:`AF`,category:`Property Mgmt`,comingSoon:!0},{id:`buildium`,name:`Buildium`,abbr:`BU`,category:`Property Mgmt`,comingSoon:!0},{id:`quickbooks`,name:`QuickBooks`,abbr:`QB`,category:`Accounting`,comingSoon:!0},{id:`docusign`,name:`DocuSign`,abbr:`DS`,category:`E-Sign`,comingSoon:!0},{id:`canva`,name:`Canva`,abbr:`CV`,category:`Marketing`,comingSoon:!0}],analyst:[{id:`bloomberg`,name:`Bloomberg Terminal`,abbr:`BB`,category:`Data`,comingSoon:!0},{id:`pitchbook`,name:`PitchBook`,abbr:`PB`,category:`Data`,comingSoon:!0},{id:`capital-iq`,name:`S&P Capital IQ`,abbr:`CIQ`,category:`Data`,comingSoon:!0},{id:`preqin`,name:`Preqin`,abbr:`PQ`,category:`LP Data`,comingSoon:!0},{id:`factset`,name:`FactSet`,abbr:`FS`,category:`Analytics`,comingSoon:!0},{id:`salesforce`,name:`Salesforce`,abbr:`SF`,category:`CRM`,comingSoon:!0},{id:`quickbooks`,name:`QuickBooks`,abbr:`QB`,category:`Accounting`,comingSoon:!0},{id:`docusign`,name:`DocuSign`,abbr:`DS`,category:`E-Sign`,comingSoon:!0}]},x_={auto:[`Loading 30 vehicles...`,`Loading 20 customers...`,`Loading service schedule...`,`Loading F&I products...`,`Loading sales pipeline...`],"real-estate":[`Loading 8 listings...`,`Loading 10 buyer profiles...`,`Loading 5 managed properties with 28 units...`,`Loading 24 tenant records...`,`Loading 7 maintenance requests...`,`Loading 3 active transactions...`],analyst:[`Loading portfolio (17 positions, $42.8M AUM)...`,`Loading 13 LP records...`,`Loading research pipeline...`,`Loading 4 sourced opportunities...`]},S_={auto:[{color:`#dc2626`,badge:`Revenue`,text:`Maria Gonzalez's lease expires in 60 days. She's a cash buyer. You have 3 matching vehicles in stock.`},{color:`#d97706`,badge:`Aging`,text:`The 2021 BMW X3 has been on your lot for 143 days. Markdown to $31,999 could recover $31K before floor plan interest eats more margin.`},{color:`#2563eb`,badge:`Service`,text:`Charles Cox is due for his 60K service. His factory warranty is about to expire -- perfect time to pitch Extra Care Gold ($2,995).`}],"real-estate":[{color:`#dc2626`,badge:`Late Rent`,text:`Kevin Williams at Riverside 2A is 30 days past due ($1,850). Three reminders sent. Next step: 3-day notice per state statute.`},{color:`#d97706`,badge:`Vacancy`,text:`Southside Flats Unit 3 has been vacant 45 days, costing ~$38/day. One application received yesterday.`},{color:`#16a34a`,badge:`Hot Lead`,text:`Amanda Liu is relocating, pre-approved $350-450K, matched to 3 of your listings. Showing scheduled Saturday.`}],analyst:[{color:`#d97706`,badge:`Opportunity`,text:`Parkview Apartments (48 units, Phoenix) -- CMBS loan matures Aug 2026. Matches your multifamily criteria. $8.2M.`},{color:`#dc2626`,badge:`Risk Alert`,text:`Sentinel Defense position is down 6.2% on a contract delay. Review position and consider trimming exposure.`},{color:`#16a34a`,badge:`LP Update`,text:`Blackstone LP quarterly letter has been drafted and is pending your compliance review before distribution.`}]};function C_({onComplete:e,onStepChange:t}){let[n,r]=(0,_.useState)(-1),[i,a]=(0,_.useState)(null),[o,s]=(0,_.useState)(`auto`),[c,l]=(0,_.useState)(`IL`),[u,d]=(0,_.useState)(!1),[f,p]=(0,_.useState)(!1),[m,h]=(0,_.useState)(0),[g,v]=(0,_.useState)(``),[y,b]=(0,_.useState)(``),[x,S]=(0,_.useState)({}),[C,w]=(0,_.useState)({}),[T,E]=(0,_.useState)(null),[D,O]=(0,_.useState)(!1),[ee,k]=(0,_.useState)([]),[te,ne]=(0,_.useState)([]),[re,ie]=(0,_.useState)(!1),[ae,A]=(0,_.useState)(!1),[j,oe]=(0,_.useState)(``);(0,_.useEffect)(()=>{async function e(){try{let e=c_.currentUser;if(!e){se(0);return}let t=await n_($h(l_,`users`,e.uid));if(t.exists()){let e=t.data();e.termsAcceptedAt&&(d(!0),e.companyName&&v(e.companyName))}se(0)}catch(e){console.error(`Failed to check onboarding progress:`,e),se(0)}}e()},[]);function se(e){r(e),t?.([`choose-path`,`business-basics`,`integrations`,`data-import`,`first-value`,`magic`][e]||`choose-path`)}function ce(){return i===`vault`?4:6}function le(){return i===`vault`?n===0?0:n===3?1:n===4?2:n===5?3:n:n}async function ue(){A(!0),oe(``);try{let t=localStorage.getItem(`ID_TOKEN`),n={tenantName:g||(i===`vault`?`My Vault`:`My Business`),tenantType:i===`vault`?`personal`:`business`,vertical:i===`vault`?`consumer`:o,jurisdiction:c};y.trim()&&(n.tagline=y.trim()),Object.keys(C).length>0&&(n.integrations=Object.keys(C).filter(e=>C[e])),Object.keys(x).length>0&&(n.verticalConfig=x);let r={path:i,vertical:i===`vault`?`consumer`:o,dataSource:T||`none`,completedAt:new Date().toISOString()};n.onboardingState=r;let a=await fetch(`https://titleapp-frontdoor.titleapp-core.workers.dev/api?path=/v1/onboarding:claimTenant`,{method:`POST`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${t}`},body:JSON.stringify(n)}),s=await a.json();if(!a.ok||!s.ok)throw Error(s.error||`Failed to create account`);localStorage.setItem(`TENANT_ID`,s.tenantId),localStorage.setItem(`VERTICAL`,i===`vault`?`consumer`:o),localStorage.setItem(`JURISDICTION`,c),localStorage.setItem(`ONBOARDING_STATE`,JSON.stringify(r)),g.trim()&&(localStorage.setItem(`COMPANY_NAME`,g.trim()),localStorage.setItem(`WORKSPACE_NAME`,g.trim())),se(5),setTimeout(()=>e(s.tenantId),2500)}catch(e){console.error(e),oe(e?.message||String(e)),A(!1)}}function de(){E(`sample`),O(!0);let e=x_[o]||x_.auto;k([]),e.forEach((t,n)=>{setTimeout(()=>{k(e=>[...e,t]),n===e.length-1&&setTimeout(()=>ue(),800)},(n+1)*300)})}function fe(e){e.preventDefault(),ie(!1);let t=Array.from(e.dataTransfer.files);ne(e=>[...e,...t])}function pe(e){let t=Array.from(e.target.files);ne(e=>[...e,...t])}if(n===-1)return(0,$.jsx)(`div`,{style:{minHeight:`100%`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`#f8fafc`,fontFamily:`-apple-system, BlinkMacSystemFont, sans-serif`},children:(0,$.jsxs)(`div`,{style:{textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:600,color:`#7c3aed`,marginBottom:`16px`},children:`TitleApp`}),(0,$.jsx)(`div`,{style:{fontSize:`16px`,color:`#6b7280`},children:`Loading...`})]})});function me(){let e=ce(),t=le();return(0,$.jsx)(`div`,{style:{display:`flex`,gap:`4px`,marginBottom:`32px`},children:Array.from({length:e}).map((e,n)=>(0,$.jsx)(`div`,{style:{flex:1,height:`4px`,borderRadius:`2px`,background:n<=t?`#7c3aed`:`#e5e7eb`,transition:`background 0.3s`}},n))})}if(n===0)return(0,$.jsxs)(`div`,{style:{minHeight:`100%`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`#f8fafc`,fontFamily:`-apple-system, BlinkMacSystemFont, sans-serif`,padding:`20px`},children:[(0,$.jsxs)(`div`,{style:{width:`100%`,maxWidth:`720px`},children:[(0,$.jsx)(me,{}),(0,$.jsxs)(`div`,{style:{textAlign:`center`,marginBottom:`32px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`48px`,fontWeight:300,letterSpacing:`-2px`,color:`#7c3aed`,marginBottom:`16px`},children:`TitleApp`}),(0,$.jsx)(`h1`,{style:{margin:`0 0 8px 0`,fontSize:`28px`,fontWeight:700},children:`What brings you here?`}),(0,$.jsx)(`p`,{style:{margin:0,color:`#6b7280`,fontSize:`15px`},children:`Choose your path and we'll set everything up`})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr 1fr`,gap:`16px`,marginBottom:`24px`},children:[(0,$.jsxs)(`div`,{onClick:()=>p(!0),style:{padding:`28px 20px`,textAlign:`center`,borderRadius:`16px`,cursor:`pointer`,border:f?`2px solid #7c3aed`:`2px solid #e5e7eb`,background:f?`rgba(124,58,237,0.04)`:`white`,transition:`all 0.2s`},onMouseEnter:e=>{f||(e.currentTarget.style.borderColor=`#c4b5fd`)},onMouseLeave:e=>{f||(e.currentTarget.style.borderColor=`#e5e7eb`)},children:[(0,$.jsxs)(`svg`,{width:`40`,height:`40`,viewBox:`0 0 24 24`,fill:`none`,stroke:`#7c3aed`,strokeWidth:`1.5`,strokeLinecap:`round`,strokeLinejoin:`round`,style:{margin:`0 auto 12px`},children:[(0,$.jsx)(`rect`,{x:`2`,y:`7`,width:`20`,height:`14`,rx:`2`,ry:`2`}),(0,$.jsx)(`path`,{d:`M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16`})]}),(0,$.jsx)(`div`,{style:{fontSize:`16px`,fontWeight:700,marginBottom:`6px`,color:`#1e293b`},children:`Run my business`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#6b7280`,lineHeight:1.4},children:`Auto, Real Estate, or Investment platform`})]}),(0,$.jsxs)(`div`,{style:{padding:`28px 20px`,textAlign:`center`,borderRadius:`16px`,position:`relative`,border:`2px solid #e5e7eb`,background:`white`,opacity:.6,cursor:`not-allowed`},children:[(0,$.jsx)(`div`,{style:{position:`absolute`,top:`12px`,right:`12px`,fontSize:`10px`,fontWeight:600,padding:`2px 8px`,borderRadius:`10px`,background:`#f3e8ff`,color:`#7c3aed`},children:`Coming Soon`}),(0,$.jsxs)(`svg`,{width:`40`,height:`40`,viewBox:`0 0 24 24`,fill:`none`,stroke:`#94a3b8`,strokeWidth:`1.5`,strokeLinecap:`round`,strokeLinejoin:`round`,style:{margin:`0 auto 12px`},children:[(0,$.jsx)(`path`,{d:`M12 2L2 7l10 5 10-5-10-5z`}),(0,$.jsx)(`path`,{d:`M2 17l10 5 10-5`}),(0,$.jsx)(`path`,{d:`M2 12l10 5 10-5`})]}),(0,$.jsx)(`div`,{style:{fontSize:`16px`,fontWeight:700,marginBottom:`6px`,color:`#94a3b8`},children:`Build an AI service`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#94a3b8`,lineHeight:1.4},children:`Deploy custom AI agents with RAAS`})]}),(0,$.jsxs)(`div`,{onClick:()=>{a(`vault`),p(!1),s(`consumer`)},style:{padding:`28px 20px`,textAlign:`center`,borderRadius:`16px`,cursor:`pointer`,border:i===`vault`?`2px solid #7c3aed`:`2px solid #e5e7eb`,background:i===`vault`?`rgba(124,58,237,0.04)`:`white`,transition:`all 0.2s`},onMouseEnter:e=>{i!==`vault`&&(e.currentTarget.style.borderColor=`#c4b5fd`)},onMouseLeave:e=>{i!==`vault`&&(e.currentTarget.style.borderColor=`#e5e7eb`)},children:[(0,$.jsx)(`svg`,{width:`40`,height:`40`,viewBox:`0 0 24 24`,fill:`none`,stroke:`#7c3aed`,strokeWidth:`1.5`,strokeLinecap:`round`,strokeLinejoin:`round`,style:{margin:`0 auto 12px`},children:(0,$.jsx)(`path`,{d:`M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z`})}),(0,$.jsx)(`div`,{style:{fontSize:`16px`,fontWeight:700,marginBottom:`6px`,color:`#1e293b`},children:`My personal vault`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#6b7280`,lineHeight:1.4},children:`Vehicles, property, documents, certifications`})]})]}),f&&(0,$.jsxs)(`div`,{style:{padding:`20px`,background:`white`,borderRadius:`12px`,border:`1px solid #e5e7eb`,marginBottom:`24px`,animation:`fadeIn 0.2s ease-out`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600,marginBottom:`12px`,color:`#374151`},children:`What industry?`}),(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr 1fr 1fr`,gap:`10px`},children:[{id:`auto`,label:`Automotive`,icon:`A`},{id:`real-estate`,label:`Real Estate`,icon:`R`},{id:`analyst`,label:`Investment`,icon:`I`},{id:`more`,label:`More coming soon`,icon:`+`,disabled:!0}].map(e=>(0,$.jsxs)(`button`,{disabled:e.disabled,onClick:()=>{e.disabled||(s(e.id),a(`business`))},style:{padding:`14px 12px`,borderRadius:`10px`,textAlign:`center`,cursor:e.disabled?`not-allowed`:`pointer`,border:o===e.id&&i===`business`?`2px solid #7c3aed`:`1px solid #e5e7eb`,background:o===e.id&&i===`business`?`rgba(124,58,237,0.06)`:e.disabled?`#f8fafc`:`white`,opacity:e.disabled?.5:1},children:[(0,$.jsx)(`div`,{style:{width:`36px`,height:`36px`,borderRadius:`10px`,margin:`0 auto 8px`,background:o===e.id&&i===`business`?`#7c3aed`:`#f1f5f9`,color:o===e.id&&i===`business`?`white`:`#64748b`,display:`flex`,alignItems:`center`,justifyContent:`center`,fontWeight:700,fontSize:`14px`},children:e.icon}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,fontWeight:600,color:e.disabled?`#94a3b8`:`#374151`},children:e.label})]},e.id))})]}),(i===`business`||i===`vault`)&&(0,$.jsxs)(`div`,{style:{textAlign:`center`},children:[(0,$.jsxs)(`label`,{style:{display:`flex`,alignItems:`center`,justifyContent:`center`,gap:`8px`,marginBottom:`16px`,cursor:`pointer`},children:[(0,$.jsx)(`input`,{type:`checkbox`,checked:u,onChange:e=>d(e.target.checked),style:{width:`18px`,height:`18px`}}),(0,$.jsx)(`span`,{style:{fontSize:`13px`,color:`#6b7280`},children:`By continuing you accept our Terms of Service and Privacy Policy`})]}),(0,$.jsx)(`button`,{disabled:!u,onClick:()=>{se(i===`vault`?3:1)},style:{padding:`14px 48px`,fontSize:`15px`,fontWeight:600,borderRadius:`10px`,border:`none`,cursor:u?`pointer`:`not-allowed`,background:u?`#7c3aed`:`#d1d5db`,color:`white`,transition:`background 0.2s`},children:`Continue`})]})]}),(0,$.jsx)(`style`,{children:`
          @keyframes fadeIn {
            from { opacity: 0; transform: translateY(8px); }
            to { opacity: 1; transform: translateY(0); }
          }
        `})]});if(n===1){let e=y_[o]||y_.auto,t=[{key:`name`,label:`What's your business called?`,placeholder:e.name,type:`text`},{key:`tagline`,label:`One-liner about what you do`,placeholder:e.tagline,type:`text`},{key:`state`,label:`What state are you in?`,type:`select`}],n=[];o===`real-estate`?n.push({key:`reType`,label:`What's your focus?`,type:`choice`,options:[{value:`sales`,label:`Sales / Brokerage`},{value:`pm`,label:`Property Management`},{value:`both`,label:`Both`}]}):o===`auto`?n.push({key:`dealerType`,label:`What type of dealership?`,type:`choice`,options:[{value:`franchise`,label:`Franchise`},{value:`independent`,label:`Independent`},{value:`bhph`,label:`Buy Here Pay Here`}]}):o===`analyst`&&n.push({key:`strategy`,label:`Primary strategy?`,type:`choice`,options:[{value:`pe`,label:`Private Equity`},{value:`re-invest`,label:`Real Estate Investment`},{value:`vc`,label:`Venture Capital`},{value:`hedge`,label:`Hedge Fund`},{value:`family`,label:`Family Office`}]});let r=[...t,...n],i=r[m];function a(e){i.key===`name`?v(e):i.key===`tagline`?b(e):i.key===`state`?l(e):S(t=>({...t,[i.key]:e})),m<r.length-1?h(m+1):se(2)}function s(){return i.key===`name`?g:i.key===`tagline`?y:i.key===`state`?c:x[i.key]||``}return(0,$.jsxs)(`div`,{style:{minHeight:`100%`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`#f8fafc`,fontFamily:`-apple-system, BlinkMacSystemFont, sans-serif`,padding:`20px`},children:[(0,$.jsxs)(`div`,{style:{width:`100%`,maxWidth:`500px`},children:[(0,$.jsx)(me,{}),(0,$.jsxs)(`div`,{style:{animation:`fadeIn 0.3s ease-out`},children:[(0,$.jsx)(`h2`,{style:{margin:`0 0 24px 0`,fontSize:`24px`,fontWeight:700},children:i.label}),i.type===`text`&&(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`input`,{type:`text`,value:s(),onChange:e=>{i.key===`name`?v(e.target.value):i.key===`tagline`&&b(e.target.value)},placeholder:i.placeholder,autoFocus:!0,onKeyDown:e=>{e.key===`Enter`&&s().trim()&&a(s())},style:{width:`100%`,padding:`14px 16px`,fontSize:`16px`,border:`2px solid #e5e7eb`,borderRadius:`12px`,outline:`none`,transition:`border-color 0.2s`},onFocus:e=>{e.target.style.borderColor=`#7c3aed`},onBlur:e=>{e.target.style.borderColor=`#e5e7eb`}}),(0,$.jsx)(`button`,{disabled:!s().trim(),onClick:()=>a(s()),style:{width:`100%`,marginTop:`16px`,padding:`14px`,fontSize:`15px`,fontWeight:600,background:s().trim()?`#7c3aed`:`#d1d5db`,color:`white`,border:`none`,borderRadius:`10px`,cursor:s().trim()?`pointer`:`not-allowed`},children:`Continue`})]}),i.type===`select`&&(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`select`,{value:c,onChange:e=>l(e.target.value),style:{width:`100%`,padding:`14px 16px`,fontSize:`16px`,border:`2px solid #e5e7eb`,borderRadius:`12px`,outline:`none`,background:`white`},children:v_.map(e=>(0,$.jsx)(`option`,{value:e.value,children:e.label},e.value))}),(0,$.jsx)(`button`,{onClick:()=>a(c),style:{width:`100%`,marginTop:`16px`,padding:`14px`,fontSize:`15px`,fontWeight:600,background:`#7c3aed`,color:`white`,border:`none`,borderRadius:`10px`,cursor:`pointer`},children:`Continue`})]}),i.type===`choice`&&(0,$.jsx)(`div`,{style:{display:`grid`,gap:`10px`},children:i.options.map(e=>(0,$.jsx)(`button`,{onClick:()=>a(e.value),style:{padding:`16px 20px`,fontSize:`15px`,fontWeight:600,textAlign:`left`,border:`2px solid #e5e7eb`,borderRadius:`12px`,background:`white`,cursor:`pointer`,transition:`all 0.2s`},onMouseEnter:e=>{e.currentTarget.style.borderColor=`#7c3aed`,e.currentTarget.style.background=`rgba(124,58,237,0.04)`},onMouseLeave:e=>{e.currentTarget.style.borderColor=`#e5e7eb`,e.currentTarget.style.background=`white`},children:e.label},e.value))})]},m),m>0&&(0,$.jsx)(`button`,{onClick:()=>h(m-1),style:{marginTop:`16px`,padding:`8px 16px`,fontSize:`13px`,color:`#6b7280`,background:`none`,border:`none`,cursor:`pointer`},children:`Back`})]}),(0,$.jsx)(`style`,{children:`
          @keyframes fadeIn {
            from { opacity: 0; transform: translateY(8px); }
            to { opacity: 1; transform: translateY(0); }
          }
        `})]})}if(n===2){let e=b_[o]||b_.auto;return(0,$.jsx)(`div`,{style:{minHeight:`100%`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`#f8fafc`,fontFamily:`-apple-system, BlinkMacSystemFont, sans-serif`,padding:`20px`},children:(0,$.jsxs)(`div`,{style:{width:`100%`,maxWidth:`700px`},children:[(0,$.jsx)(me,{}),(0,$.jsxs)(`div`,{style:{marginBottom:`24px`},children:[(0,$.jsx)(`h2`,{style:{margin:`0 0 8px 0`,fontSize:`24px`,fontWeight:700},children:`What tools do you use?`}),(0,$.jsx)(`p`,{style:{margin:0,color:`#6b7280`,fontSize:`15px`,lineHeight:1.5},children:`Select the tools you already use. We'll build connectors so your data flows in automatically.`})]}),(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(3, 1fr)`,gap:`12px`,marginBottom:`24px`},children:e.map(e=>{let t=C[e.id];return(0,$.jsxs)(`div`,{onClick:()=>w(t=>({...t,[e.id]:!t[e.id]})),style:{padding:`16px`,borderRadius:`12px`,cursor:`pointer`,position:`relative`,border:t?`2px solid #7c3aed`:`2px solid #e5e7eb`,background:t?`rgba(124,58,237,0.04)`:`white`,transition:`all 0.2s`},children:[e.comingSoon&&(0,$.jsx)(`span`,{style:{position:`absolute`,top:`8px`,right:`8px`,fontSize:`9px`,fontWeight:600,padding:`1px 6px`,borderRadius:`8px`,background:`#f3e8ff`,color:`#7c3aed`},children:`Soon`}),(0,$.jsx)(`div`,{style:{width:`36px`,height:`36px`,borderRadius:`8px`,marginBottom:`8px`,background:t?`#7c3aed`:`#f1f5f9`,color:t?`white`:`#64748b`,display:`flex`,alignItems:`center`,justifyContent:`center`,fontWeight:700,fontSize:`12px`},children:e.abbr}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600,color:`#1e293b`},children:e.name}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#94a3b8`,marginTop:`2px`},children:e.category})]},e.id)})}),(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsx)(`button`,{onClick:()=>se(3),style:{padding:`8px 16px`,fontSize:`13px`,color:`#6b7280`,background:`none`,border:`none`,cursor:`pointer`},children:`Skip -- I'll set these up later`}),(0,$.jsx)(`button`,{onClick:()=>se(3),style:{padding:`14px 32px`,fontSize:`15px`,fontWeight:600,background:`#7c3aed`,color:`white`,border:`none`,borderRadius:`10px`,cursor:`pointer`},children:`Continue`})]})]})})}if(n===3){let e=x_[o]||x_.auto;return(0,$.jsxs)(`div`,{style:{minHeight:`100%`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`#f8fafc`,fontFamily:`-apple-system, BlinkMacSystemFont, sans-serif`,padding:`20px`},children:[(0,$.jsxs)(`div`,{style:{width:`100%`,maxWidth:`700px`},children:[(0,$.jsx)(me,{}),(0,$.jsxs)(`div`,{style:{marginBottom:`32px`,textAlign:`center`},children:[(0,$.jsx)(`h2`,{style:{margin:`0 0 8px 0`,fontSize:`28px`,fontWeight:700},children:`Let's get your workspace ready`}),(0,$.jsx)(`p`,{style:{margin:0,color:`#6b7280`,fontSize:`15px`,lineHeight:1.5},children:`You can upload your own data or explore with realistic sample data`})]}),j&&(0,$.jsx)(`div`,{style:{padding:`12px`,background:`#fff5f5`,border:`1px solid #fecaca`,borderRadius:`8px`,fontSize:`14px`,color:`#dc2626`,marginBottom:`16px`},children:j}),D?(0,$.jsxs)(`div`,{style:{padding:`32px 24px`,background:`#f8fafc`,borderRadius:`12px`,border:`1px solid #e5e7eb`},children:[(0,$.jsx)(`div`,{style:{fontSize:`16px`,fontWeight:600,marginBottom:`16px`,color:`#1e293b`},children:`Loading sample data...`}),(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`8px`},children:[ee.map((e,t)=>(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`,fontSize:`14px`,color:`#16a34a`,animation:`fadeIn 0.3s ease-out`},children:[(0,$.jsx)(`span`,{style:{fontSize:`16px`},children:``}),(0,$.jsx)(`span`,{children:e.replace(`...`,``)})]},t)),ee.length<e.length&&(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`#94a3b8`},children:e[ee.length]})]})]}):T===`upload`?(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{onDragOver:e=>{e.preventDefault(),ie(!0)},onDragLeave:()=>ie(!1),onDrop:fe,style:{padding:`40px 24px`,textAlign:`center`,borderRadius:`12px`,border:`2px dashed ${re?`#7c3aed`:`#d1d5db`}`,background:re?`rgba(124,58,237,0.04)`:`#fafafa`,transition:`all 0.2s`,marginBottom:`16px`},children:[(0,$.jsxs)(`svg`,{width:`40`,height:`40`,viewBox:`0 0 24 24`,fill:`none`,stroke:`#7c3aed`,strokeWidth:`1.5`,strokeLinecap:`round`,strokeLinejoin:`round`,style:{margin:`0 auto 12px`},children:[(0,$.jsx)(`path`,{d:`M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4`}),(0,$.jsx)(`polyline`,{points:`17 8 12 3 7 8`}),(0,$.jsx)(`line`,{x1:`12`,y1:`3`,x2:`12`,y2:`15`})]}),(0,$.jsx)(`div`,{style:{fontSize:`15px`,fontWeight:600,marginBottom:`4px`},children:`Drop files here`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#6b7280`,marginBottom:`12px`},children:`CSV, XLSX, PDF -- or click to browse`}),(0,$.jsx)(`input`,{type:`file`,multiple:!0,onChange:pe,style:{display:`none`},id:`file-upload`}),(0,$.jsx)(`label`,{htmlFor:`file-upload`,style:{padding:`8px 20px`,fontSize:`13px`,fontWeight:600,borderRadius:`8px`,border:`1px solid #e5e7eb`,background:`white`,cursor:`pointer`,display:`inline-block`},children:`Browse Files`})]}),te.length>0&&(0,$.jsx)(`div`,{style:{marginBottom:`16px`},children:te.map((e,t)=>(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`,padding:`8px 12px`,background:`#f0fdf4`,borderRadius:`8px`,marginBottom:`4px`,fontSize:`13px`},children:[(0,$.jsx)(`span`,{style:{color:`#16a34a`},children:``}),(0,$.jsx)(`span`,{style:{flex:1},children:e.name}),(0,$.jsxs)(`span`,{style:{color:`#94a3b8`},children:[(e.size/1024).toFixed(0),` KB`]})]},t))}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`12px`},children:[(0,$.jsx)(`button`,{onClick:()=>E(null),style:{padding:`12px 20px`,fontSize:`14px`,color:`#6b7280`,background:`white`,border:`1px solid #e5e7eb`,borderRadius:`10px`,cursor:`pointer`},children:`Back`}),(0,$.jsx)(`button`,{onClick:()=>{E(`upload`),ue()},disabled:ae,style:{flex:1,padding:`12px 20px`,fontSize:`15px`,fontWeight:600,background:ae?`#9ca3af`:`#7c3aed`,color:`white`,border:`none`,borderRadius:`10px`,cursor:ae?`not-allowed`:`pointer`},children:ae?`Creating workspace...`:te.length>0?`Upload & Continue`:`Continue without files`})]})]}):(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`16px`,marginBottom:`16px`},children:[(0,$.jsxs)(`div`,{onClick:()=>E(`upload`),style:{padding:`32px 24px`,background:`white`,borderRadius:`12px`,border:`2px solid #e5e7eb`,cursor:`pointer`,textAlign:`center`,transition:`border-color 0.2s, box-shadow 0.2s`},onMouseEnter:e=>{e.currentTarget.style.borderColor=`#7c3aed`,e.currentTarget.style.boxShadow=`0 0 0 3px rgba(124,58,237,0.1)`},onMouseLeave:e=>{e.currentTarget.style.borderColor=`#e5e7eb`,e.currentTarget.style.boxShadow=`none`},children:[(0,$.jsxs)(`svg`,{width:`40`,height:`40`,viewBox:`0 0 24 24`,fill:`none`,stroke:`#7c3aed`,strokeWidth:`1.5`,strokeLinecap:`round`,strokeLinejoin:`round`,style:{margin:`0 auto 12px`},children:[(0,$.jsx)(`path`,{d:`M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4`}),(0,$.jsx)(`polyline`,{points:`17 8 12 3 7 8`}),(0,$.jsx)(`line`,{x1:`12`,y1:`3`,x2:`12`,y2:`15`})]}),(0,$.jsx)(`div`,{style:{fontSize:`18px`,fontWeight:700,marginBottom:`8px`,color:`#1e293b`},children:`I have data to upload`}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`#6b7280`,lineHeight:1.5},children:`Upload your files -- spreadsheets, PDFs, CSVs -- and we'll import everything`})]}),(0,$.jsxs)(`div`,{onClick:de,style:{padding:`32px 24px`,borderRadius:`12px`,cursor:`pointer`,textAlign:`center`,background:`linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%)`,border:`2px solid #e9d5ff`,transition:`border-color 0.2s, box-shadow 0.2s`},onMouseEnter:e=>{e.currentTarget.style.borderColor=`#7c3aed`,e.currentTarget.style.boxShadow=`0 0 0 3px rgba(124,58,237,0.1)`},onMouseLeave:e=>{e.currentTarget.style.borderColor=`#e9d5ff`,e.currentTarget.style.boxShadow=`none`},children:[(0,$.jsxs)(`svg`,{width:`40`,height:`40`,viewBox:`0 0 24 24`,fill:`none`,stroke:`#7c3aed`,strokeWidth:`1.5`,strokeLinecap:`round`,strokeLinejoin:`round`,style:{margin:`0 auto 12px`},children:[(0,$.jsx)(`path`,{d:`M12 2L2 7l10 5 10-5-10-5z`}),(0,$.jsx)(`path`,{d:`M2 17l10 5 10-5`}),(0,$.jsx)(`path`,{d:`M2 12l10 5 10-5`})]}),(0,$.jsx)(`div`,{style:{fontSize:`18px`,fontWeight:700,marginBottom:`8px`,color:`#1e293b`},children:`Explore with sample data`}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`#6b7280`,lineHeight:1.5},children:`We'll load realistic demo data so you can see everything in action`})]})]}),(0,$.jsx)(`div`,{style:{textAlign:`center`},children:(0,$.jsx)(`button`,{onClick:()=>{E(`none`),ue()},disabled:ae,style:{padding:`8px 16px`,fontSize:`13px`,color:`#94a3b8`,background:`none`,border:`none`,cursor:`pointer`},children:ae?`Creating...`:`Skip for now`})})]})]}),(0,$.jsx)(`style`,{children:`
          @keyframes fadeIn {
            from { opacity: 0; transform: translateY(4px); }
            to { opacity: 1; transform: translateY(0); }
          }
        `})]})}if(n===4){let e=S_[o]||S_.auto;return(0,$.jsxs)(`div`,{style:{minHeight:`100%`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`#f8fafc`,fontFamily:`-apple-system, BlinkMacSystemFont, sans-serif`,padding:`20px`},children:[(0,$.jsxs)(`div`,{style:{width:`100%`,maxWidth:`600px`},children:[(0,$.jsx)(me,{}),(0,$.jsxs)(`div`,{style:{textAlign:`center`,marginBottom:`28px`},children:[(0,$.jsx)(`h2`,{style:{margin:`0 0 8px 0`,fontSize:`24px`,fontWeight:700},children:`Your AI already found some things`}),(0,$.jsx)(`p`,{style:{margin:0,color:`#6b7280`,fontSize:`15px`},children:`Based on your sample data, here's what caught our attention`})]}),(0,$.jsx)(`div`,{style:{padding:`24px`,background:`white`,borderRadius:`16px`,border:`1px solid #e5e7eb`,marginBottom:`24px`},children:(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`16px`},children:e.map((e,t)=>(0,$.jsxs)(`div`,{style:{padding:`16px`,borderRadius:`12px`,borderLeft:`4px solid ${e.color}`,background:`#fafafa`,animation:`fadeIn 0.3s ease-out ${t*.15}s both`},children:[(0,$.jsx)(`span`,{style:{display:`inline-block`,fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`8px`,marginBottom:`8px`,background:`${e.color}15`,color:e.color},children:e.badge}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`#374151`,lineHeight:1.5},children:e.text})]},t))})}),(0,$.jsx)(`div`,{style:{textAlign:`center`},children:(0,$.jsx)(`button`,{onClick:()=>se(5),style:{padding:`14px 48px`,fontSize:`16px`,fontWeight:600,background:`#7c3aed`,color:`white`,border:`none`,borderRadius:`10px`,cursor:`pointer`},children:`Let's go!`})})]}),(0,$.jsx)(`style`,{children:`
          @keyframes fadeIn {
            from { opacity: 0; transform: translateY(8px); }
            to { opacity: 1; transform: translateY(0); }
          }
        `})]})}return n===5?(0,$.jsxs)(`div`,{style:{minHeight:`100%`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`linear-gradient(135deg, #667eea 0%, #764ba2 100%)`,fontFamily:`-apple-system, BlinkMacSystemFont, sans-serif`},children:[(0,$.jsxs)(`div`,{style:{textAlign:`center`,color:`white`,animation:`fadeInScale 0.6s ease-out`,maxWidth:`500px`,padding:`40px 20px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`48px`,marginBottom:`24px`,fontWeight:300,letterSpacing:`-2px`},children:`TitleApp`}),(0,$.jsxs)(`h1`,{style:{fontSize:`32px`,fontWeight:700,margin:`0 0 16px 0`},children:[`Welcome, `,g||`partner`,`.`]}),(0,$.jsxs)(`p`,{style:{fontSize:`18px`,opacity:.9,marginBottom:`32px`},children:[`Your AI-powered `,i===`vault`?`vault`:`business platform`,` is ready`]}),(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`8px`,marginBottom:`32px`,textAlign:`left`,background:`rgba(255,255,255,0.12)`,borderRadius:`12px`,padding:`20px 24px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,opacity:.8},children:`Setting up your workspace`}),(0,$.jsxs)(`div`,{style:{fontSize:`14px`,opacity:.8},children:[`Configuring AI assistant for `,o===`auto`?`automotive`:o===`analyst`?`investment`:o===`real-estate`?`real estate`:o===`consumer`?`personal vault`:o]}),(0,$.jsxs)(`div`,{style:{fontSize:`14px`,opacity:.8},children:[`Loading `,c,` compliance rules`]})]}),(0,$.jsx)(`div`,{style:{width:`200px`,height:`3px`,background:`rgba(255,255,255,0.2)`,borderRadius:`2px`,margin:`0 auto`,overflow:`hidden`},children:(0,$.jsx)(`div`,{style:{width:`100%`,height:`100%`,background:`white`,borderRadius:`2px`,animation:`progressSlide 2s ease-in-out`}})})]}),(0,$.jsx)(`style`,{children:`
          @keyframes fadeInScale {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
          }
          @keyframes progressSlide {
            from { transform: translateX(-100%); }
            to { transform: translateX(0); }
          }
        `})]}):null}function w_({onComplete:e,vertical:t=`auto`}){let[n,r]=(0,_.useState)(0),[i,a]=(0,_.useState)(!1);(0,_.useEffect)(()=>{localStorage.getItem(`hasSeenOnboardingTour`)||setTimeout(()=>a(!0),1e3)},[]);let o=(()=>{let e=[{title:`Welcome to TitleApp AI`,content:`Let me show you around. This quick tour will help you get started with your AI-powered business platform.`,action:`Get Started`,highlight:null},{title:`Your Dashboard`,content:`This is your command center. Here you'll see key metrics, recent activity, and quick actions.`,highlight:`.pageHeader`,section:`dashboard`},{title:`AI Chat Assistant`,content:`Click the chat button in the bottom right to talk to your AI assistant. Ask about customers, inventory, records, or get help with any task.`,highlight:`.floating-chat-button`,action:`Try It`},{title:`Navigation Sidebar`,content:`Access all your tools here. Each section is designed to help you manage different aspects of your business.`,highlight:`.sidebar`}],n={auto:[{title:`Upload Your Data`,content:`To get the most out of TitleApp, upload your business data:

 Customer database
 Current inventory
 Service schedules
 Financial products
 Warranty offerings

We'll use AI to analyze and help you sell more effectively.`,action:`Upload Now`,highlight:null},{title:`Inventory & Customers`,content:`Manage your vehicle inventory and customer relationships. The AI will help you match customers to vehicles and suggest optimal pricing.`,highlight:null}],analyst:[{title:`Upload Deal Memos`,content:`Upload 2-3 sample deals you're interested in. Our AI will analyze them against your investment criteria and help you identify your sweet spot.`,action:`Upload Deals`,highlight:null},{title:`Deal Analysis`,content:`The Analyst section uses AI to screen deals, identify risks, and recommend investment structures. All analysis follows your custom criteria.`,section:`analyst`,highlight:null}],"real-estate":[{title:`Upload Property Docs`,content:`Upload property titles, inspection reports, and transaction records. We'll help you track ownership and identify opportunities.`,action:`Upload Now`,highlight:null}]},r=[{title:`You're All Set`,content:`That's it! Remember, you can always ask the AI chat assistant for help. It knows your business context and can guide you through any task.`,action:`Start Using TitleApp`,highlight:null}];return[...e,...n[t]||[],...r]})(),s=o[n],c=()=>{n<o.length-1?r(n+1):u()},l=()=>{u()},u=()=>{localStorage.setItem(`hasSeenOnboardingTour`,`true`),a(!1),e&&e()},d=()=>{if(s.action===`Try It`){let e=document.querySelector(`.floating-chat-button`);e&&e.click(),c()}else s.action===`Upload Now`||s.action,c()};return i?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{className:`onboarding-overlay`}),s.highlight&&(0,$.jsx)(`div`,{className:`onboarding-spotlight`,style:{"--spotlight-target":s.highlight}}),(0,$.jsxs)(`div`,{className:`onboarding-card`,children:[(0,$.jsxs)(`div`,{className:`onboarding-header`,children:[(0,$.jsxs)(`div`,{className:`onboarding-progress`,children:[`Step `,n+1,` of `,o.length]}),(0,$.jsx)(`button`,{className:`onboarding-skip`,onClick:l,children:`Skip Tour`})]}),(0,$.jsxs)(`div`,{className:`onboarding-content`,children:[(0,$.jsx)(`h2`,{className:`onboarding-title`,children:s.title}),(0,$.jsx)(`p`,{className:`onboarding-text`,style:{whiteSpace:`pre-line`},children:s.content})]}),(0,$.jsxs)(`div`,{className:`onboarding-footer`,children:[(0,$.jsx)(`div`,{className:`onboarding-dots`,children:o.map((e,t)=>(0,$.jsx)(`div`,{className:`onboarding-dot ${t===n?`active`:``} ${t<n?`completed`:``}`},t))}),(0,$.jsxs)(`div`,{className:`onboarding-actions`,children:[n>0&&(0,$.jsx)(`button`,{className:`onboarding-btn onboarding-btn-secondary`,onClick:()=>r(n-1),children:`Back`}),s.action?(0,$.jsx)(`button`,{className:`onboarding-btn onboarding-btn-primary`,onClick:d,children:s.action}):(0,$.jsx)(`button`,{className:`onboarding-btn onboarding-btn-primary`,onClick:c,children:n===o.length-1?`Finish`:`Next`})]})]})]})]}):null}var T_={consumer:[{id:`dashboard`,label:`Dashboard`},{id:`vault-documents`,label:`Documents`},{id:`vault-assets`,label:`Assets`},{id:`vault-deadlines`,label:`Deadlines`},{id:`reports`,label:`Reports`},{id:`raas-store`,label:`RAAS Store`},{id:`settings`,label:`Settings`}],analyst:[{id:`dashboard`,label:`Dashboard`},{id:`portfolio`,label:`Portfolio`},{id:`research`,label:`Research`},{id:`clients-lps`,label:`Clients & LPs`},{id:`deal-pipeline`,label:`Deal Pipeline`},{id:`reports`,label:`Reports`},{id:`ai-chats`,label:`AI Activity`},{id:`rules`,label:`Rules`},{id:`raas-store`,label:`RAAS Store`},{id:`settings`,label:`Settings`}],"property-mgmt":[{id:`dashboard`,label:`Dashboard`},{id:`inventory`,label:`Properties`},{id:`customers`,label:`Tenants`},{id:`appointments`,label:`Maintenance`},{id:`rules-resources`,label:`Rules & Resources`},{id:`reports`,label:`Reports`},{id:`settings`,label:`Settings`}],auto:[{id:`dashboard`,label:`Dashboard`},{id:`inventory`,label:`Inventory`},{id:`customers`,label:`Customers`},{id:`sales-pipeline`,label:`Sales Pipeline`},{id:`fi-products`,label:`F&I Products`},{id:`auto-service`,label:`Service`},{id:`reports`,label:`Reports`},{id:`ai-chats`,label:`AI Activity`},{id:`rules`,label:`Rules`},{id:`raas-store`,label:`RAAS Store`},{id:`settings`,label:`Settings`}],"real-estate":[{id:`dashboard`,label:`Dashboard`},{id:`re-listings`,label:`Listings`},{id:`re-buyers`,label:`Buyers`},{id:`re-transactions`,label:`Transactions`},{id:`re-properties`,label:`Properties`},{id:`re-tenants`,label:`Tenants`},{id:`re-maintenance`,label:`Maintenance`},{id:`re-marketing`,label:`Marketing`},{id:`reports`,label:`Reports`},{id:`ai-chats`,label:`AI Activity`},{id:`rules`,label:`Rules`},{id:`raas-store`,label:`RAAS Store`},{id:`settings`,label:`Settings`}]},E_=[{id:`dashboard`,label:`Dashboard`},{id:`rules-resources`,label:`Rules & Resources`},{id:`ai-chats`,label:`AI Activity`},{id:`reports`,label:`Reports`},{id:`raas-store`,label:`RAAS Store`},{id:`settings`,label:`Settings`}];function D_({currentSection:e,onNavigate:t,onClose:n,tenantName:r,onBackToHub:i}){let a=localStorage.getItem(`VERTICAL`)||`auto`,o=T_[a]||E_,s=a===`consumer`,c=localStorage.getItem(`WORKSPACE_NAME`)||``,l=/^ws_\d+_[a-z0-9]+$/i.test(c)?``:c,u=(l||r||localStorage.getItem(`COMPANY_NAME`)||localStorage.getItem(`TENANT_NAME`)||``).split(` `)[0]||``,d=s&&u?`${u}'s Vault`:l||r||(s?`Personal Vault`:`Business`);function f(e){t(e),n&&n()}function p(){ha(Ts()).then(()=>{localStorage.removeItem(`ID_TOKEN`),localStorage.removeItem(`TENANT_ID`),window.location.reload()}).catch(()=>{localStorage.removeItem(`ID_TOKEN`),localStorage.removeItem(`TENANT_ID`),window.location.reload()})}return(0,$.jsxs)(`div`,{className:`sidebar`,children:[(0,$.jsxs)(`div`,{className:`sidebarHeader`,children:[(0,$.jsxs)(`div`,{className:`brand`,children:[(0,$.jsx)(`img`,{src:`/logo.png`,alt:`TitleApp AI`,style:{width:`32px`,height:`32px`,borderRadius:`8px`}}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`brandName`,children:s?d:l||`TitleApp AI`}),(0,$.jsx)(`div`,{className:`brandSub`,children:s?`TitleApp Vault`:{auto:`Auto Dealer`,analyst:`Investment Analyst`,"real-estate":`Real Estate`,aviation:`Aviation`}[a]||`Business`})]})]}),(0,$.jsx)(`button`,{className:`sidebarClose iconBtn`,onClick:n,"aria-label":`Close menu`,children:``})]}),(0,$.jsxs)(`div`,{className:`sidebarSection`,children:[(0,$.jsx)(`div`,{className:`sidebarLabel`,children:`Navigation`}),(0,$.jsx)(`nav`,{className:`nav`,children:o.map(t=>(0,$.jsx)(`button`,{className:`navItem ${e===t.id?`navItemActive`:``}`,onClick:()=>f(t.id),style:{width:`100%`,textAlign:`left`,cursor:`pointer`},children:t.label},t.id))})]}),(0,$.jsxs)(`div`,{className:`sidebarFooter`,children:[i&&(0,$.jsx)(`button`,{onClick:i,className:`iconBtn`,style:{width:`100%`,marginTop:`10px`,color:`#7c3aed`},children:`Switch Workspace`}),(0,$.jsx)(`button`,{onClick:p,className:`iconBtn`,style:{width:`100%`,marginTop:`10px`},children:`Sign Out`})]})]})}var O_={"choose-path":`Welcome. Pick the path that fits -- I'll tailor everything from there.`,"business-basics":`Just the essentials. I'll use this to configure your AI assistant and compliance rules.`,integrations:`Tell me what you already use. I'll build the connectors so your data flows in automatically.`,"data-import":`You can upload your own files or explore with sample data. Either way, you'll see value in about 60 seconds.`,"first-value":`I already scanned your data and found a few things worth your attention.`,terms:`This is our standard terms and liability agreement. Take a look and let me know if you have questions.`,idVerify:`Quick identity check -- keeps your records secure and verified. $2, once a year.`,details:`This is where we set your foundation. The jurisdiction matters because compliance rules vary by state.`,raas:`Tell me how you want your AI assistant to work. I'll follow these rules in every interaction.`,criteria:`This is your target box. Every deal gets screened against these numbers automatically.`,sampleDeals:`Drop your deal memos here. I'll pull out the key data so you don't have to enter it manually.`,dealerData:`Upload your dealership data. The more I know about your inventory and customers, the more I can help.`,brokerage:`Tell me about your brokerage. I'll help you track listings, manage documents, and stay compliant.`,propertyMgmt:`Let's set up your property portfolio. I'll help you track units, leases, and maintenance.`,dashboard:`Welcome to your workspace. Everything starts from here -- your deals, your analysis, your pipeline.`,analyst:`Your deal analysis hub. Upload deals and I'll screen them against your criteria.`,inventory:`Your inventory hub. I can look up any vehicle, check aging, and recommend pricing actions.`,customers:`Your customer database. I can pull up any customer's history, identify outreach opportunities, and draft communications.`,"fi-products":`Your F&I product catalog. I can match products to any customer profile and calculate payment impacts.`,"auto-service":`Your service schedule. I can identify upsell opportunities, draft service reminders, and flag warranty expirations.`,"sales-pipeline":`Your active deals. I can prioritize follow-ups, draft communications, and recommend next steps for each deal.`,"worker-preview":`This is what I built from our conversation. Review the details and publish when you're ready.`,"raas-store":`Browse AI Workers built by domain experts. Each one packages real expertise into a subscribable service.`,"creator-dashboard":`Your creator hub. Edit your Workers, adjust pricing, track subscribers, and manage publishing.`},k_={dashboard:`Welcome to your Vault. This is your personal command center -- vehicles, properties, documents, and certifications all in one place.`,"my-vehicles":`Your vehicle records. I can help you add a new vehicle, look up a VIN, or check on registration and insurance status.`,"my-properties":`Your property records. I can help you add a property, track mortgage details, or organize tax and insurance documents.`,"my-documents":`Your important documents. I can help you store and organize IDs, contracts, tax records, insurance policies, and anything else that matters.`,"my-certifications":`Your certifications and credentials. I can help you add licenses, track expiration dates, and set up renewal reminders.`,"my-logbook":`Your activity logbook. Every Digital Title Certificate and action is recorded here permanently.`,settings:`Your Vault settings. You can update your profile, configure your AI assistant, and manage notification preferences.`};function A_({currentSection:e,onboardingStep:t}){let[n,r]=(0,_.useState)([]),[i,a]=(0,_.useState)(``),[o,s]=(0,_.useState)(!1),[c,l]=(0,_.useState)(!1),[u,d]=(0,_.useState)(!1),[f,p]=(0,_.useState)(null),m=(0,_.useRef)(null),[h,g]=(0,_.useState)(null),[v,y]=(0,_.useState)(null),[b,x]=(0,_.useState)(!1),S=(0,_.useRef)(null),C=(0,_.useRef)(null),[w,T]=(0,_.useState)(!1),[E,D]=(0,_.useState)([]);(0,_.useEffect)(()=>{function e(e){let t=e.detail?.message;e.detail?.dealContext&&g(e.detail.dealContext);let n=e.detail?.customerName||O(t);n&&(h?.customerName&&h.customerName!==n&&D(e=>e.find(e=>e.customerName===h.customerName)?e:[...e,{customerName:h.customerName,actionType:`draft`,status:`pending`,context:h.summary||`Discussion in progress`,createdAt:new Date().toISOString()}]),g(e=>({...e,customerName:n,summary:t}))),t&&(a(t),setTimeout(()=>A(null,t),200))}return window.addEventListener(`ta:chatPrompt`,e),()=>window.removeEventListener(`ta:chatPrompt`,e)},[h]);function O(e){if(!e)return null;for(let t of[/(?:for|about|regarding|on)\s+([A-Z][a-z]+ [A-Z][a-z]+)/,/--\s*([A-Z][a-z]+ [A-Z][a-z]+)/]){let n=e.match(t);if(n)return n[1]}return null}function ee(e){D(t=>t.filter(t=>t.customerName!==e.customerName)),g({customerName:e.customerName,summary:e.context}),a(`Let's get back to ${e.customerName}. ${e.context}`)}function k(e){D(t=>t.filter(t=>t.customerName!==e))}let te=Ts(),ne=ig(),re=te?.currentUser;(0,_.useEffect)(()=>{let e=te.onAuthStateChanged(()=>{d(!0)});return()=>e()},[]),(0,_.useEffect)(()=>{if(re&&u&&n.length===0){let e=localStorage.getItem(`LANDING_CONTEXT`);if(e)try{let t=ie(JSON.parse(e));if(t){r([{role:`assistant`,content:t,isSystem:!0}]),localStorage.removeItem(`LANDING_CONTEXT`);return}}catch{}if(sessionStorage.getItem(`ta_builder_prompt`)){sessionStorage.removeItem(`ta_builder_prompt`),r([{role:`assistant`,content:`Hey! So you want to build an AI service -- tell me about your idea. What do you know a lot about?`,isSystem:!0}]);return}let t=sessionStorage.getItem(`ta_discovered_context`);if(t)try{if(JSON.parse(t).vertical){r([{role:`assistant`,content:`Welcome! I set up your workspace based on our conversation. Take a look around and let me know if anything needs adjusting.`,isSystem:!0}]),sessionStorage.removeItem(`ta_discovered_context`);return}}catch{}ae()}},[re,u]);function ie(e){let t=e.name||``,n=t?`, ${t}`:``,r=e.vertical||``,i=e.intent||``,a=e.chatSummary||``;return i===`builder`?`Great${n}, I've got the outline of your service. Let me show you what I built -- take a look at the preview and tell me what needs adjusting.`:r===`auto`||/\b(car|vehicle|vin|truck|suv)\b/i.test(a)?`Alright${n}, let's get that vehicle recorded. What do you drive? Year, make, and model is all I need to start.`:r===`real-estate`||/\b(property|rental|tenant|apartment|building|house)\b/i.test(a)?`OK${n}, let's get your properties set up. How about we start with your biggest one? What's the address?`:r===`analyst`||/\b(deal|invest|portfolio|fund|analysis)\b/i.test(a)?`Welcome${n}. Your analysis workspace is ready. Want to start by uploading a deal memo, or should I walk you through the screening criteria first?`:i===`personal`||r===`consumer`?`Welcome to your Vault${n}. Based on what we talked about, let's start getting your records organized. What would you like to add first?`:a?`Welcome${n}. I set up your workspace based on our conversation. Let's pick up where we left off -- what would you like to do first?`:null}(0,_.useEffect)(()=>{let n=t||e,i=(localStorage.getItem(`VERTICAL`)||`auto`)===`consumer`;if(n&&n!==f&&n!==`checking`&&n!==`welcome`&&n!==`magic`){let e=i&&k_[n]||O_[n];if(e){p(n);let t=setTimeout(()=>{r(t=>[...t,{role:`assistant`,content:e,isSystem:!0}])},600);return()=>clearTimeout(t)}}},[t,e]),(0,_.useEffect)(()=>{m.current&&(m.current.scrollTop=m.current.scrollHeight)},[n,o]);async function ae(){try{let e=sessionStorage.getItem(`ta_platform_sid`),t=localStorage.getItem(`TENANT_ID`)||localStorage.getItem(`WORKSPACE_ID`),n=[Hg(`userId`,`==`,re.uid),...t?[Hg(`tenantId`,`==`,t)]:[],Gg(`createdAt`,`asc`),qg(50)];e&&n.splice(t?2:1,0,Hg(`sessionId`,`==`,e));let i=await r_(Bg(Qh(ne,`messageEvents`),...n)),a=[];i.forEach(e=>{let t=e.data();t.type===`chat:message:received`?a.push({role:`user`,content:t.message}):t.type===`chat:message:responded`&&a.push({role:`assistant`,content:t.response})}),e&&a.length>0&&a.push({role:`assistant`,content:`Welcome to your business platform. Your onboarding steps are on the left -- I'm right here if you need help.`,isSystem:!0}),r(a)}catch(e){console.error(`Failed to load conversation history:`,e)}}async function A(t,n){t?.preventDefault();let o=(n||i).trim();if(!o||c)return;if(!re){r(e=>[...e,{role:`assistant`,content:`Please sign in to use the AI assistant.`,isError:!0}]);return}let u=o,d=v;d&&(u+=` [File attached: ${d.name}]`,y(null)),a(``),l(!0),r(e=>[...e,{role:`user`,content:u}]);let f=null;if(d){T(!0),r(e=>[...e,{role:`assistant`,content:`Uploading ${d.name}...`,isSystem:!0}]);try{f=await new Promise((e,t)=>{let n=new FileReader;n.onload=()=>e({name:d.name,type:d.type,data:n.result}),n.onerror=()=>t(Error(`Failed to read file`)),n.readAsDataURL(d)}),r(e=>{let t=[...e],n=t.findLastIndex(e=>e.isSystem&&e.content.startsWith(`Uploading `));return n>=0&&(t[n]={...t[n],content:`File ready: ${d.name}`}),t})}catch(e){console.error(`File read failed:`,e),r(e=>{let t=[...e],n=t.findLastIndex(e=>e.isSystem&&e.content.startsWith(`Uploading `));return n>=0&&(t[n]={...t[n],content:`Could not read ${d.name}. Message sent without file.`}),t})}finally{T(!1)}}s(!0);try{let t=await re.getIdToken(),n=localStorage.getItem(`TENANT_ID`)||localStorage.getItem(`WORKSPACE_ID`)||``,i=localStorage.getItem(`VERTICAL`)||`auto`,a=localStorage.getItem(`JURISDICTION`)||``,o=await fetch(`https://titleapp-frontdoor.titleapp-core.workers.dev/api?path=/v1/chat:message`,{method:`POST`,headers:{Authorization:`Bearer ${t}`,"Content-Type":`application/json`,"X-Tenant-Id":n,"X-Vertical":i,"X-Jurisdiction":a},body:JSON.stringify({message:u,...f?{file:f}:{},context:{source:`business_portal`,currentSection:e||`dashboard`,vertical:i,jurisdiction:a,workspaceId:localStorage.getItem(`WORKSPACE_ID`)||``,workspaceName:localStorage.getItem(`WORKSPACE_NAME`)||``,...h?{dealContext:h}:{},...E.length>0?{pendingActions:E.map(e=>({customerName:e.customerName,actionType:e.actionType,context:e.context}))}:{}}})}),c=await o.json();if(!o.ok)throw Error(c.error||`Request failed`);s(!1),g(null),r(e=>[...e,{role:`assistant`,content:c.response||`No response received.`,structuredData:c.structuredData}])}catch(e){console.error(`Send failed:`,e),s(!1),r(t=>[...t,{role:`assistant`,content:e.message||`Failed to send message. Please try again.`,isError:!0}])}finally{l(!1)}}function j(e){e.key===`Enter`&&!e.shiftKey&&(e.preventDefault(),A())}function oe(e){let t=e.target.files?.[0];t&&y(t)}function se(){let e=window.SpeechRecognition||window.webkitSpeechRecognition;if(!e)return;let t=new e;t.continuous=!1,t.interimResults=!1,t.lang=`en-US`,t.onresult=e=>{let t=e.results[0][0].transcript;a(e=>e?e+` `+t:t),x(!1)},t.onerror=()=>x(!1),t.onend=()=>x(!1),C.current=t,t.start(),x(!0)}function ce(){C.current?.stop(),x(!1)}function le(e){if(!e||typeof e!=`object`)return null;if(e.type===`record_created`){let t={vehicle:`#7c3aed`,property:`#22c55e`,document:`#6366f1`,certification:`#d97706`,valuable:`#ec4899`},n={vehicle:`Vehicle`,property:`Real Estate`,document:`Document`,certification:`Certification`,valuable:`Valuable`},r=t[e.recordType]||`#64748b`,i=n[e.recordType]||`Record`,a=e.metadata||{},o=Object.entries(a).filter(([e,t])=>e!==`title`&&t);return(0,$.jsxs)(`div`,{style:{border:`2px solid ${r}30`,borderRadius:`14px`,overflow:`hidden`,marginTop:`8px`},children:[(0,$.jsxs)(`div`,{style:{background:`${r}12`,padding:`12px 16px`,display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`15px`,color:`#1e293b`},children:a.title||`New Record`}),(0,$.jsx)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`3px 10px`,borderRadius:`20px`,background:`${r}20`,color:r},children:i})]}),o.length>0&&(0,$.jsx)(`div`,{style:{padding:`10px 16px`},children:o.map(([e,t])=>(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,padding:`4px 0`,fontSize:`13px`},children:[(0,$.jsx)(`span`,{style:{color:`#64748b`,flexShrink:0,marginRight:`12px`},children:e.replace(/([A-Z])/g,` $1`).replace(/^./,e=>e.toUpperCase())}),(0,$.jsx)(`span`,{style:{fontWeight:500,color:`#1e293b`,textAlign:`right`},children:t})]},e))}),(0,$.jsx)(`div`,{style:{padding:`8px 16px`,borderTop:`1px solid #f1f5f9`},children:(0,$.jsxs)(`span`,{style:{fontSize:`12px`,fontWeight:600,color:`#16a34a`,display:`flex`,alignItems:`center`,gap:`4px`},children:[(0,$.jsx)(`svg`,{width:`14`,height:`14`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`3`,strokeLinecap:`round`,strokeLinejoin:`round`,children:(0,$.jsx)(`polyline`,{points:`20 6 9 17 4 12`})}),`Digital Title Certificate Created`]})})]})}return e.type===`analyst_result`?(0,$.jsxs)(`div`,{className:`structured-analyst-result`,children:[(0,$.jsxs)(`div`,{className:`analyst-header`,children:[(0,$.jsx)(`span`,{className:`analyst-emoji`,children:e.verdict_emoji}),(0,$.jsx)(`h4`,{children:e.verdict}),(0,$.jsxs)(`span`,{className:`analyst-score`,children:[e.score,`/100`]})]}),e.summary&&(0,$.jsx)(`p`,{className:`analyst-summary`,children:e.summary}),e.key_findings&&e.key_findings.length>0&&(0,$.jsxs)(`div`,{className:`analyst-findings`,children:[(0,$.jsx)(`h5`,{children:`Key Findings:`}),(0,$.jsx)(`ul`,{children:e.key_findings.map((e,t)=>(0,$.jsx)(`li`,{children:e},t))})]})]}):e.type===`dtc_preview`?(0,$.jsxs)(`div`,{className:`structured-dtc-preview`,children:[(0,$.jsxs)(`div`,{className:`dtc-header`,children:[(0,$.jsxs)(`h4`,{children:[e.asset_type,` DTC Preview`]}),e.blockchain_verified&&(0,$.jsx)(`span`,{className:`dtc-verified`,children:`Verified`})]}),e.details&&(0,$.jsx)(`div`,{className:`dtc-details`,children:Object.entries(e.details).map(([e,t])=>(0,$.jsxs)(`div`,{className:`dtc-field`,children:[(0,$.jsxs)(`span`,{className:`dtc-label`,children:[e,`:`]}),(0,$.jsx)(`span`,{className:`dtc-value`,children:String(t)})]},e))})]}):e.type===`trade_summary`?(0,$.jsxs)(`div`,{className:`structured-trade-summary`,children:[(0,$.jsx)(`h4`,{children:`Trade Summary`}),(0,$.jsxs)(`div`,{className:`trade-details`,children:[(0,$.jsxs)(`div`,{className:`trade-field`,children:[(0,$.jsx)(`strong`,{children:`Your Vehicle:`}),` `,e.your_vehicle]}),(0,$.jsxs)(`div`,{className:`trade-field`,children:[(0,$.jsx)(`strong`,{children:`Trade Value:`}),` $`,e.trade_value?.toLocaleString()]}),(0,$.jsxs)(`div`,{className:`trade-field`,children:[(0,$.jsx)(`strong`,{children:`New Vehicle:`}),` `,e.new_vehicle]}),(0,$.jsxs)(`div`,{className:`trade-field`,children:[(0,$.jsx)(`strong`,{children:`Price:`}),` $`,e.new_price?.toLocaleString()]}),(0,$.jsxs)(`div`,{className:`trade-field`,children:[(0,$.jsx)(`strong`,{children:`Net Cost:`}),` $`,e.net_cost?.toLocaleString()]})]})]}):(0,$.jsx)(`div`,{className:`structured-generic`,children:(0,$.jsx)(`pre`,{children:JSON.stringify(e,null,2)})})}return(0,$.jsxs)(`div`,{className:`chatPanelContainer`,children:[(0,$.jsxs)(`div`,{className:`chatPanelHeader`,children:[(0,$.jsx)(`svg`,{width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:(0,$.jsx)(`path`,{d:`M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z`})}),(0,$.jsx)(`span`,{children:(()=>{try{let e=JSON.parse(localStorage.getItem(`COS_CONFIG`)||`{}`);return e.name?`${e.name} -- AI Assistant`:`AI Assistant`}catch{return`AI Assistant`}})()})]}),(0,$.jsxs)(`div`,{className:`chatPanelMessages`,ref:m,children:[E.length>0&&(0,$.jsxs)(`div`,{style:{display:`flex`,flexWrap:`wrap`,gap:`6px`,padding:`8px 12px`,borderBottom:`1px solid #f1f5f9`,flexShrink:0},children:[E.map(e=>(0,$.jsxs)(`div`,{onClick:()=>ee(e),style:{display:`flex`,alignItems:`center`,gap:`6px`,padding:`4px 10px`,borderRadius:`20px`,fontSize:`12px`,fontWeight:600,cursor:`pointer`,background:`#fef3c7`,color:`#92400e`,border:`1px solid #fde68a`},children:[(0,$.jsx)(`span`,{children:e.customerName}),(0,$.jsx)(`span`,{style:{fontSize:`10px`,opacity:.7},children:`draft`}),(0,$.jsx)(`button`,{onClick:t=>{t.stopPropagation(),k(e.customerName)},style:{background:`none`,border:`none`,cursor:`pointer`,color:`#92400e`,fontSize:`14px`,padding:0,lineHeight:1},children:`x`})]},e.customerName)),h?.customerName&&(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`6px`,padding:`4px 10px`,borderRadius:`20px`,fontSize:`12px`,fontWeight:600,background:`#dbeafe`,color:`#1e40af`,border:`1px solid #bfdbfe`},children:[(0,$.jsx)(`span`,{children:h.customerName}),(0,$.jsx)(`span`,{style:{fontSize:`10px`,opacity:.7},children:`active`})]})]}),n.length===0&&!o&&(0,$.jsx)(`div`,{className:`chat-welcome`,children:(()=>{let e=localStorage.getItem(`VERTICAL`)||`auto`;if(e===`consumer`){let e=`your AI assistant`;try{let t=JSON.parse(localStorage.getItem(`COS_CONFIG`)||`{}`);t.name&&(e=`${t.name}, your AI assistant`)}catch{}return(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(`p`,{children:[`Hi. I'm `,e,`.`]}),re?(0,$.jsx)(`p`,{children:`I can help you manage your vehicles, properties, documents, and certifications. What would you like to do?`}):(0,$.jsx)(`p`,{children:`Please sign in to start chatting.`})]})}if(e===`auto`)return re?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`p`,{children:`Good evening. I've been reviewing the lot and customer database. Here's what I found:`}),(0,$.jsx)(`p`,{children:`Maria Gonzalez's Corolla lease expires in 60 days -- she's a cash buyer. I've matched her to 3 vehicles in stock.`}),(0,$.jsx)(`p`,{children:`The BMW X3 on the used lot is at 143 days. I recommend marking it down to $31,999 and pushing it to Marketplace.`}),(0,$.jsx)(`p`,{children:`Charles Cox is due for his 60K service -- his factory warranty is about to expire. Good opportunity to pitch Extra Care Gold.`}),(0,$.jsx)(`p`,{children:`Want me to start with any of these?`})]}):(0,$.jsx)(`p`,{children:`Please sign in to start chatting.`});let t=`your AI assistant`;try{let e=JSON.parse(localStorage.getItem(`COS_CONFIG`)||`{}`);e.name&&(t=`${e.name}, your AI assistant`)}catch{}return(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(`p`,{children:[`Hi. I'm `,t,`.`]}),re?(0,$.jsx)(`p`,{children:`Ask me anything about your records, documents, customers, inventory, or business operations.`}):(0,$.jsx)(`p`,{children:`Please sign in to start chatting.`})]})})()}),n.map((e,t)=>(0,$.jsxs)(`div`,{className:`chat-message ${e.role} ${e.isError?`error`:``}`,children:[(0,$.jsx)(`div`,{className:`chat-bubble`,children:e.content}),e.structuredData&&(0,$.jsx)(`div`,{className:`chat-structured-data`,children:le(e.structuredData)})]},t)),o&&(0,$.jsx)(`div`,{className:`chat-message assistant`,children:(0,$.jsxs)(`svg`,{width:`24`,height:`24`,viewBox:`0 0 200 200`,fill:`none`,style:{animation:`spinKey 1.5s ease-in-out infinite`},children:[(0,$.jsx)(`circle`,{cx:`100`,cy:`100`,r:`95`,fill:`#7c3aed`}),(0,$.jsx)(`circle`,{cx:`100`,cy:`100`,r:`80`,fill:`#7c3aed`,stroke:`white`,strokeWidth:`2`}),(0,$.jsx)(`circle`,{cx:`100`,cy:`100`,r:`70`,fill:`none`,stroke:`white`,strokeWidth:`1`,strokeDasharray:`3,5`}),(0,$.jsx)(`circle`,{cx:`100`,cy:`80`,r:`18`,fill:`white`}),(0,$.jsx)(`circle`,{cx:`100`,cy:`80`,r:`8`,fill:`#7c3aed`}),(0,$.jsx)(`rect`,{x:`94`,y:`90`,width:`12`,height:`35`,fill:`white`}),(0,$.jsx)(`rect`,{x:`94`,y:`115`,width:`8`,height:`4`,fill:`white`}),(0,$.jsx)(`rect`,{x:`94`,y:`122`,width:`5`,height:`3`,fill:`white`})]})})]}),(0,$.jsxs)(`form`,{className:`chatPanelInput`,onSubmit:A,children:[v&&(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`6px`,padding:`4px 8px`,background:`#f1f5f9`,borderRadius:`8px`,fontSize:`12px`,color:`#64748b`,marginBottom:`4px`,width:`100%`},children:[(0,$.jsx)(`span`,{style:{flex:1,overflow:`hidden`,textOverflow:`ellipsis`,whiteSpace:`nowrap`},children:v.name}),(0,$.jsx)(`button`,{type:`button`,onClick:()=>y(null),style:{background:`none`,border:`none`,cursor:`pointer`,color:`#94a3b8`,fontSize:`14px`,padding:`0 2px`},children:`x`})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`,alignItems:`flex-end`,width:`100%`},children:[(0,$.jsx)(`input`,{ref:S,type:`file`,style:{display:`none`},onChange:oe}),(0,$.jsx)(`button`,{type:`button`,onClick:()=>S.current?.click(),style:{width:`36px`,height:`36px`,borderRadius:`10px`,background:`transparent`,border:`1px solid #e2e8f0`,cursor:`pointer`,display:`flex`,alignItems:`center`,justifyContent:`center`,flexShrink:0,color:`#94a3b8`},"aria-label":`Attach file`,children:(0,$.jsx)(`svg`,{width:`18`,height:`18`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:(0,$.jsx)(`path`,{d:`M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48`})})}),(0,$.jsx)(`button`,{type:`button`,onClick:b?ce:se,style:{width:`36px`,height:`36px`,borderRadius:`10px`,background:b?`#ef4444`:`transparent`,border:b?`none`:`1px solid #e2e8f0`,cursor:`pointer`,display:`flex`,alignItems:`center`,justifyContent:`center`,flexShrink:0,color:b?`white`:`#94a3b8`},"aria-label":b?`Stop recording`:`Voice input`,children:(0,$.jsxs)(`svg`,{width:`18`,height:`18`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,$.jsx)(`path`,{d:`M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z`}),(0,$.jsx)(`path`,{d:`M19 10v2a7 7 0 0 1-14 0v-2`}),(0,$.jsx)(`line`,{x1:`12`,y1:`19`,x2:`12`,y2:`23`}),(0,$.jsx)(`line`,{x1:`8`,y1:`23`,x2:`16`,y2:`23`})]})}),(0,$.jsx)(`textarea`,{value:i,onChange:e=>a(e.target.value),onKeyDown:j,placeholder:`Ask me anything...`,rows:3,disabled:c||w,style:{minHeight:`72px`}}),(0,$.jsx)(`button`,{type:`submit`,disabled:c||w||!i.trim(),"aria-label":`Send message`,children:(0,$.jsxs)(`svg`,{width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,$.jsx)(`line`,{x1:`22`,y1:`2`,x2:`11`,y2:`13`}),(0,$.jsx)(`polygon`,{points:`22 2 15 22 11 13 2 9 22 2`})]})})]})]})]})}function j_(){let e=localStorage.getItem(`ID_TOKEN`);if(!e)throw Error(`Missing ID_TOKEN in localStorage. Please sign in.`);return e}function M_(){let e=localStorage.getItem(`SESSION_ID`);if(!e){let t=globalThis.crypto;e=t&&typeof t.randomUUID==`function`?t.randomUUID():`sess_`+Math.random().toString(16).slice(2)+`_`+Date.now(),localStorage.setItem(`SESSION_ID`,e)}return e}function N_(){return`https://titleapp-frontdoor.titleapp-core.workers.dev`.replace(/\/+$/,``)}async function P_(e,t,n){let r=M_(),i=new URL(N_()+`/api`);i.searchParams.set(`path`,t);let a=localStorage.getItem(`TENANT_ID`)||`public`,o=await fetch(i.toString(),{method:e,headers:{"Content-Type":`application/json`,Authorization:`Bearer `+j_(),"X-Session-Id":r,"X-Tenant-Id":a,"X-Vertical":n.vertical,"X-Jurisdiction":n.jurisdiction},body:n.body?JSON.stringify(n.body):void 0}),s=await o.text(),c=null;try{c=s?JSON.parse(s):null}catch{c={raw:s}}if(!o.ok)throw Error(c?.error||c?.reason||`HTTP `+o.status);return c}async function F_(e){let t=`/v1/logbook:list`;return e.dtcId&&(t+=`?dtcId=${encodeURIComponent(e.dtcId)}`),P_(`GET`,t,{vertical:e.vertical,jurisdiction:e.jurisdiction})}async function I_(e){return P_(`POST`,`/v1/logbook:append`,{vertical:e.vertical,jurisdiction:e.jurisdiction,body:{...e.entry,...e.file?{file:e.file}:{}}})}async function L_(e){let t=`/v1/inventory:list`;return e.type&&(t+=`?type=${encodeURIComponent(e.type)}`),P_(`GET`,t,{vertical:e.vertical,jurisdiction:e.jurisdiction})}async function R_(e){return P_(`POST`,`/v1/inventory:create`,{vertical:e.vertical,jurisdiction:e.jurisdiction,body:e.item})}async function z_(e){return P_(`PUT`,`/v1/inventory:update`,{vertical:e.vertical,jurisdiction:e.jurisdiction,body:{id:e.id,...e.item}})}async function B_(e){return P_(`DELETE`,`/v1/inventory:delete`,{vertical:e.vertical,jurisdiction:e.jurisdiction,body:{id:e.id}})}async function V_(e){return P_(`POST`,`/v1/inventory:attest`,{vertical:e.vertical,jurisdiction:e.jurisdiction,body:{dtcId:e.dtcId}})}async function H_(e){return P_(`GET`,`/v1/customers:list`,{vertical:e.vertical,jurisdiction:e.jurisdiction})}async function U_(e){return P_(`POST`,`/v1/customers:create`,{vertical:e.vertical,jurisdiction:e.jurisdiction,body:e.customer})}async function W_(e){return P_(`PUT`,`/v1/customers:update`,{vertical:e.vertical,jurisdiction:e.jurisdiction,body:{id:e.id,...e.customer}})}async function G_(e){return P_(`DELETE`,`/v1/customers:delete`,{vertical:e.vertical,jurisdiction:e.jurisdiction,body:{id:e.id}})}async function K_(e){return P_(`GET`,`/v1/appointments:list`,{vertical:e.vertical,jurisdiction:e.jurisdiction})}async function q_(e){return P_(`POST`,`/v1/appointments:create`,{vertical:e.vertical,jurisdiction:e.jurisdiction,body:e.appointment})}async function J_(e){return P_(`PUT`,`/v1/appointments:update`,{vertical:e.vertical,jurisdiction:e.jurisdiction,body:{id:e.id,...e.appointment}})}async function Y_(e){return P_(`DELETE`,`/v1/appointments:delete`,{vertical:e.vertical,jurisdiction:e.jurisdiction,body:{id:e.id}})}async function X_(e){let t=`/v1/ai:activity`;return e.limit&&(t+=`?limit=${e.limit}`),P_(`GET`,t,{vertical:e.vertical,jurisdiction:e.jurisdiction})}async function Z_(e){return P_(`GET`,`/v1/integrations:list`,{vertical:e.vertical,jurisdiction:e.jurisdiction})}async function Q_(e){return P_(`POST`,`/v1/integrations:disconnect`,{vertical:e.vertical,jurisdiction:e.jurisdiction,body:{id:e.integrationId}})}async function $_(e){return P_(`POST`,`/v1/integrations:sync`,{vertical:e.vertical,jurisdiction:e.jurisdiction,body:{id:e.integrationId}})}async function ev(e){return P_(`POST`,`/v1/analyst:analyze`,{vertical:e.vertical,jurisdiction:e.jurisdiction,body:{deal:e.deal}})}async function tv(e){return P_(`GET`,`/v1/analyst:deals${e.limit?`?limit=${e.limit}`:``}`,{vertical:e.vertical,jurisdiction:e.jurisdiction})}async function nv(e){return P_(`GET`,`/v1/me:memberships`,{vertical:e.vertical,jurisdiction:e.jurisdiction})}async function rv(e){return P_(`GET`,`/v1/wallet:assets`,{vertical:e.vertical,jurisdiction:e.jurisdiction})}async function iv(e){return P_(`GET`,`/v1/wallet:tokens:list`,{vertical:e.vertical,jurisdiction:e.jurisdiction})}async function av(e){return P_(`POST`,`/v1/wallet:token:create`,{vertical:e.vertical,jurisdiction:e.jurisdiction,body:e.token})}async function ov(e){return P_(`GET`,`/v1/wallet:captables:list`,{vertical:e.vertical,jurisdiction:e.jurisdiction})}async function sv(e){return P_(`POST`,`/v1/wallet:captable:create`,{vertical:e.vertical,jurisdiction:e.jurisdiction,body:e.capTable})}function cv({children:e,currentSection:t,onNavigate:n,onBackToHub:r}){let[i,a]=(0,_.useState)(!1),[o,s]=(0,_.useState)(null);(0,_.useEffect)(()=>{c()},[]);async function c(){try{let e=await nv({vertical:localStorage.getItem(`VERTICAL`)||`auto`,jurisdiction:localStorage.getItem(`JURISDICTION`)||`IL`});if(e.ok&&e.memberships&&e.memberships.length>0){let t=e.memberships[0].tenantId,n=e.tenants?.[t];s(n)}}catch(e){console.error(`Failed to load tenant info:`,e)}}let[l,u]=(0,_.useState)(!1);return(0,$.jsxs)(`div`,{className:`appShell`,children:[(0,$.jsxs)(`div`,{className:`topbar`,children:[(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>a(!i),"aria-label":`Toggle menu`,children:``}),(0,$.jsx)(`div`,{className:`topbarTitle`,children:`TitleApp`}),o&&(0,$.jsxs)(`div`,{style:{marginLeft:`auto`,display:`flex`,alignItems:`center`,gap:`12px`,padding:`8px 16px`,background:`rgba(124, 58, 237, 0.1)`,borderRadius:`12px`,border:`1px solid rgba(124, 58, 237, 0.2)`},children:[o.logoUrl?(0,$.jsx)(`img`,{src:o.logoUrl,alt:o.name||`Business logo`,style:{width:`32px`,height:`32px`,borderRadius:`50%`,objectFit:`cover`}}):(0,$.jsx)(`div`,{style:{width:`32px`,height:`32px`,borderRadius:`50%`,background:`linear-gradient(135deg, rgb(124, 58, 237) 0%, rgb(147, 51, 234) 100%)`,display:`flex`,alignItems:`center`,justifyContent:`center`,color:`white`,fontWeight:600,fontSize:`14px`},children:o.name?.charAt(0)?.toUpperCase()||`B`}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600,color:`var(--text)`,whiteSpace:`nowrap`},children:(()=>{if((localStorage.getItem(`VERTICAL`)||`auto`)===`consumer`){let e=(o.name||``).split(` `)[0];return e?`${e}'s Vault`:`My Vault`}return o.name||`Business`})()})]}),!o&&(0,$.jsx)(`div`,{className:`pill`,children:`Business`})]}),i&&(0,$.jsx)(`div`,{className:`backdrop`,onClick:()=>a(!1),"aria-hidden":`true`}),(0,$.jsx)(`div`,{className:i?`sidebar sidebarOpen`:`sidebar`,children:(0,$.jsx)(D_,{currentSection:t,onNavigate:n,onClose:()=>a(!1),tenantName:o?.name,onBackToHub:r})}),(0,$.jsxs)(`div`,{className:`dualPanel`,children:[(0,$.jsx)(`main`,{className:`main`,children:e}),(0,$.jsx)(`aside`,{className:`chatSidebar`,children:(0,$.jsx)(A_,{currentSection:t})})]}),(0,$.jsx)(`button`,{className:`chatToggleTab`,onClick:()=>u(!l),"aria-label":l?`Close chat`:`Open chat`,children:l?(0,$.jsxs)(`svg`,{width:`24`,height:`24`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:[(0,$.jsx)(`line`,{x1:`18`,y1:`6`,x2:`6`,y2:`18`}),(0,$.jsx)(`line`,{x1:`6`,y1:`6`,x2:`18`,y2:`18`})]}):(0,$.jsx)(`svg`,{width:`24`,height:`24`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,children:(0,$.jsx)(`path`,{d:`M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z`})})}),l&&(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{className:`mobileChatBackdrop`,onClick:()=>u(!1)}),(0,$.jsx)(`div`,{className:`mobileChatPanel`,children:(0,$.jsx)(A_,{currentSection:t})})]})]})}var lv={auto:`AD`,analyst:`IA`,"real-estate":`RE`,aviation:`AV`,builder:`AI`},uv=[{id:`auto`,label:`Auto Dealer`,description:`Manage inventory, sales, service, and compliance`,cosManages:[`Vehicle inventory and aging alerts`,`Customer outreach and lead gen`,`F&I product recommendations`,`Service scheduling and upsells`]},{id:`analyst`,label:`Investment Analyst`,description:`Analyze deals, portfolio, and risk`,cosManages:[`Deal screening and analysis`,`Portfolio risk monitoring`,`Due diligence workflows`,`Investment memo generation`]},{id:`real-estate`,label:`Real Estate`,description:`Manage listings, tenants, and closings`,cosManages:[`Property listings and showings`,`Tenant management and leases`,`Maintenance requests`,`Closing coordination`]},{id:`aviation`,label:`Aviation`,description:`Track aircraft, flights, and certifications`,cosManages:[`Aircraft records and maintenance`,`Flight hour tracking`,`Certification management`,`Compliance documentation`]},{id:`builder`,label:`Build an AI Service`,description:`Turn your expertise into a subscribable AI product`,cosManages:[`Conversational interview to extract your workflow`,`Auto-generated AI Worker from your expertise`,`Pricing and subscriber management`,`Publish to the RAAS Store`]}],dv=[{code:`IL`,label:`Illinois`},{code:`FL`,label:`Florida`},{code:`CA`,label:`California`},{code:`TX`,label:`Texas`}];function fv({existingWorkspaces:e,onCreated:t,onCancel:n}){let[r,i]=(0,_.useState)(1),[a,o]=(0,_.useState)(null),[s,c]=(0,_.useState)(``),[l,u]=(0,_.useState)(``),[d,f]=(0,_.useState)(``),[p,m]=(0,_.useState)(!1),[h,g]=(0,_.useState)(null),v=uv.find(e=>e.id===a);function y(e){if(e===`builder`){b();return}o(e),i(2)}async function b(){m(!0),g(null);try{let e=localStorage.getItem(`ID_TOKEN`),n=await(await fetch(`https://titleapp-frontdoor.titleapp-core.workers.dev/api?path=/v1/workspaces`,{method:`POST`,headers:{Authorization:`Bearer ${e}`,"Content-Type":`application/json`},body:JSON.stringify({vertical:`custom`,name:`My AI Service`,tagline:``,jurisdiction:`GLOBAL`})})).json();n.ok?(sessionStorage.setItem(`ta_builder_prompt`,`true`),t(n.workspace)):(g(n.error||`Failed to create workspace`),m(!1))}catch(e){console.error(`Builder workspace creation failed:`,e),g(`Failed to create workspace`),m(!1)}}function x(){if(!s.trim()){g(`Business name is required`);return}if(!d){g(`Please select a state`);return}if(e.find(e=>e.vertical===a&&e.jurisdiction===d)){g(`You already have a ${v.label} workspace for ${d}`);return}g(null),i(3)}async function S(){m(!0),g(null);try{let e=localStorage.getItem(`ID_TOKEN`),n=await(await fetch(`https://titleapp-frontdoor.titleapp-core.workers.dev/api?path=/v1/workspaces`,{method:`POST`,headers:{Authorization:`Bearer ${e}`,"Content-Type":`application/json`},body:JSON.stringify({vertical:a,name:s.trim(),tagline:l.trim(),jurisdiction:d})})).json();n.ok?t(n.workspace):(g(n.error||`Failed to create workspace`),m(!1))}catch(e){console.error(`Create workspace failed:`,e),g(`Failed to create workspace`),m(!1)}}let C=dv.find(e=>e.code===d)?.label||d;return(0,$.jsx)(`div`,{style:{minHeight:`100vh`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`#f8fafc`,padding:20},children:(0,$.jsxs)(`div`,{style:{maxWidth:640,width:`100%`},children:[(0,$.jsxs)(`div`,{style:{marginBottom:24,display:`flex`,alignItems:`center`,justifyContent:`space-between`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:20,fontWeight:700,color:`#7c3aed`},children:`TitleApp AI`}),(0,$.jsx)(`div`,{style:{fontSize:14,color:`#64748b`,marginTop:2},children:`Add a Business Workspace`})]}),(0,$.jsx)(`button`,{onClick:n,style:{background:`none`,border:`1px solid #e2e8f0`,borderRadius:8,padding:`6px 16px`,cursor:`pointer`,color:`#64748b`,fontSize:14},children:`Cancel`})]}),(0,$.jsx)(`div`,{style:{display:`flex`,gap:8,marginBottom:32},children:[1,2,3].map(e=>(0,$.jsx)(`div`,{style:{flex:1,height:4,borderRadius:2,background:e<=r?`#7c3aed`:`#e2e8f0`,transition:`background 0.2s`}},e))}),r===1&&(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:18,fontWeight:600,color:`#1e293b`,marginBottom:20},children:`What kind of business are you running?`}),(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(auto-fill, minmax(140px, 1fr))`,gap:12},children:uv.map(e=>(0,$.jsxs)(`div`,{onClick:()=>y(e.id),style:{border:`1px solid #e2e8f0`,borderRadius:12,padding:20,cursor:p?`wait`:`pointer`,textAlign:`center`,transition:`all 0.2s`,background:`white`},onMouseEnter:e=>{e.currentTarget.style.borderColor=`#7c3aed`,e.currentTarget.style.background=`#faf5ff`},onMouseLeave:e=>{e.currentTarget.style.borderColor=`#e2e8f0`,e.currentTarget.style.background=`white`},children:[(0,$.jsx)(`div`,{style:{width:40,height:40,borderRadius:8,backgroundColor:e.id===`builder`?`#f3e8ff`:`#f1f5f9`,display:`flex`,alignItems:`center`,justifyContent:`center`,fontSize:14,fontWeight:700,color:e.id===`builder`?`#7c3aed`:`#475569`,marginBottom:8,margin:`0 auto 8px`,letterSpacing:1},children:lv[e.id]||e.id.slice(0,2).toUpperCase()}),(0,$.jsx)(`div`,{style:{fontWeight:600,fontSize:14,color:`#1e293b`,marginBottom:4},children:e.label}),(0,$.jsx)(`div`,{style:{fontSize:12,color:`#64748b`,lineHeight:1.4},children:e.description})]},e.id))}),(0,$.jsx)(`div`,{style:{textAlign:`center`,marginTop:20,color:`#94a3b8`,fontSize:13},children:`$9/month per workspace  14-day free trial  Cancel anytime`})]}),r===2&&(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:18,fontWeight:600,color:`#1e293b`,marginBottom:20},children:`Tell us about your business`}),(0,$.jsxs)(`div`,{style:{background:`white`,borderRadius:12,padding:24},children:[(0,$.jsxs)(`div`,{style:{marginBottom:16},children:[(0,$.jsx)(`label`,{style:{display:`block`,fontSize:13,fontWeight:600,color:`#334155`,marginBottom:6},children:`Business Name`}),(0,$.jsx)(`input`,{type:`text`,value:s,onChange:e=>c(e.target.value),placeholder:`Demo Motors`,maxLength:200,style:{width:`100%`,padding:`10px 12px`,border:`1px solid #d1d5db`,borderRadius:8,fontSize:14,outline:`none`,boxSizing:`border-box`},onFocus:e=>e.target.style.borderColor=`#7c3aed`,onBlur:e=>e.target.style.borderColor=`#d1d5db`})]}),(0,$.jsxs)(`div`,{style:{marginBottom:16},children:[(0,$.jsx)(`label`,{style:{display:`block`,fontSize:13,fontWeight:600,color:`#334155`,marginBottom:6},children:`Tagline (optional)`}),(0,$.jsx)(`input`,{type:`text`,value:l,onChange:e=>u(e.target.value),placeholder:`Toyota Dealership \\u2014 Houston, TX`,maxLength:500,style:{width:`100%`,padding:`10px 12px`,border:`1px solid #d1d5db`,borderRadius:8,fontSize:14,outline:`none`,boxSizing:`border-box`},onFocus:e=>e.target.style.borderColor=`#7c3aed`,onBlur:e=>e.target.style.borderColor=`#d1d5db`})]}),(0,$.jsxs)(`div`,{style:{marginBottom:8},children:[(0,$.jsx)(`label`,{style:{display:`block`,fontSize:13,fontWeight:600,color:`#334155`,marginBottom:6},children:`What state do you operate in?`}),(0,$.jsxs)(`select`,{value:d,onChange:e=>f(e.target.value),style:{width:`100%`,padding:`10px 12px`,border:`1px solid #d1d5db`,borderRadius:8,fontSize:14,outline:`none`,background:`white`,boxSizing:`border-box`},children:[(0,$.jsx)(`option`,{value:``,children:`Select a state`}),dv.map(e=>(0,$.jsx)(`option`,{value:e.code,children:e.label},e.code))]}),(0,$.jsx)(`div`,{style:{fontSize:12,color:`#94a3b8`,marginTop:6},children:`This determines your compliance rules and tax structure`})]}),h&&(0,$.jsx)(`div`,{style:{color:`#dc2626`,fontSize:13,marginTop:12},children:h})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:12,marginTop:20},children:[(0,$.jsx)(`button`,{onClick:()=>{i(1),g(null)},style:{padding:`10px 20px`,border:`1px solid #e2e8f0`,borderRadius:8,background:`white`,cursor:`pointer`,fontSize:14,color:`#64748b`},children:`Back`}),(0,$.jsx)(`button`,{onClick:x,style:{flex:1,padding:`10px 20px`,border:`none`,borderRadius:8,background:`#7c3aed`,color:`white`,cursor:`pointer`,fontSize:14,fontWeight:600},children:`Continue`})]})]}),r===3&&v&&(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:18,fontWeight:600,color:`#1e293b`,marginBottom:20},children:`Ready to launch?`}),(0,$.jsxs)(`div`,{style:{background:`white`,borderRadius:12,padding:24},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:12,marginBottom:16},children:[(0,$.jsx)(`div`,{style:{width:36,height:36,borderRadius:8,backgroundColor:`#f1f5f9`,display:`flex`,alignItems:`center`,justifyContent:`center`,fontSize:13,fontWeight:700,color:`#475569`,letterSpacing:1,flexShrink:0},children:lv[v.id]||v.id.slice(0,2).toUpperCase()}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600,fontSize:16,color:`#1e293b`},children:s}),(0,$.jsxs)(`div`,{style:{fontSize:13,color:`#64748b`},children:[v.label,`  `,C]})]})]}),l&&(0,$.jsx)(`div`,{style:{color:`#475569`,fontSize:14,marginBottom:16},children:l}),(0,$.jsxs)(`div`,{style:{marginBottom:16},children:[(0,$.jsx)(`div`,{style:{fontSize:13,fontWeight:600,color:`#334155`,marginBottom:8},children:`Your AI assistant will manage:`}),v.cosManages.map((e,t)=>(0,$.jsxs)(`div`,{style:{fontSize:13,color:`#475569`,padding:`3px 0`,paddingLeft:16,position:`relative`},children:[(0,$.jsx)(`span`,{style:{position:`absolute`,left:0},children:``}),e,t===v.cosManages.length-1&&d?` (${d} rules)`:``]},t))]}),(0,$.jsx)(`div`,{style:{background:`#f8fafc`,borderRadius:8,padding:`10px 14px`,fontSize:13,color:`#64748b`},children:`14-day free trial, then $9/month`}),h&&(0,$.jsx)(`div`,{style:{color:`#dc2626`,fontSize:13,marginTop:12},children:h})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:12,marginTop:20},children:[(0,$.jsx)(`button`,{onClick:()=>{i(2),g(null)},style:{padding:`10px 20px`,border:`1px solid #e2e8f0`,borderRadius:8,background:`white`,cursor:`pointer`,fontSize:14,color:`#64748b`},children:`Back`}),(0,$.jsx)(`button`,{onClick:S,disabled:p,style:{flex:1,padding:`12px 20px`,border:`none`,borderRadius:8,background:p?`#a78bfa`:`#7c3aed`,color:`white`,cursor:p?`default`:`pointer`,fontSize:15,fontWeight:600},children:p?`Creating...`:`Start Free Trial`})]})]})]})})}var pv={consumer:`PV`,analyst:`IA`,auto:`AD`,"real-estate":`RE`,aviation:`AV`};function mv(e){if(!e)return 0;let t=(e.toDate?e.toDate():new Date(e))-Date.now();return Math.max(0,Math.ceil(t/(1e3*60*60*24)))}function hv({workspace:e,onLaunch:t}){let[n,r]=(0,_.useState)(!1),i={active:{label:e.monthlyPrice===0?`FREE`:`$${e.monthlyPrice/100}/mo`,color:`#16a34a`},trial:{label:`Trial \u00B7 ${mv(e.trialEndsAt)} days left`,color:`#d97706`},suspended:{label:`Suspended`,color:`#dc2626`}}[e.status]||{label:e.status,color:`#6b7280`},a=pv[e.vertical]||e.vertical?.slice(0,2).toUpperCase()||`??`;return(0,$.jsxs)(`div`,{style:{border:n?`1px solid #7c3aed`:`1px solid #e2e8f0`,borderRadius:12,padding:20,cursor:`pointer`,transition:`all 0.2s`,background:n?`#faf5ff`:`white`,minWidth:180,flex:`1 1 180px`,maxWidth:240},onClick:()=>t(e),onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:[(0,$.jsx)(`div`,{style:{width:40,height:40,borderRadius:8,backgroundColor:`#f1f5f9`,display:`flex`,alignItems:`center`,justifyContent:`center`,fontSize:14,fontWeight:700,color:`#475569`,marginBottom:8,letterSpacing:1},children:a}),(0,$.jsx)(`div`,{style:{fontWeight:600,fontSize:16,color:`#1e293b`},children:e.name}),(0,$.jsx)(`div`,{style:{color:`#64748b`,fontSize:13,marginBottom:12,minHeight:18},children:e.tagline||``}),(0,$.jsx)(`div`,{style:{display:`inline-block`,padding:`2px 10px`,borderRadius:20,fontSize:12,fontWeight:600,backgroundColor:i.color+`15`,color:i.color},children:i.label}),(0,$.jsx)(`div`,{style:{marginTop:12},children:(0,$.jsx)(`button`,{style:{width:`100%`,padding:`8px 0`,backgroundColor:`#7c3aed`,color:`white`,border:`none`,borderRadius:8,fontWeight:600,cursor:`pointer`,fontSize:14},children:`Launch `})})]})}function gv({workspaces:e}){let t=e.filter(e=>e.status===`active`&&e.monthlyPrice>0).reduce((e,t)=>e+t.monthlyPrice,0);return(0,$.jsxs)(`div`,{style:{marginTop:32,padding:20,backgroundColor:`#f8fafc`,borderRadius:12},children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:12,color:`#1e293b`},children:`Monthly Summary`}),e.map(e=>(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,padding:`4px 0`,fontSize:14},children:[(0,$.jsx)(`span`,{style:{color:`#334155`},children:e.name}),(0,$.jsx)(`span`,{style:{color:`#64748b`},children:e.monthlyPrice===0?`FREE`:e.status===`trial`?`Trial (${mv(e.trialEndsAt)} days)`:`$${e.monthlyPrice/100}/mo`})]},e.id)),(0,$.jsxs)(`div`,{style:{borderTop:`1px solid #e2e8f0`,marginTop:8,paddingTop:8,display:`flex`,justifyContent:`space-between`,fontWeight:600,fontSize:14},children:[(0,$.jsx)(`span`,{style:{color:`#1e293b`},children:`Total`}),(0,$.jsxs)(`span`,{style:{color:`#1e293b`},children:[`$`,t/100,`/mo`]})]})]})}function _v({userName:e,onLaunch:t}){let[n,r]=(0,_.useState)(null),[i,a]=(0,_.useState)(null),[o,s]=(0,_.useState)(!1);async function c(){try{let e=localStorage.getItem(`ID_TOKEN`),t=await(await fetch(`https://titleapp-frontdoor.titleapp-core.workers.dev/api?path=/v1/workspaces`,{headers:{Authorization:`Bearer ${e}`}})).json();t.ok?r(t.workspaces):a(t.error||`Failed to load workspaces`)}catch(e){console.error(`Failed to load workspaces:`,e),a(`Failed to load workspaces`)}}(0,_.useEffect)(()=>{c()},[]);function l(e){localStorage.setItem(`VERTICAL`,e.vertical),localStorage.setItem(`WORKSPACE_ID`,e.id),localStorage.setItem(`WORKSPACE_NAME`,e.name),localStorage.setItem(`COMPANY_NAME`,e.name),localStorage.setItem(`TENANT_NAME`,e.name),e.jurisdiction?localStorage.setItem(`JURISDICTION`,e.jurisdiction):localStorage.removeItem(`JURISDICTION`),e.cosConfig&&localStorage.setItem(`COS_CONFIG`,JSON.stringify(e.cosConfig)),t(e)}function u(e){s(!1),c().then(()=>{l(e)})}return o?(0,$.jsx)(fv,{existingWorkspaces:n||[],onCreated:u,onCancel:()=>s(!1)}):(0,$.jsx)(`div`,{style:{minHeight:`100vh`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`#f8fafc`,padding:20},children:(0,$.jsxs)(`div`,{style:{maxWidth:720,width:`100%`},children:[(0,$.jsxs)(`div`,{style:{textAlign:`center`,marginBottom:32},children:[(0,$.jsx)(`div`,{style:{fontSize:20,fontWeight:700,color:`#7c3aed`,marginBottom:8},children:`TitleApp AI`}),(0,$.jsx)(`div`,{style:{fontSize:18,fontWeight:600,color:`#1e293b`},children:e?`Welcome back, ${e}`:`Welcome back`})]}),(0,$.jsxs)(`div`,{style:{marginBottom:24},children:[(0,$.jsx)(`div`,{style:{fontSize:12,fontWeight:600,color:`#94a3b8`,textTransform:`uppercase`,letterSpacing:1,marginBottom:16},children:`Your Workspaces`}),n===null&&!i&&(0,$.jsx)(`div`,{style:{textAlign:`center`,color:`#6b7280`,padding:40},children:`Loading...`}),i&&(0,$.jsx)(`div`,{style:{textAlign:`center`,color:`#dc2626`,padding:40},children:i}),n&&(0,$.jsx)(`div`,{style:{display:`flex`,flexWrap:`wrap`,gap:16},children:n.map(e=>(0,$.jsx)(hv,{workspace:e,onLaunch:l},e.id))})]}),(0,$.jsxs)(`div`,{onClick:()=>s(!0),style:{border:`2px dashed #cbd5e1`,borderRadius:12,padding:`20px 24px`,cursor:`pointer`,textAlign:`center`,transition:`all 0.2s`,marginBottom:8},onMouseEnter:e=>{e.currentTarget.style.borderColor=`#7c3aed`,e.currentTarget.style.background=`#faf5ff`},onMouseLeave:e=>{e.currentTarget.style.borderColor=`#cbd5e1`,e.currentTarget.style.background=`transparent`},children:[(0,$.jsx)(`div`,{style:{fontWeight:600,color:`#1e293b`,fontSize:15},children:`+ Add a Business Workspace`}),(0,$.jsx)(`div`,{style:{color:`#64748b`,fontSize:13,marginTop:4},children:`$9/month per workspace  14-day trial`})]}),n&&n.length>0&&(0,$.jsx)(gv,{workspaces:n})]})})}var vv=[`#7c3aed`,`#06b6d4`,`#10b981`,`#f59e0b`,`#ef4444`],yv={creation:{icon:`C`,color:`#7c3aed`,label:`Created`},maintenance:{icon:`M`,color:`#06b6d4`,label:`Maintenance`},transfer:{icon:`T`,color:`#7c3aed`,label:`Transfer`},inspection:{icon:`I`,color:`#22c55e`,label:`Inspection`},update:{icon:`U`,color:`#f59e0b`,label:`Update`},payment:{icon:`P`,color:`#16a34a`,label:`Payment`},verification:{icon:`V`,color:`#6366f1`,label:`Verification`},note:{icon:`N`,color:`#64748b`,label:`Note`},attestation:{icon:`A`,color:`#7c3aed`,label:`Attestation`}};function bv(e){if(!e)return``;let t=e.toDate?e.toDate():e._seconds?new Date(e._seconds*1e3):new Date(e);return isNaN(t.getTime())?``:t.toLocaleDateString(`en-US`,{month:`short`,day:`numeric`})}function xv(e){let t=e.metadata||{},n=Number(t.estimatedValue)||Number(t.value)||Number(t.marketValue)||Number(t.purchasePrice)||Number(e.estimatedValue)||Number(e.value)||Number(e.price)||0;if(n>0)return n;let r=Number(t.monthlyPayment)||0;return r>0?r*12:0}function Sv(e){let t=e.metadata||{};return t.title?t.title:t.make?`${t.year||``} ${t.make} ${t.model||``}`.trim():t.credentialName?t.credentialName:t.documentName?t.documentName:t.address?t.address:t.school?t.school:`Untitled`}function Cv(){let e=Ts().currentUser,[t,n]=(0,_.useState)([]),[r,i]=(0,_.useState)([]),[a,o]=(0,_.useState)(0),[s,c]=(0,_.useState)(!0);(0,_.useEffect)(()=>{if(!e){c(!1);return}l()},[e]);async function l(){try{n((await L_({vertical:`consumer`,jurisdiction:`GLOBAL`})).inventory||[]);try{let e=(await F_({vertical:`consumer`,jurisdiction:`GLOBAL`})).entries||[];i(e.slice(0,5)),o(e.length)}catch(e){console.warn(`Logbook query failed:`,e.message)}}catch(e){console.error(`Failed to load consumer dashboard:`,e)}finally{c(!1)}}let u=t.reduce((e,t)=>e+xv(t),0),d=[...t].map(e=>({...e,_value:xv(e),_title:Sv(e)})).sort((e,t)=>t._value-e._value).slice(0,5),f=t.length,p=t.length>0,m=d.reduce((e,t)=>e+t._value,0)||1,h=0;return s?(0,$.jsx)(`div`,{className:`card`,style:{padding:`48px`,textAlign:`center`},children:(0,$.jsx)(`div`,{style:{fontSize:`15px`,color:`#64748b`},children:`Loading your Vault...`})}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{className:`card`,style:{marginBottom:`14px`,padding:`28px 24px`,background:`linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%)`,border:`1px solid #e9d5ff`},children:u>0?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,fontWeight:600,color:`#7c3aed`,textTransform:`uppercase`,letterSpacing:`0.06em`,marginBottom:`8px`},children:`Total Vault Value`}),(0,$.jsxs)(`div`,{style:{fontSize:`36px`,fontWeight:900,color:`#1e293b`,lineHeight:1.1},children:[`$`,u.toLocaleString()]}),(0,$.jsxs)(`div`,{style:{fontSize:`13px`,color:`#64748b`,marginTop:`6px`},children:[`Across `,f,` Digital Title Certificate`,f===1?``:`s`]})]}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,fontWeight:600,color:`#7c3aed`,textTransform:`uppercase`,letterSpacing:`0.06em`,marginBottom:`8px`},children:`Your Vault`}),(0,$.jsxs)(`div`,{style:{fontSize:`36px`,fontWeight:900,color:`#1e293b`,lineHeight:1.1},children:[f,` DTC`,f===1?``:`s`]}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`,marginTop:`6px`},children:p?`Add estimated values to your records to see your total vault value`:(()=>{try{let e=JSON.parse(localStorage.getItem(`LANDING_CONTEXT`)||`null`);if(e?.chatSummary){if(/\b(car|vehicle|vin)\b/i.test(e.chatSummary))return`Let's record that vehicle you mentioned. Your AI is ready in the chat panel.`;if(/\b(property|house|rental)\b/i.test(e.chatSummary))return`Let's add that property you mentioned. Your AI is ready in the chat panel.`;if(/\b(document|passport|license)\b/i.test(e.chatSummary))return`Let's organize those documents you mentioned. Your AI is ready in the chat panel.`}}catch{}return`Add your first item to start building your Vault`})()})]})}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`3fr 2fr`,gap:`14px`,marginBottom:`14px`},children:[(0,$.jsxs)(`div`,{className:`card`,style:{padding:`20px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`16px`,color:`#1e293b`,marginBottom:`4px`},children:`Top Valued Assets`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`,marginBottom:`16px`},children:`Your five most valuable items by estimated worth`}),d.length>0&&d.some(e=>e._value>0)?(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`20px`,alignItems:`center`},children:[(0,$.jsxs)(`div`,{style:{position:`relative`,width:`120px`,height:`120px`,flexShrink:0},children:[(0,$.jsx)(`svg`,{viewBox:`0 0 36 36`,style:{width:`120px`,height:`120px`,transform:`rotate(-90deg)`},children:d.filter(e=>e._value>0).map((e,t)=>{let n=e._value/m*100,r=h;return h+=n,(0,$.jsx)(`circle`,{cx:`18`,cy:`18`,r:`14`,fill:`none`,stroke:vv[t%vv.length],strokeWidth:`5`,strokeDasharray:`${n} ${100-n}`,strokeDashoffset:-r,style:{transition:`stroke-dasharray 0.3s`}},t)})}),(0,$.jsxs)(`div`,{style:{position:`absolute`,top:`50%`,left:`50%`,transform:`translate(-50%, -50%)`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:800,color:`#1e293b`},children:d.filter(e=>e._value>0).length}),(0,$.jsx)(`div`,{style:{fontSize:`10px`,color:`#94a3b8`},children:`items`})]})]}),(0,$.jsx)(`div`,{style:{flex:1,display:`flex`,flexDirection:`column`,gap:`6px`},children:d.filter(e=>e._value>0).map((e,t)=>(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{width:`10px`,height:`10px`,borderRadius:`3px`,background:vv[t%vv.length],flexShrink:0}}),(0,$.jsx)(`div`,{style:{flex:1,fontSize:`13px`,color:`#334155`,overflow:`hidden`,textOverflow:`ellipsis`,whiteSpace:`nowrap`},children:e._title}),(0,$.jsxs)(`div`,{style:{fontSize:`13px`,fontWeight:600,color:`#1e293b`,flexShrink:0},children:[`$`,e._value.toLocaleString()]})]},t))})]}):(0,$.jsx)(`div`,{style:{padding:`20px 0`,textAlign:`center`,color:`#94a3b8`,fontSize:`14px`},children:p?`No items have estimated values yet. Add values to your records to see them here.`:`Add items to your Vault to see your top assets.`})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:[(0,$.jsx)(`div`,{className:`card`,style:{padding:`20px`,flex:1},children:(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`},children:[(0,$.jsx)(`div`,{style:{width:`44px`,height:`44px`,borderRadius:`12px`,background:`linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%)`,display:`flex`,alignItems:`center`,justifyContent:`center`,flexShrink:0},children:(0,$.jsx)(`svg`,{width:`22`,height:`22`,viewBox:`0 0 24 24`,fill:`none`,stroke:`#7c3aed`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:(0,$.jsx)(`path`,{d:`M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z`})})}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:`28px`,fontWeight:900,color:`#1e293b`,lineHeight:1},children:f}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`,marginTop:`2px`},children:`Digital Title Certificates`})]})]})}),(0,$.jsx)(`div`,{className:`card`,style:{padding:`20px`,flex:1},children:(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`},children:[(0,$.jsx)(`div`,{style:{width:`44px`,height:`44px`,borderRadius:`12px`,background:`linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%)`,display:`flex`,alignItems:`center`,justifyContent:`center`,flexShrink:0},children:(0,$.jsxs)(`svg`,{width:`22`,height:`22`,viewBox:`0 0 24 24`,fill:`none`,stroke:`#059669`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,$.jsx)(`path`,{d:`M4 19.5A2.5 2.5 0 0 1 6.5 17H20`}),(0,$.jsx)(`path`,{d:`M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z`})]})}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:`28px`,fontWeight:900,color:`#1e293b`,lineHeight:1},children:a}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`,marginTop:`2px`},children:`Total logbook entries`})]})]})})]})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr 1fr`,gap:`14px`},children:[(0,$.jsxs)(`div`,{className:`card`,style:{padding:`20px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`15px`,color:`#1e293b`,marginBottom:`4px`},children:`Wallet Summary`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`,marginBottom:`14px`},children:`Connected wallets and on-chain assets`}),(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`,padding:`10px 12px`,background:`#f8fafc`,borderRadius:`10px`,border:`1px solid #f1f5f9`,marginBottom:`10px`},children:[(0,$.jsx)(`div`,{style:{width:`8px`,height:`8px`,borderRadius:`50%`,background:localStorage.getItem(`VAULT_BLOCKCHAIN_ENABLED`)===`true`?`#16a34a`:`#94a3b8`}}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#334155`},children:localStorage.getItem(`VAULT_BLOCKCHAIN_ENABLED`)===`true`?`TitleApp Wallet -- Connected`:`No wallets connected`})]}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#94a3b8`,marginBottom:`12px`},children:`0 on-chain assets`}),(0,$.jsx)(`button`,{onClick:()=>window.dispatchEvent(new CustomEvent(`ta:navigate`,{detail:{section:`my-wallet`}})),style:{fontSize:`13px`,fontWeight:600,color:`#7c3aed`,background:`none`,border:`none`,cursor:`pointer`,padding:0},children:`Manage Wallets `})]}),(0,$.jsxs)(`div`,{className:`card`,style:{padding:`20px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`15px`,color:`#1e293b`,marginBottom:`4px`},children:`My GPTs`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`,marginBottom:`14px`},children:`Your specialized AI assistants`}),(0,$.jsx)(`div`,{style:{display:`flex`,flexWrap:`wrap`,gap:`6px`,marginBottom:`14px`},children:(0,$.jsx)(`span`,{style:{fontSize:`12px`,fontWeight:600,padding:`4px 10px`,borderRadius:`20px`,background:`#f3e8ff`,color:`#7c3aed`},children:`AI Assistant`})}),(0,$.jsx)(`button`,{onClick:()=>window.dispatchEvent(new CustomEvent(`ta:navigate`,{detail:{section:`ai-chats`}})),style:{fontSize:`13px`,fontWeight:600,color:`#7c3aed`,background:`none`,border:`none`,cursor:`pointer`,padding:0},children:`Go to My GPTs `})]}),(0,$.jsxs)(`div`,{className:`card`,style:{padding:`20px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`15px`,color:`#1e293b`,marginBottom:`4px`},children:`Recent Activity`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`,marginBottom:`14px`},children:`Latest updates across your Vault`}),r.length>0?(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`8px`},children:r.slice(0,4).map(e=>{let t=yv[e.entryType]||yv.note;return(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{width:`24px`,height:`24px`,borderRadius:`6px`,background:`${t.color}15`,border:`1px solid ${t.color}30`,display:`grid`,placeItems:`center`,fontSize:`11px`,fontWeight:700,color:t.color,flexShrink:0},children:t.icon}),(0,$.jsx)(`div`,{style:{flex:1,overflow:`hidden`},children:(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#334155`,overflow:`hidden`,textOverflow:`ellipsis`,whiteSpace:`nowrap`},children:e.dtcTitle||e.data?.description||t.label})}),(0,$.jsx)(`div`,{style:{fontSize:`11px`,color:`#94a3b8`,flexShrink:0},children:bv(e.createdAt)})]},e.id)})}):(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#94a3b8`},children:`No activity yet`}),r.length>0&&(0,$.jsx)(`button`,{onClick:()=>window.dispatchEvent(new CustomEvent(`ta:navigate`,{detail:{section:`my-logbook`}})),style:{fontSize:`13px`,fontWeight:600,color:`#7c3aed`,background:`none`,border:`none`,cursor:`pointer`,padding:0,marginTop:`10px`},children:`View All `})]})]})]})}function wv(){let e=localStorage.getItem(`VERTICAL`)||`auto`,t=e===`consumer`,n=e.toLowerCase()===`analyst`,r=e===`auto`,i=e===`real-estate`,a=e===`custom`,o=(()=>{try{return JSON.parse(localStorage.getItem(`ONBOARDING_STATE`)||`{}`)}catch{return{}}})().dataSource===`none`,s=(()=>{try{return JSON.parse(localStorage.getItem(`LANDING_CONTEXT`)||`null`)}catch{return null}})(),c=!!s,l=s?.name||``,u=s?.chatSummary||``,[d,f]=(0,_.useState)({revenue:{value:`$0`,trend:`+0%`},activeDeals:{value:`0`,trend:`+0`},aiConversations:{value:`0`,trend:`+0`},customers:{value:`0`,trend:`+0`}}),[p,m]=(0,_.useState)([]),[h,g]=(0,_.useState)(!1),[v,y]=(0,_.useState)(``),[b,x]=(0,_.useState)({actions:0,hoursSaved:0,valueSaved:0}),[S,C]=(0,_.useState)([{id:1,type:`hot_lead`,badge:`Hot Lead`,badgeColor:`#dc2626`,title:`Lease Expiring -- Maria Gonzalez`,detail:`2024 Corolla LE lease expires in 60 days. Cash buyer per notes. We have 3 new Corollas and 2 CPO in stock.`,action:`Send personalized upgrade offer`,potentialRevenue:`$2,800`,urgency:`high`,assignedTo:{type:`ai`,name:`Alex (AI)`}},{id:2,type:`service_upsell`,badge:`Service Upsell`,badgeColor:`#2563eb`,title:`High-Mileage Service -- Charles Cox`,detail:`2023 Tacoma TRD Sport, 9 service visits. Due for 60K service ($449). Factory warranty expiring -- candidate for Toyota Extra Care Gold ($2,995).`,action:`Schedule service + pitch extended warranty`,potentialRevenue:`$3,450`,urgency:`medium`,assignedTo:{type:`human`,name:`Jake Rivera`}},{id:3,type:`aging_inventory`,badge:`Aging Stock`,badgeColor:`#d97706`,title:`143 Days on Lot -- 2021 BMW X3 xDrive30i`,detail:`Stock U30000. Listed $34,169, market says $31,500. Losing $500/month in floor plan interest. Recommend markdown to $31,999 + Facebook Marketplace push.`,action:`Reprice + generate listing`,potentialRevenue:`Recover $31K`,urgency:`high`,assignedTo:{type:`ai`,name:`Alex (AI)`}},{id:4,type:`conquest`,badge:`Conquest`,badgeColor:`#16a34a`,title:`Trade-Up Opportunity -- Mark Brown`,detail:`Excellent satisfaction, 7 service visits. Drives 2025 Corolla Cross LE. Cross-sell to RAV4 upgrade -- we have 4 RAV4s aging 60+ days.`,action:`Send trade-in appraisal offer`,potentialRevenue:`$4,200`,urgency:`medium`,assignedTo:{type:`human`,name:`Lisa Chen`}}]),[w]=(0,_.useState)([`AI sent service reminder to Lawrence Foster -- confirmed for Monday 7:00 AM`,`AI generated Facebook listing for 2025 Camry LE (Stock N25000, 70 days)`,`Price alert: 2022 Ford Explorer XLT -- 126 days on lot -- markdown recommended`,`AI identified 4 lease-expiring customers for Q1 outreach`]),[T,E]=(0,_.useState)([{id:1,name:`Parkview Apartments -- 48 Units`,location:`Phoenix, AZ`,type:`Multifamily`,reason:`CMBS loan matures Aug 2026. Matches your multifamily criteria.`,value:`$8.2M`,risk:62,source:`Public Records -- Maturing CMBS`},{id:2,name:`Desert Ridge Office Plaza`,location:`Scottsdale, AZ`,type:`Office`,reason:`Listed by CBRE, below market ask for submarket.`,value:`$12.5M`,risk:38,source:`Broker Listing`},{id:3,name:`Cactus Lane Industrial`,location:`Mesa, AZ`,type:`Industrial`,reason:`Tax lien filed. Potential distressed acquisition.`,value:`$3.1M`,risk:78,source:`Public Records -- Tax Delinquency`},{id:4,name:`Sunrise Senior Living Portfolio`,location:`Tempe, AZ`,type:`Senior Housing`,reason:`Notice of Default filed Jan 2026. Lender may accept discount.`,value:`$15M`,risk:55,source:`Public Records -- Notice of Default`}]),D=localStorage.getItem(`JURISDICTION`)||`IL`;function O(e){window.dispatchEvent(new CustomEvent(`ta:navigate`,{detail:{section:e}}))}function ee(e,t,n,r){return t||/\b(car|vehicle|vin|truck|suv|inventory)\b/i.test(e)?`Your AI is ready to help you manage inventory, track leads, and close deals. Let's start by getting your first vehicle on the lot.`:n||/\b(property|rental|tenant|listing|house|apartment)\b/i.test(e)?`Your workspace is set up for real estate. Let's get your first listing or property entered so your AI can start working.`:r||/\b(deal|invest|portfolio|fund|analysis)\b/i.test(e)?`Your analysis workspace is ready. Upload a deal memo or set your screening criteria so your AI can start sourcing opportunities.`:`Your AI assistant is ready. Tell it what you need help with and it'll take it from there.`}function k(e,t,n,r){return t||/\b(car|vehicle|vin|truck|suv|inventory)\b/i.test(e)?`Help me add my first vehicle to inventory`:n||/\b(property|rental|tenant|listing|house|apartment)\b/i.test(e)?`Help me add my first property listing`:r||/\b(deal|invest|portfolio|fund|analysis)\b/i.test(e)?`Help me set up my deal screening criteria`:`Help me get started with my workspace`}(0,_.useEffect)(()=>{!t&&!a&&te()},[]);async function te(){g(!0);try{try{let t=await nv({vertical:e,jurisdiction:D});if(t.ok&&t.memberships?.length>0){let e=t.memberships[0].tenantId,n=t.tenants?.[e];n?.name&&y(n.name)}}catch(e){console.warn(`Could not load memberships:`,e.message)}let t=[];try{t=(await X_({vertical:e,jurisdiction:D,limit:100})).activity||[]}catch(e){console.warn(`Could not load AI activity:`,e.message)}if(!n){let e=new Date,n=t.filter(t=>{let n=new Date(t.createdAt);return n.getMonth()===e.getMonth()&&n.getFullYear()===e.getFullYear()}).length;x({actions:n,hoursSaved:n*.25,valueSaved:n*.25*35})}if(e===`analyst`){let t=T.reduce((e,t)=>{let n=parseFloat(t.value.replace(/[$M,]/g,``));return e+(isNaN(n)?0:n)},0),n=[];try{n=(await tv({vertical:e,jurisdiction:D})).deals||[]}catch(e){console.warn(`Could not load analyzed deals:`,e.message)}let r=t+n.reduce((e,t)=>{let n=(t.dealInput?.askAmount||``).replace(/[$,]/g,``),r=parseFloat(n);return e+(isNaN(r)?0:r/1e6)},0),i=T.length+n.length,a=n.filter(e=>e.analysis?.riskScore).length,o=a>0?Math.round(n.filter(e=>e.analysis?.riskScore).reduce((e,t)=>e+t.analysis.riskScore,0)/a):0,s=r>0?r:235.3,c=i>0?i:9,l=a>0?a:5,u=o>0?o:79;f({revenue:{value:`$${s.toFixed(1)}M`,trend:``},activeDeals:{value:c.toString(),trend:``},aiConversations:{value:l.toString(),trend:``},customers:{value:u.toString(),trend:``}});let d=T.length,p=d*4+l*3,m=p*250;x({actions:d+l,hoursSaved:p,valueSaved:m})}else if(e===`real-estate`)f({revenue:{value:`85.7%`,trend:`24 of 28 units`},activeDeals:{value:`$37,400`,trend:`Monthly rent revenue`},aiConversations:{value:`8`,trend:`5 active, 2 stale`},customers:{value:`3`,trend:`$1.2M pipeline`}}),x({actions:42,hoursSaved:38,valueSaved:5700});else if(e===`auto`)f({revenue:{value:`$8.4M`,trend:``},activeDeals:{value:`235`,trend:`85 new + 150 used`},aiConversations:{value:`47`,trend:``},customers:{value:`$187,200`,trend:``}}),x({actions:31,hoursSaved:34.5,valueSaved:8625});else if(e===`property-mgmt`){let t=(await L_({vertical:e,jurisdiction:D})).inventory||[],n=t.reduce((e,t)=>e+(t.metadata?.unitCount||1),0);f({revenue:{value:t.length.toString(),trend:``},activeDeals:{value:n.toString(),trend:``},aiConversations:{value:`95%`,trend:``},customers:{value:`0`,trend:``}})}else{let n=(await L_({vertical:e,jurisdiction:D})).inventory||[],r=n.filter(e=>e.status===`available`).reduce((e,t)=>e+(t.price||0),0),i=(await H_({vertical:e,jurisdiction:D})).customers||[];f({revenue:{value:`$${r.toLocaleString()}`,trend:``},activeDeals:{value:n.filter(e=>e.status===`available`).length.toString(),trend:``},aiConversations:{value:t.length.toString(),trend:``},customers:{value:i.length.toString(),trend:``}})}let r=[];try{r=((await L_({vertical:e,jurisdiction:D})).inventory||[]).slice(0,2)}catch{}let i=[];try{i=((await K_({vertical:e,jurisdiction:D})).appointments||[]).slice(0,2)}catch{}m([...r.map(e=>({id:`inv-${e.id}`,type:`Record Added`,description:`${e.metadata?.make||e.metadata?.address||``} ${e.metadata?.model||``} - ${e.status}`,date:new Date(e.createdAt).toLocaleDateString(),status:e.status})),...t.slice(0,2).map(e=>({id:`ai-${e.id}`,type:`AI Chat`,description:`Workflow ${e.workflowId} - ${e.status}`,date:new Date(e.createdAt).toLocaleDateString(),status:e.status})),...i.map(e=>({id:`appt-${e.id}`,type:`Appointment`,description:`${e.customerName} - ${e.type}`,date:new Date(e.datetime).toLocaleDateString(),status:e.status}))].slice(0,5))}catch(t){console.error(`Failed to load dashboard:`,t),e===`analyst`&&(f({revenue:{value:`$235.3M`,trend:``},activeDeals:{value:`9`,trend:``},aiConversations:{value:`5`,trend:``},customers:{value:`79`,trend:``}}),x({actions:9,hoursSaved:31,valueSaved:7750}))}finally{g(!1)}}function ne(){return e===`analyst`?[`Dealflow Value`,`Deals in Pipeline`,`Analyzed This Month`,`Avg Risk Score`]:e===`real-estate`?[`Occupancy Rate`,`Monthly Revenue`,`Active Listings`,`Pending Transactions`]:e===`auto`?[`Total Inventory Value`,`Units in Stock`,`Sold This Month`,`Gross Profit MTD`]:e===`property-mgmt`?[`Properties`,`Total Units`,`Occupancy Rate`,`Open Requests`]:[`Inventory Value`,`Available Units`,`AI Conversations`,`Total Customers`]}let re=ne(),ie=[{label:re[0],...d.revenue},{label:re[1],...d.activeDeals},{label:re[2],...d.aiConversations},{label:re[3],...d.customers}];return(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`pageHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:a?`AI Service Builder`:`Dashboard`}),(0,$.jsx)(`p`,{className:`subtle`,children:t?`Your personal Vault`:a?`Build a subscribable AI service from your expertise`:`Welcome to ${v||`your business`} -- Your overview`})]})}),a&&(0,$.jsxs)(`div`,{style:{padding:`40px 32px`,borderRadius:`16px`,background:`linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%)`,border:`1px solid #e9d5ff`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{marginBottom:`16px`},children:(0,$.jsxs)(`svg`,{width:`48`,height:`48`,viewBox:`0 0 200 200`,fill:`none`,children:[(0,$.jsx)(`circle`,{cx:`100`,cy:`100`,r:`95`,fill:`#7c3aed`}),(0,$.jsx)(`circle`,{cx:`100`,cy:`100`,r:`80`,fill:`#7c3aed`,stroke:`white`,strokeWidth:`2`}),(0,$.jsx)(`circle`,{cx:`100`,cy:`80`,r:`18`,fill:`white`}),(0,$.jsx)(`circle`,{cx:`100`,cy:`80`,r:`8`,fill:`#7c3aed`}),(0,$.jsx)(`rect`,{x:`94`,y:`90`,width:`12`,height:`35`,fill:`white`}),(0,$.jsx)(`rect`,{x:`94`,y:`115`,width:`8`,height:`4`,fill:`white`}),(0,$.jsx)(`rect`,{x:`94`,y:`122`,width:`5`,height:`3`,fill:`white`})]})}),(0,$.jsx)(`div`,{style:{fontSize:`22px`,fontWeight:700,color:`#1e293b`,marginBottom:`8px`},children:`Let's build your AI service`}),(0,$.jsx)(`div`,{style:{fontSize:`15px`,color:`#64748b`,lineHeight:1.6,maxWidth:`460px`,margin:`0 auto 24px`},children:`Use the chat panel on the right to describe your expertise. The AI will interview you, extract your workflow, and generate a publishable service.`}),(0,$.jsx)(`button`,{onClick:()=>window.dispatchEvent(new CustomEvent(`ta:chatPrompt`,{detail:{message:`I want to build an AI service`}})),style:{padding:`12px 28px`,fontSize:`15px`,fontWeight:600,borderRadius:`10px`,background:`#7c3aed`,color:`white`,border:`none`,cursor:`pointer`},children:`Start the interview`})]}),t&&(0,$.jsx)(Cv,{}),!t&&!a&&(o||c)&&(0,$.jsxs)(`div`,{style:{padding:`28px 24px`,marginBottom:`14px`,borderRadius:`14px`,background:`linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%)`,border:`1px solid #e9d5ff`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:700,marginBottom:`6px`,color:`#1e293b`},children:c?`${l?l+`, let's`:`Let's`} pick up where we left off`:`Welcome to your workspace`}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`#6b7280`,marginBottom:`16px`,lineHeight:1.5},children:c?ee(u,r,i,n):`You skipped data import during setup. Import your data or chat with your AI to get started.`}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`10px`},children:[(0,$.jsx)(`button`,{onClick:()=>{let e=c?k(u,r,i,n):`Help me get started with my workspace`;window.dispatchEvent(new CustomEvent(`ta:chatPrompt`,{detail:{message:e}}))},style:{padding:`10px 20px`,fontSize:`14px`,fontWeight:600,borderRadius:`8px`,background:`#7c3aed`,color:`white`,border:`none`,cursor:`pointer`},children:c?`Continue with AI`:`Chat with AI`}),(0,$.jsx)(`button`,{onClick:()=>window.dispatchEvent(new CustomEvent(`ta:navigate`,{detail:{section:`settings`}})),style:{padding:`10px 20px`,fontSize:`14px`,fontWeight:600,borderRadius:`8px`,background:`white`,color:`#7c3aed`,border:`1px solid #e9d5ff`,cursor:`pointer`},children:`Import Data`})]})]}),!t&&!a&&!c&&(0,$.jsx)(`div`,{className:`kpiRow`,children:h?(0,$.jsx)(`div`,{className:`card`,style:{padding:`24px`,textAlign:`center`},children:`Loading dashboard...`}):ie.map((e,t)=>(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:e.label}),(0,$.jsx)(`div`,{className:`kpiValue`,children:e.value}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,marginTop:`4px`,color:`#64748b`},children:e.trend})]},t))}),!t&&!a&&(0,$.jsxs)(`div`,{style:{padding:`20px`,background:`white`,borderRadius:`12px`,border:`2px solid #16a34a`,marginTop:`14px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,marginBottom:`4px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`16px`,fontWeight:700},children:`Value Tracker`}),(0,$.jsx)(`span`,{style:{fontSize:`13px`,color:`#64748b`},children:`AI-powered ROI this month`})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr 1fr 1fr`,gap:`16px`,marginTop:`12px`},children:[(0,$.jsxs)(`div`,{style:{textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`,textTransform:`uppercase`,letterSpacing:`0.06em`},children:n?`Deals Sourced + Analyzed`:r?`Leads Generated`:`Actions`}),(0,$.jsx)(`div`,{style:{fontSize:`28px`,fontWeight:900,marginTop:`4px`},children:r?23:b.actions})]}),(0,$.jsxs)(`div`,{style:{textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`,textTransform:`uppercase`,letterSpacing:`0.06em`},children:r?`Appointments Set`:`Hours Saved`}),(0,$.jsx)(`div`,{style:{fontSize:`28px`,fontWeight:900,marginTop:`4px`},children:r?8:b.hoursSaved})]}),(0,$.jsxs)(`div`,{style:{textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`,textTransform:`uppercase`,letterSpacing:`0.06em`},children:n?`Value at $250/hr`:r?`Hours Saved`:`Value at $35/hr`}),(0,$.jsx)(`div`,{style:{fontSize:`28px`,fontWeight:900,marginTop:`4px`,color:`#16a34a`},children:r?`34.5`:`$${b.valueSaved.toLocaleString()}`})]}),(0,$.jsxs)(`div`,{style:{textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`,textTransform:`uppercase`,letterSpacing:`0.06em`},children:`Your Cost`}),(0,$.jsx)(`div`,{style:{fontSize:`28px`,fontWeight:900,marginTop:`4px`,color:`#7c3aed`},children:`$9`}),(0,$.jsx)(`div`,{style:{fontSize:`11px`,color:`#64748b`},children:`/user/mo`})]})]}),(n||r)&&b.valueSaved>0&&(0,$.jsxs)(`div`,{style:{marginTop:`12px`,padding:`8px 12px`,background:`#f0fdf4`,borderRadius:`6px`,fontSize:`13px`,color:`#16a34a`,textAlign:`center`,fontWeight:500},children:[`Your AI has delivered $`,b.valueSaved.toLocaleString(),` in value this month  a `,Math.round(b.valueSaved/9),`x return on your $9 investment`]})]}),n&&(0,$.jsxs)(`div`,{style:{marginTop:`14px`},children:[(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`14px`,padding:`20px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`16px`,color:`#1e293b`,marginBottom:`4px`},children:`Research Track`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`,marginBottom:`16px`},children:`Active research and analysis pipeline`}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(4, 1fr)`,gap:`12px`},children:[(0,$.jsxs)(`div`,{onClick:()=>O(`research`),style:{padding:`12px`,background:`#f8fafc`,borderRadius:`8px`,textAlign:`center`,cursor:`pointer`},children:[(0,$.jsx)(`div`,{style:{fontSize:`24px`,fontWeight:800},children:`15`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`Active Items`})]}),(0,$.jsxs)(`div`,{onClick:()=>O(`research`),style:{padding:`12px`,background:`#f8fafc`,borderRadius:`8px`,textAlign:`center`,cursor:`pointer`},children:[(0,$.jsx)(`div`,{style:{fontSize:`24px`,fontWeight:800,color:`#d97706`},children:`3`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`Earnings This Week`})]}),(0,$.jsxs)(`div`,{onClick:()=>O(`research`),style:{padding:`12px`,background:`#fef2f2`,borderRadius:`8px`,textAlign:`center`,cursor:`pointer`},children:[(0,$.jsx)(`div`,{style:{fontSize:`24px`,fontWeight:800,color:`#dc2626`},children:`3`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#dc2626`},children:`Models Need Update`})]}),(0,$.jsxs)(`div`,{style:{padding:`12px`,background:`#f8fafc`,borderRadius:`8px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`24px`,fontWeight:800},children:`5`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`Sector Alerts`})]})]})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`14px`,marginBottom:`14px`},children:[(0,$.jsxs)(`div`,{className:`card`,style:{padding:`20px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`16px`,color:`#1e293b`,marginBottom:`4px`},children:`Portfolio Track`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`,marginBottom:`16px`},children:`Positions and market movements`}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`10px`},children:[(0,$.jsxs)(`div`,{onClick:()=>O(`portfolio`),style:{padding:`10px`,background:`#f0fdf4`,borderRadius:`8px`,cursor:`pointer`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:800,color:`#16a34a`},children:`+2.4%`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`Top Mover Today`})]}),(0,$.jsxs)(`div`,{onClick:()=>O(`portfolio`),style:{padding:`10px`,background:`#f8fafc`,borderRadius:`8px`,cursor:`pointer`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:800},children:`4`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`Near Price Targets`})]}),(0,$.jsxs)(`div`,{style:{padding:`10px`,background:`#fef2f2`,borderRadius:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:800,color:`#dc2626`},children:`1`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#dc2626`},children:`Risk Alert`})]}),(0,$.jsxs)(`div`,{onClick:()=>O(`portfolio`),style:{padding:`10px`,background:`#f8fafc`,borderRadius:`8px`,cursor:`pointer`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:800},children:`2`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`Rebalance Suggestions`})]})]}),(0,$.jsx)(`div`,{style:{marginTop:`12px`,padding:`10px`,background:`#fef3c7`,borderRadius:`8px`,fontSize:`13px`,color:`#92400e`},children:`Sentinel Defense -6.2% on contract delay -- review position`})]}),(0,$.jsxs)(`div`,{className:`card`,style:{padding:`20px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`16px`,color:`#1e293b`,marginBottom:`4px`},children:`Client Track`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`,marginBottom:`16px`},children:`LP communications and meetings`}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`10px`},children:[(0,$.jsxs)(`div`,{onClick:()=>O(`clients-lps`),style:{padding:`10px`,background:`#f8fafc`,borderRadius:`8px`,cursor:`pointer`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:800},children:`3`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`Letters Due`})]}),(0,$.jsxs)(`div`,{onClick:()=>O(`clients-lps`),style:{padding:`10px`,background:`#f8fafc`,borderRadius:`8px`,cursor:`pointer`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:800},children:`2`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`Meetings This Week`})]}),(0,$.jsxs)(`div`,{onClick:()=>O(`clients-lps`),style:{padding:`10px`,background:`#fff7ed`,borderRadius:`8px`,cursor:`pointer`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:800,color:`#d97706`},children:`1`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`Quarterly Letters`})]}),(0,$.jsxs)(`div`,{style:{padding:`10px`,background:`#f8fafc`,borderRadius:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:800},children:`0`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`Capital Calls`})]})]}),(0,$.jsx)(`div`,{style:{marginTop:`12px`,padding:`10px`,background:`#f0fdf4`,borderRadius:`8px`,fontSize:`13px`,color:`#16a34a`},children:`Blackstone LP quarterly letter drafted -- pending compliance review`})]})]})]}),n&&(0,$.jsxs)(`div`,{style:{marginTop:`14px`},children:[(0,$.jsxs)(`div`,{style:{marginBottom:`12px`},children:[(0,$.jsx)(`h2`,{style:{fontSize:`20px`,fontWeight:700,margin:0},children:`While You Were Out...`}),(0,$.jsx)(`p`,{style:{fontSize:`14px`,color:`var(--muted)`,margin:`4px 0 0`},children:T.length>0?`Your AI found ${T.length} opportunit${T.length===1?`y`:`ies`} matching your investment criteria`:``})]}),T.length>0?(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`14px`},children:T.map(e=>{let t=e.risk<40?`Low Risk`:e.risk<=65?`Medium Risk`:`High Risk`,n=e.risk<40?`#dcfce7`:e.risk<=65?`#fef3c7`:`#fee2e2`,r=e.risk<40?`#16a34a`:e.risk<=65?`#d97706`:`#dc2626`;return(0,$.jsxs)(`div`,{className:`card`,style:{padding:`20px`},children:[(0,$.jsxs)(`div`,{style:{marginBottom:`10px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`16px`,fontWeight:700},children:e.name}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--muted)`},children:e.location})]}),(0,$.jsx)(`span`,{style:{display:`inline-block`,fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:`var(--bg2, #f1f5f9)`,color:`var(--fg, #334155)`,marginBottom:`10px`,letterSpacing:`0.02em`,textTransform:`uppercase`},children:e.type}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`var(--fg)`,marginBottom:`12px`,lineHeight:1.4},children:e.reason}),(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`10px`,marginBottom:`8px`},children:[(0,$.jsx)(`span`,{style:{fontSize:`18px`,fontWeight:700},children:e.value}),(0,$.jsxs)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:n,color:r},children:[t,` (`,e.risk,`)`]})]}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`var(--muted)`,marginBottom:`14px`},children:e.source}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`},children:[(0,$.jsx)(`button`,{style:{flex:1,padding:`8px 14px`,fontSize:`13px`,fontWeight:600,border:`none`,borderRadius:`8px`,cursor:`pointer`,color:`#fff`,background:`linear-gradient(135deg, #7c3aed, #6d28d9)`},onClick:()=>window.dispatchEvent(new CustomEvent(`ta:chatPrompt`,{detail:{message:`Analyze the opportunity: `+e.name+` in `+e.location+`. Value: `+e.value+`. Risk score: `+e.risk+`. Source: `+e.source}})),children:`Review Analysis`}),(0,$.jsx)(`button`,{style:{padding:`8px 14px`,fontSize:`13px`,fontWeight:600,border:`1px solid var(--border, #e2e8f0)`,borderRadius:`8px`,cursor:`pointer`,background:`transparent`,color:`var(--muted)`},onClick:()=>E(t=>t.filter(t=>t.id!==e.id)),children:`Dismiss`})]})]},e.id)})}):(0,$.jsx)(`div`,{className:`card`,style:{padding:`24px`,textAlign:`center`,color:`var(--muted)`,fontSize:`14px`},children:`No new opportunities. Your AI is scanning for matches.`})]}),r&&(0,$.jsxs)(`div`,{style:{marginTop:`14px`},children:[(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`14px`,padding:`20px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`16px`,color:`#1e293b`,marginBottom:`4px`},children:`Sales Track`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`,marginBottom:`16px`},children:`Active pipeline and lead activity`}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(4, 1fr)`,gap:`12px`,marginBottom:`16px`},children:[(0,$.jsxs)(`div`,{onClick:()=>O(`sales-pipeline`),style:{padding:`12px`,background:`#f8fafc`,borderRadius:`8px`,textAlign:`center`,cursor:`pointer`},children:[(0,$.jsx)(`div`,{style:{fontSize:`24px`,fontWeight:800},children:`8`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`Active Deals`})]}),(0,$.jsxs)(`div`,{onClick:()=>O(`sales-pipeline`),style:{padding:`12px`,background:`#f8fafc`,borderRadius:`8px`,textAlign:`center`,cursor:`pointer`},children:[(0,$.jsx)(`div`,{style:{fontSize:`24px`,fontWeight:800},children:`$291,600`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`Pipeline Value`})]}),(0,$.jsxs)(`div`,{onClick:()=>O(`sales-pipeline`),style:{padding:`12px`,background:`#f8fafc`,borderRadius:`8px`,textAlign:`center`,cursor:`pointer`},children:[(0,$.jsx)(`div`,{style:{fontSize:`24px`,fontWeight:800},children:`3`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`Appointments Today`})]}),(0,$.jsxs)(`div`,{onClick:()=>O(`sales-pipeline`),style:{padding:`12px`,background:`#f8fafc`,borderRadius:`8px`,textAlign:`center`,cursor:`pointer`},children:[(0,$.jsx)(`div`,{style:{fontSize:`24px`,fontWeight:800,color:`#dc2626`},children:`2`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`Hot Leads`})]})]}),(0,$.jsx)(`div`,{style:{display:`flex`,gap:`4px`,alignItems:`flex-end`,height:`60px`},children:[{label:`Lead`,count:2,value:`$77.1K`,color:`#64748b`},{label:`Contacted`,count:2,value:`$66.8K`,color:`#2563eb`},{label:`Test Drive`,count:1,value:`$32.8K`,color:`#7c3aed`},{label:`Negotiation`,count:2,value:`$66.0K`,color:`#d97706`},{label:`F&I Desk`,count:1,value:`$48.9K`,color:`#16a34a`},{label:`Sold`,count:2,value:`$61.9K`,color:`#059669`}].map((e,t)=>(0,$.jsxs)(`div`,{onClick:()=>O(`sales-pipeline`),style:{flex:1,textAlign:`center`,cursor:`pointer`},children:[(0,$.jsx)(`div`,{style:{fontSize:`10px`,fontWeight:600,color:e.color,marginBottom:`2px`},children:e.value}),(0,$.jsx)(`div`,{style:{height:`${Math.max(12,e.count*14)}px`,background:e.color,borderRadius:`4px 4px 0 0`,marginBottom:`4px`}}),(0,$.jsx)(`div`,{style:{fontSize:`10px`,color:`#64748b`},children:e.label}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,fontWeight:700,color:e.color},children:e.count})]},t))})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`14px`,marginBottom:`14px`},children:[(0,$.jsxs)(`div`,{className:`card`,style:{padding:`20px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`16px`,color:`#1e293b`,marginBottom:`4px`},children:`Service Track`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`,marginBottom:`16px`},children:`Today's service operations`}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`10px`},children:[(0,$.jsxs)(`div`,{onClick:()=>O(`auto-service`),style:{padding:`10px`,background:`#f8fafc`,borderRadius:`8px`,cursor:`pointer`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:800},children:`8`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`Appointments`})]}),(0,$.jsxs)(`div`,{style:{padding:`10px`,background:`#f8fafc`,borderRadius:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:800},children:`$1,676`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`Revenue Today`})]}),(0,$.jsxs)(`div`,{onClick:()=>O(`auto-service`),style:{padding:`10px`,background:`#fff7ed`,borderRadius:`8px`,cursor:`pointer`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:800,color:`#d97706`},children:`5`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`Upsell Opps ($8,250)`})]}),(0,$.jsxs)(`div`,{style:{padding:`10px`,background:`#f8fafc`,borderRadius:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:800},children:`6/8`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`Confirmed`})]})]}),(0,$.jsx)(`div`,{style:{marginTop:`12px`,padding:`10px`,background:`#f0fdf4`,borderRadius:`8px`,fontSize:`13px`,color:`#16a34a`},children:`3 service customers matched to sales opportunities`})]}),(0,$.jsxs)(`div`,{className:`card`,style:{padding:`20px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`16px`,color:`#1e293b`,marginBottom:`4px`},children:`Inventory Track`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`,marginBottom:`16px`},children:`Lot status and acquisition`}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`10px`},children:[(0,$.jsxs)(`div`,{onClick:()=>O(`inventory`),style:{padding:`10px`,background:`#f8fafc`,borderRadius:`8px`,cursor:`pointer`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:800},children:`85`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`New (avg 28 days)`})]}),(0,$.jsxs)(`div`,{onClick:()=>O(`inventory`),style:{padding:`10px`,background:`#f8fafc`,borderRadius:`8px`,cursor:`pointer`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:800},children:`150`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`Used (avg 45 days)`})]}),(0,$.jsxs)(`div`,{onClick:()=>O(`inventory`),style:{padding:`10px`,background:`#fef2f2`,borderRadius:`8px`,cursor:`pointer`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:800,color:`#dc2626`},children:`12`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#dc2626`},children:`Over 90 days`})]}),(0,$.jsxs)(`div`,{style:{padding:`10px`,background:`#f8fafc`,borderRadius:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:800},children:`6`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`Acquired This Week`})]})]}),(0,$.jsxs)(`div`,{style:{marginTop:`14px`,padding:`12px`,background:`#fffbeb`,borderRadius:`8px`,border:`1px solid #fef3c7`},children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,fontWeight:700,color:`#92400e`,marginBottom:`8px`},children:`Inventory Acquisition`}),(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`4px`,fontSize:`13px`,color:`#78350f`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`},children:[(0,$.jsx)(`span`,{children:`Trade-ins this week: 3`}),(0,$.jsx)(`span`,{style:{fontWeight:600},children:`$47,500`})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`},children:[(0,$.jsx)(`span`,{children:`Auction purchases: 2`}),(0,$.jsx)(`span`,{style:{fontWeight:600},children:`$31,200`})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`},children:[(0,$.jsx)(`span`,{children:`Wholesale buys: 1`}),(0,$.jsx)(`span`,{style:{fontWeight:600},children:`$18,900`})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,marginTop:`4px`,paddingTop:`4px`,borderTop:`1px solid #fde68a`,fontWeight:700},children:[(0,$.jsx)(`span`,{children:`Total acquisition`}),(0,$.jsx)(`span`,{children:`$97,600`})]})]})]})]})]}),(0,$.jsxs)(`div`,{style:{marginBottom:`12px`},children:[(0,$.jsx)(`h2`,{style:{fontSize:`20px`,fontWeight:700,margin:0},children:`While You Were Out...`}),(0,$.jsxs)(`p`,{style:{fontSize:`14px`,color:`var(--muted)`,margin:`4px 0 0`},children:[`Your AI found `,S.length,` revenue opportunities overnight`]})]}),S.length>0?(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`14px`},children:S.map(e=>(0,$.jsxs)(`div`,{className:`card`,style:{padding:`20px`},children:[(0,$.jsxs)(`div`,{style:{marginBottom:`10px`,display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,$.jsx)(`span`,{style:{display:`inline-block`,fontSize:`11px`,fontWeight:600,padding:`2px 10px`,borderRadius:`9999px`,background:`${e.badgeColor}18`,color:e.badgeColor,letterSpacing:`0.02em`},children:e.badge}),e.urgency===`high`&&(0,$.jsx)(`span`,{style:{fontSize:`11px`,fontWeight:600,color:`#dc2626`},children:`URGENT`}),(0,$.jsx)(`span`,{style:{marginLeft:`auto`,fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:e.assignedTo?.type===`ai`?`#f3e8ff`:`#f1f5f9`,color:e.assignedTo?.type===`ai`?`#7c3aed`:`#475569`},children:e.assignedTo?.name||`Unassigned`})]}),(0,$.jsx)(`div`,{style:{fontSize:`16px`,fontWeight:700,marginBottom:`8px`},children:e.title}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`var(--fg, #334155)`,marginBottom:`10px`,lineHeight:1.5},children:e.detail}),(0,$.jsxs)(`div`,{style:{fontSize:`13px`,color:`#64748b`,fontStyle:`italic`,marginBottom:`10px`},children:[`Suggested: `,e.action]}),(0,$.jsx)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`10px`,marginBottom:`14px`},children:(0,$.jsxs)(`span`,{style:{fontSize:`16px`,fontWeight:700,color:`#16a34a`},children:[`Potential: `,e.potentialRevenue]})}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`},children:[(0,$.jsx)(`button`,{style:{flex:1,padding:`8px 14px`,fontSize:`13px`,fontWeight:600,border:`none`,borderRadius:`8px`,cursor:`pointer`,color:`#fff`,background:`linear-gradient(135deg, #7c3aed, #6d28d9)`},onClick:()=>window.dispatchEvent(new CustomEvent(`ta:chatPrompt`,{detail:{message:`Draft and send the outreach for `+e.title.split(` -- `)[1]+`. `+e.detail}})),children:`Let AI Handle It`}),(0,$.jsx)(`button`,{style:{padding:`8px 14px`,fontSize:`13px`,fontWeight:600,border:`1px solid var(--border, #e2e8f0)`,borderRadius:`8px`,cursor:`pointer`,background:`transparent`,color:`var(--fg, #334155)`},onClick:()=>window.dispatchEvent(new CustomEvent(`ta:chatPrompt`,{detail:{message:`Show me the details for this opportunity: `+e.title+`. `+e.detail}})),children:`Review First`}),(0,$.jsx)(`button`,{style:{padding:`8px 14px`,fontSize:`13px`,fontWeight:600,border:`none`,borderRadius:`8px`,cursor:`pointer`,background:`transparent`,color:`#94a3b8`},onClick:()=>C(t=>t.filter(t=>t.id!==e.id)),children:`Dismiss`})]})]},e.id))}):(0,$.jsx)(`div`,{className:`card`,style:{padding:`24px`,textAlign:`center`,color:`var(--muted)`,fontSize:`14px`},children:`No new opportunities. Your AI is monitoring the lot and customer database.`})]}),i&&(0,$.jsxs)(`div`,{style:{marginTop:`14px`},children:[(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`14px`,padding:`20px`,borderLeft:`4px solid #2563eb`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`16px`,color:`#1e293b`,marginBottom:`4px`},children:`Property Management Track`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`,marginBottom:`16px`},children:`Portfolio health and tenant operations`}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(4, 1fr)`,gap:`12px`},children:[(0,$.jsxs)(`div`,{onClick:()=>O(`re-properties`),style:{padding:`12px`,background:`#f8fafc`,borderRadius:`8px`,textAlign:`center`,cursor:`pointer`},children:[(0,$.jsx)(`div`,{style:{fontSize:`24px`,fontWeight:800},children:`28`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`Total Units`})]}),(0,$.jsxs)(`div`,{onClick:()=>O(`re-tenants`),style:{padding:`12px`,background:`#f8fafc`,borderRadius:`8px`,textAlign:`center`,cursor:`pointer`},children:[(0,$.jsx)(`div`,{style:{fontSize:`24px`,fontWeight:800},children:`24`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`Active Tenants`})]}),(0,$.jsxs)(`div`,{onClick:()=>O(`re-tenants`),style:{padding:`12px`,background:`#fef2f2`,borderRadius:`8px`,textAlign:`center`,cursor:`pointer`},children:[(0,$.jsx)(`div`,{style:{fontSize:`24px`,fontWeight:800,color:`#dc2626`},children:`1`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#dc2626`},children:`Late on Rent`})]}),(0,$.jsxs)(`div`,{onClick:()=>O(`re-maintenance`),style:{padding:`12px`,background:`#fff7ed`,borderRadius:`8px`,textAlign:`center`,cursor:`pointer`},children:[(0,$.jsx)(`div`,{style:{fontSize:`24px`,fontWeight:800,color:`#d97706`},children:`5`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`Open Maintenance`})]})]}),(0,$.jsx)(`div`,{style:{marginTop:`12px`,padding:`10px`,background:`#fef2f2`,borderRadius:`8px`,fontSize:`13px`,color:`#dc2626`},children:`Overdue: Water heater at Riverside 1A -- 5 days past SLA`})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`14px`,marginBottom:`14px`},children:[(0,$.jsxs)(`div`,{className:`card`,style:{padding:`20px`,borderLeft:`4px solid #16a34a`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`16px`,color:`#1e293b`,marginBottom:`4px`},children:`Sales Track`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`,marginBottom:`16px`},children:`Listings, buyers, and active deals`}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`10px`},children:[(0,$.jsxs)(`div`,{onClick:()=>O(`re-listings`),style:{padding:`10px`,background:`#f0fdf4`,borderRadius:`8px`,cursor:`pointer`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:800,color:`#16a34a`},children:`8`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`Active Listings`})]}),(0,$.jsxs)(`div`,{onClick:()=>O(`re-buyers`),style:{padding:`10px`,background:`#f8fafc`,borderRadius:`8px`,cursor:`pointer`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:800},children:`10`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`Active Buyers`})]}),(0,$.jsxs)(`div`,{onClick:()=>O(`re-listings`),style:{padding:`10px`,background:`#fef2f2`,borderRadius:`8px`,cursor:`pointer`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:800,color:`#dc2626`},children:`2`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#dc2626`},children:`Stale Listings (30+ DOM)`})]}),(0,$.jsxs)(`div`,{onClick:()=>O(`re-buyers`),style:{padding:`10px`,background:`#fff7ed`,borderRadius:`8px`,cursor:`pointer`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:800,color:`#d97706`},children:`2`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`Uncontacted Leads`})]})]})]}),(0,$.jsxs)(`div`,{className:`card`,style:{padding:`20px`,borderLeft:`4px solid #d97706`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`16px`,color:`#1e293b`,marginBottom:`4px`},children:`Transaction Track`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`,marginBottom:`16px`},children:`Active deals and closing timeline`}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`10px`},children:[(0,$.jsxs)(`div`,{onClick:()=>O(`re-transactions`),style:{padding:`10px`,background:`#f8fafc`,borderRadius:`8px`,cursor:`pointer`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:800},children:`3`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`Active Transactions`})]}),(0,$.jsxs)(`div`,{onClick:()=>O(`re-transactions`),style:{padding:`10px`,background:`#f8fafc`,borderRadius:`8px`,cursor:`pointer`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:800},children:`$1.2M`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`Pipeline Value`})]}),(0,$.jsxs)(`div`,{onClick:()=>O(`re-transactions`),style:{padding:`10px`,background:`#fff7ed`,borderRadius:`8px`,cursor:`pointer`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:800,color:`#d97706`},children:`9 days`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`Next Closing`})]}),(0,$.jsxs)(`div`,{style:{padding:`10px`,background:`#f0fdf4`,borderRadius:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:800,color:`#16a34a`},children:`$35.7K`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`Commission Pipeline`})]})]}),(0,$.jsx)(`div`,{style:{marginTop:`12px`,padding:`10px`,background:`#fef3c7`,borderRadius:`8px`,fontSize:`13px`,color:`#92400e`},children:`Inspection contingency expires today -- 1893 San Jose Blvd`})]})]}),(0,$.jsxs)(`div`,{style:{marginBottom:`12px`},children:[(0,$.jsx)(`h2`,{style:{fontSize:`20px`,fontWeight:700,margin:0},children:`While You Were Out...`}),(0,$.jsx)(`p`,{style:{fontSize:`14px`,color:`var(--muted)`,margin:`4px 0 0`},children:`Your AI handled 42 actions overnight across sales and property management`})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`14px`},children:[(0,$.jsxs)(`div`,{className:`card`,style:{padding:`20px`},children:[(0,$.jsx)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`,marginBottom:`10px`},children:(0,$.jsx)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`2px 10px`,borderRadius:`9999px`,background:`#dc262615`,color:`#dc2626`},children:`Late Rent`})}),(0,$.jsx)(`div`,{style:{fontSize:`16px`,fontWeight:700,marginBottom:`8px`},children:`30 Days Past Due -- Kevin Williams`}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`#334155`,marginBottom:`10px`,lineHeight:1.5},children:`Riverside Apartments 2A. Balance $1,850 including $75 late fee. AI sent 3 reminders. Next step: 3-day notice per FL statute.`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`,fontStyle:`italic`,marginBottom:`10px`},children:`Suggested: Serve 3-day notice, document for compliance`}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`},children:[(0,$.jsx)(`button`,{onClick:()=>window.dispatchEvent(new CustomEvent(`ta:chatPrompt`,{detail:{message:`Draft 3-day notice for Kevin Williams at Riverside 2A, $1,850 balance, per Florida Statute 83.56`}})),style:{flex:1,padding:`8px 14px`,fontSize:`13px`,fontWeight:600,border:`none`,borderRadius:`8px`,cursor:`pointer`,color:`#fff`,background:`linear-gradient(135deg, #7c3aed, #6d28d9)`},children:`Draft Notice`}),(0,$.jsx)(`button`,{onClick:()=>O(`re-tenants`),style:{padding:`8px 14px`,fontSize:`13px`,fontWeight:600,border:`1px solid #e2e8f0`,borderRadius:`8px`,cursor:`pointer`,background:`transparent`,color:`#334155`},children:`View Tenant`})]})]}),(0,$.jsxs)(`div`,{className:`card`,style:{padding:`20px`},children:[(0,$.jsx)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`,marginBottom:`10px`},children:(0,$.jsx)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`2px 10px`,borderRadius:`9999px`,background:`#d9770615`,color:`#d97706`},children:`Vacancy`})}),(0,$.jsx)(`div`,{style:{fontSize:`16px`,fontWeight:700,marginBottom:`8px`},children:`45-Day Vacancy -- Southside Flats Unit 3`}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`#334155`,marginBottom:`10px`,lineHeight:1.5},children:`Costing owner ~$38/day. Rent reduced from $1,250 to $1,150. 2 showing requests pending. Application received yesterday.`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`,fontStyle:`italic`,marginBottom:`10px`},children:`Suggested: Screen application, schedule showing for second prospect`}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`},children:[(0,$.jsx)(`button`,{onClick:()=>window.dispatchEvent(new CustomEvent(`ta:chatPrompt`,{detail:{message:`Screen the rental application for Southside Flats Unit 3 and schedule showings for pending prospects`}})),style:{flex:1,padding:`8px 14px`,fontSize:`13px`,fontWeight:600,border:`none`,borderRadius:`8px`,cursor:`pointer`,color:`#fff`,background:`linear-gradient(135deg, #7c3aed, #6d28d9)`},children:`Let AI Handle It`}),(0,$.jsx)(`button`,{onClick:()=>O(`re-properties`),style:{padding:`8px 14px`,fontSize:`13px`,fontWeight:600,border:`1px solid #e2e8f0`,borderRadius:`8px`,cursor:`pointer`,background:`transparent`,color:`#334155`},children:`View Property`})]})]}),(0,$.jsxs)(`div`,{className:`card`,style:{padding:`20px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`,marginBottom:`10px`},children:[(0,$.jsx)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`2px 10px`,borderRadius:`9999px`,background:`#dcfce715`,color:`#dc2626`},children:`Hot Lead`}),(0,$.jsx)(`span`,{style:{fontSize:`11px`,fontWeight:600,color:`#dc2626`},children:`URGENT`})]}),(0,$.jsx)(`div`,{style:{fontSize:`16px`,fontWeight:700,marginBottom:`8px`},children:`Relocation Buyer -- Amanda Liu`}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`#334155`,marginBottom:`10px`,lineHeight:1.5},children:`Relocating from NYC, starts new job March 1. Budget $350-450K, pre-approved. Matched to 3 listings. Showing scheduled Saturday.`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`,fontStyle:`italic`,marginBottom:`10px`},children:`Suggested: Confirm showing, prepare CMA for 567 Mandarin Rd`}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`},children:[(0,$.jsx)(`button`,{onClick:()=>window.dispatchEvent(new CustomEvent(`ta:chatPrompt`,{detail:{message:`Prepare showing package for Amanda Liu visiting 567 Mandarin Rd Saturday`}})),style:{flex:1,padding:`8px 14px`,fontSize:`13px`,fontWeight:600,border:`none`,borderRadius:`8px`,cursor:`pointer`,color:`#fff`,background:`linear-gradient(135deg, #7c3aed, #6d28d9)`},children:`Let AI Handle It`}),(0,$.jsx)(`button`,{onClick:()=>O(`re-buyers`),style:{padding:`8px 14px`,fontSize:`13px`,fontWeight:600,border:`1px solid #e2e8f0`,borderRadius:`8px`,cursor:`pointer`,background:`transparent`,color:`#334155`},children:`View Buyer`})]})]}),(0,$.jsxs)(`div`,{className:`card`,style:{padding:`20px`},children:[(0,$.jsx)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`,marginBottom:`10px`},children:(0,$.jsx)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`2px 10px`,borderRadius:`9999px`,background:`#fee2e215`,color:`#dc2626`},children:`Stale Listing`})}),(0,$.jsx)(`div`,{style:{fontSize:`16px`,fontWeight:700,marginBottom:`8px`},children:`Price Reduction -- 432 Ponte Vedra Blvd`}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`#334155`,marginBottom:`10px`,lineHeight:1.5},children:`52 days on market at $725K. AI CMA shows comps at $675-700K. Losing $50/day in carrying costs. Recommend $699K.`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`,fontStyle:`italic`,marginBottom:`10px`},children:`Suggested: Reduce to $699K and refresh listing photos`}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`},children:[(0,$.jsx)(`button`,{onClick:()=>window.dispatchEvent(new CustomEvent(`ta:chatPrompt`,{detail:{message:`Draft price reduction proposal for 432 Ponte Vedra Blvd from $725K to $699K with seller communication`}})),style:{flex:1,padding:`8px 14px`,fontSize:`13px`,fontWeight:600,border:`none`,borderRadius:`8px`,cursor:`pointer`,color:`#fff`,background:`linear-gradient(135deg, #7c3aed, #6d28d9)`},children:`Draft Proposal`}),(0,$.jsx)(`button`,{onClick:()=>O(`re-listings`),style:{padding:`8px 14px`,fontSize:`13px`,fontWeight:600,border:`1px solid #e2e8f0`,borderRadius:`8px`,cursor:`pointer`,background:`transparent`,color:`#334155`},children:`View Listing`})]})]})]})]}),!t&&!r&&!n&&!i&&(0,$.jsxs)(`div`,{className:`card`,children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`Recent Activity`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Latest business actions and AI worker activity`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,children:`View All`})]}),(0,$.jsx)(`div`,{className:`tableWrap`,children:(0,$.jsxs)(`table`,{className:`table`,children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{children:`Type`}),(0,$.jsx)(`th`,{children:`Description`}),(0,$.jsx)(`th`,{children:`Date`}),(0,$.jsx)(`th`,{children:`Status`})]})}),(0,$.jsx)(`tbody`,{children:p.map(e=>(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`td`,{className:`tdStrong`,children:e.type}),(0,$.jsx)(`td`,{children:e.description}),(0,$.jsx)(`td`,{className:`tdMuted`,children:e.date}),(0,$.jsx)(`td`,{children:(0,$.jsx)(`span`,{className:`badge badge-${e.status}`,children:e.status})})]},e.id))})]})})]})]})}function Tv(){let[e,t]=(0,_.useState)([]),[n,r]=(0,_.useState)(!1),[i,a]=(0,_.useState)(!1),[o,s]=(0,_.useState)(``),[c,l]=(0,_.useState)(!1),[u,d]=(0,_.useState)(null),[f,p]=(0,_.useState)(`all`),[m,h]=(0,_.useState)({companyName:``,industry:``,askAmount:``,dealType:`series_a`,summary:``}),[g,v]=(0,_.useState)(null),[y,b]=(0,_.useState)(!1),[x,S]=(0,_.useState)(null),[C,w]=(0,_.useState)(null),[T,E]=(0,_.useState)(``),[D,O]=(0,_.useState)(!1),[ee,k]=(0,_.useState)(`email`),te=localStorage.getItem(`VERTICAL`)||`analyst`,ne=localStorage.getItem(`JURISDICTION`)||`GLOBAL`,re=`.pdf,.xlsx,.xls,.csv,.docx,.doc,.png,.jpg,.jpeg`,ie=[`application/pdf`,`application/vnd.openxmlformats-officedocument.spreadsheetml.sheet`,`application/vnd.ms-excel`,`text/csv`,`application/vnd.openxmlformats-officedocument.wordprocessingml.document`,`application/msword`,`image/png`,`image/jpeg`];(0,_.useEffect)(()=>{ae()},[]);async function ae(){r(!0),s(``);try{t((await tv({vertical:te,jurisdiction:ne})).deals||[])}catch(e){s(e?.message||String(e)),console.error(`Failed to load deals:`,e)}finally{r(!1)}}function A(e){if(e)if(v(e),e.type===`text/csv`||e.name.endsWith(`.csv`)){let t=new FileReader;t.onload=e=>{let t=e.target?.result||``;h(e=>({...e,summary:e.summary||t.slice(0,5e3)}))},t.readAsText(e)}else e.type,h(t=>({...t,summary:t.summary||`[Uploaded: ${e.name}]`}))}function j(e){e.preventDefault(),e.stopPropagation(),b(!0)}function oe(e){e.preventDefault(),e.stopPropagation(),b(!1)}function se(e){e.preventDefault(),e.stopPropagation(),b(!1);let t=e.dataTransfer?.files?.[0];if(t){let e=`.`+t.name.split(`.`).pop().toLowerCase();re.split(`,`).includes(e)||ie.includes(t.type)?A(t):s(`Unsupported file type. Please upload PDF, Excel, CSV, Word, or image files.`)}}async function ce(e){e.preventDefault(),a(!0),s(``);try{let e=await ev({vertical:te,jurisdiction:ne,deal:m});await ae(),d(e.analysis),l(!1),h({companyName:``,industry:``,askAmount:``,dealType:`series_a`,summary:``})}catch(e){s(e?.message||String(e)),console.error(`Failed to analyze deal:`,e)}finally{a(!1)}}let le=f===`all`?e:e.filter(e=>{let t=e.analysis?.riskScore||0;return f===`high`?t>=70:f===`medium`?t>=40&&t<70:f===`low`?t<40:!0}),ue={total:e.length,invest:e.filter(e=>e.analysis?.recommendation===`INVEST`).length,pass:e.filter(e=>e.analysis?.recommendation===`PASS`).length,wait:e.filter(e=>e.analysis?.recommendation===`WAIT`).length};function de(e,t){let n=new Date().toLocaleDateString(`en-US`,{year:`numeric`,month:`long`,day:`numeric`}),r=localStorage.getItem(`COMPANY_NAME`)||localStorage.getItem(`TENANT_NAME`)||``,i=(t.evidence?.positive||[]).map(e=>`<li style="color:#059669">${e}</li>`).join(``),a=(t.evidence?.negative||[]).map(e=>`<li style="color:#dc2626">${e}</li>`).join(``),o=(t.evidence?.neutral||[]).map(e=>`<li style="color:#6b7280">${e}</li>`).join(``),s=(t.nextSteps||[]).map((e,t)=>`<li>${e}</li>`).join(``),c=(t.missingInfo||[]).map(e=>`<li>${e}</li>`).join(``),l=t.keyMetrics?Object.entries(t.keyMetrics).map(([e,t])=>`<tr><td style="padding:6px 12px;border:1px solid #e5e7eb;font-weight:600;text-transform:capitalize">${e.replace(/_/g,` `)}</td><td style="padding:6px 12px;border:1px solid #e5e7eb">${t}</td></tr>`).join(``):``,u=t.multiAngleAnalysis?Object.entries(t.multiAngleAnalysis).map(([e,t])=>`<div style="margin-bottom:12px"><div style="font-size:12px;font-weight:600;color:#7c3aed;text-transform:uppercase;margin-bottom:4px">${e.replace(/([A-Z])/g,` $1`).trim()}</div><p style="margin:0;font-size:14px">${t}</p></div>`).join(``):``,d=t.riskScaledAlternatives?[`lowRisk`,`mediumRisk`,`highRisk`].map(e=>{let n=t.riskScaledAlternatives[e];return n?`<div style="margin-bottom:12px;padding:12px;background:#f8fafc;border-radius:8px"><div style="font-size:12px;font-weight:600;text-transform:uppercase;margin-bottom:6px">${{lowRisk:`Low Risk`,mediumRisk:`Medium Risk`,highRisk:`High Risk`}[e]}</div><div style="font-size:13px"><strong>Structure:</strong> ${n.structure}</div><div style="font-size:13px"><strong>Terms:</strong> ${n.terms}</div><div style="font-size:13px"><strong>Expected Return:</strong> ${n.expectedReturn}</div></div>`:``}).join(``):``;return`<!DOCTYPE html><html><head><title>${e.companyName||`Deal`} - Analysis Report</title>
<style>
body{font-family:-apple-system,BlinkMacSystemFont,sans-serif;max-width:800px;margin:40px auto;padding:0 20px;color:#1e293b;line-height:1.6}
h1{font-size:24px;margin:0}h2{font-size:16px;color:#7c3aed;border-bottom:2px solid #7c3aed;padding-bottom:4px;margin-top:32px}
.header{border-bottom:3px solid #7c3aed;padding-bottom:16px;margin-bottom:24px}
.header-top{display:flex;justify-content:space-between;align-items:flex-start}
.branding{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;font-size:13px;color:#6b7280}
.meta{color:#6b7280;font-size:14px}.score-box{text-align:center;padding:16px 24px;border-radius:12px;border:2px solid}
.score{font-size:36px;font-weight:700}.rec{font-size:14px;font-weight:600;padding:4px 12px;border-radius:4px;display:inline-block;margin-top:4px}
table{border-collapse:collapse;width:100%}ul{padding-left:20px}li{margin:4px 0}
.disclaimer{margin-top:40px;padding:16px;background:#f8fafc;border:1px solid #e5e7eb;border-radius:8px;font-size:13px;color:#6b7280}
.download-btn{display:inline-block;padding:10px 24px;background:#7c3aed;color:white;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;margin-bottom:24px}
.download-btn:hover{background:#6d28d9}
@media print{.download-btn{display:none !important}.no-print{display:none !important}body{margin:20px}}
</style></head><body>
<button class="download-btn no-print" onclick="window.print()">Download PDF</button>
<div class="header">
<div class="branding"><div>${r?`<strong>${r}</strong>`:``}</div><div>Prepared by TitleApp AI</div></div>
<div class="header-top"><div><h1>${e.companyName||`Deal`} - Analysis Report</h1>
<div class="meta">${e.industry||``} ${e.askAmount?`| `+e.askAmount:``} ${e.dealType?`| `+e.dealType.replace(/_/g,` `):``}</div>
<div class="meta">${n}</div></div>
<div class="score-box" style="border-color:${t.riskScore>=70?`#ef4444`:t.riskScore>=40?`#f59e0b`:`#10b981`}">
<div class="score" style="color:${t.riskScore>=70?`#ef4444`:t.riskScore>=40?`#f59e0b`:`#10b981`}">${t.riskScore||0}/100</div>
<div class="rec" style="background:${t.recommendation===`INVEST`?`#f0fdf4;color:#059669`:t.recommendation===`PASS`?`#fef2f2;color:#dc2626`:`#fffbeb;color:#d97706`}">${t.recommendation||`WAIT`}</div>
</div></div></div>
${t.summary?`<h2>Executive Summary</h2><p>${t.summary}</p>`:``}
${i||a||o?`<h2>Evidence Analysis</h2><ul>${i}${a}${o}</ul>`:``}
${l?`<h2>Key Metrics</h2><table>${l}</table>`:``}
${u?`<h2>Multi-Angle Analysis</h2>${u}`:``}
${d?`<h2>Risk-Scaled Deal Structures</h2>${d}`:``}
${s?`<h2>Recommended Next Steps</h2><ol>${s}</ol>`:``}
${c?`<h2>Missing Information</h2><ul>${c}</ul>`:``}
<div class="disclaimer">This analysis is AI-generated and should be verified independently. It does not constitute financial advice. Generated by TitleApp AI on ${n}.</div>
<script>document.title="${(e.companyName||`Deal`).replace(/"/g,``)} - Analysis Report"<\/script></body></html>`}async function fe(e,t){O(!0);let n=(t.missingInfo||[]).map((e,t)=>`${t+1}. ${e}`).join(`
`);E(`Dear [Sponsor Name],

Thank you for sharing the ${e.companyName||``} ${e.dealType?e.dealType.replace(/_/g,` `):`deal`} opportunity. We have completed our initial review and are interested in moving forward.

To advance our evaluation, we require the following information:

${n}

Please send these materials at your earliest convenience. We are targeting a decision within [timeframe] and complete documentation will allow us to proceed efficiently.

Best regards,
[Your Name]
[Your Firm]`),O(!1)}function pe(e){return e>=70?`#ef4444`:e>=40?`#f59e0b`:`#10b981`}function me(e){return e>=70?`High Risk`:e>=40?`Medium Risk`:`Low Risk`}return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Analyst`}),(0,$.jsx)(`p`,{className:`subtle`,children:`AI-powered deal vetting with RAAS validation`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>l(!0),style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`},children:`+ Analyze Deal`})]}),o&&(0,$.jsx)(`div`,{style:{padding:`12px 16px`,background:`#fef2f2`,border:`1px solid #fca5a5`,borderRadius:`12px`,color:`#dc2626`,marginBottom:`16px`},children:o}),x&&(()=>{let e=x.analysis,t=x.dealInfo;return(0,$.jsx)(`div`,{className:`card`,style:{marginBottom:`16px`,border:`2px solid ${pe(e.riskScore||0)}`},children:(0,$.jsxs)(`div`,{style:{padding:`16px`,display:`flex`,flexDirection:`column`,gap:`12px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`flex-start`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`16px`},children:t.companyName||`Deal`}),(0,$.jsxs)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:[t.industry||``,t.askAmount?` | `+t.askAmount:``,` | Discussing with AI`]})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`},children:[(0,$.jsxs)(`div`,{style:{textAlign:`right`},children:[(0,$.jsxs)(`div`,{style:{fontSize:`24px`,fontWeight:700,color:pe(e.riskScore||0)},children:[e.riskScore||0,`/100`]}),(0,$.jsx)(`div`,{className:`badge badge-${e.recommendation===`INVEST`?`completed`:e.recommendation===`PASS`?``:`processing`}`,style:{fontSize:`12px`},children:e.recommendation||`WAIT`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>S(null),style:{fontSize:`14px`,padding:`4px 8px`},children:``})]})]}),e.summary&&(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`,lineHeight:`1.5`},children:e.summary}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`,flexWrap:`wrap`},children:[(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>{d(x),S(null)},style:{fontSize:`12px`},children:`View Full Analysis`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>{let n=de(t,e),r=window.open(``,`_blank`);r.document.write(n),r.document.close()},style:{fontSize:`12px`},children:`Export Report`})]})]})})})(),(0,$.jsxs)(`div`,{className:`kpiRow`,children:[(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Total Analyzed`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:ue.total})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Invest`}),(0,$.jsx)(`div`,{className:`kpiValue`,style:{color:`#10b981`},children:ue.invest})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Pass`}),(0,$.jsx)(`div`,{className:`kpiValue`,style:{color:`#ef4444`},children:ue.pass})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Wait`}),(0,$.jsx)(`div`,{className:`kpiValue`,style:{color:`#f59e0b`},children:ue.wait})]})]}),(0,$.jsxs)(`div`,{style:{marginBottom:`16px`,display:`flex`,gap:`8px`},children:[(0,$.jsxs)(`button`,{className:`iconBtn`,onClick:()=>p(`all`),style:{background:f===`all`?`var(--accent)`:`transparent`,color:f===`all`?`white`:`inherit`},children:[`All Deals (`,e.length,`)`]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>p(`high`),style:{background:f===`high`?`#ef4444`:`transparent`,color:f===`high`?`white`:`inherit`},children:`High Risk`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>p(`medium`),style:{background:f===`medium`?`#f59e0b`:`transparent`,color:f===`medium`?`white`:`inherit`},children:`Medium Risk`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>p(`low`),style:{background:f===`low`?`#10b981`:`transparent`,color:f===`low`?`white`:`inherit`},children:`Low Risk`})]}),n?(0,$.jsx)(`div`,{className:`card`,style:{padding:`24px`,textAlign:`center`},children:`Loading analyzed deals...`}):le.length===0?(0,$.jsxs)(`div`,{className:`card`,style:{padding:`32px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`24px`,fontWeight:600,color:`#64748b`,marginBottom:`16px`},children:`Analyst`}),(0,$.jsx)(`p`,{style:{fontSize:`16px`,fontWeight:600,marginBottom:`8px`},children:`No deals analyzed yet`}),(0,$.jsx)(`p`,{style:{color:`var(--textMuted)`,marginBottom:`16px`},children:`Upload your first deal to see AI-powered analysis with RAAS validation`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>l(!0),style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`},children:`Analyze Your First Deal`})]}):(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{className:`tableWrap`,children:(0,$.jsxs)(`table`,{className:`table`,children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{children:`Company`}),(0,$.jsx)(`th`,{children:`Industry`}),(0,$.jsx)(`th`,{children:`Ask`}),(0,$.jsx)(`th`,{children:`Risk Score`}),(0,$.jsx)(`th`,{children:`Recommendation`}),(0,$.jsx)(`th`,{children:`Analyzed`}),(0,$.jsx)(`th`,{})]})}),(0,$.jsx)(`tbody`,{children:le.map(e=>(0,$.jsxs)(`tr`,{onClick:()=>d(e),style:{cursor:`pointer`},children:[(0,$.jsx)(`td`,{className:`tdStrong`,children:e.dealInput?.companyName||`Unknown`}),(0,$.jsx)(`td`,{children:e.dealInput?.industry||`-`}),(0,$.jsx)(`td`,{className:`tdMuted`,children:e.dealInput?.askAmount||`-`}),(0,$.jsx)(`td`,{children:(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{width:`8px`,height:`8px`,borderRadius:`50%`,background:pe(e.analysis?.riskScore||0)}}),(0,$.jsxs)(`span`,{style:{fontWeight:600},children:[e.analysis?.riskScore||0,`/100`]}),(0,$.jsxs)(`span`,{className:`tdMuted`,children:[`(`,me(e.analysis?.riskScore||0),`)`]})]})}),(0,$.jsx)(`td`,{children:(0,$.jsxs)(`span`,{className:`badge badge-${e.analysis?.recommendation===`INVEST`?`completed`:e.analysis?.recommendation===`PASS`?``:`processing`}`,children:[e.analysis?.emoji||``,` `,e.analysis?.recommendation||`WAIT`]})}),(0,$.jsx)(`td`,{className:`tdMuted`,children:(()=>{let t=e.analyzedAt||e.createdAt;if(!t)return`Today`;if(t.seconds)return new Date(t.seconds*1e3).toLocaleDateString();if(t._seconds)return new Date(t._seconds*1e3).toLocaleDateString();let n=new Date(t);return isNaN(n.getTime())?`Today`:n.toLocaleDateString()})()}),(0,$.jsx)(`td`,{children:(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>d(e),style:{fontSize:`12px`},children:`View Analysis`})})]},e.id))})]})})}),c&&(0,$.jsx)(`div`,{style:{position:`fixed`,inset:0,background:`rgba(0,0,0,0.5)`,display:`grid`,placeItems:`center`,zIndex:1e3},onClick:()=>l(!1),children:(0,$.jsxs)(`div`,{className:`card`,style:{maxWidth:`600px`,width:`90%`,maxHeight:`90vh`,overflow:`auto`},onClick:e=>e.stopPropagation(),children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`Analyze New Deal`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>l(!1),children:``})]}),(0,$.jsxs)(`form`,{onSubmit:ce,style:{padding:`16px`,display:`flex`,flexDirection:`column`,gap:`14px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Company Name`}),(0,$.jsx)(`input`,{type:`text`,required:!0,value:m.companyName,onChange:e=>h({...m,companyName:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},placeholder:`Acme Corp`})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Industry`}),(0,$.jsx)(`input`,{type:`text`,required:!0,value:m.industry,onChange:e=>h({...m,industry:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},placeholder:`SaaS, FinTech, Healthcare, etc.`})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Ask Amount`}),(0,$.jsx)(`input`,{type:`text`,inputMode:`numeric`,required:!0,value:m.askAmount,onChange:e=>{let t=e.target.value.replace(/[^0-9]/g,``),n=t?`$`+Number(t).toLocaleString():``;h({...m,askAmount:n})},style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},placeholder:`$5,000,000`})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Deal Type`}),(0,$.jsxs)(`select`,{value:m.dealType,onChange:e=>h({...m,dealType:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},children:[(0,$.jsxs)(`optgroup`,{label:`Venture / PE`,children:[(0,$.jsx)(`option`,{value:`seed`,children:`Seed`}),(0,$.jsx)(`option`,{value:`series_a`,children:`Series A`}),(0,$.jsx)(`option`,{value:`series_b`,children:`Series B`}),(0,$.jsx)(`option`,{value:`series_c`,children:`Series C+`}),(0,$.jsx)(`option`,{value:`pe_buyout`,children:`PE Buyout`})]}),(0,$.jsxs)(`optgroup`,{label:`Real Estate`,children:[(0,$.jsx)(`option`,{value:`acquisition`,children:`Acquisition`}),(0,$.jsx)(`option`,{value:`development`,children:`Development`}),(0,$.jsx)(`option`,{value:`value_add`,children:`Value-Add`}),(0,$.jsx)(`option`,{value:`sale_leaseback`,children:`Sale-Leaseback`}),(0,$.jsx)(`option`,{value:`multifamily`,children:`Multifamily`}),(0,$.jsx)(`option`,{value:`office`,children:`Office`}),(0,$.jsx)(`option`,{value:`retail`,children:`Retail`}),(0,$.jsx)(`option`,{value:`industrial`,children:`Industrial`}),(0,$.jsx)(`option`,{value:`hospitality`,children:`Hospitality`}),(0,$.jsx)(`option`,{value:`mixed_use`,children:`Mixed-Use`}),(0,$.jsx)(`option`,{value:`land`,children:`Land`}),(0,$.jsx)(`option`,{value:`sfr_portfolio`,children:`Single-Family Portfolio`})]}),(0,$.jsxs)(`optgroup`,{label:`Debt / Other`,children:[(0,$.jsx)(`option`,{value:`refinance`,children:`Refinance`}),(0,$.jsx)(`option`,{value:`bridge_loan`,children:`Bridge Loan`}),(0,$.jsx)(`option`,{value:`mezzanine`,children:`Mezzanine`}),(0,$.jsx)(`option`,{value:`joint_venture`,children:`Joint Venture`})]})]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Deal Summary / Pitch`}),(0,$.jsx)(`textarea`,{required:!g,value:m.summary,onChange:e=>h({...m,summary:e.target.value}),rows:8,style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`,fontFamily:`inherit`},placeholder:`Paste pitch deck summary, exec summary, or key details about the deal...`})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Or Upload Document`}),(0,$.jsx)(`div`,{onDragOver:j,onDragLeave:oe,onDrop:se,onClick:()=>document.getElementById(`deal-file-input`)?.click(),style:{width:`100%`,padding:g?`12px`:`28px 12px`,borderRadius:`12px`,border:y?`2px dashed var(--accent)`:`2px dashed var(--line)`,background:y?`rgba(124,58,237,0.04)`:`transparent`,textAlign:`center`,cursor:`pointer`,transition:`border-color 0.2s, background 0.2s`},children:g?(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,justifyContent:`space-between`},children:[(0,$.jsxs)(`span`,{style:{fontSize:`13px`},children:[g.name,` (`,(g.size/1024).toFixed(1),` KB)`]}),(0,$.jsx)(`button`,{type:`button`,onClick:e=>{e.stopPropagation(),v(null)},style:{background:`none`,border:`none`,cursor:`pointer`,fontSize:`16px`,color:`var(--textMuted)`},children:``})]}):(0,$.jsxs)(`div`,{style:{color:`var(--textMuted)`,fontSize:`13px`},children:[(0,$.jsx)(`div`,{style:{marginBottom:`4px`,fontWeight:500},children:`Drag and drop a file here, or click to browse`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`},children:`PDF, Excel, CSV, Word, or images`})]})}),(0,$.jsx)(`input`,{id:`deal-file-input`,type:`file`,accept:re,onChange:e=>A(e.target.files?.[0]),style:{display:`none`}})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`,justifyContent:`flex-end`},children:[(0,$.jsx)(`button`,{type:`button`,className:`iconBtn`,onClick:()=>l(!1),disabled:i,children:`Cancel`}),(0,$.jsx)(`button`,{type:`submit`,className:`iconBtn`,disabled:i,style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`,display:`flex`,alignItems:`center`,gap:`8px`},children:i?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`span`,{style:{display:`inline-block`,width:`16px`,height:`16px`,border:`2px solid rgba(255,255,255,0.3)`,borderTopColor:`white`,borderRadius:`50%`,animation:`spin 0.8s linear infinite`}}),`Analyzing...`]}):`Analyze with AI`})]}),i&&(0,$.jsxs)(`div`,{style:{padding:`16px`,background:`#f8f4ff`,borderRadius:`12px`,border:`1px solid #e9d5ff`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`var(--accent)`,fontWeight:600,marginBottom:`8px`},children:`AI is analyzing this deal`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#6b7280`},children:`Screening against your criteria, checking evidence, evaluating risk...`}),(0,$.jsx)(`div`,{style:{marginTop:`12px`,height:`3px`,background:`#e9d5ff`,borderRadius:`2px`,overflow:`hidden`},children:(0,$.jsx)(`div`,{style:{width:`100%`,height:`100%`,background:`var(--accent)`,borderRadius:`2px`,animation:`analyzeProgress 3s ease-in-out infinite`}})})]}),(0,$.jsx)(`style`,{children:`
                @keyframes spin { to { transform: rotate(360deg); } }
                @keyframes analyzeProgress {
                  0% { transform: translateX(-100%); }
                  50% { transform: translateX(0%); }
                  100% { transform: translateX(100%); }
                }
              `})]})]})}),u&&(()=>{let e=u.analysis||u,t=u.dealInput||u;return(0,$.jsx)(`div`,{style:{position:`fixed`,inset:0,background:`rgba(0,0,0,0.5)`,display:`grid`,placeItems:`center`,zIndex:1e3,padding:`20px`},onClick:()=>d(null),children:(0,$.jsxs)(`div`,{className:`card`,style:{maxWidth:`800px`,width:`100%`,maxHeight:`90vh`,overflow:`auto`},onClick:e=>e.stopPropagation(),children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`cardTitle`,children:[t.companyName||`Deal`,` - Analysis`]}),(0,$.jsxs)(`div`,{className:`cardSub`,children:[t.industry||`-`,`  `,t.askAmount||`-`]})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>d(null),children:``})]}),(0,$.jsxs)(`div`,{style:{padding:`20px`,display:`flex`,flexDirection:`column`,gap:`20px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`,flexWrap:`wrap`},children:[(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>{let n=t.companyName||`this deal`;window.dispatchEvent(new CustomEvent(`ta:chatPrompt`,{detail:{message:`Let's discuss the ${n} analysis. Risk score is ${e.riskScore}/100 (${e.recommendation}). What are the key risks I should focus on?`,dealContext:{companyName:t.companyName,industry:t.industry,askAmount:t.askAmount,riskScore:e.riskScore,recommendation:e.recommendation,summary:e.summary,positiveEvidence:e.evidence?.positive,negativeEvidence:e.evidence?.negative,missingInfo:e.missingInfo,nextSteps:e.nextSteps}}})),S({dealInfo:t,analysis:e}),d(null)},style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`,flex:`1 1 auto`},children:`Discuss with AI`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>{let n=de(t,e),r=window.open(``,`_blank`);r.document.write(n),r.document.close()},style:{flex:`1 1 auto`},children:`Export Report`}),e.missingInfo&&e.missingInfo.length>0&&(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>{w({dealInfo:t,analysis:e}),fe(t,e)},style:{flex:`1 1 auto`,color:`#dc2626`,borderColor:`#fca5a5`},children:`Request Missing Info`})]}),(0,$.jsx)(`div`,{style:{padding:`16px`,background:`${pe(e.riskScore||0)}15`,border:`2px solid ${pe(e.riskScore||0)}`,borderRadius:`12px`},children:(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,fontWeight:600,color:`var(--textMuted)`,marginBottom:`4px`},children:`RISK SCORE`}),(0,$.jsxs)(`div`,{style:{fontSize:`32px`,fontWeight:700,color:pe(e.riskScore||0)},children:[e.riskScore||0,`/100`]}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`var(--textMuted)`},children:me(e.riskScore||0)})]}),(0,$.jsxs)(`div`,{style:{textAlign:`right`},children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,fontWeight:600,color:`var(--textMuted)`,marginBottom:`4px`},children:`RECOMMENDATION`}),(0,$.jsxs)(`div`,{className:`badge badge-${e.recommendation===`INVEST`?`completed`:e.recommendation===`PASS`?``:`processing`}`,style:{fontSize:`18px`,padding:`8px 16px`},children:[e.emoji||``,` `,e.recommendation||`WAIT`]})]})]})}),e.summary&&(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`8px`},children:`AI Summary`}),(0,$.jsx)(`div`,{style:{color:`var(--textMuted)`,lineHeight:`1.6`},children:e.summary})]}),e.evidence&&(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`12px`},children:`Evidence Analysis`}),(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`8px`},children:[e.evidence.positive?.length>0&&e.evidence.positive.map((e,t)=>(0,$.jsxs)(`div`,{style:{padding:`12px`,background:`#f0fdf4`,border:`1px solid #86efac`,borderRadius:`8px`,display:`flex`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600,color:`#10b981`},children:`+`}),(0,$.jsx)(`div`,{style:{flex:1,fontSize:`14px`},children:e})]},`pos-${t}`)),e.evidence.negative?.length>0&&e.evidence.negative.map((e,t)=>(0,$.jsxs)(`div`,{style:{padding:`12px`,background:`#fef2f2`,border:`1px solid #fca5a5`,borderRadius:`8px`,display:`flex`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600,color:`#dc2626`},children:`-`}),(0,$.jsx)(`div`,{style:{flex:1,fontSize:`14px`},children:e})]},`neg-${t}`)),e.evidence.neutral?.length>0&&e.evidence.neutral.map((e,t)=>(0,$.jsxs)(`div`,{style:{padding:`12px`,background:`#f8fafc`,border:`1px solid #e5e7eb`,borderRadius:`8px`,display:`flex`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`16px`},children:``}),(0,$.jsx)(`div`,{style:{flex:1,fontSize:`14px`},children:e})]},`neu-${t}`))]})]}),e.multiAngleAnalysis&&(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`12px`},children:`Multi-Angle Analysis`}),(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`12px`},children:Object.entries(e.multiAngleAnalysis).map(([e,t])=>(0,$.jsxs)(`div`,{style:{padding:`12px`,background:`#f8fafc`,borderRadius:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`12px`,fontWeight:600,color:`var(--accent)`,marginBottom:`4px`,textTransform:`uppercase`},children:e.replace(/([A-Z])/g,` $1`).trim()}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,lineHeight:`1.5`},children:t})]},e))})]}),e.riskScaledAlternatives&&(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`12px`},children:`Risk-Scaled Deal Structures`}),(0,$.jsx)(`div`,{style:{display:`grid`,gap:`12px`},children:[`lowRisk`,`mediumRisk`,`highRisk`].map(t=>{let n=e.riskScaledAlternatives[t];if(!n)return null;let r={lowRisk:{bg:`#f0fdf4`,border:`#86efac`,label:`Low Risk`},mediumRisk:{bg:`#fffbeb`,border:`#fcd34d`,label:`Medium Risk`},highRisk:{bg:`#fef2f2`,border:`#fca5a5`,label:`High Risk`}}[t];return(0,$.jsxs)(`div`,{style:{padding:`12px`,background:r.bg,border:`2px solid ${r.border}`,borderRadius:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`12px`,fontWeight:600,marginBottom:`8px`,textTransform:`uppercase`},children:r.label}),(0,$.jsxs)(`div`,{style:{fontSize:`13px`,marginBottom:`4px`},children:[(0,$.jsx)(`strong`,{children:`Structure:`}),` `,n.structure]}),(0,$.jsxs)(`div`,{style:{fontSize:`13px`,marginBottom:`4px`},children:[(0,$.jsx)(`strong`,{children:`Terms:`}),` `,n.terms]}),(0,$.jsxs)(`div`,{style:{fontSize:`13px`},children:[(0,$.jsx)(`strong`,{children:`Expected Return:`}),` `,n.expectedReturn]})]},t)})})]}),e.keyMetrics&&Object.keys(e.keyMetrics).length>0&&(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`12px`},children:`Key Metrics`}),(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(auto-fit, minmax(150px, 1fr))`,gap:`12px`},children:Object.entries(e.keyMetrics).map(([e,t])=>(0,$.jsxs)(`div`,{style:{padding:`12px`,background:`#f8fafc`,borderRadius:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`11px`,fontWeight:600,color:`var(--textMuted)`,marginBottom:`4px`,textTransform:`uppercase`},children:e.replace(/_/g,` `)}),(0,$.jsx)(`div`,{style:{fontSize:`16px`,fontWeight:600},children:t})]},e))})]}),e.nextSteps&&e.nextSteps.length>0&&(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`12px`},children:`Recommended Next Steps`}),(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`8px`},children:e.nextSteps.map((e,t)=>(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`,alignItems:`start`},children:[(0,$.jsxs)(`div`,{style:{color:`var(--accent)`,fontWeight:600},children:[t+1,`.`]}),(0,$.jsx)(`div`,{style:{flex:1},children:e})]},t))})]}),e.missingInfo&&e.missingInfo.length>0&&(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`12px`,color:`#dc2626`},children:`Missing Critical Information`}),(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`8px`},children:e.missingInfo.map((e,t)=>(0,$.jsxs)(`div`,{style:{padding:`12px`,background:`#fef2f2`,border:`1px solid #fca5a5`,borderRadius:`8px`,display:`flex`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600,color:`#f59e0b`},children:`!`}),(0,$.jsx)(`div`,{style:{flex:1,fontSize:`14px`},children:e})]},t))})]})]})]})})})(),C&&(0,$.jsx)(`div`,{style:{position:`fixed`,inset:0,background:`rgba(0,0,0,0.5)`,display:`grid`,placeItems:`center`,zIndex:1100,padding:`20px`},onClick:()=>w(null),children:(0,$.jsxs)(`div`,{className:`card`,style:{maxWidth:`600px`,width:`100%`,maxHeight:`90vh`,overflow:`auto`},onClick:e=>e.stopPropagation(),children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`Request Missing Information`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>w(null),children:``})]}),(0,$.jsxs)(`div`,{style:{padding:`16px`,display:`flex`,flexDirection:`column`,gap:`12px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`0`,borderRadius:`8px`,overflow:`hidden`,border:`1px solid var(--line)`},children:[(0,$.jsx)(`button`,{type:`button`,onClick:()=>k(`email`),style:{flex:1,padding:`10px`,border:`none`,background:ee===`email`?`var(--accent)`:`transparent`,color:ee===`email`?`white`:`inherit`,fontWeight:600,fontSize:`13px`,cursor:`pointer`},children:`Send via Email`}),(0,$.jsx)(`button`,{type:`button`,onClick:()=>k(`text`),style:{flex:1,padding:`10px`,border:`none`,borderLeft:`1px solid var(--line)`,background:ee===`text`?`var(--accent)`:`transparent`,color:ee===`text`?`white`:`inherit`,fontWeight:600,fontSize:`13px`,cursor:`pointer`},children:`Send via Text`})]}),D?(0,$.jsx)(`div`,{style:{textAlign:`center`,padding:`24px`,color:`#6b7280`},children:`Generating outreach message...`}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`textarea`,{value:T,onChange:e=>E(e.target.value),rows:ee===`text`?8:16,style:{width:`100%`,padding:`12px`,borderRadius:`8px`,border:`1px solid var(--line)`,fontFamily:`inherit`,fontSize:`14px`,lineHeight:1.6,resize:`vertical`}}),ee===`text`&&(0,$.jsxs)(`div`,{style:{fontSize:`12px`,color:`var(--textMuted)`,textAlign:`right`},children:[T.length,` characters`]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`,justifyContent:`flex-end`},children:[(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>{navigator.clipboard.writeText(T);let e=document.activeElement;e.textContent=`Copied`,setTimeout(()=>{e.textContent=`Copy to Clipboard`},1500)},children:`Copy to Clipboard`}),ee===`email`?(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>{let e=encodeURIComponent(`Information Request: ${C.dealInfo?.companyName||`Deal`} Analysis`),t=encodeURIComponent(T);window.open(`mailto:?subject=${e}&body=${t}`)},style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`},children:`Open Email Client`}):(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>{let e=encodeURIComponent(T);window.open(`sms:?&body=${e}`)},style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`},children:`Open Messages`})]})]})]})]})})]})}function Ev({isOpen:e,onClose:t,title:n,children:r,onSubmit:i,submitLabel:a=`Submit`}){if(!e)return null;let o=e=>{e.preventDefault(),i?.(e)};return(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{className:`backdrop`,onClick:t,style:{zIndex:100}}),(0,$.jsx)(`div`,{style:{position:`fixed`,top:`50%`,left:`50%`,transform:`translate(-50%, -50%)`,zIndex:101,width:`90%`,maxWidth:`600px`,maxHeight:`90vh`,overflow:`auto`},children:(0,$.jsxs)(`div`,{className:`card`,children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:n}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:t,"aria-label":`Close modal`,children:``})]}),(0,$.jsxs)(`form`,{onSubmit:o,children:[(0,$.jsx)(`div`,{style:{padding:`16px`},children:r}),(0,$.jsxs)(`div`,{style:{padding:`12px 16px`,borderTop:`1px solid var(--line)`,display:`flex`,gap:`8px`,justifyContent:`flex-end`},children:[(0,$.jsx)(`button`,{type:`button`,className:`iconBtn`,onClick:t,children:`Cancel`}),(0,$.jsx)(`button`,{type:`submit`,className:`iconBtn`,style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`},children:a})]})]})]})})]})}function Dv(){let[e,t]=(0,_.useState)([]),[n,r]=(0,_.useState)(!1),[i,a]=(0,_.useState)(null),[o,s]=(0,_.useState)(!1),[c,l]=(0,_.useState)({name:``,description:``,rules:``,enabled:!0}),[u,d]=(0,_.useState)(!1),[f,p]=(0,_.useState)(!1),[m,h]=(0,_.useState)({name:``,description:``,condition:``,action:``}),[g,v]=(0,_.useState)(null),[y,b]=(0,_.useState)(``),[x,S]=(0,_.useState)([]),[C,w]=(0,_.useState)([]),T=localStorage.getItem(`VERTICAL`)||`auto`,E=localStorage.getItem(`JURISDICTION`)||`IL`,D={auto:`Auto Dealer`,analyst:`Investment Analyst`,"real-estate":`Real Estate Brokerage`,"property-mgmt":`Property Management`,aviation:`Aviation`,marine:`Marine`};(0,_.useEffect)(()=>{O()},[]);async function O(){r(!0);try{t([])}finally{r(!1)}}function ee(e){a(e),l({name:e.name,description:e.description,rules:e.rules.join(`
`),enabled:e.enabled}),s(!0)}function k(n){n.preventDefault(),t(e.map(e=>e.id===i.id?{...e,name:c.name,description:c.description,rules:c.rules.split(`
`).filter(e=>e.trim()),enabled:c.enabled}:e)),s(!1)}function te(n){t(e.map(e=>e.id===n?{...e,enabled:!e.enabled}:e))}let ne={total:e.length,enabled:e.filter(e=>e.enabled).length,disabled:e.filter(e=>!e.enabled).length,executions:e.reduce((e,t)=>e+t.executionCount,0)};return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Rules & Resources`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Configure RAAS workflows for your vertical and jurisdiction`})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`},children:[(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>d(!0),style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`},children:`+ Add Rule`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>p(!0),children:`+ Add SOP`})]})]}),(0,$.jsxs)(`div`,{className:`kpiRow`,children:[(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Total Workflows`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:ne.total})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Enabled`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:ne.enabled})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Disabled`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:ne.disabled})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Total Executions`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:ne.executions})]})]}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsx)(`div`,{className:`cardTitle`,children:`Current Configuration`})}),(0,$.jsxs)(`div`,{className:`detail`,children:[(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Vertical`}),(0,$.jsx)(`div`,{className:`v`,children:D[T]||T})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Jurisdiction`}),(0,$.jsx)(`div`,{className:`v`,children:E.toUpperCase()})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`RAAS Version`}),(0,$.jsx)(`div`,{className:`v`,children:`2.1.0`})]}),localStorage.getItem(`RAAS_RULES`)&&(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Custom Rules`}),(0,$.jsx)(`div`,{className:`v`,style:{whiteSpace:`pre-wrap`},children:localStorage.getItem(`RAAS_RULES`)})]})]})]}),x.length>0&&(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{className:`cardTitle`,children:[`Custom Rules (`,x.length,`)`]})}),(0,$.jsx)(`div`,{style:{padding:`16px`,display:`flex`,flexDirection:`column`,gap:`8px`},children:x.map((e,t)=>(0,$.jsxs)(`div`,{style:{padding:`12px`,background:`#f8fafc`,borderRadius:`8px`,display:`flex`,justifyContent:`space-between`,alignItems:`flex-start`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600,fontSize:`14px`},children:e.name}),e.description&&(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`,marginTop:`2px`},children:e.description}),e.condition&&(0,$.jsxs)(`div`,{style:{fontSize:`12px`,color:`#7c3aed`,marginTop:`4px`},children:[`When: `,e.condition]}),e.action&&(0,$.jsxs)(`div`,{style:{fontSize:`12px`,color:`#059669`,marginTop:`2px`},children:[`Then: `,e.action]})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>S(x.filter((e,n)=>n!==t)),style:{fontSize:`12px`,padding:`4px 8px`,color:`var(--danger)`,borderColor:`var(--danger)`},children:`Remove`})]},t))})]}),C.length>0&&(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{className:`cardTitle`,children:[`SOP Documents (`,C.length,`)`]})}),(0,$.jsx)(`div`,{style:{padding:`16px`,display:`flex`,flexDirection:`column`,gap:`8px`},children:C.map((e,t)=>(0,$.jsxs)(`div`,{style:{padding:`12px`,background:`#f8fafc`,borderRadius:`8px`,display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600,fontSize:`14px`},children:e.name}),(0,$.jsxs)(`div`,{style:{fontSize:`12px`,color:`var(--textMuted)`},children:[e.fileName,` (`,(e.fileSize/1024).toFixed(1),` KB)`]})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>w(C.filter((e,n)=>n!==t)),style:{fontSize:`12px`,padding:`4px 8px`,color:`var(--danger)`,borderColor:`var(--danger)`},children:`Remove`})]},t))})]}),n&&(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{className:`empty`,children:`Loading workflows...`})}),!n&&e.length===0&&(0,$.jsx)(`div`,{className:`card`,style:{marginTop:`16px`},children:(0,$.jsxs)(`div`,{className:`empty`,style:{padding:`40px 20px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`16px`,fontWeight:600,marginBottom:`8px`},children:`No workflows configured yet`}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`var(--textMuted)`,marginBottom:`16px`,maxWidth:`400px`,margin:`0 auto 16px`},children:`Workflows define the rules your AI assistant follows. They are configured per vertical and jurisdiction. Create your first workflow or ask the AI assistant to set one up for you.`}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`,justifyContent:`center`},children:[(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>d(!0),style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`},children:`+ Add Rule`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>p(!0),children:`+ Add SOP Document`})]})]})}),!n&&e.length>0&&(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:e.map(e=>(0,$.jsxs)(`div`,{className:`card`,children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:e.name}),(0,$.jsx)(`div`,{className:`cardSub`,children:e.description})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`,alignItems:`center`},children:[(0,$.jsx)(`span`,{className:`badge ${e.enabled?`badge-completed`:``}`,style:{fontSize:`11px`},children:e.enabled?`Enabled`:`Disabled`}),(0,$.jsxs)(`span`,{className:`badge`,style:{fontSize:`11px`},children:[e.executionCount,` runs`]})]})]}),(0,$.jsxs)(`div`,{style:{padding:`16px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`8px`},children:`Rules`}),(0,$.jsx)(`ul`,{style:{margin:0,paddingLeft:`20px`},children:e.rules.map((e,t)=>(0,$.jsx)(`li`,{style:{marginBottom:`4px`,fontSize:`14px`},children:e},t))})]}),(0,$.jsxs)(`div`,{className:`detail`,style:{borderTop:`1px solid var(--line)`},children:[(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Vertical`}),(0,$.jsx)(`div`,{className:`v`,children:e.vertical.toUpperCase()})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Jurisdiction`}),(0,$.jsx)(`div`,{className:`v`,children:e.jurisdiction})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Last Used`}),(0,$.jsx)(`div`,{className:`v`,children:new Date(e.lastUsed).toLocaleString()})]})]}),(0,$.jsx)(`div`,{style:{padding:`16px`,borderTop:`1px solid var(--line)`},children:(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`},children:[(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>ee(e),style:{flex:1},children:`Edit Rules`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>te(e.id),style:{flex:1},children:e.enabled?`Disable`:`Enable`}),(0,$.jsx)(`button`,{className:`iconBtn`,style:{flex:1},children:`Test Workflow`})]})})]},e.id))}),i&&!o&&(0,$.jsxs)(`div`,{className:`card`,style:{marginTop:`16px`},children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:i.name}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Workflow Details`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>a(null),children:`Close`})]}),(0,$.jsxs)(`div`,{style:{padding:`16px`},children:[(0,$.jsxs)(`div`,{style:{marginBottom:`16px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`8px`},children:`Execution History`}),(0,$.jsxs)(`div`,{style:{fontSize:`14px`,color:`var(--textMuted)`},children:[`This workflow has been executed `,i.executionCount,` times.`]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`8px`},children:`Recent Runs`}),(0,$.jsx)(`div`,{style:{padding:`12px`,background:`#f8fafc`,borderRadius:`8px`,fontSize:`13px`,color:`var(--textMuted)`},children:`Execution logs would appear here`})]})]})]}),(0,$.jsx)(Ev,{isOpen:o,onClose:()=>s(!1),title:`Edit Workflow Rules`,onSubmit:k,submitLabel:`Save Changes`,children:(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Workflow Name *`}),(0,$.jsx)(`input`,{type:`text`,value:c.name,onChange:e=>l({...c,name:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Description`}),(0,$.jsx)(`input`,{type:`text`,value:c.description,onChange:e=>l({...c,description:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`}})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Rules (one per line) *`}),(0,$.jsx)(`textarea`,{value:c.rules,onChange:e=>l({...c,rules:e.target.value}),rows:10,style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`,fontFamily:`monospace`,fontSize:`13px`},required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`label`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,$.jsx)(`input`,{type:`checkbox`,checked:c.enabled,onChange:e=>l({...c,enabled:e.target.checked})}),(0,$.jsx)(`span`,{style:{fontWeight:600},children:`Enabled`})]}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`,marginTop:`4px`},children:`Only enabled workflows will execute`})]})]})}),(0,$.jsx)(Ev,{isOpen:u,onClose:()=>{d(!1),h({name:``,description:``,condition:``,action:``})},title:`Add Custom Rule`,onSubmit:e=>{e.preventDefault(),m.name.trim()&&(S([...x,{...m}]),h({name:``,description:``,condition:``,action:``}),d(!1))},submitLabel:`Add Rule`,children:(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Rule Name *`}),(0,$.jsx)(`input`,{type:`text`,value:m.name,onChange:e=>h({...m,name:e.target.value}),placeholder:`e.g., Minimum Deal Size Check`,style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Description`}),(0,$.jsx)(`input`,{type:`text`,value:m.description,onChange:e=>h({...m,description:e.target.value}),placeholder:`What does this rule do?`,style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`}})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Condition (when)`}),(0,$.jsx)(`textarea`,{value:m.condition,onChange:e=>h({...m,condition:e.target.value}),placeholder:`e.g., Deal ask amount is below $500,000`,rows:2,style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`,fontFamily:`inherit`}})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Action (then)`}),(0,$.jsx)(`textarea`,{value:m.action,onChange:e=>h({...m,action:e.target.value}),placeholder:`e.g., Auto-pass and notify user`,rows:2,style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`,fontFamily:`inherit`}})]})]})}),(0,$.jsx)(Ev,{isOpen:f,onClose:()=>{p(!1),v(null),b(``)},title:`Add SOP Documentation`,onSubmit:e=>{e.preventDefault(),g&&(w([...C,{name:y.trim()||g.name,fileName:g.name,fileSize:g.size}]),v(null),b(``),p(!1))},submitLabel:`Upload SOP`,children:(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Document Name`}),(0,$.jsx)(`input`,{type:`text`,value:y,onChange:e=>b(e.target.value),placeholder:`e.g., Deal Screening SOP`,style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`}})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Upload Document *`}),(0,$.jsx)(`input`,{type:`file`,accept:`.pdf,.docx,.doc,.txt,.xlsx,.xls,.csv`,onChange:e=>{let t=e.target.files?.[0];t&&(v(t),y.trim()||b(t.name.replace(/\.[^.]+$/,``)))},style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0}),g&&(0,$.jsxs)(`div`,{style:{marginTop:`8px`,fontSize:`13px`,color:`var(--textMuted)`},children:[g.name,` (`,(g.size/1024).toFixed(1),` KB)`]})]}),(0,$.jsx)(`div`,{style:{padding:`12px`,background:`#f8f4ff`,borderRadius:`8px`,fontSize:`13px`,color:`#6b7280`},children:`SOP documents feed into your RAAS engine. The AI assistant will reference these when handling your business operations.`})]})})]})}var Ov=[{stock:`N25000`,year:2025,make:`Toyota`,model:`Camry LE`,trim:`LE`,color:`Wind Chill Pearl`,mileage:12,price:28400,msrp:28400,daysOnLot:70,status:`available`},{stock:`N25001`,year:2025,make:`Toyota`,model:`Camry SE`,trim:`SE`,color:`Midnight Black`,mileage:8,price:30200,msrp:30200,daysOnLot:45,status:`available`},{stock:`N25002`,year:2025,make:`Toyota`,model:`Camry XSE`,trim:`XSE`,color:`Underground`,mileage:5,price:32800,msrp:32800,daysOnLot:22,status:`available`},{stock:`N25003`,year:2025,make:`Toyota`,model:`Corolla LE`,trim:`LE`,color:`Celestite`,mileage:10,price:23500,msrp:23500,daysOnLot:55,status:`available`},{stock:`N25004`,year:2025,make:`Toyota`,model:`Corolla SE`,trim:`SE`,color:`Blueprint`,mileage:6,price:25200,msrp:25200,daysOnLot:30,status:`available`},{stock:`N25005`,year:2025,make:`Toyota`,model:`RAV4 XLE`,trim:`XLE`,color:`Lunar Rock`,mileage:9,price:34200,msrp:34200,daysOnLot:18,status:`available`},{stock:`N25006`,year:2025,make:`Toyota`,model:`RAV4 XLE Premium`,trim:`XLE Premium`,color:`Ice Cap`,mileage:4,price:37500,msrp:37500,daysOnLot:12,status:`available`},{stock:`N25007`,year:2025,make:`Toyota`,model:`Tacoma TRD Sport`,trim:`TRD Sport`,color:`Magnetic Gray`,mileage:15,price:42300,msrp:42300,daysOnLot:8,status:`available`},{stock:`N25008`,year:2025,make:`Toyota`,model:`Highlander XLE`,trim:`XLE`,color:`Celestial Silver`,mileage:7,price:42900,msrp:42900,daysOnLot:25,status:`available`},{stock:`N25009`,year:2025,make:`Toyota`,model:`Tundra SR5 CrewMax`,trim:`SR5`,color:`Army Green`,mileage:11,price:48900,msrp:48900,daysOnLot:35,status:`available`},{stock:`N25010`,year:2025,make:`Toyota`,model:`4Runner TRD Off-Road`,trim:`TRD Off-Road`,color:`Lunar Rock`,mileage:3,price:46500,msrp:46500,daysOnLot:5,status:`available`},{stock:`N25011`,year:2025,make:`Toyota`,model:`Prius LE`,trim:`LE`,color:`Sea Glass Pearl`,mileage:8,price:29800,msrp:29800,daysOnLot:40,status:`available`},{stock:`N25012`,year:2025,make:`Toyota`,model:`GR86 Premium`,trim:`Premium`,color:`Track bRED`,mileage:2,price:33500,msrp:33500,daysOnLot:14,status:`available`},{stock:`N25013`,year:2025,make:`Toyota`,model:`Crown Platinum`,trim:`Platinum`,color:`Oxygen White`,mileage:6,price:53400,msrp:53400,daysOnLot:50,status:`available`},{stock:`N25014`,year:2025,make:`Toyota`,model:`Grand Highlander Platinum`,trim:`Platinum`,color:`Wind Chill Pearl`,mileage:4,price:55200,msrp:55200,daysOnLot:28,status:`available`}],kv=[{stock:`U30000`,year:2021,make:`BMW`,model:`X3 xDrive30i`,trim:`xDrive30i`,color:`Alpine White`,mileage:42500,price:34169,daysOnLot:143,status:`available`,carfax:`clean`,cpo:!1},{stock:`U30001`,year:2023,make:`Honda`,model:`Accord Sport`,trim:`Sport`,color:`Still Night Pearl`,mileage:18200,price:28900,daysOnLot:35,status:`available`,carfax:`clean`,cpo:!1},{stock:`U30002`,year:2022,make:`Toyota`,model:`Camry SE`,trim:`SE`,color:`Celestial Silver`,mileage:31e3,price:24500,daysOnLot:22,status:`available`,carfax:`clean`,cpo:!0},{stock:`U30003`,year:2023,make:`Ford`,model:`Explorer XLT`,trim:`XLT`,color:`Agate Black`,mileage:28900,price:33200,daysOnLot:86,status:`available`,carfax:`minor`,cpo:!1},{stock:`U30004`,year:2022,make:`Mazda`,model:`CX-5 Carbon Edition`,trim:`Carbon Edition`,color:`Polymetal Gray`,mileage:22100,price:27800,daysOnLot:15,status:`available`,carfax:`clean`,cpo:!1},{stock:`U30005`,year:2023,make:`Subaru`,model:`Outback Limited`,trim:`Limited`,color:`Crystal White Pearl`,mileage:19500,price:31400,daysOnLot:44,status:`available`,carfax:`clean`,cpo:!1},{stock:`U30006`,year:2022,make:`Hyundai`,model:`Tucson SEL`,trim:`SEL`,color:`Amazon Gray`,mileage:35200,price:25900,daysOnLot:28,status:`available`,carfax:`clean`,cpo:!1},{stock:`U30007`,year:2021,make:`Toyota`,model:`RAV4 XLE`,trim:`XLE`,color:`Blueprint`,mileage:45800,price:27200,daysOnLot:19,status:`available`,carfax:`clean`,cpo:!0},{stock:`U30008`,year:2023,make:`Kia`,model:`Sportage X-Line`,trim:`X-Line`,color:`Dawning Red`,mileage:15800,price:29500,daysOnLot:55,status:`available`,carfax:`clean`,cpo:!1},{stock:`U30009`,year:2022,make:`Chevrolet`,model:`Equinox LT`,trim:`LT`,color:`Summit White`,mileage:38100,price:22900,daysOnLot:67,status:`available`,carfax:`clean`,cpo:!1},{stock:`U30010`,year:2022,make:`Ford`,model:`Explorer XLT`,trim:`XLT`,color:`Iconic Silver`,mileage:41200,price:30500,daysOnLot:126,status:`available`,carfax:`minor`,cpo:!1},{stock:`U30011`,year:2023,make:`Nissan`,model:`Rogue SV`,trim:`SV`,color:`Super Black`,mileage:21300,price:28100,daysOnLot:32,status:`available`,carfax:`clean`,cpo:!1},{stock:`U30012`,year:2021,make:`Toyota`,model:`Tacoma SR5`,trim:`SR5`,color:`Cement`,mileage:52300,price:31800,daysOnLot:9,status:`available`,carfax:`clean`,cpo:!0},{stock:`U30013`,year:2022,make:`Lexus`,model:`NX 250`,trim:`250`,color:`Eminent White Pearl`,mileage:28700,price:36900,daysOnLot:41,status:`available`,carfax:`clean`,cpo:!1},{stock:`U30014`,year:2023,make:`Audi`,model:`Q5 Premium`,trim:`Premium`,color:`Mythos Black`,mileage:16400,price:39800,daysOnLot:95,status:`available`,carfax:`clean`,cpo:!1}];function Av(e){return e<30?{bg:`#dcfce7`,color:`#16a34a`,label:``}:e<=90?{bg:`#fef3c7`,color:`#d97706`,label:``}:{bg:`#fee2e2`,color:`#dc2626`,label:`AGING`}}function jv(){let[e,t]=(0,_.useState)(`new`),[n,r]=(0,_.useState)(()=>localStorage.getItem(`INV_VIEW`)||`cards`),i=e===`new`?Ov:kv,a=i.reduce((e,t)=>e+t.price,0),o=i.filter(e=>e.daysOnLot>90).length;function s(e){window.dispatchEvent(new CustomEvent(`ta:chatPrompt`,{detail:{message:e}}))}function c(e){r(e),localStorage.setItem(`INV_VIEW`,e)}return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Inventory`}),(0,$.jsx)(`p`,{className:`subtle`,children:`New and used vehicle inventory management`})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,border:`1px solid #e2e8f0`,borderRadius:`8px`,overflow:`hidden`},children:[(0,$.jsx)(`button`,{onClick:()=>c(`cards`),style:{padding:`8px 14px`,fontSize:`13px`,fontWeight:600,border:`none`,cursor:`pointer`,background:n===`cards`?`#7c3aed`:`white`,color:n===`cards`?`white`:`#64748b`},children:`Cards`}),(0,$.jsx)(`button`,{onClick:()=>c(`list`),style:{padding:`8px 14px`,fontSize:`13px`,fontWeight:600,border:`none`,cursor:`pointer`,borderLeft:`1px solid #e2e8f0`,background:n===`list`?`#7c3aed`:`white`,color:n===`list`?`white`:`#64748b`},children:`List`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>s(`What vehicles are aging past 90 days and what should we do about them?`),style:{background:`linear-gradient(135deg, #7c3aed, #6d28d9)`,color:`white`,border:`none`},children:`Aging Report`})]})]}),(0,$.jsx)(`div`,{style:{display:`flex`,gap:`0`,marginBottom:`20px`,borderBottom:`2px solid #e2e8f0`},children:[{id:`new`,label:`New (${Ov.length})`},{id:`used`,label:`Used (${kv.length})`}].map(n=>(0,$.jsx)(`button`,{onClick:()=>t(n.id),style:{padding:`10px 20px`,fontSize:`14px`,fontWeight:600,border:`none`,borderBottom:e===n.id?`2px solid #7c3aed`:`2px solid transparent`,background:`transparent`,color:e===n.id?`#7c3aed`:`#64748b`,cursor:`pointer`,marginBottom:`-2px`},children:n.label},n.id))}),(0,$.jsxs)(`div`,{className:`kpiRow`,style:{marginBottom:`16px`},children:[(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Tab Value`}),(0,$.jsxs)(`div`,{className:`kpiValue`,children:[`$`,a.toLocaleString()]})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Units`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:i.length})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Avg Price`}),(0,$.jsxs)(`div`,{className:`kpiValue`,children:[`$`,Math.round(a/i.length).toLocaleString()]})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,style:{color:o>0?`#dc2626`:void 0},children:`Aging (>90d)`}),(0,$.jsx)(`div`,{className:`kpiValue`,style:{color:o>0?`#dc2626`:void 0},children:o})]})]}),n===`cards`?(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr 1fr`,gap:`14px`},children:i.map(e=>{let t=Av(e.daysOnLot);return(0,$.jsxs)(`div`,{className:`card`,style:{padding:`16px`,cursor:`pointer`},onClick:()=>s(`Tell me about Stock ${e.stock} -- ${e.year} ${e.make} ${e.model} ${e.trim}. Price: $${e.price.toLocaleString()}. ${e.daysOnLot} days on lot.`),children:[(0,$.jsxs)(`div`,{style:{height:`120px`,background:`#f1f5f9`,borderRadius:`8px`,display:`flex`,alignItems:`center`,justifyContent:`center`,marginBottom:`12px`,color:`#94a3b8`,fontSize:`13px`},children:[e.year,` `,e.make,` `,e.model]}),(0,$.jsxs)(`div`,{style:{fontWeight:700,fontSize:`15px`,color:`#1e293b`,marginBottom:`4px`},children:[e.year,` `,e.make,` `,e.model,` `,e.trim===e.model.split(` `).pop()?``:e.trim]}),(0,$.jsxs)(`div`,{style:{fontSize:`12px`,color:`#64748b`,marginBottom:`8px`},children:[`Stock #`,e.stock,`  `,e.color,`  `,e.mileage.toLocaleString(),` mi`]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`6px`,flexWrap:`wrap`,marginBottom:`8px`},children:[(0,$.jsxs)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:t.bg,color:t.color},children:[e.daysOnLot,`d `,t.label]}),e.carfax&&(0,$.jsxs)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:e.carfax===`clean`?`#dcfce7`:`#fef3c7`,color:e.carfax===`clean`?`#16a34a`:`#d97706`},children:[`CARFAX `,e.carfax===`clean`?`Clean`:`Minor`]}),e.cpo&&(0,$.jsx)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:`#fef3c7`,color:`#92400e`},children:`CPO`})]}),(0,$.jsxs)(`div`,{style:{fontSize:`20px`,fontWeight:900,color:`#1e293b`},children:[`$`,e.price.toLocaleString()]})]},e.stock)})}):(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{className:`tableWrap`,children:(0,$.jsxs)(`table`,{className:`table`,style:{width:`100%`},children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{children:`Stock #`}),(0,$.jsx)(`th`,{children:`Year / Make / Model`}),(0,$.jsx)(`th`,{children:`Color`}),(0,$.jsx)(`th`,{style:{textAlign:`right`},children:`Mileage`}),(0,$.jsx)(`th`,{style:{textAlign:`right`},children:`Days on Lot`}),(0,$.jsx)(`th`,{style:{textAlign:`right`},children:`Price`}),(0,$.jsx)(`th`,{children:`Status`})]})}),(0,$.jsx)(`tbody`,{children:i.map(e=>{let t=Av(e.daysOnLot);return(0,$.jsxs)(`tr`,{style:{cursor:`pointer`},onClick:()=>s(`Tell me about Stock ${e.stock} -- ${e.year} ${e.make} ${e.model} ${e.trim}. Price: $${e.price.toLocaleString()}. ${e.daysOnLot} days on lot.`),children:[(0,$.jsx)(`td`,{style:{fontWeight:600,whiteSpace:`nowrap`},children:e.stock}),(0,$.jsxs)(`td`,{className:`tdStrong`,children:[e.year,` `,e.make,` `,e.model,` `,e.trim===e.model.split(` `).pop()?``:e.trim]}),(0,$.jsx)(`td`,{style:{fontSize:`13px`,color:`#64748b`},children:e.color}),(0,$.jsx)(`td`,{style:{textAlign:`right`,fontSize:`13px`},children:e.mileage.toLocaleString()}),(0,$.jsx)(`td`,{style:{textAlign:`right`},children:(0,$.jsxs)(`span`,{style:{fontSize:`12px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:t.bg,color:t.color},children:[e.daysOnLot,`d `,t.label]})}),(0,$.jsxs)(`td`,{style:{textAlign:`right`,fontWeight:700,fontSize:`14px`},children:[`$`,e.price.toLocaleString()]}),(0,$.jsx)(`td`,{children:(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`4px`},children:[e.carfax&&(0,$.jsx)(`span`,{style:{fontSize:`10px`,fontWeight:600,padding:`1px 6px`,borderRadius:`4px`,background:e.carfax===`clean`?`#dcfce7`:`#fef3c7`,color:e.carfax===`clean`?`#16a34a`:`#d97706`},children:e.carfax===`clean`?`Clean`:`Minor`}),e.cpo&&(0,$.jsx)(`span`,{style:{fontSize:`10px`,fontWeight:600,padding:`1px 6px`,borderRadius:`4px`,background:`#fef3c7`,color:`#92400e`},children:`CPO`}),!e.carfax&&!e.cpo&&(0,$.jsx)(`span`,{style:{fontSize:`12px`,color:`#94a3b8`},children:`--`})]})})]},e.stock)})})]})})})]})}function Mv(){let e=localStorage.getItem(`VERTICAL`)||`auto`,t=localStorage.getItem(`JURISDICTION`)||`IL`,n=e===`analyst`,r=e===`auto`,[i,a]=(0,_.useState)([]),[o,s]=(0,_.useState)(!1),[c,l]=(0,_.useState)(``),[u,d]=(0,_.useState)(`all`),[f,p]=(0,_.useState)(`all`),[m,h]=(0,_.useState)(!1),[g,v]=(0,_.useState)(null),[y,b]=(0,_.useState)({type:n?`consulting`:`vehicle`,status:`available`,metadata:{},price:``,cost:``}),[x,S]=(0,_.useState)([]),[C,w]=(0,_.useState)(!1);(0,_.useEffect)(()=>{n?T():E()},[]);async function T(){w(!0);try{S((await tv({vertical:e,jurisdiction:t})).deals||[])}catch(e){console.warn(`Could not load deals for fees page:`,e.message)}finally{w(!1)}}async function E(){s(!0),l(``);try{a((await L_({vertical:e,jurisdiction:t,type:u===`all`?void 0:u})).items||[])}catch(e){l(e?.message||String(e)),a([])}finally{s(!1)}}async function D(r){r.preventDefault(),l(``);try{g?await z_({vertical:e,jurisdiction:t,id:g.id,item:{type:y.type,status:y.status,metadata:y.metadata,price:parseFloat(y.price)||0,cost:parseFloat(y.cost)||0}}):await R_({vertical:e,jurisdiction:t,item:{type:y.type,status:y.status,metadata:y.metadata,price:parseFloat(y.price)||0,cost:parseFloat(y.cost)||0}}),await E(),h(!1),v(null),b({type:n?`consulting`:`vehicle`,status:`available`,metadata:{},price:``,cost:``})}catch(e){l(e?.message||String(e))}}function O(e){v(e),b({type:e.type,status:e.status,metadata:{...e.metadata},price:e.price.toString(),cost:e.cost.toString()}),h(!0)}async function ee(n){if(confirm(`Are you sure you want to delete this item?`)){l(``);try{await B_({vertical:e,jurisdiction:t,id:n}),await E()}catch(e){l(e?.message||String(e))}}}function k(e,t){b({...y,metadata:{...y.metadata,[e]:t}})}let te=i.filter(e=>!(u!==`all`&&e.type!==u||f!==`all`&&e.status!==f)),ne={total:i.length,available:i.filter(e=>e.status===`available`).length,sold:i.filter(e=>e.status===`sold`).length,pending:i.filter(e=>e.status===`pending`).length,totalValue:i.filter(e=>e.status===`available`).reduce((e,t)=>e+t.price,0)};if(r)return(0,$.jsx)(jv,{});if(n){let e=x.length>0?x:[{id:`fb1`,dealInput:{companyName:`Las Vegas Foreclosure`,askAmount:`$500,000`},analysis:{riskScore:85,recommendation:`PASS`}},{id:`fb2`,dealInput:{companyName:`Austin Apartments`,askAmount:`$78,500,000`},analysis:{riskScore:45,recommendation:`INVEST`}},{id:`fb3`,dealInput:{companyName:`Chicago Office #2`,askAmount:`$52,000,000`},analysis:{riskScore:52,recommendation:`INVEST`}},{id:`fb4`,dealInput:{companyName:`Chicago Office`,askAmount:`$52,000,000`},analysis:{riskScore:38,recommendation:`INVEST`}},{id:`fb5`,dealInput:{companyName:`Phoenix Industrial`,askAmount:`$52,300,000`},analysis:{riskScore:45,recommendation:`INVEST`}}];function t(e){let t=(e.dealInput?.askAmount||``).replace(/[$,]/g,``);return parseFloat(t)||0}function n(e){return e.dealInput?.companyName||e.dealInput?.summary?.substring(0,40)||`Unknown`}let r=e.reduce((e,n)=>e+t(n),0),i=e.length*2,a=i*250,o=r*.015,s=a+o;return(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{style:{fontSize:`32px`,fontWeight:700},children:`Services & Fees`}),(0,$.jsx)(`p`,{style:{color:`#64748b`,marginBottom:`24px`},children:`Your fee schedule and revenue tracking`}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`24px`,padding:`24px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`18px`,fontWeight:600,marginBottom:`16px`},children:`Fee Schedule`}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr 1fr`,gap:`16px`},children:[(0,$.jsxs)(`div`,{style:{padding:`20px`,background:`#f8fafc`,borderRadius:`8px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`,marginBottom:`4px`},children:`HOURLY RATE`}),(0,$.jsx)(`div`,{style:{fontSize:`28px`,fontWeight:700},children:`$250`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`},children:`Per hour consulting`})]}),(0,$.jsxs)(`div`,{style:{padding:`20px`,background:`#f8fafc`,borderRadius:`8px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`,marginBottom:`4px`},children:`SUCCESS FEE`}),(0,$.jsx)(`div`,{style:{fontSize:`28px`,fontWeight:700},children:`1.5%`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`},children:`Of closed deal value`})]}),(0,$.jsxs)(`div`,{style:{padding:`20px`,background:`#f8fafc`,borderRadius:`8px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`,marginBottom:`4px`},children:`RETAINER`}),(0,$.jsx)(`div`,{style:{fontSize:`28px`,fontWeight:700},children:`$2,500`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`},children:`Monthly retainer option`})]})]})]}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`24px`,padding:`24px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`18px`,fontWeight:600,marginBottom:`16px`},children:`Revenue Tracker`}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr 1fr 1fr`,gap:`12px`,marginBottom:`20px`},children:[(0,$.jsxs)(`div`,{style:{padding:`12px`,background:`#f0fdf4`,borderRadius:`8px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`HOURS BILLED`}),(0,$.jsx)(`div`,{style:{fontSize:`22px`,fontWeight:700},children:i})]}),(0,$.jsxs)(`div`,{style:{padding:`12px`,background:`#f0fdf4`,borderRadius:`8px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`HOURLY REVENUE`}),(0,$.jsxs)(`div`,{style:{fontSize:`22px`,fontWeight:700,color:`#16a34a`},children:[`$`,a.toLocaleString()]})]}),(0,$.jsxs)(`div`,{style:{padding:`12px`,background:`#ede9fe`,borderRadius:`8px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`PENDING SUCCESS FEES`}),(0,$.jsxs)(`div`,{style:{fontSize:`22px`,fontWeight:700,color:`#7c3aed`},children:[`$`,Math.round(o).toLocaleString()]})]}),(0,$.jsxs)(`div`,{style:{padding:`12px`,background:`#fef3c7`,borderRadius:`8px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`TOTAL POTENTIAL REVENUE`}),(0,$.jsxs)(`div`,{style:{fontSize:`22px`,fontWeight:700},children:[`$`,Math.round(s).toLocaleString()]})]})]}),C?(0,$.jsx)(`div`,{style:{padding:`24px`,textAlign:`center`,color:`#64748b`},children:`Loading deals...`}):(0,$.jsx)(`div`,{className:`tableWrap`,children:(0,$.jsxs)(`table`,{className:`table`,style:{width:`100%`},children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{style:{textAlign:`left`},children:`Deal`}),(0,$.jsx)(`th`,{style:{textAlign:`left`},children:`Deal Size`}),(0,$.jsx)(`th`,{style:{textAlign:`left`},children:`Hours`}),(0,$.jsx)(`th`,{style:{textAlign:`left`},children:`Hourly Fee`}),(0,$.jsx)(`th`,{style:{textAlign:`left`},children:`Success Fee (1.5%)`}),(0,$.jsx)(`th`,{style:{textAlign:`left`},children:`Status`})]})}),(0,$.jsxs)(`tbody`,{children:[e.map(e=>{let r=t(e),i=r*.015,a=e.analysis?.recommendation||`PENDING`,o=a===`INVEST`?`#dcfce7`:a===`PASS`?`#fee2e2`:`#fef3c7`,s=a===`INVEST`?`#16a34a`:a===`PASS`?`#dc2626`:`#d97706`;return(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`td`,{className:`tdStrong`,children:n(e)}),(0,$.jsxs)(`td`,{children:[`$`,r.toLocaleString()]}),(0,$.jsx)(`td`,{children:2}),(0,$.jsxs)(`td`,{children:[`$`,500 .toLocaleString()]}),(0,$.jsxs)(`td`,{style:{color:`#7c3aed`},children:[`$`,Math.round(i).toLocaleString()]}),(0,$.jsx)(`td`,{children:(0,$.jsx)(`span`,{style:{padding:`2px 8px`,borderRadius:`4px`,fontSize:`12px`,fontWeight:600,backgroundColor:o,color:s},children:a})})]},e.id)}),(0,$.jsxs)(`tr`,{style:{borderTop:`2px solid #e2e8f0`,fontWeight:700},children:[(0,$.jsx)(`td`,{children:`TOTALS`}),(0,$.jsxs)(`td`,{children:[`$`,r.toLocaleString()]}),(0,$.jsx)(`td`,{children:i}),(0,$.jsxs)(`td`,{children:[`$`,a.toLocaleString()]}),(0,$.jsxs)(`td`,{style:{color:`#7c3aed`},children:[`$`,Math.round(o).toLocaleString()]}),(0,$.jsx)(`td`,{})]})]})]})})]})]})}return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Services & Inventory`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Manage products, services, and pricing`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>{v(null),b({type:n?`consulting`:`vehicle`,status:`available`,metadata:{},price:``,cost:``}),h(!0)},style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`},children:n?`+ Add Service`:`+ Add Item`})]}),(0,$.jsxs)(`div`,{className:`kpiRow`,children:[(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Total Items`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:ne.total})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Available`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:ne.available})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Sold`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:ne.sold})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:n?`Total Fees`:`Inventory Value`}),(0,$.jsxs)(`div`,{className:`kpiValue`,children:[`$`,ne.totalValue.toLocaleString()]})]})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`12px`,marginBottom:`16px`,flexWrap:`wrap`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontSize:`13px`,fontWeight:600},children:`Type`}),(0,$.jsxs)(`select`,{value:u,onChange:e=>d(e.target.value),style:{padding:`8px 12px`,borderRadius:`12px`,border:`1px solid var(--line)`},children:[(0,$.jsx)(`option`,{value:`all`,children:`All Types`}),n?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`option`,{value:`consulting`,children:`Consulting`}),(0,$.jsx)(`option`,{value:`performance_fee`,children:`Performance Fee`}),(0,$.jsx)(`option`,{value:`management_fee`,children:`Management Fee`}),(0,$.jsx)(`option`,{value:`subscription`,children:`Research Subscription`})]}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`option`,{value:`vehicle`,children:`Vehicles`}),(0,$.jsx)(`option`,{value:`service`,children:`Services`})]})]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontSize:`13px`,fontWeight:600},children:`Status`}),(0,$.jsxs)(`select`,{value:f,onChange:e=>p(e.target.value),style:{padding:`8px 12px`,borderRadius:`12px`,border:`1px solid var(--line)`},children:[(0,$.jsx)(`option`,{value:`all`,children:`All Statuses`}),(0,$.jsx)(`option`,{value:`available`,children:`Available`}),(0,$.jsx)(`option`,{value:`pending`,children:`Pending`}),(0,$.jsx)(`option`,{value:`sold`,children:`Sold`})]})]})]}),c&&(0,$.jsx)(`div`,{className:`card`,style:{borderColor:`var(--danger)`},children:(0,$.jsx)(`div`,{className:`empty`,style:{color:`var(--danger)`},children:c})}),o&&(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{className:`empty`,children:`Loading inventory...`})}),!o&&te.length===0&&(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{className:`empty`,children:(0,$.jsx)(`p`,{children:`No inventory items found.`})})}),!o&&te.length>0&&(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{className:`tableWrap`,children:(0,$.jsxs)(`table`,{className:`table`,children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{children:`Type`}),(0,$.jsx)(`th`,{children:n?`Service`:`Item`}),(0,$.jsx)(`th`,{children:n?`Rate / Fee`:`Price`}),!n&&(0,$.jsx)(`th`,{children:`Cost`}),!n&&(0,$.jsx)(`th`,{children:`Margin`}),(0,$.jsx)(`th`,{children:`Status`}),(0,$.jsx)(`th`,{children:`Actions`})]})}),(0,$.jsx)(`tbody`,{children:te.map(e=>{let t=e.price-e.cost,r=e.price?(t/e.price*100).toFixed(1):`0.0`;return(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`td`,{children:{consulting:`Consulting`,performance_fee:`Performance Fee`,management_fee:`Management Fee`,subscription:`Subscription`,vehicle:`Vehicle`,service:`Service`}[e.type]||e.type}),(0,$.jsxs)(`td`,{className:`tdStrong`,children:[e.type===`vehicle`?`${e.metadata.year} ${e.metadata.make} ${e.metadata.model}`:e.metadata.name||e.metadata.serviceName||`-`,e.type===`vehicle`&&(0,$.jsxs)(`div`,{className:`tdMuted`,style:{fontSize:`12px`},children:[`VIN: `,e.metadata.vin]}),e.metadata.billingFrequency&&(0,$.jsx)(`div`,{className:`tdMuted`,style:{fontSize:`12px`},children:e.metadata.billingFrequency})]}),(0,$.jsxs)(`td`,{children:[n&&e.metadata.rateType===`percentage`?`${e.price}%`:`$${e.price.toLocaleString()}`,n&&e.metadata.rateUnit?`/${e.metadata.rateUnit}`:``]}),!n&&(0,$.jsxs)(`td`,{className:`tdMuted`,children:[`$`,e.cost.toLocaleString()]}),!n&&(0,$.jsx)(`td`,{children:(0,$.jsxs)(`span`,{style:{color:t>0?`var(--accent2)`:`var(--danger)`},children:[`$`,t.toLocaleString(),` (`,r,`%)`]})}),(0,$.jsx)(`td`,{children:(0,$.jsx)(`span`,{className:`badge badge-${e.status===`available`?`completed`:e.status===`sold`?`created`:`processing`}`,children:e.status})}),(0,$.jsx)(`td`,{children:(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`6px`},children:[(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>O(e),style:{padding:`6px 10px`,fontSize:`12px`},children:`Edit`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>ee(e.id),style:{padding:`6px 10px`,fontSize:`12px`,borderColor:`var(--danger)`,color:`var(--danger)`},children:`Delete`})]})})]},e.id)})})]})})}),(0,$.jsx)(Ev,{isOpen:m,onClose:()=>{h(!1),v(null),b({type:n?`consulting`:`vehicle`,status:`available`,metadata:{},price:``,cost:``})},title:g?`Edit Item`:n?`Add Service`:`Add New Item`,onSubmit:D,submitLabel:g?`Update`:`Add Item`,children:(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Item Type *`}),(0,$.jsx)(`select`,{value:y.type,onChange:e=>b({...y,type:e.target.value,metadata:{}}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0,children:n?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`option`,{value:`consulting`,children:`Consulting Service`}),(0,$.jsx)(`option`,{value:`performance_fee`,children:`Performance Fee`}),(0,$.jsx)(`option`,{value:`management_fee`,children:`Fund Management Fee`}),(0,$.jsx)(`option`,{value:`subscription`,children:`Research Subscription`})]}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`option`,{value:`vehicle`,children:`Vehicle`}),(0,$.jsx)(`option`,{value:`service`,children:`Service`})]})})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Status *`}),(0,$.jsxs)(`select`,{value:y.status,onChange:e=>b({...y,status:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0,children:[(0,$.jsx)(`option`,{value:`available`,children:`Available`}),(0,$.jsx)(`option`,{value:`pending`,children:`Pending`}),(0,$.jsx)(`option`,{value:`sold`,children:`Sold`})]})]}),y.type===`vehicle`&&(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`VIN *`}),(0,$.jsx)(`input`,{type:`text`,placeholder:`17-character VIN`,value:y.metadata.vin||``,onChange:e=>k(`vin`,e.target.value),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr 1fr`,gap:`10px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Year *`}),(0,$.jsx)(`input`,{type:`number`,placeholder:`2024`,value:y.metadata.year||``,onChange:e=>k(`year`,e.target.value),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Make *`}),(0,$.jsx)(`input`,{type:`text`,placeholder:`Honda`,value:y.metadata.make||``,onChange:e=>k(`make`,e.target.value),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Model *`}),(0,$.jsx)(`input`,{type:`text`,placeholder:`Civic`,value:y.metadata.model||``,onChange:e=>k(`model`,e.target.value),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`10px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Mileage`}),(0,$.jsx)(`input`,{type:`text`,placeholder:`25,000`,value:y.metadata.mileage||``,onChange:e=>k(`mileage`,e.target.value),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`}})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Color`}),(0,$.jsx)(`input`,{type:`text`,placeholder:`Silver`,value:y.metadata.color||``,onChange:e=>k(`color`,e.target.value),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`}})]})]})]}),n&&[`consulting`,`performance_fee`,`management_fee`,`subscription`].includes(y.type)&&(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Service Name *`}),(0,$.jsx)(`input`,{type:`text`,placeholder:y.type===`consulting`?`e.g., Deal Screening & Analysis`:y.type===`performance_fee`?`e.g., Carry / Performance Fee`:y.type===`management_fee`?`e.g., Annual Management Fee`:`e.g., Monthly Research Brief`,value:y.metadata.name||``,onChange:e=>k(`name`,e.target.value),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Description`}),(0,$.jsx)(`textarea`,{placeholder:`Describe the service or fee structure...`,value:y.metadata.description||``,onChange:e=>k(`description`,e.target.value),rows:3,style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`,fontFamily:`inherit`,resize:`vertical`}})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`10px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Rate Type`}),(0,$.jsxs)(`select`,{value:y.metadata.rateType||`flat`,onChange:e=>k(`rateType`,e.target.value),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},children:[(0,$.jsx)(`option`,{value:`flat`,children:`Flat Fee`}),(0,$.jsx)(`option`,{value:`hourly`,children:`Hourly Rate`}),(0,$.jsx)(`option`,{value:`percentage`,children:`Percentage`}),(0,$.jsx)(`option`,{value:`monthly`,children:`Monthly Retainer`}),(0,$.jsx)(`option`,{value:`annual`,children:`Annual Fee`})]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Billing Frequency`}),(0,$.jsxs)(`select`,{value:y.metadata.billingFrequency||`one_time`,onChange:e=>k(`billingFrequency`,e.target.value),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},children:[(0,$.jsx)(`option`,{value:`one_time`,children:`One-time`}),(0,$.jsx)(`option`,{value:`monthly`,children:`Monthly`}),(0,$.jsx)(`option`,{value:`quarterly`,children:`Quarterly`}),(0,$.jsx)(`option`,{value:`annual`,children:`Annual`}),(0,$.jsx)(`option`,{value:`per_deal`,children:`Per Deal`})]})]})]})]}),!n&&y.type===`service`&&(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Service Name *`}),(0,$.jsx)(`input`,{type:`text`,placeholder:`e.g., Premium Oil Change`,value:y.metadata.name||``,onChange:e=>k(`name`,e.target.value),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Description`}),(0,$.jsx)(`textarea`,{placeholder:`Service description...`,value:y.metadata.description||``,onChange:e=>k(`description`,e.target.value),rows:3,style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`,fontFamily:`inherit`,resize:`vertical`}})]})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`10px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:[n?`Rate / Fee *`:`Price *`,` `,y.metadata?.rateType===`percentage`?`%`:`$`]}),(0,$.jsx)(`input`,{type:`number`,step:`0.01`,placeholder:`28500.00`,value:y.price,onChange:e=>b({...y,price:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Cost * $`}),(0,$.jsx)(`input`,{type:`number`,step:`0.01`,placeholder:`25000.00`,value:y.cost,onChange:e=>b({...y,cost:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]})]}),y.price&&y.cost&&(0,$.jsxs)(`div`,{style:{padding:`12px`,borderRadius:`12px`,background:`#f8fafc`,border:`1px solid var(--line)`},children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,fontWeight:600,marginBottom:`4px`},children:`Profit Margin`}),(0,$.jsxs)(`div`,{style:{fontSize:`18px`,fontWeight:900},children:[`$`,(parseFloat(y.price)-parseFloat(y.cost)).toFixed(2),` (`,((parseFloat(y.price)-parseFloat(y.cost))/parseFloat(y.price)*100).toFixed(1),`%)`]})]})]})})]})}var Nv=[{label:`Active Conversations`,value:`52`},{label:`Sales Conversations`,value:`24`},{label:`Service Conversations`,value:`4`},{label:`Follow-ups Pending`,value:`18`}],Pv=[{label:`Messages Sent Today`,value:`87`},{label:`Emails Sent Today`,value:`23`},{label:`Texts Sent Today`,value:`41`},{label:`Phone Calls`,value:`0`,badge:`Coming Soon`}],Fv=[{title:`Sales Activity`,accent:`#16a34a`,summary:`24 customers in active sales conversations:`,details:[`8 in active negotiation`,`6 scheduling test drives`,`10 in initial inquiry`],highlight:`Top opportunity: Maria Gonzalez -- lease expiring, $2,800 potential`},{title:`Service Activity`,accent:`#2563eb`,summary:`4 service customers in communication:`,details:[`2 appointment confirmations`,`1 recall notification`,`1 warranty follow-up`],highlight:`Next appointment: Charles Cox, 60K Major Service, Monday 8:00 AM`},{title:`Outbound Queue`,accent:`#d97706`,summary:`18 follow-ups queued:`,details:[`7 post-test-drive follow-ups (24-48hr window)`,`5 lease expiration outreach (60-day window)`,`6 service reminders (upcoming appointments)`],highlight:`Estimated value of queued outreach: $34,200`}],Iv=[{time:`6:02 AM`,action:`Sent lease offer`,context:`Maria Gonzalez -- 2024 Corolla LE`,channel:`Text`,status:`Delivered`,detail:`Personalized upgrade offer highlighting 2025 Corolla LE inventory availability. Included monthly payment comparison.`},{time:`5:45 AM`,action:`Confirmed appointment`,context:`Charles Cox -- 60K Service`,channel:`Text`,status:`Delivered`,detail:`Confirmation for Monday 8:00 AM. Included estimated cost ($449) and mention of warranty expiration -- Extra Care Gold pitch prepared.`},{time:`5:30 AM`,action:`Generated trade-in estimate`,context:`Mark Brown -- 2025 Corolla Cross`,channel:`Email`,status:`Delivered`,detail:`KBB-sourced trade estimate of $22,400. Paired with RAV4 XLE Premium offer showing positive equity of $4,200.`},{time:`5:15 AM`,action:`Drafted conquest offer`,context:`Amanda Liu -- 2025 RAV4 XLE`,channel:`Email`,status:`Queued`,detail:`TrueCar lead response with Lunar Rock RAV4 availability, competitive pricing vs Honda CR-V, and Saturday test drive invitation.`},{time:`Yesterday 4:30 PM`,action:`Sent F&I options`,context:`Robert Chen -- 2025 Camry XSE`,channel:`Email`,status:`Opened`,detail:`Menu presentation: Extended warranty options, GAP coverage, paint protection. Financing at 5.49% through Chase Auto.`},{time:`Yesterday 3:15 PM`,action:`Post-test-drive follow-up`,context:`Sandra Lee -- Highlander XLE`,channel:`Text`,status:`Delivered`,detail:`Thank-you message with lease special details. Highlighted family-friendly features discussed during test drive.`},{time:`Yesterday 2:00 PM`,action:`Service upsell pitch`,context:`Patricia Adams -- Oil Change`,channel:`In-person (prep)`,status:`Complete`,detail:`Prepared talking points for advisor: cabin air filter replacement ($45), next service interval reminder, satisfaction survey.`},{time:`Yesterday 11:30 AM`,action:`Price reduction alert`,context:`Internal -- 2021 BMW X3 (143 days)`,channel:`Dashboard`,status:`Flagged`,detail:`Recommended markdown from $34,169 to $31,999. Floor plan interest loss: $500/month. Market comp analysis attached.`},{time:`Yesterday 10:00 AM`,action:`Appointment reminder`,context:`Angela Williams -- Battery Check`,channel:`Text`,status:`Delivered`,detail:`Hybrid battery check + multi-point inspection reminder. Included trade-up suggestion for 2025 Prius Prime.`},{time:`2 days ago 9:00 AM`,action:`Inventory acquisition alert`,context:`Internal -- 3 trade-ins received`,channel:`Dashboard`,status:`Complete`,detail:`3 trade-ins processed: 2021 BMW X3 ($28,500), 2022 Civic ($19,400), 2020 Camry ($16,800). Recon estimates prepared.`},{time:`2 days ago 8:15 AM`,action:`Lease expiration batch`,context:`4 customers -- 60-day window`,channel:`Text`,status:`Delivered`,detail:`Batch outreach to Maria Gonzalez, Sandra Lee, and 2 others with leases expiring within 60 days. Personalized vehicle matches included.`},{time:`3 days ago 4:00 PM`,action:`Facebook listing generated`,context:`2025 Camry LE -- Stock N25000`,channel:`Facebook`,status:`Complete`,detail:`Marketplace listing with 12 photos, feature highlights, and competitive pricing. 70 days on lot trigger.`},{time:`3 days ago 2:30 PM`,action:`Service-to-sales flag`,context:`Angela Williams -- 2021 Prius Prime`,channel:`Dashboard`,status:`Flagged`,detail:`Vehicle 4+ years old, hybrid battery showing wear. Trade-up candidate for 2025 Prius Prime ($34,800). High equity position.`},{time:`4 days ago 9:00 AM`,action:`Post-purchase batch`,context:`12 customers -- 7-day check-in`,channel:`Email`,status:`Delivered`,detail:`Satisfaction survey + F&I product education emails sent to 12 recent buyers. 7 opened within 24 hours.`},{time:`5 days ago 3:00 PM`,action:`Inventory aging report`,context:`Internal -- 12 units over 90 days`,channel:`Dashboard`,status:`Complete`,detail:`Weekly aging report: 12 units over 90 days, estimated carrying cost $6,000/month. Price reduction recommendations for top 5.`}],Lv=[{label:`Active Research Tasks`,value:`15`},{label:`Client Communications`,value:`8`},{label:`Market Alerts Sent`,value:`12`},{label:`Models Updated`,value:`3`}],Rv=[{label:`Messages Today`,value:`34`},{label:`Emails Sent Today`,value:`11`},{label:`LinkedIn Posts`,value:`1`},{label:`Compliance Reviews`,value:`4`}],zv=[{title:`Research Activity`,accent:`#16a34a`,summary:`15 active research items:`,details:[`6 earnings analyses`,`4 sector reviews`,`3 deal evaluations`,`2 macro briefings`],highlight:`Top priority: Meridian Healthcare earnings tomorrow -- model needs updating`},{title:`Client / LP Activity`,accent:`#2563eb`,summary:`8 client communications:`,details:[`3 quarterly update drafts`,`2 meeting prep briefs`,`2 LP inquiry responses`,`1 capital call notice`],highlight:`Action needed: Blackstone LP quarterly letter due Friday`},{title:`Market Watch`,accent:`#d97706`,summary:`12 alerts sent today:`,details:[`4 price movements`,`3 news items`,`2 earnings surprises`,`2 sector shifts`,`1 macro event`],highlight:`Overnight: NovaTech beat estimates by 12%, stock up 8% pre-market`}],Bv=[{time:`6:30 AM`,action:`Generated earnings summary`,context:`NovaTech Corp -- Q4 Earnings`,channel:`Dashboard`,status:`Complete`,detail:`Revenue $2.1B (+18% YoY), EPS $1.42 vs $1.27 consensus. Raised FY guidance. Updated DCF model -- fair value now $89 vs $76 prior.`},{time:`6:15 AM`,action:`Drafted LP letter`,context:`Blackstone Partners -- Q4 Update`,channel:`Email`,status:`Queued`,detail:`Quarterly performance letter: fund +8.4% YTD, 3 new positions, 1 exit (Apex Industries, +34% realized). Pending compliance review.`},{time:`6:00 AM`,action:`Flagged price movement`,context:`Sentinel Defense -- -6.2%`,channel:`Alert`,status:`Delivered`,detail:`Portfolio position dropped 6.2% on contract delay news. Current position: 4.2% of portfolio. Stop-loss at $42 not triggered ($44.80 current).`},{time:`5:45 AM`,action:`Updated DCF model`,context:`Meridian Healthcare`,channel:`Dashboard`,status:`Complete`,detail:`Incorporated new CMS reimbursement rates effective Q2. Fair value revised from $156 to $148. Recommendation unchanged: HOLD.`},{time:`5:30 AM`,action:`Scheduled meeting prep`,context:`Atlas Capital -- Due Diligence`,channel:`Dashboard`,status:`Complete`,detail:`Prepared briefing package for Thursday meeting: company overview, financial summary, risk factors, competitive positioning, key questions.`},{time:`Yesterday 4:00 PM`,action:`Sector analysis`,context:`Healthcare IT -- Monthly Review`,channel:`Dashboard`,status:`Complete`,detail:`Sector up 4.2% MTD. Top performers: telehealth (+8%), EHR vendors (+5%). Laggards: medical devices (-2%). 3 portfolio companies in sector.`},{time:`Yesterday 2:30 PM`,action:`Compliance flag`,context:`Marketing draft -- LinkedIn post`,channel:`Dashboard`,status:`Flagged`,detail:`Flagged performance claim in draft post: 'Our fund returned 18% last year.' Requires net-of-fees disclosure and benchmark comparison per SEC rules.`},{time:`Yesterday 11:00 AM`,action:`LP inquiry response`,context:`Smith Family Office`,channel:`Email`,status:`Delivered`,detail:`Responded to capital commitment inquiry with fund overview, performance attribution, and meeting availability. Compliance reviewed.`},{time:`2 days ago 3:00 PM`,action:`Research gap alert`,context:`3 companies need updates`,channel:`Dashboard`,status:`Flagged`,detail:`Models older than 30 days: Apex Industries (42 days), ClearView Analytics (38 days), Summit Energy (35 days). Recommend refreshing before month-end.`},{time:`2 days ago 10:00 AM`,action:`Deal evaluation`,context:`TechBridge Acquisition Target`,channel:`Dashboard`,status:`Complete`,detail:`Screened potential acquisition: $45M revenue, 22% EBITDA margin, 3.2x revenue ask. Risk score: 58/100. Comparable transactions suggest 2.8x fair.`}],Vv=[{label:`Documents Stored`,value:`12`},{label:`Upcoming Deadlines`,value:`3`},{label:`Assets Tracked`,value:`5`},{label:`Last Updated`,value:`Today`}],Hv=[{title:`Upcoming Deadlines`,accent:`#d97706`,summary:`3 items need attention:`,details:[`Car registration expires Aug 2026 (6 months)`,`Passport expires Mar 2028 (24 months)`,`Homeowner's insurance renewal Nov 2026 (9 months)`],highlight:`Next deadline: Car registration -- Aug 2026`},{title:`Recent Activity`,accent:`#16a34a`,summary:`Last 7 days:`,details:[`2 documents added`,`1 market value update (RAV4: $27,500)`,`0 expired items`],highlight:`Your vault is up to date`}],Uv=[{time:`Today`,action:`Added document`,context:`2022 RAV4 -- Registration`,channel:`Vault`,status:`Complete`,detail:`Vehicle registration scanned and filed. Expiration date detected: August 2026. Reminder set for 30 days prior.`},{time:`Today`,action:`Updated value estimate`,context:`2022 RAV4 XLE`,channel:`Vault`,status:`Complete`,detail:`Market value updated to $27,500 based on current KBB and market data. Previous estimate: $28,200 (30 days ago).`},{time:`Yesterday`,action:`Added document`,context:`Homeowner's Insurance`,channel:`Vault`,status:`Complete`,detail:`Insurance declaration page filed. Coverage: $425,000 dwelling, $100K liability. Renewal date: November 2026.`},{time:`3 days ago`,action:`Sent reminder`,context:`Car Insurance -- Payment Due`,channel:`Vault`,status:`Delivered`,detail:`Monthly auto insurance payment reminder sent. Progressive policy, $142/month due on the 15th.`},{time:`5 days ago`,action:`Flagged expiration`,context:`Passport -- Expires Mar 2028`,channel:`Vault`,status:`Flagged`,detail:`Passport expires in 24 months. Some countries require 6+ months validity. Consider renewal if traveling internationally in 2027.`}],Wv=[{label:`Active Conversations`,value:`38`},{label:`Sales Leads`,value:`12`},{label:`PM Requests`,value:`9`},{label:`Showings Scheduled`,value:`6`}],Gv=[{label:`Maintenance Dispatched`,value:`4`},{label:`Messages Today`,value:`67`},{label:`Emails Sent`,value:`19`},{label:`Phone Calls`,value:`0`,badge:`Coming Soon`}],Kv=[{title:`Sales Activity`,accent:`#16a34a`,summary:`12 active sales leads:`,details:[`3 showing requests pending`,`2 offers in progress`,`4 new inquiries today`,`3 follow-ups due`],highlight:`Hot lead: Amanda Liu -- relocating, needs home by March 1`},{title:`PM Activity`,accent:`#2563eb`,summary:`9 property management items:`,details:[`3 maintenance requests open`,`2 lease renewals due this month`,`2 rent collection follow-ups`,`2 tenant inquiries`],highlight:`Overdue: Water heater replacement at Riverside 1A -- 5 days past SLA`},{title:`Market Watch`,accent:`#d97706`,summary:`Weekly market activity:`,details:[`Median price up 2.1% in 32207`,`New listing inventory down 8%`,`2 price reductions recommended`,`Average DOM: 24 days (market avg 31)`],highlight:`Price reduction needed: 3421 Beach Blvd at 45 DOM, 432 Ponte Vedra at 52 DOM`}],qv=[{time:`6:15 AM`,action:`Sent showing confirmation`,context:`Amanda Liu -- 567 Mandarin Rd`,channel:`Text`,status:`Delivered`,detail:`Confirmed showing Saturday 10 AM. Included property summary, school ratings, commute time.`},{time:`6:00 AM`,action:`Drafted price reduction`,context:`3421 Beach Blvd -- 45 DOM`,channel:`Dashboard`,status:`Flagged`,detail:`Recommended reduction from $395K to $379K based on 6 comparable sales. Agent review required.`},{time:`5:45 AM`,action:`Rent reminder sent`,context:`Kevin Williams -- Riverside 2A`,channel:`Text`,status:`Delivered`,detail:`Rent 30 days past due. Balance $1,850. Late fee $75 applied. Payment link included.`},{time:`5:30 AM`,action:`Maintenance dispatched`,context:`Riverside 1A -- Water Heater`,channel:`Email`,status:`Delivered`,detail:`Emergency work order to ABC Plumbing. Est. $1,200. Owner pre-approved up to $1,500.`},{time:`5:15 AM`,action:`Lead response`,context:`Sarah Anderson -- New Inquiry`,channel:`Email`,status:`Queued`,detail:`New Zillow lead. Budget $400-500K. Sent matches: 1247 Palm Ave, 567 Mandarin Rd.`},{time:`Yesterday 4:30 PM`,action:`CMA generated`,context:`432 Ponte Vedra Blvd`,channel:`Dashboard`,status:`Complete`,detail:`8 comps within 1 mile, median $695K. Current $725K is 4.3% above market. Recommend $699K.`},{time:`Yesterday 3:00 PM`,action:`Lease renewal drafted`,context:`James Lopez -- San Marco TH-1`,channel:`Email`,status:`Queued`,detail:`12-month renewal at $1,750 (3% increase). Market supports $1,725-1,800. Sent to owner.`},{time:`Yesterday 1:30 PM`,action:`Showing feedback collected`,context:`Robert Martinez -- 3 properties`,channel:`Text`,status:`Complete`,detail:`Rated Baymeadows 4/5, Palm Ave 3/5, University 2/5. Refining: prefers newer, 3+ beds.`},{time:`Yesterday 11:00 AM`,action:`Vacancy marketing update`,context:`Southside Flats -- Unit 3`,channel:`Dashboard`,status:`Flagged`,detail:`Unit vacant 45 days. Reduced from $1,250 to $1,150. Added to 3 sites. 2 showing requests.`},{time:`2 days ago 3:00 PM`,action:`Transaction deadline alert`,context:`1893 San Jose Blvd`,channel:`Dashboard`,status:`Flagged`,detail:`Inspection contingency expires in 3 days. Report received, 4 items flagged. Repair request ready.`},{time:`2 days ago 10:00 AM`,action:`Owner monthly report`,context:`Riverside Apartments -- January`,channel:`Email`,status:`Delivered`,detail:`Monthly: $15,400 collected of $16,200 gross. 1 vacant, 1 late. Net to owner: $11,200.`},{time:`3 days ago 2:00 PM`,action:`Fair Housing review`,context:`Listing description -- Palm Ave`,channel:`Dashboard`,status:`Complete`,detail:`Removed 'family-friendly neighborhood' (familial status). Approved version ready.`}],Jv={Delivered:{bg:`#dcfce7`,color:`#16a34a`},Opened:{bg:`#dbeafe`,color:`#2563eb`},Queued:{bg:`#fef3c7`,color:`#d97706`},Complete:{bg:`#f1f5f9`,color:`#475569`},Flagged:{bg:`#fee2e2`,color:`#dc2626`}};function Yv(){let e=localStorage.getItem(`VERTICAL`)||`auto`,t=e===`consumer`,n=e===`auto`,r=e===`analyst`,[i,a]=(0,_.useState)(null),o=e===`real-estate`,s=o?Wv:n?Nv:r?Lv:Vv,c=o?Gv:n?Pv:r?Rv:null,l=o?Kv:n?Fv:r?zv:Hv,u=o?qv:n?Iv:r?Bv:Uv;function d(e){window.dispatchEvent(new CustomEvent(`ta:chatPrompt`,{detail:{message:e}}))}return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:t?`Your Personal AI Apps`:`AI Activity`}),(0,$.jsx)(`p`,{className:`subtle`,children:t?`Each AI here is a specialist that manages a different part of your Vault`:`AI communications, automated workflows, and conversation activity`})]}),!t&&(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>d(`Show me a summary of all AI activity this week`),style:{background:`linear-gradient(135deg, #7c3aed, #6d28d9)`,color:`white`,border:`none`},children:`AI Activity Report`})]}),t?(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(auto-fill, minmax(300px, 1fr))`,gap:`12px`,marginBottom:`16px`},children:(0,$.jsxs)(`div`,{className:`card`,style:{overflow:`hidden`},children:[(0,$.jsx)(`div`,{style:{height:`80px`,background:`linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%)`,display:`flex`,alignItems:`center`,justifyContent:`center`},children:(0,$.jsx)(`svg`,{width:`36`,height:`36`,viewBox:`0 0 24 24`,fill:`none`,stroke:`#7c3aed`,strokeWidth:`1.5`,strokeLinecap:`round`,strokeLinejoin:`round`,children:(0,$.jsx)(`path`,{d:`M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z`})})}),(0,$.jsxs)(`div`,{style:{padding:`14px 16px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`,marginBottom:`6px`},children:[(0,$.jsx)(`span`,{style:{fontWeight:700,fontSize:`15px`,color:`#1e293b`},children:`AI Assistant`}),(0,$.jsx)(`span`,{style:{fontSize:`10px`,fontWeight:600,padding:`2px 8px`,borderRadius:`20px`,background:`#f0fdf4`,color:`#16a34a`},children:`Active`})]}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`,lineHeight:1.6,marginBottom:`12px`},children:`Your personal assistant that manages vehicles, properties, documents, certifications, and your entire Vault.`}),(0,$.jsx)(`button`,{onClick:()=>{let e=document.querySelector(`textarea[placeholder="Ask me anything..."]`);e&&e.focus()},style:{padding:`8px 16px`,fontSize:`13px`,fontWeight:600,background:`linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%)`,color:`white`,border:`none`,borderRadius:`8px`,cursor:`pointer`},children:`Open Chat`})]})]})}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#94a3b8`,textAlign:`center`,lineHeight:`1.6`},children:`More specialist AIs coming soon. Your conversation history will appear here as you use each tool.`})]}):(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`kpiRow`,style:{marginBottom:`12px`},children:s.map((e,t)=>(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:e.label}),(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,$.jsx)(`div`,{className:`kpiValue`,children:e.value}),e.badge&&(0,$.jsx)(`span`,{style:{fontSize:`10px`,fontWeight:600,padding:`2px 6px`,borderRadius:`4px`,background:`#f1f5f9`,color:`#94a3b8`},children:e.badge})]})]},t))}),c&&(0,$.jsx)(`div`,{className:`kpiRow`,style:{marginBottom:`20px`},children:c.map((e,t)=>(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:e.label}),(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,$.jsx)(`div`,{className:`kpiValue`,children:e.value}),e.badge&&(0,$.jsx)(`span`,{style:{fontSize:`10px`,fontWeight:600,padding:`2px 6px`,borderRadius:`4px`,background:`#f1f5f9`,color:`#94a3b8`},children:e.badge})]})]},t))}),(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:l.length===2?`1fr 1fr`:`1fr 1fr 1fr`,gap:`14px`,marginBottom:`20px`},children:l.map((e,t)=>(0,$.jsxs)(`div`,{className:`card`,style:{padding:`20px`,borderLeft:`4px solid ${e.accent}`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`15px`,color:`#1e293b`,marginBottom:`10px`},children:e.title}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#475569`,marginBottom:`8px`},children:e.summary}),(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`4px`,marginBottom:`12px`},children:e.details.map((e,t)=>(0,$.jsxs)(`div`,{style:{fontSize:`13px`,color:`#64748b`,paddingLeft:`12px`,position:`relative`},children:[(0,$.jsx)(`span`,{style:{position:`absolute`,left:0},children:`-`}),` `,e]},t))}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,fontWeight:600,color:e.accent,lineHeight:1.4},children:e.highlight})]},t))}),(0,$.jsxs)(`div`,{className:`card`,children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsx)(`div`,{className:`cardTitle`,children:`AI Action Log`})}),(0,$.jsx)(`div`,{className:`tableWrap`,children:(0,$.jsxs)(`table`,{className:`table`,style:{width:`100%`},children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{children:`Time`}),(0,$.jsx)(`th`,{children:`Action`}),(0,$.jsx)(`th`,{children:r?`Subject / Context`:`Customer / Context`}),(0,$.jsx)(`th`,{children:`Channel`}),(0,$.jsx)(`th`,{children:`Status`})]})}),(0,$.jsx)(`tbody`,{children:u.map((e,t)=>{let n=Jv[e.status]||Jv.Complete;return(0,$.jsxs)(_.Fragment,{children:[(0,$.jsxs)(`tr`,{style:{cursor:`pointer`},onClick:()=>a(i===t?null:t),children:[(0,$.jsx)(`td`,{style:{whiteSpace:`nowrap`,fontSize:`12px`,color:`#64748b`},children:e.time}),(0,$.jsx)(`td`,{className:`tdStrong`,children:e.action}),(0,$.jsx)(`td`,{style:{fontSize:`13px`},children:e.context}),(0,$.jsx)(`td`,{style:{fontSize:`12px`,color:`#64748b`},children:e.channel}),(0,$.jsx)(`td`,{children:(0,$.jsx)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:n.bg,color:n.color},children:e.status})})]}),i===t&&(0,$.jsx)(`tr`,{children:(0,$.jsx)(`td`,{colSpan:5,style:{padding:`12px 16px`,background:`#f8fafc`,fontSize:`13px`,color:`#475569`,lineHeight:1.6,borderBottom:`2px solid #e2e8f0`},children:e.detail})})]},t)})})]})})]})]})]})}var Xv=[{id:`ac-001`,name:`Maria Gonzalez`,vehicle:`2024 Corolla LE`,purchaseDate:`2024-03-15`,purchaseType:`Leased`,lastService:`2025-12-10`,visits:4,satisfaction:`Excellent`,cosInsight:`Lease expiring`,insightColor:`#dc2626`,assignedTo:{type:`ai`,name:`Alex (AI)`}},{id:`ac-002`,name:`Charles Cox`,vehicle:`2023 Tacoma TRD Sport`,purchaseDate:`2023-06-20`,purchaseType:`Financed`,lastService:`2026-01-18`,visits:9,satisfaction:`Excellent`,cosInsight:`Warranty expiring`,insightColor:`#d97706`,assignedTo:{type:`human`,name:`Jake Rivera`}},{id:`ac-003`,name:`Mark Brown`,vehicle:`2025 Corolla Cross LE`,purchaseDate:`2025-01-10`,purchaseType:`Financed`,lastService:`2026-02-05`,visits:7,satisfaction:`Excellent`,cosInsight:`Upgrade candidate`,insightColor:`#16a34a`,assignedTo:{type:`human`,name:`Lisa Chen`}},{id:`ac-004`,name:`Lawrence Foster`,vehicle:`2024 Camry SE`,purchaseDate:`2024-07-22`,purchaseType:`Financed`,lastService:`2026-02-10`,visits:3,satisfaction:`Excellent`,cosInsight:``,insightColor:``,assignedTo:{type:`human`,name:`Jake Rivera`}},{id:`ac-005`,name:`Patricia Adams`,vehicle:`2023 RAV4 XLE`,purchaseDate:`2023-09-05`,purchaseType:`Financed`,lastService:`2026-01-25`,visits:5,satisfaction:`Good`,cosInsight:``,insightColor:``,assignedTo:{type:`human`,name:`Lisa Chen`}},{id:`ac-006`,name:`James Mitchell`,vehicle:`2022 Highlander Limited`,purchaseDate:`2022-11-14`,purchaseType:`Financed`,lastService:`2025-11-30`,visits:8,satisfaction:`Good`,cosInsight:`Service overdue`,insightColor:`#d97706`,assignedTo:{type:`ai`,name:`Alex (AI)`}},{id:`ac-007`,name:`Robert Chen`,vehicle:`2025 Corolla Cross LE`,purchaseDate:`2025-02-01`,purchaseType:`Cash`,lastService:`2026-02-01`,visits:1,satisfaction:`Excellent`,cosInsight:``,insightColor:``,assignedTo:{type:`human`,name:`Jake Rivera`}},{id:`ac-008`,name:`Angela Williams`,vehicle:`2021 Prius Prime`,purchaseDate:`2021-08-18`,purchaseType:`Financed`,lastService:`2025-09-15`,visits:6,satisfaction:`Good`,cosInsight:`Service overdue`,insightColor:`#d97706`,assignedTo:{type:`ai`,name:`Alex (AI)`}},{id:`ac-009`,name:`Thomas Garcia`,vehicle:`2024 Tundra SR5`,purchaseDate:`2024-04-10`,purchaseType:`Financed`,lastService:`2026-01-20`,visits:3,satisfaction:`Excellent`,cosInsight:``,insightColor:``,assignedTo:{type:`human`,name:`Lisa Chen`}},{id:`ac-010`,name:`Diana Brooks`,vehicle:`2022 Venza Limited`,purchaseDate:`2022-12-22`,purchaseType:`Financed`,lastService:`2026-02-08`,visits:7,satisfaction:`Excellent`,cosInsight:`Upgrade candidate`,insightColor:`#16a34a`,assignedTo:{type:`ai`,name:`Alex (AI)`}},{id:`ac-011`,name:`Kevin O'Brien`,vehicle:`2024 4Runner TRD Off-Road`,purchaseDate:`2024-06-15`,purchaseType:`Financed`,lastService:`2026-01-30`,visits:4,satisfaction:`Excellent`,cosInsight:``,insightColor:``,assignedTo:{type:`human`,name:`Jake Rivera`}},{id:`ac-012`,name:`Sandra Lee`,vehicle:`2023 Camry XSE`,purchaseDate:`2023-03-28`,purchaseType:`Leased`,lastService:`2025-12-20`,visits:5,satisfaction:`Good`,cosInsight:`Lease expiring`,insightColor:`#dc2626`,assignedTo:{type:`ai`,name:`Alex (AI)`}},{id:`ac-013`,name:`Michael Wong`,vehicle:`2025 RAV4 Hybrid XLE`,purchaseDate:`2025-01-22`,purchaseType:`Financed`,lastService:`2026-02-12`,visits:2,satisfaction:`Excellent`,cosInsight:``,insightColor:``,assignedTo:{type:`human`,name:`Jake Rivera`}},{id:`ac-014`,name:`Lisa Johnson`,vehicle:`2022 Corolla LE`,purchaseDate:`2022-05-10`,purchaseType:`Financed`,lastService:`2025-08-14`,visits:4,satisfaction:`Satisfactory`,cosInsight:`At risk`,insightColor:`#dc2626`,assignedTo:{type:`ai`,name:`Alex (AI)`}},{id:`ac-015`,name:`Richard Brown`,vehicle:`2023 Tundra Limited`,purchaseDate:`2023-10-02`,purchaseType:`Cash`,lastService:`2026-01-15`,visits:6,satisfaction:`Excellent`,cosInsight:``,insightColor:``,assignedTo:{type:`human`,name:`Lisa Chen`}},{id:`ac-016`,name:`Jennifer Patel`,vehicle:`2024 Crown Platinum`,purchaseDate:`2024-08-20`,purchaseType:`Financed`,lastService:`2026-02-06`,visits:3,satisfaction:`Excellent`,cosInsight:``,insightColor:``,assignedTo:{type:`human`,name:`Jake Rivera`}},{id:`ac-017`,name:`William Davis`,vehicle:`2025 GR86 Premium`,purchaseDate:`2025-02-08`,purchaseType:`Cash`,lastService:null,visits:0,satisfaction:`New`,cosInsight:``,insightColor:``,assignedTo:{type:`human`,name:`Jake Rivera`}},{id:`ac-018`,name:`Carol Thompson`,vehicle:`2022 Highlander XLE`,purchaseDate:`2022-07-30`,purchaseType:`Financed`,lastService:`2025-10-22`,visits:5,satisfaction:`Good`,cosInsight:`Service overdue`,insightColor:`#d97706`,assignedTo:{type:`ai`,name:`Alex (AI)`}},{id:`ac-019`,name:`George Martinez`,vehicle:`2021 Tacoma SR`,purchaseDate:`2021-09-15`,purchaseType:`Financed`,lastService:`2025-11-05`,visits:8,satisfaction:`Good`,cosInsight:`Upgrade candidate`,insightColor:`#16a34a`,assignedTo:{type:`human`,name:`Lisa Chen`}},{id:`ac-020`,name:`Nancy Wilson`,vehicle:`2024 Venza XLE`,purchaseDate:`2024-02-14`,purchaseType:`Financed`,lastService:`2026-02-01`,visits:4,satisfaction:`Excellent`,cosInsight:``,insightColor:``,assignedTo:{type:`human`,name:`Lisa Chen`}}];function Zv(){let[e,t]=(0,_.useState)(``),[n,r]=(0,_.useState)(`all`);function i(e){window.dispatchEvent(new CustomEvent(`ta:chatPrompt`,{detail:{message:e}}))}let a=Xv.filter(t=>{if(e){let n=e.toLowerCase();if(!t.name.toLowerCase().includes(n)&&!t.vehicle.toLowerCase().includes(n))return!1}return!(n===`actionable`&&!t.cosInsight)}),o=Xv.filter(e=>e.cosInsight).length;return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Customers`}),(0,$.jsxs)(`p`,{className:`subtle`,children:[Xv.length,` customers -- `,o,` with AI insights`]})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>i(`Give me a customer outreach priority list. Who should I contact first and why?`),style:{background:`linear-gradient(135deg, #7c3aed, #6d28d9)`,color:`white`,border:`none`},children:`AI Outreach Plan`})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`12px`,marginBottom:`16px`},children:[(0,$.jsx)(`input`,{type:`text`,placeholder:`Search customers or vehicles...`,value:e,onChange:e=>t(e.target.value),style:{flex:1,maxWidth:`400px`,padding:`10px 16px`,borderRadius:`12px`,border:`1px solid var(--line)`,fontSize:`14px`}}),(0,$.jsxs)(`select`,{value:n,onChange:e=>r(e.target.value),style:{padding:`10px 16px`,borderRadius:`12px`,border:`1px solid var(--line)`,fontSize:`14px`},children:[(0,$.jsx)(`option`,{value:`all`,children:`All Customers`}),(0,$.jsx)(`option`,{value:`actionable`,children:`AI Insights Only`})]})]}),(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{className:`tableWrap`,children:(0,$.jsxs)(`table`,{className:`table`,style:{width:`100%`},children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{children:`Name`}),(0,$.jsx)(`th`,{children:`Vehicle`}),(0,$.jsx)(`th`,{children:`Purchase Date`}),(0,$.jsx)(`th`,{children:`Last Service`}),(0,$.jsx)(`th`,{children:`Visits`}),(0,$.jsx)(`th`,{children:`Satisfaction`}),(0,$.jsx)(`th`,{children:`Assigned To`}),(0,$.jsx)(`th`,{children:`AI Insight`})]})}),(0,$.jsx)(`tbody`,{children:a.map(e=>{let t=e.satisfaction===`Excellent`?`#16a34a`:e.satisfaction===`Good`?`#2563eb`:e.satisfaction===`Satisfactory`?`#d97706`:`#64748b`;return(0,$.jsxs)(`tr`,{style:{cursor:`pointer`},onClick:()=>i(`Tell me about ${e.name} and what we should do. They drive a ${e.vehicle}, purchased ${e.purchaseDate}, ${e.visits} service visits, satisfaction: ${e.satisfaction}.${e.cosInsight?` AI insight: `+e.cosInsight+`.`:``}`),children:[(0,$.jsx)(`td`,{className:`tdStrong`,children:e.name}),(0,$.jsx)(`td`,{children:e.vehicle}),(0,$.jsx)(`td`,{className:`tdMuted`,children:new Date(e.purchaseDate).toLocaleDateString(`en-US`,{month:`short`,year:`numeric`})}),(0,$.jsx)(`td`,{className:`tdMuted`,children:e.lastService?new Date(e.lastService).toLocaleDateString(`en-US`,{month:`short`,day:`numeric`}):`--`}),(0,$.jsx)(`td`,{style:{textAlign:`center`},children:e.visits}),(0,$.jsx)(`td`,{children:(0,$.jsx)(`span`,{style:{fontSize:`12px`,fontWeight:600,color:t},children:e.satisfaction})}),(0,$.jsx)(`td`,{children:(0,$.jsx)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:e.assignedTo?.type===`ai`?`#f3e8ff`:`#f1f5f9`,color:e.assignedTo?.type===`ai`?`#7c3aed`:`#475569`},children:e.assignedTo?.name||`--`})}),(0,$.jsx)(`td`,{children:e.cosInsight?(0,$.jsx)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`2px 10px`,borderRadius:`9999px`,background:`${e.insightColor}15`,color:e.insightColor},children:e.cosInsight}):(0,$.jsx)(`span`,{style:{color:`#cbd5e1`},children:`--`})})]},e.id)})})]})})})]})}function Qv(){if((localStorage.getItem(`VERTICAL`)||`auto`)===`auto`)return(0,$.jsx)(Zv,{});let[e,t]=(0,_.useState)([]),[n,r]=(0,_.useState)(!1),[i,a]=(0,_.useState)(``),[o,s]=(0,_.useState)(``),[c,l]=(0,_.useState)(!1),[u,d]=(0,_.useState)(null),[f,p]=(0,_.useState)(null),[m,h]=(0,_.useState)({firstName:``,lastName:``,email:``,phone:``,tags:[]}),g=`auto`;(0,_.useEffect)(()=>{v()},[]);async function v(){r(!0),a(``);try{t((await H_({vertical:g,jurisdiction:`il`})).customers||[])}catch(e){a(e?.message||String(e)),t([])}finally{r(!1)}}async function y(e){e.preventDefault(),a(``);try{u?await W_({vertical:g,jurisdiction:`il`,id:u.id,customer:m}):await U_({vertical:g,jurisdiction:`il`,customer:m}),await v(),l(!1),d(null),h({firstName:``,lastName:``,email:``,phone:``,tags:[]})}catch(e){a(e?.message||String(e))}}function b(e){d(e),h({firstName:e.firstName,lastName:e.lastName,email:e.email,phone:e.phone,tags:e.tags||[]}),l(!0)}async function x(e){if(confirm(`Are you sure you want to delete this customer?`)){a(``);try{await G_({vertical:g,jurisdiction:`il`,id:e}),f?.id===e&&p(null),await v()}catch(e){a(e?.message||String(e))}}}let S=e.filter(e=>{if(!o)return!0;let t=o.toLowerCase();return e.firstName.toLowerCase().includes(t)||e.lastName.toLowerCase().includes(t)||e.email.toLowerCase().includes(t)||e.phone.includes(t)});return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Customers`}),(0,$.jsx)(`p`,{className:`subtle`,children:`CRM and customer relationship management`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>{d(null),h({firstName:``,lastName:``,email:``,phone:``,tags:[]}),l(!0)},style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`},children:`+ Add Customer`})]}),(0,$.jsx)(`div`,{style:{marginBottom:`16px`},children:(0,$.jsx)(`input`,{type:`text`,placeholder:`Search customers by name, email, or phone...`,value:o,onChange:e=>s(e.target.value),style:{width:`100%`,maxWidth:`500px`,padding:`12px 16px`,borderRadius:`12px`,border:`1px solid var(--line)`,fontSize:`14px`}})}),i&&(0,$.jsx)(`div`,{className:`card`,style:{borderColor:`var(--danger)`},children:(0,$.jsx)(`div`,{className:`empty`,style:{color:`var(--danger)`},children:i})}),n&&(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{className:`empty`,children:`Loading customers...`})}),!n&&S.length===0&&(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{className:`empty`,children:(0,$.jsx)(`p`,{children:o?`No customers found.`:`No customers yet.`})})}),!n&&S.length>0&&(0,$.jsxs)(`div`,{className:`contentGrid`,children:[(0,$.jsxs)(`div`,{className:`card`,children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`Customer List`}),(0,$.jsxs)(`div`,{className:`cardSub`,children:[S.length,` customers`]})]})}),(0,$.jsx)(`div`,{className:`tableWrap`,children:(0,$.jsxs)(`table`,{className:`table`,children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{children:`Name`}),(0,$.jsx)(`th`,{children:`Contact`}),(0,$.jsx)(`th`,{children:`Tags`}),(0,$.jsx)(`th`,{children:`Deals`}),(0,$.jsx)(`th`,{children:`Actions`})]})}),(0,$.jsx)(`tbody`,{children:S.map(e=>(0,$.jsxs)(`tr`,{className:f?.id===e.id?`rowSelected`:``,onClick:()=>p(e),children:[(0,$.jsxs)(`td`,{className:`tdStrong`,children:[e.firstName,` `,e.lastName]}),(0,$.jsxs)(`td`,{className:`tdMuted`,children:[(0,$.jsx)(`div`,{children:e.email}),(0,$.jsx)(`div`,{style:{fontSize:`12px`},children:e.phone})]}),(0,$.jsx)(`td`,{children:e.tags&&e.tags.length>0?(0,$.jsx)(`div`,{style:{display:`flex`,gap:`4px`,flexWrap:`wrap`},children:e.tags.map((e,t)=>(0,$.jsx)(`span`,{className:`badge badge-created`,style:{fontSize:`10px`,padding:`3px 6px`},children:e},t))}):(0,$.jsx)(`span`,{className:`tdMuted`,children:`-`})}),(0,$.jsx)(`td`,{children:e.deals?.length||0}),(0,$.jsx)(`td`,{children:(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`6px`},children:[(0,$.jsx)(`button`,{className:`iconBtn`,onClick:t=>{t.stopPropagation(),b(e)},style:{padding:`6px 10px`,fontSize:`12px`},children:`Edit`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:t=>{t.stopPropagation(),x(e.id)},style:{padding:`6px 10px`,fontSize:`12px`,borderColor:`var(--danger)`,color:`var(--danger)`},children:`Delete`})]})})]},e.id))})]})})]}),f&&(0,$.jsxs)(`div`,{className:`card`,children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`Customer Details`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>p(null),"aria-label":`Close`,children:``})]}),(0,$.jsxs)(`div`,{className:`detail`,children:[(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Name`}),(0,$.jsxs)(`div`,{className:`v`,children:[f.firstName,` `,f.lastName]})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Email`}),(0,$.jsx)(`div`,{className:`v`,children:f.email})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Phone`}),(0,$.jsx)(`div`,{className:`v`,children:f.phone})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Customer Since`}),(0,$.jsx)(`div`,{className:`v`,children:new Date(f.createdAt).toLocaleDateString()})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Last Contact`}),(0,$.jsx)(`div`,{className:`v`,children:new Date(f.lastContact).toLocaleDateString()})]}),f.tags&&f.tags.length>0&&(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Tags`}),(0,$.jsx)(`div`,{className:`v`,children:f.tags.map((e,t)=>(0,$.jsx)(`span`,{className:`badge badge-created`,style:{marginRight:`4px`},children:e},t))})]}),f.notes&&(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{className:`sectionTitle`,style:{fontSize:`14px`},children:`Notes`}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,marginTop:`8px`,lineHeight:`1.6`},children:f.notes})]}),f.deals&&f.deals.length>0&&(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{className:`sectionTitle`,style:{fontSize:`14px`},children:`Deals`}),f.deals.map(e=>(0,$.jsxs)(`div`,{style:{padding:`10px`,marginTop:`8px`,borderRadius:`10px`,background:`#f8fafc`,border:`1px solid var(--line)`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,marginBottom:`4px`},children:e.item}),(0,$.jsxs)(`div`,{style:{fontSize:`13px`,color:`var(--muted)`},children:[(0,$.jsx)(`span`,{className:`badge badge-${e.status===`sold`?`completed`:e.status===`negotiating`?`processing`:`created`}`,style:{fontSize:`11px`,padding:`3px 8px`,marginRight:`8px`},children:e.status}),`$`,e.value.toLocaleString()]})]},e.id))]})]})]})]}),(0,$.jsx)(Ev,{isOpen:c,onClose:()=>{l(!1),d(null),h({firstName:``,lastName:``,email:``,phone:``,tags:[]})},title:u?`Edit Customer`:`Add New Customer`,onSubmit:y,submitLabel:u?`Update`:`Add Customer`,children:(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:[(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`10px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`First Name *`}),(0,$.jsx)(`input`,{type:`text`,placeholder:`John`,value:m.firstName,onChange:e=>h({...m,firstName:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Last Name *`}),(0,$.jsx)(`input`,{type:`text`,placeholder:`Smith`,value:m.lastName,onChange:e=>h({...m,lastName:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Email *`}),(0,$.jsx)(`input`,{type:`email`,placeholder:`john.smith@example.com`,value:m.email,onChange:e=>h({...m,email:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Phone`}),(0,$.jsx)(`input`,{type:`tel`,placeholder:`+1-555-0100`,value:m.phone,onChange:e=>h({...m,phone:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`}})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Tags (comma-separated)`}),(0,$.jsx)(`input`,{type:`text`,placeholder:`hot-lead, repeat-customer`,value:m.tags?.join(`, `)||``,onChange:e=>h({...m,tags:e.target.value.split(`,`).map(e=>e.trim()).filter(Boolean)}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`}})]})]})})]})}function $v(){let[e,t]=(0,_.useState)([]),[n,r]=(0,_.useState)([]),[i,a]=(0,_.useState)(!1),[o,s]=(0,_.useState)(``),[c,l]=(0,_.useState)(!1),[u,d]=(0,_.useState)(null),[f,p]=(0,_.useState)({customerId:``,customerName:``,datetime:``,type:`service`,duration:60,notes:``}),m=`auto`;(0,_.useEffect)(()=>{h()},[]);async function h(){a(!0),s(``);try{let[e,n]=await Promise.all([K_({vertical:m,jurisdiction:`il`}),H_({vertical:m,jurisdiction:`il`})]);t(e.appointments||[]),r(n.customers||[])}catch(e){s(e?.message||String(e)),t([]),r([])}finally{a(!1)}}async function g(e){e.preventDefault(),s(``);let t=n.find(e=>e.id===f.customerId);try{u?await J_({vertical:m,jurisdiction:`il`,id:u.id,appointment:{...f,customerName:t?.firstName+` `+t?.lastName||f.customerName}}):await q_({vertical:m,jurisdiction:`il`,appointment:{...f,customerName:t?.firstName+` `+t?.lastName||f.customerName}}),await h(),l(!1),d(null),p({customerId:``,customerName:``,datetime:``,type:`service`,duration:60,notes:``})}catch(e){s(e?.message||String(e))}}function v(e){d(e),p({customerId:e.customerId,customerName:e.customerName,datetime:e.datetime,type:e.type,duration:e.duration,notes:e.notes||``}),l(!0)}async function y(e){if(confirm(`Are you sure you want to delete this appointment?`)){s(``);try{await Y_({vertical:m,jurisdiction:`il`,id:e}),await h()}catch(e){s(e?.message||String(e))}}}async function b(e,t){s(``);try{await J_({vertical:m,jurisdiction:`il`,id:e,appointment:{status:t}}),await h()}catch(e){s(e?.message||String(e))}}let x=e.reduce((e,t)=>{let n=new Date(t.datetime).toDateString();return e[n]||(e[n]=[]),e[n].push(t),e},{}),S=Object.keys(x).sort((e,t)=>new Date(e)-new Date(t)),C={total:e.length,scheduled:e.filter(e=>e.status===`scheduled`).length,completed:e.filter(e=>e.status===`completed`).length,cancelled:e.filter(e=>e.status===`cancelled`).length};return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Appointments`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Schedule and calendar management`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>{d(null),p({customerId:``,customerName:``,datetime:``,type:`service`,duration:60,notes:``}),l(!0)},style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`},children:`+ New Appointment`})]}),(0,$.jsxs)(`div`,{className:`kpiRow`,children:[(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Total`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:C.total})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Scheduled`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:C.scheduled})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Completed`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:C.completed})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Cancelled`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:C.cancelled})]})]}),o&&(0,$.jsx)(`div`,{className:`card`,style:{borderColor:`var(--danger)`},children:(0,$.jsx)(`div`,{className:`empty`,style:{color:`var(--danger)`},children:o})}),i&&(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{className:`empty`,children:`Loading appointments...`})}),!i&&e.length===0&&(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{className:`empty`,children:(0,$.jsx)(`p`,{children:`No appointments scheduled.`})})}),!i&&e.length>0&&(0,$.jsx)(`div`,{children:S.map(e=>{let t=new Date(e),n=t.toDateString()===new Date().toDateString(),r=t<new Date&&!n;return(0,$.jsxs)(`div`,{style:{marginBottom:`24px`},children:[(0,$.jsxs)(`div`,{style:{fontSize:`18px`,fontWeight:900,marginBottom:`12px`,display:`flex`,alignItems:`center`,gap:`10px`},children:[t.toLocaleDateString(`en-US`,{weekday:`long`,month:`long`,day:`numeric`,year:`numeric`}),n&&(0,$.jsx)(`span`,{className:`badge badge-processing`,style:{fontSize:`11px`,padding:`4px 8px`},children:`Today`}),r&&(0,$.jsx)(`span`,{className:`badge`,style:{fontSize:`11px`,padding:`4px 8px`},children:`Past`})]}),(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`10px`},children:x[e].sort((e,t)=>new Date(e.datetime)-new Date(t.datetime)).map(e=>(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{style:{padding:`14px 16px`},children:(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`flex-start`,gap:`14px`},children:[(0,$.jsxs)(`div`,{style:{flex:1},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`10px`,marginBottom:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`16px`,fontWeight:900,color:`var(--accent)`},children:new Date(e.datetime).toLocaleTimeString(`en-US`,{hour:`2-digit`,minute:`2-digit`})}),(0,$.jsx)(`span`,{className:`badge badge-${e.status===`scheduled`?`processing`:e.status===`completed`?`completed`:`failed`}`,style:{fontSize:`11px`,padding:`4px 8px`},children:e.status}),(0,$.jsxs)(`span`,{className:`badge`,style:{fontSize:`11px`,padding:`4px 8px`},children:[e.duration,` min`]})]}),(0,$.jsx)(`div`,{style:{fontWeight:800,marginBottom:`4px`},children:e.customerName}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`var(--muted)`},children:e.type}),e.notes&&(0,$.jsx)(`div`,{style:{marginTop:`8px`,fontSize:`13px`,color:`var(--muted)`},children:e.notes})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`6px`},children:[e.status===`scheduled`&&(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>b(e.id,`completed`),style:{padding:`6px 10px`,fontSize:`12px`,background:`var(--accent2)`,color:`white`,borderColor:`var(--accent2)`},children:`Complete`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>b(e.id,`cancelled`),style:{padding:`6px 10px`,fontSize:`12px`,borderColor:`var(--danger)`,color:`var(--danger)`},children:`Cancel`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>v(e),style:{padding:`6px 10px`,fontSize:`12px`},children:`Edit`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>y(e.id),style:{padding:`6px 10px`,fontSize:`12px`,borderColor:`var(--danger)`,color:`var(--danger)`},children:`Delete`})]})]})})},e.id))})]},e)})}),(0,$.jsx)(Ev,{isOpen:c,onClose:()=>{l(!1),d(null),p({customerId:``,customerName:``,datetime:``,type:`service`,duration:60,notes:``})},title:u?`Edit Appointment`:`Schedule New Appointment`,onSubmit:g,submitLabel:u?`Update`:`Schedule`,children:(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Customer *`}),(0,$.jsxs)(`select`,{value:f.customerId,onChange:e=>p({...f,customerId:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0,children:[(0,$.jsx)(`option`,{value:``,children:`Select customer...`}),n.map(e=>(0,$.jsx)(`option`,{value:e.id,children:e.name},e.id))]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Date & Time *`}),(0,$.jsx)(`input`,{type:`datetime-local`,value:f.datetime,onChange:e=>p({...f,datetime:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`10px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Type *`}),(0,$.jsxs)(`select`,{value:f.type,onChange:e=>p({...f,type:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0,children:[(0,$.jsx)(`option`,{value:`service`,children:`Service`}),(0,$.jsx)(`option`,{value:`test-drive`,children:`Test Drive`}),(0,$.jsx)(`option`,{value:`financing`,children:`Financing`}),(0,$.jsx)(`option`,{value:`consultation`,children:`Consultation`})]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Duration (min) *`}),(0,$.jsx)(`input`,{type:`number`,step:`15`,value:f.duration,onChange:e=>p({...f,duration:parseInt(e.target.value)||60}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Notes`}),(0,$.jsx)(`textarea`,{placeholder:`Appointment notes...`,value:f.notes,onChange:e=>p({...f,notes:e.target.value}),rows:3,style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`,fontFamily:`inherit`,resize:`vertical`}})]})]})})]})}function ey(){let[e,t]=(0,_.useState)([]),[n,r]=(0,_.useState)(!1),[i,a]=(0,_.useState)(``),[o,s]=(0,_.useState)(``),[c,l]=(0,_.useState)(!1),[u,d]=(0,_.useState)(null),[f,p]=(0,_.useState)(null),[m,h]=(0,_.useState)({name:``,email:``,role:`sales`,permissions:[]});(0,_.useEffect)(()=>{g()},[]);async function g(){r(!0);try{t([])}finally{r(!1)}}function v(n){n.preventDefault(),t(u?e.map(e=>e.id===u.id?{...e,...m}:e):[{id:`staff-${Date.now()}`,...m,status:`active`,createdAt:new Date().toISOString(),lastLogin:null},...e]),l(!1),d(null),h({name:``,email:``,role:`sales`,permissions:[]})}function y(e){d(e),h({name:e.name,email:e.email,role:e.role,permissions:e.permissions}),l(!0)}function b(n){confirm(`Are you sure you want to remove this staff member?`)&&(t(e.filter(e=>e.id!==n)),f?.id===n&&p(null))}function x(n){t(e.map(e=>e.id===n?{...e,status:e.status===`active`?`inactive`:`active`}:e))}let S=e.filter(e=>{if(!o)return!0;let t=o.toLowerCase();return e.name.toLowerCase().includes(t)||e.email.toLowerCase().includes(t)||e.role.toLowerCase().includes(t)}),C=[{value:`manager`,label:`Manager`},{value:`sales`,label:`Sales Representative`},{value:`service`,label:`Service Technician`},{value:`admin`,label:`Administrator`}],w=[{value:`customers.read`,label:`View Customers`},{value:`customers.write`,label:`Edit Customers`},{value:`inventory.read`,label:`View Inventory`},{value:`inventory.write`,label:`Edit Inventory`},{value:`appointments.read`,label:`View Appointments`},{value:`appointments.write`,label:`Edit Appointments`},{value:`reports.read`,label:`View Reports`},{value:`settings.write`,label:`Edit Settings`}];return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Staff`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Team member management and permissions`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>{d(null),h({name:``,email:``,role:`sales`,permissions:[]}),l(!0)},style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`},children:`+ Add Staff`})]}),(0,$.jsx)(`div`,{style:{marginBottom:`16px`},children:(0,$.jsx)(`input`,{type:`text`,placeholder:`Search staff by name, email, or role...`,value:o,onChange:e=>s(e.target.value),style:{width:`100%`,maxWidth:`500px`,padding:`12px 16px`,borderRadius:`12px`,border:`1px solid var(--line)`,fontSize:`14px`}})}),i&&(0,$.jsx)(`div`,{className:`card`,style:{borderColor:`var(--danger)`},children:(0,$.jsx)(`div`,{className:`empty`,style:{color:`var(--danger)`},children:i})}),n&&(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{className:`empty`,children:`Loading staff members...`})}),(0,$.jsx)(`div`,{className:`card`,style:{marginBottom:`16px`,padding:`16px 20px`},children:(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,justifyContent:`space-between`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`},children:[(0,$.jsx)(`div`,{style:{width:`40px`,height:`40px`,borderRadius:`50%`,background:`#7c3aed`,display:`flex`,alignItems:`center`,justifyContent:`center`,color:`white`,fontWeight:700,fontSize:`14px`},children:`AI`}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600,fontSize:`15px`},children:(()=>{try{return JSON.parse(localStorage.getItem(`COS_CONFIG`)||`{}`).name}catch{return null}})()||`Fred`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`},children:`AI Assistant  AI Team Member`})]})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`,alignItems:`center`},children:[(0,$.jsx)(`span`,{style:{padding:`2px 10px`,background:`#ede9fe`,color:`#7c3aed`,borderRadius:`20px`,fontSize:`12px`,fontWeight:600},children:`AI`}),(0,$.jsx)(`span`,{style:{padding:`2px 10px`,background:`#dcfce7`,color:`#16a34a`,borderRadius:`20px`,fontSize:`12px`,fontWeight:600},children:`Active`})]})]})}),!n&&S.length===0&&!o&&(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsxs)(`div`,{className:`empty`,style:{padding:`40px 20px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`16px`,fontWeight:600,marginBottom:`8px`},children:`No additional team members`}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`var(--textMuted)`,marginBottom:`16px`},children:`Add staff members to manage permissions and track team activity.`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>{d(null),h({name:``,email:``,role:`sales`,permissions:[]}),l(!0)},style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`},children:`+ Add Team Member`})]})}),!n&&S.length===0&&o&&(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{className:`empty`,children:(0,$.jsx)(`p`,{children:`No staff members match your search.`})})}),!n&&S.length>0&&(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`2fr 1fr`,gap:`16px`},children:[(0,$.jsxs)(`div`,{className:`card`,children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{className:`cardTitle`,children:[`Team Members (`,S.length,`)`]})}),(0,$.jsx)(`div`,{className:`tableWrap`,children:(0,$.jsxs)(`table`,{className:`table`,children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{children:`Name`}),(0,$.jsx)(`th`,{children:`Role`}),(0,$.jsx)(`th`,{children:`Status`}),(0,$.jsx)(`th`,{children:`Last Login`}),(0,$.jsx)(`th`,{children:`Actions`})]})}),(0,$.jsx)(`tbody`,{children:S.map(e=>(0,$.jsxs)(`tr`,{style:{cursor:`pointer`,backgroundColor:f?.id===e.id?`#f8fafc`:`transparent`},onClick:()=>p(e),children:[(0,$.jsxs)(`td`,{children:[(0,$.jsx)(`div`,{className:`tdStrong`,children:e.name}),(0,$.jsx)(`div`,{className:`tdMuted`,children:e.email})]}),(0,$.jsx)(`td`,{children:C.find(t=>t.value===e.role)?.label}),(0,$.jsx)(`td`,{children:e.status===`active`?(0,$.jsx)(`span`,{className:`badge badge-completed`,children:`Active`}):(0,$.jsx)(`span`,{className:`badge`,children:`Inactive`})}),(0,$.jsx)(`td`,{className:`tdMuted`,children:e.lastLogin?new Date(e.lastLogin).toLocaleString():`Never`}),(0,$.jsx)(`td`,{children:(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`6px`},children:[(0,$.jsx)(`button`,{className:`iconBtn`,onClick:t=>{t.stopPropagation(),y(e)},children:`Edit`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:t=>{t.stopPropagation(),x(e.id)},children:e.status===`active`?`Deactivate`:`Activate`})]})})]},e.id))})]})})]}),f&&(0,$.jsxs)(`div`,{className:`card`,children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:f.name}),(0,$.jsx)(`div`,{className:`cardSub`,children:f.email})]})}),(0,$.jsxs)(`div`,{className:`detail`,children:[(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Role`}),(0,$.jsx)(`div`,{className:`v`,children:C.find(e=>e.value===f.role)?.label})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Status`}),(0,$.jsx)(`div`,{className:`v`,children:f.status===`active`?(0,$.jsx)(`span`,{className:`badge badge-completed`,children:`Active`}):(0,$.jsx)(`span`,{className:`badge`,children:`Inactive`})})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Member Since`}),(0,$.jsx)(`div`,{className:`v`,children:new Date(f.createdAt).toLocaleDateString()})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Last Login`}),(0,$.jsx)(`div`,{className:`v`,children:f.lastLogin?new Date(f.lastLogin).toLocaleString():`Never`})]})]}),(0,$.jsxs)(`div`,{style:{padding:`16px`,borderTop:`1px solid var(--line)`},children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`12px`},children:`Permissions`}),(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`6px`},children:f.permissions.includes(`all`)?(0,$.jsx)(`span`,{className:`badge badge-completed`,children:`Full Access`}):f.permissions.length>0?f.permissions.map(e=>(0,$.jsx)(`span`,{className:`badge`,children:w.find(t=>t.value===e)?.label||e},e)):(0,$.jsx)(`span`,{className:`tdMuted`,children:`No permissions assigned`})})]}),(0,$.jsx)(`div`,{style:{padding:`16px`,borderTop:`1px solid var(--line)`},children:(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>b(f.id),style:{width:`100%`,color:`var(--danger)`},children:`Remove Staff Member`})})]})]}),(0,$.jsx)(Ev,{isOpen:c,onClose:()=>{l(!1),d(null)},title:u?`Edit Staff Member`:`Add Staff Member`,onSubmit:v,submitLabel:u?`Save Changes`:`Add Staff Member`,children:(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Full Name *`}),(0,$.jsx)(`input`,{type:`text`,value:m.name,onChange:e=>h({...m,name:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Email *`}),(0,$.jsx)(`input`,{type:`email`,value:m.email,onChange:e=>h({...m,email:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Role *`}),(0,$.jsx)(`select`,{value:m.role,onChange:e=>h({...m,role:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},required:!0,children:C.map(e=>(0,$.jsx)(`option`,{value:e.value,children:e.label},e.value))})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Permissions`}),(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`8px`},children:w.map(e=>(0,$.jsxs)(`label`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,$.jsx)(`input`,{type:`checkbox`,checked:m.permissions.includes(e.value),onChange:t=>{t.target.checked?h({...m,permissions:[...m.permissions,e.value]}):h({...m,permissions:m.permissions.filter(t=>t!==e.value)})}}),(0,$.jsx)(`span`,{children:e.label})]},e.value))})]})]})})]})}var ty=[{week:`Week 1`,sales:287400,units:11},{week:`Week 2`,sales:318600,units:12},{week:`Week 3`,sales:265200,units:10},{week:`Week 4`,sales:376600,units:14}],ny=[{id:1,time:`2h ago`,text:`AI identified lease expiration upsell -- Maria Gonzalez, 2024 Corolla LE. Potential: $2,800`,color:`#7c3aed`},{id:2,time:`5h ago`,text:`Jake Rivera closed deal -- Robert Chen, 2025 Camry XSE, $32,800`,color:`#16a34a`},{id:3,time:`8h ago`,text:`AI sent service reminder -- Charles Cox, 60K Major Service`,color:`#7c3aed`},{id:4,time:`1d ago`,text:`Trade-in appraisal completed -- 2021 BMW X3 xDrive30i, $28,500`,color:`#d97706`},{id:5,time:`1d ago`,text:`AI drafted conquest offer -- Amanda Liu, 2025 RAV4 XLE`,color:`#7c3aed`},{id:6,time:`2d ago`,text:`Lisa Chen moved Mark Brown to Negotiation -- 2025 RAV4 XLE, $37,500`,color:`#2563eb`},{id:7,time:`2d ago`,text:`AI scheduled test drive -- Sandra Lee, 2025 Highlander XLE`,color:`#7c3aed`},{id:8,time:`3d ago`,text:`Service-to-sales flag -- Angela Williams, 2021 Prius Prime, hybrid battery aging`,color:`#dc2626`},{id:9,time:`4d ago`,text:`AI sent post-purchase follow-up -- 12 customers, 7-day check-in`,color:`#7c3aed`},{id:10,time:`5d ago`,text:`Inventory alert -- 2021 BMW X3 hit 143 days on lot, recommend price reduction`,color:`#dc2626`}],ry=[{source:`Walk-In`,sales:12,revenue:318600},{source:`Google Ads`,sales:10,revenue:265500},{source:`Meta (FB/IG)`,sales:8,revenue:212400},{source:`TrueCar`,sales:5,revenue:132700},{source:`AutoTrader`,sales:4,revenue:106200},{source:`Cars.com`,sales:3,revenue:79600},{source:`CarGurus`,sales:2,revenue:53100},{source:`Referral`,sales:2,revenue:53100},{source:`Direct Mail`,sales:1,revenue:26600}],iy=[{week:`Week 1`,value:412e5,pctChange:1.2},{week:`Week 2`,value:421e5,pctChange:2.2},{week:`Week 3`,value:418e5,pctChange:-.7},{week:`Week 4`,value:428e5,pctChange:2.4}],ay=[{id:1,time:`1h ago`,text:`NovaTech Corp Q4 earnings beat -- EPS $1.42 vs $1.27 consensus (+12%)`,color:`#16a34a`},{id:2,time:`3h ago`,text:`Sentinel Defense dropped 6.2% on contract delay -- position at 4.2% of portfolio`,color:`#dc2626`},{id:3,time:`5h ago`,text:`DCF model updated for Meridian Healthcare -- fair value revised to $148 from $156`,color:`#7c3aed`},{id:4,time:`8h ago`,text:`LP quarterly letter drafted for Blackstone Partners -- pending compliance review`,color:`#2563eb`},{id:5,time:`1d ago`,text:`Healthcare IT sector up 4.2% MTD -- 3 portfolio companies in sector`,color:`#16a34a`},{id:6,time:`1d ago`,text:`TechBridge acquisition target screened -- $45M revenue, risk score 58/100`,color:`#d97706`},{id:7,time:`2d ago`,text:`Compliance flagged LinkedIn post -- performance claim needs net-of-fees disclosure`,color:`#dc2626`},{id:8,time:`2d ago`,text:`Research gap: 3 company models older than 30 days need updating`,color:`#d97706`},{id:9,time:`3d ago`,text:`Smith Family Office LP inquiry responded -- meeting scheduled for next week`,color:`#7c3aed`},{id:10,time:`4d ago`,text:`Monthly portfolio risk report generated -- VaR within acceptable range`,color:`#16a34a`}],oy=[{sector:`Technology`,pctReturn:12.3,value:1284e4},{sector:`Healthcare`,pctReturn:6.1,value:856e4},{sector:`Industrials`,pctReturn:4.8,value:642e4},{sector:`Financial Services`,pctReturn:3.2,value:514e4},{sector:`Energy`,pctReturn:-2.4,value:428e4},{sector:`Consumer`,pctReturn:1.7,value:321e4},{sector:`Real Estate`,pctReturn:-.8,value:235e4}],sy=[{id:1,time:`Today`,text:`Vehicle registration scanned -- 2022 RAV4 XLE, expires Aug 2026`,color:`#7c3aed`},{id:2,time:`Today`,text:`Market value updated -- 2022 RAV4 XLE now $27,500 (was $28,200)`,color:`#d97706`},{id:3,time:`Yesterday`,text:`Homeowner's insurance filed -- $425K dwelling coverage, renews Nov 2026`,color:`#16a34a`},{id:4,time:`3 days ago`,text:`Auto insurance payment reminder sent -- $142/month due on the 15th`,color:`#2563eb`},{id:5,time:`5 days ago`,text:`Passport expiration flagged -- expires Mar 2028, 24 months remaining`,color:`#dc2626`}],cy=[{category:`Property`,value:425e3,count:1},{category:`Vehicles`,value:54e3,count:2},{category:`Financial Accounts`,value:38e3,count:3},{category:`Documents`,value:0,count:6}],ly=[{week:`Week 1`,commission:8500,deals:1},{week:`Week 2`,commission:14200,deals:2},{week:`Week 3`,commission:0,deals:0},{week:`Week 4`,commission:12800,deals:1}],uy=[{id:1,time:`2h ago`,text:`AI confirmed showing -- Amanda Liu, 567 Mandarin Rd, Saturday 10 AM`,color:`#7c3aed`},{id:2,time:`5h ago`,text:`Price reduction recommended -- 3421 Beach Blvd, 45 DOM, suggest $379K`,color:`#dc2626`},{id:3,time:`8h ago`,text:`Lease renewal drafted -- James Lopez, San Marco TH-1, $1,750/mo (+3%)`,color:`#2563eb`},{id:4,time:`1d ago`,text:`Rent reminder sent -- Kevin Williams, 30 days past due, $1,850 balance`,color:`#d97706`},{id:5,time:`1d ago`,text:`Emergency maintenance dispatched -- Riverside 1A water heater, ABC Plumbing`,color:`#dc2626`},{id:6,time:`2d ago`,text:`CMA generated -- 432 Ponte Vedra Blvd, market suggests $695K vs listed $725K`,color:`#7c3aed`},{id:7,time:`2d ago`,text:`New lead -- Sarah Anderson, $400-500K budget, Zillow inquiry`,color:`#16a34a`},{id:8,time:`3d ago`,text:`Transaction alert -- 1893 San Jose Blvd inspection contingency expires in 3 days`,color:`#d97706`},{id:9,time:`3d ago`,text:`Vacancy marketing -- Southside Flats Unit 3, 45 days vacant, rent reduced to $1,150`,color:`#dc2626`},{id:10,time:`4d ago`,text:`Owner report sent -- Riverside Apartments January, net to owner $11,200`,color:`#16a34a`}],dy=[{category:`Listing Commissions`,count:4,revenue:18200},{category:`Buyer Commissions`,count:4,revenue:17300},{category:`PM Management Fees`,count:28,revenue:3740},{category:`Leasing Fees`,count:2,revenue:700},{category:`Referral Income`,count:1,revenue:1500}],fy=[{month:`Nov`,collected:35200,expected:37400},{month:`Dec`,collected:36800,expected:37400},{month:`Jan`,collected:36100,expected:37400},{month:`Feb`,collected:34600,expected:37400}],py=[{property:`Riverside Apartments`,revenue:16200,expenses:4800,noi:11400},{property:`San Marco Townhomes`,revenue:10200,expenses:2100,noi:8100},{property:`Beach Cottages`,revenue:5100,expenses:1800,noi:3300},{property:`Mandarin Duplex`,revenue:3500,expenses:800,noi:2700},{property:`Southside Flats`,revenue:2400,expenses:1200,noi:1200}],my=[{id:1,time:`Today`,text:`Rent collected -- 22 of 24 tenants paid for February`,color:`#16a34a`},{id:2,time:`Today`,text:`Maintenance completed -- HVAC filter change, Beach Cottages C`,color:`#16a34a`},{id:3,time:`Yesterday`,text:`Lease renewal sent -- James Lopez, San Marco TH-1, $1,700/mo proposed`,color:`#2563eb`},{id:4,time:`2d ago`,text:`Late rent notice -- Kevin Williams, Riverside 2A, 30 days past due`,color:`#dc2626`},{id:5,time:`3d ago`,text:`Vacancy marketing -- Southside Flats Unit 3 posted to Zillow, Apartments.com`,color:`#d97706`},{id:6,time:`4d ago`,text:`Owner report generated -- Riverside Apartments January, net $11,200`,color:`#7c3aed`},{id:7,time:`5d ago`,text:`Move-in scheduled -- Sarah Chen, Beach Cottage D, Feb 28`,color:`#16a34a`},{id:8,time:`6d ago`,text:`Maintenance dispatched -- Water heater, Riverside 1A, ABC Plumbing`,color:`#dc2626`}],hy=[{category:`Management Fees (10%)`,count:28,revenue:3740},{category:`Lease Placement Fees`,count:2,revenue:1450},{category:`Late Fees Collected`,count:1,revenue:75},{category:`Maintenance Markup`,count:7,revenue:460},{category:`Application Fees`,count:3,revenue:150}];function gy(){let[e,t]=(0,_.useState)(`30days`),[n,r]=(0,_.useState)({deals:0,avgRisk:0,sessions:0,reports:0,recentDeals:[]}),[i,a]=(0,_.useState)(!0),[o,s]=(0,_.useState)(`combined`),c=localStorage.getItem(`VERTICAL`)||`auto`,l=localStorage.getItem(`JURISDICTION`)||`IL`,u=c===`auto`,d=c===`analyst`,f=c===`consumer`,p=c===`real-estate`;(0,_.useEffect)(()=>{m()},[e]);async function m(){a(!0);try{if(c===`analyst`){let e=(await tv({vertical:c,jurisdiction:l})).deals||[],t=e.filter(e=>e.analysis?.riskScore),n=t.length>0?Math.round(t.reduce((e,t)=>e+t.analysis.riskScore,0)/t.length):0,i=((await X_({vertical:c,jurisdiction:l,limit:100})).activity||[]).length;r({deals:e.length,avgRisk:n,sessions:i,reports:e.length,recentDeals:e.slice(0,5)})}else{let e=((await X_({vertical:c,jurisdiction:l,limit:100})).activity||[]).length;r(t=>({...t,sessions:e}))}}catch(e){console.error(`Failed to load report data:`,e)}finally{a(!1)}}function h(){return d?[{label:`Portfolio Value`,value:`$42.8M`},{label:`Active Positions`,value:`23`},{label:`YTD Return`,value:`+8.4%`},{label:`Research Output`,value:`15 memos`}]:f?[{label:`Total Assets Tracked`,value:`5`},{label:`Total Documents`,value:`12`},{label:`Estimated Net Worth`,value:`$382,000`},{label:`Upcoming Deadlines`,value:`3`}]:p?o===`pm`?[{label:`Monthly Rent Revenue`,value:`$34,600`},{label:`Occupancy Rate`,value:`85.7%`},{label:`Delinquency Rate`,value:`3.6%`},{label:`Total NOI`,value:`$26,700`}]:o===`sales`?[{label:`Commission YTD`,value:`$127,500`},{label:`Deals Closed`,value:`8`},{label:`Avg Sale Price`,value:`$412K`},{label:`Pipeline Value`,value:`$1.2M`}]:[{label:`Commission YTD`,value:`$127,500`},{label:`Deals Closed`,value:`8`},{label:`Monthly PM Revenue`,value:`$3,740`},{label:`Occupancy Rate`,value:`85.7%`}]:u?[{label:`Total Revenue`,value:`$1,247,800`},{label:`Total Sales`,value:`47`},{label:`Active Customers`,value:`152`},{label:`Avg Deal Size`,value:`$26,549`}]:[{label:`Total Revenue`,value:`--`},{label:`Total Sales`,value:`--`},{label:`Active Customers`,value:`--`},{label:`Avg Deal Size`,value:`--`}]}let g=p?ly:u?ty:d?iy:null,v=p?o===`pm`?my:o===`sales`?uy:[...uy,...my].sort((e,t)=>e.id-t.id).slice(0,10):u?ny:d?ay:sy,y=p?o===`pm`?hy:dy:u?ry:d?oy:cy;function b(){let t=h(),n=[[`TitleApp AI -- Monthly Report`],[`Date Range`,e],[`Vertical`,c],[``],[`KPI`,`Value`],...t.map(e=>[e.label,e.value]),[``],[`Recent Activity`],[`Time`,`Event`],...v.map(e=>[e.time,e.text])].map(e=>e.map(e=>`"${String(e).replace(/"/g,`""`)}"`).join(`,`)).join(`
`),r=new Blob([n],{type:`text/csv;charset=utf-8;`}),i=URL.createObjectURL(r),a=document.createElement(`a`);a.href=i,a.download=`titleapp-report-${new Date().toISOString().split(`T`)[0]}.csv`,a.click(),URL.revokeObjectURL(i)}function x(){let e=window.open(``,`_blank`),t=h();e.document.write(`<html><head><title>TitleApp AI Report</title><style>
      body{font-family:system-ui,sans-serif;padding:40px;color:#1e293b}
      h1{font-size:24px;margin-bottom:4px}
      h2{font-size:18px;margin-top:24px;margin-bottom:8px;color:#475569}
      .sub{color:#64748b;font-size:14px;margin-bottom:24px}
      table{border-collapse:collapse;width:100%;margin-bottom:16px}
      th,td{text-align:left;padding:8px 12px;border-bottom:1px solid #e2e8f0;font-size:13px}
      th{font-weight:700;background:#f8fafc}
      .kpis{display:flex;gap:16px;margin-bottom:24px}
      .kpi{flex:1;padding:16px;border:1px solid #e2e8f0;border-radius:8px;text-align:center}
      .kpi-label{font-size:12px;color:#64748b;text-transform:uppercase}
      .kpi-value{font-size:24px;font-weight:800;margin-top:4px}
      @media print{body{padding:20px}}
    </style></head><body>`),e.document.write(`<h1>TitleApp AI -- ${f?`Vault`:`Business`} Report</h1><div class="sub">Generated ${new Date().toLocaleDateString()}</div>`),e.document.write(`<div class="kpis">${t.map(e=>`<div class="kpi"><div class="kpi-label">${e.label}</div><div class="kpi-value">${e.value}</div></div>`).join(``)}</div>`),e.document.write(`<h2>Recent Activity</h2><table><tr><th>Time</th><th>Event</th></tr>${v.map(e=>`<tr><td>${e.time}</td><td>${e.text}</td></tr>`).join(``)}</table>`),e.document.write(`</body></html>`),e.document.close(),setTimeout(()=>e.print(),300)}function S(){let t=h(),n=[[`TitleApp AI -- Monthly Report`],[`Date Range`,e],[``],[`KPI`,`Value`],...t.map(e=>[e.label,e.value]),[``],[`Recent Activity`],[`Time`,`Event`],...v.map(e=>[e.time,e.text])].map(e=>e.map(e=>`"${String(e).replace(/"/g,`""`)}"`).join(`	`)).join(`
`),r=new Blob([n],{type:`application/vnd.ms-excel`}),i=URL.createObjectURL(r),a=document.createElement(`a`);a.href=i,a.download=`titleapp-report-${new Date().toISOString().split(`T`)[0]}.xlsx`,a.click(),URL.revokeObjectURL(i)}let C=h();return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Reports`}),(0,$.jsx)(`p`,{className:`subtle`,children:f?`Vault analytics and asset tracking`:`Business analytics and performance metrics`})]}),(0,$.jsxs)(`select`,{value:e,onChange:e=>t(e.target.value),style:{padding:`10px 16px`,borderRadius:`12px`,border:`1px solid var(--line)`},children:[(0,$.jsx)(`option`,{value:`7days`,children:`Last 7 Days`}),(0,$.jsx)(`option`,{value:`30days`,children:`Last 30 Days`}),(0,$.jsx)(`option`,{value:`90days`,children:`Last 90 Days`}),(0,$.jsx)(`option`,{value:`year`,children:`This Year`})]})]}),(0,$.jsx)(`div`,{className:`kpiRow`,children:C.map((e,t)=>(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:e.label}),(0,$.jsx)(`div`,{className:`kpiValue`,style:{color:e.value===`--`?`var(--textMuted)`:void 0},children:i?`...`:e.value})]},t))}),p&&(0,$.jsx)(`div`,{style:{display:`flex`,gap:`4px`,marginBottom:`16px`,marginTop:`16px`},children:[`combined`,`sales`,`pm`].map(e=>(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>s(e),style:{background:o===e?`#1e293b`:`#f1f5f9`,color:o===e?`white`:`#475569`,border:`none`,fontSize:`12px`,padding:`6px 14px`},children:e===`combined`?`Combined`:e===`sales`?`Sales`:`Property Management`},e))}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`2fr 1fr`,gap:`16px`},children:[(0,$.jsxs)(`div`,{className:`card`,children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsx)(`div`,{className:`cardTitle`,children:p?o===`pm`?`Rent Collection Trend`:o===`sales`?`Commission Trend`:`Performance Overview`:d?`Portfolio Performance`:f?`Asset Summary`:`Revenue Trend`})}),u&&g?(0,$.jsx)(`div`,{style:{padding:`16px`},children:(0,$.jsx)(`div`,{style:{display:`flex`,gap:`16px`,alignItems:`flex-end`,height:`180px`,padding:`0 8px`},children:g.map((e,t)=>{let n=Math.max(...g.map(e=>e.sales));return(0,$.jsxs)(`div`,{style:{flex:1,display:`flex`,flexDirection:`column`,alignItems:`center`,gap:`4px`,height:`100%`,justifyContent:`flex-end`},children:[(0,$.jsxs)(`div`,{style:{fontSize:`11px`,fontWeight:600,color:`#1e293b`},children:[`$`,(e.sales/1e3).toFixed(0),`K`]}),(0,$.jsxs)(`div`,{style:{fontSize:`10px`,color:`#64748b`},children:[e.units,` units`]}),(0,$.jsx)(`div`,{style:{width:`100%`,background:`#7c3aed`,borderRadius:`4px 4px 0 0`,height:`${e.sales/n*130}px`,minHeight:`20px`}}),(0,$.jsx)(`div`,{style:{fontSize:`11px`,color:`#64748b`,marginTop:`4px`},children:e.week})]},t)})})}):d?(0,$.jsx)(`div`,{style:{padding:`16px`},children:(0,$.jsx)(`div`,{style:{display:`flex`,gap:`16px`,alignItems:`flex-end`,height:`180px`,padding:`0 8px`},children:iy.map((e,t)=>{let n=Math.max(...iy.map(e=>e.value)),r=Math.min(...iy.map(e=>e.value)),i=n-r||1;return(0,$.jsxs)(`div`,{style:{flex:1,display:`flex`,flexDirection:`column`,alignItems:`center`,gap:`4px`,height:`100%`,justifyContent:`flex-end`},children:[(0,$.jsxs)(`div`,{style:{fontSize:`11px`,fontWeight:600,color:`#1e293b`},children:[`$`,(e.value/1e6).toFixed(1),`M`]}),(0,$.jsxs)(`div`,{style:{fontSize:`10px`,color:e.pctChange>=0?`#16a34a`:`#dc2626`},children:[e.pctChange>=0?`+`:``,e.pctChange,`%`]}),(0,$.jsx)(`div`,{style:{width:`100%`,background:e.pctChange>=0?`#16a34a`:`#dc2626`,borderRadius:`4px 4px 0 0`,height:`${40+(e.value-r)/i*100}px`,minHeight:`20px`}}),(0,$.jsx)(`div`,{style:{fontSize:`11px`,color:`#64748b`,marginTop:`4px`},children:e.week})]},t)})})}):p&&o===`pm`?(0,$.jsxs)(`div`,{style:{padding:`16px`},children:[(0,$.jsx)(`div`,{style:{display:`flex`,gap:`16px`,alignItems:`flex-end`,height:`180px`,padding:`0 8px`},children:fy.map((e,t)=>{let n=Math.max(...fy.map(e=>e.expected));return(0,$.jsxs)(`div`,{style:{flex:1,display:`flex`,flexDirection:`column`,alignItems:`center`,gap:`4px`,height:`100%`,justifyContent:`flex-end`},children:[(0,$.jsxs)(`div`,{style:{fontSize:`11px`,fontWeight:600,color:e.collected>=e.expected?`#16a34a`:`#d97706`},children:[`$`,(e.collected/1e3).toFixed(1),`K`]}),(0,$.jsxs)(`div`,{style:{width:`100%`,position:`relative`},children:[(0,$.jsx)(`div`,{style:{width:`100%`,height:`${e.expected/n*130}px`,background:`#f1f5f9`,borderRadius:`4px 4px 0 0`,position:`absolute`,bottom:0}}),(0,$.jsx)(`div`,{style:{width:`100%`,height:`${e.collected/n*130}px`,background:e.collected>=e.expected?`#16a34a`:`#d97706`,borderRadius:`4px 4px 0 0`,position:`relative`,zIndex:1,minHeight:`20px`}})]}),(0,$.jsx)(`div`,{style:{fontSize:`11px`,color:`#64748b`,marginTop:`4px`},children:e.month})]},t)})}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`16px`,justifyContent:`center`,marginTop:`12px`,fontSize:`12px`,color:`#64748b`},children:[(0,$.jsxs)(`span`,{style:{display:`flex`,alignItems:`center`,gap:`4px`},children:[(0,$.jsx)(`span`,{style:{width:`10px`,height:`10px`,background:`#16a34a`,borderRadius:`2px`,display:`inline-block`}}),` Collected`]}),(0,$.jsxs)(`span`,{style:{display:`flex`,alignItems:`center`,gap:`4px`},children:[(0,$.jsx)(`span`,{style:{width:`10px`,height:`10px`,background:`#f1f5f9`,borderRadius:`2px`,display:`inline-block`,border:`1px solid #e2e8f0`}}),` Expected`]})]})]}):p&&o===`sales`&&g?(0,$.jsx)(`div`,{style:{padding:`16px`},children:(0,$.jsx)(`div`,{style:{display:`flex`,gap:`16px`,alignItems:`flex-end`,height:`180px`,padding:`0 8px`},children:g.map((e,t)=>{let n=Math.max(...g.map(e=>e.commission));return(0,$.jsxs)(`div`,{style:{flex:1,display:`flex`,flexDirection:`column`,alignItems:`center`,gap:`4px`,height:`100%`,justifyContent:`flex-end`},children:[(0,$.jsxs)(`div`,{style:{fontSize:`11px`,fontWeight:600,color:`#1e293b`},children:[`$`,(e.commission/1e3).toFixed(1),`K`]}),(0,$.jsxs)(`div`,{style:{fontSize:`10px`,color:`#64748b`},children:[e.deals,` deal`,e.deals===1?``:`s`]}),(0,$.jsx)(`div`,{style:{width:`100%`,background:`#16a34a`,borderRadius:`4px 4px 0 0`,height:`${n>0?e.commission/n*130:0}px`,minHeight:e.commission>0?`20px`:`4px`}}),(0,$.jsx)(`div`,{style:{fontSize:`11px`,color:`#64748b`,marginTop:`4px`},children:e.week})]},t)})})}):p&&o===`combined`&&g?(0,$.jsx)(`div`,{style:{padding:`16px`},children:(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`16px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:`12px`,fontWeight:600,color:`#64748b`,marginBottom:`8px`,textTransform:`uppercase`},children:`Commission Trend`}),(0,$.jsx)(`div`,{style:{display:`flex`,gap:`8px`,alignItems:`flex-end`,height:`140px`},children:g.map((e,t)=>{let n=Math.max(...g.map(e=>e.commission));return(0,$.jsxs)(`div`,{style:{flex:1,display:`flex`,flexDirection:`column`,alignItems:`center`,gap:`2px`,height:`100%`,justifyContent:`flex-end`},children:[(0,$.jsxs)(`div`,{style:{fontSize:`10px`,fontWeight:600,color:`#1e293b`},children:[`$`,(e.commission/1e3).toFixed(1),`K`]}),(0,$.jsx)(`div`,{style:{width:`100%`,background:`#16a34a`,borderRadius:`4px 4px 0 0`,height:`${n>0?e.commission/n*100:0}px`,minHeight:e.commission>0?`14px`:`4px`}}),(0,$.jsx)(`div`,{style:{fontSize:`10px`,color:`#64748b`},children:e.week.replace(`Week `,`W`)})]},t)})})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:`12px`,fontWeight:600,color:`#64748b`,marginBottom:`8px`,textTransform:`uppercase`},children:`Rent Collection`}),(0,$.jsx)(`div`,{style:{display:`flex`,gap:`8px`,alignItems:`flex-end`,height:`140px`},children:fy.map((e,t)=>{let n=Math.max(...fy.map(e=>e.expected));return(0,$.jsxs)(`div`,{style:{flex:1,display:`flex`,flexDirection:`column`,alignItems:`center`,gap:`2px`,height:`100%`,justifyContent:`flex-end`},children:[(0,$.jsxs)(`div`,{style:{fontSize:`10px`,fontWeight:600,color:e.collected>=e.expected?`#16a34a`:`#d97706`},children:[`$`,(e.collected/1e3).toFixed(1),`K`]}),(0,$.jsxs)(`div`,{style:{width:`100%`,position:`relative`},children:[(0,$.jsx)(`div`,{style:{width:`100%`,height:`${e.expected/n*100}px`,background:`#f1f5f9`,borderRadius:`4px 4px 0 0`,position:`absolute`,bottom:0}}),(0,$.jsx)(`div`,{style:{width:`100%`,height:`${e.collected/n*100}px`,background:e.collected>=e.expected?`#16a34a`:`#d97706`,borderRadius:`4px 4px 0 0`,position:`relative`,zIndex:1,minHeight:`14px`}})]}),(0,$.jsx)(`div`,{style:{fontSize:`10px`,color:`#64748b`},children:e.month})]},t)})})]})]})}):f?(0,$.jsx)(`div`,{style:{padding:`16px`},children:(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`12px`},children:cy.map((e,t)=>(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`},children:[(0,$.jsx)(`div`,{style:{width:`120px`,fontSize:`13px`,fontWeight:600,color:`#334155`},children:e.category}),(0,$.jsx)(`div`,{style:{flex:1,height:`24px`,background:`#f1f5f9`,borderRadius:`6px`,overflow:`hidden`},children:e.value>0&&(0,$.jsx)(`div`,{style:{height:`100%`,width:`${Math.max(5,e.value/425e3*100)}%`,background:`#7c3aed`,borderRadius:`6px`}})}),(0,$.jsx)(`div`,{style:{width:`100px`,textAlign:`right`,fontSize:`13px`,fontWeight:600,color:`#1e293b`},children:e.value>0?`$${e.value.toLocaleString()}`:`${e.count} docs`}),(0,$.jsxs)(`div`,{style:{width:`40px`,textAlign:`right`,fontSize:`12px`,color:`#64748b`},children:[`(`,e.count,`)`]})]},t))})}):(0,$.jsxs)(`div`,{style:{padding:`32px`,display:`flex`,alignItems:`center`,justifyContent:`center`,minHeight:`300px`,color:`var(--textMuted)`,background:`#f8fafc`,borderRadius:`8px`,margin:`16px`,flexDirection:`column`,gap:`12px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`16px`,fontWeight:600},children:`No data yet`}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,textAlign:`center`,maxWidth:`300px`},children:`Reports will populate as you use the platform.`})]})]}),(0,$.jsxs)(`div`,{className:`card`,children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsx)(`div`,{className:`cardTitle`,children:`Recent Activity`})}),(0,$.jsx)(`div`,{style:{padding:`12px 16px`,display:`flex`,flexDirection:`column`,gap:`2px`},children:v.slice(0,8).map(e=>(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`flex-start`,gap:`10px`,padding:`8px 0`,borderBottom:`1px solid #f1f5f9`},children:[(0,$.jsx)(`div`,{style:{width:`8px`,height:`8px`,borderRadius:`50%`,background:e.color,flexShrink:0,marginTop:`5px`}}),(0,$.jsxs)(`div`,{style:{flex:1},children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#334155`,lineHeight:1.5},children:e.text}),(0,$.jsx)(`div`,{style:{fontSize:`11px`,color:`#94a3b8`,marginTop:`2px`},children:e.time})]})]},e.id))})]})]}),(u||d||p)&&(0,$.jsxs)(`div`,{className:`card`,style:{marginTop:`16px`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsx)(`div`,{className:`cardTitle`,children:p?o===`pm`?`PM Revenue Breakdown`:`Revenue Breakdown`:d?`Performance by Sector`:`Sales by Source`})}),(0,$.jsx)(`div`,{style:{padding:`16px`},children:(0,$.jsx)(`div`,{className:`tableWrap`,children:(0,$.jsxs)(`table`,{className:`table`,style:{width:`100%`},children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{children:p?`Category`:d?`Sector`:`Source`}),(0,$.jsx)(`th`,{children:p?`Count`:d?`YTD Return`:`Sales`}),(0,$.jsx)(`th`,{children:d?`Portfolio Value`:`Revenue`}),(0,$.jsx)(`th`,{style:{width:`40%`}})]})}),(0,$.jsx)(`tbody`,{children:u?ry.map((e,t)=>{let n=Math.max(...ry.map(e=>e.sales));return(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`td`,{className:`tdStrong`,children:e.source}),(0,$.jsx)(`td`,{children:e.sales}),(0,$.jsxs)(`td`,{style:{fontWeight:600},children:[`$`,e.revenue.toLocaleString()]}),(0,$.jsx)(`td`,{children:(0,$.jsx)(`div`,{style:{width:`${e.sales/n*100}%`,height:`12px`,background:`#7c3aed`,borderRadius:`6px`,minWidth:`8px`}})})]},t)}):p?y.map((e,t)=>{let n=Math.max(...y.map(e=>e.revenue));return(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`td`,{className:`tdStrong`,children:e.category}),(0,$.jsx)(`td`,{children:e.count}),(0,$.jsxs)(`td`,{style:{fontWeight:600},children:[`$`,e.revenue.toLocaleString()]}),(0,$.jsx)(`td`,{children:(0,$.jsx)(`div`,{style:{width:`${e.revenue/n*100}%`,height:`12px`,background:`#16a34a`,borderRadius:`6px`,minWidth:`8px`}})})]},t)}):oy.map((e,t)=>{let n=Math.max(...oy.map(e=>Math.abs(e.pctReturn)));return(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`td`,{className:`tdStrong`,children:e.sector}),(0,$.jsxs)(`td`,{style:{fontWeight:600,color:e.pctReturn>=0?`#16a34a`:`#dc2626`},children:[e.pctReturn>=0?`+`:``,e.pctReturn,`%`]}),(0,$.jsxs)(`td`,{style:{fontWeight:600},children:[`$`,(e.value/1e6).toFixed(1),`M`]}),(0,$.jsx)(`td`,{children:(0,$.jsx)(`div`,{style:{width:`${Math.abs(e.pctReturn)/n*100}%`,height:`12px`,background:e.pctReturn>=0?`#16a34a`:`#dc2626`,borderRadius:`6px`,minWidth:`8px`}})})]},t)})})]})})})]}),p&&(o===`pm`||o===`combined`)&&(0,$.jsxs)(`div`,{className:`card`,style:{marginTop:`16px`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsx)(`div`,{className:`cardTitle`,children:`NOI by Property`})}),(0,$.jsx)(`div`,{style:{padding:`16px`},children:(0,$.jsx)(`div`,{className:`tableWrap`,children:(0,$.jsxs)(`table`,{className:`table`,style:{width:`100%`},children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{children:`Property`}),(0,$.jsx)(`th`,{children:`Revenue`}),(0,$.jsx)(`th`,{children:`Expenses`}),(0,$.jsx)(`th`,{children:`NOI`}),(0,$.jsx)(`th`,{style:{width:`30%`}})]})}),(0,$.jsx)(`tbody`,{children:py.map((e,t)=>{let n=Math.max(...py.map(e=>e.noi));return(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`td`,{className:`tdStrong`,children:e.property}),(0,$.jsxs)(`td`,{children:[`$`,e.revenue.toLocaleString()]}),(0,$.jsxs)(`td`,{style:{color:`#dc2626`},children:[`$`,e.expenses.toLocaleString()]}),(0,$.jsxs)(`td`,{style:{fontWeight:600,color:`#16a34a`},children:[`$`,e.noi.toLocaleString()]}),(0,$.jsx)(`td`,{children:(0,$.jsx)(`div`,{style:{width:`${e.noi/n*100}%`,height:`12px`,background:`#16a34a`,borderRadius:`6px`,minWidth:`8px`}})})]},t)})})]})})})]}),(0,$.jsxs)(`div`,{className:`card`,style:{marginTop:`16px`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`Export Reports`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Download data for external analysis`})]})}),(0,$.jsxs)(`div`,{style:{padding:`16px`,display:`flex`,gap:`12px`},children:[(0,$.jsx)(`button`,{className:`iconBtn`,onClick:b,children:`Export as CSV`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:x,children:`Export as PDF`}),!f&&(0,$.jsx)(`button`,{className:`iconBtn`,onClick:S,children:`Export as Excel`})]})]})]})}function _y(){let[e,t]=(0,_.useState)([]),[n,r]=(0,_.useState)(!1),[i,a]=(0,_.useState)(``),[o,s]=(0,_.useState)(!1),[c,l]=(0,_.useState)(null),u=localStorage.getItem(`VERTICAL`)||`auto`,d=localStorage.getItem(`JURISDICTION`)||`IL`,f=[{id:`salesforce`,name:`Salesforce`,type:`CRM`,icon:`SF`},{id:`hubspot`,name:`HubSpot`,type:`CRM`,icon:`HS`},{id:`quickbooks`,name:`QuickBooks`,type:`Accounting`,icon:`QB`},{id:`stripe`,name:`Stripe`,type:`Payments`,icon:`ST`},{id:`square`,name:`Square`,type:`Payments`,icon:`SQ`},{id:`twilio`,name:`Twilio`,type:`SMS`,icon:`TW`},{id:`sendgrid`,name:`SendGrid`,type:`Email`,icon:`SG`},{id:`foreflight`,name:`ForeFlight`,type:`Aviation`,icon:`FF`}];(0,_.useEffect)(()=>{p()},[]);async function p(){r(!0),a(``);try{t((await Z_({vertical:u,jurisdiction:d})).integrations||[])}catch(e){a(e?.message||String(e)),console.error(`Failed to load integrations:`,e)}finally{r(!1)}}async function m(e){if(confirm(`Are you sure you want to disconnect this integration?`)){a(``);try{await Q_({vertical:u,jurisdiction:d,integrationId:e}),await p()}catch(e){a(e?.message||String(e)),console.error(`Failed to disconnect integration:`,e)}}}async function h(e){a(``);try{await $_({vertical:u,jurisdiction:d,integrationId:e}),await p(),alert(`Sync started successfully!`)}catch(e){a(e?.message||String(e)),console.error(`Failed to sync integration:`,e),alert(`Sync failed: `+(e?.message||String(e)))}}return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Data & APIs`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Third-party integrations and data synchronization`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>s(!0),style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`},children:`+ Add Integration`})]}),e.length>0&&(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{className:`cardTitle`,children:[`Active Integrations (`,e.length,`)`]})}),(0,$.jsx)(`div`,{style:{padding:`16px`,display:`flex`,flexDirection:`column`,gap:`16px`},children:e.map(e=>(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,padding:`16px`,border:`1px solid var(--line)`,borderRadius:`12px`,cursor:`pointer`},onClick:()=>l(e),children:[(0,$.jsxs)(`div`,{style:{flex:1},children:[(0,$.jsx)(`div`,{style:{fontWeight:600,fontSize:`16px`,marginBottom:`4px`},children:e.name}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`,marginBottom:`8px`},children:e.description}),(0,$.jsxs)(`div`,{style:{fontSize:`12px`,color:`var(--textMuted)`},children:[`Last synced: `,new Date(e.lastSync).toLocaleString(),` `,` `,e.recordsSync,` records`]})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`,marginLeft:`16px`},children:[(0,$.jsx)(`button`,{className:`iconBtn`,onClick:t=>{t.stopPropagation(),h(e.id)},children:`Sync Now`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:t=>{t.stopPropagation(),m(e.id)},style:{color:`var(--danger)`},children:`Disconnect`})]})]},e.id))})]}),c&&(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`},children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:c.name}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Integration Details`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>l(null),children:`Close`})]}),(0,$.jsxs)(`div`,{className:`detail`,children:[(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Status`}),(0,$.jsx)(`div`,{className:`v`,children:(0,$.jsx)(`span`,{className:`badge badge-completed`,children:`Connected`})})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Type`}),(0,$.jsx)(`div`,{className:`v`,children:c.type})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Last Sync`}),(0,$.jsx)(`div`,{className:`v`,children:new Date(c.lastSync).toLocaleString()})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Records Synced`}),(0,$.jsx)(`div`,{className:`v`,children:c.recordsSync})]})]}),(0,$.jsxs)(`div`,{style:{padding:`16px`,borderTop:`1px solid var(--line)`},children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`12px`},children:`Sync Settings`}),(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`8px`},children:[(0,$.jsxs)(`label`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,$.jsx)(`input`,{type:`checkbox`,defaultChecked:!0}),(0,$.jsx)(`span`,{children:`Auto-sync every hour`})]}),(0,$.jsxs)(`label`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,$.jsx)(`input`,{type:`checkbox`,defaultChecked:!0}),(0,$.jsx)(`span`,{children:`Sync customer data`})]}),(0,$.jsxs)(`label`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,$.jsx)(`input`,{type:`checkbox`,defaultChecked:!0}),(0,$.jsx)(`span`,{children:`Sync transactions`})]}),(0,$.jsxs)(`label`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,$.jsx)(`input`,{type:`checkbox`}),(0,$.jsx)(`span`,{children:`Sync inventory`})]})]})]})]}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`},children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`Webhooks`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Receive real-time notifications`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,children:`+ Add Webhook`})]}),(0,$.jsx)(`div`,{style:{padding:`16px`},children:(0,$.jsxs)(`div`,{style:{padding:`16px`,border:`1px solid var(--line)`,borderRadius:`12px`,fontFamily:`monospace`,fontSize:`13px`,background:`#f8fafc`},children:[(0,$.jsx)(`div`,{style:{marginBottom:`8px`,fontWeight:600},children:`POST https://your-app.com/webhooks/titleapp`}),(0,$.jsx)(`div`,{style:{color:`var(--textMuted)`},children:`Events: customer.created, deal.updated, payment.received`})]})})]}),(0,$.jsxs)(`div`,{className:`card`,children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`API Keys`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Programmatic access to your data`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,children:`Generate New Key`})]}),(0,$.jsxs)(`div`,{style:{padding:`16px`,display:`flex`,flexDirection:`column`,gap:`12px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,fontWeight:600,marginBottom:`6px`},children:`Production API Key`}),(0,$.jsxs)(`div`,{style:{fontFamily:`monospace`,padding:`12px`,background:`#f8fafc`,borderRadius:`8px`,fontSize:`13px`,display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsx)(`span`,{children:`ta_prod_`}),(0,$.jsx)(`button`,{className:`iconBtn`,children:`Reveal`})]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,fontWeight:600,marginBottom:`6px`},children:`Test API Key`}),(0,$.jsxs)(`div`,{style:{fontFamily:`monospace`,padding:`12px`,background:`#f8fafc`,borderRadius:`8px`,fontSize:`13px`,display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsx)(`span`,{children:`ta_test_`}),(0,$.jsx)(`button`,{className:`iconBtn`,children:`Reveal`})]})]})]})]}),(0,$.jsx)(Ev,{isOpen:o,onClose:()=>s(!1),title:`Add Integration`,onSubmit:e=>{e.preventDefault(),s(!1)},submitLabel:`Connect`,children:(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`var(--textMuted)`,marginBottom:`8px`},children:`Select an integration to connect`}),(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(2, 1fr)`,gap:`12px`},children:f.map(e=>(0,$.jsxs)(`button`,{type:`button`,style:{padding:`16px`,border:`1px solid var(--line)`,borderRadius:`12px`,background:`white`,cursor:`pointer`,textAlign:`left`},onClick:()=>{alert(`Connecting to ${e.name}...`),s(!1)},children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`4px`},children:e.name}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:e.type})]},e.id))})]})})]})}function vy(){let e=Ts().currentUser,t=(0,_.useRef)(null),[n,r]=(0,_.useState)({name:e?.displayName||localStorage.getItem(`COMPANY_NAME`)||``,email:e?.email||``,phone:``}),[i,a]=(0,_.useState)(()=>localStorage.getItem(`VAULT_AVATAR`)||null),[o,s]=(0,_.useState)(()=>{let e=localStorage.getItem(`COS_CONFIG`);if(e)try{return JSON.parse(e)}catch{}return{name:`Alex`,channel:`email`,autonomy:`remind`}}),[c,l]=(0,_.useState)(null),[u,d]=(0,_.useState)(()=>localStorage.getItem(`VAULT_BLOCKCHAIN_ENABLED`)===`true`),[f,p]=(0,_.useState)({email:!0,sms:!1,renewalReminders:!0,expirationAlerts:!0});function m(e){s(e),localStorage.setItem(`COS_CONFIG`,JSON.stringify(e))}function h(e){let n=e.target.files?.[0];if(console.log(`[Avatar] File selected:`,n?.name,n?.type,n?.size),!n)return;let r=new FileReader;r.onload=e=>{console.log(`[Avatar] FileReader loaded, data length:`,e.target.result?.length);let t=new Image;t.onload=()=>{console.log(`[Avatar] Image loaded:`,t.width,`x`,t.height);try{let e=document.createElement(`canvas`),n=t.width,r=t.height;(n>200||r>200)&&(n>r?(r=Math.round(r*200/n),n=200):(n=Math.round(n*200/r),r=200)),e.width=n,e.height=r,e.getContext(`2d`).drawImage(t,0,0,n,r);let i=e.toDataURL(`image/jpeg`,.85);console.log(`[Avatar] Compressed length:`,i.length),a(i),localStorage.setItem(`VAULT_AVATAR`,i),l(`Photo updated`),setTimeout(()=>l(null),3e3)}catch(t){console.error(`[Avatar] Canvas error:`,t);let n=e.target.result;a(n);try{localStorage.setItem(`VAULT_AVATAR`,n)}catch(e){console.error(`[Avatar] localStorage full, using in-memory only:`,e)}l(`Photo updated`),setTimeout(()=>l(null),3e3)}},t.onerror=e=>{console.error(`[Avatar] Image load error:`,e),l(`Could not load image. Try a different file.`),setTimeout(()=>l(null),4e3)},t.src=e.target.result},r.onerror=e=>{console.error(`[Avatar] FileReader error:`,e),l(`Could not read file. Try again.`),setTimeout(()=>l(null),4e3)},r.readAsDataURL(n),t.current&&(t.current.value=``)}function g(e){d(e),localStorage.setItem(`VAULT_BLOCKCHAIN_ENABLED`,String(e))}return(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`pageHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Settings`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Your personal Vault preferences`})]})}),c&&(0,$.jsx)(`div`,{style:{padding:`10px 16px`,marginBottom:`12px`,borderRadius:`10px`,background:`#f0fdf4`,color:`#16a34a`,fontSize:`14px`,fontWeight:500},children:c}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`Profile`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Your personal information`})]})}),(0,$.jsxs)(`div`,{style:{padding:`16px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`16px`,marginBottom:`20px`},children:[i?(0,$.jsx)(`img`,{src:i,alt:`Avatar`,style:{width:`64px`,height:`64px`,borderRadius:`50%`,objectFit:`cover`,flexShrink:0}}):(0,$.jsx)(`div`,{style:{width:`64px`,height:`64px`,borderRadius:`50%`,background:`linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%)`,display:`flex`,alignItems:`center`,justifyContent:`center`,color:`white`,fontWeight:700,fontSize:`24px`,flexShrink:0},children:n.name?.charAt(0)?.toUpperCase()||`?`}),(0,$.jsxs)(`div`,{style:{flex:1},children:[(0,$.jsx)(`div`,{style:{fontWeight:600,fontSize:`16px`,color:`#1e293b`},children:n.name||`Your Name`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`},children:n.email}),(0,$.jsx)(`input`,{ref:t,type:`file`,accept:`image/*`,onChange:h,style:{display:`none`}}),(0,$.jsx)(`button`,{className:`iconBtn`,style:{marginTop:`8px`,fontSize:`12px`},onClick:()=>t.current?.click(),children:`Upload Photo`})]})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Full Name`}),(0,$.jsx)(`input`,{type:`text`,value:n.name,onChange:e=>r({...n,name:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`}})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Email`}),(0,$.jsx)(`input`,{type:`email`,value:n.email,disabled:!0,style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`,background:`#f8fafc`,color:`#94a3b8`}}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#94a3b8`,marginTop:`4px`},children:`Email is managed through your login credentials`})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Phone`}),(0,$.jsx)(`input`,{type:`tel`,value:n.phone,onChange:e=>r({...n,phone:e.target.value}),placeholder:`Optional -- used for text notifications`,style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`}})]})]})]})]}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`,border:`1px solid #e9d5ff`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`AI Assistant`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Your personal AI assistant configuration`})]})}),(0,$.jsxs)(`div`,{style:{padding:`16px`},children:[(0,$.jsx)(`div`,{style:{padding:`14px 16px`,background:`#faf5ff`,borderRadius:`10px`,fontSize:`14px`,color:`#64748b`,lineHeight:`1.6`,marginBottom:`20px`},children:`Your AI assistant manages follow-ups, tracks deadlines, and communicates on your behalf within the boundaries you set. Name them, choose how they reach you, and decide how much autonomy they get.`}),(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`18px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`AI Name`}),(0,$.jsx)(`input`,{type:`text`,value:o.name,onChange:e=>m({...o,name:e.target.value}),placeholder:`Give your AI a name`,style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`}}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#94a3b8`,marginTop:`4px`},children:`This is how your AI will introduce itself`})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Title`}),(0,$.jsx)(`input`,{type:`text`,value:`AI Assistant`,disabled:!0,style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`,background:`#f8fafc`,color:`#94a3b8`}})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`8px`,fontWeight:600,fontSize:`13px`},children:`Communication Channel`}),(0,$.jsx)(`div`,{style:{display:`flex`,gap:`8px`},children:[{value:`email`,label:`Email`},{value:`text`,label:`Text`},{value:`both`,label:`Both`}].map(e=>(0,$.jsx)(`button`,{onClick:()=>m({...o,channel:e.value}),style:{padding:`8px 18px`,borderRadius:`10px`,border:o.channel===e.value?`2px solid #7c3aed`:`1px solid var(--line)`,background:o.channel===e.value?`rgba(124,58,237,0.08)`:`white`,color:o.channel===e.value?`#7c3aed`:`#64748b`,fontWeight:o.channel===e.value?600:400,cursor:`pointer`,fontSize:`13px`},children:e.label},e.value))})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`8px`,fontWeight:600,fontSize:`13px`},children:`Autonomy Level`}),(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`8px`},children:[{value:`remind`,label:`Just remind me`,desc:`Send me reminders about deadlines and tasks. I'll handle everything myself.`},{value:`schedule`,label:`Schedule and remind me`,desc:`Book appointments, set reminders, and organize my calendar. I approve before anything goes out.`},{value:`handle`,label:`Handle it for me`,desc:`Take action on routine items automatically. I'll review a summary after the fact.`}].map(e=>(0,$.jsxs)(`button`,{onClick:()=>m({...o,autonomy:e.value}),style:{padding:`12px 16px`,borderRadius:`10px`,border:o.autonomy===e.value?`2px solid #7c3aed`:`1px solid var(--line)`,background:o.autonomy===e.value?`rgba(124,58,237,0.08)`:`white`,cursor:`pointer`,textAlign:`left`},children:[(0,$.jsx)(`div`,{style:{fontWeight:600,fontSize:`14px`,color:o.autonomy===e.value?`#7c3aed`:`#1e293b`,marginBottom:`2px`},children:e.label}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:e.desc})]},e.value))})]})]})]})]}),(0,$.jsxs)(`div`,{style:{marginTop:`32px`,padding:`24px`,background:`white`,borderRadius:`12px`,border:`1px solid #e2e8f0`,marginBottom:`16px`},children:[(0,$.jsx)(`h2`,{style:{fontSize:`20px`,fontWeight:`bold`,marginBottom:`4px`},children:`Billing & Subscription`}),(0,$.jsx)(`p`,{style:{color:`#64748b`,fontSize:`14px`,marginBottom:`20px`},children:`Manage your plan and premium services`}),(0,$.jsxs)(`div`,{style:{padding:`16px`,background:`#f0fdf4`,borderRadius:`8px`,marginBottom:`20px`,display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:`18px`,fontWeight:`700`},children:`Personal Vault  Free`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`},children:`Your personal Vault is free forever. No credit card required.`})]}),(0,$.jsx)(`span`,{style:{padding:`4px 12px`,background:`#dcfce7`,color:`#16a34a`,borderRadius:`20px`,fontSize:`13px`,fontWeight:`600`},children:`Active`})]}),(0,$.jsx)(`h3`,{style:{fontSize:`16px`,fontWeight:`600`,marginBottom:`12px`},children:`Optional Premium Services`}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`12px`},children:[(0,$.jsxs)(`div`,{style:{padding:`16px`,border:`1px solid #e2e8f0`,borderRadius:`8px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:`600`,marginBottom:`4px`},children:`Identity Verification`}),(0,$.jsx)(`div`,{style:{fontSize:`24px`,fontWeight:`bold`,color:`#7c3aed`},children:`$2.99`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`},children:`Per verification. Government ID + biometric check for high-value DTCs.`})]}),(0,$.jsxs)(`div`,{style:{padding:`16px`,border:`1px solid #e2e8f0`,borderRadius:`8px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:`600`,marginBottom:`4px`},children:`Blockchain Recording`}),(0,$.jsx)(`div`,{style:{fontSize:`24px`,fontWeight:`bold`,color:`#7c3aed`},children:`$0.99`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`},children:`Per DTC. Permanent record on Polygon blockchain via Venly. Tamper-proof.`})]}),(0,$.jsxs)(`div`,{style:{padding:`16px`,border:`1px solid #e2e8f0`,borderRadius:`8px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:`600`,marginBottom:`4px`},children:`E-Signature Requests`}),(0,$.jsx)(`div`,{style:{fontSize:`24px`,fontWeight:`bold`,color:`#7c3aed`},children:`$1.99`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`},children:`Per request. DocuSign-powered third-party attestation on logbook entries.`})]}),(0,$.jsxs)(`div`,{style:{padding:`16px`,border:`1px solid #e2e8f0`,borderRadius:`8px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:`600`,marginBottom:`4px`},children:`Priority Support`}),(0,$.jsxs)(`div`,{style:{fontSize:`24px`,fontWeight:`bold`,color:`#7c3aed`},children:[`$4.99`,(0,$.jsx)(`span`,{style:{fontSize:`14px`,fontWeight:`400`},children:`/mo`})]}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`},children:`Dedicated support channel. Response within 1 hour.`})]})]}),(0,$.jsxs)(`div`,{style:{marginTop:`20px`,padding:`16px`,background:`#f8fafc`,borderRadius:`8px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:`600`,marginBottom:`8px`},children:`Usage This Month`}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`24px`,fontSize:`14px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`span`,{style:{fontWeight:`600`},children:`0`}),` ID verifications`]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`span`,{style:{fontWeight:`600`},children:`0`}),` blockchain recordings`]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`span`,{style:{fontWeight:`600`},children:`0`}),` e-signature requests`]})]}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`,marginTop:`8px`},children:`Total charges this month: $0.00`})]})]}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`Blockchain Verification`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Permanent, tamper-proof records`})]})}),(0,$.jsxs)(`div`,{style:{padding:`16px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`#64748b`,lineHeight:`1.7`,marginBottom:`20px`},children:`Save your most important records on the blockchain so they can never be lost, altered, or forged. Each verified item gets a permanent digital certificate that exists independently of any company or service.`}),(0,$.jsx)(`div`,{style:{padding:`14px 16px`,background:u?`#f0fdf4`:`#f8fafc`,border:u?`1px solid #86efac`:`1px solid #e5e7eb`,borderRadius:`10px`},children:(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`},children:[(0,$.jsx)(`input`,{type:`checkbox`,checked:u,onChange:e=>g(e.target.checked),style:{width:`20px`,height:`20px`}}),(0,$.jsxs)(`div`,{style:{flex:1},children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`2px`},children:`Enable Blockchain Record Keeping`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#94a3b8`},children:`Additional fee applies. Records are stored on Polygon blockchain via VENLY.`})]})]})})]})]}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`Notifications`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`How you receive alerts and reminders`})]})}),(0,$.jsx)(`div`,{style:{padding:`16px`,display:`flex`,flexDirection:`column`,gap:`12px`},children:[{key:`email`,label:`Email Notifications`,desc:`Receive updates and reminders via email`},{key:`sms`,label:`Text Notifications`,desc:`Receive updates via text message`},{key:`renewalReminders`,label:`Renewal Reminders`,desc:`Get reminded when certifications or licenses are due for renewal`},{key:`expirationAlerts`,label:`Expiration Alerts`,desc:`Get alerted when documents or IDs are about to expire`}].map(e=>(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`},children:[(0,$.jsx)(`input`,{type:`checkbox`,checked:f[e.key],onChange:t=>p({...f,[e.key]:t.target.checked}),style:{width:`18px`,height:`18px`}}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600},children:e.label}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:e.desc})]})]},e.key))})]}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`Connected Accounts`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Link external accounts for faster verification`})]})}),(0,$.jsxs)(`div`,{style:{padding:`16px`,display:`flex`,flexDirection:`column`,gap:`12px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600},children:`Google`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:`Sign in and import contacts`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,children:`Connect`})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600},children:`Apple`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:`Sign in with Apple ID`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,children:`Connect`})]})]})]}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`,borderColor:`#e9d5ff`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`Developer Tools`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Testing and debugging utilities`})]})}),(0,$.jsxs)(`div`,{style:{padding:`16px`,display:`flex`,flexDirection:`column`,gap:`12px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600},children:`Reset Onboarding`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:`Clear onboarding state and restart the setup flow. Your data is preserved.`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,style:{color:`#f59e0b`,borderColor:`#fcd34d`},onClick:()=>{window.confirm(`This will reset your onboarding flow. Your existing data will be preserved. Continue?`)&&(localStorage.removeItem(`TENANT_ID`),localStorage.removeItem(`VERTICAL`),localStorage.removeItem(`JURISDICTION`),localStorage.removeItem(`ONBOARDING_STATE`),window.location.reload())},children:`Reset`})]}),(0,$.jsx)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600},children:`Current Config`}),(0,$.jsxs)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:[`Vertical: `,localStorage.getItem(`VERTICAL`)||`auto`,` | Jurisdiction: `,localStorage.getItem(`JURISDICTION`)||`IL`,` | Tenant: `,localStorage.getItem(`TENANT_ID`)||`none`]})]})})]})]}),(0,$.jsxs)(`div`,{className:`card`,style:{borderColor:`var(--danger)`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,style:{color:`var(--danger)`},children:`Danger Zone`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Irreversible actions`})]})}),(0,$.jsxs)(`div`,{style:{padding:`16px`,display:`flex`,flexDirection:`column`,gap:`12px`},children:[(0,$.jsx)(`button`,{className:`iconBtn`,style:{width:`fit-content`,color:`var(--danger)`},children:`Export All Data`}),(0,$.jsx)(`button`,{className:`iconBtn`,style:{width:`fit-content`,color:`var(--danger)`},children:`Delete Account`})]})]})]})}function yy(){let[e,t]=(0,_.useState)([]),[n,r]=(0,_.useState)(localStorage.getItem(`CURRENT_TENANT_ID`)||null),[i,a]=(0,_.useState)(!1),[o,s]=(0,_.useState)({name:``,type:`business`,vertical:`auto`,jurisdiction:`IL`}),c=localStorage.getItem(`VERTICAL`)||`auto`,l=localStorage.getItem(`JURISDICTION`)||`IL`,u={auto:`Auto Dealer`,analyst:`Investment Analyst`,"real-estate":`Real Estate Brokerage`,"property-mgmt":`Property Management`,aviation:`Aviation`,marine:`Marine`};function d(){let e=[localStorage.getItem(`WORKSPACE_NAME`),localStorage.getItem(`COMPANY_NAME`),localStorage.getItem(`TENANT_NAME`)];for(let t of e)if(t&&!/^ws_\d+_[a-z0-9]+$/i.test(t))return t;return``}let[f,p]=(0,_.useState)({name:d(),type:u[c]||c,vertical:c,jurisdiction:l,address:``,phone:``,email:``,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone||`America/Chicago`,notifications:{email:!0,sms:!1,lowInventoryAlert:!0,appointmentReminders:!0},blockchain:{enabled:!1,provider:`venly`,inventoryOnChain:0,dealsOnChain:0}}),[m,h]=(0,_.useState)(!1),[g,v]=(0,_.useState)(null),[y,b]=(0,_.useState)({});function x(e){v(e),e===`business`?b({name:f.name,type:f.type,address:f.address,phone:f.phone,email:f.email}):e===`notifications`&&b({...f.notifications}),h(!0)}function S(e){e.preventDefault(),g===`business`?p({...f,...y}):g===`notifications`&&p({...f,notifications:y}),h(!1)}function C(){return c===`real-estate`?[{key:`email`,label:`Email Notifications`,desc:`Receive updates via email`},{key:`sms`,label:`SMS Notifications`,desc:`Receive updates via text message`},{key:`vacancyAlerts`,label:`Vacancy Alerts`,desc:`Get notified when units become vacant`},{key:`lateRentAlerts`,label:`Late Rent Alerts`,desc:`Get alerted when tenants are past due`},{key:`leaseExpiration`,label:`Lease Expiration Alerts`,desc:`Get reminded when leases are expiring soon`},{key:`maintenanceOverdue`,label:`Maintenance Overdue Alerts`,desc:`Get notified when maintenance requests exceed SLA`}]:c===`analyst`?[{key:`email`,label:`Email Notifications`,desc:`Receive updates via email`},{key:`sms`,label:`SMS Notifications`,desc:`Receive updates via text message`},{key:`priceAlerts`,label:`Price Target Alerts`,desc:`Get alerted when positions hit price targets`},{key:`riskAlerts`,label:`Risk Alerts`,desc:`Get notified of portfolio risk threshold breaches`}]:[{key:`email`,label:`Email Notifications`,desc:`Receive updates via email`},{key:`sms`,label:`SMS Notifications`,desc:`Receive updates via text message`},{key:`lowInventoryAlert`,label:`Low Inventory Alerts`,desc:`Get notified when inventory is running low`},{key:`appointmentReminders`,label:`Appointment Reminders`,desc:`Remind staff about upcoming appointments`}]}(0,_.useEffect)(()=>{w()},[]);async function w(){let e=[],i=localStorage.getItem(`WORKSPACE_ID`)||localStorage.getItem(`TENANT_ID`)||``,a=d();e.push({id:i,name:a||`Current Workspace`,type:u[c]||c,vertical:c,role:`admin`,current:!0});try{let t=localStorage.getItem(`ID_TOKEN`),n=await(await fetch(`https://titleapp-frontdoor.titleapp-core.workers.dev/api?path=/v1/me:memberships`,{headers:{Authorization:`Bearer ${t}`}})).json();n.ok&&n.memberships&&n.memberships.forEach(t=>{if(t.tenantId!==i){let r=n.tenants?.[t.tenantId]||{},i=(r.vertical||`auto`).toLowerCase();e.push({id:t.tenantId,name:r.companyName||r.name||t.tenantId,type:u[i]||i,vertical:i,role:t.role||`member`,current:!1})}})}catch(e){console.warn(`Could not load all memberships:`,e.message)}t(e),n||r(i)}function T(e){localStorage.setItem(`CURRENT_TENANT_ID`,e.id),localStorage.setItem(`TENANT_ID`,e.id),localStorage.setItem(`WORKSPACE_ID`,e.id),e.vertical&&localStorage.setItem(`VERTICAL`,e.vertical),e.name&&(localStorage.setItem(`WORKSPACE_NAME`,e.name),localStorage.setItem(`COMPANY_NAME`,e.name)),r(e.id),window.location.reload()}return(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`pageHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Settings`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Business configuration and preferences`})]})}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`},children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`My Companies`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Manage multiple businesses with one account`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>a(!0),style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`},children:`+ New Company`})]}),(0,$.jsx)(`div`,{style:{padding:`16px`},children:e.map(e=>(0,$.jsxs)(`div`,{style:{padding:`12px`,marginBottom:`8px`,border:`2px solid ${n===e.id?`var(--accent)`:`var(--line)`}`,borderRadius:`8px`,display:`flex`,justifyContent:`space-between`,alignItems:`center`,background:n===e.id?`rgba(124,58,237,0.05)`:`transparent`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600},children:e.name}),(0,$.jsxs)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:[e.type,` `,e.role?`\u00B7 ${e.role}`:``]}),(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`6px`,marginTop:`4px`},children:[(0,$.jsx)(`span`,{style:{fontSize:`10px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:{auto:`#fef3c7`,analyst:`#dbeafe`,"real-estate":`#dcfce7`,consumer:`#f3e8ff`}[e.vertical]||`#f1f5f9`,color:{auto:`#d97706`,analyst:`#2563eb`,"real-estate":`#16a34a`,consumer:`#7c3aed`}[e.vertical]||`#475569`},children:e.type}),e.current&&(0,$.jsx)(`span`,{style:{fontSize:`10px`,fontWeight:600,color:`#7c3aed`},children:`Active`})]})]}),n!==e.id&&(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>T(e),children:`Switch`})]},e.id))})]}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`},children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`Business Information`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Your business details`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>x(`business`),children:`Edit`})]}),(0,$.jsxs)(`div`,{className:`detail`,children:[(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Business Name`}),(0,$.jsx)(`div`,{className:`v`,children:f.name})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Type`}),(0,$.jsx)(`div`,{className:`v`,children:f.type})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Vertical`}),(0,$.jsxs)(`div`,{className:`v`,children:[f.vertical.toUpperCase(),` (`,f.jurisdiction.toUpperCase(),`)`]})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Address`}),(0,$.jsx)(`div`,{className:`v`,children:f.address})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Phone`}),(0,$.jsx)(`div`,{className:`v`,children:f.phone})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Email`}),(0,$.jsx)(`div`,{className:`v`,children:f.email})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Timezone`}),(0,$.jsx)(`div`,{className:`v`,children:f.timezone})]})]})]}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`},children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`Notification Preferences`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`How your business receives alerts`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>x(`notifications`),children:`Edit`})]}),(0,$.jsx)(`div`,{style:{padding:`16px`,display:`flex`,flexDirection:`column`,gap:`12px`},children:C().map(e=>(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`},children:[(0,$.jsx)(`input`,{type:`checkbox`,checked:f.notifications[e.key]||!1,readOnly:!0}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600},children:e.label}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:e.desc})]})]},e.key))})]}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`Integrations`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Connected third-party services`})]})}),(0,$.jsxs)(`div`,{style:{padding:`16px`,display:`flex`,flexDirection:`column`,gap:`12px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600},children:`Salesforce CRM`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:`Sync customer data with Salesforce`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,children:`Connect`})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600},children:`QuickBooks`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:`Sync financial data and invoices`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,children:`Connect`})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600},children:`Stripe Payments`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:`Accept online payments`})]}),(0,$.jsx)(`span`,{className:`badge badge-completed`,children:`Connected`})]})]})]}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`},children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`API Access`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`API keys for programmatic access`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,children:`Generate New Key`})]}),(0,$.jsxs)(`div`,{style:{padding:`16px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`,marginBottom:`8px`},children:`Production API Key`}),(0,$.jsx)(`div`,{style:{fontFamily:`monospace`,padding:`12px`,background:`#f8fafc`,borderRadius:`8px`,fontSize:`13px`},children:`ta_prod_`})]})]}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`},children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`Blockchain Verification`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`NFT records for inventory and deals via VENLY`})]}),(0,$.jsx)(`span`,{className:`badge ${f.blockchain.enabled?`badge-completed`:``}`,style:{fontSize:`11px`},children:f.blockchain.enabled?`Active`:`Inactive`})]}),(0,$.jsxs)(`div`,{style:{padding:`16px`},children:[(0,$.jsxs)(`div`,{style:{padding:`16px`,background:f.blockchain.enabled?`#f0fdf4`:`#f8fafc`,border:f.blockchain.enabled?`1px solid #86efac`:`1px solid #e5e7eb`,borderRadius:`12px`,marginBottom:`16px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`,marginBottom:`12px`},children:[(0,$.jsx)(`input`,{type:`checkbox`,checked:f.blockchain.enabled,onChange:e=>p({...f,blockchain:{...f.blockchain,enabled:e.target.checked}}),style:{width:`20px`,height:`20px`}}),(0,$.jsxs)(`div`,{style:{flex:1},children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`4px`},children:`Enable Blockchain Records`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:`Create immutable NFT records of inventory and customer deals on Polygon`})]})]}),f.blockchain.enabled&&(0,$.jsxs)(`div`,{style:{paddingTop:`12px`,borderTop:`1px solid #e5e7eb`,display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`12px`,fontSize:`13px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{color:`var(--textMuted)`,marginBottom:`4px`},children:`Inventory on Chain`}),(0,$.jsx)(`div`,{style:{fontWeight:600,fontSize:`18px`},children:f.blockchain.inventoryOnChain})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{color:`var(--textMuted)`,marginBottom:`4px`},children:`Deals on Chain`}),(0,$.jsx)(`div`,{style:{fontWeight:600,fontSize:`18px`},children:f.blockchain.dealsOnChain})]})]})]}),(0,$.jsxs)(`div`,{style:{padding:`12px`,background:`#fff5f5`,border:`1px solid #fecaca`,borderRadius:`8px`,fontSize:`13px`,marginBottom:`12px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`4px`},children:`Cost Notice`}),(0,$.jsx)(`div`,{style:{color:`#dc2626`},children:`VENLY blockchain integration costs $700/month when active. Requires 30+ active clients to justify the expense. Only enable when you have scale.`})]})]})]}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`AI Assistant Rules (RAAS)`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Custom rules and compliance settings for your AI assistant`})]})}),(0,$.jsxs)(`div`,{style:{padding:`16px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`var(--textMuted)`,marginBottom:`8px`},children:`These rules were set during onboarding. You can update them anytime.`}),(0,$.jsx)(`div`,{style:{padding:`12px`,background:`#f8fafc`,borderRadius:`8px`,fontSize:`14px`,lineHeight:1.6,minHeight:`60px`,color:`#374151`},children:localStorage.getItem(`RAAS_RULES`)||`Standard rules (no custom rules set)`})]})]}),c===`analyst`&&(0,$.jsxs)(`div`,{style:{marginBottom:`16px`,padding:`24px`,background:`white`,borderRadius:`12px`,border:`1px solid #e2e8f0`},children:[(0,$.jsx)(`h2`,{style:{fontSize:`20px`,fontWeight:`bold`,marginBottom:`4px`},children:`Billing & Subscription`}),(0,$.jsx)(`p`,{style:{color:`#64748b`,fontSize:`14px`,marginBottom:`20px`},children:`Manage your plan, seats, and billing`}),(0,$.jsxs)(`div`,{style:{padding:`16px`,background:`#f5f3ff`,borderRadius:`8px`,marginBottom:`20px`,display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:`18px`,fontWeight:`700`},children:`TitleApp AI Pro`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`},children:`$9/user/month  Billed monthly`})]}),(0,$.jsx)(`span`,{style:{padding:`4px 12px`,background:`#ede9fe`,color:`#7c3aed`,borderRadius:`20px`,fontSize:`13px`,fontWeight:`600`},children:`Active`})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr 1fr`,gap:`16px`,marginBottom:`20px`},children:[(0,$.jsxs)(`div`,{style:{padding:`16px`,background:`#f8fafc`,borderRadius:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`},children:`NEXT PAYMENT`}),(0,$.jsx)(`div`,{style:{fontSize:`18px`,fontWeight:`bold`},children:`Mar 18, 2026`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`},children:`$9.00`})]}),(0,$.jsxs)(`div`,{style:{padding:`16px`,background:`#f8fafc`,borderRadius:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`},children:`TEAM SEATS`}),(0,$.jsx)(`div`,{style:{fontSize:`18px`,fontWeight:`bold`},children:`1 of 1`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#7c3aed`,cursor:`pointer`},children:`+ Add seat`})]}),(0,$.jsxs)(`div`,{style:{padding:`16px`,background:`#f8fafc`,borderRadius:`8px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`},children:`PLAN STARTED`}),(0,$.jsx)(`div`,{style:{fontSize:`18px`,fontWeight:`bold`},children:`Feb 18, 2026`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`},children:`Monthly billing`})]})]}),(0,$.jsx)(`h3`,{style:{fontSize:`16px`,fontWeight:`600`,marginBottom:`12px`},children:`Usage This Month`}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr 1fr 1fr`,gap:`12px`,marginBottom:`20px`},children:[(0,$.jsxs)(`div`,{style:{padding:`12px`,border:`1px solid #e2e8f0`,borderRadius:`8px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:`bold`},children:`5`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`Deals Analyzed`})]}),(0,$.jsxs)(`div`,{style:{padding:`12px`,border:`1px solid #e2e8f0`,borderRadius:`8px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:`bold`},children:`4`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`Opportunities Found`})]}),(0,$.jsxs)(`div`,{style:{padding:`12px`,border:`1px solid #e2e8f0`,borderRadius:`8px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:`bold`},children:`3`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`Reports Generated`})]}),(0,$.jsxs)(`div`,{style:{padding:`12px`,border:`1px solid #e2e8f0`,borderRadius:`8px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:`bold`},children:`12`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:`AI Conversations`})]})]}),(0,$.jsx)(`h3`,{style:{fontSize:`16px`,fontWeight:`600`,marginBottom:`12px`},children:`What's Included`}),(0,$.jsx)(`div`,{style:{padding:`16px`,background:`#f8fafc`,borderRadius:`8px`},children:(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`8px`,fontSize:`14px`},children:[(0,$.jsx)(`div`,{children:` Unlimited deal analysis`}),(0,$.jsx)(`div`,{children:` AI Assistant`}),(0,$.jsx)(`div`,{children:` AI deal sourcing (overnight scans)`}),(0,$.jsx)(`div`,{children:` Risk scoring & RAAS validation`}),(0,$.jsx)(`div`,{children:` IC-ready report generation`}),(0,$.jsx)(`div`,{children:` Email/text outreach from AI`}),(0,$.jsx)(`div`,{children:` Team collaboration (per seat)`}),(0,$.jsx)(`div`,{children:` Services & fee tracking`})]})}),(0,$.jsxs)(`div`,{style:{marginTop:`20px`,display:`flex`,gap:`12px`},children:[(0,$.jsx)(`button`,{style:{padding:`10px 20px`,backgroundColor:`#7c3aed`,color:`white`,border:`none`,borderRadius:`8px`,cursor:`pointer`,fontWeight:`600`},children:`Manage Plan`}),(0,$.jsx)(`button`,{style:{padding:`10px 20px`,backgroundColor:`white`,color:`#64748b`,border:`1px solid #e2e8f0`,borderRadius:`8px`,cursor:`pointer`},children:`Billing History`})]})]}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`,borderColor:`#e9d5ff`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`Developer Tools`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Testing and debugging utilities`})]})}),(0,$.jsxs)(`div`,{style:{padding:`16px`,display:`flex`,flexDirection:`column`,gap:`12px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600},children:`Reset Onboarding`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:`Clear onboarding state and restart the setup flow.`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,style:{color:`#f59e0b`,borderColor:`#fcd34d`},onClick:()=>{window.confirm(`This will reset your onboarding flow. Your existing data will be preserved. Continue?`)&&(localStorage.removeItem(`TENANT_ID`),localStorage.removeItem(`VERTICAL`),localStorage.removeItem(`JURISDICTION`),localStorage.removeItem(`ONBOARDING_STATE`),window.location.reload())},children:`Reset`})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600},children:`Clear Sample Data`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:`Remove sample data and show empty-state dashboard.`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,style:{color:`#d97706`,borderColor:`#fcd34d`},onClick:()=>{if(window.confirm(`This will clear sample data from your workspace. Continue?`)){try{let e=JSON.parse(localStorage.getItem(`ONBOARDING_STATE`)||`{}`);e.dataSource=`none`,localStorage.setItem(`ONBOARDING_STATE`,JSON.stringify(e))}catch{localStorage.setItem(`ONBOARDING_STATE`,JSON.stringify({dataSource:`none`}))}window.location.reload()}},children:`Clear`})]}),(0,$.jsx)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600},children:`Current Config`}),(0,$.jsxs)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:[`Vertical: `,localStorage.getItem(`VERTICAL`)||`auto`,` | Jurisdiction: `,localStorage.getItem(`JURISDICTION`)||`IL`,` | Tenant: `,localStorage.getItem(`TENANT_ID`)||`none`]})]})})]})]}),(()=>{try{let e=JSON.parse(localStorage.getItem(`ONBOARDING_STATE`)||`{}`)?.integrations;return e&&Array.isArray(e)&&e.length>0?(0,$.jsxs)(`div`,{className:`card`,style:{marginTop:`16px`,marginBottom:`16px`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:`Selected Integrations`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Tools selected during onboarding`})]})}),(0,$.jsx)(`div`,{style:{padding:`16px`,display:`flex`,flexWrap:`wrap`,gap:`8px`},children:e.map(e=>(0,$.jsx)(`span`,{style:{fontSize:`13px`,fontWeight:600,padding:`4px 12px`,borderRadius:`20px`,background:`#f3e8ff`,color:`#7c3aed`},children:e},e))})]}):null}catch{return null}})(),(0,$.jsxs)(`div`,{className:`card`,style:{borderColor:`var(--danger)`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,style:{color:`var(--danger)`},children:`Danger Zone`}),(0,$.jsx)(`div`,{className:`cardSub`,children:`Irreversible actions`})]})}),(0,$.jsxs)(`div`,{style:{padding:`16px`,display:`flex`,flexDirection:`column`,gap:`12px`},children:[(0,$.jsx)(`button`,{className:`iconBtn`,style:{width:`fit-content`,color:`var(--danger)`},children:`Export All Data`}),(0,$.jsx)(`button`,{className:`iconBtn`,style:{width:`fit-content`,color:`var(--danger)`},children:`Delete Business Account`})]})]}),(0,$.jsxs)(Ev,{isOpen:m,onClose:()=>h(!1),title:g===`business`?`Edit Business Information`:`Edit Notifications`,onSubmit:S,submitLabel:`Save Changes`,children:[g===`business`&&(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Business Name`}),(0,$.jsx)(`input`,{type:`text`,value:y.name||``,onChange:e=>b({...y,name:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`}})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Type`}),(0,$.jsx)(`input`,{type:`text`,value:y.type||``,onChange:e=>b({...y,type:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`}})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Address`}),(0,$.jsx)(`input`,{type:`text`,value:y.address||``,onChange:e=>b({...y,address:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`}})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Phone`}),(0,$.jsx)(`input`,{type:`tel`,value:y.phone||``,onChange:e=>b({...y,phone:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`}})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600},children:`Email`}),(0,$.jsx)(`input`,{type:`email`,value:y.email||``,onChange:e=>b({...y,email:e.target.value}),style:{width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`}})]})]}),g===`notifications`&&(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:C().map(e=>(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`},children:[(0,$.jsx)(`input`,{type:`checkbox`,checked:y[e.key]||!1,onChange:t=>b({...y,[e.key]:t.target.checked})}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600},children:e.label}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`var(--textMuted)`},children:e.desc})]})]},e.key))})]})]})}function by(){return(localStorage.getItem(`VERTICAL`)||`auto`)===`consumer`?(0,$.jsx)(vy,{}):(0,$.jsx)(yy,{})}var xy=[{id:`tmcc-standard`,name:`TMCC Standard`,type:`financing`,rateRange:`4.9%  8.9%`,creditMin:650,termRange:`2484 months`,notes:`Toyota Motor Credit Corp. Tier 1 financing for new and CPO vehicles.`,dealerCostRange:`$0`,estimatedProfit:`Reserve markup 12%`},{id:`tmcc-subprime`,name:`TMCC Subprime`,type:`financing`,rateRange:`9.9%  18.9%`,creditMin:520,termRange:`2472 months`,notes:`Toyota Motor Credit subprime program. Higher reserve opportunity.`,dealerCostRange:`$0`,estimatedProfit:`Reserve markup 24%`},{id:`se-toyota`,name:`Southeast Toyota Finance`,type:`financing`,rateRange:`4.49%  7.9%`,creditMin:660,termRange:`2484 months`,notes:`Regional lender for Southeast Toyota distributors. Competitive rates.`,dealerCostRange:`$0`,estimatedProfit:`Reserve markup 12%`},{id:`chase-auto`,name:`Chase Auto Direct`,type:`financing`,rateRange:`5.49%  9.9%`,creditMin:620,termRange:`2484 months`,notes:`National lender. Good for near-prime customers who don't qualify for TMCC.`,dealerCostRange:`$0`,estimatedProfit:`Reserve markup 1.52.5%`},{id:`capital-one`,name:`Capital One Auto`,type:`financing`,rateRange:`6.9%  14.9%`,creditMin:580,termRange:`2472 months`,notes:`Broad credit spectrum. Flexible on trade equity and LTV.`,dealerCostRange:`$0`,estimatedProfit:`Reserve markup 23%`},{id:`tfs-lease-standard`,name:`TFS Lease Standard`,type:`lease`,rateRange:`.00125  .00295 MF`,creditMin:650,termRange:`2448 months`,notes:`Toyota Financial Services standard lease. Money factor varies by model and term.`,dealerCostRange:`$0`,estimatedProfit:`MF markup + acquisition fee`},{id:`tfs-lease-special`,name:`TFS Lease Special`,type:`lease`,rateRange:`.00098  .00195 MF`,creditMin:680,termRange:`2436 months`,notes:`Select models only. Promotional money factors for qualified buyers.`,dealerCostRange:`$0`,estimatedProfit:`MF markup + acquisition fee`}],Sy=[{id:`extra-care-platinum`,name:`Toyota Extra Care Platinum`,type:`warranty`,priceRange:`$1,295  $3,895`,coverage:`1,500+ components`,dealerCost:`$650  $1,800`,estimatedProfit:`$645  $2,095`,notes:`Comprehensive bumper-to-bumper. Best for new vehicle buyers financing 60+ months.`},{id:`extra-care-gold`,name:`Toyota Extra Care Gold`,type:`warranty`,priceRange:`$995  $2,995`,coverage:`900+ components`,dealerCost:`$500  $1,400`,estimatedProfit:`$495  $1,595`,notes:`Strong coverage minus some luxury components. Best for CPO and late-model used.`},{id:`gap`,name:`GAP Coverage`,type:`protection`,priceRange:`$595  $895`,coverage:`Covers loan-to-value gap in total loss`,dealerCost:`$195  $295`,estimatedProfit:`$400  $600`,notes:`Essential for customers with low down payment or negative equity trade-ins.`},{id:`toyoguard-platinum`,name:`ToyoGuard Platinum`,type:`protection`,priceRange:`$995  $1,295`,coverage:`Paint protection, interior, key, dent & ding`,dealerCost:`$350  $495`,estimatedProfit:`$645  $800`,notes:`Bundled appearance package. High margin. Easy to present as monthly payment add.`},{id:`tire-wheel`,name:`Tire & Wheel Protection`,type:`protection`,priceRange:`$495  $895`,coverage:`Road hazard tire/wheel replacement`,dealerCost:`$150  $295`,estimatedProfit:`$345  $600`,notes:`Good for Texas roads. Present with pothole/road hazard data.`},{id:`key-replacement`,name:`Key Replacement`,type:`protection`,priceRange:`$395  $495`,coverage:`Lost/stolen/damaged key fob replacement`,dealerCost:`$95  $145`,estimatedProfit:`$300  $350`,notes:`Modern key fobs cost $300$600 to replace. Easy close.`},{id:`windshield`,name:`Windshield Protection`,type:`protection`,priceRange:`$295  $395`,coverage:`Windshield chip repair and replacement`,dealerCost:`$75  $120`,estimatedProfit:`$220  $275`,notes:`Low cost, high margin. Bundle with Tire & Wheel for discount.`}];function Cy(){let[e,t]=(0,_.useState)(`financing`);function n(e){window.dispatchEvent(new CustomEvent(`ta:chatPrompt`,{detail:{message:e}}))}return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`F&I Products`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Financing, warranties, and protection products`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>n(`What F&I products should I recommend for a customer with a 680 credit score buying a new Camry?`),style:{background:`linear-gradient(135deg, #7c3aed, #6d28d9)`,color:`white`,border:`none`},children:`Ask AI`})]}),(0,$.jsx)(`div`,{style:{display:`flex`,gap:`0`,marginBottom:`20px`,borderBottom:`2px solid #e2e8f0`},children:[{id:`financing`,label:`Financing (${xy.length})`},{id:`protection`,label:`Protection Products (${Sy.length})`}].map(n=>(0,$.jsx)(`button`,{onClick:()=>t(n.id),style:{padding:`10px 20px`,fontSize:`14px`,fontWeight:600,border:`none`,borderBottom:e===n.id?`2px solid #7c3aed`:`2px solid transparent`,background:`transparent`,color:e===n.id?`#7c3aed`:`#64748b`,cursor:`pointer`,marginBottom:`-2px`},children:n.label},n.id))}),e===`financing`&&(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`14px`},children:xy.map(e=>(0,$.jsxs)(`div`,{className:`card`,style:{padding:`20px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`flex-start`,marginBottom:`12px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:`16px`,fontWeight:700,color:`#1e293b`},children:e.name}),(0,$.jsx)(`span`,{style:{display:`inline-block`,fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:e.type===`lease`?`#dbeafe`:`#ede9fe`,color:e.type===`lease`?`#2563eb`:`#7c3aed`,marginTop:`4px`,textTransform:`uppercase`},children:e.type})]}),(0,$.jsxs)(`div`,{style:{textAlign:`right`},children:[(0,$.jsx)(`div`,{style:{fontSize:`18px`,fontWeight:700,color:`#1e293b`},children:e.rateRange}),(0,$.jsxs)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:[`Min credit: `,e.creditMin]})]})]}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`,marginBottom:`10px`},children:e.notes}),(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,fontSize:`12px`,color:`#94a3b8`,borderTop:`1px solid #f1f5f9`,paddingTop:`10px`},children:[(0,$.jsxs)(`span`,{children:[`Terms: `,e.termRange]}),(0,$.jsx)(`span`,{style:{color:`#16a34a`,fontWeight:600},children:e.estimatedProfit})]})]},e.id))}),e===`protection`&&(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`14px`},children:Sy.map(e=>(0,$.jsxs)(`div`,{className:`card`,style:{padding:`20px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`flex-start`,marginBottom:`12px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:`16px`,fontWeight:700,color:`#1e293b`},children:e.name}),(0,$.jsx)(`span`,{style:{display:`inline-block`,fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:e.type===`warranty`?`#fef3c7`:`#dbeafe`,color:e.type===`warranty`?`#d97706`:`#2563eb`,marginTop:`4px`,textTransform:`uppercase`},children:e.type})]}),(0,$.jsx)(`div`,{style:{textAlign:`right`},children:(0,$.jsx)(`div`,{style:{fontSize:`18px`,fontWeight:700,color:`#1e293b`},children:e.priceRange})})]}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#334155`,marginBottom:`6px`},children:e.coverage}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`,marginBottom:`10px`},children:e.notes}),(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,fontSize:`12px`,borderTop:`1px solid #f1f5f9`,paddingTop:`10px`},children:[(0,$.jsxs)(`span`,{style:{color:`#94a3b8`},children:[`Dealer cost: `,e.dealerCost]}),(0,$.jsxs)(`span`,{style:{color:`#16a34a`,fontWeight:700},children:[`Profit: `,e.estimatedProfit]})]})]},e.id))})]})}var wy={Monday:[{time:`7:00 AM`,customer:`Lawrence Foster`,vehicle:`2024 Camry SE`,vin:`...N25012`,service:`30K Maintenance`,advisor:`Mike Torres`,bay:3,cost:389,status:`confirmed`,upsell:null,salesOpp:{strength:`possible`,note:`2024 Camry, 30K mi -- nurture`}},{time:`7:30 AM`,customer:`Patricia Adams`,vehicle:`2023 RAV4 XLE`,vin:`...R23045`,service:`Oil Change + Tire Rotation`,advisor:`Mike Torres`,bay:5,cost:129,status:`confirmed`,upsell:`Cabin air filter ($45)`,salesOpp:null},{time:`8:00 AM`,customer:`Charles Cox`,vehicle:`2023 Tacoma TRD Sport`,vin:`...T23088`,service:`60K Major Service`,advisor:`Sarah Kim`,bay:1,cost:449,status:`confirmed`,upsell:`Factory warranty expiring -- pitch Extra Care Gold ($2,995)`,salesOpp:{strength:`strong`,note:`High mileage, 2025 Tacoma available, $42,300`}},{time:`9:00 AM`,customer:`James Mitchell`,vehicle:`2022 Highlander Limited`,vin:`...H22033`,service:`Brake Inspection + Pads`,advisor:`Sarah Kim`,bay:7,cost:285,status:`confirmed`,upsell:null,salesOpp:{strength:`possible`,note:`2022 Highlander, explore trade-up`}},{time:`10:00 AM`,customer:`Robert Chen`,vehicle:`2025 Corolla Cross LE`,vin:`...C25001`,service:`First Oil Change (complimentary)`,advisor:`Mike Torres`,bay:4,cost:0,status:`confirmed`,upsell:`ToyoGuard Platinum presentation ($995)`,salesOpp:null},{time:`11:00 AM`,customer:`Angela Williams`,vehicle:`2021 Prius Prime`,vin:`...P21019`,service:`Hybrid Battery Check + Multi-Point`,advisor:`David Park`,bay:2,cost:95,status:`pending`,upsell:`Vehicle 4+ years old -- trade-up candidate`,salesOpp:{strength:`strong`,note:`2021 Prius aging, 2025 Prius Prime available, $34,800`}},{time:`1:00 PM`,customer:`Thomas Garcia`,vehicle:`2024 Tundra SR5`,vin:`...U24007`,service:`Recall Campaign -- Seat Belt Retractor`,advisor:`David Park`,bay:8,cost:0,status:`confirmed`,upsell:null,salesOpp:{strength:`possible`,note:`2024 Tundra, discuss accessories/protection`}},{time:`2:30 PM`,customer:`Diana Brooks`,vehicle:`2022 Venza Limited`,vin:`...V22015`,service:`Transmission Flush + Coolant`,advisor:`Sarah Kim`,bay:6,cost:329,status:`pending`,upsell:`Approaching 50K -- present extended warranty options`,salesOpp:{strength:`strong`,note:`Crown comparable -- $2K equity advantage`}}],Tuesday:[{time:`7:00 AM`,customer:`Kevin O'Brien`,vehicle:`2024 4Runner TRD Off-Road`,vin:`...4R24003`,service:`Suspension Check + Alignment`,advisor:`Mike Torres`,bay:1,cost:189,status:`confirmed`,upsell:null,salesOpp:null},{time:`8:00 AM`,customer:`Sandra Lee`,vehicle:`2023 Camry XSE`,vin:`...N23044`,service:`Oil Change + Multi-Point`,advisor:`Sarah Kim`,bay:3,cost:89,status:`confirmed`,upsell:`Wiper blades ($35)`,salesOpp:null},{time:`9:30 AM`,customer:`Michael Wong`,vehicle:`2025 RAV4 Hybrid XLE`,vin:`...R25011`,service:`5K First Service`,advisor:`David Park`,bay:5,cost:0,status:`confirmed`,upsell:`Paint protection film ($495)`,salesOpp:null},{time:`10:00 AM`,customer:`Lisa Johnson`,vehicle:`2022 Corolla LE`,vin:`...C22089`,service:`AC Compressor Diagnosis`,advisor:`Mike Torres`,bay:9,cost:149,status:`pending`,upsell:null,salesOpp:{strength:`strong`,note:`Repair cost high -- present Corolla Cross upgrade`}},{time:`11:30 AM`,customer:`Fleet - Demo Motors`,vehicle:`2024 Camry LE (Loaner)`,vin:`...N24L01`,service:`Loaner Return Inspection`,advisor:`David Park`,bay:2,cost:0,status:`confirmed`,upsell:null,salesOpp:null}],Wednesday:[{time:`7:00 AM`,customer:`Richard Brown`,vehicle:`2023 Tundra Limited`,vin:`...U23015`,service:`45K Service`,advisor:`Sarah Kim`,bay:1,cost:359,status:`confirmed`,upsell:`Bed liner application ($595)`,salesOpp:{strength:`possible`,note:`Approaching high mileage, 2025 Tundra available`}},{time:`8:00 AM`,customer:`Jennifer Patel`,vehicle:`2024 Crown Platinum`,vin:`...CR24002`,service:`Oil Change`,advisor:`Mike Torres`,bay:4,cost:89,status:`confirmed`,upsell:null,salesOpp:null},{time:`9:00 AM`,customer:`William Davis`,vehicle:`2025 GR86 Premium`,vin:`...G25001`,service:`Performance Alignment`,advisor:`David Park`,bay:7,cost:179,status:`confirmed`,upsell:null,salesOpp:null},{time:`10:30 AM`,customer:`Carol Thompson`,vehicle:`2022 Highlander XLE`,vin:`...H22078`,service:`Brake Pads + Rotors`,advisor:`Sarah Kim`,bay:3,cost:445,status:`pending`,upsell:`Approaching 60K -- warranty pitch`,salesOpp:{strength:`strong`,note:`Grand Highlander -- $4K positive equity`}},{time:`1:00 PM`,customer:`George Martinez`,vehicle:`2021 Tacoma SR`,vin:`...T21055`,service:`Recall -- Leaf Spring`,advisor:`Mike Torres`,bay:10,cost:0,status:`confirmed`,upsell:`Vehicle 5 years old -- trade-up opportunity`,salesOpp:{strength:`strong`,note:`5 yrs old, strong residual -- 2025 Tacoma SR5`}}],Thursday:[{time:`7:00 AM`,customer:`Nancy Wilson`,vehicle:`2024 Venza XLE`,vin:`...V24008`,service:`15K Service`,advisor:`David Park`,bay:2,cost:219,status:`confirmed`,upsell:null,salesOpp:null},{time:`8:30 AM`,customer:`Paul Rodriguez`,vehicle:`2023 RAV4 TRD Off-Road`,vin:`...R23077`,service:`4WD System Check`,advisor:`Sarah Kim`,bay:6,cost:129,status:`confirmed`,upsell:null,salesOpp:null},{time:`9:00 AM`,customer:`Maria Gonzalez`,vehicle:`2024 Corolla LE`,vin:`...C24033`,service:`Tire Rotation + Inspection`,advisor:`Mike Torres`,bay:3,cost:49,status:`pending`,upsell:`Lease expiring in 60 days -- upgrade discussion`,salesOpp:{strength:`strong`,note:`Lease ends Apr 2026 -- present Corolla Hybrid`}},{time:`11:00 AM`,customer:`Steven Park`,vehicle:`2025 Sequoia Capstone`,vin:`...S25001`,service:`First Oil Change`,advisor:`David Park`,bay:1,cost:0,status:`confirmed`,upsell:`ToyoGuard + Tire & Wheel bundle ($1,295)`,salesOpp:null},{time:`1:30 PM`,customer:`Barbara Kim`,vehicle:`2022 Prius LE`,vin:`...P22041`,service:`Hybrid System Diagnostic`,advisor:`Sarah Kim`,bay:8,cost:149,status:`confirmed`,upsell:null,salesOpp:{strength:`possible`,note:`3+ yrs, monitor for trade-up`}},{time:`3:00 PM`,customer:`Fleet - Houston Metro`,vehicle:`2024 Camry LE (x3)`,vin:`...fleet`,service:`Fleet 10K Service (3 vehicles)`,advisor:`Mike Torres`,bay:`4,5,6`,cost:267,status:`confirmed`,upsell:null,salesOpp:null}],Friday:[{time:`7:00 AM`,customer:`Daniel Green`,vehicle:`2023 Camry TRD`,vin:`...N23TRD`,service:`Performance Brake Service`,advisor:`David Park`,bay:1,cost:389,status:`confirmed`,upsell:null,salesOpp:null},{time:`8:00 AM`,customer:`Susan White`,vehicle:`2024 Grand Highlander Platinum`,vin:`...GH24005`,service:`Oil Change + Multi-Point`,advisor:`Sarah Kim`,bay:3,cost:99,status:`confirmed`,upsell:null,salesOpp:null},{time:`9:30 AM`,customer:`Mark Brown`,vehicle:`2025 Corolla Cross LE`,vin:`...CC25009`,service:`5K First Service`,advisor:`Mike Torres`,bay:5,cost:0,status:`confirmed`,upsell:`Cross-sell RAV4 upgrade opportunity`,salesOpp:{strength:`possible`,note:`RAV4 Hybrid -- natural upgrade path`}},{time:`11:00 AM`,customer:`Recon - Used`,vehicle:`2021 BMW X3 xDrive30i`,vin:`...U30000`,service:`Pre-Sale Reconditioning`,advisor:`Mike Torres`,bay:11,cost:850,status:`in-progress`,upsell:null,salesOpp:null},{time:`1:00 PM`,customer:`Karen Taylor`,vehicle:`2022 4Runner SR5`,vin:`...4R22019`,service:`75K Major Service`,advisor:`David Park`,bay:2,cost:549,status:`pending`,upsell:`Extended warranty -- factory coverage ending`,salesOpp:{strength:`strong`,note:`High mileage -- 2025 4Runner or Grand Highlander`}}]},Ty=[`Monday`,`Tuesday`,`Wednesday`,`Thursday`,`Friday`];function Ey(){let[e,t]=(0,_.useState)(`Monday`),n=wy[e]||[],r=n.reduce((e,t)=>e+t.cost,0),i=n.filter(e=>e.upsell).length,a=n.filter(e=>e.salesOpp).length,o=n.filter(e=>e.status===`confirmed`).length;function s(e){window.dispatchEvent(new CustomEvent(`ta:chatPrompt`,{detail:{message:e}}))}return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Service Schedule`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Weekly service appointments, upsell opportunities, and bay assignments`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>s(`Show me the service upsell opportunities for this week`),style:{background:`linear-gradient(135deg, #7c3aed, #6d28d9)`,color:`white`,border:`none`},children:`AI Upsell Report`})]}),(0,$.jsxs)(`div`,{className:`kpiRow`,style:{marginBottom:`20px`},children:[(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Appointments Today`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:n.length})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Service Revenue`}),(0,$.jsxs)(`div`,{className:`kpiValue`,children:[`$`,r.toLocaleString()]})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Upsell Opportunities`}),(0,$.jsx)(`div`,{className:`kpiValue`,style:{color:i>0?`#d97706`:void 0},children:i})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Sales Opportunities`}),(0,$.jsx)(`div`,{className:`kpiValue`,style:{color:a>0?`#7c3aed`:void 0},children:a})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Confirmed`}),(0,$.jsxs)(`div`,{className:`kpiValue`,children:[o,` / `,n.length]})]})]}),(0,$.jsx)(`div`,{style:{display:`flex`,gap:`0`,marginBottom:`20px`,borderBottom:`2px solid #e2e8f0`},children:Ty.map(n=>(0,$.jsx)(`button`,{onClick:()=>t(n),style:{padding:`10px 20px`,fontSize:`14px`,fontWeight:600,border:`none`,borderBottom:e===n?`2px solid #7c3aed`:`2px solid transparent`,background:`transparent`,color:e===n?`#7c3aed`:`#64748b`,cursor:`pointer`,marginBottom:`-2px`},children:n},n))}),(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{className:`tableWrap`,children:(0,$.jsxs)(`table`,{className:`table`,style:{width:`100%`},children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{children:`Time`}),(0,$.jsx)(`th`,{children:`Customer`}),(0,$.jsx)(`th`,{children:`Vehicle`}),(0,$.jsx)(`th`,{children:`Service`}),(0,$.jsx)(`th`,{children:`Advisor`}),(0,$.jsx)(`th`,{children:`Bay`}),(0,$.jsx)(`th`,{children:`Est. Cost`}),(0,$.jsx)(`th`,{children:`Sales Opp`}),(0,$.jsx)(`th`,{children:`Status`})]})}),(0,$.jsx)(`tbody`,{children:n.map((e,t)=>(0,$.jsxs)(`tr`,{style:{cursor:`pointer`},onClick:()=>s(`Tell me about ${e.customer}'s ${e.service} appointment for their ${e.vehicle}`),children:[(0,$.jsx)(`td`,{style:{fontWeight:600,whiteSpace:`nowrap`},children:e.time}),(0,$.jsx)(`td`,{className:`tdStrong`,children:e.customer}),(0,$.jsxs)(`td`,{children:[(0,$.jsx)(`div`,{children:e.vehicle}),(0,$.jsx)(`div`,{style:{fontSize:`11px`,color:`#94a3b8`},children:e.vin})]}),(0,$.jsx)(`td`,{children:e.service}),(0,$.jsx)(`td`,{className:`tdMuted`,children:e.advisor}),(0,$.jsx)(`td`,{style:{textAlign:`center`},children:e.bay}),(0,$.jsx)(`td`,{style:{fontWeight:600},children:e.cost>0?`$${e.cost}`:`Comp`}),(0,$.jsx)(`td`,{children:e.salesOpp?(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`flex-start`,gap:`8px`,cursor:`pointer`},onClick:t=>{t.stopPropagation(),s(`${e.customer} is in for ${e.service} on their ${e.vehicle}. Sales opportunity: ${e.salesOpp.note}. What's the best approach?`)},children:[(0,$.jsx)(`div`,{style:{width:`10px`,height:`10px`,borderRadius:`50%`,flexShrink:0,marginTop:`3px`,background:e.salesOpp.strength===`strong`?`#16a34a`:`#d97706`}}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#334155`,maxWidth:`180px`,lineHeight:1.4},children:e.salesOpp.note})]}):(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{width:`10px`,height:`10px`,borderRadius:`50%`,background:`#e2e8f0`,flexShrink:0}}),(0,$.jsx)(`span`,{style:{color:`#cbd5e1`,fontSize:`12px`},children:`No match`})]})}),(0,$.jsx)(`td`,{children:(0,$.jsx)(`span`,{style:{display:`inline-block`,fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:e.status===`confirmed`?`#dcfce7`:e.status===`in-progress`?`#dbeafe`:`#fef3c7`,color:e.status===`confirmed`?`#16a34a`:e.status===`in-progress`?`#2563eb`:`#d97706`},children:e.status})})]},t))})]})})}),n.filter(e=>e.upsell).length>0&&(0,$.jsxs)(`div`,{style:{marginTop:`20px`},children:[(0,$.jsxs)(`h2`,{style:{fontSize:`18px`,fontWeight:700,marginBottom:`12px`},children:[`Upsell Opportunities -- `,e]}),(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`14px`},children:n.filter(e=>e.upsell).map((e,t)=>(0,$.jsxs)(`div`,{className:`card`,style:{padding:`16px`,borderLeft:`4px solid #d97706`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`15px`,marginBottom:`4px`},children:e.customer}),(0,$.jsxs)(`div`,{style:{fontSize:`13px`,color:`#64748b`,marginBottom:`8px`},children:[e.vehicle,` -- `,e.service]}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`#d97706`,fontWeight:600,marginBottom:`10px`},children:e.upsell}),(0,$.jsx)(`button`,{onClick:()=>s(`${e.customer} is coming in for ${e.service} on their ${e.vehicle}. The upsell opportunity is: ${e.upsell}. Draft a pitch I can use when they arrive.`),style:{padding:`6px 14px`,fontSize:`13px`,fontWeight:600,border:`none`,borderRadius:`8px`,cursor:`pointer`,color:`#fff`,background:`linear-gradient(135deg, #7c3aed, #6d28d9)`},children:`Draft Pitch`})]},t))})]})]})}var Dy=[{id:`lead`,label:`Lead`,color:`#64748b`},{id:`contacted`,label:`Contacted`,color:`#2563eb`},{id:`test-drive`,label:`Test Drive`,color:`#7c3aed`},{id:`negotiation`,label:`Negotiation`,color:`#d97706`},{id:`fi-desk`,label:`F&I Desk`,color:`#16a34a`},{id:`sold`,label:`Sold`,color:`#059669`}],Oy=[{id:1,customer:`Maria Gonzalez`,vehicle:`2025 Corolla LE`,value:24500,stage:`contacted`,salesperson:`Jake Rivera`,daysInStage:2,notes:`Lease expiring. Cash buyer. Matched to 3 vehicles.`,source:`AI -- Lease Expiring`,assignedTo:{type:`ai`,name:`Alex (AI)`}},{id:2,customer:`Web Lead -- Amanda Liu`,vehicle:`2025 RAV4 XLE`,value:34200,stage:`lead`,salesperson:`Unassigned`,daysInStage:1,notes:`TrueCar lead. Requested quote on RAV4 XLE in Lunar Rock.`,source:`TrueCar`,assignedTo:{type:`ai`,name:`Alex (AI)`}},{id:3,customer:`Robert Chen`,vehicle:`2025 Camry XSE`,value:32800,stage:`test-drive`,salesperson:`Jake Rivera`,daysInStage:1,notes:`Drove Camry XSE and Crown. Leaning XSE. Coming back Saturday.`,source:`Walk-In`,assignedTo:{type:`human`,name:`Jake Rivera`}},{id:4,customer:`Mark Brown`,vehicle:`2025 RAV4 XLE Premium`,value:37500,stage:`negotiation`,salesperson:`Lisa Chen`,daysInStage:3,notes:`Trade-in 2025 Corolla Cross. Approved TMCC Tier 1. Working numbers.`,source:`AI -- Trade-Up`,assignedTo:{type:`human`,name:`Lisa Chen`}},{id:5,customer:`James Mitchell`,vehicle:`2024 Tundra SR5 CrewMax`,value:48900,stage:`fi-desk`,salesperson:`Jake Rivera`,daysInStage:0,notes:`Approved Chase Auto 5.49%. Presenting warranty menu today.`,source:`Referral`,assignedTo:{type:`human`,name:`Jake Rivera`}},{id:6,customer:`Thomas Garcia`,vehicle:`2025 Tacoma TRD Sport`,value:42300,stage:`contacted`,salesperson:`Lisa Chen`,daysInStage:4,notes:`Phone inquiry. Wants to compare with Colorado. Invited for Saturday.`,source:`Phone`,assignedTo:{type:`human`,name:`Lisa Chen`}},{id:7,customer:`Kevin O'Brien`,vehicle:`2022 Ford Explorer XLT (Used)`,value:28500,stage:`negotiation`,salesperson:`Jake Rivera`,daysInStage:2,notes:`Wants $2K off. Stock U30012, 86 days on lot. Room to negotiate.`,source:`Facebook Marketplace`,assignedTo:{type:`human`,name:`Jake Rivera`}},{id:8,customer:`Sandra Lee`,vehicle:`2025 Highlander XLE`,value:42900,stage:`lead`,salesperson:`Unassigned`,daysInStage:0,notes:`Autotrader lead. Requested info on Highlander lease specials.`,source:`Autotrader`,assignedTo:{type:`ai`,name:`Alex (AI)`}},{id:9,customer:`Patricia Adams`,vehicle:`2025 Camry LE`,value:28400,stage:`sold`,salesperson:`Lisa Chen`,daysInStage:0,notes:`Delivered yesterday. Extra Care Gold + GAP added. Great deal.`,source:`AI -- Service Upsell`,assignedTo:{type:`human`,name:`Lisa Chen`}},{id:10,customer:`Daniel Green`,vehicle:`2025 GR86 Premium`,value:33500,stage:`sold`,salesperson:`Jake Rivera`,daysInStage:0,notes:`Cash deal. ToyoGuard added. Enthusiast buyer.`,source:`Walk-In`,assignedTo:{type:`human`,name:`Jake Rivera`}}];function ky(){let[e,t]=(0,_.useState)(null);function n(e){window.dispatchEvent(new CustomEvent(`ta:chatPrompt`,{detail:{message:e}}))}let r=Oy.filter(e=>e.stage!==`sold`).reduce((e,t)=>e+t.value,0),i=Oy.filter(e=>e.stage===`sold`),a=i.reduce((e,t)=>e+t.value,0);return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Sales Pipeline`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Active deals by stage`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>n(`Give me a pipeline summary. What deals are stalling and what should I prioritize today?`),style:{background:`linear-gradient(135deg, #7c3aed, #6d28d9)`,color:`white`,border:`none`},children:`AI Pipeline Brief`})]}),(0,$.jsxs)(`div`,{className:`kpiRow`,style:{marginBottom:`20px`},children:[(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Active Deals`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:Oy.filter(e=>e.stage!==`sold`).length})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Pipeline Value`}),(0,$.jsxs)(`div`,{className:`kpiValue`,children:[`$`,r.toLocaleString()]})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Sold This Month`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:i.length})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Sold Value`}),(0,$.jsxs)(`div`,{className:`kpiValue`,style:{color:`#16a34a`},children:[`$`,a.toLocaleString()]})]})]}),(0,$.jsx)(`div`,{style:{display:`flex`,gap:`12px`,overflowX:`auto`,paddingBottom:`8px`},children:Dy.map(e=>{let r=Oy.filter(t=>t.stage===e.id),i=r.reduce((e,t)=>e+t.value,0);return(0,$.jsxs)(`div`,{style:{minWidth:`220px`,flex:1},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,marginBottom:`8px`,padding:`0 4px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`6px`},children:[(0,$.jsx)(`div`,{style:{width:`10px`,height:`10px`,borderRadius:`50%`,background:e.color}}),(0,$.jsx)(`span`,{style:{fontSize:`13px`,fontWeight:700,color:`#1e293b`},children:e.label})]}),(0,$.jsx)(`span`,{style:{fontSize:`12px`,color:`#94a3b8`},children:r.length})]}),(0,$.jsxs)(`div`,{style:{fontSize:`12px`,color:`#64748b`,marginBottom:`8px`,padding:`0 4px`},children:[`$`,i.toLocaleString()]}),(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`8px`},children:[r.map(r=>(0,$.jsxs)(`div`,{className:`card`,style:{padding:`12px`,cursor:`pointer`,borderLeft:`3px solid ${e.color}`},onClick:()=>{t(r),n(`Tell me about the ${r.customer} deal for the ${r.vehicle}. Current stage: ${e.label}. What should we do next?`)},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`13px`,marginBottom:`2px`},children:r.customer}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`,marginBottom:`4px`},children:r.vehicle}),(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsxs)(`span`,{style:{fontSize:`14px`,fontWeight:700,color:`#1e293b`},children:[`$`,r.value.toLocaleString()]}),r.daysInStage>3&&(0,$.jsxs)(`span`,{style:{fontSize:`10px`,fontWeight:600,padding:`1px 6px`,borderRadius:`4px`,background:`#fee2e2`,color:`#dc2626`},children:[r.daysInStage,`d`]})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,justifyContent:`space-between`,marginTop:`4px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`11px`,color:`#94a3b8`},children:r.source}),(0,$.jsx)(`span`,{style:{fontSize:`10px`,fontWeight:600,padding:`1px 6px`,borderRadius:`9999px`,background:r.assignedTo?.type===`ai`?`#f3e8ff`:`#f1f5f9`,color:r.assignedTo?.type===`ai`?`#7c3aed`:`#475569`},children:r.assignedTo?.type===`ai`?`AI`:r.assignedTo?.name?.split(` `).map(e=>e[0]).join(``)||r.salesperson.split(` `).map(e=>e[0]).join(``)})]})]},r.id)),r.length===0&&(0,$.jsx)(`div`,{style:{padding:`20px 12px`,textAlign:`center`,fontSize:`12px`,color:`#cbd5e1`,border:`1px dashed #e2e8f0`,borderRadius:`8px`},children:`No deals`})]})]},e.id)})})]})}var Ay=[{level:1,name:`Draft Only`,description:`AI prepares everything for your review. No actions taken without your explicit approval.`},{level:2,name:`Low Autonomy`,description:`AI handles routine tasks automatically (under set thresholds). High-value decisions require your approval.`},{level:3,name:`High Autonomy`,description:`AI manages day-to-day operations. You review weekly summaries and approve major decisions.`},{level:4,name:`Full Autopilot`,description:`AI runs all operations autonomously. You receive daily briefings and can override at any time.`}],jy={auto:{defaults:{globalLevel:1,sales:{respondToLeads:1,sendOutboundOffers:1,negotiatePricing:1,maxDiscount:500,scheduleTestDrives:1,generateBuyersOrders:1,maxAutonomousDealValue:35e3},service:{bookAppointments:1,authorizeWarrantyWork:1,maxWarrantyValue:500,sendServiceReminders:1,recommendUpsells:1,scheduleRecallNotifications:1},communication:{sendEmails:!0,emailLevel:1,sendTexts:!0,textLevel:1,makePhoneCalls:!1,dailyMessageLimit:50,disclaimerText:`This message was sent by an AI assistant on behalf of {dealership name}`,quietHoursStart:`21:00`,quietHoursEnd:`08:00`},marketing:{createCampaigns:1,maxCampaignBudget:250,submitCoopClaims:1,manageBudgetReallocation:1},fi:{recommendProducts:1,modelFinancing:1,generateDisclosures:1,maxBundleValue:5e3}},sections:[{key:`sales`,title:`Sales Permissions`,accent:`#16a34a`,defaultOpen:!0,rows:[{key:`respondToLeads`,label:`Respond to inbound leads`},{key:`sendOutboundOffers`,label:`Send outbound offers`},{key:`negotiatePricing`,label:`Negotiate pricing`,extra:{label:`Max discount: $`,field:`maxDiscount`,type:`number`}},{key:`scheduleTestDrives`,label:`Schedule test drives`},{key:`generateBuyersOrders`,label:`Generate buyer's orders`}],footer:{label:`Max autonomous deal value`,field:`maxAutonomousDealValue`,prefix:`$`}},{key:`service`,title:`Service Permissions`,accent:`#2563eb`,rows:[{key:`bookAppointments`,label:`Book service appointments`},{key:`authorizeWarrantyWork`,label:`Authorize warranty work`,extra:{label:`Max value: $`,field:`maxWarrantyValue`,type:`number`}},{key:`sendServiceReminders`,label:`Send service reminders`},{key:`recommendUpsells`,label:`Recommend upsells during service`},{key:`scheduleRecallNotifications`,label:`Schedule recall notifications`}]},{key:`communication`,title:`Communication Permissions`,accent:`#d97706`,type:`communication`},{key:`marketing`,title:`Marketing Permissions`,accent:`#ec4899`,rows:[{key:`createCampaigns`,label:`Create ad campaigns`}],footer:{label:`Max campaign budget without approval`,field:`maxCampaignBudget`,prefix:`$`},postRows:[{key:`submitCoopClaims`,label:`Submit co-op reimbursement claims`},{key:`manageBudgetReallocation`,label:`Manage channel budget reallocation`}]},{key:`fi`,title:`F&I Permissions`,accent:`#7c3aed`,rows:[{key:`recommendProducts`,label:`Recommend F&I products to customers`},{key:`modelFinancing`,label:`Model financing options`},{key:`generateDisclosures`,label:`Generate F&I disclosure documents`}],footer:{label:`Max F&I product bundle value to present`,field:`maxBundleValue`,prefix:`$`}}],playbookCategories:[`Sales Process`,`Word Tracks / Scripts`,`Objection Handling`,`F&I Playbook`,`Service Advisor Scripts`,`Pricing Policies`,`Trade-in Process`,`Delivery Process`,`Customer Communication Guidelines`,`Other / General`]},analyst:{defaults:{globalLevel:1,research:{generateMemos:1,updateModels:1,monitorPortfolio:1,sendMarketAlerts:1},clientLp:{draftUpdates:1,sendQuarterlyLetters:1,respondToInquiries:1,scheduleMeetings:1,maxCommunicationFrequency:10},trading:{generateRecommendations:1,setPriceAlerts:1,draftICMemos:1,maxPositionSize:1e6},compliance:{preScreenCommunications:1,flagRegulatoryIssues:1,maintainComplianceLog:1,reviewMarketingMaterials:1},communication:{sendEmails:!0,emailLevel:1,sendTexts:!0,textLevel:1,makePhoneCalls:!1,dailyMessageLimit:20,disclaimerText:`This message was sent by an AI assistant on behalf of {firm name}`,quietHoursStart:`21:00`,quietHoursEnd:`08:00`},marketing:{publishThoughtLeadership:1,manageLinkedIn:1,createEventMaterials:1,maxCampaignBudget:500}},sections:[{key:`research`,title:`Research Permissions`,accent:`#16a34a`,defaultOpen:!0,rows:[{key:`generateMemos`,label:`Generate research memos`},{key:`updateModels`,label:`Update financial models`},{key:`monitorPortfolio`,label:`Monitor portfolio companies`},{key:`sendMarketAlerts`,label:`Send market alerts`}]},{key:`clientLp`,title:`Client / LP Permissions`,accent:`#2563eb`,rows:[{key:`draftUpdates`,label:`Draft client updates`},{key:`sendQuarterlyLetters`,label:`Send quarterly letters`},{key:`respondToInquiries`,label:`Respond to LP inquiries`},{key:`scheduleMeetings`,label:`Schedule meetings`}],footer:{label:`Max outbound communications per week`,field:`maxCommunicationFrequency`}},{key:`trading`,title:`Trading Permissions`,accent:`#d97706`,rows:[{key:`generateRecommendations`,label:`Generate trade recommendations`},{key:`setPriceAlerts`,label:`Set price alerts`},{key:`draftICMemos`,label:`Draft investment committee memos`}],footer:{label:`Max position size for autonomous recommendations`,field:`maxPositionSize`,prefix:`$`}},{key:`compliance`,title:`Compliance Permissions`,accent:`#dc2626`,rows:[{key:`preScreenCommunications`,label:`Pre-screen external communications`},{key:`flagRegulatoryIssues`,label:`Flag regulatory issues`},{key:`maintainComplianceLog`,label:`Maintain compliance log`},{key:`reviewMarketingMaterials`,label:`Review marketing materials`}]},{key:`communication`,title:`Communication Permissions`,accent:`#64748b`,type:`communication`},{key:`marketing`,title:`Marketing Permissions`,accent:`#ec4899`,rows:[{key:`publishThoughtLeadership`,label:`Publish thought leadership content`},{key:`manageLinkedIn`,label:`Manage LinkedIn presence`},{key:`createEventMaterials`,label:`Create event materials`}],footer:{label:`Max campaign budget without approval`,field:`maxCampaignBudget`,prefix:`$`}}],playbookCategories:[`Investment Thesis Templates`,`Due Diligence Checklists`,`Client Communication Templates`,`Research Methodology`,`Risk Assessment Framework`,`LP Reporting Templates`,`Compliance Guidelines`,`Market Analysis Framework`,`Other / General`]},"real-estate":{defaults:{globalLevel:1,sales:{respondToLeads:1,sendRecommendations:1,scheduleShowings:1,draftOffers:1,draftDescriptions:1,generateCMAs:1,postClosingFollowup:1,priceAdjustmentRecs:1},pm:{respondToTenants:1,processMaintenanceRequests:1,maxAutoDispatch:500,sendRentReminders:1,serveLateNotices:1,draftRenewals:1,maxRentIncrease:5,marketVacantUnits:1,screenApplications:1,ownerCommunication:1},communication:{sendEmails:!0,emailLevel:1,sendTexts:!0,textLevel:1,makePhoneCalls:!1,dailyMessageLimit:100,disclaimerText:`This message was sent by an AI assistant on behalf of {brokerage name}`,quietHoursStart:`21:00`,quietHoursEnd:`08:00`},marketing:{socialMedia:1,paidAdvertising:1,directMail:1,emailCampaigns:1,maxCampaignBudget:500}},sections:[{key:`sales`,title:`Sales Permissions`,accent:`#16a34a`,defaultOpen:!0,rows:[{key:`respondToLeads`,label:`Respond to inbound leads (5-min target)`},{key:`sendRecommendations`,label:`Send property recommendations to buyers`},{key:`scheduleShowings`,label:`Schedule showings`},{key:`draftOffers`,label:`Draft purchase offers`},{key:`draftDescriptions`,label:`Generate listing descriptions`},{key:`generateCMAs`,label:`Generate comparative market analyses`},{key:`postClosingFollowup`,label:`Post-closing follow-up`},{key:`priceAdjustmentRecs`,label:`Recommend price adjustments`}]},{key:`pm`,title:`Property Management Permissions`,accent:`#2563eb`,rows:[{key:`respondToTenants`,label:`Respond to tenant communications`},{key:`processMaintenanceRequests`,label:`Process maintenance requests`,extra:{label:`Max auto-dispatch: $`,field:`maxAutoDispatch`,type:`number`}},{key:`sendRentReminders`,label:`Send rent reminders`},{key:`serveLateNotices`,label:`Serve late payment notices`},{key:`draftRenewals`,label:`Draft lease renewals`,extra:{label:`Max rent increase: %`,field:`maxRentIncrease`,type:`number`}},{key:`marketVacantUnits`,label:`Market vacant units`},{key:`screenApplications`,label:`Screen rental applications`},{key:`ownerCommunication`,label:`Owner communication and reporting`}]},{key:`communication`,title:`Communication Permissions`,accent:`#d97706`,type:`communication`},{key:`marketing`,title:`Marketing Permissions`,accent:`#ec4899`,rows:[{key:`socialMedia`,label:`Post to social media`},{key:`paidAdvertising`,label:`Create paid advertising`},{key:`directMail`,label:`Send direct mail`},{key:`emailCampaigns`,label:`Run email campaigns`}],footer:{label:`Max campaign budget without approval`,field:`maxCampaignBudget`,prefix:`$`}}],playbookCategories:[`Listing Process`,`Buyer Process`,`Showing Procedures`,`Offer & Negotiation`,`Transaction Management`,`Tenant Screening`,`Maintenance Procedures`,`Lease Management`,`Fair Housing Compliance`,`Communication Templates`,`Marketing Guidelines`,`Other / General`]}};function My({value:e,onChange:t,size:n=`normal`}){return(0,$.jsx)(`div`,{style:{display:`flex`,gap:`4px`},children:[1,2,3,4].map(r=>(0,$.jsx)(`button`,{onClick:()=>t(r),style:{width:n===`small`?`28px`:`32px`,height:n===`small`?`28px`:`32px`,borderRadius:`6px`,border:e===r?`2px solid #7c3aed`:`1px solid #e2e8f0`,background:e===r?`#f3e8ff`:`white`,color:e===r?`#7c3aed`:`#64748b`,fontWeight:700,fontSize:n===`small`?`12px`:`13px`,cursor:`pointer`},children:r},r))})}function Ny({label:e,levelValue:t,onLevelChange:n,extraLabel:r,extraValue:i,onExtraChange:a,extraType:o}){return(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`,padding:`10px 0`,borderBottom:`1px solid #f1f5f9`},children:[(0,$.jsx)(`div`,{style:{flex:1,fontSize:`14px`,color:`#334155`},children:e}),(0,$.jsx)(My,{value:t,onChange:n,size:`small`}),r&&(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`6px`},children:[(0,$.jsx)(`span`,{style:{fontSize:`12px`,color:`#94a3b8`},children:r}),o===`toggle`?(0,$.jsx)(`button`,{onClick:()=>a(!i),style:{width:`40px`,height:`22px`,borderRadius:`11px`,border:`none`,cursor:`pointer`,background:i?`#7c3aed`:`#e2e8f0`,position:`relative`,transition:`background 0.2s`},children:(0,$.jsx)(`div`,{style:{width:`18px`,height:`18px`,borderRadius:`50%`,background:`white`,position:`absolute`,top:`2px`,left:i?`20px`:`2px`,transition:`left 0.2s`}})}):(0,$.jsx)(`input`,{type:o===`number`?`number`:`text`,value:i,onChange:e=>a(o===`number`?Number(e.target.value):e.target.value),style:{width:`80px`,padding:`4px 8px`,borderRadius:`6px`,border:`1px solid #e2e8f0`,fontSize:`13px`,textAlign:`right`}})]})]})}function Py({label:e,enabled:t,onToggle:n,levelValue:r,onLevelChange:i,badge:a}){return(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`,padding:`10px 0`,borderBottom:`1px solid #f1f5f9`},children:[(0,$.jsxs)(`div`,{style:{flex:1,fontSize:`14px`,color:`#334155`},children:[e,a&&(0,$.jsx)(`span`,{style:{marginLeft:`8px`,fontSize:`10px`,fontWeight:600,padding:`2px 6px`,borderRadius:`4px`,background:`#f1f5f9`,color:`#94a3b8`},children:a})]}),(0,$.jsx)(`button`,{onClick:n,disabled:a===`Coming Soon`,style:{width:`40px`,height:`22px`,borderRadius:`11px`,border:`none`,cursor:a?`not-allowed`:`pointer`,background:t?`#7c3aed`:`#e2e8f0`,opacity:a?.5:1,position:`relative`,transition:`background 0.2s`},children:(0,$.jsx)(`div`,{style:{width:`18px`,height:`18px`,borderRadius:`50%`,background:`white`,position:`absolute`,top:`2px`,left:t?`20px`:`2px`,transition:`left 0.2s`}})}),t&&!a&&(0,$.jsx)(My,{value:r,onChange:i,size:`small`})]})}function Fy({title:e,accent:t,children:n,defaultOpen:r=!1}){let[i,a]=(0,_.useState)(r);return(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`12px`,borderLeft:`4px solid ${t}`},children:[(0,$.jsxs)(`div`,{onClick:()=>a(!i),style:{padding:`16px 20px`,cursor:`pointer`,display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`15px`,color:`#1e293b`},children:e}),(0,$.jsx)(`span`,{style:{fontSize:`18px`,color:`#94a3b8`,transform:i?`rotate(180deg)`:`none`,transition:`transform 0.2s`},children:`v`})]}),i&&(0,$.jsx)(`div`,{style:{padding:`0 20px 20px`},children:n})]})}function Iy({rules:e,updateRules:t,accent:n}){return(0,$.jsxs)(Fy,{title:`Communication Permissions`,accent:n,children:[(0,$.jsx)(Py,{label:`Send emails`,enabled:e.communication.sendEmails,onToggle:()=>t(`communication.sendEmails`,!e.communication.sendEmails),levelValue:e.communication.emailLevel,onLevelChange:e=>t(`communication.emailLevel`,e)}),(0,$.jsx)(Py,{label:`Send text messages`,enabled:e.communication.sendTexts,onToggle:()=>t(`communication.sendTexts`,!e.communication.sendTexts),levelValue:e.communication.textLevel,onLevelChange:e=>t(`communication.textLevel`,e)}),(0,$.jsx)(Py,{label:`Make phone calls`,enabled:e.communication.makePhoneCalls,onToggle:()=>{},badge:`Coming Soon`}),(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`,padding:`10px 0`,borderBottom:`1px solid #f1f5f9`},children:[(0,$.jsx)(`div`,{style:{flex:1,fontSize:`14px`,color:`#334155`},children:`Daily outbound message limit`}),(0,$.jsx)(`input`,{type:`number`,value:e.communication.dailyMessageLimit,onChange:e=>t(`communication.dailyMessageLimit`,Number(e.target.value)),style:{width:`80px`,padding:`6px 8px`,borderRadius:`6px`,border:`1px solid #e2e8f0`,fontSize:`14px`,textAlign:`right`}})]}),(0,$.jsxs)(`div`,{style:{padding:`10px 0`,borderBottom:`1px solid #f1f5f9`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`#334155`,marginBottom:`6px`},children:`Required disclaimer text`}),(0,$.jsx)(`textarea`,{value:e.communication.disclaimerText,onChange:e=>t(`communication.disclaimerText`,e.target.value),rows:2,style:{width:`100%`,padding:`8px 10px`,borderRadius:`8px`,border:`1px solid #e2e8f0`,fontSize:`13px`,resize:`vertical`,fontFamily:`inherit`}})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`,padding:`10px 0`},children:[(0,$.jsx)(`div`,{style:{flex:1,fontSize:`14px`,color:`#334155`},children:`Quiet hours (no outbound)`}),(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`6px`},children:[(0,$.jsx)(`input`,{type:`time`,value:e.communication.quietHoursStart,onChange:e=>t(`communication.quietHoursStart`,e.target.value),style:{padding:`4px 6px`,borderRadius:`6px`,border:`1px solid #e2e8f0`,fontSize:`13px`}}),(0,$.jsx)(`span`,{style:{color:`#94a3b8`},children:`to`}),(0,$.jsx)(`input`,{type:`time`,value:e.communication.quietHoursEnd,onChange:e=>t(`communication.quietHoursEnd`,e.target.value),style:{padding:`4px 6px`,borderRadius:`6px`,border:`1px solid #e2e8f0`,fontSize:`13px`}})]})]})]})}function Ly({section:e,rules:t,updateRules:n}){return e.type===`communication`?(0,$.jsx)(Iy,{rules:t,updateRules:n,accent:e.accent}):(0,$.jsxs)(Fy,{title:e.title,accent:e.accent,defaultOpen:e.defaultOpen,children:[(e.rows||[]).map(r=>(0,$.jsx)(Ny,{label:r.label,levelValue:t[e.key]?.[r.key]||1,onLevelChange:t=>n(`${e.key}.${r.key}`,t),extraLabel:r.extra?.label,extraValue:r.extra?t[e.key]?.[r.extra.field]:void 0,onExtraChange:r.extra?t=>n(`${e.key}.${r.extra.field}`,t):void 0,extraType:r.extra?.type},r.key)),e.footer&&(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`,padding:`10px 0`},children:[(0,$.jsx)(`div`,{style:{flex:1,fontSize:`14px`,color:`#334155`},children:e.footer.label}),(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`4px`},children:[e.footer.prefix&&(0,$.jsx)(`span`,{style:{fontSize:`14px`,color:`#64748b`},children:e.footer.prefix}),(0,$.jsx)(`input`,{type:`number`,value:t[e.key]?.[e.footer.field]||0,onChange:t=>n(`${e.key}.${e.footer.field}`,Number(t.target.value)),style:{width:`100px`,padding:`6px 8px`,borderRadius:`6px`,border:`1px solid #e2e8f0`,fontSize:`14px`,textAlign:`right`}})]})]}),(e.postRows||[]).map(r=>(0,$.jsx)(Ny,{label:r.label,levelValue:t[e.key]?.[r.key]||1,onLevelChange:t=>n(`${e.key}.${r.key}`,t)},r.key))]})}function Ry(){let e=localStorage.getItem(`VERTICAL`)||`auto`,t=localStorage.getItem(`JURISDICTION`)||`FL`,n=jy[e]||jy.auto,[r,i]=(0,_.useState)(n.defaults),[a,o]=(0,_.useState)(!1),[s,c]=(0,_.useState)(!1),[l,u]=(0,_.useState)([]),[d,f]=(0,_.useState)(!1),p=_.useRef(null);function m(e,t){i(n=>{let r={...n},i=e.split(`.`);return i.length===1?r[i[0]]=t:r[i[0]]={...r[i[0]],[i[1]]:t},r}),c(!1)}async function h(){o(!0);try{let e=localStorage.getItem(`WORKSPACE_ID`)||localStorage.getItem(`TENANT_ID`),t=localStorage.getItem(`ID_TOKEN`);await fetch(`https://titleapp-frontdoor.titleapp-core.workers.dev/api?path=/v1/workspace:updateRules`,{method:`POST`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${t}`,"x-tenant-id":e},body:JSON.stringify({rules:r})}),c(!0),setTimeout(()=>c(!1),3e3)}catch(e){console.error(`Failed to save rules:`,e)}finally{o(!1)}}function g(e){let t=[`application/pdf`,`application/vnd.openxmlformats-officedocument.wordprocessingml.document`,`text/plain`,`image/png`,`image/jpeg`,`image/webp`];for(let n of Array.from(e))t.some(e=>n.type.startsWith(e.split(`/`)[0])||n.type===e)&&(n.size>10485760||u(e=>[...e,{id:`pb_${Date.now()}_${Math.random().toString(36).substr(2,4)}`,name:n.name,size:n.size,category:`Other / General`,uploadedAt:new Date().toISOString(),file:n}]))}function v(e,t){u(n=>n.map(n=>n.id===e?{...n,category:t}:n))}function y(e){u(t=>t.filter(t=>t.id!==e))}function b(e){return e<1024?e+` B`:e<1024*1024?Math.round(e/1024)+` KB`:(e/(1024*1024)).toFixed(1)+` MB`}return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Rules`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Configure AI autonomy levels and operational permissions`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:h,disabled:a,style:{background:`linear-gradient(135deg, #7c3aed, #6d28d9)`,color:`white`,border:`none`,opacity:a?.6:1},children:a?`Saving...`:s?`Saved`:`Save Rules`})]}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`20px`,padding:`24px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`16px`,color:`#1e293b`,marginBottom:`4px`},children:`Global Autonomy Level`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`,marginBottom:`16px`},children:`Set the default behavior for all AI operations. Area-specific settings below can override this.`}),(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(4, 1fr)`,gap:`12px`},children:Ay.map(e=>(0,$.jsxs)(`div`,{onClick:()=>m(`globalLevel`,e.level),style:{padding:`16px`,borderRadius:`12px`,border:r.globalLevel===e.level?`2px solid #7c3aed`:`1px solid #e2e8f0`,background:r.globalLevel===e.level?`#faf5ff`:`white`,cursor:`pointer`,transition:`all 0.15s`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`,marginBottom:`8px`},children:[(0,$.jsx)(`div`,{style:{width:`28px`,height:`28px`,borderRadius:`50%`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:r.globalLevel===e.level?`#7c3aed`:`#f1f5f9`,color:r.globalLevel===e.level?`white`:`#64748b`,fontWeight:700,fontSize:`13px`},children:e.level}),(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`14px`,color:r.globalLevel===e.level?`#7c3aed`:`#1e293b`},children:e.name})]}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`,lineHeight:1.5},children:e.description})]},e.level))})]}),n.sections.map(e=>(0,$.jsx)(Ly,{section:e,rules:r,updateRules:m},e.key)),(0,$.jsxs)(`div`,{className:`card`,style:{marginTop:`20px`,padding:`24px`},children:[(0,$.jsxs)(`div`,{style:{marginBottom:`4px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`16px`,color:`#1e293b`},children:`Custom AI Training`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`},children:`Upload your SOPs, scripts, and playbooks. Your AI will follow your processes.`})]}),(0,$.jsxs)(`div`,{onDragOver:e=>{e.preventDefault(),f(!0)},onDragLeave:()=>f(!1),onDrop:e=>{e.preventDefault(),f(!1),g(e.dataTransfer.files)},onClick:()=>p.current?.click(),style:{margin:`16px 0`,padding:`32px`,border:`2px dashed ${d?`#7c3aed`:`#e2e8f0`}`,borderRadius:`12px`,background:d?`#faf5ff`:`#f8fafc`,textAlign:`center`,cursor:`pointer`,transition:`all 0.15s`},children:[(0,$.jsx)(`input`,{ref:p,type:`file`,multiple:!0,accept:`.pdf,.docx,.txt,.png,.jpg,.jpeg,.webp`,style:{display:`none`},onChange:e=>{g(e.target.files),e.target.value=``}}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600,color:`#475569`,marginBottom:`4px`},children:`Drop files here or click to browse`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#94a3b8`},children:`PDF, DOCX, TXT, or images (OCR). Max 10 MB per file.`})]}),l.length>0&&(0,$.jsx)(`div`,{className:`tableWrap`,style:{marginBottom:`16px`},children:(0,$.jsxs)(`table`,{className:`table`,style:{width:`100%`},children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{children:`Document`}),(0,$.jsx)(`th`,{children:`Category`}),(0,$.jsx)(`th`,{children:`Uploaded`}),(0,$.jsx)(`th`,{children:`Size`}),(0,$.jsx)(`th`,{children:`Actions`})]})}),(0,$.jsx)(`tbody`,{children:l.map(e=>(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`td`,{className:`tdStrong`,children:e.name}),(0,$.jsx)(`td`,{children:(0,$.jsx)(`select`,{value:e.category,onChange:t=>v(e.id,t.target.value),style:{padding:`4px 8px`,borderRadius:`6px`,border:`1px solid #e2e8f0`,fontSize:`12px`},children:n.playbookCategories.map(e=>(0,$.jsx)(`option`,{value:e,children:e},e))})}),(0,$.jsx)(`td`,{style:{fontSize:`12px`,color:`#64748b`,whiteSpace:`nowrap`},children:new Date(e.uploadedAt).toLocaleDateString(`en-US`,{month:`short`,day:`numeric`,year:`numeric`})}),(0,$.jsx)(`td`,{style:{fontSize:`12px`,color:`#64748b`},children:b(e.size)}),(0,$.jsx)(`td`,{children:(0,$.jsx)(`button`,{onClick:()=>y(e.id),className:`iconBtn`,style:{padding:`4px 8px`,fontSize:`11px`,color:`#dc2626`,borderColor:`#dc2626`},children:`Delete`})})]},e.id))})]})}),(0,$.jsx)(`button`,{onClick:()=>window.dispatchEvent(new CustomEvent(`ta:chatPrompt`,{detail:{message:`I don't have a written playbook yet. Can you help me create one?`}})),className:`iconBtn`,style:{fontSize:`13px`,color:`#7c3aed`,borderColor:`#7c3aed`},children:`Create from Scratch`})]}),(0,$.jsxs)(`div`,{className:`card`,style:{padding:`20px`,marginTop:`8px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`15px`,color:`#1e293b`,marginBottom:`12px`},children:`Current Configuration`}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`8px`,fontSize:`13px`},children:[(0,$.jsx)(`div`,{style:{color:`#64748b`},children:`Vertical`}),(0,$.jsx)(`div`,{style:{fontWeight:600},children:e}),(0,$.jsx)(`div`,{style:{color:`#64748b`},children:`Jurisdiction`}),(0,$.jsx)(`div`,{style:{fontWeight:600},children:t}),(0,$.jsx)(`div`,{style:{color:`#64748b`},children:`Active RAAS rule files`}),(0,$.jsxs)(`div`,{style:{fontWeight:600},children:[e,`/`,t,`/README.md, data-model.md, ownership.md`]}),(0,$.jsx)(`div`,{style:{color:`#64748b`},children:`Custom rules`}),(0,$.jsx)(`div`,{style:{fontWeight:600,color:`#94a3b8`},children:l.length>0?`${l.length} playbook${l.length===1?``:`s`} uploaded`:`None set`})]})]})]})}function zy({onVerified:e,onClose:t}){let[n,r]=(0,_.useState)(!1),[i,a]=(0,_.useState)(!1);async function o(){r(!0);try{await new Promise(e=>setTimeout(e,2e3));let t=localStorage.getItem(`ID_TOKEN`);await fetch(`https://titleapp-frontdoor.titleapp-core.workers.dev/api?path=/v1/me:update`,{method:`POST`,headers:{"Content-Type":`application/json`,Authorization:`Bearer ${t}`},body:JSON.stringify({idVerified:!0,idVerifiedAt:new Date().toISOString()})}),a(!0),setTimeout(()=>e(),1200)}catch(e){console.error(`ID verification failed:`,e),r(!1)}}return(0,$.jsx)(`div`,{style:{position:`fixed`,inset:0,background:`rgba(15, 23, 42, 0.5)`,display:`flex`,alignItems:`center`,justifyContent:`center`,zIndex:9999,fontFamily:`-apple-system, BlinkMacSystemFont, sans-serif`},onClick:e=>{e.target===e.currentTarget&&t()},children:(0,$.jsx)(`div`,{style:{width:`100%`,maxWidth:`440px`,padding:`32px`,background:`white`,borderRadius:`16px`,border:`1px solid #e5e7eb`,boxShadow:`0 20px 40px rgba(0, 0, 0, 0.15)`,textAlign:`center`},children:i?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{style:{fontSize:`48px`,marginBottom:`16px`},children:``}),(0,$.jsx)(`h3`,{style:{margin:`0 0 8px 0`,fontSize:`20px`,fontWeight:700},children:`Identity Verified`}),(0,$.jsx)(`p`,{style:{margin:0,color:`#6b7280`,fontSize:`14px`},children:`Completing your request...`})]}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`h3`,{style:{margin:`0 0 8px 0`,fontSize:`20px`,fontWeight:700},children:`Identity Verification Required`}),(0,$.jsx)(`p`,{style:{margin:`0 0 24px 0`,color:`#6b7280`,fontSize:`14px`,lineHeight:1.5},children:`Publishing records requires a verified identity. Quick check, $2, takes about a minute. Valid for one year.`}),(0,$.jsxs)(`div`,{style:{display:`grid`,gap:`10px`},children:[(0,$.jsx)(`button`,{onClick:o,disabled:n,style:{padding:`12px`,fontSize:`14px`,fontWeight:600,background:n?`#9ca3af`:`rgb(124, 58, 237)`,color:`white`,border:`none`,borderRadius:`8px`,cursor:n?`not-allowed`:`pointer`},children:n?`Verifying...`:`Verify Now`}),(0,$.jsx)(`button`,{onClick:t,disabled:n,style:{padding:`12px`,fontSize:`14px`,background:`transparent`,border:`1px solid #e5e7eb`,borderRadius:`8px`,cursor:n?`not-allowed`:`pointer`,color:`#6b7280`},children:`Not now`})]})]})})})}function By(e,t){return e===`vehicle`?!0:parseFloat(String(t?.estimatedValue||`0`).replace(/[$,]/g,``))>5e3}function Vy(){let[e,t]=(0,_.useState)(!1),[n,r]=(0,_.useState)(null);async function i(){let e=Ts(),t=ig(),n=e.currentUser;if(!n)return!1;try{let e=await n_($h(t,`users`,n.uid));if(!e.exists())return!1;let r=e.data();if(!r.idVerified)return!1;if(r.idVerifiedAt){let e=new Date(r.idVerifiedAt);if((new Date().getTime()-e.getTime())/(1e3*60*60*24)>365)return!1}return!0}catch{return!1}}async function a(e,n,a){if(!By(e,n)){a();return}await i()?a():(r(()=>a),t(!0))}function o(){t(!1),n&&(n(),r(null))}function s(){t(!1),r(null)}return{showModal:e,gateAction:a,onVerified:o,onClose:s,checkIdVerification:i}}var Hy=`AL.AK.AZ.AR.CA.CO.CT.DE.DC.FL.GA.HI.ID.IL.IN.IA.KS.KY.LA.ME.MD.MA.MI.MN.MS.MO.MT.NE.NV.NH.NJ.NM.NY.NC.ND.OH.OK.OR.PA.RI.SC.SD.TN.TX.UT.VT.VA.WA.WV.WI.WY.AS.GU.MP.PR.VI`.split(`.`),Uy={year:``,make:``,model:``,color:``,vin:``,plate:``,state:``,purchaseDate:``,lender:``,mileage:``,attested:!1},Wy={black:`#1e293b`,white:`#e2e8f0`,silver:`#94a3b8`,gray:`#64748b`,grey:`#64748b`,red:`#dc2626`,blue:`#2563eb`,green:`#16a34a`,yellow:`#eab308`,orange:`#ea580c`,brown:`#92400e`,gold:`#d97706`,beige:`#d4c5a9`,purple:`#7c3aed`,pink:`#ec4899`};function Gy(e){if(!e)return``;let t=e.toDate?e.toDate():e._seconds?new Date(e._seconds*1e3):new Date(e);return isNaN(t.getTime())?``:t.toLocaleDateString(`en-US`,{month:`short`,day:`numeric`,year:`numeric`})}function Ky(e){return e?Number(String(e).replace(/,/g,``)).toLocaleString():``}function qy(){let[e,t]=(0,_.useState)([]),[n,r]=(0,_.useState)(!0),[i,a]=(0,_.useState)(!1),[o,s]=(0,_.useState)(Uy),[c,l]=(0,_.useState)(!1),[u,d]=(0,_.useState)(null),{showModal:f,gateAction:p,onVerified:m,onClose:h}=Vy();(0,_.useEffect)(()=>{g()},[]);async function g(){try{t(((await L_({vertical:`consumer`,jurisdiction:`GLOBAL`})).inventory||[]).filter(e=>(e.metadata?.vin||e.metadata?.make)&&(e.metadata?.title||e.metadata?.make)))}catch(e){console.error(`Failed to load vehicles:`,e)}finally{r(!1)}}function v(e){window.dispatchEvent(new CustomEvent(`ta:chatPrompt`,{detail:{message:`Tell me about my ${e.metadata?.year||``} ${e.metadata?.make||``} ${e.metadata?.model||``}`.trim()}}))}async function y(e){if(window.confirm(`Delete this vehicle record?`))try{await B_({vertical:`consumer`,jurisdiction:`GLOBAL`,id:e}),d(`Record deleted`),setTimeout(()=>d(null),3e3),t(t=>t.filter(t=>t.id!==e))}catch(e){console.error(`Failed to delete:`,e),d(`Failed to delete  `+(e.message||`try again`)),setTimeout(()=>d(null),4e3)}}function b(e){e.preventDefault(),!(!o.make&&!o.vin)&&p(`vehicle`,{},x)}async function x(){l(!0);try{let e=await R_({vertical:`consumer`,jurisdiction:`GLOBAL`,item:{type:`vehicle`,status:`active`,metadata:{title:`${o.year} ${o.make} ${o.model}`.trim()||`Vehicle`,year:o.year,make:o.make,model:o.model,color:o.color,vin:o.vin,plate:o.plate,stateRegistered:o.state,purchaseDate:o.purchaseDate,lender:o.lender,mileage:o.mileage},price:0,cost:0}});o.attested&&e.dtcId&&await V_({vertical:`consumer`,jurisdiction:`GLOBAL`,dtcId:e.dtcId}),a(!1),s(Uy),d(`Vehicle added`),setTimeout(()=>d(null),3e3),r(!0),await g()}catch(e){console.error(`Failed to create vehicle:`,e),d(`Failed to save  `+(e.message||`try again`)),setTimeout(()=>d(null),4e3)}finally{l(!1)}}let S={width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},C={...S,background:`white`};function w(e){return e&&Wy[e.toLowerCase()]||`#7c3aed`}return(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`pageHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`My Vehicles`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Your verified vehicle records`})]})}),u&&(0,$.jsx)(`div`,{style:{padding:`10px 16px`,marginBottom:`12px`,borderRadius:`10px`,background:u.startsWith(`Failed`)?`#fef2f2`:`#f0fdf4`,color:u.startsWith(`Failed`)?`#dc2626`:`#16a34a`,fontSize:`14px`,fontWeight:500},children:u}),n?(0,$.jsx)(`div`,{className:`card`,style:{padding:`24px`,textAlign:`center`},children:`Loading vehicles...`}):e.length===0?(0,$.jsxs)(`div`,{className:`card`,style:{padding:`48px 32px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{width:`64px`,height:`64px`,borderRadius:`16px`,background:`linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%)`,display:`flex`,alignItems:`center`,justifyContent:`center`,margin:`0 auto 20px`},children:(0,$.jsxs)(`svg`,{width:`28`,height:`28`,viewBox:`0 0 24 24`,fill:`none`,stroke:`#3b82f6`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,$.jsx)(`path`,{d:`M5 17h14v-6l-2-5H7L5 11v6z`}),(0,$.jsx)(`circle`,{cx:`7.5`,cy:`17.5`,r:`1.5`}),(0,$.jsx)(`circle`,{cx:`16.5`,cy:`17.5`,r:`1.5`})]})}),(0,$.jsx)(`div`,{style:{fontSize:`18px`,fontWeight:600,color:`#1e293b`,marginBottom:`10px`},children:`Add your first vehicle`}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`#64748b`,maxWidth:`420px`,margin:`0 auto 24px`,lineHeight:`1.6`},children:`Track titles, registration, service history, and insurance all in one place. Your vehicle records are verified and permanent.`}),(0,$.jsx)(`button`,{onClick:()=>a(!0),style:{padding:`12px 28px`,background:`linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%)`,color:`white`,border:`none`,borderRadius:`12px`,fontSize:`14px`,fontWeight:600,cursor:`pointer`},children:`Add Vehicle`})]}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{style:{marginBottom:`12px`},children:(0,$.jsx)(`button`,{onClick:()=>a(!0),style:{padding:`10px 20px`,background:`linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%)`,color:`white`,border:`none`,borderRadius:`10px`,fontSize:`13px`,fontWeight:600,cursor:`pointer`},children:`+ Add Vehicle`})}),(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(auto-fill, minmax(320px, 1fr))`,gap:`12px`},children:e.map(e=>{let t=w(e.metadata?.color),n=[`white`,`beige`,`silver`,`yellow`].includes((e.metadata?.color||``).toLowerCase());return(0,$.jsxs)(`div`,{className:`card`,style:{position:`relative`,overflow:`hidden`},children:[(0,$.jsxs)(`div`,{style:{height:`100px`,background:e.imageUrl?`none`:`linear-gradient(135deg, ${t}18 0%, ${t}08 100%)`,display:`flex`,alignItems:`center`,justifyContent:`center`,position:`relative`,overflow:`hidden`},children:[e.imageUrl?(0,$.jsx)(`img`,{src:e.imageUrl,alt:e.metadata?.title||`Vehicle`,style:{width:`100%`,height:`100%`,objectFit:`cover`}}):(0,$.jsxs)(`svg`,{width:`48`,height:`48`,viewBox:`0 0 24 24`,fill:`none`,stroke:n?`#64748b`:t,strokeWidth:`1.5`,strokeLinecap:`round`,strokeLinejoin:`round`,style:{opacity:.7},children:[(0,$.jsx)(`path`,{d:`M5 17h14v-6l-2-5H7L5 11v6z`}),(0,$.jsx)(`circle`,{cx:`7.5`,cy:`17.5`,r:`1.5`}),(0,$.jsx)(`circle`,{cx:`16.5`,cy:`17.5`,r:`1.5`})]}),(0,$.jsx)(`button`,{onClick:()=>y(e.id),style:{position:`absolute`,top:`8px`,right:`8px`,background:`white`,border:`1px solid #e5e7eb`,borderRadius:`8px`,width:`28px`,height:`28px`,display:`flex`,alignItems:`center`,justifyContent:`center`,cursor:`pointer`,color:`#94a3b8`,fontSize:`14px`},title:`Delete`,children:(0,$.jsxs)(`svg`,{width:`14`,height:`14`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,$.jsx)(`polyline`,{points:`3 6 5 6 21 6`}),(0,$.jsx)(`path`,{d:`M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2`})]})}),(0,$.jsx)(`span`,{style:{position:`absolute`,bottom:`8px`,right:`10px`,fontSize:`11px`,fontWeight:600,padding:`3px 10px`,borderRadius:`20px`,background:`${t}20`,color:n?`#64748b`:t},children:`Vehicle`})]}),(0,$.jsxs)(`div`,{style:{padding:`14px 20px 4px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`16px`,color:`#1e293b`},children:e.metadata?.title||`${e.metadata?.year||``} ${e.metadata?.make||``} ${e.metadata?.model||``}`.trim()||`Vehicle`}),e.metadata?.color&&(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`,marginTop:`2px`},children:e.metadata.color})]}),(0,$.jsxs)(`div`,{style:{padding:`8px 20px 12px`},children:[e.metadata?.vin&&(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,padding:`3px 0`,fontSize:`13px`},children:[(0,$.jsx)(`span`,{style:{color:`#64748b`},children:`VIN`}),(0,$.jsx)(`span`,{style:{fontWeight:500,color:`#1e293b`,fontFamily:`monospace`,fontSize:`12px`},children:e.metadata.vin})]}),e.metadata?.mileage&&(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,padding:`3px 0`,fontSize:`13px`},children:[(0,$.jsx)(`span`,{style:{color:`#64748b`},children:`Mileage`}),(0,$.jsx)(`span`,{style:{fontWeight:500,color:`#1e293b`},children:Ky(e.metadata.mileage)})]}),e.metadata?.plate&&(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,padding:`3px 0`,fontSize:`13px`},children:[(0,$.jsx)(`span`,{style:{color:`#64748b`},children:`Plate`}),(0,$.jsxs)(`span`,{style:{fontWeight:500,color:`#1e293b`},children:[e.metadata.plate,` `,e.metadata.stateRegistered||``]})]}),e.metadata?.lender&&(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,padding:`3px 0`,fontSize:`13px`},children:[(0,$.jsx)(`span`,{style:{color:`#64748b`},children:`Lender`}),(0,$.jsx)(`span`,{style:{fontWeight:500,color:`#1e293b`},children:e.metadata.lender})]}),Gy(e.createdAt)&&(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,padding:`3px 0`,fontSize:`13px`},children:[(0,$.jsx)(`span`,{style:{color:`#64748b`},children:`Added`}),(0,$.jsx)(`span`,{style:{fontWeight:500,color:`#1e293b`},children:Gy(e.createdAt)})]})]}),(0,$.jsxs)(`div`,{style:{padding:`10px 20px 14px`,borderTop:`1px solid #f1f5f9`,display:`flex`,gap:`8px`},children:[(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>v(e),style:{flex:1,fontSize:`13px`},children:`Ask AI`}),(0,$.jsx)(`span`,{className:`badge badge-${e.status||`active`}`,style:{display:`flex`,alignItems:`center`},children:e.status||`Active`})]})]},e.id)})})]}),(0,$.jsx)(Ev,{isOpen:i,onClose:()=>a(!1),title:`Add Vehicle`,onSubmit:b,submitLabel:c?`Saving...`:`Save Vehicle`,children:(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:[(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr 1fr`,gap:`10px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Year`}),(0,$.jsx)(`input`,{type:`text`,value:o.year,onChange:e=>s({...o,year:e.target.value}),placeholder:`2024`,style:S})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Make`}),(0,$.jsx)(`input`,{type:`text`,value:o.make,onChange:e=>s({...o,make:e.target.value}),placeholder:`Toyota`,style:S})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Model`}),(0,$.jsx)(`input`,{type:`text`,value:o.model,onChange:e=>s({...o,model:e.target.value}),placeholder:`Camry`,style:S})]})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`10px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Color`}),(0,$.jsx)(`input`,{type:`text`,value:o.color,onChange:e=>s({...o,color:e.target.value}),style:S})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Mileage`}),(0,$.jsx)(`input`,{type:`text`,value:o.mileage?Number(String(o.mileage).replace(/,/g,``)).toLocaleString():``,onChange:e=>s({...o,mileage:e.target.value.replace(/,/g,``)}),placeholder:`e.g., 45,000`,style:S})]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`VIN (optional)`}),(0,$.jsx)(`input`,{type:`text`,value:o.vin,onChange:e=>s({...o,vin:e.target.value}),placeholder:`17 characters`,style:S})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr 1fr`,gap:`10px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`License Plate`}),(0,$.jsx)(`input`,{type:`text`,value:o.plate,onChange:e=>s({...o,plate:e.target.value}),style:S})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`State`}),(0,$.jsxs)(`select`,{value:o.state,onChange:e=>s({...o,state:e.target.value}),style:C,children:[(0,$.jsx)(`option`,{value:``,children:`--`}),Hy.map(e=>(0,$.jsx)(`option`,{value:e,children:e},e))]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Purchase Date`}),(0,$.jsx)(`input`,{type:`date`,value:o.purchaseDate,onChange:e=>s({...o,purchaseDate:e.target.value}),style:S})]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Lender / Finance Co. (optional)`}),(0,$.jsx)(`input`,{type:`text`,value:o.lender,onChange:e=>s({...o,lender:e.target.value}),style:S})]}),(0,$.jsx)(`div`,{style:{marginTop:`4px`,padding:`12px`,background:`#f8fafc`,borderRadius:`10px`,border:`1px solid #e2e8f0`},children:(0,$.jsxs)(`label`,{style:{display:`flex`,alignItems:`flex-start`,gap:`10px`,cursor:`pointer`,fontSize:`13px`,color:`#475569`,lineHeight:1.5},children:[(0,$.jsx)(`input`,{type:`checkbox`,checked:o.attested,onChange:e=>s({...o,attested:e.target.checked}),style:{marginTop:`3px`,flexShrink:0}}),`I represent that I am the lawful owner of this vehicle and that the information provided is accurate to the best of my knowledge.`]})})]})}),f&&(0,$.jsx)(zy,{onVerified:m,onClose:h})]})}var Jy={address:``,address2:``,city:``,state:``,zip:``,ownershipType:`Own`,propertyType:`House`,monthlyPayment:``,company:``,endDate:``,term:``,interestRate:``,attested:!1},Yy=`AL.AK.AZ.AR.CA.CO.CT.DE.DC.FL.GA.HI.ID.IL.IN.IA.KS.KY.LA.ME.MD.MA.MI.MN.MS.MO.MT.NE.NV.NH.NJ.NM.NY.NC.ND.OH.OK.OR.PA.RI.SC.SD.TN.TX.UT.VT.VA.WA.WV.WI.WY`.split(`.`);function Xy(e){if(!e)return``;let t=e.toDate?e.toDate():e._seconds?new Date(e._seconds*1e3):new Date(e);return isNaN(t.getTime())?``:t.toLocaleDateString(`en-US`,{month:`short`,day:`numeric`,year:`numeric`})}function Zy(e){return e?`$`+Number(String(e).replace(/[$,]/g,``)).toLocaleString():``}function Qy(){let[e,t]=(0,_.useState)([]),[n,r]=(0,_.useState)(!0),[i,a]=(0,_.useState)(!1),[o,s]=(0,_.useState)(Jy),[c,l]=(0,_.useState)(!1),[u,d]=(0,_.useState)(null);(0,_.useEffect)(()=>{f()},[]);async function f(){try{t(((await L_({vertical:`consumer`,jurisdiction:`GLOBAL`})).inventory||[]).filter(e=>(e.type===`property`||e.metadata?.address||e.metadata?.propertyType)&&(e.metadata?.title||e.metadata?.address)))}catch(e){console.error(`Failed to load properties:`,e)}finally{r(!1)}}async function p(e){if(window.confirm(`Delete this property record?`))try{await B_({vertical:`consumer`,jurisdiction:`GLOBAL`,id:e}),d(`Record deleted`),setTimeout(()=>d(null),3e3),t(t=>t.filter(t=>t.id!==e))}catch(e){console.error(`Failed to delete:`,e),d(`Failed to delete  `+(e.message||`try again`)),setTimeout(()=>d(null),4e3)}}async function m(e){if(e.preventDefault(),o.address){l(!0);try{let e=[o.address,o.address2,o.city,o.state,o.zip].filter(Boolean).join(`, `),t=await R_({vertical:`consumer`,jurisdiction:`GLOBAL`,item:{type:`property`,status:`active`,metadata:{title:e||o.address,address:e||o.address,address2:o.address2,city:o.city,stateCode:o.state,zip:o.zip,ownershipType:o.ownershipType,propertyType:o.propertyType,monthlyPayment:o.monthlyPayment.replace(/[$,]/g,``),company:o.company,endDate:o.endDate,term:o.term,interestRate:o.interestRate},price:0,cost:0}});o.attested&&t.dtcId&&await V_({vertical:`consumer`,jurisdiction:`GLOBAL`,dtcId:t.dtcId}),a(!1),s(Jy),d(`Property added`),setTimeout(()=>d(null),3e3),r(!0),await f()}catch(e){console.error(`Failed to create property:`,e),d(`Failed to save  `+(e.message||`try again`)),setTimeout(()=>d(null),4e3)}finally{l(!1)}}}let h={width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},g={...h,background:`white`};function v(e){return e===`Own`||e===`Mortgage`?`#16a34a`:e===`Rent`||e===`Lease`?`#2563eb`:`#64748b`}return(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`pageHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`My Properties`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Your verified property records`})]})}),u&&(0,$.jsx)(`div`,{style:{padding:`10px 16px`,marginBottom:`12px`,borderRadius:`10px`,background:u.startsWith(`Failed`)?`#fef2f2`:`#f0fdf4`,color:u.startsWith(`Failed`)?`#dc2626`:`#16a34a`,fontSize:`14px`,fontWeight:500},children:u}),n?(0,$.jsx)(`div`,{className:`card`,style:{padding:`24px`,textAlign:`center`},children:`Loading properties...`}):e.length===0?(0,$.jsxs)(`div`,{className:`card`,style:{padding:`48px 32px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{width:`64px`,height:`64px`,borderRadius:`16px`,background:`linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%)`,display:`flex`,alignItems:`center`,justifyContent:`center`,margin:`0 auto 20px`},children:(0,$.jsxs)(`svg`,{width:`28`,height:`28`,viewBox:`0 0 24 24`,fill:`none`,stroke:`#16a34a`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,$.jsx)(`path`,{d:`M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z`}),(0,$.jsx)(`polyline`,{points:`9 22 9 12 15 12 15 22`})]})}),(0,$.jsx)(`div`,{style:{fontSize:`18px`,fontWeight:600,color:`#1e293b`,marginBottom:`10px`},children:`Add your first property`}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`#64748b`,maxWidth:`420px`,margin:`0 auto 24px`,lineHeight:`1.6`},children:`Keep track of deeds, leases, mortgage info, tax records, and insurance for every property -- owned or rented.`}),(0,$.jsx)(`button`,{onClick:()=>a(!0),style:{padding:`12px 28px`,background:`linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%)`,color:`white`,border:`none`,borderRadius:`12px`,fontSize:`14px`,fontWeight:600,cursor:`pointer`},children:`Add Property`})]}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{style:{marginBottom:`12px`},children:(0,$.jsx)(`button`,{onClick:()=>a(!0),style:{padding:`10px 20px`,background:`linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%)`,color:`white`,border:`none`,borderRadius:`10px`,fontSize:`13px`,fontWeight:600,cursor:`pointer`},children:`+ Add Property`})}),(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(auto-fill, minmax(320px, 1fr))`,gap:`12px`},children:e.map(e=>{let t=v(e.metadata?.ownershipType);return(0,$.jsxs)(`div`,{className:`card`,style:{position:`relative`,overflow:`hidden`},children:[(0,$.jsxs)(`div`,{style:{height:`100px`,background:e.imageUrl?`none`:`linear-gradient(135deg, ${t}12 0%, ${t}06 100%)`,display:`flex`,alignItems:`center`,justifyContent:`center`,position:`relative`,overflow:`hidden`},children:[e.imageUrl?(0,$.jsx)(`img`,{src:e.imageUrl,alt:e.metadata?.title||`Property`,style:{width:`100%`,height:`100%`,objectFit:`cover`}}):(0,$.jsxs)(`svg`,{width:`48`,height:`48`,viewBox:`0 0 24 24`,fill:`none`,stroke:t,strokeWidth:`1.5`,strokeLinecap:`round`,strokeLinejoin:`round`,style:{opacity:.6},children:[(0,$.jsx)(`path`,{d:`M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z`}),(0,$.jsx)(`polyline`,{points:`9 22 9 12 15 12 15 22`})]}),(0,$.jsx)(`button`,{onClick:()=>p(e.id),style:{position:`absolute`,top:`8px`,right:`8px`,background:`white`,border:`1px solid #e5e7eb`,borderRadius:`8px`,width:`28px`,height:`28px`,display:`flex`,alignItems:`center`,justifyContent:`center`,cursor:`pointer`,color:`#94a3b8`,fontSize:`14px`},title:`Delete`,children:(0,$.jsxs)(`svg`,{width:`14`,height:`14`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,$.jsx)(`polyline`,{points:`3 6 5 6 21 6`}),(0,$.jsx)(`path`,{d:`M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2`})]})}),(0,$.jsx)(`span`,{style:{position:`absolute`,bottom:`8px`,right:`10px`,fontSize:`11px`,fontWeight:600,padding:`3px 10px`,borderRadius:`20px`,background:`${t}20`,color:t},children:e.metadata?.propertyType||`Property`})]}),(0,$.jsxs)(`div`,{style:{padding:`14px 20px 4px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`16px`,color:`#1e293b`},children:e.metadata?.title||e.metadata?.address||`Property`}),(0,$.jsxs)(`div`,{style:{fontSize:`13px`,color:`#64748b`,marginTop:`2px`},children:[e.metadata?.ownershipType||``,e.metadata?.company?` -- ${e.metadata.company}`:``]})]}),(0,$.jsxs)(`div`,{style:{padding:`8px 20px 12px`},children:[e.metadata?.monthlyPayment&&(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,padding:`3px 0`,fontSize:`13px`},children:[(0,$.jsx)(`span`,{style:{color:`#64748b`},children:`Monthly`}),(0,$.jsx)(`span`,{style:{fontWeight:500,color:`#1e293b`},children:Zy(e.metadata.monthlyPayment)})]}),e.metadata?.endDate&&(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,padding:`3px 0`,fontSize:`13px`},children:[(0,$.jsx)(`span`,{style:{color:`#64748b`},children:`End Date`}),(0,$.jsx)(`span`,{style:{fontWeight:500,color:`#1e293b`},children:e.metadata.endDate})]}),Xy(e.createdAt)&&(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,padding:`3px 0`,fontSize:`13px`},children:[(0,$.jsx)(`span`,{style:{color:`#64748b`},children:`Added`}),(0,$.jsx)(`span`,{style:{fontWeight:500,color:`#1e293b`},children:Xy(e.createdAt)})]})]}),(0,$.jsx)(`div`,{style:{padding:`10px 20px 14px`,borderTop:`1px solid #f1f5f9`,display:`flex`,gap:`8px`},children:(0,$.jsx)(`span`,{className:`badge badge-${e.status||`active`}`,style:{display:`flex`,alignItems:`center`},children:e.status||`Active`})})]},e.id)})})]}),(0,$.jsx)(Ev,{isOpen:i,onClose:()=>a(!1),title:`Add Property`,onSubmit:m,submitLabel:c?`Saving...`:`Save Property`,children:(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Street Address`}),(0,$.jsx)(`input`,{type:`text`,value:o.address,onChange:e=>s({...o,address:e.target.value}),placeholder:`123 Main St`,style:h,required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Apt / Unit (optional)`}),(0,$.jsx)(`input`,{type:`text`,value:o.address2,onChange:e=>s({...o,address2:e.target.value}),placeholder:`Apt 4B`,style:h})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`2fr 1fr 1fr`,gap:`10px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`City`}),(0,$.jsx)(`input`,{type:`text`,value:o.city,onChange:e=>s({...o,city:e.target.value}),placeholder:`Chicago`,style:h})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`State`}),(0,$.jsxs)(`select`,{value:o.state,onChange:e=>s({...o,state:e.target.value}),style:g,children:[(0,$.jsx)(`option`,{value:``,children:`--`}),Yy.map(e=>(0,$.jsx)(`option`,{value:e,children:e},e))]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Zip`}),(0,$.jsx)(`input`,{type:`text`,value:o.zip,onChange:e=>s({...o,zip:e.target.value}),placeholder:`60601`,maxLength:10,style:h})]})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`10px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Ownership`}),(0,$.jsxs)(`select`,{value:o.ownershipType,onChange:e=>s({...o,ownershipType:e.target.value}),style:g,children:[(0,$.jsx)(`option`,{value:`Own`,children:`Own`}),(0,$.jsx)(`option`,{value:`Rent`,children:`Rent`}),(0,$.jsx)(`option`,{value:`Lease`,children:`Lease`})]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Property Type`}),(0,$.jsxs)(`select`,{value:o.propertyType,onChange:e=>s({...o,propertyType:e.target.value}),style:g,children:[(0,$.jsx)(`option`,{value:`House`,children:`House`}),(0,$.jsx)(`option`,{value:`Apartment`,children:`Apartment`}),(0,$.jsx)(`option`,{value:`Condo`,children:`Condo`}),(0,$.jsx)(`option`,{value:`Townhouse`,children:`Townhouse`}),(0,$.jsx)(`option`,{value:`Commercial`,children:`Commercial`}),(0,$.jsx)(`option`,{value:`Land`,children:`Land`}),(0,$.jsx)(`option`,{value:`Other`,children:`Other`})]})]})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`10px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Monthly Payment`}),(0,$.jsx)(`input`,{type:`text`,value:o.monthlyPayment?`$`+Number(String(o.monthlyPayment).replace(/[$,]/g,``)).toLocaleString():``,onChange:e=>s({...o,monthlyPayment:e.target.value.replace(/[$,]/g,``)}),placeholder:`$3,500`,style:h})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Lease / Mortgage Term`}),(0,$.jsxs)(`select`,{value:o.term,onChange:e=>s({...o,term:e.target.value}),style:g,children:[(0,$.jsx)(`option`,{value:``,children:`--`}),(0,$.jsx)(`option`,{value:`6 months`,children:`6 Months`}),(0,$.jsx)(`option`,{value:`1 year`,children:`1 Year`}),(0,$.jsx)(`option`,{value:`2 years`,children:`2 Years`}),(0,$.jsx)(`option`,{value:`5 years`,children:`5 Years`}),(0,$.jsx)(`option`,{value:`15 years`,children:`15 Years`}),(0,$.jsx)(`option`,{value:`30 years`,children:`30 Years`}),(0,$.jsx)(`option`,{value:`other`,children:`Other`})]})]})]}),o.ownershipType===`Own`&&(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Interest Rate % (optional)`}),(0,$.jsx)(`input`,{type:`number`,step:`0.01`,value:o.interestRate,onChange:e=>s({...o,interestRate:e.target.value}),placeholder:`6.5`,style:h})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`10px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`End Date`}),(0,$.jsx)(`input`,{type:`date`,value:o.endDate,onChange:e=>s({...o,endDate:e.target.value}),style:h})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Landlord / Mortgage Co.`}),(0,$.jsx)(`input`,{type:`text`,value:o.company,onChange:e=>s({...o,company:e.target.value}),style:h})]})]}),(0,$.jsx)(`div`,{style:{marginTop:`4px`,padding:`12px`,background:`#f8fafc`,borderRadius:`10px`,border:`1px solid #e2e8f0`},children:(0,$.jsxs)(`label`,{style:{display:`flex`,alignItems:`flex-start`,gap:`10px`,cursor:`pointer`,fontSize:`13px`,color:`#475569`,lineHeight:1.5},children:[(0,$.jsx)(`input`,{type:`checkbox`,checked:o.attested,onChange:e=>s({...o,attested:e.target.checked}),style:{marginTop:`3px`,flexShrink:0}}),`I represent that I am the lawful owner or authorized tenant of this property and that the information provided is accurate to the best of my knowledge.`]})})]})})]})}var $y={name:``,category:`Document`,description:``,estimatedValue:``,attested:!1},eb={Jewelry:{color:`#d97706`,icon:e=>(0,$.jsx)(`svg`,{width:`48`,height:`48`,viewBox:`0 0 24 24`,fill:`none`,stroke:e,strokeWidth:`1.5`,strokeLinecap:`round`,strokeLinejoin:`round`,style:{opacity:.6},children:(0,$.jsx)(`polygon`,{points:`12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2`})})},Artwork:{color:`#7c3aed`,icon:e=>(0,$.jsxs)(`svg`,{width:`48`,height:`48`,viewBox:`0 0 24 24`,fill:`none`,stroke:e,strokeWidth:`1.5`,strokeLinecap:`round`,strokeLinejoin:`round`,style:{opacity:.6},children:[(0,$.jsx)(`circle`,{cx:`13.5`,cy:`6.5`,r:`2.5`}),(0,$.jsx)(`path`,{d:`M17.5 10c2 0 3.5 1.5 3.5 3.5S19.5 17 17.5 17c-1 0-1.87-.5-2.5-1.21`}),(0,$.jsx)(`path`,{d:`M3 19.78C3 16.56 5.56 14 8.78 14H12v3.78C12 20.98 9.98 23 6.78 23 4.56 23 3 21.22 3 19.78z`}),(0,$.jsx)(`path`,{d:`M12 14v-4`}),(0,$.jsx)(`circle`,{cx:`12`,cy:`8`,r:`2`})]})},Collectible:{color:`#f59e0b`,icon:e=>(0,$.jsx)(`svg`,{width:`48`,height:`48`,viewBox:`0 0 24 24`,fill:`none`,stroke:e,strokeWidth:`1.5`,strokeLinecap:`round`,strokeLinejoin:`round`,style:{opacity:.6},children:(0,$.jsx)(`polygon`,{points:`12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2`})})},"Family Heirloom":{color:`#ec4899`,icon:e=>(0,$.jsx)(`svg`,{width:`48`,height:`48`,viewBox:`0 0 24 24`,fill:`none`,stroke:e,strokeWidth:`1.5`,strokeLinecap:`round`,strokeLinejoin:`round`,style:{opacity:.6},children:(0,$.jsx)(`path`,{d:`M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z`})})},Document:{color:`#6366f1`,icon:e=>(0,$.jsxs)(`svg`,{width:`48`,height:`48`,viewBox:`0 0 24 24`,fill:`none`,stroke:e,strokeWidth:`1.5`,strokeLinecap:`round`,strokeLinejoin:`round`,style:{opacity:.6},children:[(0,$.jsx)(`path`,{d:`M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z`}),(0,$.jsx)(`polyline`,{points:`14 2 14 8 20 8`}),(0,$.jsx)(`line`,{x1:`16`,y1:`13`,x2:`8`,y2:`13`}),(0,$.jsx)(`line`,{x1:`16`,y1:`17`,x2:`8`,y2:`17`})]})},Electronics:{color:`#0ea5e9`,icon:e=>(0,$.jsxs)(`svg`,{width:`48`,height:`48`,viewBox:`0 0 24 24`,fill:`none`,stroke:e,strokeWidth:`1.5`,strokeLinecap:`round`,strokeLinejoin:`round`,style:{opacity:.6},children:[(0,$.jsx)(`rect`,{x:`5`,y:`2`,width:`14`,height:`20`,rx:`2`,ry:`2`}),(0,$.jsx)(`line`,{x1:`12`,y1:`18`,x2:`12.01`,y2:`18`})]})}},tb={color:`#64748b`,icon:e=>(0,$.jsx)(`svg`,{width:`48`,height:`48`,viewBox:`0 0 24 24`,fill:`none`,stroke:e,strokeWidth:`1.5`,strokeLinecap:`round`,strokeLinejoin:`round`,style:{opacity:.6},children:(0,$.jsx)(`path`,{d:`M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z`})})};function nb(e){if(!e)return``;let t=e.toDate?e.toDate():e._seconds?new Date(e._seconds*1e3):new Date(e);return isNaN(t.getTime())?``:t.toLocaleDateString(`en-US`,{month:`short`,day:`numeric`,year:`numeric`})}function rb(){let[e,t]=(0,_.useState)([]),[n,r]=(0,_.useState)(!0),[i,a]=(0,_.useState)(!1),[o,s]=(0,_.useState)($y),[c,l]=(0,_.useState)(!1),[u,d]=(0,_.useState)(null),{showModal:f,gateAction:p,onVerified:m,onClose:h}=Vy();(0,_.useEffect)(()=>{g()},[]);async function g(){try{t(((await L_({vertical:`consumer`,jurisdiction:`GLOBAL`})).inventory||[]).filter(e=>(e.type===`document`||e.type===`general`||e.type===`valuable`)&&(e.metadata?.documentName||e.metadata?.title||e.metadata?.category)))}catch(e){console.error(`Failed to load documents:`,e)}finally{r(!1)}}async function v(e){if(window.confirm(`Delete this record?`))try{await B_({vertical:`consumer`,jurisdiction:`GLOBAL`,id:e}),d(`Record deleted`),setTimeout(()=>d(null),3e3),t(t=>t.filter(t=>t.id!==e))}catch(e){console.error(`Failed to delete:`,e),d(`Failed to delete  `+(e.message||`try again`)),setTimeout(()=>d(null),4e3)}}function y(e){e.preventDefault(),o.name&&p(o.category===`Document`?`document`:`valuable`,{estimatedValue:o.estimatedValue},b)}async function b(){l(!0);try{let e=await R_({vertical:`consumer`,jurisdiction:`GLOBAL`,item:{type:o.category===`Document`?`document`:`valuable`,status:`active`,metadata:{documentName:o.name,title:o.name,category:o.category,description:o.description,estimatedValue:o.estimatedValue},price:0,cost:0}});o.attested&&e.dtcId&&await V_({vertical:`consumer`,jurisdiction:`GLOBAL`,dtcId:e.dtcId}),a(!1),s($y),d(`Item added`),setTimeout(()=>d(null),3e3),r(!0),await g()}catch(e){console.error(`Failed to create document:`,e),d(`Failed to save  `+(e.message||`try again`)),setTimeout(()=>d(null),4e3)}finally{l(!1)}}let x={width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},S={...x,background:`white`};function C(e){return eb[e]||tb}return(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`pageHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`My Important Stuff`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Documents, jewelry, artwork, personal mementos, and anything valuable you want to protect and track`})]})}),u&&(0,$.jsx)(`div`,{style:{padding:`10px 16px`,marginBottom:`12px`,borderRadius:`10px`,background:u.startsWith(`Failed`)?`#fef2f2`:`#f0fdf4`,color:u.startsWith(`Failed`)?`#dc2626`:`#16a34a`,fontSize:`14px`,fontWeight:500},children:u}),n?(0,$.jsx)(`div`,{className:`card`,style:{padding:`24px`,textAlign:`center`},children:`Loading...`}):e.length===0?(0,$.jsxs)(`div`,{className:`card`,style:{padding:`48px 32px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{width:`64px`,height:`64px`,borderRadius:`16px`,background:`linear-gradient(135deg, #e0e7ff 0%, #c7d2fe 100%)`,display:`flex`,alignItems:`center`,justifyContent:`center`,margin:`0 auto 20px`},children:(0,$.jsxs)(`svg`,{width:`28`,height:`28`,viewBox:`0 0 24 24`,fill:`none`,stroke:`#6366f1`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,$.jsx)(`path`,{d:`M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z`}),(0,$.jsx)(`polyline`,{points:`14 2 14 8 20 8`}),(0,$.jsx)(`line`,{x1:`16`,y1:`13`,x2:`8`,y2:`13`}),(0,$.jsx)(`line`,{x1:`16`,y1:`17`,x2:`8`,y2:`17`})]})}),(0,$.jsx)(`div`,{style:{fontSize:`18px`,fontWeight:600,color:`#1e293b`,marginBottom:`10px`},children:`Your important stuff, all in one place`}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`#64748b`,marginBottom:`24px`,maxWidth:`420px`,margin:`0 auto 24px`,lineHeight:`1.6`},children:`Store and manage the things that matter most -- important documents, jewelry, artwork, collectibles, family heirlooms, and anything else you want to keep safe, tracked, and verified.`}),(0,$.jsx)(`button`,{onClick:()=>a(!0),style:{padding:`12px 28px`,background:`linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%)`,color:`white`,border:`none`,borderRadius:`12px`,fontSize:`14px`,fontWeight:600,cursor:`pointer`},children:`Add Item`})]}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{style:{marginBottom:`12px`},children:(0,$.jsx)(`button`,{onClick:()=>a(!0),style:{padding:`10px 20px`,background:`linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%)`,color:`white`,border:`none`,borderRadius:`10px`,fontSize:`13px`,fontWeight:600,cursor:`pointer`},children:`+ Add Item`})}),(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(auto-fill, minmax(320px, 1fr))`,gap:`12px`},children:e.map(e=>{let t=e.metadata?.category||(e.type===`document`?`Document`:`Other`),n=C(t);return(0,$.jsxs)(`div`,{className:`card`,style:{position:`relative`,overflow:`hidden`},children:[(0,$.jsxs)(`div`,{style:{height:`100px`,background:e.imageUrl?`none`:`linear-gradient(135deg, ${n.color}12 0%, ${n.color}06 100%)`,display:`flex`,alignItems:`center`,justifyContent:`center`,position:`relative`,overflow:`hidden`},children:[e.imageUrl?(0,$.jsx)(`img`,{src:e.imageUrl,alt:e.metadata?.title||`Item`,style:{width:`100%`,height:`100%`,objectFit:`cover`}}):n.icon(n.color),(0,$.jsx)(`button`,{onClick:()=>v(e.id),style:{position:`absolute`,top:`8px`,right:`8px`,background:`white`,border:`1px solid #e5e7eb`,borderRadius:`8px`,width:`28px`,height:`28px`,display:`flex`,alignItems:`center`,justifyContent:`center`,cursor:`pointer`,color:`#94a3b8`,fontSize:`14px`},title:`Delete`,children:(0,$.jsxs)(`svg`,{width:`14`,height:`14`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,$.jsx)(`polyline`,{points:`3 6 5 6 21 6`}),(0,$.jsx)(`path`,{d:`M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2`})]})}),(0,$.jsx)(`span`,{style:{position:`absolute`,bottom:`8px`,right:`10px`,fontSize:`11px`,fontWeight:600,padding:`3px 10px`,borderRadius:`20px`,background:`${n.color}20`,color:n.color},children:t})]}),(0,$.jsxs)(`div`,{style:{padding:`14px 20px 4px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`16px`,color:`#1e293b`},children:e.metadata?.documentName||e.metadata?.title||`Item`}),e.metadata?.estimatedValue&&(0,$.jsxs)(`div`,{style:{fontSize:`13px`,color:`#64748b`,marginTop:`2px`},children:[`Estimated value: $`,Number(e.metadata.estimatedValue).toLocaleString()]})]}),(0,$.jsxs)(`div`,{style:{padding:`8px 20px 12px`},children:[e.metadata?.description&&(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#475569`,marginBottom:`6px`,lineHeight:`1.5`},children:e.metadata.description}),nb(e.createdAt)&&(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,padding:`3px 0`,fontSize:`13px`},children:[(0,$.jsx)(`span`,{style:{color:`#64748b`},children:`Added`}),(0,$.jsx)(`span`,{style:{fontWeight:500,color:`#1e293b`},children:nb(e.createdAt)})]})]}),(0,$.jsx)(`div`,{style:{padding:`10px 20px 14px`,borderTop:`1px solid #f1f5f9`,display:`flex`,gap:`8px`},children:(0,$.jsx)(`span`,{className:`badge badge-${e.status||`active`}`,style:{display:`flex`,alignItems:`center`},children:e.status||`Active`})})]},e.id)})})]}),(0,$.jsx)(Ev,{isOpen:i,onClose:()=>a(!1),title:`Add Item`,onSubmit:y,submitLabel:c?`Saving...`:`Save`,children:(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Item Name`}),(0,$.jsx)(`input`,{type:`text`,value:o.name,onChange:e=>s({...o,name:e.target.value}),placeholder:`e.g., Passport, Grandmother's Ring, Signed Print`,style:x,required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Category`}),(0,$.jsxs)(`select`,{value:o.category,onChange:e=>s({...o,category:e.target.value}),style:S,children:[(0,$.jsx)(`option`,{value:`Document`,children:`Document`}),(0,$.jsx)(`option`,{value:`Jewelry`,children:`Jewelry`}),(0,$.jsx)(`option`,{value:`Artwork`,children:`Artwork`}),(0,$.jsx)(`option`,{value:`Electronics`,children:`Electronics`}),(0,$.jsx)(`option`,{value:`Collectible`,children:`Collectible`}),(0,$.jsx)(`option`,{value:`Family Heirloom`,children:`Family Heirloom`}),(0,$.jsx)(`option`,{value:`Other`,children:`Other`})]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Description (optional)`}),(0,$.jsx)(`textarea`,{value:o.description,onChange:e=>s({...o,description:e.target.value}),rows:3,style:x})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Estimated Value (optional)`}),(0,$.jsx)(`input`,{type:`text`,value:o.estimatedValue?`$`+Number(String(o.estimatedValue).replace(/[$,]/g,``)).toLocaleString():``,onChange:e=>s({...o,estimatedValue:e.target.value.replace(/[$,]/g,``)}),placeholder:`$`,style:x})]}),(0,$.jsx)(`div`,{style:{marginTop:`4px`,padding:`12px`,background:`#f8fafc`,borderRadius:`10px`,border:`1px solid #e2e8f0`},children:(0,$.jsxs)(`label`,{style:{display:`flex`,alignItems:`flex-start`,gap:`10px`,cursor:`pointer`,fontSize:`13px`,color:`#475569`,lineHeight:1.5},children:[(0,$.jsx)(`input`,{type:`checkbox`,checked:o.attested,onChange:e=>s({...o,attested:e.target.checked}),style:{marginTop:`3px`,flexShrink:0}}),`I represent that I am the lawful owner of this item and that the information provided is accurate to the best of my knowledge.`]})})]})}),f&&(0,$.jsx)(zy,{onVerified:m,onClose:h})]})}var ib={creation:{icon:`C`,color:`#7c3aed`,label:`Created`},maintenance:{icon:`M`,color:`#06b6d4`,label:`Maintenance`},transfer:{icon:`T`,color:`#7c3aed`,label:`Transfer`},inspection:{icon:`I`,color:`#22c55e`,label:`Inspection`},update:{icon:`U`,color:`#f59e0b`,label:`Update`},payment:{icon:`P`,color:`#16a34a`,label:`Payment`},verification:{icon:`V`,color:`#6366f1`,label:`Verification`},note:{icon:`N`,color:`#64748b`,label:`Note`},attestation:{icon:`A`,color:`#7c3aed`,label:`Attestation`}},ab=[{value:`update`,label:`Update`},{value:`maintenance`,label:`Maintenance`},{value:`payment`,label:`Payment`},{value:`note`,label:`Note`},{value:`verification`,label:`Verification`},{value:`transfer`,label:`Transfer`}];function ob(e){if(!e)return``;let t=e.toDate?e.toDate():e._seconds?new Date(e._seconds*1e3):new Date(e);return isNaN(t.getTime())?``:t.toLocaleDateString(`en-US`,{month:`short`,day:`numeric`,year:`numeric`,hour:`numeric`,minute:`2-digit`})}function sb(){let[e,t]=(0,_.useState)([]),[n,r]=(0,_.useState)(!0),[i,a]=(0,_.useState)({}),[o,s]=(0,_.useState)(null),[c,l]=(0,_.useState)({entryType:`update`,description:``}),[u,d]=(0,_.useState)(!1),[f,p]=(0,_.useState)(null),m=_.useRef(null);(0,_.useEffect)(()=>{h()},[]);async function h(){try{let e=await F_({vertical:`consumer`,jurisdiction:`GLOBAL`});t(e.entries||[]);let n={};(e.entries||[]).forEach(e=>{e.dtcId&&(n[e.dtcId]=!0)}),a(n)}catch(e){console.error(`Failed to load logbook:`,e);try{t((await X_({vertical:`consumer`,jurisdiction:`GLOBAL`,limit:50})).activity||[])}catch(e){console.error(`Fallback also failed:`,e)}}finally{r(!1)}}function g(e){a(t=>({...t,[e]:!t[e]}))}async function v(e){if(c.description.trim()){d(!0);try{let t=null;f&&(t=await new Promise((e,t)=>{let n=new FileReader;n.onload=()=>e({name:f.name,type:f.type,data:n.result}),n.onerror=()=>t(Error(`Failed to read file`)),n.readAsDataURL(f)})),await I_({vertical:`consumer`,jurisdiction:`GLOBAL`,entry:{dtcId:e,entryType:c.entryType,data:{description:c.description}},...t?{file:t}:{}}),s(null),l({entryType:`update`,description:``}),p(null),r(!0),await h()}catch(e){console.error(`Failed to add entry:`,e)}finally{d(!1)}}}let y={};e.forEach(e=>{let t=e.dtcId||e.id||`other`;y[t]||(y[t]={title:e.dtcTitle||e.workflowId||`Activity`,entries:[]}),y[t].entries.push(e)});let b={width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},x={...b,background:`white`};return(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`pageHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`My Logbooks`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Every important item gets its own permanent timeline`})]})}),(0,$.jsxs)(`div`,{className:`card`,style:{marginBottom:`16px`,padding:`20px`,background:`#faf5ff`,border:`1px solid #e9d5ff`},children:[(0,$.jsx)(`div`,{style:{fontSize:`15px`,fontWeight:600,color:`#1e293b`,marginBottom:`8px`},children:`How Logbooks Work`}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`#64748b`,lineHeight:`1.7`},children:`Every important item in your Vault gets its own logbook -- a permanent timeline of everything that happens to it. When you add a vehicle, property, or valuable item, TitleApp automatically starts tracking it. Every update, verification, and change is recorded with a timestamp so you always have proof of what happened and when.`})]}),n?(0,$.jsx)(`div`,{className:`card`,style:{padding:`24px`,textAlign:`center`},children:`Loading logbooks...`}):Object.keys(y).length===0?(0,$.jsxs)(`div`,{className:`card`,style:{padding:`48px 32px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{width:`64px`,height:`64px`,borderRadius:`16px`,background:`linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%)`,display:`flex`,alignItems:`center`,justifyContent:`center`,margin:`0 auto 20px`},children:(0,$.jsxs)(`svg`,{width:`28`,height:`28`,viewBox:`0 0 24 24`,fill:`none`,stroke:`#7c3aed`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,$.jsx)(`path`,{d:`M4 19.5A2.5 2.5 0 0 1 6.5 17H20`}),(0,$.jsx)(`path`,{d:`M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z`})]})}),(0,$.jsx)(`div`,{style:{fontSize:`18px`,fontWeight:600,color:`#1e293b`,marginBottom:`10px`},children:`No logbook entries yet`}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`#64748b`,maxWidth:`420px`,margin:`0 auto`,lineHeight:`1.6`},children:`Add a vehicle, property, or important item to get started. Each item gets its own logbook that tracks everything automatically.`})]}):(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`12px`},children:Object.entries(y).map(([e,t])=>(0,$.jsxs)(`div`,{className:`card`,style:{overflow:`hidden`},children:[(0,$.jsxs)(`button`,{onClick:()=>g(e),style:{width:`100%`,textAlign:`left`,padding:`16px 20px`,background:`#faf5ff`,border:`none`,borderBottom:i[e]?`1px solid #e9d5ff`:`none`,cursor:`pointer`,display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{style:{fontWeight:700,fontSize:`15px`,color:`#1e293b`},children:[`Logbook: `,t.title]}),(0,$.jsxs)(`div`,{style:{fontSize:`12px`,color:`#64748b`,marginTop:`2px`},children:[t.entries.length,` `,t.entries.length===1?`entry`:`entries`]})]}),(0,$.jsx)(`span`,{style:{color:`#7c3aed`,fontSize:`18px`},children:i[e]?``:``})]}),i[e]&&(0,$.jsxs)(`div`,{style:{padding:`16px 20px`},children:[o!==e&&(0,$.jsx)(`div`,{style:{marginBottom:`14px`},children:(0,$.jsx)(`button`,{onClick:()=>{s(e),l({entryType:`update`,description:``})},className:`iconBtn`,style:{fontSize:`13px`},children:`+ Add Entry`})}),o===e&&(0,$.jsxs)(`div`,{style:{padding:`14px`,background:`#f8fafc`,borderRadius:`12px`,border:`1px solid var(--line)`,marginBottom:`16px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:600,fontSize:`14px`,color:`#1e293b`,marginBottom:`12px`},children:`New Entry`}),(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`10px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`4px`,fontWeight:600,fontSize:`12px`,color:`#64748b`},children:`Type`}),(0,$.jsx)(`select`,{value:c.entryType,onChange:e=>l({...c,entryType:e.target.value}),style:x,children:ab.map(e=>(0,$.jsx)(`option`,{value:e.value,children:e.label},e.value))})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`4px`,fontWeight:600,fontSize:`12px`,color:`#64748b`},children:`Description`}),(0,$.jsx)(`textarea`,{value:c.description,onChange:e=>l({...c,description:e.target.value}),rows:2,placeholder:`What happened?`,style:b})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`4px`,fontWeight:600,fontSize:`12px`,color:`#64748b`},children:`Attach File (optional)`}),(0,$.jsx)(`input`,{ref:m,type:`file`,style:{display:`none`},onChange:e=>p(e.target.files?.[0]||null)}),f?(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`,padding:`8px 12px`,background:`white`,borderRadius:`10px`,border:`1px solid var(--line)`,fontSize:`13px`},children:[(0,$.jsx)(`span`,{style:{flex:1,overflow:`hidden`,textOverflow:`ellipsis`,whiteSpace:`nowrap`,color:`#475569`},children:f.name}),(0,$.jsx)(`button`,{type:`button`,onClick:()=>{p(null),m.current&&(m.current.value=``)},style:{background:`none`,border:`none`,cursor:`pointer`,color:`#94a3b8`,fontSize:`14px`},children:`x`})]}):(0,$.jsx)(`button`,{type:`button`,onClick:()=>m.current?.click(),className:`iconBtn`,style:{fontSize:`12px`},children:`Choose File`})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`},children:[(0,$.jsx)(`button`,{type:`button`,onClick:()=>alert(`DocuSign / e-signature integration coming soon. This will allow third parties to verify logbook entries.`),style:{padding:`8px 16px`,background:`#7c3aed`,color:`white`,border:`none`,borderRadius:`8px`,cursor:`pointer`,fontSize:`13px`,fontWeight:600},children:`Request Signature`}),(0,$.jsx)(`span`,{style:{fontSize:`11px`,color:`#94a3b8`},children:`DocuSign / e-signature -- coming soon`})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`},children:[(0,$.jsx)(`button`,{onClick:()=>v(e),disabled:u||!c.description.trim(),className:`iconBtn`,style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`,opacity:u?.6:1},children:u?`Saving...`:`Save Entry`}),(0,$.jsx)(`button`,{onClick:()=>{s(null),p(null)},className:`iconBtn`,children:`Cancel`})]})]})]}),t.entries.map((e,n)=>{let r=ib[e.entryType]||ib.note;return(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`14px`,padding:`14px 0`,borderBottom:n<t.entries.length-1?`1px solid var(--line)`:`none`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,alignItems:`center`},children:[(0,$.jsx)(`div`,{style:{width:`36px`,height:`36px`,borderRadius:`10px`,background:`${r.color}15`,border:`2px solid ${r.color}35`,display:`grid`,placeItems:`center`,fontSize:`14px`,fontWeight:700,color:r.color},children:r.icon}),n<t.entries.length-1&&(0,$.jsx)(`div`,{style:{flex:1,width:`2px`,background:`var(--line)`,marginTop:`4px`}})]}),(0,$.jsxs)(`div`,{style:{flex:1,paddingTop:`2px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`,marginBottom:`6px`},children:[(0,$.jsx)(`span`,{style:{fontSize:`12px`,fontWeight:600,padding:`2px 8px`,borderRadius:`6px`,background:`${r.color}15`,color:r.color},children:r.label}),(0,$.jsx)(`span`,{style:{fontSize:`12px`,color:`#94a3b8`},children:ob(e.createdAt)})]}),e.data&&typeof e.data==`object`&&Object.entries(e.data).map(([e,t])=>(0,$.jsxs)(`div`,{style:{fontSize:`13px`,marginBottom:`2px`},children:[(0,$.jsxs)(`span`,{style:{fontWeight:600},children:[e.charAt(0).toUpperCase()+e.slice(1).replace(/_/g,` `),`:`]}),` `,(0,$.jsx)(`span`,{style:{color:`#475569`},children:t})]},e)),e.description&&(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#475569`},children:e.description}),e.summary&&(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#475569`},children:e.summary})]})]},e.id||n)})]})]},e))})]})}var cb={name:``,recordType:`Certificate`,issuer:``,issueDate:``,expiryDate:``,attested:!1};function lb(e){if(!e)return``;let t=e.toDate?e.toDate():e._seconds?new Date(e._seconds*1e3):new Date(e);return isNaN(t.getTime())?``:t.toLocaleDateString(`en-US`,{month:`short`,day:`numeric`,year:`numeric`})}function ub(){let[e,t]=(0,_.useState)([]),[n,r]=(0,_.useState)(!0),[i,a]=(0,_.useState)(!1),[o,s]=(0,_.useState)(cb),[c,l]=(0,_.useState)(!1),[u,d]=(0,_.useState)(null);(0,_.useEffect)(()=>{f()},[]);async function f(){try{t(((await L_({vertical:`consumer`,jurisdiction:`GLOBAL`})).inventory||[]).filter(e=>(e.metadata?.credentialName||e.metadata?.school||e.metadata?.issuer||e.type===`credential`||e.type===`education`||e.type===`certification`)&&(e.metadata?.credentialName||e.metadata?.title||e.metadata?.school||e.metadata?.issuer)))}catch(e){console.error(`Failed to load certifications:`,e)}finally{r(!1)}}async function p(e){if(window.confirm(`Delete this record?`))try{await B_({vertical:`consumer`,jurisdiction:`GLOBAL`,id:e}),d(`Record deleted`),setTimeout(()=>d(null),3e3),t(t=>t.filter(t=>t.id!==e))}catch(e){console.error(`Failed to delete:`,e),d(`Failed to delete  `+(e.message||`try again`)),setTimeout(()=>d(null),4e3)}}async function m(e){if(e.preventDefault(),o.name){l(!0);try{let e=await R_({vertical:`consumer`,jurisdiction:`GLOBAL`,item:{type:`certification`,status:`active`,metadata:{credentialName:o.name,title:o.name,recordType:o.recordType,issuer:o.issuer,issueDate:o.issueDate,expiryDate:o.expiryDate},price:0,cost:0}});o.attested&&e.dtcId&&await V_({vertical:`consumer`,jurisdiction:`GLOBAL`,dtcId:e.dtcId}),a(!1),s(cb),d(`Record added`),setTimeout(()=>d(null),3e3),r(!0),await f()}catch(e){console.error(`Failed to create certification:`,e),d(`Failed to save  `+(e.message||`try again`)),setTimeout(()=>d(null),4e3)}finally{l(!1)}}}let h={width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},g={...h,background:`white`};function v(e){if(!e)return!1;let t=new Date(e),n=new Date,r=t.getTime()-n.getTime();return r>0&&r<2160*60*60*1e3}function y(e){return e?new Date(e)<new Date:!1}return(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`pageHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Student Records & Certifications`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Academic transcripts, degrees, professional licenses, industry certifications, and credentials`})]})}),u&&(0,$.jsx)(`div`,{style:{padding:`10px 16px`,marginBottom:`12px`,borderRadius:`10px`,background:u.startsWith(`Failed`)?`#fef2f2`:`#f0fdf4`,color:u.startsWith(`Failed`)?`#dc2626`:`#16a34a`,fontSize:`14px`,fontWeight:500},children:u}),n?(0,$.jsx)(`div`,{className:`card`,style:{padding:`24px`,textAlign:`center`},children:`Loading...`}):e.length===0?(0,$.jsxs)(`div`,{className:`card`,style:{padding:`48px 32px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{width:`64px`,height:`64px`,borderRadius:`16px`,background:`linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)`,display:`flex`,alignItems:`center`,justifyContent:`center`,margin:`0 auto 20px`},children:(0,$.jsxs)(`svg`,{width:`28`,height:`28`,viewBox:`0 0 24 24`,fill:`none`,stroke:`#d97706`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,$.jsx)(`circle`,{cx:`12`,cy:`8`,r:`7`}),(0,$.jsx)(`polyline`,{points:`8.21 13.89 7 23 12 20 17 23 15.79 13.88`})]})}),(0,$.jsx)(`div`,{style:{fontSize:`18px`,fontWeight:600,color:`#1e293b`,marginBottom:`10px`},children:`Track your education and credentials`}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`#64748b`,maxWidth:`420px`,margin:`0 auto 24px`,lineHeight:`1.6`},children:`Academic records, degrees, professional licenses, industry certifications -- keep them all current with expiration tracking and renewal reminders.`}),(0,$.jsx)(`button`,{onClick:()=>a(!0),style:{padding:`12px 28px`,background:`linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%)`,color:`white`,border:`none`,borderRadius:`12px`,fontSize:`14px`,fontWeight:600,cursor:`pointer`},children:`Add Record`})]}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{style:{marginBottom:`12px`},children:(0,$.jsx)(`button`,{onClick:()=>a(!0),style:{padding:`10px 20px`,background:`linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%)`,color:`white`,border:`none`,borderRadius:`10px`,fontSize:`13px`,fontWeight:600,cursor:`pointer`},children:`+ Add Record`})}),(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(auto-fill, minmax(320px, 1fr))`,gap:`12px`},children:e.map(e=>{let t=y(e.metadata?.expiryDate),n=v(e.metadata?.expiryDate),r=t?`#dc2626`:n?`#f59e0b`:`#d97706`;return(0,$.jsxs)(`div`,{className:`card`,style:{position:`relative`,overflow:`hidden`},children:[(0,$.jsxs)(`div`,{style:{height:`100px`,background:e.imageUrl?`none`:`linear-gradient(135deg, ${r}12 0%, ${r}06 100%)`,display:`flex`,alignItems:`center`,justifyContent:`center`,position:`relative`,overflow:`hidden`},children:[e.imageUrl?(0,$.jsx)(`img`,{src:e.imageUrl,alt:e.metadata?.title||`Certification`,style:{width:`100%`,height:`100%`,objectFit:`cover`}}):(0,$.jsxs)(`svg`,{width:`48`,height:`48`,viewBox:`0 0 24 24`,fill:`none`,stroke:r,strokeWidth:`1.5`,strokeLinecap:`round`,strokeLinejoin:`round`,style:{opacity:.6},children:[(0,$.jsx)(`circle`,{cx:`12`,cy:`8`,r:`7`}),(0,$.jsx)(`polyline`,{points:`8.21 13.89 7 23 12 20 17 23 15.79 13.88`})]}),(0,$.jsx)(`button`,{onClick:()=>p(e.id),style:{position:`absolute`,top:`8px`,right:`8px`,background:`white`,border:`1px solid #e5e7eb`,borderRadius:`8px`,width:`28px`,height:`28px`,display:`flex`,alignItems:`center`,justifyContent:`center`,cursor:`pointer`,color:`#94a3b8`,fontSize:`14px`},title:`Delete`,children:(0,$.jsxs)(`svg`,{width:`14`,height:`14`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,$.jsx)(`polyline`,{points:`3 6 5 6 21 6`}),(0,$.jsx)(`path`,{d:`M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2`})]})}),(0,$.jsx)(`span`,{style:{position:`absolute`,bottom:`8px`,right:`10px`,fontSize:`11px`,fontWeight:600,padding:`3px 10px`,borderRadius:`20px`,background:`${r}20`,color:r},children:e.metadata?.recordType||`Certification`})]}),(0,$.jsxs)(`div`,{style:{padding:`14px 20px 4px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`16px`,color:`#1e293b`},children:e.metadata?.credentialName||e.metadata?.title||e.metadata?.school||`Record`}),e.metadata?.issuer&&(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`,marginTop:`2px`},children:e.metadata.issuer})]}),(0,$.jsxs)(`div`,{style:{padding:`8px 20px 12px`},children:[e.metadata?.issueDate&&(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,padding:`3px 0`,fontSize:`13px`},children:[(0,$.jsx)(`span`,{style:{color:`#64748b`},children:`Issued`}),(0,$.jsx)(`span`,{style:{fontWeight:500,color:`#1e293b`},children:e.metadata.issueDate})]}),e.metadata?.expiryDate&&(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,padding:`3px 0`,fontSize:`13px`},children:[(0,$.jsx)(`span`,{style:{color:`#64748b`},children:`Expires`}),(0,$.jsxs)(`span`,{style:{fontWeight:500,color:t?`#dc2626`:n?`#f59e0b`:`#1e293b`},children:[e.metadata.expiryDate,t?` (Expired)`:n?` (Expiring soon)`:``]})]}),lb(e.createdAt)&&(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,padding:`3px 0`,fontSize:`13px`},children:[(0,$.jsx)(`span`,{style:{color:`#64748b`},children:`Added`}),(0,$.jsx)(`span`,{style:{fontWeight:500,color:`#1e293b`},children:lb(e.createdAt)})]})]}),(0,$.jsx)(`div`,{style:{padding:`10px 20px 14px`,borderTop:`1px solid #f1f5f9`,display:`flex`,gap:`8px`},children:(0,$.jsx)(`span`,{className:`badge badge-${t?`expired`:e.status||`active`}`,style:{display:`flex`,alignItems:`center`},children:t?`Expired`:e.status||`Active`})})]},e.id)})})]}),(0,$.jsx)(Ev,{isOpen:i,onClose:()=>a(!1),title:`Add Record`,onSubmit:m,submitLabel:c?`Saving...`:`Save Record`,children:(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Name / Title`}),(0,$.jsx)(`input`,{type:`text`,value:o.name,onChange:e=>s({...o,name:e.target.value}),placeholder:`e.g., MBA - Harvard, CPA License, Pilot Certificate`,style:h,required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Type`}),(0,$.jsxs)(`select`,{value:o.recordType,onChange:e=>s({...o,recordType:e.target.value}),style:g,children:[(0,$.jsx)(`option`,{value:`Degree`,children:`Degree`}),(0,$.jsx)(`option`,{value:`Certificate`,children:`Certificate`}),(0,$.jsx)(`option`,{value:`License`,children:`License`}),(0,$.jsx)(`option`,{value:`Professional Certification`,children:`Professional Certification`}),(0,$.jsx)(`option`,{value:`Other`,children:`Other`})]})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Issuing Institution (optional)`}),(0,$.jsx)(`input`,{type:`text`,value:o.issuer,onChange:e=>s({...o,issuer:e.target.value}),placeholder:`e.g., Harvard University, State of Illinois`,style:h})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`10px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Issue Date`}),(0,$.jsx)(`input`,{type:`date`,value:o.issueDate,onChange:e=>s({...o,issueDate:e.target.value}),style:h})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Expiry Date`}),(0,$.jsx)(`input`,{type:`date`,value:o.expiryDate,onChange:e=>s({...o,expiryDate:e.target.value}),style:h})]})]}),(0,$.jsx)(`div`,{style:{marginTop:`4px`,padding:`12px`,background:`#f8fafc`,borderRadius:`10px`,border:`1px solid #e2e8f0`},children:(0,$.jsxs)(`label`,{style:{display:`flex`,alignItems:`flex-start`,gap:`10px`,cursor:`pointer`,fontSize:`13px`,color:`#475569`,lineHeight:1.5},children:[(0,$.jsx)(`input`,{type:`checkbox`,checked:o.attested,onChange:e=>s({...o,attested:e.target.checked}),style:{marginTop:`3px`,flexShrink:0}}),`I represent that I hold this credential and that the information provided is accurate to the best of my knowledge.`]})})]})})]})}var db=[{id:`titleapp`,name:`TitleApp Wallet`,desc:`Built-in wallet powered by Venly. Your records are stored on Polygon blockchain.`,color:`#7c3aed`,connected:!0},{id:`phantom`,name:`Phantom`,desc:`Connect your Phantom wallet for Solana-based tokens and NFTs.`,color:`#ab9ff2`,connected:!1},{id:`metamask`,name:`MetaMask`,desc:`Connect MetaMask for Ethereum and Polygon assets.`,color:`#f6851b`,connected:!1},{id:`coinbase`,name:`Coinbase Wallet`,desc:`Connect Coinbase Wallet for multi-chain support.`,color:`#0052ff`,connected:!1}];function fb(){let[e,t]=(0,_.useState)(null),[n,r]=(0,_.useState)([]),[i,a]=(0,_.useState)([]),[o,s]=(0,_.useState)(!1),[c,l]=(0,_.useState)(`wallets`),[u,d]=(0,_.useState)(!1),[f,p]=(0,_.useState)(!1),[m,h]=(0,_.useState)({name:``,symbol:``,supply:``,network:`polygon`}),[g,v]=(0,_.useState)({companyName:``,totalShares:``,shareholders:[{name:``,shares:``,percentage:``}]}),y=`consumer`,b=`GLOBAL`;(0,_.useEffect)(()=>{x()},[c]);async function x(){if(c!==`wallets`){s(!0);try{c===`tokens`?r((await iv({vertical:y,jurisdiction:b})).tokens||[]):c===`captables`?a((await ov({vertical:y,jurisdiction:b})).capTables||[]):c===`balance`&&t((await rv({vertical:y,jurisdiction:b})).assets||[])}catch(e){console.error(`Failed to load wallet data:`,e)}finally{s(!1)}}}async function S(e){e.preventDefault();try{await av({vertical:y,jurisdiction:b,token:m}),d(!1),h({name:``,symbol:``,supply:``,network:`polygon`}),l(`tokens`),await x()}catch(e){console.error(`Failed to create token:`,e)}}async function C(e){e.preventDefault();try{await sv({vertical:y,jurisdiction:b,capTable:{companyName:g.companyName,totalShares:parseInt(g.totalShares),shareholders:g.shareholders.map(e=>({name:e.name,shares:parseInt(e.shares),percentage:parseFloat(e.percentage)}))}}),p(!1),v({companyName:``,totalShares:``,shareholders:[{name:``,shares:``,percentage:``}]}),l(`captables`),await x()}catch(e){console.error(`Failed to create cap table:`,e)}}function w(e,t,n){let r=[...g.shareholders];r[e][t]=n,t===`shares`&&g.totalShares&&(r[e].percentage=(parseFloat(n)/parseFloat(g.totalShares)*100).toFixed(2)),v({...g,shareholders:r})}let T={width:`100%`,padding:`10px`,borderRadius:`12px`,border:`1px solid var(--line)`},E={...T,background:`white`};return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`My Wallet`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Connect and manage your on-chain assets and wallets`})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`},children:[(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>d(!0),style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`},children:`+ Create Token`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>p(!0),children:`+ Cap Table`})]})]}),(0,$.jsx)(`div`,{style:{display:`flex`,gap:`8px`,marginBottom:`16px`},children:[{id:`wallets`,label:`Wallets`},{id:`balance`,label:`Balance`},{id:`tokens`,label:`Tokens`},{id:`captables`,label:`Cap Tables`}].map(e=>(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>l(e.id),style:{background:c===e.id?`rgba(124,58,237,0.16)`:`#fff`,borderColor:c===e.id?`rgba(124,58,237,0.35)`:`var(--line)`,fontWeight:c===e.id?600:400},children:e.label},e.id))}),c===`wallets`&&(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(auto-fill, minmax(300px, 1fr))`,gap:`12px`},children:db.map(e=>(0,$.jsxs)(`div`,{className:`card`,style:{padding:`20px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`flex-start`,marginBottom:`12px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`},children:[(0,$.jsx)(`div`,{style:{width:`40px`,height:`40px`,borderRadius:`12px`,background:`${e.color}15`,border:`1px solid ${e.color}35`,display:`grid`,placeItems:`center`,fontWeight:700,fontSize:`16px`,color:e.color},children:e.name.charAt(0)}),(0,$.jsx)(`div`,{children:(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`15px`,color:`#1e293b`},children:e.name})})]}),e.connected&&(0,$.jsx)(`span`,{className:`badge badge-completed`,style:{fontSize:`11px`},children:`Connected`})]}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`,lineHeight:`1.6`,marginBottom:`14px`},children:e.desc}),(0,$.jsx)(`button`,{className:`iconBtn`,style:e.connected?{opacity:.5,cursor:`default`}:{},children:e.connected?`Connected`:`Connect`})]},e.id))}),c===`balance`&&(o?(0,$.jsx)(`div`,{className:`card`,style:{padding:`24px`,textAlign:`center`},children:`Loading balance...`}):e&&e.length>0?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`div`,{className:`card`,style:{marginBottom:`16px`},children:(0,$.jsxs)(`div`,{style:{padding:`24px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`,marginBottom:`8px`},children:`Total Net Worth`}),(0,$.jsxs)(`div`,{style:{fontSize:`48px`,fontWeight:700,color:`var(--accent)`},children:[`$`,e.reduce((e,t)=>e+(t.value||0),0).toLocaleString()]})]})}),(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(auto-fill, minmax(200px, 1fr))`,gap:`12px`},children:e.map(e=>(0,$.jsxs)(`div`,{className:`card`,style:{padding:`20px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`,marginBottom:`6px`},children:e.type}),(0,$.jsxs)(`div`,{style:{fontSize:`24px`,fontWeight:700},children:[`$`,(e.value||0).toLocaleString()]}),(0,$.jsxs)(`div`,{style:{fontSize:`12px`,color:`#94a3b8`,marginTop:`4px`},children:[e.count||0,` asset`,(e.count||0)===1?``:`s`]})]},e.type))})]}):(0,$.jsx)(`div`,{className:`card`,style:{padding:`32px`,textAlign:`center`,color:`#64748b`},children:`No assets found. Add items to your Vault to see their value here.`})),c===`tokens`&&(o?(0,$.jsx)(`div`,{className:`card`,style:{padding:`24px`,textAlign:`center`},children:`Loading tokens...`}):n.length===0?(0,$.jsxs)(`div`,{className:`card`,style:{padding:`48px 32px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`18px`,fontWeight:600,color:`#1e293b`,marginBottom:`10px`},children:`No tokens yet`}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`#64748b`,marginBottom:`20px`},children:`Create your first memecoin or utility token.`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>d(!0),style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`},children:`Create Token`})]}):(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`12px`},children:n.map(e=>(0,$.jsxs)(`div`,{className:`card`,children:[(0,$.jsxs)(`div`,{className:`cardHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`cardTitle`,children:[e.name,` (`,e.symbol,`)`]}),(0,$.jsxs)(`div`,{className:`cardSub`,children:[e.network,` network`]})]}),(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`18px`},children:e.currentValue||`--`})]}),(0,$.jsxs)(`div`,{className:`detail`,children:[(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Total Supply`}),(0,$.jsx)(`div`,{className:`v`,children:parseInt(e.supply).toLocaleString()})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Holders`}),(0,$.jsx)(`div`,{className:`v`,children:e.holders||0})]}),(0,$.jsxs)(`div`,{className:`kvRow`,children:[(0,$.jsx)(`div`,{className:`k`,children:`Created`}),(0,$.jsx)(`div`,{className:`v`,children:new Date(e.createdAt).toLocaleDateString()})]})]})]},e.id))})),c===`captables`&&(o?(0,$.jsx)(`div`,{className:`card`,style:{padding:`24px`,textAlign:`center`},children:`Loading cap tables...`}):i.length===0?(0,$.jsxs)(`div`,{className:`card`,style:{padding:`48px 32px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`18px`,fontWeight:600,color:`#1e293b`,marginBottom:`10px`},children:`No cap tables yet`}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`#64748b`,marginBottom:`20px`},children:`Create a cap table to track ownership and equity.`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>p(!0),style:{background:`var(--accent)`,color:`white`,borderColor:`var(--accent)`},children:`Create Cap Table`})]}):(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`12px`},children:i.map(e=>(0,$.jsxs)(`div`,{className:`card`,children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`cardTitle`,children:e.companyName}),(0,$.jsxs)(`div`,{className:`cardSub`,children:[(e.totalShares||0).toLocaleString(),` total shares`]})]})}),e.shareholders&&e.shareholders.length>0&&(0,$.jsx)(`div`,{className:`tableWrap`,children:(0,$.jsxs)(`table`,{className:`table`,children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{children:`Shareholder`}),(0,$.jsx)(`th`,{children:`Shares`}),(0,$.jsx)(`th`,{children:`%`})]})}),(0,$.jsx)(`tbody`,{children:e.shareholders.map((e,t)=>(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`td`,{className:`tdStrong`,children:e.name}),(0,$.jsx)(`td`,{children:(e.shares||0).toLocaleString()}),(0,$.jsxs)(`td`,{children:[e.percentage,`%`]})]},t))})]})})]},e.id))})),(0,$.jsx)(Ev,{isOpen:u,onClose:()=>d(!1),title:`Create Token`,onSubmit:S,submitLabel:`Create Token`,children:(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Token Name`}),(0,$.jsx)(`input`,{type:`text`,value:m.name,onChange:e=>h({...m,name:e.target.value}),placeholder:`e.g., MyFamily Coin`,style:T,required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Symbol`}),(0,$.jsx)(`input`,{type:`text`,value:m.symbol,onChange:e=>h({...m,symbol:e.target.value.toUpperCase()}),placeholder:`e.g., MFAM`,maxLength:5,style:T,required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Total Supply`}),(0,$.jsx)(`input`,{type:`number`,value:m.supply,onChange:e=>h({...m,supply:e.target.value}),placeholder:`e.g., 1000000`,style:T,required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Network`}),(0,$.jsxs)(`select`,{value:m.network,onChange:e=>h({...m,network:e.target.value}),style:E,children:[(0,$.jsx)(`option`,{value:`polygon`,children:`Polygon`}),(0,$.jsx)(`option`,{value:`ethereum`,children:`Ethereum`}),(0,$.jsx)(`option`,{value:`base`,children:`Base`}),(0,$.jsx)(`option`,{value:`solana`,children:`Solana`})]})]})]})}),(0,$.jsx)(Ev,{isOpen:f,onClose:()=>p(!1),title:`Create Cap Table`,onSubmit:C,submitLabel:`Create Cap Table`,children:(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`14px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Company Name`}),(0,$.jsx)(`input`,{type:`text`,value:g.companyName,onChange:e=>v({...g,companyName:e.target.value}),placeholder:`e.g., Smith Family LLC`,style:T,required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{style:{display:`block`,marginBottom:`6px`,fontWeight:600,fontSize:`13px`},children:`Total Shares`}),(0,$.jsx)(`input`,{type:`number`,value:g.totalShares,onChange:e=>v({...g,totalShares:e.target.value}),placeholder:`e.g., 10000`,style:T,required:!0})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600,marginBottom:`8px`,fontSize:`13px`},children:`Shareholders`}),g.shareholders.map((e,t)=>(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`,marginBottom:`8px`},children:[(0,$.jsx)(`input`,{type:`text`,placeholder:`Name`,value:e.name,onChange:e=>w(t,`name`,e.target.value),style:{...T,flex:2},required:!0}),(0,$.jsx)(`input`,{type:`number`,placeholder:`Shares`,value:e.shares,onChange:e=>w(t,`shares`,e.target.value),style:{...T,flex:1},required:!0}),(0,$.jsx)(`input`,{type:`text`,placeholder:`%`,value:e.percentage,readOnly:!0,style:{...T,width:`60px`,background:`#f8fafc`}}),g.shareholders.length>1&&(0,$.jsx)(`button`,{type:`button`,className:`iconBtn`,onClick:()=>v({...g,shareholders:g.shareholders.filter((e,n)=>n!==t)}),style:{color:`var(--danger)`},children:`x`})]},t)),(0,$.jsx)(`button`,{type:`button`,className:`iconBtn`,onClick:()=>v({...g,shareholders:[...g.shareholders,{name:``,shares:``,percentage:``}]}),style:{marginTop:`4px`},children:`+ Add Shareholder`})]})]})})]})}var pb=[{id:1,company:`NovaTech Corp`,ticker:`NVTC`,shares:15e3,avgCost:52.4,currentPrice:68.2,sector:`Technology`},{id:2,company:`Meridian Healthcare`,ticker:`MHCI`,shares:8e3,avgCost:142,currentPrice:148.5,sector:`Healthcare`},{id:3,company:`Sentinel Defense`,ticker:`SNTL`,shares:12e3,avgCost:38.6,currentPrice:44.8,sector:`Industrials`},{id:4,company:`ClearView Analytics`,ticker:`CVWA`,shares:2e4,avgCost:28.1,currentPrice:34.75,sector:`Technology`},{id:5,company:`Atlas Capital Group`,ticker:`ATLC`,shares:5e3,avgCost:186,currentPrice:192.4,sector:`Financial Services`},{id:6,company:`Summit Energy Partners`,ticker:`SMEP`,shares:18e3,avgCost:24.8,currentPrice:22.6,sector:`Energy`},{id:7,company:`Apex Industries`,ticker:`APXI`,shares:1e4,avgCost:61.2,currentPrice:78.9,sector:`Industrials`},{id:8,company:`Pacific Rim Holdings`,ticker:`PCRM`,shares:7500,avgCost:95,currentPrice:102.3,sector:`Real Estate`},{id:9,company:`TechBridge Solutions`,ticker:`TBSG`,shares:25e3,avgCost:18.4,currentPrice:21.85,sector:`Technology`},{id:10,company:`Granite Financial`,ticker:`GRNT`,shares:6e3,avgCost:112.5,currentPrice:118.2,sector:`Financial Services`},{id:11,company:`Velocity Motors`,ticker:`VLCM`,shares:14e3,avgCost:44.2,currentPrice:46.8,sector:`Consumer`},{id:12,company:`BioGenesis Pharma`,ticker:`BGNP`,shares:9e3,avgCost:76.3,currentPrice:82.1,sector:`Healthcare`},{id:13,company:`CloudStack Inc`,ticker:`CLSK`,shares:22e3,avgCost:14.6,currentPrice:17.4,sector:`Technology`},{id:14,company:`Eagle Materials`,ticker:`EGLM`,shares:11e3,avgCost:31.8,currentPrice:29.5,sector:`Industrials`},{id:15,company:`Horizon Renewables`,ticker:`HRZN`,shares:16e3,avgCost:22.1,currentPrice:25.6,sector:`Energy`},{id:16,company:`DataPulse Systems`,ticker:`DPLS`,shares:3e4,avgCost:8.9,currentPrice:11.2,sector:`Technology`},{id:17,company:`Sterling Insurance`,ticker:`STRL`,shares:4500,avgCost:198,currentPrice:204.5,sector:`Financial Services`},{id:18,company:`Coastal Properties`,ticker:`CPTI`,shares:8500,avgCost:54.2,currentPrice:51.8,sector:`Real Estate`},{id:19,company:`Nexus Biotech`,ticker:`NXBT`,shares:13e3,avgCost:42.5,currentPrice:48.9,sector:`Healthcare`},{id:20,company:`Iron Ridge Mining`,ticker:`IRDG`,shares:2e4,avgCost:16.4,currentPrice:15.2,sector:`Energy`},{id:21,company:`Quantum Computing`,ticker:`QCMP`,shares:35e3,avgCost:6.8,currentPrice:9.4,sector:`Technology`},{id:22,company:`MedTech Devices`,ticker:`MDTD`,shares:7e3,avgCost:88.6,currentPrice:91.3,sector:`Healthcare`},{id:23,company:`Premier Logistics`,ticker:`PRLG`,shares:9500,avgCost:56.8,currentPrice:62.4,sector:`Industrials`}],mb=32e5;function hb(){let[e,t]=(0,_.useState)(`value`),[n,r]=(0,_.useState)(`desc`),i=pb.map(e=>{let t=e.shares*e.currentPrice,n=e.shares*e.avgCost,r=t-n,i=(r/n*100).toFixed(1);return{...e,value:t,cost:n,pl:r,plPct:parseFloat(i)}}),a=i.reduce((e,t)=>e+t.value,0),o=i.reduce((e,t)=>e+t.cost,0),s=a-o,c=(s/o*100).toFixed(1),l=a+mb,u=[...i].sort((t,r)=>{let i=t[e]||0,a=r[e]||0;return n===`desc`?a-i:i-a});function d(n){e===n?r(e=>e===`desc`?`asc`:`desc`):(t(n),r(`desc`))}let f=[...i].sort((e,t)=>t.plPct-e.plPct).slice(0,3),p=[...i].sort((e,t)=>e.plPct-t.plPct).slice(0,3);return(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`pageHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Portfolio`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Active positions and performance tracking`})]})}),(0,$.jsxs)(`div`,{className:`kpiRow`,children:[(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Total Portfolio Value`}),(0,$.jsxs)(`div`,{className:`kpiValue`,children:[`$`,(l/1e6).toFixed(1),`M`]})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Active Positions`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:pb.length})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Total P&L`}),(0,$.jsxs)(`div`,{className:`kpiValue`,style:{color:s>=0?`#16a34a`:`#dc2626`},children:[s>=0?`+`:``,`$`,(s/1e6).toFixed(2),`M (`,c,`%)`]})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Cash Available`}),(0,$.jsxs)(`div`,{className:`kpiValue`,children:[`$`,(mb/1e6).toFixed(1),`M`]})]})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`14px`,marginTop:`14px`},children:[(0,$.jsxs)(`div`,{className:`card`,style:{padding:`20px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`15px`,color:`#1e293b`,marginBottom:`12px`},children:`Top Performers`}),f.map(e=>(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,padding:`8px 0`,borderBottom:`1px solid #f1f5f9`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600,fontSize:`14px`},children:e.company}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:e.ticker})]}),(0,$.jsxs)(`div`,{style:{textAlign:`right`},children:[(0,$.jsxs)(`div`,{style:{fontWeight:700,color:`#16a34a`},children:[`+`,e.plPct,`%`]}),(0,$.jsxs)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:[`+$`,e.pl.toLocaleString()]})]})]},e.id))]}),(0,$.jsxs)(`div`,{className:`card`,style:{padding:`20px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`15px`,color:`#1e293b`,marginBottom:`12px`},children:`Bottom Performers`}),p.map(e=>(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,padding:`8px 0`,borderBottom:`1px solid #f1f5f9`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600,fontSize:`14px`},children:e.company}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:e.ticker})]}),(0,$.jsxs)(`div`,{style:{textAlign:`right`},children:[(0,$.jsxs)(`div`,{style:{fontWeight:700,color:e.plPct>=0?`#16a34a`:`#dc2626`},children:[e.plPct>=0?`+`:``,e.plPct,`%`]}),(0,$.jsxs)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:[e.pl>=0?`+`:``,`$`,e.pl.toLocaleString()]})]})]},e.id))]})]}),(0,$.jsxs)(`div`,{className:`card`,style:{marginTop:`14px`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,children:(0,$.jsx)(`div`,{className:`cardTitle`,children:`All Positions`})}),(0,$.jsx)(`div`,{className:`tableWrap`,children:(0,$.jsxs)(`table`,{className:`table`,style:{width:`100%`},children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{children:`Company`}),(0,$.jsx)(`th`,{children:`Ticker`}),(0,$.jsx)(`th`,{style:{cursor:`pointer`},onClick:()=>d(`shares`),children:`Shares`}),(0,$.jsx)(`th`,{children:`Avg Cost`}),(0,$.jsx)(`th`,{children:`Current`}),(0,$.jsx)(`th`,{style:{cursor:`pointer`},onClick:()=>d(`pl`),children:`P&L`}),(0,$.jsx)(`th`,{style:{cursor:`pointer`},onClick:()=>d(`value`),children:`% of Portfolio`}),(0,$.jsx)(`th`,{children:`Sector`})]})}),(0,$.jsx)(`tbody`,{children:u.map(e=>{let t=(e.value/l*100).toFixed(1);return(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`td`,{className:`tdStrong`,children:e.company}),(0,$.jsx)(`td`,{style:{fontSize:`12px`,color:`#64748b`},children:e.ticker}),(0,$.jsx)(`td`,{children:e.shares.toLocaleString()}),(0,$.jsxs)(`td`,{children:[`$`,e.avgCost.toFixed(2)]}),(0,$.jsxs)(`td`,{children:[`$`,e.currentPrice.toFixed(2)]}),(0,$.jsxs)(`td`,{style:{fontWeight:600,color:e.pl>=0?`#16a34a`:`#dc2626`},children:[e.pl>=0?`+`:``,`$`,e.pl.toLocaleString(),` (`,e.plPct,`%)`]}),(0,$.jsxs)(`td`,{children:[t,`%`]}),(0,$.jsx)(`td`,{children:(0,$.jsx)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:`#f1f5f9`,color:`#475569`},children:e.sector})})]},e.id)})})]})})]})]})}var gb=[{id:1,company:`NovaTech Corp`,type:`Earnings Analysis`,status:`Published`,analyst:`Sarah Chen`,updated:`Feb 19, 2026`,priority:`High`,notes:`Q4 beat estimates by 12%. Model updated. Fair value raised to $89.`},{id:2,company:`Meridian Healthcare`,type:`Earnings Analysis`,status:`In Progress`,analyst:`Sarah Chen`,updated:`Feb 18, 2026`,priority:`High`,notes:`Earnings tomorrow. Model needs CMS reimbursement rate update.`},{id:3,company:`Sentinel Defense`,type:`Event Analysis`,status:`Draft`,analyst:`Michael Torres`,updated:`Feb 19, 2026`,priority:`High`,notes:`Contract delay impact assessment. Position at 4.2% of portfolio.`},{id:4,company:`Healthcare IT Sector`,type:`Sector Review`,status:`Published`,analyst:`Sarah Chen`,updated:`Feb 17, 2026`,priority:`Medium`,notes:`Sector up 4.2% MTD. Telehealth leading. 3 portfolio companies exposed.`},{id:5,company:`TechBridge Solutions`,type:`Deal Evaluation`,status:`In Progress`,analyst:`Michael Torres`,updated:`Feb 16, 2026`,priority:`Medium`,notes:`Acquisition target: $45M revenue, 22% EBITDA margin. Risk score 58.`},{id:6,company:`Energy Sector`,type:`Sector Review`,status:`Draft`,analyst:`David Park`,updated:`Feb 15, 2026`,priority:`Medium`,notes:`Oil price volatility impact on portfolio positions. Summit Energy down.`},{id:7,company:`Apex Industries`,type:`Model Update`,status:`Needs Update`,analyst:`Sarah Chen`,updated:`Jan 8, 2026`,priority:`High`,notes:`Model 42 days old. New contract win not reflected. Needs refresh.`},{id:8,company:`ClearView Analytics`,type:`Model Update`,status:`Needs Update`,analyst:`Michael Torres`,updated:`Jan 12, 2026`,priority:`Medium`,notes:`Model 38 days old. Product launch results not incorporated.`},{id:9,company:`Summit Energy Partners`,type:`Model Update`,status:`Needs Update`,analyst:`David Park`,updated:`Jan 15, 2026`,priority:`Medium`,notes:`Model 35 days old. New well production data available.`},{id:10,company:`US Macro`,type:`Macro Briefing`,status:`Published`,analyst:`David Park`,updated:`Feb 18, 2026`,priority:`Low`,notes:`Fed meeting next week. Market pricing 60% chance of hold.`},{id:11,company:`Pacific Rim Holdings`,type:`Deal Evaluation`,status:`Published`,analyst:`Michael Torres`,updated:`Feb 14, 2026`,priority:`Low`,notes:`REIT valuation analysis. NAV discount of 12%. Hold recommendation.`},{id:12,company:`Emerging Markets`,type:`Macro Briefing`,status:`Draft`,analyst:`David Park`,updated:`Feb 13, 2026`,priority:`Low`,notes:`EM allocation review. Currency headwinds in Q1. Considering reduction.`}],_b={Published:{bg:`#dcfce7`,color:`#16a34a`},"In Progress":{bg:`#dbeafe`,color:`#2563eb`},Draft:{bg:`#fef3c7`,color:`#d97706`},"Needs Update":{bg:`#fee2e2`,color:`#dc2626`}},vb={High:{bg:`#fee2e2`,color:`#dc2626`},Medium:{bg:`#fef3c7`,color:`#d97706`},Low:{bg:`#f1f5f9`,color:`#64748b`}};function yb(){let[e,t]=(0,_.useState)(`all`),[n,r]=(0,_.useState)(null),i=e===`all`?gb:gb.filter(t=>t.status===e),a={all:gb.length,Published:gb.filter(e=>e.status===`Published`).length,"In Progress":gb.filter(e=>e.status===`In Progress`).length,Draft:gb.filter(e=>e.status===`Draft`).length,"Needs Update":gb.filter(e=>e.status===`Needs Update`).length};return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Research`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Active research items, analyses, and sector reviews`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>window.dispatchEvent(new CustomEvent(`ta:chatPrompt`,{detail:{message:`Start a new research analysis. What company or sector should I look at?`}})),style:{background:`linear-gradient(135deg, #7c3aed, #6d28d9)`,color:`white`,border:`none`},children:`New Analysis`})]}),(0,$.jsx)(`div`,{style:{display:`flex`,gap:`8px`,marginBottom:`16px`,flexWrap:`wrap`},children:[`all`,`Published`,`In Progress`,`Draft`,`Needs Update`].map(n=>(0,$.jsxs)(`button`,{onClick:()=>t(n),style:{padding:`6px 14px`,borderRadius:`20px`,border:e===n?`2px solid #7c3aed`:`1px solid #e2e8f0`,background:e===n?`#f3e8ff`:`white`,color:e===n?`#7c3aed`:`#64748b`,fontSize:`13px`,fontWeight:600,cursor:`pointer`},children:[n===`all`?`All`:n,` (`,a[n],`)`]},n))}),(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{className:`tableWrap`,children:(0,$.jsxs)(`table`,{className:`table`,style:{width:`100%`},children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{children:`Company / Topic`}),(0,$.jsx)(`th`,{children:`Type`}),(0,$.jsx)(`th`,{children:`Status`}),(0,$.jsx)(`th`,{children:`Priority`}),(0,$.jsx)(`th`,{children:`Analyst`}),(0,$.jsx)(`th`,{children:`Last Updated`})]})}),(0,$.jsx)(`tbody`,{children:i.map(e=>{let t=_b[e.status]||_b.Draft,i=vb[e.priority]||vb.Low;return(0,$.jsxs)(_.Fragment,{children:[(0,$.jsxs)(`tr`,{style:{cursor:`pointer`},onClick:()=>r(n===e.id?null:e.id),children:[(0,$.jsx)(`td`,{className:`tdStrong`,children:e.company}),(0,$.jsx)(`td`,{style:{fontSize:`13px`,color:`#64748b`},children:e.type}),(0,$.jsx)(`td`,{children:(0,$.jsx)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:t.bg,color:t.color},children:e.status})}),(0,$.jsx)(`td`,{children:(0,$.jsx)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:i.bg,color:i.color},children:e.priority})}),(0,$.jsx)(`td`,{style:{fontSize:`13px`},children:e.analyst}),(0,$.jsx)(`td`,{style:{fontSize:`12px`,color:`#64748b`,whiteSpace:`nowrap`},children:e.updated})]}),n===e.id&&(0,$.jsx)(`tr`,{children:(0,$.jsxs)(`td`,{colSpan:6,style:{padding:`12px 16px`,background:`#f8fafc`,fontSize:`13px`,color:`#475569`,lineHeight:1.6,borderBottom:`2px solid #e2e8f0`},children:[e.notes,(0,$.jsx)(`div`,{style:{marginTop:`8px`,display:`flex`,gap:`8px`},children:(0,$.jsx)(`button`,{className:`iconBtn`,style:{fontSize:`12px`},onClick:t=>{t.stopPropagation(),window.dispatchEvent(new CustomEvent(`ta:chatPrompt`,{detail:{message:`Update the research on ${e.company}. Current notes: ${e.notes}`}}))},children:`Update with AI`})})]})})]},e.id)})})]})})})]})}var bb=[{id:1,name:`Blackstone Partners`,type:`LP`,aum:85e5,lastContact:`Feb 18, 2026`,nextAction:`Q4 letter due Friday`,status:`Active`},{id:2,name:`Smith Family Office`,type:`LP`,aum:52e5,lastContact:`Feb 17, 2026`,nextAction:`Meeting next Tuesday`,status:`Active`},{id:3,name:`Wellington Capital`,type:`LP`,aum:12e6,lastContact:`Feb 10, 2026`,nextAction:`Capital call notice`,status:`Active`},{id:4,name:`Pacific Ventures`,type:`LP`,aum:38e5,lastContact:`Feb 14, 2026`,nextAction:`Performance review`,status:`Active`},{id:5,name:`Meridian Endowment`,type:`LP`,aum:15e6,lastContact:`Feb 5, 2026`,nextAction:`Annual meeting invite`,status:`Active`},{id:6,name:`Atlas Retirement Fund`,type:`Client`,aum:67e5,lastContact:`Feb 12, 2026`,nextAction:`Portfolio rebalance review`,status:`Active`},{id:7,name:`Horizon Foundation`,type:`LP`,aum:41e5,lastContact:`Jan 28, 2026`,nextAction:`Follow-up on commitment`,status:`Pending`},{id:8,name:`Chen Family Trust`,type:`Client`,aum:28e5,lastContact:`Feb 16, 2026`,nextAction:`Tax planning discussion`,status:`Active`},{id:9,name:`Northern Lights Capital`,type:`Prospect`,aum:0,lastContact:`Feb 8, 2026`,nextAction:`Send pitch deck`,status:`Prospecting`},{id:10,name:`Redwood Partners`,type:`Prospect`,aum:0,lastContact:`Feb 1, 2026`,nextAction:`Schedule intro call`,status:`Prospecting`},{id:11,name:`Summit Advisors`,type:`LP`,aum:73e5,lastContact:`Feb 6, 2026`,nextAction:`Quarterly call`,status:`Active`},{id:12,name:`Eagle Point Capital`,type:`Client`,aum:45e5,lastContact:`Feb 11, 2026`,nextAction:`Strategy update`,status:`Active`},{id:13,name:`Pineview Investments`,type:`LP`,aum:91e5,lastContact:`Jan 20, 2026`,nextAction:`Re-up discussion`,status:`Active`},{id:14,name:`Cascade Partners`,type:`Prospect`,aum:0,lastContact:`Jan 15, 2026`,nextAction:`Second meeting`,status:`Prospecting`},{id:15,name:`Granite Holdings`,type:`LP`,aum:62e5,lastContact:`Feb 13, 2026`,nextAction:`Wire confirmation`,status:`Active`}],xb=[{id:1,client:`Blackstone Partners`,type:`Email`,subject:`Q4 Performance Update Draft`,date:`Feb 18, 2026`,status:`Sent`},{id:2,client:`Smith Family Office`,type:`Email`,subject:`Meeting Confirmation`,date:`Feb 17, 2026`,status:`Sent`},{id:3,client:`Wellington Capital`,type:`Email`,subject:`Capital Call Notice`,date:`Feb 15, 2026`,status:`Opened`},{id:4,client:`Pacific Ventures`,type:`Call`,subject:`Q4 Performance Discussion`,date:`Feb 14, 2026`,status:`Completed`},{id:5,client:`Chen Family Trust`,type:`Email`,subject:`Tax Strategy Memo`,date:`Feb 16, 2026`,status:`Sent`},{id:6,client:`Meridian Endowment`,type:`Email`,subject:`Annual Meeting Save the Date`,date:`Feb 5, 2026`,status:`Opened`}],Sb={LP:{bg:`#dbeafe`,color:`#2563eb`},Client:{bg:`#dcfce7`,color:`#16a34a`},Prospect:{bg:`#fef3c7`,color:`#d97706`}};function Cb(){let[e,t]=(0,_.useState)(`all`),[n,r]=(0,_.useState)(`clients`),i=bb.filter(e=>e.aum>0).reduce((e,t)=>e+t.aum,0),a=bb.filter(e=>e.status===`Active`).length,o=bb.filter(e=>e.status===`Prospecting`).length,s=e===`all`?bb:bb.filter(t=>t.type===e);return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Clients & LPs`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Limited partners, clients, and prospect management`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>window.dispatchEvent(new CustomEvent(`ta:chatPrompt`,{detail:{message:`Draft a quarterly update letter for all LPs with our current performance data`}})),style:{background:`linear-gradient(135deg, #7c3aed, #6d28d9)`,color:`white`,border:`none`},children:`Draft LP Update`})]}),(0,$.jsxs)(`div`,{className:`kpiRow`,children:[(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Total AUM`}),(0,$.jsxs)(`div`,{className:`kpiValue`,children:[`$`,(i/1e6).toFixed(1),`M`]})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Active Relationships`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:a})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Prospects`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:o})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Communications This Month`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:xb.length})]})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`,marginTop:`14px`,marginBottom:`14px`},children:[(0,$.jsx)(`button`,{onClick:()=>r(`clients`),style:{padding:`8px 16px`,borderRadius:`8px`,border:n===`clients`?`2px solid #7c3aed`:`1px solid #e2e8f0`,background:n===`clients`?`#f3e8ff`:`white`,color:n===`clients`?`#7c3aed`:`#64748b`,fontSize:`13px`,fontWeight:600,cursor:`pointer`},children:`Client List`}),(0,$.jsx)(`button`,{onClick:()=>r(`log`),style:{padding:`8px 16px`,borderRadius:`8px`,border:n===`log`?`2px solid #7c3aed`:`1px solid #e2e8f0`,background:n===`log`?`#f3e8ff`:`white`,color:n===`log`?`#7c3aed`:`#64748b`,fontSize:`13px`,fontWeight:600,cursor:`pointer`},children:`Communication Log`}),n===`clients`&&(0,$.jsx)(`div`,{style:{marginLeft:`auto`,display:`flex`,gap:`6px`},children:[`all`,`LP`,`Client`,`Prospect`].map(n=>(0,$.jsx)(`button`,{onClick:()=>t(n),style:{padding:`6px 12px`,borderRadius:`16px`,border:e===n?`2px solid #7c3aed`:`1px solid #e2e8f0`,background:e===n?`#f3e8ff`:`white`,color:e===n?`#7c3aed`:`#64748b`,fontSize:`12px`,fontWeight:600,cursor:`pointer`},children:n===`all`?`All`:n},n))})]}),n===`clients`?(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{className:`tableWrap`,children:(0,$.jsxs)(`table`,{className:`table`,style:{width:`100%`},children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{children:`Name`}),(0,$.jsx)(`th`,{children:`Type`}),(0,$.jsx)(`th`,{children:`AUM`}),(0,$.jsx)(`th`,{children:`Last Contact`}),(0,$.jsx)(`th`,{children:`Next Action`})]})}),(0,$.jsx)(`tbody`,{children:s.map(e=>{let t=Sb[e.type]||Sb.Client;return(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`td`,{className:`tdStrong`,children:e.name}),(0,$.jsx)(`td`,{children:(0,$.jsx)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:t.bg,color:t.color},children:e.type})}),(0,$.jsx)(`td`,{style:{fontWeight:600},children:e.aum>0?`$${(e.aum/1e6).toFixed(1)}M`:`--`}),(0,$.jsx)(`td`,{style:{fontSize:`12px`,color:`#64748b`},children:e.lastContact}),(0,$.jsx)(`td`,{style:{fontSize:`13px`},children:e.nextAction})]},e.id)})})]})})}):(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{className:`tableWrap`,children:(0,$.jsxs)(`table`,{className:`table`,style:{width:`100%`},children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{children:`Client`}),(0,$.jsx)(`th`,{children:`Type`}),(0,$.jsx)(`th`,{children:`Subject`}),(0,$.jsx)(`th`,{children:`Date`}),(0,$.jsx)(`th`,{children:`Status`})]})}),(0,$.jsx)(`tbody`,{children:xb.map(e=>(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`td`,{className:`tdStrong`,children:e.client}),(0,$.jsx)(`td`,{style:{fontSize:`12px`,color:`#64748b`},children:e.type}),(0,$.jsx)(`td`,{style:{fontSize:`13px`},children:e.subject}),(0,$.jsx)(`td`,{style:{fontSize:`12px`,color:`#64748b`},children:e.date}),(0,$.jsx)(`td`,{children:(0,$.jsx)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:e.status===`Opened`?`#dbeafe`:e.status===`Completed`?`#dcfce7`:`#f1f5f9`,color:e.status===`Opened`?`#2563eb`:e.status===`Completed`?`#16a34a`:`#475569`},children:e.status})})]},e.id))})]})})})]})}var wb=[{id:1,name:`TechBridge Solutions Acquisition`,type:`Acquisition`,stage:`Due Diligence`,value:`$45M`,assignedTo:`Sarah Chen`,source:`Broker Listing`,daysInStage:12,notes:`$45M revenue, 22% EBITDA margin. Risk score: 58/100. Comparable transactions suggest 2.8x fair.`},{id:2,name:`Parkview Apartments -- 48 Units`,type:`Investment`,stage:`Initial Review`,value:`$8.2M`,assignedTo:`Michael Torres`,source:`Public Records -- CMBS`,daysInStage:5,notes:`CMBS loan matures Aug 2026. Matches multifamily criteria. Cap rate estimate: 6.2%.`},{id:3,name:`Desert Ridge Office Plaza`,type:`Investment`,stage:`Negotiation`,value:`$12.5M`,assignedTo:`Michael Torres`,source:`CBRE Listing`,daysInStage:18,notes:`Below market ask for submarket. Low risk (38). Tenant rollover risk in 2027.`},{id:4,name:`ClearView Analytics Series C`,type:`Investment`,stage:`Due Diligence`,value:`$5M`,assignedTo:`Sarah Chen`,source:`Direct`,daysInStage:8,notes:`Series C participation. Current position holder. Strong product-market fit, growing ARR.`},{id:5,name:`Cactus Lane Industrial`,type:`Acquisition`,stage:`Initial Review`,value:`$3.1M`,assignedTo:`David Park`,source:`Tax Lien Records`,daysInStage:3,notes:`Tax lien filed. Potential distressed acquisition. High risk (78). Needs environmental review.`},{id:6,name:`Sunrise Senior Living Portfolio`,type:`Investment`,stage:`Term Sheet`,value:`$15M`,assignedTo:`Sarah Chen`,source:`Notice of Default`,daysInStage:22,notes:`NOD filed Jan 2026. Lender may accept discount. 3 facilities, 180 beds total.`},{id:7,name:`Quantum Computing Inc IPO`,type:`Disposition`,stage:`Monitoring`,value:`$2.8M`,assignedTo:`David Park`,source:`Portfolio`,daysInStage:45,notes:`IPO expected Q2 2026. Lock-up period planning. Current unrealized gain: +38%.`},{id:8,name:`Iron Ridge Mining Divestiture`,type:`Disposition`,stage:`Marketing`,value:`$3.0M`,assignedTo:`Michael Torres`,source:`Portfolio`,daysInStage:14,notes:`Position underperforming. Energy sector headwinds. Seeking secondary buyer.`}],Tb=[`Initial Review`,`Due Diligence`,`Negotiation`,`Term Sheet`,`Monitoring`,`Marketing`],Eb={"Initial Review":`#64748b`,"Due Diligence":`#2563eb`,Negotiation:`#d97706`,"Term Sheet":`#7c3aed`,Monitoring:`#16a34a`,Marketing:`#ec4899`},Db={Acquisition:{bg:`#dbeafe`,color:`#2563eb`},Investment:{bg:`#dcfce7`,color:`#16a34a`},Disposition:{bg:`#fef3c7`,color:`#d97706`}};function Ob(){let[e,t]=(0,_.useState)(`table`),[n,r]=(0,_.useState)(null),i=wb.reduce((e,t)=>{let n=parseFloat(t.value.replace(/[$M,]/g,``));return e+(isNaN(n)?0:n)},0);return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Deal Pipeline`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Active deals, acquisitions, and investment opportunities`})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`},children:[(0,$.jsx)(`button`,{onClick:()=>t(`table`),style:{padding:`8px 14px`,borderRadius:`8px`,border:e===`table`?`2px solid #7c3aed`:`1px solid #e2e8f0`,background:e===`table`?`#f3e8ff`:`white`,color:e===`table`?`#7c3aed`:`#64748b`,fontSize:`13px`,fontWeight:600,cursor:`pointer`},children:`Table`}),(0,$.jsx)(`button`,{onClick:()=>t(`kanban`),style:{padding:`8px 14px`,borderRadius:`8px`,border:e===`kanban`?`2px solid #7c3aed`:`1px solid #e2e8f0`,background:e===`kanban`?`#f3e8ff`:`white`,color:e===`kanban`?`#7c3aed`:`#64748b`,fontSize:`13px`,fontWeight:600,cursor:`pointer`},children:`Kanban`})]})]}),(0,$.jsxs)(`div`,{className:`kpiRow`,children:[(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Active Deals`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:wb.length})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Total Pipeline Value`}),(0,$.jsxs)(`div`,{className:`kpiValue`,children:[`$`,i.toFixed(1),`M`]})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`In Due Diligence`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:wb.filter(e=>e.stage===`Due Diligence`).length})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Near Close`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:wb.filter(e=>e.stage===`Term Sheet`||e.stage===`Negotiation`).length})]})]}),e===`table`?(0,$.jsx)(`div`,{className:`card`,style:{marginTop:`14px`},children:(0,$.jsx)(`div`,{className:`tableWrap`,children:(0,$.jsxs)(`table`,{className:`table`,style:{width:`100%`},children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{children:`Deal`}),(0,$.jsx)(`th`,{children:`Type`}),(0,$.jsx)(`th`,{children:`Stage`}),(0,$.jsx)(`th`,{children:`Value`}),(0,$.jsx)(`th`,{children:`Assigned To`}),(0,$.jsx)(`th`,{children:`Days in Stage`}),(0,$.jsx)(`th`,{children:`Source`})]})}),(0,$.jsx)(`tbody`,{children:wb.map(e=>{let t=Db[e.type]||Db.Investment,i=Eb[e.stage]||`#64748b`;return(0,$.jsxs)(_.Fragment,{children:[(0,$.jsxs)(`tr`,{style:{cursor:`pointer`},onClick:()=>r(n===e.id?null:e.id),children:[(0,$.jsx)(`td`,{className:`tdStrong`,children:e.name}),(0,$.jsx)(`td`,{children:(0,$.jsx)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:t.bg,color:t.color},children:e.type})}),(0,$.jsx)(`td`,{children:(0,$.jsx)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:`${i}18`,color:i},children:e.stage})}),(0,$.jsx)(`td`,{style:{fontWeight:700},children:e.value}),(0,$.jsx)(`td`,{style:{fontSize:`13px`},children:e.assignedTo}),(0,$.jsxs)(`td`,{style:{fontSize:`13px`,color:e.daysInStage>20?`#d97706`:`#64748b`},children:[e.daysInStage,`d`]}),(0,$.jsx)(`td`,{style:{fontSize:`12px`,color:`#64748b`},children:e.source})]}),n===e.id&&(0,$.jsx)(`tr`,{children:(0,$.jsxs)(`td`,{colSpan:7,style:{padding:`12px 16px`,background:`#f8fafc`,fontSize:`13px`,color:`#475569`,lineHeight:1.6,borderBottom:`2px solid #e2e8f0`},children:[e.notes,(0,$.jsx)(`div`,{style:{marginTop:`8px`,display:`flex`,gap:`8px`},children:(0,$.jsx)(`button`,{className:`iconBtn`,style:{fontSize:`12px`},onClick:t=>{t.stopPropagation(),window.dispatchEvent(new CustomEvent(`ta:chatPrompt`,{detail:{message:`Analyze the deal: ${e.name}. ${e.notes}`}}))},children:`Analyze with AI`})})]})})]},e.id)})})]})})}):(0,$.jsx)(`div`,{style:{display:`flex`,gap:`12px`,marginTop:`14px`,overflowX:`auto`,paddingBottom:`8px`},children:Tb.map(e=>{let t=wb.filter(t=>t.stage===e);return(0,$.jsxs)(`div`,{style:{minWidth:`240px`,flex:1},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`,marginBottom:`10px`,padding:`0 4px`},children:[(0,$.jsx)(`div`,{style:{width:`10px`,height:`10px`,borderRadius:`50%`,background:Eb[e]||`#64748b`}}),(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`13px`,color:`#1e293b`},children:e}),(0,$.jsxs)(`span`,{style:{fontSize:`12px`,color:`#94a3b8`,fontWeight:600},children:[`(`,t.length,`)`]})]}),(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`8px`},children:t.length>0?t.map(e=>{let t=Db[e.type]||Db.Investment;return(0,$.jsxs)(`div`,{className:`card`,style:{padding:`14px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:600,fontSize:`14px`,color:`#1e293b`,marginBottom:`6px`},children:e.name}),(0,$.jsx)(`div`,{style:{display:`flex`,gap:`6px`,marginBottom:`8px`},children:(0,$.jsx)(`span`,{style:{fontSize:`10px`,fontWeight:600,padding:`2px 6px`,borderRadius:`9999px`,background:t.bg,color:t.color},children:e.type})}),(0,$.jsx)(`div`,{style:{fontSize:`18px`,fontWeight:700,color:`#1e293b`,marginBottom:`4px`},children:e.value}),(0,$.jsxs)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:[e.assignedTo,` -- `,e.daysInStage,`d`]})]},e.id)}):(0,$.jsx)(`div`,{style:{padding:`20px`,textAlign:`center`,color:`#94a3b8`,fontSize:`12px`,border:`1px dashed #e2e8f0`,borderRadius:`8px`},children:`No deals`})})]},e)})})]})}var kb=[{id:`vehicles`,label:`Vehicles`,icon:`V`,color:`#7c3aed`},{id:`property`,label:`Property`,icon:`P`,color:`#2563eb`},{id:`financial`,label:`Financial`,icon:`F`,color:`#16a34a`},{id:`identity`,label:`Identity`,icon:`I`,color:`#d97706`},{id:`medical`,label:`Medical`,icon:`M`,color:`#dc2626`},{id:`education`,label:`Education`,icon:`E`,color:`#06b6d4`},{id:`other`,label:`Other`,icon:`O`,color:`#64748b`}];function Ab(){let[e,t]=(0,_.useState)(`all`);return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Documents`}),(0,$.jsx)(`p`,{className:`subtle`,children:`All documents organized by category`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>window.dispatchEvent(new CustomEvent(`ta:chatPrompt`,{detail:{message:`I want to add a new document to my vault`}})),style:{background:`linear-gradient(135deg, #7c3aed, #6d28d9)`,color:`white`,border:`none`},children:`Add Document`})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(auto-fill, minmax(140px, 1fr))`,gap:`10px`,marginBottom:`20px`},children:[(0,$.jsxs)(`div`,{onClick:()=>t(`all`),className:`card`,style:{padding:`16px`,textAlign:`center`,cursor:`pointer`,border:e===`all`?`2px solid #7c3aed`:void 0,background:e===`all`?`#faf5ff`:void 0},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:800,color:`#7c3aed`},children:`All`}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`,marginTop:`4px`},children:`All Categories`})]}),kb.map(n=>(0,$.jsxs)(`div`,{onClick:()=>t(n.id),className:`card`,style:{padding:`16px`,textAlign:`center`,cursor:`pointer`,border:e===n.id?`2px solid ${n.color}`:void 0,background:e===n.id?`${n.color}08`:void 0},children:[(0,$.jsx)(`div`,{style:{width:`36px`,height:`36px`,borderRadius:`10px`,margin:`0 auto 8px`,background:`${n.color}15`,display:`flex`,alignItems:`center`,justifyContent:`center`,fontSize:`16px`,fontWeight:700,color:n.color},children:n.icon}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,fontWeight:600,color:`#1e293b`},children:n.label})]},n.id))]}),(0,$.jsxs)(`div`,{className:`card`,style:{padding:`48px 24px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{width:`64px`,height:`64px`,borderRadius:`16px`,background:`#f3e8ff`,display:`flex`,alignItems:`center`,justifyContent:`center`,margin:`0 auto 16px`},children:(0,$.jsxs)(`svg`,{width:`32`,height:`32`,viewBox:`0 0 24 24`,fill:`none`,stroke:`#7c3aed`,strokeWidth:`1.5`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,$.jsx)(`path`,{d:`M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z`}),(0,$.jsx)(`polyline`,{points:`14 2 14 8 20 8`}),(0,$.jsx)(`line`,{x1:`12`,y1:`18`,x2:`12`,y2:`12`}),(0,$.jsx)(`line`,{x1:`9`,y1:`15`,x2:`15`,y2:`15`})]})}),(0,$.jsx)(`div`,{style:{fontSize:`18px`,fontWeight:700,color:`#1e293b`,marginBottom:`8px`},children:`No documents yet`}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`#64748b`,maxWidth:`400px`,margin:`0 auto`,lineHeight:1.6,marginBottom:`20px`},children:`Upload your first document or tell the AI about something you want to track. Photos, PDFs, or just describe it in chat.`}),(0,$.jsx)(`button`,{onClick:()=>window.dispatchEvent(new CustomEvent(`ta:chatPrompt`,{detail:{message:`Help me add my first document to the vault`}})),style:{padding:`10px 20px`,fontSize:`14px`,fontWeight:600,background:`linear-gradient(135deg, #7c3aed, #6d28d9)`,color:`white`,border:`none`,borderRadius:`10px`,cursor:`pointer`},children:`Get Started`})]})]})}var jb=[{id:`vehicles`,label:`Vehicles`,icon:`V`,color:`#7c3aed`,description:`Cars, trucks, motorcycles, boats`},{id:`property`,label:`Property`,icon:`P`,color:`#2563eb`,description:`Homes, land, rental properties`},{id:`financial`,label:`Financial Accounts`,icon:`F`,color:`#16a34a`,description:`Bank accounts, investments, retirement`}];function Mb(){return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Assets`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Vehicles, property, and financial accounts you own`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>window.dispatchEvent(new CustomEvent(`ta:chatPrompt`,{detail:{message:`I want to add a new asset to track`}})),style:{background:`linear-gradient(135deg, #7c3aed, #6d28d9)`,color:`white`,border:`none`},children:`Add Asset`})]}),(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(3, 1fr)`,gap:`14px`,marginBottom:`20px`},children:jb.map(e=>(0,$.jsxs)(`div`,{className:`card`,style:{padding:`24px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`,marginBottom:`12px`},children:[(0,$.jsx)(`div`,{style:{width:`44px`,height:`44px`,borderRadius:`12px`,background:`${e.color}15`,display:`flex`,alignItems:`center`,justifyContent:`center`,fontSize:`18px`,fontWeight:700,color:e.color},children:e.icon}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`16px`,color:`#1e293b`},children:e.label}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:e.description})]})]}),(0,$.jsxs)(`div`,{style:{padding:`16px`,background:`#f8fafc`,borderRadius:`8px`,textAlign:`center`},children:[(0,$.jsxs)(`div`,{style:{fontSize:`14px`,color:`#94a3b8`,marginBottom:`10px`},children:[`No `,e.label.toLowerCase(),` tracked yet`]}),(0,$.jsxs)(`button`,{onClick:()=>window.dispatchEvent(new CustomEvent(`ta:chatPrompt`,{detail:{message:`I want to add a ${e.label.toLowerCase().slice(0,-1)||e.label.toLowerCase()} to my vault`}})),style:{fontSize:`13px`,fontWeight:600,color:`#7c3aed`,background:`none`,border:`none`,cursor:`pointer`},children:[`Add First `,e.label.endsWith(`s`)?e.label.slice(0,-1):e.label]})]})]},e.id))}),(0,$.jsxs)(`div`,{className:`card`,style:{padding:`24px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`15px`,color:`#1e293b`,marginBottom:`4px`},children:`About Asset Tracking`}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`#64748b`,lineHeight:1.6},children:`When you add assets, your AI will automatically track market values, detect important deadlines (registration renewals, insurance expirations), and help you understand what you own. Start by adding one item  a vehicle VIN, a property address, or an account name.`})]})]})}function Nb(){return(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`pageHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Deadlines`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Upcoming expirations, renewals, and important dates`})]})}),(0,$.jsxs)(`div`,{className:`card`,style:{padding:`48px 24px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{width:`64px`,height:`64px`,borderRadius:`16px`,background:`#fef3c7`,display:`flex`,alignItems:`center`,justifyContent:`center`,margin:`0 auto 16px`},children:(0,$.jsxs)(`svg`,{width:`32`,height:`32`,viewBox:`0 0 24 24`,fill:`none`,stroke:`#d97706`,strokeWidth:`1.5`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,$.jsx)(`circle`,{cx:`12`,cy:`12`,r:`10`}),(0,$.jsx)(`polyline`,{points:`12 6 12 12 16 14`})]})}),(0,$.jsx)(`div`,{style:{fontSize:`18px`,fontWeight:700,color:`#1e293b`,marginBottom:`8px`},children:`No deadlines to track yet`}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`#64748b`,maxWidth:`400px`,margin:`0 auto`,lineHeight:1.6,marginBottom:`20px`},children:`As you add documents and assets, your AI will automatically detect expiration dates, renewal deadlines, and important dates. You will never miss a registration, insurance renewal, or passport expiration again.`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#94a3b8`,marginBottom:`20px`},children:`Deadlines are auto-populated from your documents and assets.`}),(0,$.jsx)(`button`,{onClick:()=>window.dispatchEvent(new CustomEvent(`ta:chatPrompt`,{detail:{message:`What deadlines can you help me track?`}})),style:{padding:`10px 20px`,fontSize:`14px`,fontWeight:600,background:`linear-gradient(135deg, #7c3aed, #6d28d9)`,color:`white`,border:`none`,borderRadius:`10px`,cursor:`pointer`},children:`Learn More`})]}),(0,$.jsxs)(`div`,{className:`card`,style:{padding:`24px`,marginTop:`14px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`15px`,color:`#1e293b`,marginBottom:`16px`},children:`What We Track`}),(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`12px`},children:[{label:`Vehicle Registrations`,detail:`Expiration dates, renewal reminders`},{label:`Insurance Policies`,detail:`Renewal dates, coverage gaps`},{label:`Passports & IDs`,detail:`Expiration dates, travel validity`},{label:`Property Taxes`,detail:`Due dates, payment tracking`},{label:`Leases & Mortgages`,detail:`Payment schedules, end dates`},{label:`Warranties`,detail:`Coverage periods, service windows`}].map((e,t)=>(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`10px`,padding:`12px`,background:`#f8fafc`,borderRadius:`8px`},children:[(0,$.jsx)(`div`,{style:{width:`8px`,height:`8px`,borderRadius:`50%`,background:`#d97706`,flexShrink:0}}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600,fontSize:`14px`,color:`#1e293b`},children:e.label}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:e.detail})]})]},t))})]})]})}var Pb=[{id:1,address:`1247 Palm Ave`,city:`Jacksonville FL 32207`,price:485e3,beds:4,baths:2.5,sqft:2400,dom:12,status:`active`,type:`Single Family`,agent:`Sarah Mitchell`,desc:`Updated 4/2.5 in San Marco. New roof 2024, renovated kitchen.`},{id:2,address:`892 Riverside Dr #4B`,city:`Jacksonville FL 32204`,price:275e3,beds:2,baths:2,sqft:1200,dom:28,status:`active`,type:`Condo`,agent:`Sarah Mitchell`,desc:`River views, in-unit laundry, HOA pool/gym.`},{id:3,address:`3421 Beach Blvd`,city:`Jacksonville Beach FL 32250`,price:395e3,beds:3,baths:2,sqft:1800,dom:45,status:`stale`,type:`Single Family`,agent:`David Park`,desc:`Beach cottage 4 blocks from ocean. Price reduction recommended.`},{id:4,address:`567 Mandarin Rd`,city:`Jacksonville FL 32258`,price:625e3,beds:5,baths:3.5,sqft:3200,dom:8,status:`active`,type:`Single Family`,agent:`Sarah Mitchell`,desc:`Executive home, pool, 3-car garage, A-rated schools.`},{id:5,address:`1893 San Jose Blvd`,city:`Jacksonville FL 32207`,price:335e3,beds:3,baths:2,sqft:1650,dom:18,status:`under-contract`,type:`Single Family`,agent:`David Park`,desc:`Bungalow, updated kitchen, new HVAC. Closing March 10.`},{id:6,address:`432 Ponte Vedra Blvd`,city:`Ponte Vedra Beach FL 32082`,price:725e3,beds:4,baths:3,sqft:2800,dom:52,status:`stale`,type:`Single Family`,agent:`Sarah Mitchell`,desc:`Ocean access. AI recommends $675-700K.`},{id:7,address:`7891 Baymeadows Rd`,city:`Jacksonville FL 32256`,price:365e3,beds:3,baths:2.5,sqft:1900,dom:5,status:`active`,type:`Townhome`,agent:`David Park`,desc:`End-unit, 2-car garage, gated community.`},{id:8,address:`2345 University Blvd`,city:`Jacksonville FL 32211`,price:195e3,beds:2,baths:1,sqft:950,dom:35,status:`active`,type:`Single Family`,agent:`David Park`,desc:`Investor special near UNF. Rented at $1,400/mo.`}],Fb={active:{bg:`#dcfce7`,color:`#16a34a`},"under-contract":{bg:`#dbeafe`,color:`#2563eb`},stale:{bg:`#fee2e2`,color:`#dc2626`}},Ib=[{id:1,x:`38%`,y:`42%`},{id:2,x:`30%`,y:`35%`},{id:3,x:`72%`,y:`55%`},{id:4,x:`55%`,y:`68%`},{id:5,x:`40%`,y:`50%`},{id:6,x:`80%`,y:`30%`},{id:7,x:`60%`,y:`45%`},{id:8,x:`48%`,y:`38%`}],Lb={"Single Family":`data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20400%20200%22%3E%3Crect%20width%3D%22400%22%20height%3D%22200%22%20fill%3D%22%23f0fdf4%22%2F%3E%3Cpath%20d%3D%22M200%2040%20L320%20110%20L320%20170%20L80%20170%20L80%20110%20Z%22%20fill%3D%22%2386efac%22%20stroke%3D%22%2316a34a%22%20stroke-width%3D%222%22%2F%3E%3Crect%20x%3D%22110%22%20y%3D%22110%22%20width%3D%2240%22%20height%3D%2260%22%20fill%3D%22%23fef3c7%22%20stroke%3D%22%23d97706%22%20stroke-width%3D%221.5%22%2F%3E%3Crect%20x%3D%22170%22%20y%3D%22120%22%20width%3D%2230%22%20height%3D%2225%22%20fill%3D%22%23bfdbfe%22%20stroke%3D%22%232563eb%22%20stroke-width%3D%221%22%2F%3E%3Crect%20x%3D%22220%22%20y%3D%22120%22%20width%3D%2230%22%20height%3D%2225%22%20fill%3D%22%23bfdbfe%22%20stroke%3D%22%232563eb%22%20stroke-width%3D%221%22%2F%3E%3Crect%20x%3D%22260%22%20y%3D%22130%22%20width%3D%2250%22%20height%3D%2240%22%20fill%3D%22%23e2e8f0%22%20stroke%3D%22%2364748b%22%20stroke-width%3D%221.5%22%2F%3E%3Cpath%20d%3D%22M200%2040%20L80%20110%22%20stroke%3D%22%2316a34a%22%20stroke-width%3D%223%22%20fill%3D%22none%22%2F%3E%3Cpath%20d%3D%22M200%2040%20L320%20110%22%20stroke%3D%22%2316a34a%22%20stroke-width%3D%223%22%20fill%3D%22none%22%2F%3E%3C%2Fsvg%3E`,Condo:`data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20400%20200%22%3E%3Crect%20width%3D%22400%22%20height%3D%22200%22%20fill%3D%22%23eff6ff%22%2F%3E%3Crect%20x%3D%22120%22%20y%3D%2230%22%20width%3D%22160%22%20height%3D%22140%22%20fill%3D%22%23bfdbfe%22%20stroke%3D%22%232563eb%22%20stroke-width%3D%222%22%20rx%3D%224%22%2F%3E%3Crect%20x%3D%22140%22%20y%3D%2250%22%20width%3D%2225%22%20height%3D%2220%22%20fill%3D%22%23dbeafe%22%20stroke%3D%22%2393c5fd%22%20stroke-width%3D%221%22%2F%3E%3Crect%20x%3D%22180%22%20y%3D%2250%22%20width%3D%2225%22%20height%3D%2220%22%20fill%3D%22%23dbeafe%22%20stroke%3D%22%2393c5fd%22%20stroke-width%3D%221%22%2F%3E%3Crect%20x%3D%22220%22%20y%3D%2250%22%20width%3D%2225%22%20height%3D%2220%22%20fill%3D%22%23dbeafe%22%20stroke%3D%22%2393c5fd%22%20stroke-width%3D%221%22%2F%3E%3Crect%20x%3D%22140%22%20y%3D%2285%22%20width%3D%2225%22%20height%3D%2220%22%20fill%3D%22%23dbeafe%22%20stroke%3D%22%2393c5fd%22%20stroke-width%3D%221%22%2F%3E%3Crect%20x%3D%22180%22%20y%3D%2285%22%20width%3D%2225%22%20height%3D%2220%22%20fill%3D%22%23dbeafe%22%20stroke%3D%22%2393c5fd%22%20stroke-width%3D%221%22%2F%3E%3Crect%20x%3D%22220%22%20y%3D%2285%22%20width%3D%2225%22%20height%3D%2220%22%20fill%3D%22%23dbeafe%22%20stroke%3D%22%2393c5fd%22%20stroke-width%3D%221%22%2F%3E%3Crect%20x%3D%22140%22%20y%3D%22120%22%20width%3D%2225%22%20height%3D%2220%22%20fill%3D%22%23fef9c3%22%20stroke%3D%22%23facc15%22%20stroke-width%3D%221%22%2F%3E%3Crect%20x%3D%22180%22%20y%3D%22130%22%20width%3D%2230%22%20height%3D%2240%22%20fill%3D%22%23fef3c7%22%20stroke%3D%22%23d97706%22%20stroke-width%3D%221.5%22%2F%3E%3Crect%20x%3D%22220%22%20y%3D%22120%22%20width%3D%2225%22%20height%3D%2220%22%20fill%3D%22%23dbeafe%22%20stroke%3D%22%2393c5fd%22%20stroke-width%3D%221%22%2F%3E%3C%2Fsvg%3E`,Townhome:`data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20400%20200%22%3E%3Crect%20width%3D%22400%22%20height%3D%22200%22%20fill%3D%22%23faf5ff%22%2F%3E%3Cpath%20d%3D%22M120%2070%20L170%2035%20L220%2070%22%20fill%3D%22%23e9d5ff%22%20stroke%3D%22%237c3aed%22%20stroke-width%3D%222%22%2F%3E%3Crect%20x%3D%22120%22%20y%3D%2270%22%20width%3D%22100%22%20height%3D%22100%22%20fill%3D%22%23f3e8ff%22%20stroke%3D%22%237c3aed%22%20stroke-width%3D%222%22%2F%3E%3Cpath%20d%3D%22M220%2070%20L270%2035%20L320%2070%22%20fill%3D%22%23e9d5ff%22%20stroke%3D%22%237c3aed%22%20stroke-width%3D%222%22%2F%3E%3Crect%20x%3D%22220%22%20y%3D%2270%22%20width%3D%22100%22%20height%3D%22100%22%20fill%3D%22%23f3e8ff%22%20stroke%3D%22%237c3aed%22%20stroke-width%3D%222%22%2F%3E%3Crect%20x%3D%22150%22%20y%3D%22130%22%20width%3D%2225%22%20height%3D%2240%22%20fill%3D%22%23fef3c7%22%20stroke%3D%22%23d97706%22%20stroke-width%3D%221.5%22%2F%3E%3Crect%20x%3D%22255%22%20y%3D%22130%22%20width%3D%2225%22%20height%3D%2240%22%20fill%3D%22%23fef3c7%22%20stroke%3D%22%23d97706%22%20stroke-width%3D%221.5%22%2F%3E%3Crect%20x%3D%22140%22%20y%3D%2290%22%20width%3D%2220%22%20height%3D%2218%22%20fill%3D%22%23bfdbfe%22%20stroke%3D%22%232563eb%22%20stroke-width%3D%221%22%2F%3E%3Crect%20x%3D%22245%22%20y%3D%2290%22%20width%3D%2220%22%20height%3D%2218%22%20fill%3D%22%23bfdbfe%22%20stroke%3D%22%232563eb%22%20stroke-width%3D%221%22%2F%3E%3Crect%20x%3D%22280%22%20y%3D%2290%22%20width%3D%2220%22%20height%3D%2218%22%20fill%3D%22%23bfdbfe%22%20stroke%3D%22%232563eb%22%20stroke-width%3D%221%22%2F%3E%3C%2Fsvg%3E`};function Rb(e){return Lb[e]||Lb[`Single Family`]}function zb(e){return e===`active`?`Active`:e===`under-contract`?`Under Contract`:e===`stale`?`Stale`:e}function Bb(e){return e===`active`?`#16a34a`:e===`under-contract`?`#2563eb`:e===`stale`?`#dc2626`:`#64748b`}function Vb(){let[e,t]=(0,_.useState)(`card`),[n,r]=(0,_.useState)(`all`),[i,a]=(0,_.useState)(null);function o(e){window.dispatchEvent(new CustomEvent(`ta:chatPrompt`,{detail:{message:e}}))}let s=Pb.filter(e=>n===`all`?!0:n===`active`?e.status===`active`:n===`under-contract`?e.status===`under-contract`:n===`stale`?e.dom>=30:!0),c=Pb.filter(e=>e.status===`active`).length,l=Pb.filter(e=>e.status===`under-contract`).length,u=Pb.filter(e=>e.dom>=30).length,d=Math.round(Pb.reduce((e,t)=>e+t.dom,0)/Pb.length);return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Listings`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Active inventory and listing performance`})]}),(0,$.jsx)(`div`,{style:{display:`flex`,gap:`8px`,alignItems:`center`},children:(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>o(`Give me a listings overview. Which properties need attention and what pricing adjustments should we consider?`),style:{background:`linear-gradient(135deg, #7c3aed, #6d28d9)`,color:`white`,border:`none`},children:`AI Listings Brief`})})]}),(0,$.jsxs)(`div`,{className:`kpiRow`,style:{marginBottom:`20px`},children:[(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Active`}),(0,$.jsx)(`div`,{className:`kpiValue`,style:{color:`#16a34a`},children:c})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Under Contract`}),(0,$.jsx)(`div`,{className:`kpiValue`,style:{color:`#2563eb`},children:l})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Stale (30+ DOM)`}),(0,$.jsx)(`div`,{className:`kpiValue`,style:{color:`#dc2626`},children:u})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Avg DOM`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:d})]})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,marginBottom:`16px`,flexWrap:`wrap`,gap:`8px`},children:[(0,$.jsx)(`div`,{style:{display:`flex`,gap:`4px`},children:[`card`,`list`,`map`].map(n=>(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>t(n),style:{background:e===n?`#7c3aed`:`#f1f5f9`,color:e===n?`white`:`#475569`,border:`none`,fontSize:`12px`,padding:`6px 14px`},children:n.charAt(0).toUpperCase()+n.slice(1)},n))}),(0,$.jsx)(`div`,{style:{display:`flex`,gap:`4px`},children:[{key:`all`,label:`All`},{key:`active`,label:`Active`},{key:`under-contract`,label:`Under Contract`},{key:`stale`,label:`Stale`}].map(e=>(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>r(e.key),style:{background:n===e.key?`#1e293b`:`#f1f5f9`,color:n===e.key?`white`:`#475569`,border:`none`,fontSize:`12px`,padding:`6px 14px`},children:e.label},e.key))})]}),e===`card`&&(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`12px`},children:s.map(e=>{let t=Fb[e.status]||Fb.active;return(0,$.jsxs)(`div`,{className:`card`,style:{padding:`0`,cursor:`pointer`,borderLeft:`3px solid ${t.color}`,overflow:`hidden`},onClick:()=>a(e),children:[(0,$.jsx)(`div`,{style:{width:`100%`,height:`120px`,backgroundImage:`url("${Rb(e.type)}")`,backgroundSize:`cover`,backgroundPosition:`center`,borderBottom:`1px solid #f1f5f9`}}),(0,$.jsxs)(`div`,{style:{padding:`16px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`flex-start`,marginBottom:`6px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`14px`,color:`#1e293b`},children:e.address}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`},children:e.city})]}),(0,$.jsx)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:t.bg,color:t.color},children:zb(e.status)})]}),(0,$.jsxs)(`div`,{style:{fontSize:`20px`,fontWeight:700,color:`#1e293b`,marginBottom:`6px`},children:[`$`,e.price.toLocaleString()]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`12px`,fontSize:`12px`,color:`#64748b`,marginBottom:`8px`},children:[(0,$.jsxs)(`span`,{children:[e.beds,`bd / `,e.baths,`ba`]}),(0,$.jsxs)(`span`,{children:[e.sqft.toLocaleString(),` sqft`]}),(0,$.jsxs)(`span`,{style:{color:e.dom>30?`#dc2626`:`#64748b`,fontWeight:e.dom>30?700:400},children:[e.dom,` DOM`]})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsx)(`span`,{style:{fontSize:`11px`,color:`#94a3b8`},children:e.type}),(0,$.jsx)(`span`,{style:{fontSize:`11px`,color:`#94a3b8`},children:e.agent})]})]})]},e.id)})}),e===`list`&&(0,$.jsx)(`div`,{className:`tableWrap`,children:(0,$.jsxs)(`table`,{className:`table`,children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{children:`Address`}),(0,$.jsx)(`th`,{children:`Price`}),(0,$.jsx)(`th`,{children:`Beds/Baths`}),(0,$.jsx)(`th`,{children:`SqFt`}),(0,$.jsx)(`th`,{children:`DOM`}),(0,$.jsx)(`th`,{children:`Status`}),(0,$.jsx)(`th`,{children:`Agent`})]})}),(0,$.jsx)(`tbody`,{children:s.map(e=>{let t=Fb[e.status]||Fb.active;return(0,$.jsxs)(`tr`,{onClick:()=>a(e),style:{cursor:`pointer`},children:[(0,$.jsxs)(`td`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:600,fontSize:`13px`},children:e.address}),(0,$.jsx)(`div`,{style:{fontSize:`11px`,color:`#94a3b8`},children:e.city})]}),(0,$.jsxs)(`td`,{style:{fontWeight:700},children:[`$`,e.price.toLocaleString()]}),(0,$.jsxs)(`td`,{children:[e.beds,`bd / `,e.baths,`ba`]}),(0,$.jsx)(`td`,{children:e.sqft.toLocaleString()}),(0,$.jsx)(`td`,{style:{color:e.dom>30?`#dc2626`:`#1e293b`,fontWeight:e.dom>30?700:400},children:e.dom}),(0,$.jsx)(`td`,{children:(0,$.jsx)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:t.bg,color:t.color},children:zb(e.status)})}),(0,$.jsx)(`td`,{style:{fontSize:`12px`,color:`#64748b`},children:e.agent})]},e.id)})})]})}),e===`map`&&(0,$.jsx)(`div`,{className:`card`,style:{padding:`0`,overflow:`hidden`},children:(0,$.jsxs)(`div`,{style:{position:`relative`,width:`100%`,height:`420px`,background:`linear-gradient(135deg, #e2e8f0, #f1f5f9)`,borderRadius:`8px`},children:[(0,$.jsx)(`div`,{style:{position:`absolute`,top:`12px`,left:`12px`,fontSize:`12px`,color:`#64748b`,fontWeight:600},children:`Jacksonville Metro Area`}),(0,$.jsxs)(`div`,{style:{position:`absolute`,top:`12px`,right:`12px`,display:`flex`,gap:`12px`,fontSize:`11px`,color:`#64748b`},children:[(0,$.jsxs)(`span`,{style:{display:`flex`,alignItems:`center`,gap:`4px`},children:[(0,$.jsx)(`span`,{style:{width:`8px`,height:`8px`,borderRadius:`50%`,background:`#16a34a`,display:`inline-block`}}),` Active`]}),(0,$.jsxs)(`span`,{style:{display:`flex`,alignItems:`center`,gap:`4px`},children:[(0,$.jsx)(`span`,{style:{width:`8px`,height:`8px`,borderRadius:`50%`,background:`#2563eb`,display:`inline-block`}}),` Under Contract`]}),(0,$.jsxs)(`span`,{style:{display:`flex`,alignItems:`center`,gap:`4px`},children:[(0,$.jsx)(`span`,{style:{width:`8px`,height:`8px`,borderRadius:`50%`,background:`#dc2626`,display:`inline-block`}}),` Stale`]})]}),[20,40,60,80].map(e=>(0,$.jsxs)(_.Fragment,{children:[(0,$.jsx)(`div`,{style:{position:`absolute`,left:`${e}%`,top:0,bottom:0,width:`1px`,background:`#cbd5e1`,opacity:.3}}),(0,$.jsx)(`div`,{style:{position:`absolute`,top:`${e}%`,left:0,right:0,height:`1px`,background:`#cbd5e1`,opacity:.3}})]},e)),Pb.map(e=>{let t=Ib.find(t=>t.id===e.id);return!t||!(n===`all`||n===`active`&&e.status===`active`||n===`under-contract`&&e.status===`under-contract`||n===`stale`&&e.dom>=30)?null:(0,$.jsx)(`div`,{onClick:()=>a(e),style:{position:`absolute`,left:t.x,top:t.y,width:`14px`,height:`14px`,borderRadius:`50%`,background:Bb(e.status),border:`2px solid white`,cursor:`pointer`,boxShadow:`0 1px 4px rgba(0,0,0,0.2)`,transform:`translate(-50%, -50%)`,transition:`transform 0.15s`},title:`${e.address} - $${e.price.toLocaleString()}`},e.id)})]})}),i&&(0,$.jsxs)(`div`,{style:{position:`fixed`,top:0,right:0,width:`400px`,height:`100vh`,background:`white`,boxShadow:`-4px 0 24px rgba(0,0,0,0.12)`,zIndex:999,overflowY:`auto`,padding:`24px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,marginBottom:`20px`},children:[(0,$.jsx)(`h2`,{style:{fontSize:`18px`,fontWeight:700,margin:0},children:`Listing Detail`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>a(null),style:{background:`#f1f5f9`,border:`none`,fontSize:`16px`,padding:`4px 10px`},children:`X`})]}),(0,$.jsxs)(`div`,{style:{marginBottom:`16px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`16px`,color:`#1e293b`},children:i.address}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#64748b`},children:i.city})]}),(0,$.jsxs)(`div`,{style:{fontSize:`28px`,fontWeight:700,color:`#1e293b`,marginBottom:`16px`},children:[`$`,i.price.toLocaleString()]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`,marginBottom:`16px`,flexWrap:`wrap`},children:[(0,$.jsx)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:(Fb[i.status]||{}).bg,color:(Fb[i.status]||{}).color},children:zb(i.status)}),(0,$.jsx)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:`#f1f5f9`,color:`#475569`},children:i.type}),(0,$.jsxs)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:i.dom>30?`#fee2e2`:`#f1f5f9`,color:i.dom>30?`#dc2626`:`#475569`},children:[i.dom,` DOM`]})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`20px`,marginBottom:`20px`,fontSize:`13px`,color:`#475569`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`span`,{style:{fontWeight:600},children:i.beds}),` beds`]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`span`,{style:{fontWeight:600},children:i.baths}),` baths`]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`span`,{style:{fontWeight:600},children:i.sqft.toLocaleString()}),` sqft`]})]}),(0,$.jsxs)(`div`,{style:{marginBottom:`20px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`12px`,fontWeight:600,color:`#94a3b8`,marginBottom:`6px`,textTransform:`uppercase`,letterSpacing:`0.5px`},children:`Description`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#475569`,lineHeight:1.5},children:i.desc})]}),(0,$.jsxs)(`div`,{style:{marginBottom:`20px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`12px`,fontWeight:600,color:`#94a3b8`,marginBottom:`6px`,textTransform:`uppercase`,letterSpacing:`0.5px`},children:`Listing Agent`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#1e293b`,fontWeight:600},children:i.agent})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`},children:[(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>{o(`Analyze the listing at ${i.address}, ${i.city}. Price: $${i.price.toLocaleString()}, ${i.beds}bd/${i.baths}ba, ${i.sqft} sqft, ${i.dom} days on market. ${i.desc} What pricing and marketing recommendations do you have?`),a(null)},style:{flex:1,background:`linear-gradient(135deg, #7c3aed, #6d28d9)`,color:`white`,border:`none`,padding:`10px`},children:`Ask AI`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>{o(`Draft a compelling listing description for ${i.address}, ${i.city}. ${i.beds}bd/${i.baths}ba, ${i.sqft} sqft. Current notes: ${i.desc}`),a(null)},style:{flex:1,background:`#f1f5f9`,color:`#475569`,border:`none`,padding:`10px`},children:`AI: Write Copy`})]})]})]})}var Hb=[{id:1,name:`Amanda Liu`,budget:`$350-450K`,preApproved:!0,type:`Single Family`,status:`showing`,agent:`Sarah Mitchell`,note:`Relocating from NYC, starts job Mar 1`,urgency:`high`,lastContact:`Today`},{id:2,name:`Michael Torres`,budget:`$250-325K`,preApproved:!0,type:`Any`,status:`contacted`,agent:`David Park`,note:`First-time buyer`,urgency:`normal`,lastContact:`Yesterday`},{id:3,name:`Sarah Anderson`,budget:`$400-500K`,preApproved:!1,type:`Single Family`,status:`lead`,agent:`Unassigned`,note:`Referral from past client`,urgency:`warning`,lastContact:`3 days ago`},{id:4,name:`Daniel Wright`,budget:`$200-275K`,preApproved:!0,type:`Condo/Townhome`,status:`showing`,agent:`Sarah Mitchell`,note:`Investor, wants rental income`,urgency:`stale`,lastContact:`30 days ago`},{id:5,name:`Jennifer Kim`,budget:`$500-650K`,preApproved:!0,type:`Single Family`,status:`under-contract`,agent:`David Park`,note:`Under contract on 1893 San Jose Blvd`,urgency:`normal`,lastContact:`Today`},{id:6,name:`Robert Martinez`,budget:`$300-400K`,preApproved:!0,type:`Single Family`,status:`showing`,agent:`Sarah Mitchell`,note:`Downsizing from 4bd`,urgency:`normal`,lastContact:`2 days ago`},{id:7,name:`Emily Chen`,budget:`$175-225K`,preApproved:!0,type:`Any`,status:`contacted`,agent:`David Park`,note:`Investment property #2`,urgency:`normal`,lastContact:`Yesterday`},{id:8,name:`James Wilson`,budget:`$600-750K`,preApproved:!0,type:`Single Family`,status:`showing`,agent:`Sarah Mitchell`,note:`Waterfront preferred`,urgency:`normal`,lastContact:`3 days ago`},{id:9,name:`Lisa Thompson`,budget:`$275-350K`,preApproved:!0,type:`Townhome`,status:`contacted`,agent:`David Park`,note:`Recently divorced, needs quick close`,urgency:`normal`,lastContact:`Yesterday`},{id:10,name:`David Brown`,budget:`$450-550K`,preApproved:!0,type:`Single Family`,status:`lead`,agent:`Unassigned`,note:`Military relocation PCS`,urgency:`warning`,lastContact:`5 days ago`}],Ub=[{id:`lead`,label:`Lead`,color:`#64748b`},{id:`contacted`,label:`Contacted`,color:`#2563eb`},{id:`showing`,label:`Showing`,color:`#7c3aed`},{id:`under-contract`,label:`Under Contract`,color:`#16a34a`},{id:`closed`,label:`Closed`,color:`#059669`}],Wb={lead:{bg:`#f1f5f9`,color:`#64748b`},contacted:{bg:`#dbeafe`,color:`#2563eb`},showing:{bg:`#f3e8ff`,color:`#7c3aed`},"under-contract":{bg:`#dcfce7`,color:`#16a34a`},closed:{bg:`#d1fae5`,color:`#059669`}};function Gb(e){return e===`high`?{color:`#dc2626`,label:`URGENT`}:e===`stale`?{color:`#d97706`,label:`INACTIVE 30d`}:e===`warning`?{color:`#eab308`,label:`NEEDS CONTACT`}:null}function Kb(e){return e===`lead`?`Lead`:e===`contacted`?`Contacted`:e===`showing`?`Showing`:e===`under-contract`?`Under Contract`:e===`closed`?`Closed`:e}function qb(){let[e,t]=(0,_.useState)(`kanban`),[n,r]=(0,_.useState)(null);function i(e){window.dispatchEvent(new CustomEvent(`ta:chatPrompt`,{detail:{message:e}}))}let a=Hb.length,o=Hb.filter(e=>e.status===`showing`).length,s=Hb.filter(e=>e.status===`under-contract`).length,c=Hb.filter(e=>e.status===`lead`).length;return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Buyers`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Buyer pipeline and relationship management`})]}),(0,$.jsx)(`div`,{style:{display:`flex`,gap:`8px`,alignItems:`center`},children:(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>i(`Give me a buyer pipeline summary. Who needs follow-up, which leads are going stale, and what showings should I prioritize this week?`),style:{background:`linear-gradient(135deg, #7c3aed, #6d28d9)`,color:`white`,border:`none`},children:`AI Buyer Brief`})})]}),(0,$.jsxs)(`div`,{className:`kpiRow`,style:{marginBottom:`20px`},children:[(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Total Buyers`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:a})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Active Showings`}),(0,$.jsx)(`div`,{className:`kpiValue`,style:{color:`#7c3aed`},children:o})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Under Contract`}),(0,$.jsx)(`div`,{className:`kpiValue`,style:{color:`#16a34a`},children:s})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Uncontacted Leads`}),(0,$.jsx)(`div`,{className:`kpiValue`,style:{color:`#d97706`},children:c})]})]}),(0,$.jsx)(`div`,{style:{display:`flex`,gap:`4px`,marginBottom:`16px`},children:[`kanban`,`list`].map(n=>(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>t(n),style:{background:e===n?`#7c3aed`:`#f1f5f9`,color:e===n?`white`:`#475569`,border:`none`,fontSize:`12px`,padding:`6px 14px`},children:n.charAt(0).toUpperCase()+n.slice(1)},n))}),e===`kanban`&&(0,$.jsx)(`div`,{style:{display:`flex`,gap:`12px`,overflowX:`auto`,paddingBottom:`8px`},children:Ub.map(e=>{let t=Hb.filter(t=>t.status===e.id);return(0,$.jsxs)(`div`,{style:{minWidth:`220px`,flex:1},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,marginBottom:`8px`,padding:`0 4px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`6px`},children:[(0,$.jsx)(`div`,{style:{width:`10px`,height:`10px`,borderRadius:`50%`,background:e.color}}),(0,$.jsx)(`span`,{style:{fontSize:`13px`,fontWeight:700,color:`#1e293b`},children:e.label})]}),(0,$.jsx)(`span`,{style:{fontSize:`12px`,color:`#94a3b8`},children:t.length})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`8px`},children:[t.map(t=>{let n=Gb(t.urgency);return(0,$.jsxs)(`div`,{className:`card`,style:{padding:`12px`,cursor:`pointer`,borderLeft:`3px solid ${e.color}`},onClick:()=>r(t),children:[(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,marginBottom:`4px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`13px`,color:`#1e293b`},children:t.name}),n&&(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`4px`},children:[(0,$.jsx)(`span`,{style:{width:`8px`,height:`8px`,borderRadius:`50%`,background:n.color,display:`inline-block`}}),(0,$.jsx)(`span`,{style:{fontSize:`9px`,fontWeight:700,color:n.color,letterSpacing:`0.3px`},children:n.label})]})]}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:700,color:`#1e293b`,marginBottom:`4px`},children:t.budget}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#64748b`,marginBottom:`6px`},children:t.type}),(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[t.preApproved?(0,$.jsx)(`span`,{style:{fontSize:`10px`,fontWeight:600,padding:`1px 6px`,borderRadius:`9999px`,background:`#dcfce7`,color:`#16a34a`},children:`Pre-Approved`}):(0,$.jsx)(`span`,{style:{fontSize:`10px`,fontWeight:600,padding:`1px 6px`,borderRadius:`9999px`,background:`#fee2e2`,color:`#dc2626`},children:`Not Pre-Approved`}),(0,$.jsx)(`span`,{style:{fontSize:`11px`,color:`#94a3b8`},children:t.agent})]})]},t.id)}),t.length===0&&(0,$.jsx)(`div`,{style:{padding:`20px 12px`,textAlign:`center`,fontSize:`12px`,color:`#cbd5e1`,border:`1px dashed #e2e8f0`,borderRadius:`8px`},children:`No buyers`})]})]},e.id)})}),e===`list`&&(0,$.jsx)(`div`,{className:`tableWrap`,children:(0,$.jsxs)(`table`,{className:`table`,children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{children:`Name`}),(0,$.jsx)(`th`,{children:`Budget`}),(0,$.jsx)(`th`,{children:`Type`}),(0,$.jsx)(`th`,{children:`Status`}),(0,$.jsx)(`th`,{children:`Pre-Approved`}),(0,$.jsx)(`th`,{children:`Agent`}),(0,$.jsx)(`th`,{children:`Last Contact`})]})}),(0,$.jsx)(`tbody`,{children:Hb.map(e=>{let t=Wb[e.status]||Wb.lead,n=Gb(e.urgency);return(0,$.jsxs)(`tr`,{onClick:()=>r(e),style:{cursor:`pointer`},children:[(0,$.jsx)(`td`,{children:(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`6px`},children:[n&&(0,$.jsx)(`span`,{style:{width:`8px`,height:`8px`,borderRadius:`50%`,background:n.color,display:`inline-block`,flexShrink:0}}),(0,$.jsx)(`span`,{style:{fontWeight:600,fontSize:`13px`},children:e.name})]})}),(0,$.jsx)(`td`,{style:{fontWeight:700},children:e.budget}),(0,$.jsx)(`td`,{style:{fontSize:`12px`,color:`#64748b`},children:e.type}),(0,$.jsx)(`td`,{children:(0,$.jsx)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:t.bg,color:t.color},children:Kb(e.status)})}),(0,$.jsx)(`td`,{children:e.preApproved?(0,$.jsx)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:`#dcfce7`,color:`#16a34a`},children:`Yes`}):(0,$.jsx)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:`#fee2e2`,color:`#dc2626`},children:`No`})}),(0,$.jsx)(`td`,{style:{fontSize:`12px`,color:e.agent===`Unassigned`?`#d97706`:`#64748b`,fontWeight:e.agent===`Unassigned`?600:400},children:e.agent}),(0,$.jsx)(`td`,{style:{fontSize:`12px`,color:`#64748b`},children:e.lastContact})]},e.id)})})]})}),n&&(0,$.jsxs)(`div`,{style:{position:`fixed`,top:0,right:0,width:`400px`,height:`100vh`,background:`white`,boxShadow:`-4px 0 24px rgba(0,0,0,0.12)`,zIndex:999,overflowY:`auto`,padding:`24px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,marginBottom:`20px`},children:[(0,$.jsx)(`h2`,{style:{fontSize:`18px`,fontWeight:700,margin:0},children:`Buyer Detail`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>r(null),style:{background:`#f1f5f9`,border:`none`,fontSize:`16px`,padding:`4px 10px`},children:`X`})]}),(0,$.jsxs)(`div`,{style:{marginBottom:`16px`},children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`18px`,color:`#1e293b`},children:n.name}),(()=>{let e=Gb(n.urgency);return e?(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`6px`,marginTop:`6px`},children:[(0,$.jsx)(`span`,{style:{width:`10px`,height:`10px`,borderRadius:`50%`,background:e.color,display:`inline-block`}}),(0,$.jsx)(`span`,{style:{fontSize:`11px`,fontWeight:700,color:e.color},children:e.label})]}):null})()]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`,marginBottom:`16px`,flexWrap:`wrap`},children:[(0,$.jsx)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:(Wb[n.status]||{}).bg,color:(Wb[n.status]||{}).color},children:Kb(n.status)}),n.preApproved?(0,$.jsx)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:`#dcfce7`,color:`#16a34a`},children:`Pre-Approved`}):(0,$.jsx)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:`#fee2e2`,color:`#dc2626`},children:`Not Pre-Approved`})]}),(0,$.jsxs)(`div`,{style:{marginBottom:`20px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`12px`,fontWeight:600,color:`#94a3b8`,marginBottom:`6px`,textTransform:`uppercase`,letterSpacing:`0.5px`},children:`Budget`}),(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:700,color:`#1e293b`},children:n.budget})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`24px`,marginBottom:`20px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:`12px`,fontWeight:600,color:`#94a3b8`,marginBottom:`4px`,textTransform:`uppercase`,letterSpacing:`0.5px`},children:`Property Type`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#1e293b`,fontWeight:600},children:n.type})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontSize:`12px`,fontWeight:600,color:`#94a3b8`,marginBottom:`4px`,textTransform:`uppercase`,letterSpacing:`0.5px`},children:`Agent`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:n.agent===`Unassigned`?`#d97706`:`#1e293b`,fontWeight:600},children:n.agent})]})]}),(0,$.jsxs)(`div`,{style:{marginBottom:`20px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`12px`,fontWeight:600,color:`#94a3b8`,marginBottom:`6px`,textTransform:`uppercase`,letterSpacing:`0.5px`},children:`Notes`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#475569`,lineHeight:1.5},children:n.note})]}),(0,$.jsxs)(`div`,{style:{marginBottom:`20px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`12px`,fontWeight:600,color:`#94a3b8`,marginBottom:`6px`,textTransform:`uppercase`,letterSpacing:`0.5px`},children:`Last Contact`}),(0,$.jsx)(`div`,{style:{fontSize:`13px`,color:`#475569`},children:n.lastContact})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`,flexDirection:`column`},children:[(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>{i(`Tell me about buyer ${n.name}. Budget: ${n.budget}, looking for: ${n.type}. Notes: ${n.note}. What listings should I match them with and what's the best next step?`),r(null)},style:{background:`linear-gradient(135deg, #7c3aed, #6d28d9)`,color:`white`,border:`none`,padding:`10px`},children:`Ask AI`}),(n.status===`lead`||n.status===`contacted`)&&(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>{i(`Draft a personalized outreach message for ${n.name}. They are a ${n.status} looking for ${n.type} in the ${n.budget} range. Notes: ${n.note}. Make it warm, professional, and actionable.`),r(null)},style:{background:`#f1f5f9`,color:`#475569`,border:`none`,padding:`10px`},children:`AI: Draft Outreach`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>{i(`Find matching listings for ${n.name}. Budget: ${n.budget}, property type: ${n.type}. Notes: ${n.note}. Show me the best matches from our current inventory.`),r(null)},style:{background:`#f1f5f9`,color:`#475569`,border:`none`,padding:`10px`},children:`AI: Match Listings`})]})]})]})}var Jb=new Date(`2026-02-19`),Yb=[{id:1,type:`sales`,address:`1893 San Jose Blvd`,price:335e3,buyer:`Jennifer Kim`,seller:`Thomas Greene`,status:`under-contract`,closingDate:`2026-03-10`,agent:`David Park`,escrowAgent:`First American Title`,lender:`Chase Mortgage`,milestones:[{label:`Contract Executed`,date:`2026-02-05`,done:!0},{label:`Earnest Money Deposited`,date:`2026-02-07`,done:!0},{label:`Inspection Period`,date:`2026-02-19`,done:!1,deadline:!0},{label:`Appraisal Ordered`,date:`2026-02-12`,done:!0},{label:`Appraisal Received`,date:`2026-02-25`,done:!1},{label:`Loan Approval`,date:`2026-03-03`,done:!1},{label:`Final Walkthrough`,date:`2026-03-08`,done:!1},{label:`Closing`,date:`2026-03-10`,done:!1}]},{id:2,type:`sales`,address:`9876 Argyle Forest Blvd`,price:389e3,buyer:`Marcus & Diana Reed`,seller:`Bayshore Properties LLC`,status:`closing-soon`,closingDate:`2026-02-28`,agent:`Sarah Mitchell`,escrowAgent:`Stewart Title`,lender:`Wells Fargo`,milestones:[{label:`Contract Executed`,date:`2026-01-20`,done:!0},{label:`Earnest Money Deposited`,date:`2026-01-22`,done:!0},{label:`Inspection Complete`,date:`2026-02-03`,done:!0},{label:`Appraisal Received`,date:`2026-02-10`,done:!0},{label:`Loan Approved`,date:`2026-02-18`,done:!0},{label:`Final Walkthrough`,date:`2026-02-26`,done:!1},{label:`Closing`,date:`2026-02-28`,done:!1,deadline:!0}]},{id:3,type:`sales`,address:`4567 Kernan Blvd #201`,price:475e3,buyer:`Amanda Liu`,seller:`Oceanview Development`,status:`offer-submitted`,closingDate:null,agent:`Sarah Mitchell`,escrowAgent:`TBD`,lender:`Pre-approved Chase`,milestones:[{label:`Offer Submitted`,date:`2026-02-18`,done:!0},{label:`Seller Response Due`,date:`2026-02-20`,done:!1,deadline:!0}]}],Xb=[{id:101,type:`leasing`,address:`San Marco TH-1`,tenant:`James Lopez`,property:`San Marco Townhomes`,status:`renewal`,rent:1400,proposedRent:1450,leaseEnd:`2026-03-15`,milestones:[{label:`Renewal Notice Sent`,date:`2026-02-01`,done:!0},{label:`Tenant Response`,date:`2026-02-15`,done:!0},{label:`Terms Negotiation`,date:`2026-02-20`,done:!1,deadline:!0},{label:`New Lease Signed`,date:`2026-03-01`,done:!1},{label:`Effective Date`,date:`2026-03-15`,done:!1}]},{id:102,type:`leasing`,address:`Riverside Apartments 2A`,tenant:`New Applicant`,property:`Riverside Apartments`,status:`application`,rent:1300,proposedRent:null,leaseEnd:null,milestones:[{label:`Application Received`,date:`2026-02-17`,done:!0},{label:`Screening In Progress`,date:`2026-02-19`,done:!1,deadline:!0},{label:`Approval Decision`,date:`2026-02-22`,done:!1},{label:`Lease Signing`,date:`2026-02-25`,done:!1},{label:`Move-In`,date:`2026-03-01`,done:!1}]},{id:103,type:`leasing`,address:`Riverside Apartments 2A`,tenant:`Kevin Williams`,property:`Riverside Apartments`,status:`eviction`,rent:1300,proposedRent:null,leaseEnd:`2026-04-30`,milestones:[{label:`30 Days Past Due`,date:`2026-01-20`,done:!0},{label:`3-Day Notice Served`,date:`2026-02-14`,done:!0},{label:`Cure Period Expires`,date:`2026-02-17`,done:!0},{label:`Filing / Legal`,date:`2026-02-22`,done:!1,deadline:!0},{label:`Court Date`,date:`2026-03-10`,done:!1}]},{id:104,type:`leasing`,address:`Beach Cottage D`,tenant:`Sarah Chen`,property:`Beach Cottages`,status:`move-in`,rent:1500,proposedRent:null,leaseEnd:`2027-02-28`,milestones:[{label:`Lease Signed`,date:`2026-02-10`,done:!0},{label:`Deposit Received`,date:`2026-02-12`,done:!0},{label:`Unit Inspection`,date:`2026-02-25`,done:!1},{label:`Move-In`,date:`2026-02-28`,done:!1,deadline:!0}]}],Zb={"under-contract":{bg:`#dbeafe`,color:`#2563eb`,label:`Under Contract`},"closing-soon":{bg:`#fef3c7`,color:`#d97706`,label:`Closing Soon`},"offer-submitted":{bg:`#f3e8ff`,color:`#7c3aed`,label:`Offer Submitted`}},Qb={renewal:{bg:`#dbeafe`,color:`#2563eb`,label:`Renewal`},application:{bg:`#f3e8ff`,color:`#7c3aed`,label:`Application`},eviction:{bg:`#fee2e2`,color:`#dc2626`,label:`Eviction`},"move-in":{bg:`#dcfce7`,color:`#16a34a`,label:`Move-In`}};function $b(e){if(!e)return null;let t=new Date(e);return Math.ceil((t-Jb)/(1e3*60*60*24))}function ex(e){return`$`+e.toLocaleString()}function tx(){let[e,t]=(0,_.useState)(null),[n,r]=(0,_.useState)(`all`);function i(e){window.dispatchEvent(new CustomEvent(`ta:chatPrompt`,{detail:{message:e}}))}let a=Yb.reduce((e,t)=>e+t.price,0),o=Yb.filter(e=>e.closingDate).sort((e,t)=>new Date(e.closingDate)-new Date(t.closingDate))[0],s=o?$b(o.closingDate):null,c=Math.round(a*.01*3),l=Xb.reduce((e,t)=>e+t.rent,0),u=Xb.filter(e=>e.status===`renewal`).length,d=Xb.filter(e=>e.status===`move-in`||e.status===`application`).length,f=n===`all`?[...Yb,...Xb]:n===`sales`?Yb:Xb;return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Transactions`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Active real estate transactions and closing timelines`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>i(`Give me a transaction summary. Which closings need attention and what deadlines are approaching?`),style:{background:`linear-gradient(135deg, #7c3aed, #6d28d9)`,color:`white`,border:`none`},children:`AI Transaction Brief`})]}),(0,$.jsx)(`div`,{className:`kpiRow`,style:{marginBottom:`20px`},children:n===`leasing`?(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Leasing Transactions`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:Xb.length})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Total Leasing Activity`}),(0,$.jsxs)(`div`,{className:`kpiValue`,children:[ex(l),`/mo`]})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Renewals Due`}),(0,$.jsx)(`div`,{className:`kpiValue`,style:{color:u>0?`#d97706`:`#1e293b`},children:u})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Deposits Held`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:d})]})]}):n===`sales`?(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Pending Transactions`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:Yb.length})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Total Value`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:`$1.2M`})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Nearest Closing`}),(0,$.jsxs)(`div`,{className:`kpiValue`,style:{color:s!==null&&s<7?`#dc2626`:`#1e293b`},children:[`Feb 28  `,s,`d`]})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Commission Pipeline`}),(0,$.jsx)(`div`,{className:`kpiValue`,style:{color:`#16a34a`},children:ex(c)})]})]}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`All Transactions`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:Yb.length+Xb.length})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Sales Value`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:`$1.2M`})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Leasing Activity`}),(0,$.jsxs)(`div`,{className:`kpiValue`,children:[ex(l),`/mo`]})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Nearest Closing`}),(0,$.jsxs)(`div`,{className:`kpiValue`,style:{color:s!==null&&s<7?`#dc2626`:`#1e293b`},children:[`Feb 28  `,s,`d`]})]})]})}),(0,$.jsx)(`div`,{style:{display:`flex`,gap:`4px`,marginBottom:`16px`},children:[`all`,`sales`,`leasing`].map(e=>(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>r(e),style:{background:n===e?`#1e293b`:`#f1f5f9`,color:n===e?`white`:`#475569`,border:`none`,fontSize:`12px`,padding:`6px 14px`},children:e===`all`?`All`:e===`sales`?`Sales`:`Leasing`},e))}),(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`16px`},children:f.map(n=>{let r=n.type===`leasing`,a=r?Qb[n.status]:Zb[n.status],o=e===n.id,s=r&&n.status===`eviction`;if(r){let e=$b(n.leaseEnd);return(0,$.jsxs)(`div`,{className:`card`,style:{padding:`0`,cursor:`pointer`,overflow:`hidden`,borderLeft:s?`3px solid #dc2626`:`none`},onClick:()=>t(o?null:n.id),children:[(0,$.jsxs)(`div`,{style:{padding:`16px 20px`,borderBottom:o?`1px solid #e2e8f0`:`none`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`flex-start`,marginBottom:`12px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`16px`,color:`#1e293b`,marginBottom:`2px`},children:n.address}),(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:700,color:`#1e293b`},children:n.proposedRent?(0,$.jsxs)(`span`,{children:[ex(n.rent),(0,$.jsx)(`span`,{style:{color:`#64748b`,fontSize:`14px`,fontWeight:400},children:` /mo `}),(0,$.jsx)(`span`,{style:{color:`#16a34a`,fontSize:`16px`},children:ex(n.proposedRent)}),(0,$.jsx)(`span`,{style:{color:`#64748b`,fontSize:`14px`,fontWeight:400},children:` proposed`})]}):(0,$.jsxs)(`span`,{children:[ex(n.rent),(0,$.jsx)(`span`,{style:{color:`#64748b`,fontSize:`14px`,fontWeight:400},children:` /mo`})]})})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`10px`},children:[n.leaseEnd&&(0,$.jsx)(`span`,{style:{fontSize:`14px`,fontWeight:700,color:e!==null&&e<14?`#dc2626`:`#1e293b`},children:e!==null&&e>=0?`${e}d to lease end`:e===null?``:`${Math.abs(e)}d past end`}),(0,$.jsx)(`span`,{style:{fontSize:`12px`,fontWeight:600,padding:`3px 10px`,borderRadius:`9999px`,background:a.bg,color:a.color},children:a.label})]})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`24px`,fontSize:`12px`,color:`#64748b`,flexWrap:`wrap`},children:[(0,$.jsxs)(`span`,{children:[(0,$.jsx)(`strong`,{style:{color:s?`#dc2626`:`#475569`},children:`Tenant:`}),` `,n.tenant]}),(0,$.jsxs)(`span`,{children:[(0,$.jsx)(`strong`,{style:{color:`#475569`},children:`Property:`}),` `,n.property]}),n.leaseEnd&&(0,$.jsxs)(`span`,{children:[(0,$.jsx)(`strong`,{style:{color:`#475569`},children:`Lease End:`}),` `,n.leaseEnd]})]}),(0,$.jsxs)(`div`,{style:{marginTop:`16px`},children:[(0,$.jsxs)(`div`,{style:{position:`relative`,display:`flex`,alignItems:`center`,justifyContent:`space-between`,padding:`0 8px`},children:[(0,$.jsx)(`div`,{style:{position:`absolute`,top:`50%`,left:`8px`,right:`8px`,height:`3px`,background:`#e2e8f0`,transform:`translateY(-50%)`,zIndex:0}}),(()=>{let e=n.milestones.filter(e=>e.done).length,t=n.milestones.length>1?(e-1)/(n.milestones.length-1)*100:0;return(0,$.jsx)(`div`,{style:{position:`absolute`,top:`50%`,left:`8px`,width:`calc(${Math.max(0,t)}% - 16px)`,height:`3px`,background:s?`#dc2626`:`#16a34a`,transform:`translateY(-50%)`,zIndex:1,borderRadius:`2px`}})})(),n.milestones.map((e,t)=>{let n=$b(e.date),r=e.deadline&&!e.done&&n!==null&&n<=2;return(0,$.jsx)(`div`,{style:{position:`relative`,zIndex:2,display:`flex`,flexDirection:`column`,alignItems:`center`},children:(0,$.jsx)(`div`,{title:`${e.label}  ${e.date}`,style:{width:`14px`,height:`14px`,borderRadius:`50%`,background:e.done?s?`#dc2626`:`#16a34a`:`white`,border:e.done?`2px solid ${s?`#dc2626`:`#16a34a`}`:e.deadline?`2px solid ${r?`#dc2626`:`#d97706`}`:`2px solid #cbd5e1`,boxShadow:r?`0 0 0 3px rgba(220,38,38,0.3)`:`none`,animation:r?`pulse 1.5s infinite`:`none`}})},t)})]}),(0,$.jsx)(`div`,{style:{display:`flex`,justifyContent:`space-between`,marginTop:`6px`,padding:`0 2px`},children:n.milestones.map((e,t)=>(0,$.jsx)(`div`,{style:{fontSize:`9px`,color:e.deadline&&!e.done?`#d97706`:`#94a3b8`,fontWeight:e.deadline?700:400,textAlign:`center`,width:`${100/n.milestones.length}%`,whiteSpace:`nowrap`,overflow:`hidden`,textOverflow:`ellipsis`},children:e.label},t))})]})]}),o&&(0,$.jsxs)(`div`,{style:{padding:`16px 20px`,background:s?`#fef2f2`:`#f8fafc`},children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,fontWeight:700,color:`#1e293b`,marginBottom:`12px`},children:`Milestone Details`}),(0,$.jsx)(`div`,{className:`tableWrap`,children:(0,$.jsxs)(`table`,{className:`table`,style:{width:`100%`},children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{style:{textAlign:`left`,fontSize:`11px`,color:`#64748b`,padding:`6px 10px`},children:`Milestone`}),(0,$.jsx)(`th`,{style:{textAlign:`left`,fontSize:`11px`,color:`#64748b`,padding:`6px 10px`},children:`Date`}),(0,$.jsx)(`th`,{style:{textAlign:`left`,fontSize:`11px`,color:`#64748b`,padding:`6px 10px`},children:`Status`}),(0,$.jsx)(`th`,{style:{textAlign:`left`,fontSize:`11px`,color:`#64748b`,padding:`6px 10px`},children:`Days`})]})}),(0,$.jsx)(`tbody`,{children:n.milestones.map((e,t)=>{let n=$b(e.date);return(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`td`,{className:`tdStrong`,style:{padding:`6px 10px`,fontSize:`12px`},children:e.label}),(0,$.jsx)(`td`,{style:{padding:`6px 10px`,fontSize:`12px`,color:`#64748b`},children:e.date}),(0,$.jsx)(`td`,{style:{padding:`6px 10px`},children:e.done?(0,$.jsx)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:`#dcfce7`,color:`#16a34a`},children:`Complete`}):e.deadline?(0,$.jsx)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:n!==null&&n<=2?`#fee2e2`:`#fef3c7`,color:n!==null&&n<=2?`#dc2626`:`#d97706`},children:`Deadline`}):(0,$.jsx)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:`#f1f5f9`,color:`#64748b`},children:`Pending`})}),(0,$.jsx)(`td`,{style:{padding:`6px 10px`,fontSize:`12px`,fontWeight:700,color:n!==null&&n<0?`#dc2626`:n!==null&&n<=2?`#d97706`:`#64748b`},children:e.done||n===null?``:n===0?`Today`:n>0?`${n}d away`:`${Math.abs(n)}d overdue`})]},t)})})]})}),(0,$.jsxs)(`div`,{style:{marginTop:`12px`,display:`flex`,gap:`8px`},children:[(0,$.jsx)(`button`,{className:`iconBtn`,onClick:e=>{e.stopPropagation(),i(`Check all deadlines for the leasing transaction at ${n.address}. Tenant: ${n.tenant}, Property: ${n.property}, Status: ${n.status}, Rent: ${ex(n.rent)}${n.proposedRent?`, Proposed: ${ex(n.proposedRent)}`:``}. What needs attention right now?`)},style:{background:`linear-gradient(135deg, #7c3aed, #6d28d9)`,color:`white`,border:`none`,fontSize:`12px`,padding:`6px 14px`},children:`AI: Check deadlines`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:e=>{e.stopPropagation(),i(`Prepare a status update for the leasing transaction at ${n.address}. Tenant: ${n.tenant}, Property: ${n.property}, Rent: ${ex(n.rent)}, Status: ${n.status}.`)},style:{background:`#f1f5f9`,color:`#475569`,border:`1px solid #e2e8f0`,fontSize:`12px`,padding:`6px 14px`},children:`Generate Status Update`})]})]})]},n.id)}let c=$b(n.closingDate);return(0,$.jsxs)(`div`,{className:`card`,style:{padding:`0`,cursor:`pointer`,overflow:`hidden`},onClick:()=>t(o?null:n.id),children:[(0,$.jsxs)(`div`,{style:{padding:`16px 20px`,borderBottom:o?`1px solid #e2e8f0`:`none`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`flex-start`,marginBottom:`12px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`16px`,color:`#1e293b`,marginBottom:`2px`},children:n.address}),(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:700,color:`#1e293b`},children:ex(n.price)})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`10px`},children:[n.closingDate&&(0,$.jsxs)(`span`,{style:{fontSize:`14px`,fontWeight:700,color:c!==null&&c<7?`#dc2626`:`#1e293b`},children:[c,`d to close`]}),(0,$.jsx)(`span`,{style:{fontSize:`12px`,fontWeight:600,padding:`3px 10px`,borderRadius:`9999px`,background:a.bg,color:a.color},children:a.label})]})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`24px`,fontSize:`12px`,color:`#64748b`,flexWrap:`wrap`},children:[(0,$.jsxs)(`span`,{children:[(0,$.jsx)(`strong`,{style:{color:`#475569`},children:`Buyer:`}),` `,n.buyer]}),(0,$.jsxs)(`span`,{children:[(0,$.jsx)(`strong`,{style:{color:`#475569`},children:`Seller:`}),` `,n.seller]}),(0,$.jsxs)(`span`,{children:[(0,$.jsx)(`strong`,{style:{color:`#475569`},children:`Agent:`}),` `,n.agent]}),(0,$.jsxs)(`span`,{children:[(0,$.jsx)(`strong`,{style:{color:`#475569`},children:`Escrow:`}),` `,n.escrowAgent]}),(0,$.jsxs)(`span`,{children:[(0,$.jsx)(`strong`,{style:{color:`#475569`},children:`Lender:`}),` `,n.lender]})]}),(0,$.jsxs)(`div`,{style:{marginTop:`16px`},children:[(0,$.jsxs)(`div`,{style:{position:`relative`,display:`flex`,alignItems:`center`,justifyContent:`space-between`,padding:`0 8px`},children:[(0,$.jsx)(`div`,{style:{position:`absolute`,top:`50%`,left:`8px`,right:`8px`,height:`3px`,background:`#e2e8f0`,transform:`translateY(-50%)`,zIndex:0}}),(()=>{let e=n.milestones.filter(e=>e.done).length,t=n.milestones.length>1?(e-1)/(n.milestones.length-1)*100:0;return(0,$.jsx)(`div`,{style:{position:`absolute`,top:`50%`,left:`8px`,width:`calc(${Math.max(0,t)}% - 16px)`,height:`3px`,background:`#16a34a`,transform:`translateY(-50%)`,zIndex:1,borderRadius:`2px`}})})(),n.milestones.map((e,t)=>{let n=$b(e.date),r=e.deadline&&!e.done&&n!==null&&n<=2;return(0,$.jsx)(`div`,{style:{position:`relative`,zIndex:2,display:`flex`,flexDirection:`column`,alignItems:`center`},children:(0,$.jsx)(`div`,{title:`${e.label}  ${e.date}`,style:{width:`14px`,height:`14px`,borderRadius:`50%`,background:e.done?`#16a34a`:`white`,border:e.done?`2px solid #16a34a`:e.deadline?`2px solid ${r?`#dc2626`:`#d97706`}`:`2px solid #cbd5e1`,boxShadow:r?`0 0 0 3px rgba(220,38,38,0.3)`:`none`,animation:r?`pulse 1.5s infinite`:`none`}})},t)})]}),(0,$.jsx)(`div`,{style:{display:`flex`,justifyContent:`space-between`,marginTop:`6px`,padding:`0 2px`},children:n.milestones.map((e,t)=>(0,$.jsx)(`div`,{style:{fontSize:`9px`,color:e.deadline&&!e.done?`#d97706`:`#94a3b8`,fontWeight:e.deadline?700:400,textAlign:`center`,width:`${100/n.milestones.length}%`,whiteSpace:`nowrap`,overflow:`hidden`,textOverflow:`ellipsis`},children:e.label},t))})]})]}),o&&(0,$.jsxs)(`div`,{style:{padding:`16px 20px`,background:`#f8fafc`},children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,fontWeight:700,color:`#1e293b`,marginBottom:`12px`},children:`Milestone Details`}),(0,$.jsx)(`div`,{className:`tableWrap`,children:(0,$.jsxs)(`table`,{className:`table`,style:{width:`100%`},children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{style:{textAlign:`left`,fontSize:`11px`,color:`#64748b`,padding:`6px 10px`},children:`Milestone`}),(0,$.jsx)(`th`,{style:{textAlign:`left`,fontSize:`11px`,color:`#64748b`,padding:`6px 10px`},children:`Date`}),(0,$.jsx)(`th`,{style:{textAlign:`left`,fontSize:`11px`,color:`#64748b`,padding:`6px 10px`},children:`Status`}),(0,$.jsx)(`th`,{style:{textAlign:`left`,fontSize:`11px`,color:`#64748b`,padding:`6px 10px`},children:`Days`})]})}),(0,$.jsx)(`tbody`,{children:n.milestones.map((e,t)=>{let n=$b(e.date);return(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`td`,{className:`tdStrong`,style:{padding:`6px 10px`,fontSize:`12px`},children:e.label}),(0,$.jsx)(`td`,{style:{padding:`6px 10px`,fontSize:`12px`,color:`#64748b`},children:e.date}),(0,$.jsx)(`td`,{style:{padding:`6px 10px`},children:e.done?(0,$.jsx)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:`#dcfce7`,color:`#16a34a`},children:`Complete`}):e.deadline?(0,$.jsx)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:n!==null&&n<=2?`#fee2e2`:`#fef3c7`,color:n!==null&&n<=2?`#dc2626`:`#d97706`},children:`Deadline`}):(0,$.jsx)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:`#f1f5f9`,color:`#64748b`},children:`Pending`})}),(0,$.jsx)(`td`,{style:{padding:`6px 10px`,fontSize:`12px`,fontWeight:700,color:n!==null&&n<0?`#dc2626`:n!==null&&n<=2?`#d97706`:`#64748b`},children:e.done||n===null?``:n===0?`Today`:n>0?`${n}d away`:`${Math.abs(n)}d overdue`})]},t)})})]})}),(0,$.jsxs)(`div`,{style:{marginTop:`12px`,display:`flex`,gap:`8px`},children:[(0,$.jsx)(`button`,{className:`iconBtn`,onClick:e=>{e.stopPropagation(),i(`Check all deadlines for the transaction at ${n.address}. The closing date is ${n.closingDate||`TBD`}. Buyer: ${n.buyer}, Seller: ${n.seller}. What needs attention right now?`)},style:{background:`linear-gradient(135deg, #7c3aed, #6d28d9)`,color:`white`,border:`none`,fontSize:`12px`,padding:`6px 14px`},children:`AI: Check deadlines`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:e=>{e.stopPropagation(),i(`Prepare a status update for the ${n.address} transaction. Price: ${ex(n.price)}, Buyer: ${n.buyer}, Seller: ${n.seller}, Agent: ${n.agent}, Status: ${n.status}.`)},style:{background:`#f1f5f9`,color:`#475569`,border:`1px solid #e2e8f0`,fontSize:`12px`,padding:`6px 14px`},children:`Generate Status Update`})]})]})]},n.id)})}),(0,$.jsx)(`style`,{children:`
        @keyframes pulse {
          0% { box-shadow: 0 0 0 0 rgba(220, 38, 38, 0.4); }
          70% { box-shadow: 0 0 0 6px rgba(220, 38, 38, 0); }
          100% { box-shadow: 0 0 0 0 rgba(220, 38, 38, 0); }
        }
      `})]})}var nx=new Date(`2026-02-19`),rx=[{id:1,name:`Riverside Apartments`,address:`450 Riverside Ave`,city:`Jacksonville`,zip:`32204`,type:`Apartment`,totalUnits:12,occupiedUnits:11,monthlyRent:16200,avgRent:1350,units:[{unit:`1A`,beds:2,bath:1,sqft:850,rent:1200,status:`occupied`,tenant:`Maria Santos`,leaseEnd:`2026-08-31`},{unit:`1B`,beds:2,bath:1,sqft:850,rent:1200,status:`occupied`,tenant:`Jason Park`,leaseEnd:`2026-06-30`},{unit:`2A`,beds:2,bath:1,sqft:900,rent:1300,status:`occupied`,tenant:`Kevin Williams`,leaseEnd:`2026-04-30`,flag:`30 days late`},{unit:`2B`,beds:2,bath:1,sqft:900,rent:1300,status:`occupied`,tenant:`Ashley Torres`,leaseEnd:`2026-09-30`},{unit:`3A`,beds:1,bath:1,sqft:650,rent:1050,status:`occupied`,tenant:`Ryan Chen`,leaseEnd:`2026-07-31`},{unit:`3B`,beds:1,bath:1,sqft:650,rent:1050,status:`occupied`,tenant:`Brittany Moore`,leaseEnd:`2026-05-31`},{unit:`4A`,beds:3,bath:2,sqft:1200,rent:1650,status:`occupied`,tenant:`David Kim`,leaseEnd:`2026-11-30`},{unit:`4B`,beds:3,bath:2,sqft:1200,rent:1650,status:`occupied`,tenant:`Nicole Johnson`,leaseEnd:`2026-10-31`},{unit:`5A`,beds:2,bath:2,sqft:950,rent:1400,status:`occupied`,tenant:`Marcus Thompson`,leaseEnd:`2026-12-31`},{unit:`5B`,beds:2,bath:2,sqft:950,rent:1400,status:`occupied`,tenant:`Laura Garcia`,leaseEnd:`2026-03-31`},{unit:`6A`,beds:1,bath:1,sqft:600,rent:950,status:`vacant`,tenant:null,leaseEnd:null,vacantDays:12},{unit:`6B`,beds:1,bath:1,sqft:600,rent:1e3,status:`occupied`,tenant:`Tyler Brown`,leaseEnd:`2026-08-31`}]},{id:2,name:`San Marco Townhomes`,address:`221 San Marco Blvd`,city:`Jacksonville`,zip:`32207`,type:`Townhome`,totalUnits:6,occupiedUnits:6,monthlyRent:10200,avgRent:1700,units:[{unit:`TH-1`,beds:3,bath:2.5,sqft:1400,rent:1700,status:`occupied`,tenant:`James Lopez`,leaseEnd:`2026-03-15`,flag:`renewal due`},{unit:`TH-2`,beds:3,bath:2.5,sqft:1400,rent:1700,status:`occupied`,tenant:`Sarah Mitchell`,leaseEnd:`2026-09-30`},{unit:`TH-3`,beds:2,bath:2,sqft:1100,rent:1500,status:`occupied`,tenant:`Chris Adams`,leaseEnd:`2026-07-31`},{unit:`TH-4`,beds:2,bath:2,sqft:1100,rent:1500,status:`occupied`,tenant:`Amanda White`,leaseEnd:`2026-06-30`},{unit:`TH-5`,beds:3,bath:2.5,sqft:1400,rent:1900,status:`occupied`,tenant:`Derek Williams`,leaseEnd:`2026-12-31`},{unit:`TH-6`,beds:3,bath:2.5,sqft:1400,rent:1900,status:`occupied`,tenant:`Patricia Lee`,leaseEnd:`2026-11-30`}]},{id:3,name:`Beach Cottages`,address:`812 1st St S`,city:`Jacksonville Beach`,zip:`32250`,type:`Cottage`,totalUnits:4,occupiedUnits:3,monthlyRent:5100,avgRent:1700,units:[{unit:`A`,beds:2,bath:1,sqft:800,rent:1600,status:`occupied`,tenant:`Mike Reynolds`,leaseEnd:`2026-05-31`},{unit:`B`,beds:2,bath:1,sqft:800,rent:1600,status:`occupied`,tenant:`Jessica Wang`,leaseEnd:`2026-08-31`},{unit:`C`,beds:3,bath:2,sqft:1100,rent:1900,status:`occupied`,tenant:`Brian Foster`,leaseEnd:`2026-10-31`},{unit:`D`,beds:2,bath:1,sqft:800,rent:1500,status:`vacant`,tenant:null,leaseEnd:null,vacantDays:8}]},{id:4,name:`Mandarin Duplex`,address:`1234 Mandarin Rd`,city:`Jacksonville`,zip:`32258`,type:`Duplex`,totalUnits:2,occupiedUnits:2,monthlyRent:3500,avgRent:1750,units:[{unit:`A`,beds:3,bath:2,sqft:1300,rent:1800,status:`occupied`,tenant:`Robert Chang`,leaseEnd:`2026-06-30`},{unit:`B`,beds:3,bath:2,sqft:1300,rent:1700,status:`occupied`,tenant:`Elena Vasquez`,leaseEnd:`2026-09-30`}]},{id:5,name:`Southside Flats`,address:`567 Philips Hwy`,city:`Jacksonville`,zip:`32205`,type:`Apartment`,totalUnits:4,occupiedUnits:2,monthlyRent:2400,avgRent:1200,units:[{unit:`1`,beds:2,bath:1,sqft:750,rent:1200,status:`occupied`,tenant:`Angela Davis`,leaseEnd:`2026-04-30`},{unit:`2`,beds:2,bath:1,sqft:750,rent:1200,status:`occupied`,tenant:`Steven Clark`,leaseEnd:`2026-07-31`},{unit:`3`,beds:2,bath:1,sqft:750,rent:1150,status:`vacant`,tenant:null,leaseEnd:null,vacantDays:45,flag:`45 days vacant`},{unit:`4`,beds:2,bath:1,sqft:750,rent:1150,status:`vacant`,tenant:null,leaseEnd:null,vacantDays:5}]}];function ix(e){if(!e)return null;let t=new Date(e);return Math.ceil((t-nx)/(1e3*60*60*24))}function ax(){let[e,t]=(0,_.useState)(null);function n(e){window.dispatchEvent(new CustomEvent(`ta:chatPrompt`,{detail:{message:e}}))}let r=rx.reduce((e,t)=>e+t.totalUnits,0),i=rx.reduce((e,t)=>e+t.occupiedUnits,0),a=r-i,o=(i/r*100).toFixed(1),s=rx.reduce((e,t)=>e+t.monthlyRent,0);function c(e){return e>90?`#16a34a`:e>=80?`#d97706`:`#dc2626`}return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Properties`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Managed Properties  Your rental portfolio`})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>n(`Give me a portfolio overview. Which properties need attention  vacancies, late rent, upcoming renewals?`),style:{background:`linear-gradient(135deg, #7c3aed, #6d28d9)`,color:`white`,border:`none`},children:`AI Portfolio Brief`})]}),(0,$.jsxs)(`div`,{className:`kpiRow`,style:{marginBottom:`20px`},children:[(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Total Properties`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:rx.length})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Total Units`}),(0,$.jsx)(`div`,{className:`kpiValue`,children:r})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Occupancy Rate`}),(0,$.jsxs)(`div`,{className:`kpiValue`,style:{color:c(parseFloat(o))},children:[o,`%`]})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Monthly Revenue`}),(0,$.jsxs)(`div`,{className:`kpiValue`,style:{color:`#16a34a`},children:[`$`,s.toLocaleString()]})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Vacant Units`}),(0,$.jsx)(`div`,{className:`kpiValue`,style:{color:`#dc2626`},children:a})]})]}),(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(auto-fill, minmax(320px, 1fr))`,gap:`16px`},children:rx.map(r=>{let i=r.occupiedUnits/r.totalUnits*100,a=e===r.id,o=r.units.filter(e=>e.status===`vacant`);return r.units.filter(e=>{if(!e.leaseEnd)return!1;let t=ix(e.leaseEnd);return t!==null&&t<=60&&t>=0}),(0,$.jsxs)(`div`,{className:`card`,style:{padding:`0`,cursor:`pointer`,overflow:`hidden`,gridColumn:a?`1 / -1`:void 0},onClick:()=>t(a?null:r.id),children:[(0,$.jsxs)(`div`,{style:{padding:`16px 20px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`flex-start`,marginBottom:`8px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`15px`,color:`#1e293b`},children:r.name}),(0,$.jsxs)(`div`,{style:{fontSize:`12px`,color:`#64748b`,marginTop:`2px`},children:[r.address,`, `,r.city,` `,r.zip]})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`4px`,alignItems:`center`},children:[(0,$.jsx)(`span`,{style:{fontSize:`10px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:`#dbeafe`,color:`#2563eb`},children:`Managed`}),(0,$.jsx)(`span`,{style:{fontSize:`10px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:`#f1f5f9`,color:`#475569`},children:r.type})]})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,fontSize:`12px`,color:`#64748b`,marginBottom:`10px`},children:[(0,$.jsxs)(`span`,{children:[(0,$.jsx)(`strong`,{style:{color:`#475569`},children:`Units:`}),` `,r.occupiedUnits,`/`,r.totalUnits]}),(0,$.jsxs)(`span`,{children:[(0,$.jsx)(`strong`,{style:{color:`#475569`},children:`Rent:`}),` $`,r.monthlyRent.toLocaleString(),`/mo`]}),(0,$.jsxs)(`span`,{children:[(0,$.jsx)(`strong`,{style:{color:`#475569`},children:`Avg:`}),` $`,r.avgRent.toLocaleString()]})]}),(0,$.jsxs)(`div`,{style:{marginBottom:`4px`,display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsx)(`span`,{style:{fontSize:`11px`,color:`#94a3b8`},children:`Occupancy`}),(0,$.jsxs)(`span`,{style:{fontSize:`12px`,fontWeight:700,color:c(i)},children:[i.toFixed(0),`%`]})]}),(0,$.jsx)(`div`,{style:{width:`100%`,height:`8px`,background:`#f1f5f9`,borderRadius:`4px`,overflow:`hidden`},children:(0,$.jsx)(`div`,{style:{width:`${i}%`,height:`100%`,background:c(i),borderRadius:`4px`,transition:`width 0.3s ease`}})}),(o.length>0||r.units.some(e=>e.flag))&&(0,$.jsxs)(`div`,{style:{marginTop:`8px`,display:`flex`,gap:`6px`,flexWrap:`wrap`},children:[o.length>0&&(0,$.jsxs)(`span`,{style:{fontSize:`10px`,fontWeight:600,padding:`2px 6px`,borderRadius:`4px`,background:`#fee2e2`,color:`#dc2626`},children:[o.length,` vacant`]}),r.units.filter(e=>e.flag).map((e,t)=>(0,$.jsxs)(`span`,{style:{fontSize:`10px`,fontWeight:600,padding:`2px 6px`,borderRadius:`4px`,background:`#fef3c7`,color:`#d97706`},children:[e.unit,`: `,e.flag]},t))]})]}),a&&(0,$.jsxs)(`div`,{style:{borderTop:`1px solid #e2e8f0`,padding:`16px 20px`,background:`#f8fafc`},children:[(0,$.jsx)(`div`,{style:{fontSize:`13px`,fontWeight:700,color:`#1e293b`,marginBottom:`12px`},children:`Unit Details`}),(0,$.jsx)(`div`,{className:`tableWrap`,children:(0,$.jsxs)(`table`,{className:`table`,style:{width:`100%`},children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{style:{textAlign:`left`,fontSize:`11px`,color:`#64748b`,padding:`6px 8px`},children:`Unit`}),(0,$.jsx)(`th`,{style:{textAlign:`left`,fontSize:`11px`,color:`#64748b`,padding:`6px 8px`},children:`Beds/Bath`}),(0,$.jsx)(`th`,{style:{textAlign:`left`,fontSize:`11px`,color:`#64748b`,padding:`6px 8px`},children:`SqFt`}),(0,$.jsx)(`th`,{style:{textAlign:`left`,fontSize:`11px`,color:`#64748b`,padding:`6px 8px`},children:`Rent`}),(0,$.jsx)(`th`,{style:{textAlign:`left`,fontSize:`11px`,color:`#64748b`,padding:`6px 8px`},children:`Status`}),(0,$.jsx)(`th`,{style:{textAlign:`left`,fontSize:`11px`,color:`#64748b`,padding:`6px 8px`},children:`Tenant`}),(0,$.jsx)(`th`,{style:{textAlign:`left`,fontSize:`11px`,color:`#64748b`,padding:`6px 8px`},children:`Lease End`}),(0,$.jsx)(`th`,{style:{textAlign:`left`,fontSize:`11px`,color:`#64748b`,padding:`6px 8px`},children:`Flags`}),(0,$.jsx)(`th`,{style:{textAlign:`left`,fontSize:`11px`,color:`#64748b`,padding:`6px 8px`},children:`Actions`})]})}),(0,$.jsx)(`tbody`,{children:r.units.map((e,t)=>{let i=ix(e.leaseEnd),a=i!==null&&i<=60&&i>=0,o=e.status===`vacant`;return(0,$.jsxs)(`tr`,{style:{background:o?`#fef2f2`:e.flag?`#fffbeb`:`transparent`},children:[(0,$.jsx)(`td`,{className:`tdStrong`,style:{padding:`6px 8px`,fontSize:`12px`},children:e.unit}),(0,$.jsxs)(`td`,{style:{padding:`6px 8px`,fontSize:`12px`,color:`#64748b`},children:[e.beds,`/`,e.bath]}),(0,$.jsx)(`td`,{style:{padding:`6px 8px`,fontSize:`12px`,color:`#64748b`},children:e.sqft.toLocaleString()}),(0,$.jsxs)(`td`,{style:{padding:`6px 8px`,fontSize:`12px`,fontWeight:600,color:`#1e293b`},children:[`$`,e.rent.toLocaleString()]}),(0,$.jsx)(`td`,{style:{padding:`6px 8px`},children:o?(0,$.jsxs)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:`#fee2e2`,color:`#dc2626`},children:[`Vacant`,e.vacantDays?` (${e.vacantDays}d)`:``]}):(0,$.jsx)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`9999px`,background:`#dcfce7`,color:`#16a34a`},children:`Occupied`})}),(0,$.jsx)(`td`,{style:{padding:`6px 8px`,fontSize:`12px`,color:`#475569`},children:e.tenant||``}),(0,$.jsx)(`td`,{style:{padding:`6px 8px`,fontSize:`12px`,color:a?`#d97706`:`#64748b`,fontWeight:a?700:400},children:e.leaseEnd||``}),(0,$.jsx)(`td`,{style:{padding:`6px 8px`},children:e.flag&&(0,$.jsx)(`span`,{style:{fontSize:`10px`,fontWeight:600,padding:`2px 6px`,borderRadius:`4px`,background:`#fef3c7`,color:`#d97706`},children:e.flag})}),(0,$.jsx)(`td`,{style:{padding:`6px 8px`},onClick:e=>e.stopPropagation(),children:(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`4px`},children:[o&&(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>n(`Draft a marketing listing for the vacant unit ${e.unit} at ${r.name}, ${r.address}. ${e.beds} bed / ${e.bath} bath, ${e.sqft} sqft, asking $${e.rent}/mo. It has been vacant for ${e.vacantDays||`unknown`} days.`),style:{background:`linear-gradient(135deg, #7c3aed, #6d28d9)`,color:`white`,border:`none`,fontSize:`10px`,padding:`3px 8px`,whiteSpace:`nowrap`},children:`AI: Market unit`}),a&&!o&&(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>n(`Draft a lease renewal letter for ${e.tenant} in unit ${e.unit} at ${r.name}. Current rent: $${e.rent}/mo. Lease ends ${e.leaseEnd}. That is ${i} days away.`),style:{background:`#f1f5f9`,color:`#475569`,border:`1px solid #e2e8f0`,fontSize:`10px`,padding:`3px 8px`,whiteSpace:`nowrap`},children:`AI: Draft renewal`})]})})]},t)})})]})})]})]},r.id)})})]})}var ox=[{id:1,name:`Maria Santos`,unit:`1A`,property:`Riverside Apartments`,rent:1200,status:`current`,moveIn:`2024-09-01`,leaseEnd:`2026-08-31`,balance:0,phone:`(904) 555-0101`,email:`msantos@email.com`},{id:2,name:`Jason Park`,unit:`1B`,property:`Riverside Apartments`,rent:1200,status:`current`,moveIn:`2024-07-01`,leaseEnd:`2026-06-30`,balance:0,phone:`(904) 555-0102`,email:`jpark@email.com`},{id:3,name:`Kevin Williams`,unit:`2A`,property:`Riverside Apartments`,rent:1300,status:`late`,moveIn:`2023-05-01`,leaseEnd:`2026-04-30`,balance:1850,phone:`(904) 555-0103`,email:`kwilliams@email.com`,flag:`30 days late`},{id:4,name:`Ashley Torres`,unit:`2B`,property:`Riverside Apartments`,rent:1300,status:`current`,moveIn:`2024-10-01`,leaseEnd:`2026-09-30`,balance:0,phone:`(904) 555-0104`,email:`atorres@email.com`},{id:5,name:`Ryan Chen`,unit:`3A`,property:`Riverside Apartments`,rent:1050,status:`current`,moveIn:`2024-08-01`,leaseEnd:`2026-07-31`,balance:0,phone:`(904) 555-0105`,email:`rchen@email.com`},{id:6,name:`Brittany Moore`,unit:`3B`,property:`Riverside Apartments`,rent:1050,status:`current`,moveIn:`2024-06-01`,leaseEnd:`2026-05-31`,balance:0,phone:`(904) 555-0106`,email:`bmoore@email.com`},{id:7,name:`David Kim`,unit:`4A`,property:`Riverside Apartments`,rent:1650,status:`current`,moveIn:`2024-12-01`,leaseEnd:`2026-11-30`,balance:0,phone:`(904) 555-0107`,email:`dkim@email.com`},{id:8,name:`Nicole Johnson`,unit:`4B`,property:`Riverside Apartments`,rent:1650,status:`current`,moveIn:`2024-11-01`,leaseEnd:`2026-10-31`,balance:0,phone:`(904) 555-0108`,email:`njohnson@email.com`},{id:9,name:`Marcus Thompson`,unit:`5A`,property:`Riverside Apartments`,rent:1400,status:`current`,moveIn:`2025-01-01`,leaseEnd:`2026-12-31`,balance:0,phone:`(904) 555-0109`,email:`mthompson@email.com`},{id:10,name:`Laura Garcia`,unit:`5B`,property:`Riverside Apartments`,rent:1400,status:`renewal`,moveIn:`2024-04-01`,leaseEnd:`2026-03-31`,balance:0,phone:`(904) 555-0110`,email:`lgarcia@email.com`,flag:`lease expires in 40 days`},{id:11,name:`Tyler Brown`,unit:`6B`,property:`Riverside Apartments`,rent:1e3,status:`current`,moveIn:`2024-09-01`,leaseEnd:`2026-08-31`,balance:0,phone:`(904) 555-0111`,email:`tbrown@email.com`},{id:12,name:`James Lopez`,unit:`TH-1`,property:`San Marco Townhomes`,rent:1700,status:`renewal`,moveIn:`2024-03-15`,leaseEnd:`2026-03-15`,balance:0,phone:`(904) 555-0112`,email:`jlopez@email.com`,flag:`renewal due`},{id:13,name:`Sarah Mitchell`,unit:`TH-2`,property:`San Marco Townhomes`,rent:1700,status:`current`,moveIn:`2024-10-01`,leaseEnd:`2026-09-30`,balance:0,phone:`(904) 555-0113`,email:`smitchell@email.com`},{id:14,name:`Chris Adams`,unit:`TH-3`,property:`San Marco Townhomes`,rent:1500,status:`current`,moveIn:`2024-08-01`,leaseEnd:`2026-07-31`,balance:0,phone:`(904) 555-0114`,email:`cadams@email.com`},{id:15,name:`Amanda White`,unit:`TH-4`,property:`San Marco Townhomes`,rent:1500,status:`current`,moveIn:`2024-07-01`,leaseEnd:`2026-06-30`,balance:0,phone:`(904) 555-0115`,email:`awhite@email.com`},{id:16,name:`Derek Williams`,unit:`TH-5`,property:`San Marco Townhomes`,rent:1900,status:`current`,moveIn:`2025-01-01`,leaseEnd:`2026-12-31`,balance:0,phone:`(904) 555-0116`,email:`dwilliams@email.com`},{id:17,name:`Patricia Lee`,unit:`TH-6`,property:`San Marco Townhomes`,rent:1900,status:`current`,moveIn:`2024-12-01`,leaseEnd:`2026-11-30`,balance:0,phone:`(904) 555-0117`,email:`plee@email.com`},{id:18,name:`Mike Reynolds`,unit:`A`,property:`Beach Cottages`,rent:1600,status:`current`,moveIn:`2024-06-01`,leaseEnd:`2026-05-31`,balance:0,phone:`(904) 555-0118`,email:`mreynolds@email.com`},{id:19,name:`Jessica Wang`,unit:`B`,property:`Beach Cottages`,rent:1600,status:`current`,moveIn:`2024-09-01`,leaseEnd:`2026-08-31`,balance:0,phone:`(904) 555-0119`,email:`jwang@email.com`},{id:20,name:`Brian Foster`,unit:`C`,property:`Beach Cottages`,rent:1900,status:`current`,moveIn:`2024-11-01`,leaseEnd:`2026-10-31`,balance:0,phone:`(904) 555-0120`,email:`bfoster@email.com`},{id:21,name:`Robert Chang`,unit:`A`,property:`Mandarin Duplex`,rent:1800,status:`current`,moveIn:`2024-07-01`,leaseEnd:`2026-06-30`,balance:0,phone:`(904) 555-0121`,email:`rchang@email.com`},{id:22,name:`Elena Vasquez`,unit:`B`,property:`Mandarin Duplex`,rent:1700,status:`current`,moveIn:`2024-10-01`,leaseEnd:`2026-09-30`,balance:0,phone:`(904) 555-0122`,email:`evasquez@email.com`},{id:23,name:`Angela Davis`,unit:`1`,property:`Southside Flats`,rent:1200,status:`current`,moveIn:`2024-05-01`,leaseEnd:`2026-04-30`,balance:0,phone:`(904) 555-0123`,email:`adavis@email.com`},{id:24,name:`Steven Clark`,unit:`2`,property:`Southside Flats`,rent:1200,status:`current`,moveIn:`2024-08-01`,leaseEnd:`2026-07-31`,balance:0,phone:`(904) 555-0124`,email:`sclark@email.com`}],sx={current:{background:`#dcfce7`,color:`#16a34a`},late:{background:`#fee2e2`,color:`#dc2626`},renewal:{background:`#fef3c7`,color:`#d97706`}};function cx(){let[e,t]=(0,_.useState)(``),[n,r]=(0,_.useState)(`all`),[i,a]=(0,_.useState)(null);function o(e){window.dispatchEvent(new CustomEvent(`ta:chatPrompt`,{detail:{message:e}}))}let s=ox.length,c=ox.filter(e=>e.status===`current`).length,l=ox.filter(e=>e.status===`late`).length,u=new Date(`2026-02-19`),d=new Date(u);d.setDate(d.getDate()+60);let f=ox.filter(e=>{if(e.status===`renewal`)return!0;let t=new Date(e.leaseEnd);return t<=d&&t>=u&&e.status!==`late`}).length,p=ox.filter(t=>{if(e){let n=e.toLowerCase();if(!t.name.toLowerCase().includes(n)&&!t.property.toLowerCase().includes(n)&&!t.unit.toLowerCase().includes(n))return!1}if(n===`current`&&t.status!==`current`||n===`late`&&t.status!==`late`)return!1;if(n===`renewal`){let e=t.status===`renewal`,n=new Date(t.leaseEnd),r=n<=d&&n>=u&&t.status!==`late`;if(!e&&!r)return!1}return!0}),m=e=>({padding:`8px 16px`,borderRadius:`9999px`,border:e?`none`:`1px solid var(--line)`,background:e?`#7c3aed`:`transparent`,color:e?`#fff`:`inherit`,fontSize:`13px`,fontWeight:600,cursor:`pointer`});return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Tenants`}),(0,$.jsxs)(`p`,{className:`subtle`,children:[s,` tenants across 5 properties`]})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>o(`Give me a tenant management summary. Who needs attention, any upcoming renewals, and any outstanding balances?`),style:{background:`linear-gradient(135deg, #7c3aed, #6d28d9)`,color:`white`,border:`none`},children:`AI Tenant Summary`})]}),(0,$.jsxs)(`div`,{className:`kpiRow`,children:[(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Total Tenants`}),(0,$.jsx)(`div`,{className:`kpiValue`,style:{color:`#2563eb`},children:s})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Current`}),(0,$.jsx)(`div`,{className:`kpiValue`,style:{color:`#16a34a`},children:c})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Late`}),(0,$.jsx)(`div`,{className:`kpiValue`,style:{color:`#dc2626`},children:l})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Renewal Due`}),(0,$.jsx)(`div`,{className:`kpiValue`,style:{color:`#d97706`},children:f})]})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`12px`,marginBottom:`16px`,flexWrap:`wrap`,alignItems:`center`},children:[(0,$.jsx)(`input`,{type:`text`,placeholder:`Search by name, property, or unit...`,value:e,onChange:e=>t(e.target.value),style:{flex:1,minWidth:`220px`,maxWidth:`400px`,padding:`10px 16px`,borderRadius:`12px`,border:`1px solid var(--line)`,fontSize:`14px`}}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`},children:[(0,$.jsx)(`button`,{style:m(n===`all`),onClick:()=>r(`all`),children:`All`}),(0,$.jsx)(`button`,{style:m(n===`current`),onClick:()=>r(`current`),children:`Current`}),(0,$.jsx)(`button`,{style:m(n===`late`),onClick:()=>r(`late`),children:`Late`}),(0,$.jsx)(`button`,{style:m(n===`renewal`),onClick:()=>r(`renewal`),children:`Renewal Due`})]})]}),(0,$.jsx)(`div`,{className:`card`,children:(0,$.jsx)(`div`,{className:`tableWrap`,children:(0,$.jsxs)(`table`,{className:`table`,style:{width:`100%`},children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{children:`Name`}),(0,$.jsx)(`th`,{children:`Unit`}),(0,$.jsx)(`th`,{children:`Property`}),(0,$.jsx)(`th`,{children:`Rent`}),(0,$.jsx)(`th`,{children:`Status`}),(0,$.jsx)(`th`,{children:`Lease End`}),(0,$.jsx)(`th`,{children:`Balance`}),(0,$.jsx)(`th`,{children:`Flag`}),(0,$.jsx)(`th`,{children:`Actions`})]})}),(0,$.jsx)(`tbody`,{children:p.map(e=>{let t=sx[e.status]||sx.current,n=i===e.id;return(0,$.jsxs)(_.Fragment,{children:[(0,$.jsxs)(`tr`,{style:{cursor:`pointer`},onClick:()=>a(n?null:e.id),children:[(0,$.jsx)(`td`,{className:`tdStrong`,children:e.name}),(0,$.jsx)(`td`,{children:e.unit}),(0,$.jsx)(`td`,{children:e.property}),(0,$.jsxs)(`td`,{children:[`$`,e.rent.toLocaleString()]}),(0,$.jsx)(`td`,{children:(0,$.jsx)(`span`,{style:{fontSize:`11px`,fontWeight:600,padding:`3px 10px`,borderRadius:`9999px`,background:t.background,color:t.color,textTransform:`capitalize`},children:e.status})}),(0,$.jsx)(`td`,{children:new Date(e.leaseEnd).toLocaleDateString(`en-US`,{month:`short`,day:`numeric`,year:`numeric`})}),(0,$.jsx)(`td`,{style:{color:e.balance>0?`#dc2626`:`inherit`,fontWeight:e.balance>0?700:400},children:e.balance>0?`$${e.balance.toLocaleString()}`:`$0`}),(0,$.jsx)(`td`,{children:e.flag?(0,$.jsx)(`span`,{style:{fontSize:`11px`,fontWeight:600,color:`#d97706`},children:e.flag}):(0,$.jsx)(`span`,{style:{color:`#cbd5e1`},children:`--`})}),(0,$.jsx)(`td`,{children:(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`6px`},onClick:e=>e.stopPropagation(),children:[(0,$.jsx)(`button`,{className:`iconBtn`,style:{padding:`5px 10px`,fontSize:`12px`},onClick:()=>o(`Draft a message to ${e.name} at unit ${e.unit}, ${e.property}. Rent: $${e.rent}/mo. Status: ${e.status}.${e.balance>0?` Outstanding balance: $`+e.balance+`.`:``}${e.flag?` Note: `+e.flag+`.`:``}`),children:`Contact`}),(0,$.jsx)(`button`,{className:`iconBtn`,style:{padding:`5px 10px`,fontSize:`12px`},onClick:()=>alert(`Lease details for ${e.name}\nUnit: ${e.unit}, ${e.property}\nLease: ${e.moveIn} to ${e.leaseEnd}\nRent: $${e.rent}/mo`),children:`View Lease`})]})})]}),n&&(0,$.jsx)(`tr`,{children:(0,$.jsx)(`td`,{colSpan:9,style:{padding:0},children:(0,$.jsxs)(`div`,{style:{background:`#f8fafc`,padding:`16px 24px`,borderTop:`1px solid var(--line)`,display:`grid`,gridTemplateColumns:`1fr 1fr 1fr 1fr`,gap:`16px`,fontSize:`13px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{color:`#64748b`,marginBottom:`4px`},children:`Email`}),(0,$.jsx)(`div`,{style:{fontWeight:600},children:e.email})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{color:`#64748b`,marginBottom:`4px`},children:`Phone`}),(0,$.jsx)(`div`,{style:{fontWeight:600},children:e.phone})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{color:`#64748b`,marginBottom:`4px`},children:`Move-in Date`}),(0,$.jsx)(`div`,{style:{fontWeight:600},children:new Date(e.moveIn).toLocaleDateString(`en-US`,{month:`long`,day:`numeric`,year:`numeric`})})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{color:`#64748b`,marginBottom:`4px`},children:`Lease End`}),(0,$.jsx)(`div`,{style:{fontWeight:600},children:new Date(e.leaseEnd).toLocaleDateString(`en-US`,{month:`long`,day:`numeric`,year:`numeric`})})]})]})})})]},e.id)})})]})})})]})}var lx=[{id:1,title:`Water Heater Replacement`,property:`Riverside Apartments`,unit:`1A`,tenant:`Maria Santos`,priority:`emergency`,status:`in-progress`,created:`2026-02-14`,vendor:`ABC Plumbing`,cost:1200,description:`No hot water. Water heater leaking. Emergency dispatch.`,flag:`5 days overdue`,photos:2},{id:2,title:`Garbage Disposal Repair`,property:`San Marco Townhomes`,unit:`TH-3`,tenant:`Chris Adams`,priority:`medium`,status:`new`,created:`2026-02-18`,vendor:null,cost:null,description:`Disposal jammed and making grinding noise.`,photos:1},{id:3,title:`HVAC Filter Change`,property:`Beach Cottages`,unit:`C`,tenant:`Brian Foster`,priority:`low`,status:`complete`,created:`2026-02-10`,vendor:`Cool Air HVAC`,cost:85,description:`Quarterly filter replacement. Completed Feb 15.`,photos:0},{id:4,title:`Toilet Running`,property:`Riverside Apartments`,unit:`4B`,tenant:`Nicole Johnson`,priority:`medium`,status:`new`,created:`2026-02-17`,vendor:null,cost:null,description:`Toilet in master bath runs continuously.`,photos:0},{id:5,title:`Broken Window Lock`,property:`Southside Flats`,unit:`1`,tenant:`Angela Davis`,priority:`high`,status:`waiting-vendor`,created:`2026-02-15`,vendor:`SecureAll Windows`,cost:250,description:`Bedroom window lock broken. Security concern.`,scheduledDate:`2026-02-21`,photos:1},{id:6,title:`Parking Lot Light Out`,property:`Riverside Apartments`,unit:`Common`,tenant:null,priority:`medium`,status:`in-progress`,created:`2026-02-16`,vendor:`BrightStar Electric`,cost:175,description:`Light pole #3 in parking lot not functioning.`,photos:0},{id:7,title:`Roof Leak - Unit 2B`,property:`Riverside Apartments`,unit:`2B`,tenant:`Ashley Torres`,priority:`high`,status:`waiting-vendor`,created:`2026-02-13`,vendor:`TopNotch Roofing`,cost:800,description:`Ceiling stain growing in bedroom. Roof inspection scheduled.`,scheduledDate:`2026-02-22`,photos:3}],ux={emergency:{background:`#fee2e2`,color:`#dc2626`},high:{background:`#fff7ed`,color:`#d97706`},medium:{background:`#fef3c7`,color:`#92400e`},low:{background:`#f0fdf4`,color:`#16a34a`}},dx=[{key:`new`,label:`New`,color:`#2563eb`},{key:`in-progress`,label:`In Progress`,color:`#7c3aed`},{key:`waiting-vendor`,label:`Waiting on Vendor`,color:`#d97706`},{key:`complete`,label:`Complete`,color:`#16a34a`}];function fx(e){let t=new Date(`2026-02-19`),n=new Date(e);return Math.floor((t-n)/(1e3*60*60*24))}function px(){let[e,t]=(0,_.useState)(null);function n(e){window.dispatchEvent(new CustomEvent(`ta:chatPrompt`,{detail:{message:e}}))}let r=lx.filter(e=>e.status!==`complete`).length,i=lx.filter(e=>e.priority===`emergency`).length,a=lx.filter(e=>e.flag&&e.flag.includes(`overdue`)).length;return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Maintenance`}),(0,$.jsxs)(`p`,{className:`subtle`,children:[lx.length,` requests -- `,r,` open`]})]}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>n(`Give me a maintenance priority report. What needs immediate attention, what is overdue, and vendor follow-ups needed?`),style:{background:`linear-gradient(135deg, #7c3aed, #6d28d9)`,color:`white`,border:`none`},children:`AI Maintenance Report`})]}),(0,$.jsxs)(`div`,{className:`kpiRow`,children:[(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Open Requests`}),(0,$.jsx)(`div`,{className:`kpiValue`,style:{color:`#2563eb`},children:r})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Emergency`}),(0,$.jsx)(`div`,{className:`kpiValue`,style:{color:`#dc2626`},children:i})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Avg Response Time`}),(0,$.jsx)(`div`,{className:`kpiValue`,style:{color:`#7c3aed`},children:`1.2 days`})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Overdue`}),(0,$.jsx)(`div`,{className:`kpiValue`,style:{color:`#d97706`},children:a})]})]}),(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(4, 1fr)`,gap:`16px`,alignItems:`start`},children:dx.map(r=>{let i=lx.filter(e=>e.status===r.key);return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`,marginBottom:`12px`,padding:`0 4px`},children:[(0,$.jsx)(`div`,{style:{width:`10px`,height:`10px`,borderRadius:`50%`,background:r.color}}),(0,$.jsx)(`span`,{style:{fontWeight:700,fontSize:`14px`},children:r.label}),(0,$.jsx)(`span`,{style:{fontSize:`12px`,fontWeight:600,color:`#64748b`,background:`#f1f5f9`,borderRadius:`9999px`,padding:`2px 8px`},children:i.length})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`12px`},children:[i.map(r=>{let i=ux[r.priority]||ux.medium,a=r.flag&&r.flag.includes(`overdue`),o=e===r.id,s=fx(r.created);return(0,$.jsxs)(`div`,{className:`card`,style:{cursor:`pointer`,border:a?`2px solid #dc2626`:void 0,padding:`16px`},onClick:()=>t(o?null:r.id),children:[a&&(0,$.jsx)(`div`,{style:{fontSize:`10px`,fontWeight:700,color:`#dc2626`,textTransform:`uppercase`,letterSpacing:`0.05em`,marginBottom:`6px`},children:`OVERDUE`}),(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`14px`,marginBottom:`8px`,lineHeight:1.3},children:r.title}),(0,$.jsxs)(`div`,{style:{fontSize:`12px`,color:`#64748b`,marginBottom:`6px`},children:[r.property,` -- `,r.unit]}),r.tenant&&(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#475569`,marginBottom:`8px`},children:r.tenant}),(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`8px`,marginBottom:`8px`,flexWrap:`wrap`},children:[(0,$.jsx)(`span`,{style:{fontSize:`10px`,fontWeight:700,padding:`3px 8px`,borderRadius:`9999px`,background:i.background,color:i.color,textTransform:`uppercase`},children:r.priority}),(0,$.jsxs)(`span`,{style:{fontSize:`11px`,color:`#94a3b8`},children:[s,` day`,s===1?``:`s`,` open`]})]}),r.vendor&&(0,$.jsxs)(`div`,{style:{fontSize:`12px`,color:`#475569`,marginBottom:`4px`},children:[`Vendor: `,r.vendor]}),r.cost!=null&&(0,$.jsxs)(`div`,{style:{fontSize:`12px`,color:`#475569`},children:[`Est. $`,r.cost.toLocaleString()]}),(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`4px`,marginTop:`6px`,fontSize:`11px`,color:r.photos>0?`#475569`:`#94a3b8`},children:[(0,$.jsxs)(`svg`,{width:`14`,height:`14`,viewBox:`0 0 24 24`,fill:`none`,stroke:r.photos>0?`#475569`:`#cbd5e1`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,$.jsx)(`rect`,{x:`3`,y:`3`,width:`18`,height:`18`,rx:`2`,ry:`2`}),(0,$.jsx)(`circle`,{cx:`8.5`,cy:`8.5`,r:`1.5`}),(0,$.jsx)(`polyline`,{points:`21 15 16 10 5 21`})]}),r.photos>0?`${r.photos} photo${r.photos===1?``:`s`}`:`No photos`]}),o&&(0,$.jsxs)(`div`,{style:{marginTop:`12px`,paddingTop:`12px`,borderTop:`1px solid var(--line)`,fontSize:`13px`},children:[(0,$.jsxs)(`div`,{style:{marginBottom:`8px`},children:[(0,$.jsx)(`div`,{style:{color:`#64748b`,marginBottom:`2px`},children:`Description`}),(0,$.jsx)(`div`,{style:{lineHeight:1.5},children:r.description})]}),r.vendor&&(0,$.jsxs)(`div`,{style:{marginBottom:`8px`},children:[(0,$.jsx)(`div`,{style:{color:`#64748b`,marginBottom:`2px`},children:`Vendor`}),(0,$.jsx)(`div`,{style:{fontWeight:600},children:r.vendor})]}),r.cost!=null&&(0,$.jsxs)(`div`,{style:{marginBottom:`8px`},children:[(0,$.jsx)(`div`,{style:{color:`#64748b`,marginBottom:`2px`},children:`Cost Estimate`}),(0,$.jsxs)(`div`,{style:{fontWeight:600},children:[`$`,r.cost.toLocaleString()]})]}),(0,$.jsxs)(`div`,{style:{marginBottom:`8px`},children:[(0,$.jsx)(`div`,{style:{color:`#64748b`,marginBottom:`2px`},children:`Created`}),(0,$.jsx)(`div`,{children:new Date(r.created).toLocaleDateString(`en-US`,{month:`long`,day:`numeric`,year:`numeric`})})]}),r.scheduledDate&&(0,$.jsxs)(`div`,{style:{marginBottom:`8px`},children:[(0,$.jsx)(`div`,{style:{color:`#64748b`,marginBottom:`2px`},children:`Scheduled Date`}),(0,$.jsx)(`div`,{style:{fontWeight:600},children:new Date(r.scheduledDate).toLocaleDateString(`en-US`,{month:`long`,day:`numeric`,year:`numeric`})})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`,marginTop:`12px`},onClick:e=>e.stopPropagation(),children:[r.status===`new`&&(0,$.jsx)(`button`,{className:`iconBtn`,style:{padding:`6px 12px`,fontSize:`12px`,background:`linear-gradient(135deg, #7c3aed, #6d28d9)`,color:`white`,border:`none`},onClick:()=>n(`Dispatch a vendor for maintenance request: "${r.title}" at ${r.property} unit ${r.unit}. ${r.description} Priority: ${r.priority}.`),children:`AI: Dispatch vendor`}),(r.status===`in-progress`||r.status===`waiting-vendor`)&&(0,$.jsx)(`button`,{className:`iconBtn`,style:{padding:`6px 12px`,fontSize:`12px`,background:`linear-gradient(135deg, #7c3aed, #6d28d9)`,color:`white`,border:`none`},onClick:()=>n(`Follow up on maintenance request: "${r.title}" at ${r.property} unit ${r.unit}. Vendor: ${r.vendor||`unassigned`}. Status: ${r.status}. ${r.flag?`Note: `+r.flag+`.`:``} Days open: ${fx(r.created)}.`),children:`AI: Follow up`})]})]})]},r.id)}),i.length===0&&(0,$.jsx)(`div`,{style:{padding:`24px`,textAlign:`center`,color:`#94a3b8`,fontSize:`13px`,border:`2px dashed #e2e8f0`,borderRadius:`12px`},children:`No requests`})]})]},r.key)})})]})}var mx=[{id:1,name:`567 Mandarin Rd  Executive Home`,type:`listing`,status:`active`,budget:500,spent:312,leads:8,channels:[{name:`Zillow`,status:`active`,impressions:2400,clicks:45,leads:3},{name:`Realtor.com`,status:`active`,impressions:1800,clicks:32,leads:2},{name:`Facebook`,status:`active`,impressions:5200,clicks:89,leads:2},{name:`Yard Sign`,status:`active`,impressions:null,clicks:null,leads:1}],startDate:`2026-02-11`},{id:2,name:`Southside Flats Unit 3  Vacancy`,type:`vacancy`,status:`active`,budget:200,spent:145,leads:3,channels:[{name:`Apartments.com`,status:`active`,impressions:890,clicks:22,leads:1},{name:`Zillow Rentals`,status:`active`,impressions:1200,clicks:34,leads:1},{name:`Facebook Marketplace`,status:`active`,impressions:3100,clicks:56,leads:1}],startDate:`2026-02-05`},{id:3,name:`Spring Open House Series`,type:`event`,status:`scheduled`,budget:300,spent:0,leads:0,channels:[{name:`Facebook Event`,status:`scheduled`,impressions:null,clicks:null,leads:0},{name:`Email Blast`,status:`draft`,impressions:null,clicks:null,leads:0},{name:`Direct Mail`,status:`pending`,impressions:null,clicks:null,leads:0}],startDate:`2026-03-08`}],hx=[{channel:`Zillow`,leads:12,cost:450,conversionRate:4.2},{channel:`Realtor.com`,leads:8,cost:320,conversionRate:3.1},{channel:`Facebook/Instagram`,leads:15,cost:280,conversionRate:2.8},{channel:`Google Ads`,leads:6,cost:520,conversionRate:1.9},{channel:`Direct Mail`,leads:3,cost:180,conversionRate:1.2},{channel:`Yard Signs`,leads:4,cost:60,conversionRate:null}],gx=[{source:`Zillow`,count:12,pct:25},{source:`Facebook`,count:15,pct:31},{source:`Realtor.com`,count:8,pct:17},{source:`Google`,count:6,pct:13},{source:`Referral`,count:3,pct:6},{source:`Walk-in/Sign`,count:4,pct:8}],_x=[{id:1,platform:`Instagram`,content:`Just listed: 567 Mandarin Rd  5BR executive home with pool`,scheduledDate:`2026-02-20`,status:`scheduled`},{id:2,platform:`Facebook`,content:`Open house this Saturday at 1247 Palm Ave  San Marco charmer`,scheduledDate:`2026-02-21`,status:`scheduled`},{id:3,platform:`LinkedIn`,content:`Market update: Jacksonville median home price up 4.2% YoY`,scheduledDate:`2026-02-22`,status:`draft`}],vx={listing:{background:`#dcfce7`,color:`#16a34a`},vacancy:{background:`#dbeafe`,color:`#2563eb`},event:{background:`#f3e8ff`,color:`#7c3aed`}},yx={active:{background:`#dcfce7`,color:`#16a34a`},scheduled:{background:`#fef3c7`,color:`#92400e`},draft:{background:`#f1f5f9`,color:`#64748b`},pending:{background:`#f1f5f9`,color:`#64748b`}},bx=[`#7c3aed`,`#2563eb`,`#16a34a`,`#d97706`,`#dc2626`,`#64748b`],xx=[{listing:`567 Mandarin Rd`,platforms:[{name:`Zillow`,active:!0},{name:`Realtor.com`,active:!0},{name:`Redfin`,active:!0},{name:`MLS`,active:!0},{name:`Trulia`,active:!1}]},{listing:`892 Riverside Dr #4B`,platforms:[{name:`Zillow`,active:!0},{name:`Realtor.com`,active:!0},{name:`Redfin`,active:!1},{name:`MLS`,active:!0},{name:`Trulia`,active:!0}]},{listing:`7891 Baymeadows Rd`,platforms:[{name:`Zillow`,active:!0},{name:`Realtor.com`,active:!0},{name:`Redfin`,active:!0},{name:`MLS`,active:!0},{name:`Trulia`,active:!0}]},{listing:`Southside Flats Unit 3`,platforms:[{name:`Apartments.com`,active:!0},{name:`Zillow Rentals`,active:!0},{name:`Facebook Marketplace`,active:!0},{name:`Craigslist`,active:!1},{name:`HotPads`,active:!0}]}];function Sx(){let[e,t]=(0,_.useState)(null);function n(e){window.dispatchEvent(new CustomEvent(`ta:chatPrompt`,{detail:{message:e}}))}let r=mx.filter(e=>e.status===`active`).length,i=Math.max(...hx.map(e=>e.leads));return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`pageHeader`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Marketing`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Campaign performance, lead sources, and content calendar`})]}),(0,$.jsx)(`div`,{style:{display:`flex`,gap:`8px`,alignItems:`center`},children:(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>n(`Give me a marketing performance brief. Summarize campaign ROI, top lead sources, cost per lead trends, and recommend where to reallocate ad spend for best results.`),style:{background:`linear-gradient(135deg, #7c3aed, #6d28d9)`,color:`white`,border:`none`},children:`AI Marketing Brief`})})]}),(0,$.jsxs)(`div`,{className:`kpiRow`,style:{marginBottom:`20px`},children:[(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Total Leads`}),(0,$.jsx)(`div`,{className:`kpiValue`,style:{color:`#7c3aed`},children:48})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Ad Spend MTD`}),(0,$.jsxs)(`div`,{className:`kpiValue`,style:{color:`#1e293b`},children:[`$`,1810 .toLocaleString()]})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Cost Per Lead`}),(0,$.jsxs)(`div`,{className:`kpiValue`,style:{color:`#16a34a`},children:[`$`,37.71.toFixed(2)]})]}),(0,$.jsxs)(`div`,{className:`card kpiCard`,children:[(0,$.jsx)(`div`,{className:`kpiLabel`,children:`Active Campaigns`}),(0,$.jsx)(`div`,{className:`kpiValue`,style:{color:`#2563eb`},children:r})]})]}),(0,$.jsxs)(`div`,{style:{marginBottom:`24px`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,style:{marginBottom:`12px`},children:(0,$.jsx)(`span`,{style:{fontWeight:700,fontSize:`15px`,color:`#1e293b`},children:`Campaigns`})}),(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`12px`},children:mx.map(r=>{let i=e===r.id,a=vx[r.type]||vx.listing,o=yx[r.status]||yx.draft,s=r.budget>0?Math.round(r.spent/r.budget*100):0;return(0,$.jsxs)(`div`,{className:`card`,style:{padding:`16px`,cursor:`pointer`},onClick:()=>t(i?null:r.id),children:[(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`flex-start`,marginBottom:`10px`},children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{style:{fontWeight:700,fontSize:`14px`,color:`#1e293b`,marginBottom:`6px`},children:r.name}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`6px`,alignItems:`center`},children:[(0,$.jsx)(`span`,{style:{fontSize:`10px`,fontWeight:700,padding:`2px 8px`,borderRadius:`9999px`,background:a.background,color:a.color,textTransform:`uppercase`},children:r.type}),(0,$.jsx)(`span`,{style:{fontSize:`10px`,fontWeight:700,padding:`2px 8px`,borderRadius:`9999px`,background:o.background,color:o.color,textTransform:`uppercase`},children:r.status})]})]}),(0,$.jsxs)(`div`,{style:{textAlign:`right`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:700,color:`#1e293b`},children:r.leads}),(0,$.jsx)(`div`,{style:{fontSize:`11px`,color:`#94a3b8`},children:`leads`})]})]}),(0,$.jsxs)(`div`,{style:{marginBottom:`8px`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,fontSize:`12px`,marginBottom:`4px`},children:[(0,$.jsxs)(`span`,{style:{color:`#64748b`},children:[`$`,r.spent.toLocaleString(),` of $`,r.budget.toLocaleString(),` budget`]}),(0,$.jsxs)(`span`,{style:{fontWeight:600,color:s>80?`#d97706`:`#64748b`},children:[s,`%`]})]}),(0,$.jsx)(`div`,{style:{width:`100%`,height:`6px`,background:`#f1f5f9`,borderRadius:`3px`,overflow:`hidden`},children:(0,$.jsx)(`div`,{style:{width:`${Math.min(s,100)}%`,height:`100%`,background:s>90?`#dc2626`:s>70?`#d97706`:`#7c3aed`,borderRadius:`3px`,transition:`width 0.3s`}})})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`,fontSize:`11px`,color:`#94a3b8`},children:[(0,$.jsxs)(`span`,{children:[r.channels.length,` channels`]}),(0,$.jsxs)(`span`,{children:[`Started `,new Date(r.startDate).toLocaleDateString(`en-US`,{month:`short`,day:`numeric`})]})]}),i&&(0,$.jsxs)(`div`,{style:{marginTop:`14px`,paddingTop:`14px`,borderTop:`1px solid var(--line)`},children:[(0,$.jsx)(`div`,{className:`tableWrap`,children:(0,$.jsxs)(`table`,{className:`table`,style:{fontSize:`12px`},children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{children:`Channel`}),(0,$.jsx)(`th`,{children:`Status`}),(0,$.jsx)(`th`,{children:`Impressions`}),(0,$.jsx)(`th`,{children:`Clicks`}),(0,$.jsx)(`th`,{children:`Leads`})]})}),(0,$.jsx)(`tbody`,{children:r.channels.map((e,t)=>{let n=yx[e.status]||yx.draft;return(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`td`,{style:{fontWeight:600},children:e.name}),(0,$.jsx)(`td`,{children:(0,$.jsx)(`span`,{style:{fontSize:`10px`,fontWeight:600,padding:`2px 6px`,borderRadius:`9999px`,background:n.background,color:n.color,textTransform:`uppercase`},children:e.status})}),(0,$.jsx)(`td`,{children:e.impressions==null?`--`:e.impressions.toLocaleString()}),(0,$.jsx)(`td`,{children:e.clicks==null?`--`:e.clicks}),(0,$.jsx)(`td`,{style:{fontWeight:600},children:e.leads})]},t)})})]})}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`,marginTop:`12px`},onClick:e=>e.stopPropagation(),children:[(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>n(`Analyze campaign "${r.name}". Budget: $${r.budget}, spent: $${r.spent}, leads: ${r.leads}. Channels: ${r.channels.map(e=>e.name+` (`+e.leads+` leads)`).join(`, `)}. What is working, what should I change, and how can I improve cost per lead?`),style:{padding:`6px 12px`,fontSize:`12px`,background:`linear-gradient(135deg, #7c3aed, #6d28d9)`,color:`white`,border:`none`},children:`AI: Analyze Campaign`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>n(`Suggest ad copy and creative ideas for campaign "${r.name}". Campaign type: ${r.type}. Current channels: ${r.channels.map(e=>e.name).join(`, `)}.`),style:{padding:`6px 12px`,fontSize:`12px`,background:`#f1f5f9`,color:`#475569`,border:`none`},children:`AI: Write Ad Copy`})]})]})]},r.id)})})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`16px`,marginBottom:`24px`},children:[(0,$.jsxs)(`div`,{className:`card`,style:{padding:`16px`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,style:{marginBottom:`14px`},children:(0,$.jsx)(`span`,{style:{fontWeight:700,fontSize:`14px`,color:`#1e293b`},children:`Channel Performance`})}),(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`10px`},children:hx.map((e,t)=>{let n=i>0?Math.round(e.leads/i*100):0,r=e.leads>0?(e.cost/e.leads).toFixed(0):`--`;return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,fontSize:`12px`,marginBottom:`3px`},children:[(0,$.jsx)(`span`,{style:{fontWeight:600,color:`#1e293b`},children:e.channel}),(0,$.jsxs)(`span`,{style:{color:`#64748b`},children:[e.leads,` leads -- $`,e.cost,` spent -- $`,r,`/lead`]})]}),(0,$.jsx)(`div`,{style:{width:`100%`,height:`8px`,background:`#f1f5f9`,borderRadius:`4px`,overflow:`hidden`},children:(0,$.jsx)(`div`,{style:{width:`${n}%`,height:`100%`,background:bx[t%bx.length],borderRadius:`4px`,transition:`width 0.3s`}})}),e.conversionRate!=null&&(0,$.jsxs)(`div`,{style:{fontSize:`11px`,color:`#94a3b8`,marginTop:`2px`},children:[e.conversionRate,`% conversion rate`]})]},t)})})]}),(0,$.jsxs)(`div`,{className:`card`,style:{padding:`16px`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,style:{marginBottom:`14px`},children:(0,$.jsx)(`span`,{style:{fontWeight:700,fontSize:`14px`,color:`#1e293b`},children:`Lead Source Attribution`})}),(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`10px`},children:gx.map((e,t)=>(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,fontSize:`12px`,marginBottom:`3px`},children:[(0,$.jsx)(`span`,{style:{fontWeight:600,color:`#1e293b`},children:e.source}),(0,$.jsxs)(`span`,{style:{color:`#64748b`},children:[e.count,` leads (`,e.pct,`%)`]})]}),(0,$.jsx)(`div`,{style:{width:`100%`,height:`8px`,background:`#f1f5f9`,borderRadius:`4px`,overflow:`hidden`},children:(0,$.jsx)(`div`,{style:{width:`${e.pct}%`,height:`100%`,background:bx[t%bx.length],borderRadius:`4px`,transition:`width 0.3s`}})})]},t))})]})]}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr`,gap:`16px`},children:[(0,$.jsxs)(`div`,{className:`card`,style:{padding:`16px`},children:[(0,$.jsxs)(`div`,{className:`cardHeader`,style:{marginBottom:`14px`,display:`flex`,justifyContent:`space-between`,alignItems:`center`},children:[(0,$.jsx)(`span`,{style:{fontWeight:700,fontSize:`14px`,color:`#1e293b`},children:`Social Media Queue`}),(0,$.jsx)(`button`,{className:`iconBtn`,onClick:()=>n(`Draft 3 social media posts for my real estate listings. Include one for Instagram, one for Facebook, and one market update for LinkedIn. Keep them professional and engaging.`),style:{padding:`4px 10px`,fontSize:`11px`,background:`#f1f5f9`,color:`#475569`,border:`none`},children:`AI: Draft Posts`})]}),(0,$.jsx)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`10px`},children:_x.map(e=>{let t=yx[e.status]||yx.draft;return(0,$.jsxs)(`div`,{style:{padding:`10px`,background:`#fafafa`,borderRadius:`8px`,border:`1px solid #f1f5f9`},children:[(0,$.jsxs)(`div`,{style:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,marginBottom:`6px`},children:[(0,$.jsx)(`span`,{style:{fontSize:`12px`,fontWeight:700,color:`#1e293b`},children:e.platform}),(0,$.jsx)(`span`,{style:{fontSize:`10px`,fontWeight:600,padding:`2px 6px`,borderRadius:`9999px`,background:t.background,color:t.color,textTransform:`uppercase`},children:e.status})]}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,color:`#475569`,lineHeight:1.4,marginBottom:`4px`},children:e.content}),(0,$.jsx)(`div`,{style:{fontSize:`11px`,color:`#94a3b8`},children:new Date(e.scheduledDate).toLocaleDateString(`en-US`,{weekday:`short`,month:`short`,day:`numeric`})})]},e.id)})})]}),(0,$.jsxs)(`div`,{className:`card`,style:{padding:`16px`},children:[(0,$.jsx)(`div`,{className:`cardHeader`,style:{marginBottom:`14px`},children:(0,$.jsx)(`span`,{style:{fontWeight:700,fontSize:`14px`,color:`#1e293b`},children:`Syndication Status`})}),(0,$.jsx)(`div`,{className:`tableWrap`,children:(0,$.jsxs)(`table`,{className:`table`,style:{fontSize:`12px`},children:[(0,$.jsx)(`thead`,{children:(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`th`,{children:`Listing`}),xx[0].platforms.map(e=>(0,$.jsx)(`th`,{style:{textAlign:`center`},children:e.name},e.name))]})}),(0,$.jsx)(`tbody`,{children:xx.map((e,t)=>(0,$.jsxs)(`tr`,{children:[(0,$.jsx)(`td`,{style:{fontWeight:600,whiteSpace:`nowrap`},children:e.listing}),e.platforms.map((e,t)=>(0,$.jsx)(`td`,{style:{textAlign:`center`},children:(0,$.jsx)(`span`,{style:{display:`inline-block`,width:`10px`,height:`10px`,borderRadius:`50%`,background:e.active?`#16a34a`:`#e2e8f0`}})},t))]},t))})]})})]})]})]})}var Cx=`
@keyframes spinKey {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
`;function wx(){let e=Ts(),t=ig(),[n,r]=(0,_.useState)(null),[i,a]=(0,_.useState)(null),[o,s]=(0,_.useState)(!0),[c,l]=(0,_.useState)(!1),[u,d]=(0,_.useState)(``);(0,_.useEffect)(()=>{let e=document.createElement(`style`);return e.textContent=Cx,document.head.appendChild(e),()=>{document.head.removeChild(e)}},[]),(0,_.useEffect)(()=>{try{let e=sessionStorage.getItem(`ta_discovered_context`);if(e){let t=JSON.parse(e);t.businessName?d(t.businessName):t.name&&d(t.name)}}catch{}!u&&e.currentUser?.displayName&&d(e.currentUser.displayName),f()},[]);async function f(){s(!0);try{let n=e.currentUser;if(!n){s(!1);return}let i=await r_(Bg(Qh(t,`workers`),Hg(`creator_id`,`==`,n.uid)));if(!i.empty){let e=i.docs[0];r(e.data()),a(e.id)}}catch(e){console.error(`Failed to load worker document:`,e)}finally{s(!1)}}async function p(){if(i){l(!0);try{await i_($h(t,`workers`,i),{published:!0}),window.dispatchEvent(new CustomEvent(`ta:navigate`,{detail:{section:`dashboard`}}))}catch(e){console.error(`Failed to publish worker:`,e),l(!1)}}}function m(){window.dispatchEvent(new CustomEvent(`ta:navigate`,{detail:{section:`creator-dashboard`}}))}function h(){console.log(`[WorkerPreview] Preview subscriber view for worker:`,i,n)}if(o||!n)return(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`pageHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Worker Preview`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Preparing your workspace`})]})}),(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,alignItems:`center`,justifyContent:`center`,padding:`80px 24px`,background:`white`,borderRadius:`16px`,border:`1px solid #e2e8f0`},children:[(0,$.jsxs)(`svg`,{width:`40`,height:`40`,viewBox:`0 0 200 200`,fill:`none`,style:{animation:`spinKey 1.5s ease-in-out infinite`},children:[(0,$.jsx)(`circle`,{cx:`100`,cy:`100`,r:`95`,fill:`#7c3aed`}),(0,$.jsx)(`circle`,{cx:`100`,cy:`100`,r:`80`,fill:`#7c3aed`,stroke:`white`,strokeWidth:`2`}),(0,$.jsx)(`circle`,{cx:`100`,cy:`80`,r:`18`,fill:`white`}),(0,$.jsx)(`circle`,{cx:`100`,cy:`80`,r:`8`,fill:`#7c3aed`}),(0,$.jsx)(`rect`,{x:`94`,y:`90`,width:`12`,height:`35`,fill:`white`})]}),(0,$.jsx)(`div`,{style:{marginTop:`20px`,fontSize:`16px`,fontWeight:600,color:`#1e293b`},children:`Setting up your workspace...`}),(0,$.jsx)(`div`,{style:{marginTop:`6px`,fontSize:`14px`,color:`#64748b`},children:`This usually takes a few seconds.`})]})]});let g=n.name||n.serviceName||`Untitled Service`,v=n.description||``,y=n.stages||n.workflowStages||[],b=n.pricing||{},x=b.price||b.amount||0,S=b.model||b.type||`subscription`,C=b.trialDays||b.trial_days||0;return(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`pageHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Worker Preview`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Review what your AI built before going live`})]})}),(0,$.jsxs)(`div`,{style:{background:`white`,borderRadius:`16px`,border:`1px solid #e2e8f0`,padding:`32px`,maxWidth:`720px`},children:[(0,$.jsxs)(`div`,{style:{fontSize:`20px`,fontWeight:600,color:`#1e293b`,marginBottom:`28px`,lineHeight:1.4},children:[`Here's what I built for you, `,u||`there`,`:`]}),(0,$.jsx)(`div`,{style:{fontSize:`28px`,fontWeight:800,color:`#1e293b`,marginBottom:`12px`,lineHeight:1.2},children:g}),v&&(0,$.jsx)(`div`,{style:{fontSize:`15px`,color:`#475569`,lineHeight:1.7,marginBottom:`28px`},children:v}),y.length>0&&(0,$.jsxs)(`div`,{style:{marginBottom:`28px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:700,color:`#7c3aed`,textTransform:`uppercase`,letterSpacing:`0.06em`,marginBottom:`14px`},children:`Workflow Stages`}),(0,$.jsx)(`ol`,{style:{margin:0,paddingLeft:`20px`,display:`flex`,flexDirection:`column`,gap:`10px`},children:y.map((e,t)=>(0,$.jsx)(`li`,{style:{fontSize:`15px`,color:`#334155`,lineHeight:1.5},children:(0,$.jsx)(`span`,{style:{fontWeight:600},children:typeof e==`string`?e:e.name||e.title||`Stage ${t+1}`})},t))})]}),(0,$.jsxs)(`div`,{style:{padding:`20px`,background:`#faf5ff`,borderRadius:`12px`,border:`1px solid #e9d5ff`,marginBottom:`28px`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:700,color:`#7c3aed`,textTransform:`uppercase`,letterSpacing:`0.06em`,marginBottom:`12px`},children:`Pricing`}),(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`baseline`,gap:`8px`,marginBottom:`8px`},children:[(0,$.jsxs)(`div`,{style:{fontSize:`32px`,fontWeight:900,color:`#1e293b`},children:[`$`,typeof x==`number`?x.toLocaleString():x]}),(0,$.jsxs)(`div`,{style:{fontSize:`14px`,color:`#64748b`},children:[`/ `,S===`per-project`?`project`:`month`]})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`4px`},children:[(0,$.jsxs)(`div`,{style:{fontSize:`14px`,color:`#475569`},children:[`Model: `,(0,$.jsx)(`span`,{style:{fontWeight:600},children:S===`per-project`?`Per Project`:S.charAt(0).toUpperCase()+S.slice(1)})]}),C>0&&(0,$.jsxs)(`div`,{style:{fontSize:`14px`,color:`#475569`},children:[`Trial: `,(0,$.jsxs)(`span`,{style:{fontWeight:600},children:[C,` days free`]})]})]})]}),(0,$.jsx)(`div`,{style:{marginBottom:`32px`},children:(0,$.jsx)(`button`,{onClick:h,style:{background:`none`,border:`none`,padding:0,fontSize:`14px`,fontWeight:600,color:`#7c3aed`,cursor:`pointer`,textDecoration:`underline`,textUnderlineOffset:`3px`},children:`Preview how subscribers will see it`})}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`12px`},children:[(0,$.jsx)(`button`,{onClick:p,disabled:c,style:{flex:1,padding:`14px 24px`,fontSize:`15px`,fontWeight:700,borderRadius:`10px`,border:`none`,cursor:c?`not-allowed`:`pointer`,color:`white`,background:c?`#a78bfa`:`linear-gradient(135deg, #7c3aed, #6d28d9)`,opacity:c?.7:1,transition:`opacity 0.2s`},children:c?`Publishing...`:`Publish to Store`}),(0,$.jsx)(`button`,{onClick:m,style:{flex:1,padding:`14px 24px`,fontSize:`15px`,fontWeight:700,borderRadius:`10px`,border:`2px solid #e2e8f0`,cursor:`pointer`,color:`#475569`,background:`white`,transition:`border-color 0.2s`},children:`Edit First`})]})]})]})}var Tx=[`All`,`Healthcare`,`Real Estate`,`Auto`,`Finance`,`Consulting`,`Other`];function Ex(){let[e,t]=(0,_.useState)([]),[n,r]=(0,_.useState)(!0),[i,a]=(0,_.useState)(``),[o,s]=(0,_.useState)(``),[c,l]=(0,_.useState)(`All`),[u,d]=(0,_.useState)(null);(0,_.useEffect)(()=>{f()},[]);async function f(){r(!0),a(``);try{let e=await r_(Bg(Qh(ig(),`workers`),Hg(`published`,`==`,!0),Gg(`created_at`,`desc`))),n=[];e.forEach(e=>{n.push({id:e.id,...e.data()})}),t(n)}catch(e){console.error(`Failed to load RAAS Store workers:`,e),a(e?.message||String(e))}finally{r(!1)}}function p(e){d(e)}function m(){window.dispatchEvent(new CustomEvent(`ta:navigate`,{detail:{section:`dashboard`}}))}let h=e.filter(e=>{if(!(c===`All`||(e.category||`Other`).toLowerCase()===c.toLowerCase()))return!1;if(!o.trim())return!0;let t=o.toLowerCase(),n=(e.name||``).toLowerCase(),r=(e.description||``).toLowerCase(),i=(e.category||``).toLowerCase();return n.includes(t)||r.includes(t)||i.includes(t)});return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{style:{marginBottom:`28px`},children:[(0,$.jsx)(`h1`,{style:{fontSize:`32px`,fontWeight:800,color:`#1e293b`,margin:`0 0 6px 0`},children:`RAAS Store`}),(0,$.jsx)(`p`,{style:{fontSize:`15px`,color:`#64748b`,margin:0,lineHeight:1.5},children:`AI-powered services built by experts. Subscribe to add them to your workspace.`})]}),(0,$.jsx)(`div`,{style:{marginBottom:`16px`},children:(0,$.jsx)(`input`,{type:`text`,placeholder:`Search by name, description, or category...`,value:o,onChange:e=>s(e.target.value),style:{width:`100%`,padding:`12px 16px`,fontSize:`14px`,borderRadius:`10px`,border:`1px solid #e2e8f0`,outline:`none`,background:`#fff`,color:`#1e293b`,boxSizing:`border-box`}})}),(0,$.jsx)(`div`,{style:{display:`flex`,gap:`8px`,flexWrap:`wrap`,marginBottom:`24px`},children:Tx.map(e=>(0,$.jsx)(`button`,{onClick:()=>l(e),style:{padding:`6px 16px`,fontSize:`13px`,fontWeight:600,borderRadius:`9999px`,border:c===e?`1px solid #7c3aed`:`1px solid #e2e8f0`,background:c===e?`#7c3aed`:`#fff`,color:c===e?`#fff`:`#64748b`,cursor:`pointer`,transition:`all 0.15s ease`},children:e},e))}),n&&(0,$.jsx)(`div`,{style:{padding:`48px`,textAlign:`center`,background:`#fff`,borderRadius:`12px`,border:`1px solid #f1f5f9`,boxShadow:`0 1px 3px rgba(0,0,0,0.04)`},children:(0,$.jsx)(`div`,{style:{fontSize:`15px`,color:`#64748b`},children:`Loading services...`})}),!n&&i&&(0,$.jsx)(`div`,{style:{padding:`20px`,background:`#fef2f2`,border:`1px solid #fecaca`,borderRadius:`12px`,color:`#dc2626`,fontSize:`14px`,marginBottom:`16px`},children:i}),!n&&!i&&h.length===0&&(0,$.jsxs)(`div`,{style:{padding:`60px 24px`,textAlign:`center`,background:`#fff`,borderRadius:`12px`,border:`1px solid #f1f5f9`,boxShadow:`0 1px 3px rgba(0,0,0,0.04)`},children:[(0,$.jsx)(`div`,{style:{fontSize:`18px`,fontWeight:600,color:`#1e293b`,marginBottom:`8px`},children:`No services published yet.`}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`#64748b`,marginBottom:`20px`},children:`Be the first to build one.`}),(0,$.jsx)(`button`,{onClick:m,style:{padding:`10px 24px`,fontSize:`14px`,fontWeight:600,borderRadius:`8px`,border:`none`,background:`linear-gradient(135deg, #7c3aed, #6d28d9)`,color:`#fff`,cursor:`pointer`},children:`Build a Service`})]}),!n&&!i&&h.length>0&&(0,$.jsx)(`div`,{style:{display:`grid`,gridTemplateColumns:`repeat(auto-fill, minmax(320px, 1fr))`,gap:`16px`},children:h.map(e=>{let t=e.subscriber_count||0,n=e.rating,r=e.price||`Free`,i=e.category||`Other`,a=u===e.id;return(0,$.jsxs)(`div`,{style:{background:`#fff`,borderRadius:`12px`,border:`1px solid #f1f5f9`,boxShadow:`0 1px 3px rgba(0,0,0,0.04), 0 1px 2px rgba(0,0,0,0.02)`,padding:`20px`,display:`flex`,flexDirection:`column`,transition:`box-shadow 0.15s ease`},children:[(0,$.jsx)(`div`,{style:{fontSize:`18px`,fontWeight:700,color:`#1e293b`,marginBottom:`4px`,lineHeight:1.3},children:e.name||`Untitled Service`}),(0,$.jsxs)(`div`,{style:{fontSize:`13px`,color:`#94a3b8`,marginBottom:`10px`},children:[`by `,e.creator_name||`Unknown`]}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`#475569`,lineHeight:1.5,marginBottom:`12px`,display:`-webkit-box`,WebkitLineClamp:3,WebkitBoxOrient:`vertical`,overflow:`hidden`,textOverflow:`ellipsis`,minHeight:`63px`},children:e.description||`No description provided.`}),(0,$.jsx)(`div`,{style:{marginBottom:`12px`},children:(0,$.jsx)(`span`,{style:{display:`inline-block`,fontSize:`11px`,fontWeight:600,padding:`3px 10px`,borderRadius:`9999px`,background:`#f3e8ff`,color:`#7c3aed`,letterSpacing:`0.02em`,textTransform:`uppercase`},children:i})}),(0,$.jsxs)(`div`,{style:{display:`flex`,alignItems:`center`,gap:`12px`,flexWrap:`wrap`,marginBottom:`16px`},children:[(0,$.jsx)(`span`,{style:{fontSize:`16px`,fontWeight:800,color:`#1e293b`},children:r}),(0,$.jsx)(`span`,{style:{fontSize:`12px`,color:`#94a3b8`,fontWeight:500},children:t>0?`${t} subscriber${t===1?``:`s`}`:`New`}),(0,$.jsx)(`span`,{style:{fontSize:`12px`,color:`#94a3b8`,fontWeight:500,marginLeft:`auto`},children:n==null?`No reviews yet`:`${n} / 5`})]}),(0,$.jsx)(`div`,{style:{marginTop:`auto`},children:a?(0,$.jsx)(`div`,{style:{padding:`10px 14px`,fontSize:`13px`,color:`#7c3aed`,background:`#faf5ff`,borderRadius:`8px`,border:`1px solid #e9d5ff`,textAlign:`center`,lineHeight:1.4},children:`Coming soon -- subscribe notifications launching next month`}):(0,$.jsx)(`button`,{onClick:()=>p(e.id),style:{width:`100%`,padding:`10px 0`,fontSize:`14px`,fontWeight:600,borderRadius:`8px`,border:`2px solid #7c3aed`,background:`transparent`,color:`#7c3aed`,cursor:`pointer`,transition:`all 0.15s ease`},children:`Add to Vault`})})]},e.id)})})]})}function Dx(){let e=Ts(),t=ig(),n=e?.currentUser,[r,i]=(0,_.useState)([]),[a,o]=(0,_.useState)(!0),[s,c]=(0,_.useState)(null),[l,u]=(0,_.useState)(!1),[d,f]=(0,_.useState)(``),[p,m]=(0,_.useState)(``),[h,g]=(0,_.useState)([]),[v,y]=(0,_.useState)([]),[b,x]=(0,_.useState)(`subscription`),[S,C]=(0,_.useState)(0),[w,T]=(0,_.useState)(7),[E,D]=(0,_.useState)(`consulting`);(0,_.useEffect)(()=>{n&&O()},[n]);async function O(){o(!0);try{let e=await r_(Bg(Qh(t,`workers`),Hg(`creator_id`,`==`,n.uid))),r=[];e.forEach(e=>r.push({id:e.id,...e.data()})),i(r),r.length>0&&!s&&ee(r[0])}catch(e){console.error(`Failed to load workers:`,e)}finally{o(!1)}}function ee(e){c(e),f(e.name||``),m(e.description||``),g(e.raas?.workflow_stages||e.stages||[]),y(e.raas?.knowledge_base||[]),x(e.pricing?.model||`subscription`),C(e.pricing?.price||0),T(e.pricing?.trial_days||7),D(e.category||`consulting`)}async function k(){if(s){u(!0);try{await i_($h(t,`workers`,s.id),{name:d,description:p,category:E,pricing:{model:b,price:Number(S),trial_days:w},"raas.workflow_stages":h,"raas.knowledge_base":v}),i(e=>e.map(e=>e.id===s.id?{...e,name:d,description:p,category:E,pricing:{model:b,price:Number(S),trial_days:w},raas:{...e.raas,workflow_stages:h,knowledge_base:v}}:e)),c(e=>({...e,name:d,description:p}))}catch(e){console.error(`Failed to save worker:`,e)}finally{u(!1)}}}async function te(){if(!s)return;let e=!s.published;u(!0);try{await i_($h(t,`workers`,s.id),{published:e,status:e?`published`:`draft`}),i(t=>t.map(t=>t.id===s.id?{...t,published:e,status:e?`published`:`draft`}:t)),c(t=>({...t,published:e,status:e?`published`:`draft`}))}catch(e){console.error(`Failed to toggle publish:`,e)}finally{u(!1)}}return a?(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`pageHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Creator Dashboard`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Loading your workers...`})]})}),(0,$.jsx)(`div`,{style:{padding:`60px`,textAlign:`center`,background:`#fff`,borderRadius:`12px`,border:`1px solid #f1f5f9`},children:(0,$.jsxs)(`svg`,{width:`32`,height:`32`,viewBox:`0 0 200 200`,fill:`none`,style:{animation:`spinKey 1.5s ease-in-out infinite`},children:[(0,$.jsx)(`circle`,{cx:`100`,cy:`100`,r:`95`,fill:`#7c3aed`}),(0,$.jsx)(`circle`,{cx:`100`,cy:`100`,r:`80`,fill:`#7c3aed`,stroke:`white`,strokeWidth:`2`}),(0,$.jsx)(`circle`,{cx:`100`,cy:`80`,r:`18`,fill:`white`}),(0,$.jsx)(`circle`,{cx:`100`,cy:`80`,r:`8`,fill:`#7c3aed`}),(0,$.jsx)(`rect`,{x:`94`,y:`90`,width:`12`,height:`35`,fill:`white`})]})})]}):r.length===0?(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`pageHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Creator Dashboard`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Manage your AI Workers`})]})}),(0,$.jsxs)(`div`,{style:{padding:`60px 24px`,textAlign:`center`,background:`#fff`,borderRadius:`12px`,border:`1px solid #f1f5f9`},children:[(0,$.jsx)(`div`,{style:{fontSize:`18px`,fontWeight:600,color:`#1e293b`,marginBottom:`8px`},children:`No Workers yet`}),(0,$.jsx)(`div`,{style:{fontSize:`14px`,color:`#64748b`,marginBottom:`20px`,maxWidth:`380px`,margin:`0 auto 20px`},children:`Start a conversation about your expertise on the landing page. The AI will interview you and build a publishable Worker.`}),(0,$.jsx)(`button`,{onClick:()=>window.dispatchEvent(new CustomEvent(`ta:navigate`,{detail:{section:`raas-store`}})),style:{padding:`10px 24px`,fontSize:`14px`,fontWeight:600,borderRadius:`8px`,border:`2px solid #7c3aed`,background:`transparent`,color:`#7c3aed`,cursor:`pointer`},children:`Browse the RAAS Store`})]})]}):(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`pageHeader`,children:(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h1`,{className:`h1`,children:`Creator Dashboard`}),(0,$.jsx)(`p`,{className:`subtle`,children:`Manage your AI Workers. Edit content, adjust pricing, and track performance.`})]})}),(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`240px 1fr`,gap:`20px`,alignItems:`start`},children:[(0,$.jsx)(`div`,{style:{background:`#fff`,borderRadius:`12px`,border:`1px solid #f1f5f9`,padding:`10px`},children:r.map(e=>(0,$.jsxs)(`button`,{onClick:()=>ee(e),style:{display:`block`,width:`100%`,textAlign:`left`,padding:`12px 14px`,borderRadius:`8px`,border:`none`,background:s?.id===e.id?`#f3e8ff`:`transparent`,cursor:`pointer`,marginBottom:`4px`,fontFamily:`inherit`},children:[(0,$.jsx)(`div`,{style:{fontSize:`14px`,fontWeight:600,color:`#1e293b`},children:e.name||`Untitled`}),(0,$.jsx)(`span`,{style:{display:`inline-block`,marginTop:`4px`,fontSize:`11px`,fontWeight:600,padding:`2px 8px`,borderRadius:`10px`,background:e.published?`#dcfce7`:`#f1f5f9`,color:e.published?`#16a34a`:`#64748b`},children:e.published?`Live`:`Draft`})]},e.id))}),s&&(0,$.jsxs)(`div`,{style:{background:`#fff`,borderRadius:`12px`,border:`1px solid #f1f5f9`,padding:`28px`},children:[(0,$.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`1fr 1fr 1fr`,gap:`16px`,marginBottom:`28px`},children:[(0,$.jsxs)(`div`,{style:{background:`#f8fafc`,borderRadius:`10px`,padding:`16px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`28px`,fontWeight:800,color:`#1e293b`},children:s.subscriber_count||0}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,fontWeight:600,color:`#94a3b8`,textTransform:`uppercase`,letterSpacing:`0.5px`,marginTop:`4px`},children:`Subscribers`})]}),(0,$.jsxs)(`div`,{style:{background:`#f8fafc`,borderRadius:`10px`,padding:`16px`,textAlign:`center`},children:[(0,$.jsxs)(`div`,{style:{fontSize:`28px`,fontWeight:800,color:`#1e293b`},children:[`$`,((s.subscriber_count||0)*(s.pricing?.price||0)).toLocaleString()]}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,fontWeight:600,color:`#94a3b8`,textTransform:`uppercase`,letterSpacing:`0.5px`,marginTop:`4px`},children:`Monthly Revenue`})]}),(0,$.jsxs)(`div`,{style:{background:`#f8fafc`,borderRadius:`10px`,padding:`16px`,textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`28px`,fontWeight:800,color:`#1e293b`},children:s.rating==null?`--`:s.rating.toFixed(1)}),(0,$.jsx)(`div`,{style:{fontSize:`12px`,fontWeight:600,color:`#94a3b8`,textTransform:`uppercase`,letterSpacing:`0.5px`,marginTop:`4px`},children:`Rating`})]})]}),(0,$.jsxs)(`div`,{style:{borderBottom:`1px solid #f1f5f9`,paddingBottom:`20px`,marginBottom:`20px`},children:[(0,$.jsx)(`label`,{style:Ox,children:`Name`}),(0,$.jsx)(`input`,{style:kx,value:d,onChange:e=>f(e.target.value)}),(0,$.jsx)(`label`,{style:Ox,children:`Description`}),(0,$.jsx)(`textarea`,{style:{...kx,minHeight:`80px`,resize:`vertical`},value:p,onChange:e=>m(e.target.value)}),(0,$.jsx)(`label`,{style:Ox,children:`Category`}),(0,$.jsxs)(`select`,{style:kx,value:E,onChange:e=>D(e.target.value),children:[(0,$.jsx)(`option`,{value:`consulting`,children:`Consulting`}),(0,$.jsx)(`option`,{value:`healthcare`,children:`Healthcare`}),(0,$.jsx)(`option`,{value:`real_estate`,children:`Real Estate`}),(0,$.jsx)(`option`,{value:`finance`,children:`Finance`}),(0,$.jsx)(`option`,{value:`education`,children:`Education`}),(0,$.jsx)(`option`,{value:`legal`,children:`Legal`}),(0,$.jsx)(`option`,{value:`marketing`,children:`Marketing`}),(0,$.jsx)(`option`,{value:`other`,children:`Other`})]})]}),(0,$.jsxs)(`div`,{style:{borderBottom:`1px solid #f1f5f9`,paddingBottom:`20px`,marginBottom:`20px`},children:[(0,$.jsx)(`label`,{style:Ox,children:`Pricing Model`}),(0,$.jsxs)(`select`,{style:kx,value:b,onChange:e=>x(e.target.value),children:[(0,$.jsx)(`option`,{value:`subscription`,children:`Monthly Subscription`}),(0,$.jsx)(`option`,{value:`per-project`,children:`Per Project`}),(0,$.jsx)(`option`,{value:`free`,children:`Free`})]}),b!==`free`&&(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`label`,{style:Ox,children:`Price ($)`}),(0,$.jsx)(`input`,{style:kx,type:`number`,value:S,onChange:e=>C(e.target.value),min:`0`}),(0,$.jsx)(`label`,{style:Ox,children:`Trial Days`}),(0,$.jsx)(`input`,{style:kx,type:`number`,value:w,onChange:e=>T(Number(e.target.value)),min:`0`})]})]}),(0,$.jsxs)(`div`,{style:{borderBottom:`1px solid #f1f5f9`,paddingBottom:`20px`,marginBottom:`20px`},children:[(0,$.jsx)(`label`,{style:Ox,children:`Workflow Stages`}),h.map((e,t)=>(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`,marginBottom:`6px`},children:[(0,$.jsx)(`input`,{style:{...kx,flex:1},value:typeof e==`string`?e:e.name||``,onChange:e=>{let n=[...h];n[t]=e.target.value,g(n)}}),(0,$.jsx)(`button`,{onClick:()=>g(h.filter((e,n)=>n!==t)),style:{padding:`6px 12px`,borderRadius:`8px`,background:`#fef2f2`,color:`#dc2626`,border:`none`,fontSize:`13px`,fontWeight:600,cursor:`pointer`},children:`Remove`})]},t)),(0,$.jsx)(`button`,{onClick:()=>g([...h,``]),style:{padding:`6px 12px`,borderRadius:`8px`,background:`#f3e8ff`,color:`#7c3aed`,border:`none`,fontSize:`13px`,fontWeight:600,cursor:`pointer`},children:`Add Stage`})]}),(0,$.jsxs)(`div`,{style:{marginBottom:`24px`},children:[(0,$.jsx)(`label`,{style:Ox,children:`Knowledge Base`}),v.map((e,t)=>(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`8px`,marginBottom:`6px`},children:[(0,$.jsx)(`input`,{style:{...kx,flex:1},value:e,onChange:e=>{let n=[...v];n[t]=e.target.value,y(n)}}),(0,$.jsx)(`button`,{onClick:()=>y(v.filter((e,n)=>n!==t)),style:{padding:`6px 12px`,borderRadius:`8px`,background:`#fef2f2`,color:`#dc2626`,border:`none`,fontSize:`13px`,fontWeight:600,cursor:`pointer`},children:`Remove`})]},t)),(0,$.jsx)(`button`,{onClick:()=>y([...v,``]),style:{padding:`6px 12px`,borderRadius:`8px`,background:`#f3e8ff`,color:`#7c3aed`,border:`none`,fontSize:`13px`,fontWeight:600,cursor:`pointer`},children:`Add Insight`})]}),(0,$.jsxs)(`div`,{style:{display:`flex`,gap:`12px`},children:[(0,$.jsx)(`button`,{onClick:k,disabled:l,style:{padding:`12px 24px`,borderRadius:`10px`,border:`none`,background:`#7c3aed`,color:`white`,fontSize:`15px`,fontWeight:600,cursor:l?`not-allowed`:`pointer`,opacity:l?.6:1},children:l?`Saving...`:`Save Changes`}),(0,$.jsx)(`button`,{onClick:te,disabled:l,style:{padding:`12px 24px`,borderRadius:`10px`,border:`none`,background:s.published?`#dc2626`:`#16a34a`,color:`white`,fontSize:`15px`,fontWeight:600,cursor:l?`not-allowed`:`pointer`,opacity:l?.6:1},children:s.published?`Unpublish`:`Publish to Store`})]})]})]})]})}var Ox={display:`block`,fontSize:`12px`,fontWeight:600,color:`#64748b`,textTransform:`uppercase`,letterSpacing:`0.5px`,marginTop:`16px`,marginBottom:`6px`},kx={display:`block`,width:`100%`,padding:`10px 14px`,borderRadius:`10px`,border:`1px solid #e2e8f0`,fontSize:`14px`,color:`#1e293b`,background:`#f8fafc`,outline:`none`,boxSizing:`border-box`,fontFamily:`inherit`};function Ax({onBackToHub:e}){let[t,n]=(0,_.useState)(`dashboard`),[r,i]=(0,_.useState)(!1);(0,_.useEffect)(()=>{localStorage.getItem(`hasSeenOnboardingTour`)||setTimeout(()=>i(!0),500)},[]),(0,_.useEffect)(()=>{function e(e){let t=e.detail?.section;t&&n(t)}return window.addEventListener(`ta:navigate`,e),()=>window.removeEventListener(`ta:navigate`,e)},[]);function a(){switch(t){case`dashboard`:return(0,$.jsx)(wv,{});case`analyst`:return(0,$.jsx)(Tv,{});case`rules-resources`:return(0,$.jsx)(Dv,{});case`inventory`:return(0,$.jsx)(Mv,{});case`ai-chats`:return(0,$.jsx)(Yv,{});case`customers`:return(0,$.jsx)(Qv,{});case`appointments`:return(0,$.jsx)($v,{});case`staff`:return(0,$.jsx)(ey,{});case`reports`:return(0,$.jsx)(gy,{});case`data-apis`:return(0,$.jsx)(_y,{});case`fi-products`:return(0,$.jsx)(Cy,{});case`auto-service`:return(0,$.jsx)(Ey,{});case`sales-pipeline`:return(0,$.jsx)(ky,{});case`rules`:return(0,$.jsx)(Ry,{});case`settings`:return(0,$.jsx)(by,{});case`my-vehicles`:return(0,$.jsx)(qy,{});case`my-properties`:return(0,$.jsx)(Qy,{});case`my-documents`:return(0,$.jsx)(rb,{});case`my-logbook`:return(0,$.jsx)(sb,{});case`my-certifications`:return(0,$.jsx)(ub,{});case`my-wallet`:return(0,$.jsx)(fb,{});case`portfolio`:return(0,$.jsx)(hb,{});case`research`:return(0,$.jsx)(yb,{});case`clients-lps`:return(0,$.jsx)(Cb,{});case`deal-pipeline`:return(0,$.jsx)(Ob,{});case`vault-documents`:return(0,$.jsx)(Ab,{});case`vault-assets`:return(0,$.jsx)(Mb,{});case`vault-deadlines`:return(0,$.jsx)(Nb,{});case`re-listings`:return(0,$.jsx)(Vb,{});case`re-buyers`:return(0,$.jsx)(qb,{});case`re-transactions`:return(0,$.jsx)(tx,{});case`re-properties`:return(0,$.jsx)(ax,{});case`re-tenants`:return(0,$.jsx)(cx,{});case`re-maintenance`:return(0,$.jsx)(px,{});case`re-marketing`:return(0,$.jsx)(Sx,{});case`worker-preview`:return(0,$.jsx)(wx,{});case`raas-store`:return(0,$.jsx)(Ex,{});case`creator-dashboard`:return(0,$.jsx)(Dx,{});default:return(0,$.jsx)(wv,{})}}let o=localStorage.getItem(`VERTICAL`)||`auto`;return(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(cv,{currentSection:t,onNavigate:n,onBackToHub:e,children:a()}),r&&(0,$.jsx)(w_,{vertical:o,onComplete:()=>i(!1)})]})}function jx(){let[e,t]=(0,_.useState)(()=>typeof window<`u`?localStorage.getItem(`ID_TOKEN`):null),[n,r]=(0,_.useState)(`loading`),[i,a]=(0,_.useState)(()=>!!new URLSearchParams(window.location.search).get(`token`)),[o,s]=(0,_.useState)(null),[c,l]=(0,_.useState)(``);(0,_.useEffect)(()=>{let e=new URLSearchParams(window.location.search),n=e.get(`token`),r=e.get(`sid`),i=e.get(`tid`);r&&sessionStorage.setItem(`ta_platform_sid`,r),i&&sessionStorage.setItem(`ta_preselected_tid`,i),n&&oa(c_,n).then(async e=>{let n=await e.user.getIdToken(!0);localStorage.setItem(`ID_TOKEN`,n),t(n),window.history.replaceState({},``,window.location.pathname),a(!1)}).catch(e=>{console.error(`Custom token sign-in failed:`,e),a(!1)}),n||t(localStorage.getItem(`ID_TOKEN`));let o=e=>{e.key===`ID_TOKEN`&&t(e.newValue)};window.addEventListener(`storage`,o);let s=c_.onAuthStateChanged(async e=>{if(e)try{let n=await e.getIdToken(!0);localStorage.setItem(`ID_TOKEN`,n),t(n),l(e.displayName||e.email?.split(`@`)[0]||``)}catch(e){console.error(`Failed to refresh token:`,e)}else localStorage.removeItem(`ID_TOKEN`),t(null)});return()=>{window.removeEventListener(`storage`,o),s()}},[]),(0,_.useEffect)(()=>{if(!e||i){i||r(`login`);return}async function n(){try{let n=`https://titleapp-frontdoor.titleapp-core.workers.dev`,i=sessionStorage.getItem(`ta_preselected_tid`);if(i){sessionStorage.removeItem(`ta_preselected_tid`);let a=await fetch(`${n}/api?path=/v1/me:memberships`,{headers:{Authorization:`Bearer ${e}`}});if(a.status===401){localStorage.removeItem(`ID_TOKEN`),t(null);return}let o=await a.json();if(o.ok&&o.memberships){let e=o.memberships.find(e=>e.tenantId===i);if(e){let t=o.tenants?.[e.tenantId]||{};localStorage.setItem(`TENANT_ID`,e.tenantId),t.vertical&&t.vertical!==`GLOBAL`&&localStorage.setItem(`VERTICAL`,t.vertical.toLowerCase()),t.jurisdiction&&t.jurisdiction!==`GLOBAL`&&localStorage.setItem(`JURISDICTION`,t.jurisdiction),(t.companyName||t.name)&&(localStorage.setItem(`COMPANY_NAME`,t.companyName||t.name),localStorage.setItem(`WORKSPACE_NAME`,t.companyName||t.name)),r(`app`);return}}}let a=await fetch(`${n}/api?path=/v1/me:memberships`,{headers:{Authorization:`Bearer ${e}`}});if(a.status===401){localStorage.removeItem(`ID_TOKEN`),t(null);return}let o=await a.json();if(o.ok&&o.memberships&&o.memberships.length===0){let t=sessionStorage.getItem(`ta_discovered_context`);if(t)try{let i=JSON.parse(t);if(i.vertical){let t={"real-estate":`real-estate`,auto:`auto`,analyst:`analyst`,aviation:`aviation`}[i.vertical]||i.vertical,a=i.businessName||(i.intent===`personal`?`My Vault`:`My Workspace`),o=i.intent===`personal`?`personal`:`business`,s=await(await fetch(`${n}/api?path=/v1/onboarding:claimTenant`,{method:`POST`,headers:{Authorization:`Bearer ${e}`,"Content-Type":`application/json`},body:JSON.stringify({tenantName:a,tenantType:o,vertical:t,jurisdiction:i.location||`GLOBAL`,onboardingState:{path:`discovery`,vertical:t,dataSource:`sample`},verticalConfig:i.subtype?{subtype:i.subtype}:{}})})).json();if(s.ok&&s.tenantId){localStorage.setItem(`TENANT_ID`,s.tenantId),localStorage.setItem(`VERTICAL`,t),i.location&&localStorage.setItem(`JURISDICTION`,i.location),i.businessName&&(localStorage.setItem(`COMPANY_NAME`,i.businessName),localStorage.setItem(`WORKSPACE_NAME`,i.businessName)),localStorage.setItem(`ONBOARDING_STATE`,JSON.stringify({path:`discovery`,vertical:t,dataSource:`sample`,completedAt:new Date().toISOString()})),sessionStorage.removeItem(`ta_discovered_context`),r(`app`);return}}}catch(e){console.error(`Auto-workspace from discovery failed:`,e)}r(`onboarding`)}else r(`hub`)}catch(e){console.error(`Failed to resolve view:`,e),r(`hub`)}}n()},[e,i]);function u(e){e.id!==`vault`&&localStorage.setItem(`TENANT_ID`,e.id),r(`app`),(window.location.pathname===`/login`||window.location.pathname===`/`)&&window.history.replaceState({},``,`/dashboard`)}function d(){r(`hub`),window.location.pathname!==`/`&&window.history.replaceState({},``,`/`)}return i||n===`loading`?(0,$.jsx)(`div`,{style:{minHeight:`100vh`,display:`flex`,alignItems:`center`,justifyContent:`center`,background:`#f8fafc`},children:(0,$.jsxs)(`div`,{style:{textAlign:`center`},children:[(0,$.jsx)(`div`,{style:{fontSize:`20px`,fontWeight:600,color:`#7c3aed`,marginBottom:`16px`},children:`TitleApp`}),(0,$.jsx)(`div`,{style:{fontSize:`16px`,color:`#6b7280`},children:`Loading...`})]})}):!e||n===`login`?(0,$.jsx)(__,{}):n===`onboarding`?(0,$.jsx)(`div`,{className:`appShell`,style:{minHeight:`100vh`},children:(0,$.jsxs)(`div`,{className:`dualPanel`,style:{minHeight:`100vh`},children:[(0,$.jsx)(`div`,{style:{flex:1,minWidth:0,overflowY:`auto`,height:`100vh`},children:(0,$.jsx)(C_,{onComplete:()=>r(`hub`),onStepChange:s})}),(0,$.jsx)(`aside`,{className:`chatSidebar`,children:(0,$.jsx)(A_,{currentSection:`onboarding`,onboardingStep:o})})]})}):n===`hub`?(0,$.jsx)(_v,{userName:c,onLaunch:u}):(0,$.jsx)(Ax,{onBackToHub:d})}(0,g.createRoot)(document.getElementById(`root`)).render((0,$.jsx)(_.StrictMode,{children:(0,$.jsx)(jx,{})}));